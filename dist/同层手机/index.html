<!DOCTYPE html>
<html lang="zh-CN">
  <!-- 此同层手机免费发布于discord的尾巴镇社区和旅程社区，链接https://discord.com/channels/1379304008157499423/1388180976873766973，https://discord.com/channels/1291925535324110879/1388182155707814009 -->
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no" />
    <title>暴力美学BLMX同层手机</title>
    <!-- 此同层手机免费发布于discord的尾巴镇社区和旅程社区，链接https://discord.com/channels/1379304008157499423/1388180976873766973，https://discord.com/channels/1291925535324110879/1388182155707814009 -->
    <!-- 引入必要的外部库 -->
    <!-- 样式现在通过TypeScript模块加载 -->
  <style>/*!********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** css ./node_modules/.pnpm/css-loader@7.1.2_webpack@5.99.8/node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[0].oneOf[5].use[1]!./node_modules/.pnpm/postcss-loader@8.1.1_postcs_8fd601f8fbe3c30423fd30a5e1ce2dcd/node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[0].oneOf[5].use[2]!./node_modules/.pnpm/sass-loader@16.0.5_sass@1.87.0_webpack@5.99.8/node_modules/sass-loader/dist/cjs.js!./src/同层手机/styles/main.scss ***!
  \********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
@import url(https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@300;400;500;700&display=swap);
/*!************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** css ./node_modules/.pnpm/css-loader@7.1.2_webpack@5.99.8/node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[0].oneOf[5].use[1]!./node_modules/.pnpm/postcss-loader@8.1.1_postcs_8fd601f8fbe3c30423fd30a5e1ce2dcd/node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[0].oneOf[5].use[2]!./node_modules/.pnpm/sass-loader@16.0.5_sass@1.87.0_webpack@5.99.8/node_modules/sass-loader/dist/cjs.js!./src/同层手机/styles/main.scss (1) ***!
  \************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
@import url(https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css);
/*!************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** css ./node_modules/.pnpm/css-loader@7.1.2_webpack@5.99.8/node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[0].oneOf[5].use[1]!./node_modules/.pnpm/postcss-loader@8.1.1_postcs_8fd601f8fbe3c30423fd30a5e1ce2dcd/node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[0].oneOf[5].use[2]!./node_modules/.pnpm/sass-loader@16.0.5_sass@1.87.0_webpack@5.99.8/node_modules/sass-loader/dist/cjs.js!./src/同层手机/styles/main.scss (2) ***!
  \************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
@charset "UTF-8";
@font-face {
  font-family: "MyCustomFont";
  src: url("https://files.catbox.moe/er4wsg.ttf");
}
:root {
  --text-color: #ffffff;
  --primary-blue: #72adf3;
  --light-blue: #a8cbeb;
  --ultra-light-blue: #e8f4fd;
  --blue-gradient-start: #accef2;
  --blue-gradient-end: #98c2f5;
  --soft-blue: #b8d4f0;
  --deep-blue: #2c5282;
  --wechat-green-icon: var(--primary-blue);
  --wechat-green-bubble: var(--light-blue);
  --wechat-bg: var(--ultra-light-blue);
  --link-color: var(--primary-blue);
  --footer-height: 2.8125rem;
  --panel-height: 14.0625rem;
  --sticker-size: 120px;
  --bubble-shadow: 0 2px 8px rgba(74, 144, 226, 0.15);
  --text-primary: rgb(139, 162, 186);
  --text-secondary: #64748b;
  --border-color: #cbd5e1;
  --header-bg: linear-gradient(135deg, #f8faff 0%, #eef4ff 100%);
  --wechat-bubble-them-bg: #ffffff;
  --wechat-bubble-me-bg: var(--light-blue);
  --wechat-bubble-them-text: #333333;
  --wechat-bubble-me-text: #ffffff;
  --status-bar-color: #428af2;
  --checkbox-bg-unchecked: #ffffff;
  --checkbox-border-unchecked: var(--border-color);
  --checkbox-border-checked: var(--primary-blue);
  --checkbox-text-unchecked: var(--text-primary);
  --checkbox-shadow-unchecked: 0 2px 6px var(--shadow-color-rgba);
  --checkbox-shadow-checked: 0 4px 12px var(--shadow-color-rgba);
  --checkbox-hover-bg: var(--ultra-light-blue);
  --dynamic-island-color: #a0c4f4;
  --app-bg-color: #ffffff;
  --settings-bg-color: #f2f2f7;
  --settings-card-bg-color: #ffffff;
  --shadow-color: #4a90e2;
  --shadow-color-rgba: rgba(74, 144, 226, 0.3);
  --settings-icon-color: #999999;
  --primary-gradient-light: #accef2;
  --primary-gradient-dark: #98c2f5;
  --shadow-r: 74;
  --shadow-g: 144;
  --shadow-b: 226;
}

/**
 * SCSS 混合器
 * 用于减少样式重复，提供可复用的样式组件
 */
/**
 * 对话框主题适配
 * @param $primary-color 主色调
 * @param $bg-color 背景色
 * @param $text-color 文字色
 * @param $border-color 边框色
 * @param $accent-color 强调色
 */
/**
 * 按钮主题适配
 * @param $primary-color 主色调
 * @param $hover-color 悬停色
 */
/**
 * 输入框主题适配
 * @param $border-color 边框色
 * @param $focus-color 聚焦色
 * @param $bg-color 背景色
 */
/**
 * Flexbox 居中
 * @param $direction 方向 (row | column)
 */
/**
 * Flexbox 间距分布
 * @param $direction 方向 (row | column)
 */
/**
 * 绝对定位居中
 */
/**
 * 固定宽高比
 * @param $ratio 宽高比 (如: 16/9)
 */
/**
 * 淡入动画
 * @param $duration 持续时间
 * @param $delay 延迟时间
 */
@keyframes fadeIn {
  to {
    opacity: 1;
  }
}
/**
 * 滑入动画
 * @param $direction 方向 (up | down | left | right)
 * @param $distance 距离
 * @param $duration 持续时间
 */
@keyframes slideInUp {
  to {
    transform: translateY(0);
    opacity: 1;
  }
}
@keyframes slideInDown {
  to {
    transform: translateY(0);
    opacity: 1;
  }
}
@keyframes slideInLeft {
  to {
    transform: translateX(0);
    opacity: 1;
  }
}
@keyframes slideInRight {
  to {
    transform: translateX(0);
    opacity: 1;
  }
}
/**
 * 脉冲动画
 * @param $scale 缩放比例
 * @param $duration 持续时间
 */
/**
 * 媒体查询断点
 */
/**
 * 响应式媒体查询
 * @param $breakpoint 断点名称或具体数值
 */
/**
 * 移动优先响应式
 * @param $breakpoint 断点名称或具体数值
 */
/**
 * 桌面优先响应式
 * @param $breakpoint 断点名称或具体数值
 */
/**
 * 文本省略
 * @param $lines 行数 (1 为单行省略)
 */
/**
 * 清除浮动
 */
/**
 * 隐藏滚动条
 */
/**
 * 自定义滚动条
 * @param $width 宽度
 * @param $track-color 轨道颜色
 * @param $thumb-color 滑块颜色
 */
/**
 * 阴影效果
 * @param $level 阴影级别 (1-5)
 */
html {
  font-size: 16px;
}

@media (max-width: 360px) {
  html {
    font-size: 4.4444444444vw;
  }
}
body {
  margin: 0;
  padding: 0.25rem;
  min-height: 100vh;
  display: flex;
  justify-content: center;
  align-items: center;
  box-sizing: border-box;
  background: transparent;
  font-family: "MyCustomFont", sans-serif;
}

* {
  box-sizing: border-box;
  -webkit-tap-highlight-color: rgba(0, 0, 0, 0);
  transition-timing-function: ease;
}

@keyframes fadeIn {
  from {
    opacity: 0;
    transform: translateY(10px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}
@keyframes fadeOut {
  from {
    opacity: 1;
  }
  to {
    opacity: 0;
  }
}
@keyframes slideIn {
  from {
    opacity: 0;
    transform: translateY(25px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}
@keyframes messageSlideIn {
  from {
    opacity: 0;
    transform: translateY(25px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}
.fade-out {
  animation: fadeOut 0.5s forwards;
}

.new-message {
  animation: slideIn 0.5s cubic-bezier(0.22, 0.61, 0.36, 1);
}

.hidden {
  display: none !important;
}

.invisible {
  visibility: hidden;
  opacity: 0;
}

.visible {
  visibility: visible;
  opacity: 1;
}

a,
button,
div[onclick],
span[onclick],
.clickable,
.btn,
.dialog-btn,
.app-icon,
.message-bubble,
.contact-item,
.moment-item,
.sticker-item,
.checkbox-btn {
  -webkit-tap-highlight-color: rgba(0, 0, 0, 0) !important;
  -webkit-touch-callout: none;
  -webkit-user-select: none;
  user-select: none;
}

.phone-frame {
  max-width: 360px;
  width: 100%;
  padding: 0.6rem;
  background: var(--phoneFrame, var(--primary-blue));
  border-radius: 3.125rem;
  position: relative;
  box-shadow: 0 15px 20px var(--shadow-color-rgba), 0 8px 20px var(--shadow-color-rgba), 0 3px 8px rgba(0, 0, 0, 0.1), inset 0 1px 0 rgba(255, 255, 255, 0.5), inset 0 -1px 0 rgba(255, 255, 255, 0.2), 0 5px var(--shadow-color-rgba);
  transition: all 0.2s ease;
  transition: box-shadow 0.3s ease, background 0.3s ease;
}
.phone-frame::before {
  content: "";
  position: absolute;
  top: -2px;
  left: -2px;
  right: -2px;
  bottom: -2px;
  border-radius: 3.125rem;
  background: linear-gradient(45deg, var(--primary-blue), var(--blue-gradient-end), var(--blue-gradient-start), var(--primary-blue));
  background-size: 400% 400%;
  animation: gradientFlow 3s ease infinite;
  z-index: -1;
}

@keyframes gradientFlow {
  0% {
    background-position: 0% 50%;
  }
  50% {
    background-position: 100% 50%;
  }
  100% {
    background-position: 0% 50%;
  }
}
.phone-screen {
  height: 48.75rem;
  border-radius: 2.8rem;
  overflow: hidden;
  position: relative;
  display: flex;
  flex-direction: column;
  background-color: var(--wechat-bg);
  box-shadow: inset 0 0 0 1px rgba(0, 0, 0, 0.08), inset 0 0 15px rgba(0, 0, 0, 0.03);
}
.phone-screen::before {
  content: "";
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  border-radius: 2.25rem;
  box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.2), inset 0 -1px 0 rgba(0, 0, 0, 0.1), inset 1px 0 0 rgba(255, 255, 255, 0.1), inset -1px 0 0 rgba(0, 0, 0, 0.1);
  pointer-events: none;
  z-index: 1000;
}

.dynamic-island {
  position: absolute;
  top: 0.625rem;
  left: 50%;
  transform: translateX(-50%);
  width: 8.4375rem;
  height: 2rem;
  background: var(--dynamic-island-color);
  border-radius: 1rem;
  z-index: 100;
  cursor: pointer;
  transition: all 0.2s ease;
}
.dynamic-island:hover {
  transform: translateX(-50%) scale(1.05);
  box-shadow: 0 2px 8px var(--shadow-color-rgba);
}
.dynamic-island.generating-active {
  box-shadow: 0 0 15px var(--shadow-color-rgba);
  animation: pulse-generating 1.5s infinite ease-in-out;
}
.dynamic-island.fullscreen-active {
  animation: pulse-expand 0.6s ease-in-out;
}
.dynamic-island.fullscreen-inactive {
  animation: pulse-contract 0.6s ease-in-out;
}

@keyframes pulse-generating {
  0% {
    transform: translateX(-50%) scale(1);
  }
  50% {
    transform: translateX(-50%) scale(1.05);
    box-shadow: 0 0 20px var(--shadow-color-rgba);
  }
  100% {
    transform: translateX(-50%) scale(1);
  }
}
@keyframes pulse-expand {
  0% {
    transform: translateX(-50%) scale(1);
    box-shadow: 0 0 0 rgba(0, 0, 0, 0);
  }
  50% {
    transform: translateX(-50%) scale(1.2);
    box-shadow: 0 0 20px var(--shadow-color-rgba);
  }
  100% {
    transform: translateX(-50%) scale(1);
    box-shadow: 0 0 0 rgba(0, 0, 0, 0);
  }
}
@keyframes pulse-contract {
  0% {
    transform: translateX(-50%) scale(1);
    box-shadow: 0 0 0 rgba(0, 0, 0, 0);
  }
  50% {
    transform: translateX(-50%) scale(0.8);
    box-shadow: 0 0 20px var(--shadow-color-rgba);
  }
  100% {
    transform: translateX(-50%) scale(1);
    box-shadow: 0 0 0 rgba(0, 0, 0, 0);
  }
}
.generating-indicator {
  display: flex;
  justify-content: center;
  align-items: center;
  height: 100%;
  gap: 5px;
}

.generating-dot {
  width: 6px;
  height: 6px;
  background-color: white;
  border-radius: 50%;
  opacity: 0.8;
  animation: generating-dot-pulse 1.4s infinite ease-in-out;
}
.generating-dot:nth-child(1) {
  animation-delay: 0s;
}
.generating-dot:nth-child(2) {
  animation-delay: 0.2s;
}
.generating-dot:nth-child(3) {
  animation-delay: 0.4s;
}

@keyframes generating-dot-pulse {
  0%, 100% {
    transform: scale(1);
    opacity: 0.6;
  }
  50% {
    transform: scale(1.5);
    opacity: 1;
  }
}

:fullscreen body,
:-webkit-full-screen body,
:-moz-full-screen body,
:-ms-fullscreen body {
  background: var(--background-color);
  margin: 0;
  padding: 0;
  overflow: hidden;
  display: flex;
  align-items: center;
  justify-content: center;
  min-height: 100vh;
}

@media (min-width: 1920px) and (min-height: 1080px) {
  :fullscreen .phone-frame,
  :-webkit-full-screen .phone-frame,
  :-moz-full-screen .phone-frame,
  :-ms-fullscreen .phone-frame {
    width: max(650px, (100vh - 2rem) * 0.46);
    max-width: 900px;
  }
}
@media (max-width: 360px) {
  :fullscreen .phone-frame,
  :-webkit-full-screen .phone-frame,
  :-moz-full-screen .phone-frame,
  :-ms-fullscreen .phone-frame {
    margin: 0;
    width: 100%;
    height: 100%;
    max-width: 100%;
    max-height: 100%;
  }
}

:fullscreen .phone-frame::before,
:-webkit-full-screen .phone-frame::before,
:-moz-full-screen .phone-frame::before,
:-ms-fullscreen .phone-frame::before {
  border-radius: 3.125rem;
}

@media (max-width: 360px) {
  :fullscreen .phone-frame::before,
  :-webkit-full-screen .phone-frame::before,
  :-moz-full-screen .phone-frame::before,
  :-ms-fullscreen .phone-frame::before {
    border-radius: 1.5rem;
  }
}
.phone-status-bar {
  position: absolute;
  top: 0.625rem;
  left: 0;
  right: 0;
  height: 2rem;
  z-index: 102;
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 0 1.5rem;
  pointer-events: none;
}

.status-left {
  display: flex;
  align-items: center;
  gap: 0.4rem;
  color: var(--status-bar-color);
  font-size: 0.95em;
  font-weight: 600;
}

.status-right {
  display: flex;
  align-items: center;
  gap: 0.35rem;
  color: var(--status-bar-color);
  font-size: 0.9em;
  font-weight: 600;
}

.moon-icon {
  font-size: 0.8em;
  opacity: 0.9;
}

.signal-bars,
.wifi-icon,
.battery-icon {
  font-size: 0.85em;
}

#hidden-send-trigger {
  position: absolute;
  top: 0.625rem;
  right: 1rem;
  width: 80px;
  height: 2rem;
  z-index: 103;
  cursor: pointer;
}

#delete-mode-trigger {
  position: absolute;
  top: 0.625rem;
  left: 1rem;
  width: 60px;
  height: 2rem;
  z-index: 103;
  cursor: pointer;
}

#delete-mode-trigger {
  position: absolute;
  top: 0.625rem;
  left: 1rem;
  width: 60px;
  height: 2rem;
  z-index: 103;
  cursor: pointer;
}

#wechat-view {
  background-image: url("https://gitgud.io/lolodesu/lolobabytutorial/-/raw/master/lologame/素材/wallpaper/白色_1.jpg");
  background-size: cover;
  background-position: center;
  background-repeat: no-repeat;
  display: flex;
  flex-direction: column;
  height: 100%;
}

.wechat-header {
  flex-shrink: 0;
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 0.5rem 0.75rem;
  background: var(--header-bg);
  border-bottom: 1px solid var(--border-color);
  padding-top: 2.8125rem;
  position: relative;
  z-index: 10;
}
.wechat-header .back-btn,
.wechat-header .options-btn {
  font-size: 1.2em;
  color: var(--primary-blue);
  cursor: pointer;
  transition: all 0.2s ease;
}
.wechat-header .back-btn:hover,
.wechat-header .options-btn:hover {
  color: var(--deep-blue);
}
.wechat-header .options-btn {
  position: relative;
  display: inline-block;
}
.wechat-header .contact-name {
  font-weight: 600;
  background: var(--primary-blue);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  font-size: 1em;
  cursor: pointer;
  left: 50%;
}

.notification-dot {
  position: absolute;
  top: -4px;
  right: -4px;
  width: 8px;
  height: 8px;
  background-color: #ff3b30;
  border-radius: 50%;
  border: 1px solid #ffffff;
}

.wechat-body {
  flex: 1 1 auto;
  overflow-y: auto;
  padding: 0.9375rem 0.5rem;
  overflow-x: hidden;
  -webkit-overflow-scrolling: touch;
}

.message-row {
  display: flex;
  margin-bottom: 1.125rem;
  align-items: flex-start;
}
.message-row.me {
  justify-content: flex-end;
}
.message-row.new-message {
  animation: messageSlideIn 0.5s cubic-bezier(0.22, 0.61, 0.36, 1);
}
.message-row.fade-out {
  animation: fadeOut 0.5s forwards;
}
.message-row.long-press-active {
  transform: scale(0.95);
  transition: all 0.15s ease-out;
  z-index: 100;
}
.message-row.long-press-active .message-bubble {
  box-shadow: 0 0 0 3px var(--primary-blue), 0 8px 25px rgba(114, 173, 243, 0.4), inset 0 0 20px rgba(114, 173, 243, 0.1);
  background: linear-gradient(135deg, rgba(114, 173, 243, 0.15) 0%, rgba(114, 173, 243, 0.08) 100%);
  animation: longPressPulse 0.6s ease-in-out;
  user-select: none;
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  -webkit-user-drag: none;
  -khtml-user-drag: none;
  -moz-user-drag: none;
  -o-user-drag: none;
}
.message-row.me.long-press-active::after {
  content: "🔄 松开撤回";
  position: absolute;
  top: -3rem;
  right: 0;
  background: linear-gradient(135deg, rgba(0, 0, 0, 0.9) 0%, rgba(0, 0, 0, 0.8) 100%);
  color: white;
  padding: 0.5rem 0.75rem;
  border-radius: 0.5rem;
  font-size: 0.8rem;
  font-weight: 600;
  white-space: nowrap;
  z-index: 1000;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
  animation: longPressTooltip 0.3s cubic-bezier(0.68, -0.55, 0.265, 1.55);
}
.message-row.me.long-press-active::after::before {
  content: "";
  position: absolute;
  bottom: -0.25rem;
  right: 1rem;
  width: 0;
  height: 0;
  border-left: 0.25rem solid transparent;
  border-right: 0.25rem solid transparent;
  border-top: 0.25rem solid rgba(0, 0, 0, 0.9);
}

@keyframes longPressPulse {
  0% {
    transform: scale(1);
  }
  50% {
    transform: scale(1.02);
  }
  100% {
    transform: scale(1);
  }
}
@keyframes longPressTooltip {
  0% {
    opacity: 0;
    transform: translateY(0.5rem) scale(0.8);
  }
  100% {
    opacity: 1;
    transform: translateY(0) scale(1);
  }
}
@keyframes messageSlideIn {
  from {
    opacity: 0;
    transform: translateY(25px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}
.message-avatar {
  width: 2.25rem;
  height: 2.25rem;
  border-radius: 50%;
  flex-shrink: 0;
  object-fit: cover;
  background-color: #ccc;
  cursor: pointer;
}

.message-row.them .message-avatar {
  margin-right: 0.625rem;
}

.message-row.me .message-avatar {
  margin-left: 0.625rem;
}

.timestamp-row {
  text-align: center;
  margin: 0.5rem 0;
}

.timestamp-text {
  display: inline-block;
  background: linear-gradient(135deg, var(--soft-blue) 0%, var(--light-blue) 100%);
  color: #ffffff;
  font-size: 0.7em;
  padding: 0.3rem 0.8rem;
  border-radius: 1rem;
  font-weight: 500;
  box-shadow: 0 2px 6px var(--shadow-color-rgba);
}

.typing-indicator {
  display: flex;
  margin-bottom: 1.125rem;
  align-items: flex-start;
}
.typing-indicator .message-avatar {
  margin-right: 0.625rem;
  width: 2.25rem;
  height: 2.25rem;
  border-radius: 50%;
  flex-shrink: 0;
}
.typing-indicator .message-bubble {
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 0.75rem 1rem;
  background: linear-gradient(135deg, #ffffff 0%, #f8faff 100%);
  color: var(--text-primary);
  border: 1px solid var(--border-color);
  border-bottom-left-radius: 0.4rem;
  box-shadow: var(--bubble-shadow);
}

.typing-dot {
  display: inline-block;
  width: 8px;
  height: 8px;
  border-radius: 50%;
  background-color: var(--text-secondary);
  margin: 0 2px;
  animation: typing-bounce 1.4s infinite ease-in-out both;
}
.typing-dot:nth-child(1) {
  animation-delay: -0.32s;
}
.typing-dot:nth-child(2) {
  animation-delay: -0.16s;
}
.typing-dot:nth-child(3) {
  animation-delay: 0s;
}

@keyframes typing-bounce {
  0%, 80%, 100% {
    transform: scale(0);
  }
  40% {
    transform: scale(1);
  }
}
.message-content-container {
  display: flex;
  flex-direction: column;
}

.message-row.me .message-content-container {
  align-items: flex-end;
}

.message-row.them .message-content-container {
  align-items: flex-start;
}

#wechat-view.delete-mode .wechat-body {
  padding-left: 25px;
  padding-right: 25px;
}

#wechat-view.delete-mode .message-row,
#wechat-view.delete-mode .timestamp-row,
#wechat-view.delete-mode .event-log-row {
  cursor: pointer;
  position: relative;
}

#wechat-view.delete-mode [data-log-index]::before {
  content: "×";
  position: absolute;
  left: -22px;
  top: 50%;
  transform: translateY(-50%);
  background: linear-gradient(135deg, var(--blue-gradient-start) 0%, var(--primary-blue) 100%);
  color: white;
  border-radius: 50%;
  width: 16px;
  height: 16px;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 12px;
  font-weight: normal;
  box-shadow: 0 2px 4px var(--shadow-color-rgba);
  transition: all 0.2s ease;
  z-index: 10;
  text-align: center;
  font-family: Arial, sans-serif;
}

#wechat-view.delete-mode .message-row.me[data-log-index]::before {
  left: auto;
  right: -22px;
}

#wechat-view.delete-mode [data-log-index]:hover::before {
  transform: translateY(-50%) scale(1.1);
  box-shadow: 0 4px 8px var(--shadow-color-rgba);
}

.event-log-row {
  text-align: center;
  margin: 0.5rem 0;
  width: 100%; /* 确保行宽度固定 */
}

.event-log-container {
  display: inline-flex;
  flex-direction: column;
  align-items: center;
  width: 100%; /* 使用固定宽度而非自适应 */
  max-width: 80%; /* 限制最大宽度 */
}

.event-time-text {
  background: linear-gradient(135deg, var(--soft-blue) 0%, var(--light-blue) 100%);
  color: #ffffff;
  font-weight: 500;
  box-shadow: 0 2px 6px var(--shadow-color-rgba);
  display: inline-flex;
  align-items: center;
  justify-content: center;
  font-size: 0.7em;
  padding: 0.3rem 0.8rem;
  border-radius: 1rem;
  -webkit-user-select: none;
          user-select: none;
  margin-bottom: 0.25rem;
  position: relative; /* 确保位置稳定 */
  z-index: 2; /* 确保时间戳在上层 */
  transition: none; /* 禁用所有过渡效果，防止抖动 */
}
.event-time-text.has-desc {
  position: relative;
  padding-right: 1.55em; /* 减少右侧内边距，缩小箭头与文字的间距 */
  display: flex;
  align-items: center;
}
.event-time-text.has-desc::after {
  content: "\f0d7";
  font-family: "Font Awesome 6 Free";
  font-weight: 900;
  position: absolute;
  right: 0.4rem; /* 减少箭头右侧间距 */
  font-size: 0.75em;
  opacity: 0.9;
  margin-top: 0; /* 移除顶部边距，让箭头垂直居中 */
  transform: translateY(-1px); /* 稍微向上移动箭头以更好地垂直居中 */
  transition: transform 0.3s ease; /* 只对箭头旋转应用过渡效果 */
}
.event-time-text.clickable {
  cursor: pointer;
  position: relative;
}
.event-time-text.clickable:hover {
  box-shadow: 0 3px 8px var(--shadow-color-rgba);
}
.event-time-text.clickable:hover::after {
  opacity: 1;
}
.event-time-text.clickable::before {
  content: "";
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  border-radius: 1rem;
  box-shadow: inset 0 0 3px rgba(255, 255, 255, 0.35);
  opacity: 0.6;
  transition: opacity 0.2s ease; /* 只对内发光应用过渡效果 */
  pointer-events: none;
}
.event-time-text.clickable:active {
  transform: scale(0.98);
  box-shadow: 0 1px 4px var(--shadow-color-rgba);
}
.event-time-text.clickable:active::before {
  opacity: 0.9;
  box-shadow: inset 0 0 5px rgba(255, 255, 255, 0.7);
}
.event-time-text.clickable:hover::before {
  opacity: 0.75;
  box-shadow: inset 0 0 4px rgba(255, 255, 255, 0.5);
}

.event-time-text.has-desc + .event-description.expanded ~ .event-time-text.has-desc::after,
.event-time-text.has-desc:has(+ .event-description.expanded)::after {
  transform: rotate(180deg) translateY(1px); /* 调整旋转后的位置 */
}

.event-description {
  font-size: 0.75em;
  color: var(--text-secondary);
  background: rgba(255, 255, 255, 0.9);
  padding: 0.5rem 0.75rem;
  border-radius: 0.5rem;
  margin-top: 0.25rem;
  width: 100%; /* 确保宽度一致 */
  max-width: 100%; /* 使用100%宽度 */
  text-align: center;
  line-height: 1.4;
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
  display: none;
  position: relative; /* 确保位置稳定 */
  z-index: 1; /* 确保描述在时间戳下层 */
  white-space: nowrap; /* 尽量保持单行显示 */
  text-overflow: ellipsis; /* 超出部分显示省略号 */
  overflow: hidden;
  /* 当内容超过最大宽度时允许换行 */
}
@media (max-width: 500px) {
  .event-description {
    white-space: normal;
  }
}
.event-description.expanded {
  display: block;
  white-space: normal; /* 展开后允许自然换行 */
}

.message-bubble {
  position: relative;
  padding: 0.75rem 1rem;
  border-radius: 1.2rem;
  max-width: 65%;
  font-size: 0.9em;
  line-height: 1.4;
  word-wrap: break-word;
  -webkit-user-select: none;
          user-select: none;
  box-shadow: var(--bubble-shadow);
  transition: all 0.2s ease;
}
.message-bubble::after {
  display: none;
}
.message-bubble img:not(.sticker-img) {
  max-width: 10rem;
  max-height: 10rem;
  display: block;
  border-radius: 0.5rem;
}

.message-row.them .message-bubble {
  background: linear-gradient(315deg, #f8faff 0%, #ffffff 100%);
  color: var(--wechat-bubble-them-text);
  border: 1px solid var(--border-color);
  border-bottom-left-radius: 0.4rem;
}

.message-row.me .message-bubble {
  background: linear-gradient(315deg, var(--blue-gradient-end) 0%, var(--blue-gradient-start) 100%);
  color: var(--wechat-bubble-me-text);
  border-bottom-right-radius: 0.4rem;
  box-shadow: 0 4px 12px var(--shadow-color-rgba);
}

.recall-notice-container {
  display: inline-flex;
  flex-direction: column;
  align-items: center;
}

.recall-notice-text {
  background: linear-gradient(135deg, var(--soft-blue) 0%, var(--light-blue) 100%);
  color: #ffffff;
  font-size: 0.7em;
  padding: 0.3rem 0.8rem;
  border-radius: 1rem;
  cursor: pointer;
  transition: all 0.2s ease;
}
.recall-notice-text:hover {
  transform: translateY(-1px);
  box-shadow: 0 4px 8px var(--shadow-color-rgba);
}

.recall-content {
  color: #888;
  font-size: 0.75em;
  padding: 0;
  max-height: 0;
  overflow: hidden;
  transition: max-height 0.3s ease-out, padding 0.3s ease-out;
}
.recall-content.expanded {
  max-height: 6.25rem;
  padding: 0.3125rem 0 0 0;
}

.event-log-row {
  text-align: center;
  margin: 0.5rem 0;
}

.event-log-container {
  display: inline-flex;
  flex-direction: column;
  align-items: center;
}

.event-time-text {
  background: linear-gradient(135deg, var(--soft-blue) 0%, var(--light-blue) 100%);
  color: #ffffff;
  font-weight: 500;
  box-shadow: 0 2px 6px var(--shadow-color-rgba);
  display: inline-flex;
  align-items: center;
  justify-content: center;
  font-size: 0.7em;
  padding: 0.3rem 0.8rem;
  border-radius: 1rem;
  transition: all 0.2s ease;
}
.event-time-text.blue-theme {
  box-shadow: 0 2px 6px rgba(114, 173, 243, 0.4);
}
.event-time-text.pink-theme {
  box-shadow: 0 2px 6px rgba(243, 114, 182, 0.4);
}
.event-time-text.green-theme {
  box-shadow: 0 2px 6px rgba(72, 187, 120, 0.4);
}
.event-time-text.purple-theme {
  box-shadow: 0 2px 6px rgba(159, 122, 234, 0.4);
}
.event-time-text.orange-theme {
  box-shadow: 0 2px 6px rgba(237, 137, 54, 0.4);
}
.event-time-text.system-message {
  background: linear-gradient(135deg, #6b7280 0%, #4b5563 100%);
  padding: 0.5rem 1rem;
  border-radius: 1rem;
  color: white;
  font-size: 0.85em;
  max-width: 80%;
  text-align: center;
}
.event-time-text.has-desc {
  cursor: pointer;
}

.event-description {
  color: #888;
  font-size: 0.75em;
  padding: 0;
  max-height: 0;
  overflow: hidden;
  transition: max-height 0.3s ease-out, padding 0.3s ease-out;
  margin-top: 0.3rem;
}
.event-description.expanded {
  max-height: 6.25rem;
  padding: 0.5rem 0.8rem;
  background-color: rgba(255, 255, 255, 0.9);
  border-radius: 0.8rem;
  box-shadow: 0 1px 4px rgba(0, 0, 0, 0.1);
  color: var(--text-primary);
  font-weight: 500;
}

.message-row .message-bubble.sticker-bubble,
.message-row .message-bubble.image-desc-bubble,
.message-row .message-bubble.image-url-bubble,
.message-row .message-bubble.location-bubble,
.message-row .message-bubble.transfer-bubble,
.message-row .message-bubble.file-bubble {
  content: none;
  background: transparent !important;
  padding: 0;
  border: none;
  box-shadow: none;
}

.message-row .message-bubble.location-bubble,
.message-row .message-bubble.transfer-bubble,
.message-row .message-bubble.file-bubble,
.message-row .message-bubble.gift-bubble {
  width: 12.5rem;
  max-width: 12.5rem;
}

.message-row .message-bubble.sticker-bubble img {
  border-radius: 1.2rem;
}

.sticker-container {
  display: inline-flex;
  justify-content: center;
  align-items: center;
  width: auto;
  height: auto;
  max-width: var(--sticker-size);
  max-height: var(--sticker-size);
}

.sticker-img {
  display: block;
  max-width: 100%;
  max-height: 100%;
  object-fit: contain;
}

.message-bubble.voice-bubble {
  display: flex;
  align-items: center;
  cursor: pointer;
  min-width: 5rem;
  padding: 0.75rem 1rem;
}

.message-row.them .message-bubble.voice-bubble {
  background: linear-gradient(315deg, #f8faff 0%, #ffffff 100%) !important;
  border: 1px solid var(--border-color) !important;
}

body.dark-mode .message-row.them .message-bubble.voice-bubble {
  background: linear-gradient(135deg, #3c3c3c 0%, #2c2c2c 100%) !important;
  border: 1px solid var(--border-color) !important;
  color: #f0f0f0;
}

body.dark-mode .message-row.them .voice-bubble .voice-icon {
  color: var(--light-blue);
}

.voice-bubble .voice-icon {
  font-size: 1.1em;
  margin: 0 0.5rem;
}

.message-row.them .voice-bubble .voice-icon {
  color: var(--primary-blue);
  transform: rotate(90deg);
}

.message-row.me .voice-bubble .voice-icon {
  color: var(--wechat-bubble-me-text);
  transform: rotate(270deg);
}

.voice-text-content {
  display: none;
  background-color: white;
  padding: 0.5rem 0.625rem;
  border-radius: 0.3125rem;
  border: 0.0625rem solid #e5e5e5;
  max-width: 65%;
  font-size: 0.9em;
  line-height: 1.4;
  color: var(--text-primary);
  word-wrap: break-word;
  -webkit-user-select: text;
          user-select: text;
  margin-top: 0.3125rem;
  box-shadow: 0 0.0625rem 0.125rem rgba(0, 0, 0, 0.1);
}

.message-row.voice-text-visible .voice-text-content {
  display: block;
}

.image-desc-content {
  width: 8.4375rem;
  height: 8.4375rem;
  -webkit-backdrop-filter: blur(10px);
          backdrop-filter: blur(10px);
  background-color: rgba(255, 255, 255, 0.5);
  border: 0.0625rem solid rgba(255, 255, 255, 0.2);
  border-radius: 1.2rem;
  padding: 0.5rem;
  color: var(--text-primary);
  font-weight: normal;
  overflow-y: auto;
  box-sizing: border-box;
  font-size: 0.9em;
  display: flex;
  flex-direction: column;
  box-shadow: 0 4px 12px var(--shadow-color-rgba), 0 2px 6px var(--shadow-color-rgba);
  transition: all 0.2s ease;
}

.text-wrapper {
  margin: auto;
  text-align: center;
  line-height: 1.4;
  word-wrap: break-word;
  max-height: 100%;
}

.location-bubble .location-card {
  background-color: #fff;
  border-radius: 1.2rem;
  overflow: hidden;
  box-shadow: 0 4px 12px var(--shadow-color-rgba), 0 2px 6px var(--shadow-color-rgba);
  transition: all 0.2s ease;
}

.location-content {
  padding: 0.5rem;
}
.location-content .location-title {
  font-size: 1em;
  color: var(--text-primary);
  font-weight: 500;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}
.location-content .location-subtitle {
  font-size: 0.75em;
  color: #888;
}

.location-map-placeholder {
  height: 5.625rem;
  position: relative;
  background-color: #f0f8ff;
  overflow: hidden;
}
.location-map-placeholder::before {
  content: "";
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background-image: repeating-linear-gradient(45deg, #d2e1f2 0, #d2e1f2 4px, transparent 4px, transparent 8px), repeating-linear-gradient(135deg, #9bdaf7 0, #9bdaf7 3px, transparent 3px, transparent 7px), linear-gradient(to bottom, #bad8fb 0%, #bad8fb 100%), linear-gradient(to bottom, #d0daf4 0%, #d0daf4 100%), linear-gradient(to right, #bad8fb 0%, #bad8fb 100%), linear-gradient(to right, #d0daf4 0%, #dbe8f3 100%), radial-gradient(ellipse at 20% 85%, #daf9f3 30%, transparent 31%), radial-gradient(ellipse at 80% 30%, #d0ecf4 40%, transparent 41%);
  background-size: 40% 35%, 30% 30%, 10px 100%, 6px 100%, 100% 10px, 100% 6px, 100% 100%, 100% 100%;
  background-position: -5% 110%, 100% 0%, 70% center, 70% center, center 35%, center 35%, 0 0, 0 0;
  background-repeat: no-repeat;
}
.location-map-placeholder::after {
  content: "\f3c5";
  font-family: "Font Awesome 6 Free";
  font-weight: 900;
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  font-size: 1.8em;
  color: var(--primary-blue);
  filter: drop-shadow(0 0 8px rgba(114, 173, 243, 0.6)) drop-shadow(0 0 4px rgba(114, 173, 243, 0.4)) drop-shadow(0 2px 4px rgba(255, 255, 255, 0.8));
  z-index: 10;
  animation: pinPulse 2s ease-in-out infinite;
}
.location-map-placeholder:hover::before {
  opacity: 0.9;
  transition: opacity 0.3s ease;
}

@keyframes pinPulse {
  0%, 100% {
    transform: translate(-50%, -50%) scale(1);
    filter: drop-shadow(0 0 8px rgba(114, 173, 243, 0.6)) drop-shadow(0 0 4px rgba(114, 173, 243, 0.4)) drop-shadow(0 2px 4px rgba(255, 255, 255, 0.8));
  }
  50% {
    transform: translate(-50%, -50%) scale(1.1);
    filter: drop-shadow(0 0 12px rgba(114, 173, 243, 0.8)) drop-shadow(0 0 6px rgba(114, 173, 243, 0.6)) drop-shadow(0 3px 6px rgba(255, 255, 255, 0.9));
  }
}
.transfer-bubble .transfer-card {
  border-radius: 1.2rem;
  overflow: hidden;
  width: 100%;
}
.transfer-bubble .transfer-card.transfer-initial {
  background: linear-gradient(135deg, #fa9e3b 0%, #f8802a 50%, #f76a1c 100%);
  box-shadow: 0 4px 15px rgba(247, 106, 28, 0.3), 0 2px 8px rgba(247, 106, 28, 0.2), inset 0 1px 0 rgba(255, 255, 255, 0.2);
  color: #fff;
}
.transfer-bubble .transfer-card.them {
  cursor: pointer;
  transition: all 0.2s ease;
}
.transfer-bubble .transfer-card.them:hover {
  transform: translateY(-1px);
  box-shadow: 0 6px 12px rgba(247, 106, 28, 0.4);
}
.transfer-bubble .transfer-card.transfer-receipt {
  background: linear-gradient(135deg, #ffd0a1 0%, #ffbe80 30%, #ffbe80 45%, #ffd0a1 100%);
  color: #ffffff;
  box-shadow: 0 4px 16px rgba(247, 106, 28, 0.25), 0 2px 6px rgba(247, 106, 28, 0.15), inset 0 1px 1px rgba(255, 255, 255, 0.2);
}

.transfer-content {
  display: flex;
  align-items: center;
  padding: 0.75rem;
}

.transfer-icon-image {
  width: 2.25rem;
  height: 2.25rem;
  flex-shrink: 0;
  filter: brightness(0) invert(1);
}

.transfer-details {
  margin-left: 0.75rem;
  flex-grow: 1;
}
.transfer-details .amount {
  font-size: 1.1em;
  font-weight: bold;
}
.transfer-details .note,
.transfer-details .status-text {
  font-size: 0.8em;
  opacity: 0.9;
}

.transfer-footer {
  font-size: 0.75em;
  padding: 0.1875rem 0.75rem;
  color: rgba(255, 255, 255, 0.9);
  border-top: 1px solid rgba(255, 255, 255, 0.15);
  background: rgba(255, 255, 255, 0.05);
}

.transfer-initial .transfer-footer {
  color: rgba(255, 255, 255, 0.85);
  border-top: 1px solid rgba(255, 255, 255, 0.2);
  background: rgba(255, 255, 255, 0.05);
}

.transfer-receipt .transfer-footer {
  color: #f5faff;
  border-top: 1px solid rgba(255, 255, 255, 0.2);
  background: rgba(255, 255, 255, 0.05);
}

.message-row .message-bubble.gift-bubble {
  padding: 0;
  width: 12.5rem;
  max-width: 12.5rem;
  overflow: hidden;
  border-radius: 1.2rem;
}

.gift-bubble .gift-card {
  border-radius: 1.2rem;
  overflow: hidden;
  width: 100%;
}
.gift-bubble .gift-card.gift-initial {
  background: linear-gradient(135deg, #fa9e3b 0%, #f8802a 50%, #f76a1c 100%);
  box-shadow: 0 4px 15px rgba(247, 106, 28, 0.3), 0 2px 8px rgba(247, 106, 28, 0.2), inset 0 1px 0 rgba(255, 255, 255, 0.2);
  color: #fff;
  animation: transferGlow 3s ease-in-out infinite alternate;
}
.gift-bubble .gift-card.them {
  cursor: pointer;
  transition: all 0.2s ease;
}
.gift-bubble .gift-card.them:hover {
  transform: translateY(-1px);
  box-shadow: 0 6px 12px rgba(247, 106, 28, 0.4);
}
.gift-bubble .gift-card.gift-receipt {
  background: linear-gradient(135deg, #ffd0a1 0%, #ffbe80 30%, #ffbe80 45%, #ffd0a1 100%);
  color: #ffffff;
  box-shadow: 0 4px 16px rgba(247, 106, 28, 0.25), 0 2px 6px rgba(247, 106, 28, 0.15), inset 0 1px 1px rgba(255, 255, 255, 0.2);
}

.gift-clickable {
  cursor: pointer;
}

.gift-accepted {
  background-color: #355a96 !important;
}

.gift-content {
  padding: 0.75rem;
  display: flex;
  align-items: center;
  gap: 0.75rem;
  color: #ffffff;
}

.gift-icon-emoji {
  font-size: 2.2em;
  filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.2));
}

.gift-icon-image {
  width: 2.25rem;
  height: 2.25rem;
  filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.2));
}

.gift-details {
  flex-grow: 1;
}
.gift-details .gift-name {
  font-weight: 500;
}
.gift-details .gift-price,
.gift-details .gift-status-text {
  font-size: 0.8em;
  opacity: 0.9;
}

.gift-footer {
  color: rgba(255, 255, 255, 0.9);
  font-size: 0.75em;
  padding: 0.1875rem 0.75rem;
  border-top: 1px solid rgba(255, 255, 255, 0.15);
  background: rgba(255, 255, 255, 0.05);
}

.gift-receipt .gift-footer {
  color: #f5faff;
  border-top: 1px solid rgba(255, 255, 255, 0.2);
  background: rgba(255, 255, 255, 0.05);
}

@keyframes transferGlow {
  from {
    box-shadow: 0 4px 15px rgba(247, 106, 28, 0.3), 0 2px 8px rgba(247, 106, 28, 0.2), inset 0 1px 0 rgba(255, 255, 255, 0.2);
  }
  to {
    box-shadow: 0 6px 20px rgba(247, 106, 28, 0.4), 0 3px 12px rgba(247, 106, 28, 0.3), inset 0 1px 0 rgba(255, 255, 255, 0.3);
  }
}
.file-bubble .file-card {
  background-color: #fff;
  border-radius: 1.2rem;
  overflow: hidden;
  width: 100%;
  box-shadow: 0 4px 12px var(--shadow-color-rgba), 0 2px 6px var(--shadow-color-rgba);
  transition: all 0.2s ease;
}

.file-content {
  display: flex;
  align-items: center;
  padding: 0.75rem;
  gap: 0.75rem;
}

.file-icon {
  font-size: 2.5em;
  color: var(--primary-blue);
  flex-shrink: 0;
}

.file-details .file-name {
  font-size: 0.9em;
  color: var(--text-primary);
  font-weight: 500;
  word-break: break-all;
}

.file-footer {
  background-color: #f7fafc;
  color: #888;
  font-size: 0.75em;
  padding: 0.1875rem 0.75rem;
  border-top: 0.0625rem solid #eaeaea;
}

body.dark-mode .message-row.them .voice-bubble .voice-icon {
  color: var(--light-blue);
}

body.dark-mode .voice-text-content {
  background-color: #2c2c2c;
  border-color: #3c3c3c;
  color: #f0f0f0;
  box-shadow: 0 0.0625rem 0.125rem rgba(0, 0, 0, 0.3);
}

body.dark-mode .image-desc-content {
  background-color: rgba(30, 30, 30, 0.7);
  border: 0.0625rem solid rgba(60, 60, 60, 0.4);
  color: #f0f0f0;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.25), 0 2px 6px rgba(0, 0, 0, 0.2);
}

body.dark-mode .location-bubble .location-card {
  background-color: #2c2c2c;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.25), 0 2px 6px rgba(0, 0, 0, 0.15);
}

body.dark-mode .location-content .location-title {
  color: #f0f0f0;
}

body.dark-mode .location-content .location-subtitle {
  color: #aaa;
}

body.dark-mode .file-bubble .file-card {
  background-color: #2c2c2c;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.25), 0 2px 6px rgba(0, 0, 0, 0.15);
}

body.dark-mode .file-details .file-name {
  color: #f0f0f0;
}

body.dark-mode .file-footer {
  background-color: #232323;
  color: #aaa;
  border-top: 0.0625rem solid #3c3c3c;
}

body.dark-mode .event-description.expanded {
  background-color: rgba(50, 50, 50, 0.9);
  color: #f0f0f0;
  box-shadow: 0 1px 4px rgba(0, 0, 0, 0.3);
}

.wechat-input-area {
  flex-shrink: 0;
  background: var(--header-bg);
  position: relative;
  z-index: 10;
}

.wechat-footer {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  padding: 0.75rem;
  border-top: 1px solid var(--border-color);
  box-sizing: border-box;
  flex-shrink: 0;
  background: var(--header-bg);
  position: relative;
  z-index: 10;
}
.wechat-footer .footer-icon {
  font-size: 1.4em;
  color: var(--primary-blue) !important;
  cursor: pointer;
  transition: all 0.2s ease;
  padding: 0.3rem;
  border-radius: 0.5rem;
  flex-shrink: 0;
}
.wechat-footer .footer-icon:hover {
  background: var(--ultra-light-blue);
  transform: scale(1.1);
}
.wechat-footer .text-input {
  flex-grow: 1;
  border: 1px solid var(--border-color);
  background: #ffffff;
  padding: 0.75rem 1rem;
  border-radius: 1.5rem;
  font-size: 0.9em;
  transition: all 0.2s ease;
  color: var(--text-primary);
  min-width: 0;
}
.wechat-footer .text-input:focus {
  outline: none;
  border-color: var(--primary-blue);
  box-shadow: 0 0 0 3px var(--shadow-color-rgba);
}
.wechat-footer .text-input::placeholder {
  color: var(--text-secondary);
}
.wechat-footer .send-btn {
  background: var(--primary-blue);
  color: white;
  border: none;
  width: 2rem;
  height: 2rem;
  border-radius: 50%;
  font-size: 1em;
  cursor: pointer;
  box-shadow: 0 4px 12px var(--shadow-color-rgba);
  transition: all 0.2s ease;
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 0;
  line-height: 1;
  flex-shrink: 0;
}
.wechat-footer .send-btn:hover {
  transform: translateY(-2px);
  box-shadow: 0 6px 16px var(--shadow-color-rgba);
}

.wechat-footer .send-btn {
  background: linear-gradient(135deg, #09e675 0%, #07c160 50%, #06ad56 100%);
}

.single-color-icon .wechat-footer .send-btn {
  background: linear-gradient(135deg, var(--primary-gradient-light) 0%, var(--primary-blue) 50%, var(--primary-gradient-dark) 100%);
}

.panel-container {
  height: 0;
  overflow: hidden;
  transition: height 0.3s ease;
}
.panel-container.active {
  height: var(--panel-height);
}

.panel-view {
  display: none;
  height: 100%;
  overflow-y: auto;
  padding: 1.125rem 0.75rem;
  box-sizing: border-box;
  position: relative;
}
.panel-view.active {
  display: block;
}

.features-grid {
  display: grid;
  grid-template-columns: repeat(4, 1fr);
  gap: 1.125rem;
}

.feature-item {
  display: flex;
  flex-direction: column;
  align-items: center;
  cursor: pointer;
  position: relative;
}
.feature-item:hover .feature-icon {
  transform: translateY(-2px);
  box-shadow: 0 4px 12px var(--shadow-color-rgba);
  border-color: var(--primary-blue);
}

.feature-icon {
  width: 3.375rem;
  height: 3.375rem;
  background-color: #fff;
  border-radius: 0.5rem;
  display: flex;
  align-items: center;
  justify-content: center;
  border: 1px solid var(--border-color);
  box-shadow: 0 2px 8px var(--shadow-color-rgba);
  transition: all 0.2s ease;
  margin-bottom: 0.4375rem;
}
.feature-icon img,
.feature-icon .fas,
.feature-icon .far,
.feature-icon .fab {
  max-width: 100%;
  max-height: 100%;
  border-radius: 0.5rem;
  object-fit: cover;
  font-size: 1.8em;
}
.feature-icon .theme-icon {
  color: var(--primary-blue);
  font-size: 1.8em;
}
.feature-icon .fa-plus,
.feature-icon .fa-trash-alt {
  color: var(--primary-blue) !important;
}

.feature-label {
  font-size: 0.75em;
  color: #888;
}

.feature-item .sticker-checkbox {
  position: absolute;
  opacity: 0;
  width: 0;
  height: 0;
  pointer-events: none;
}

.feature-item .sticker-checkbox-button {
  position: absolute;
  top: 0.25rem;
  right: 0.25rem;
  width: 1.5rem;
  height: 1.5rem;
  border: 1px solid var(--checkbox-border-unchecked);
  border-radius: 0.375rem;
  background: var(--checkbox-bg-unchecked);
  cursor: pointer;
  transition: all 0.2s ease;
  display: none;
  z-index: 10;
}
.feature-item .sticker-checkbox-button.checked {
  border: 2px solid var(--checkbox-border-checked);
  background: var(--checkbox-bg-unchecked);
}
.feature-item .sticker-checkbox-button.checked::after {
  content: "✓";
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  font-size: 0.75rem;
  font-weight: bold;
  color: var(--checkbox-border-checked);
}
@media (hover: hover) {
  .feature-item .sticker-checkbox-button:hover {
    border-color: var(--checkbox-border-checked);
    background: var(--checkbox-hover-bg);
  }
}

.feature-item:has(.sticker-checkbox:checked) .feature-icon {
  border: 2px solid var(--checkbox-border-checked);
  box-shadow: 0 0 0 2px var(--shadow-color-rgba);
  transform: scale(0.95);
  opacity: 0.8;
}
.feature-item:has(.sticker-checkbox:checked) .feature-label {
  color: var(--checkbox-border-checked);
  font-weight: 600;
}

#wechat-view.delete-mode .wechat-body {
  padding-left: 25px;
  padding-right: 25px;
}

#wechat-view.delete-mode .message-row,
#wechat-view.delete-mode .timestamp-row,
#wechat-view.delete-mode .event-log-row {
  cursor: pointer;
  position: relative;
}

#wechat-view.delete-mode [data-log-index]::before {
  content: "×";
  position: absolute;
  left: -22px;
  top: 50%;
  transform: translateY(-50%);
  background: linear-gradient(135deg, var(--blue-gradient-start) 0%, var(--primary-blue) 100%);
  color: white;
  border-radius: 50%;
  width: 16px;
  height: 16px;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 12px;
  font-weight: normal;
  box-shadow: 0 2px 6px var(--shadow-color-rgba);
  transition: all 0.2s ease;
  line-height: 1;
  text-align: center;
  font-family: Arial, sans-serif;
}

#wechat-view.delete-mode .message-row.me[data-log-index]::before {
  left: auto;
  right: -22px;
}

#wechat-view.delete-mode [data-log-index]:hover::before {
  transform: translateY(-50%) scale(1.1);
  box-shadow: 0 4px 8px var(--shadow-color-rgba);
}

.app-view {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  z-index: 60;
  border-radius: 2.25rem;
  visibility: hidden;
  opacity: 0;
  transition: opacity 0.3s ease, visibility 0.3s ease;
  display: flex;
  flex-direction: column;
  backface-visibility: hidden;
}
.app-view.active {
  visibility: visible;
  opacity: 1;
  z-index: 80;
}

.app-screen {
  padding: 3.75rem 1rem 1.375rem 1rem;
  flex-grow: 1;
  background-image: url("https://gitgud.io/lolodesu/lolobabytutorial/-/raw/master/lologame/素材/wallpaper/白色_1.jpg");
  background-size: cover;
  background-position: center;
}

.app-grid {
  display: grid;
  grid-template-columns: repeat(4, 1fr);
  gap: 1rem;
}

.app-icon {
  display: flex;
  flex-direction: column;
  align-items: center;
  text-align: center;
  text-decoration: none;
  cursor: pointer;
}
.app-icon:hover .icon-image {
  transform: scale(1.05);
}
.app-icon .icon-image {
  width: 4.0625rem;
  height: 4.0625rem;
  background-color: var(--primary-blue);
  border-radius: 22.5%;
  margin-bottom: 0.4375rem;
  background-size: cover;
  background-position: center;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 2.2em;
  transition: all 0.2s ease;
}
.app-icon .app-name {
  color: var(--text-color);
  font-size: 0.75em;
  font-weight: 400;
  text-shadow: 0 0.0625rem 0.125rem rgba(0, 0, 0, 0.5);
}

.icon-wechat,
.icon-settings {
  background: linear-gradient(135deg, var(--blue-gradient-start) 0%, var(--blue-gradient-end) 100%);
  color: white;
  box-shadow: 0 4px 12px var(--shadow-color-rgba);
}

.icon-wechat {
  background: linear-gradient(135deg, #09e675 0%, #07c160 50%, #06ad56 100%) !important;
}

.icon-settings {
  background: linear-gradient(135deg, #a8a8a8 0%, #8a8a8a 50%, #777777 100%) !important;
}

.single-color-icon .icon-wechat,
.single-color-icon .icon-settings {
  background: linear-gradient(135deg, var(--primary-gradient-light) 0%, var(--primary-blue) 50%, var(--primary-gradient-dark) 100%) !important;
}

#settings-view {
  background-color: var(--settings-bg-color);
}

.settings-header {
  flex-shrink: 0;
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 0.5rem 0.75rem;
  background: var(--header-bg);
  border-bottom: 1px solid var(--border-color);
  padding-top: 2.8125rem;
  position: relative;
  z-index: 10;
}
.settings-header .back-btn {
  font-size: 1.2em;
  color: var(--primary-blue);
  cursor: pointer;
}
.settings-header .title {
  font-weight: 600;
  color: var(--text-primary);
  font-size: 1em;
  position: absolute;
  left: 50%;
  transform: translateX(-50%);
}

.settings-body {
  flex-grow: 1;
  padding: 1.25rem;
  overflow-y: auto;
}

.settings-card {
  background-color: var(--settings-card-bg-color);
  border-radius: 0.75rem;
  padding: 1rem;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
}
.settings-card p {
  font-size: 0.9em;
  line-height: 1.6;
  color: var(--text-primary);
  margin: 0 0 1rem 0;
}
.settings-card p:last-child {
  margin-bottom: 0;
}
.settings-card .highlight {
  color: #e6a23c;
  font-weight: bold;
}
.settings-card a {
  color: var(--primary-blue);
}
.settings-card a:hover {
  text-decoration: underline;
}
.settings-card li {
  border-bottom-color: var(--border-color);
}
.settings-card li a {
  color: var(--text-primary);
}

#show-last-ai-response-btn,
#show-last-sent-prompt-btn {
  background-color: var(--settings-card-bg-color);
  color: var(--text-primary);
}

#custom-theme-btn {
  transition: all 0.2s ease;
  position: relative;
  z-index: 10;
}
#custom-theme-btn:hover {
  background: var(--deep-blue) !important;
  transform: translateY(-1px);
  box-shadow: 0 4px 12px var(--shadow-color-rgba);
}
#custom-theme-btn:active {
  transform: translateY(0);
}

body.dark-mode {
  background-color: transparent;
}

body.dark-mode .app-view {
  background-color: var(--app-bg-color);
}

body.dark-mode .settings-card {
  background-color: var(--settings-card-bg-color);
}

body.dark-mode .settings-card p,
body.dark-mode .settings-card a {
  color: var(--text-primary);
}

body.dark-mode .settings-card li {
  border-bottom-color: var(--border-color);
}

body.dark-mode .settings-card li a {
  color: var(--text-primary);
}

body.dark-mode #show-last-ai-response-btn,
body.dark-mode #show-last-sent-prompt-btn {
  background-color: var(--settings-card-bg-color);
  color: var(--text-primary);
}

.phone-size-btn {
  flex: 1;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  background-color: var(--settings-card-bg-color);
  border: 1px solid var(--border-color);
  border-radius: 0.75rem;
  padding: 0.75rem 0.5rem;
  cursor: pointer;
  transition: all 0.2s ease;
  gap: 0.5rem;
}
.phone-size-btn:hover {
  transform: translateY(-2px);
  box-shadow: 0 4px 12px var(--shadow-color-rgba);
}
.phone-size-btn.phone-size-active {
  border-color: var(--primary-blue);
  background-color: rgba(var(--shadow-r), var(--shadow-g), var(--shadow-b), 0.05);
  box-shadow: 0 2px 8px var(--shadow-color-rgba);
}

.size-icon {
  width: 10px;
  background-color: var(--primary-blue);
  border-radius: 2px;
}

.size-label {
  font-size: 0.8em;
  color: var(--text-primary);
  font-weight: 500;
}

#moments-view {
  background: linear-gradient(180deg, #ffffff 0%, var(--ultra-light-blue) 100%);
  color: var(--text-primary);
}

.moments-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 0.5rem 0.75rem;
  background: var(--header-bg);
  border-bottom: 1px solid var(--border-color);
  padding-top: 2.8125rem;
  flex-shrink: 0;
  position: relative;
}
.moments-header .title {
  font-weight: 600;
  font-size: 1em;
  color: var(--primary-blue);
  position: absolute;
  left: 50%;
  transform: translateX(-50%);
}
.moments-header .back-btn {
  color: var(--primary-blue);
  font-size: 1.2em;
  cursor: pointer;
  z-index: 1;
}
.moments-header .header-action {
  color: var(--primary-blue);
  font-size: 1.2em;
  cursor: pointer;
  z-index: 1;
  transition: all 0.2s ease;
}

.moments-body {
  flex-grow: 1;
  overflow-y: auto;
  background-color: #fff;
}

.moments-feed-header {
  position: relative;
  margin-bottom: 1.5625rem;
}

.moments-cover-photo {
  width: 100%;
  height: 14.0625rem;
  object-fit: cover;
  display: block;
  cursor: pointer;
}

.moments-user-info {
  position: absolute;
  bottom: -0.75rem;
  right: 0.75rem;
  display: flex;
  align-items: flex-end;
  gap: 0.75rem;
}

.moments-user-name {
  color: white;
  font-size: 1.1em;
  font-weight: bold;
  text-shadow: 0 0.0625rem 0.1875rem rgba(0, 0, 0, 0.5);
  position: relative;
  bottom: 1.375rem;
  cursor: pointer;
}

.moments-user-avatar {
  width: 3.9375rem;
  height: 3.9375rem;
  border-radius: 0.5rem;
  object-fit: cover;
  cursor: pointer;
}

.user-signature {
  position: absolute;
  top: 4.25rem;
  right: 0;
  width: 14.0625rem;
  text-align: right;
  word-wrap: break-word;
  line-height: 1.4;
  color: #8a8a8a;
  font-size: 0.8em;
}

.moments-feed-list {
  padding: 0 0.75rem;
  list-style: none;
}

.moment-post {
  display: flex;
  gap: 0.625rem;
  padding: 1.125rem 0;
  border-bottom: 0.0625rem solid #f0f0f0;
}
.moment-post:last-child {
  border-bottom: none;
}

.post-author-avatar {
  width: 2.375rem;
  height: 2.375rem;
  border-radius: 50%;
  flex-shrink: 0;
  object-fit: cover;
  cursor: pointer;
}

.post-details {
  display: flex;
  flex-direction: column;
  gap: 0.4375rem;
  flex-grow: 1;
}

.post-author-name,
.likes-section .liker-name,
.comment-author,
.delete-moment-btn,
.post-meta .comment-button {
  color: var(--primary-blue);
}

.post-content {
  font-size: 0.9em;
  line-height: 1.5;
  white-space: pre-wrap;
  word-wrap: break-word;
  color: var(--text-primary);
}

.post-media {
  margin-top: 0.25rem;
}

.post-media-image {
  max-width: 10rem;
  max-height: 10rem;
  object-fit: contain;
  border-radius: 0.25rem;
}

.post-media .image-desc-content {
  background-color: rgba(240, 250, 255, 0.8);
  border: 1px solid rgba(74, 149, 237, 0.1);
  width: 10rem;
  height: 10rem;
  font-size: 0.9em;
  color: var(--text-primary);
  display: flex;
  align-items: center;
  justify-content: center;
  text-align: center;
  font-weight: normal;
}

.post-meta {
  display: flex;
  justify-content: space-between;
  align-items: center;
  color: #888;
  font-size: 0.8em;
}
.post-meta .post-time {
  color: #888;
}
.post-meta .post-actions {
  display: flex;
  gap: 1rem;
}
.post-meta .like-button,
.post-meta .comment-button {
  background: #f7f7f7;
  border-radius: 0.1875rem;
  padding: 0.125rem 0.4375rem;
  cursor: pointer;
  font-size: 1.1em;
  transition: all 0.2s ease;
}
.post-meta .like-button:hover,
.post-meta .comment-button:hover {
  color: var(--primary-blue);
}

.post-interactions {
  background: #f8faff;
  border-radius: 0.5rem;
  margin-top: 0.5rem;
  font-size: 0.85em;
  position: relative;
  border: 1px solid rgba(74, 149, 237, 0.08);
}
.post-interactions::before {
  content: "";
  position: absolute;
  top: -0.375rem;
  left: 0.9375rem;
  width: 0;
  height: 0;
  border-left: 0.375rem solid transparent;
  border-right: 0.375rem solid transparent;
  border-bottom: 0.375rem solid #f8faff;
}

.likes-section {
  padding: 0.4375rem 0.625rem;
  background: rgba(248, 250, 255, 0.6);
  display: flex;
  align-items: center;
  gap: 0.4375rem;
  flex-wrap: wrap;
  font-size: 0.8em;
}
.likes-section .likes-list {
  display: flex;
  flex-wrap: wrap;
  gap: 0.25rem;
}
.likes-section .liker-name {
  cursor: pointer;
}
.likes-section .liker-name:not(:last-child)::after {
  content: ", ";
  color: #888;
}
.likes-section .fa-heart {
  color: var(--primary-blue);
}

.comments-section {
  padding: 0 0.625rem 0.4375rem;
  list-style: none;
  border-top: 0.0625rem solid #eaeaea;
}

.likes-section + .comments-section {
  margin-top: -0.0625rem;
}

.comments-section li {
  padding: 0.1875rem 0;
}

.comment-author {
  font-weight: 500;
  cursor: pointer;
}

.comment-content {
  color: var(--text-primary);
  margin-top: 0.25rem;
}

.delete-moment-btn {
  cursor: pointer;
  font-size: 0.8em;
  transition: all 0.2s ease;
}
.delete-moment-btn:hover {
  color: var(--deep-blue);
}

body.dark-mode {
  background-color: transparent;
}
body.dark-mode .app-view {
  background-color: var(--app-bg-color);
}
body.dark-mode .settings-card {
  background-color: var(--settings-card-bg-color);
}
body.dark-mode .settings-card p,
body.dark-mode .settings-card a {
  color: var(--text-primary);
}
body.dark-mode .settings-card li {
  border-bottom-color: var(--border-color);
}
body.dark-mode .settings-card li a {
  color: var(--text-primary);
}
body.dark-mode #show-last-ai-response-btn,
body.dark-mode #show-last-sent-prompt-btn {
  background-color: var(--settings-card-bg-color);
  color: var(--text-primary);
}
body.dark-mode .message-row.them .message-bubble {
  background: linear-gradient(315deg, #2a2a2a 0%, #333333 100%);
  border-color: #3c3c3c;
}
body.dark-mode .voice-text-content {
  background-color: #2c2c2c;
  border-color: #3c3c3c;
  color: #f0f0f0;
  box-shadow: 0 0.0625rem 0.125rem rgba(0, 0, 0, 0.3);
}
body.dark-mode .image-desc-content {
  background-color: rgba(30, 30, 30, 0.7);
  border: 0.0625rem solid rgba(60, 60, 60, 0.4);
  color: #f0f0f0;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.25), 0 2px 6px rgba(0, 0, 0, 0.2);
}
body.dark-mode .location-bubble .location-card {
  background-color: #2c2c2c;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.25), 0 2px 6px rgba(0, 0, 0, 0.15);
}
body.dark-mode .location-content .location-title {
  color: #f0f0f0;
}
body.dark-mode .location-content .location-subtitle {
  color: #aaa;
}
body.dark-mode .file-bubble .file-card {
  background-color: #2c2c2c;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.25), 0 2px 6px rgba(0, 0, 0, 0.15);
}
body.dark-mode .file-details .file-name {
  color: #f0f0f0;
}
body.dark-mode .file-footer {
  background-color: #232323;
  color: #aaa;
  border-top: 0.0625rem solid #3c3c3c;
}
body.dark-mode .event-description.expanded {
  background-color: rgba(50, 50, 50, 0.9);
  color: #f0f0f0;
  box-shadow: 0 1px 4px rgba(0, 0, 0, 0.3);
}

.custom-dialog-overlay {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background-color: transparent;
  display: flex;
  justify-content: center;
  align-items: center;
  z-index: 1000;
  animation: fadeIn 0.2s ease;
}

.custom-dialog {
  background: var(--header-bg);
  border-radius: 1rem;
  box-shadow: 0 25px 50px rgba(0, 0, 0, 0.25), 0 15px 30px rgba(0, 0, 0, 0.15), 0 8px 16px rgba(0, 0, 0, 0.1), 0 4px 8px rgba(0, 0, 0, 0.05);
  width: 85%;
  max-width: 18rem;
  overflow: hidden;
  display: flex;
  flex-direction: column;
  animation: dialogSlideIn 0.3s ease;
  border: 1px solid var(--border-color);
  transform: translateY(0);
}

.dialog-header {
  padding: 1rem;
  text-align: center;
  border-bottom: 1px solid var(--border-color);
  background: var(--header-bg);
}

.dialog-title {
  margin: 0;
  font-size: 1.1rem;
  font-weight: 500;
  color: var(--text-primary);
}

.dialog-body {
  padding: 1.25rem 1rem;
  color: var(--text-primary);
  font-size: 0.9rem;
  line-height: 1.5;
  text-align: center;
}

.dialog-input-container {
  margin-top: 0.75rem;
}
.dialog-input-container input,
.dialog-input-container textarea {
  width: 100%;
  padding: 0.75rem;
  border: 1px solid var(--border-color);
  border-radius: 0.5rem;
  font-size: 0.9rem;
  color: var(--text-primary);
  background-color: var(--input-bg);
  outline: none;
}
.dialog-input-container input:focus,
.dialog-input-container textarea:focus {
  border-color: var(--primary-blue);
  box-shadow: 0 0 0 2px rgba(114, 173, 243, 0.2);
}

.dialog-footer {
  display: flex;
  border-top: 1px solid var(--border-color);
}

.dialog-button {
  flex: 1;
  padding: 0.875rem;
  border: none;
  background: transparent;
  font-size: 0.95rem;
  font-weight: 500;
  cursor: pointer;
  transition: background-color 0.2s ease;
  color: var(--primary-blue);
}
.dialog-button:not(:last-child) {
  border-right: 1px solid var(--border-color);
}
.dialog-button:hover {
  background-color: rgba(114, 173, 243, 0.1);
}
.dialog-button:active {
  background-color: rgba(114, 173, 243, 0.2);
}
.dialog-button.primary-button {
  color: var(--primary-blue);
  font-weight: 600;
}
.dialog-button.cancel-button {
  color: var(--text-secondary);
}

@keyframes dialogSlideIn {
  from {
    opacity: 0;
    transform: translateY(20px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}
@keyframes dialogSlideOut {
  from {
    opacity: 1;
    transform: translateY(0);
  }
  to {
    opacity: 0;
    transform: translateY(20px);
  }
}
.dialog-closing {
  animation: dialogSlideOut 0.2s ease forwards;
}

.overlay-closing {
  animation: fadeOut 0.2s ease forwards;
}

.mobile-dialog-overlay {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background-color: transparent;
  display: flex;
  justify-content: center;
  align-items: center;
  z-index: 1000;
  animation: fadeIn 0.2s ease;
}

body.dark-mode .mobile-dialog,
body.dark-mode .custom-dialog,
body.dark-mode .sticker-manager-container {
  box-shadow: 0 30px 60px rgba(0, 0, 0, 0.5), 0 20px 40px rgba(0, 0, 0, 0.3), 0 10px 20px rgba(0, 0, 0, 0.2), 0 5px 10px rgba(0, 0, 0, 0.15);
}

body[data-theme=pink] .mobile-dialog,
body[data-theme=pink] .custom-dialog,
body[data-theme=pink] .sticker-manager-container {
  box-shadow: 0 30px 60px rgba(216, 51, 132, 0.3), 0 20px 40px rgba(216, 51, 132, 0.2), 0 10px 20px rgba(0, 0, 0, 0.15), 0 5px 10px rgba(0, 0, 0, 0.1);
}

body[data-theme=white] .mobile-dialog,
body[data-theme=white] .custom-dialog,
body[data-theme=white] .sticker-manager-container {
  box-shadow: 0 30px 60px rgba(0, 0, 0, 0.2), 0 20px 40px rgba(0, 0, 0, 0.15), 0 10px 20px rgba(0, 0, 0, 0.1), 0 5px 10px rgba(0, 0, 0, 0.05);
}

.mobile-dialog {
  background: var(--header-bg);
  border-radius: 1rem;
  box-shadow: 0 30px 60px rgba(0, 0, 0, 0.3), 0 20px 40px rgba(0, 0, 0, 0.2), 0 10px 20px rgba(0, 0, 0, 0.15), 0 5px 10px rgba(0, 0, 0, 0.1);
  overflow: hidden;
  display: flex;
  flex-direction: column;
  animation: dialogSlideIn 0.3s ease;
  border: 1px solid var(--border-color);
  transform: translateY(0);
  position: relative;
}

.moment-dialog {
  width: 90%;
  max-width: 20rem;
}

.time-jump-dialog {
  width: 85%;
  max-width: 18rem;
}

.mobile-dialog .dialog-header {
  padding: 1.2rem 1rem 1rem;
  text-align: center;
  border-bottom: 1px solid var(--border-color);
  background: var(--header-bg);
}
.mobile-dialog .dialog-header h3 {
  margin: 0;
  font-size: 1.1rem;
  font-weight: 600;
  color: var(--text-primary);
  letter-spacing: 0.3px;
}

.mobile-dialog .dialog-body {
  padding: 1.25rem 1rem;
  color: var(--text-primary);
  font-size: 0.9rem;
  line-height: 1.5;
  max-height: 60vh;
  overflow-y: auto;
}

.mobile-dialog .dialog-footer {
  display: flex;
  border-top: 1px solid var(--border-color);
}

.mobile-dialog .form-group {
  margin-bottom: 0.75rem;
}
.mobile-dialog .form-group:last-child {
  margin-bottom: 0;
}
.mobile-dialog .form-group label {
  display: block;
  margin-bottom: 0.5rem;
  font-weight: 500;
  color: var(--text-primary);
  font-size: 0.9rem;
}
.mobile-dialog .form-group input[type=text],
.mobile-dialog .form-group input[type=url],
.mobile-dialog .form-group textarea {
  width: 100%;
  padding: 0.75rem;
  border: 1px solid var(--border-color);
  border-radius: 0.5rem;
  font-size: 0.9rem;
  color: var(--text-primary);
  background-color: white;
  outline: none;
  box-sizing: border-box;
}
.mobile-dialog .form-group input[type=text]:focus,
.mobile-dialog .form-group input[type=url]:focus,
.mobile-dialog .form-group textarea:focus {
  border-color: var(--primary-blue);
  box-shadow: 0 0 0 2px rgba(114, 173, 243, 0.2);
}
.mobile-dialog .form-group textarea {
  resize: vertical;
  min-height: 4rem;
  font-family: inherit;
}
.mobile-dialog .form-group input[type=checkbox] {
  margin-right: 0.5rem;
  transform: scale(1.1);
}

.mobile-dialog .radio-group {
  display: flex;
  margin-top: 0.5rem;
  border-radius: 0.5rem;
  overflow: hidden;
  border: 1px solid var(--border-color);
}
.mobile-dialog .radio-group label {
  flex: 1;
  display: flex;
  align-items: center;
  justify-content: center;
  margin-bottom: 0;
  font-weight: 500;
  cursor: pointer;
  font-size: 0.85rem;
  padding: 0.5rem 0.75rem;
  background: white;
  color: var(--text-secondary);
  transition: all 0.2s ease;
  border-right: 1px solid var(--border-color);
  position: relative;
}
.mobile-dialog .radio-group label:last-child {
  border-right: none;
}
.mobile-dialog .radio-group label input[type=radio] {
  position: absolute;
  opacity: 0;
  width: 0;
  height: 0;
}
.mobile-dialog .radio-group label:has(input[type=radio]:checked) {
  background: var(--primary-blue);
  color: white;
  font-weight: 600;
}
.mobile-dialog .radio-group label:hover:not(:has(input[type=radio]:checked)) {
  background: var(--ultra-light-blue);
  color: var(--primary-blue);
}

.mobile-dialog .image-options {
  background: var(--ultra-light-blue);
  padding: 0.75rem;
  border-radius: 0.5rem;
  margin-top: 0.5rem;
  border: 1px solid var(--border-color);
}
.mobile-dialog .image-options .form-group {
  margin-bottom: 0.5rem;
}
.mobile-dialog .image-options .form-group:last-child {
  margin-bottom: 0;
}

.mobile-dialog .description-group {
  background: var(--ultra-light-blue);
  padding: 0.75rem;
  border-radius: 0.5rem;
  margin-top: 0.5rem;
  border: 1px solid var(--border-color);
}
.mobile-dialog .description-group .form-group {
  margin-bottom: 0;
}

.mobile-dialog .dialog-btn {
  flex: 1;
  padding: 0.875rem;
  border: none;
  background: transparent;
  font-size: 0.95rem;
  font-weight: 500;
  cursor: pointer;
  transition: background-color 0.2s ease;
  color: var(--primary-blue);
}
.mobile-dialog .dialog-btn:not(:last-child) {
  border-right: 1px solid var(--border-color);
}
.mobile-dialog .dialog-btn:hover {
  background-color: var(--ultra-light-blue);
}
.mobile-dialog .dialog-btn:active {
  background-color: var(--soft-blue);
}
.mobile-dialog .dialog-btn.dialog-btn-cancel, .mobile-dialog .dialog-btn.dialog-btn-confirm {
  border-radius: 0;
}
.mobile-dialog .dialog-btn:last-child {
  border-bottom-right-radius: 1rem;
}
.mobile-dialog .dialog-btn:first-child {
  border-bottom-left-radius: 1rem;
}

.mobile-dialog.dialog-closing {
  animation: dialogSlideOut 0.3s ease forwards;
}

body.dark-mode .mobile-dialog {
  background: linear-gradient(135deg, #2c2c2c 0%, #1a1a1a 100%);
  border-color: #3c3c3c;
  box-shadow: 0 8px 24px rgba(0, 0, 0, 0.4), 0 4px 12px rgba(0, 0, 0, 0.3);
}
body.dark-mode .mobile-dialog .dialog-header {
  background: linear-gradient(135deg, #2c2c2c 0%, #1a1a1a 100%);
  border-bottom-color: #3c3c3c;
}
body.dark-mode .mobile-dialog .dialog-header h3 {
  color: #e0e0e0;
}
body.dark-mode .mobile-dialog .dialog-body {
  color: #c0c0c0;
}
body.dark-mode .mobile-dialog .form-group label {
  color: #c0c0c0;
}
body.dark-mode .mobile-dialog .form-group input[type=text],
body.dark-mode .mobile-dialog .form-group input[type=url],
body.dark-mode .mobile-dialog .form-group textarea {
  background-color: #2a2a2a;
  border-color: #3c3c3c;
  color: #e0e0e0;
}
body.dark-mode .mobile-dialog .form-group input[type=text]:focus,
body.dark-mode .mobile-dialog .form-group input[type=url]:focus,
body.dark-mode .mobile-dialog .form-group textarea:focus {
  border-color: var(--primary-blue);
  box-shadow: 0 0 0 2px rgba(114, 173, 243, 0.3);
}
body.dark-mode .mobile-dialog .form-group input[type=text]::placeholder,
body.dark-mode .mobile-dialog .form-group input[type=url]::placeholder,
body.dark-mode .mobile-dialog .form-group textarea::placeholder {
  color: #888888;
}
body.dark-mode .mobile-dialog .image-options,
body.dark-mode .mobile-dialog .description-group {
  background: #1a1a1a;
  border-color: #3c3c3c;
}
body.dark-mode .mobile-dialog .radio-group {
  border-color: #3c3c3c;
}
body.dark-mode .mobile-dialog .radio-group label {
  background: #2a2a2a;
  color: #a0a0a0;
  border-right-color: #3c3c3c;
}
body.dark-mode .mobile-dialog .radio-group label:has(input[type=radio]:checked) {
  background: var(--primary-blue);
  color: white;
}
body.dark-mode .mobile-dialog .radio-group label:hover:not(:has(input[type=radio]:checked)) {
  background: #3c3c3c;
  color: #c0c0c0;
}
body.dark-mode .mobile-dialog .dialog-btn {
  color: var(--primary-blue);
}
body.dark-mode .mobile-dialog .dialog-btn:hover {
  background-color: #3c3c3c;
}
body.dark-mode .mobile-dialog .dialog-btn:active {
  background-color: #505050;
}

body[data-theme=pink] .mobile-dialog .dialog-header h3 {
  color: #d63384;
}
body[data-theme=pink] .mobile-dialog .image-options,
body[data-theme=pink] .mobile-dialog .description-group {
  background: #fdf2f8;
  border-color: #f8bbd9;
}
body[data-theme=pink] .mobile-dialog .dialog-body {
  color: #333333;
}
body[data-theme=pink] .mobile-dialog .radio-group label:has(input[type=radio]:checked) {
  background: #d63384;
  color: white;
}
body[data-theme=pink] .mobile-dialog .btn-primary {
  background: #d63384;
  border-color: #d63384;
}
body[data-theme=pink] .mobile-dialog .btn-primary:hover {
  background: rgb(178.187755102, 35.812244898, 106.5632653061);
  border-color: rgb(178.187755102, 35.812244898, 106.5632653061);
}
body[data-theme=pink] .mobile-dialog .input-field:focus {
  border-color: #d63384;
  box-shadow: 0 0 0 2px rgba(214, 51, 132, 0.2);
}
body[data-theme=pink] .mobile-dialog .radio-group label:hover:not(:has(input[type=radio]:checked)) {
  background: #fdf2f8;
  color: #d63384;
}

body[data-theme=white] .mobile-dialog .dialog-header h3 {
  color: #333333;
}
body[data-theme=white] .mobile-dialog .image-options,
body[data-theme=white] .mobile-dialog .description-group {
  background: #f8f8f8;
  border-color: #e0e0e0;
}
body[data-theme=white] .mobile-dialog .dialog-body {
  color: #333333;
}
body[data-theme=white] .mobile-dialog .radio-group label:has(input[type=radio]:checked) {
  background: #333333;
  color: white;
}
body[data-theme=white] .mobile-dialog .btn-primary {
  background: #333333;
  border-color: #333333;
}
body[data-theme=white] .mobile-dialog .btn-primary:hover {
  background: rgb(25.5, 25.5, 25.5);
  border-color: rgb(25.5, 25.5, 25.5);
}
body[data-theme=white] .mobile-dialog .input-field:focus {
  border-color: #a0e75a;
  box-shadow: 0 0 0 2px rgba(160, 231, 90, 0.2);
}
body[data-theme=white] .mobile-dialog .form-group label {
  color: #333333;
}
body[data-theme=white] .mobile-dialog .form-group input[type=text],
body[data-theme=white] .mobile-dialog .form-group input[type=url],
body[data-theme=white] .mobile-dialog .form-group textarea {
  background: #ffffff;
  border: 1px solid #e0e0e0;
  color: #333333;
}
body[data-theme=white] .mobile-dialog .form-group input[type=text]:focus,
body[data-theme=white] .mobile-dialog .form-group input[type=url]:focus,
body[data-theme=white] .mobile-dialog .form-group textarea:focus {
  border-color: #a0e75a;
  box-shadow: 0 0 0 2px rgba(160, 231, 90, 0.2);
  outline: none;
}
body[data-theme=white] .mobile-dialog .form-group input[type=text]::placeholder,
body[data-theme=white] .mobile-dialog .form-group input[type=url]::placeholder,
body[data-theme=white] .mobile-dialog .form-group textarea::placeholder {
  color: white;
}
body[data-theme=white] .mobile-dialog .form-group input[type=text]::placeholder,
body[data-theme=white] .mobile-dialog .form-group input[type=url]::placeholder,
body[data-theme=white] .mobile-dialog .form-group textarea::placeholder {
  color: #999999;
}
body[data-theme=white] .mobile-dialog .radio-group label:has(input[type=radio]:checked) {
  background: #a0e75a;
  color: #333333;
}
body[data-theme=white] .mobile-dialog .radio-group label:hover:not(:has(input[type=radio]:checked)) {
  background: #f8f8f8;
  color: #666666;
}

body[data-theme=custom] .mobile-dialog .radio-group label:has(input[type=radio]:checked) {
  background: var(--primary-blue);
  color: white;
}
body[data-theme=custom] .mobile-dialog .radio-group label:hover:not(:has(input[type=radio]:checked)) {
  background: var(--ultra-light-blue);
  color: var(--primary-blue);
}

@media (prefers-contrast: high) {
  .mobile-dialog {
    border-width: 2px;
  }
  .mobile-dialog .dialog-btn {
    border: 1px solid var(--border-color);
  }
  .mobile-dialog .dialog-btn:focus {
    outline: 2px solid var(--primary-blue);
    outline-offset: 2px;
  }
  .mobile-dialog .form-group input[type=text],
  .mobile-dialog .form-group textarea {
    border-width: 2px;
  }
  .mobile-dialog .radio-group {
    border-width: 2px;
  }
  .mobile-dialog .radio-group label {
    border-right-width: 2px;
  }
}
@media (prefers-reduced-motion: reduce) {
  .mobile-dialog {
    animation: none;
  }
  .mobile-dialog .dialog-btn,
  .mobile-dialog .form-group input,
  .mobile-dialog .form-group textarea,
  .mobile-dialog .radio-group label {
    transition: none;
  }
  .mobile-dialog.dialog-closing {
    animation: none;
  }
}
.mobile-dialog .dialog-header h3 {
  text-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
}
.mobile-dialog .dialog-body {
  background: rgba(255, 255, 255, 0.02);
  -webkit-backdrop-filter: blur(1px);
          backdrop-filter: blur(1px);
}
.mobile-dialog .dialog-btn {
  -webkit-backdrop-filter: blur(2px);
          backdrop-filter: blur(2px);
}
.mobile-dialog .dialog-btn:hover {
  -webkit-backdrop-filter: blur(4px);
          backdrop-filter: blur(4px);
}
.mobile-dialog .form-group input[type=text],
.mobile-dialog .form-group textarea {
  -webkit-backdrop-filter: blur(1px);
          backdrop-filter: blur(1px);
}
.mobile-dialog .form-group input[type=text]:focus,
.mobile-dialog .form-group textarea:focus {
  -webkit-backdrop-filter: blur(2px);
          backdrop-filter: blur(2px);
}

@media (max-height: 600px) {
  .mobile-dialog {
    max-height: 90% !important;
  }
  .mobile-dialog .dialog-body {
    padding: 12px 16px;
  }
  .mobile-dialog .form-group {
    margin-bottom: 10px;
  }
}
.transfer-dialog .form-group,
.red-packet-dialog .form-group,
.gift-dialog .form-group,
.comment-dialog .form-group {
  position: relative;
}
.transfer-dialog .form-group label,
.red-packet-dialog .form-group label,
.gift-dialog .form-group label,
.comment-dialog .form-group label {
  display: block;
  margin-bottom: 0.5rem;
  font-weight: 600;
  color: var(--text-primary);
  font-size: 0.9rem;
}
.transfer-dialog .form-group input,
.transfer-dialog .form-group textarea,
.red-packet-dialog .form-group input,
.red-packet-dialog .form-group textarea,
.gift-dialog .form-group input,
.gift-dialog .form-group textarea,
.comment-dialog .form-group input,
.comment-dialog .form-group textarea {
  width: 100%;
  padding: 0.75rem 1rem;
  border: 2px solid var(--border-color);
  border-radius: 0.75rem;
  font-size: 1rem;
  color: var(--text-primary);
  background-color: var(--input-bg);
  transition: all 0.2s ease;
  box-sizing: border-box;
  font-family: inherit;
}
.transfer-dialog .form-group input:focus,
.transfer-dialog .form-group textarea:focus,
.red-packet-dialog .form-group input:focus,
.red-packet-dialog .form-group textarea:focus,
.gift-dialog .form-group input:focus,
.gift-dialog .form-group textarea:focus,
.comment-dialog .form-group input:focus,
.comment-dialog .form-group textarea:focus {
  outline: none;
  border-color: var(--primary-blue);
  box-shadow: 0 0 0 3px rgba(114, 173, 243, 0.1);
  background-color: white;
}
.transfer-dialog .form-group input::placeholder,
.transfer-dialog .form-group textarea::placeholder,
.red-packet-dialog .form-group input::placeholder,
.red-packet-dialog .form-group textarea::placeholder,
.gift-dialog .form-group input::placeholder,
.gift-dialog .form-group textarea::placeholder,
.comment-dialog .form-group input::placeholder,
.comment-dialog .form-group textarea::placeholder {
  color: var(--text-secondary);
  opacity: 0.7;
}
.transfer-dialog .form-group input[type=url],
.red-packet-dialog .form-group input[type=url],
.gift-dialog .form-group input[type=url],
.comment-dialog .form-group input[type=url] {
  font-family: "Consolas", "Monaco", "Courier New", monospace;
  font-size: 0.9rem;
  background: linear-gradient(135deg, #f8faff 0%, #eef4ff 100%);
  border: 2px solid #e3f2fd;
}
.transfer-dialog .form-group input[type=url]:focus,
.red-packet-dialog .form-group input[type=url]:focus,
.gift-dialog .form-group input[type=url]:focus,
.comment-dialog .form-group input[type=url]:focus {
  background: white;
  border-color: var(--primary-blue);
  box-shadow: 0 0 0 3px rgba(114, 173, 243, 0.1);
}
.transfer-dialog .form-group input[type=url]::placeholder,
.red-packet-dialog .form-group input[type=url]::placeholder,
.gift-dialog .form-group input[type=url]::placeholder,
.comment-dialog .form-group input[type=url]::placeholder {
  color: #90a4ae;
  font-style: italic;
}
.transfer-dialog .form-group input[type=number],
.transfer-dialog .form-group input[type=text],
.transfer-dialog .form-group input[type=email],
.transfer-dialog .form-group input[type=url],
.red-packet-dialog .form-group input[type=number],
.red-packet-dialog .form-group input[type=text],
.red-packet-dialog .form-group input[type=email],
.red-packet-dialog .form-group input[type=url],
.gift-dialog .form-group input[type=number],
.gift-dialog .form-group input[type=text],
.gift-dialog .form-group input[type=email],
.gift-dialog .form-group input[type=url],
.comment-dialog .form-group input[type=number],
.comment-dialog .form-group input[type=text],
.comment-dialog .form-group input[type=email],
.comment-dialog .form-group input[type=url] {
  -webkit-appearance: none;
  appearance: none;
}
.transfer-dialog .form-group input[type=number]::-webkit-outer-spin-button, .transfer-dialog .form-group input[type=number]::-webkit-inner-spin-button,
.transfer-dialog .form-group input[type=text]::-webkit-outer-spin-button,
.transfer-dialog .form-group input[type=text]::-webkit-inner-spin-button,
.transfer-dialog .form-group input[type=email]::-webkit-outer-spin-button,
.transfer-dialog .form-group input[type=email]::-webkit-inner-spin-button,
.transfer-dialog .form-group input[type=url]::-webkit-outer-spin-button,
.transfer-dialog .form-group input[type=url]::-webkit-inner-spin-button,
.red-packet-dialog .form-group input[type=number]::-webkit-outer-spin-button,
.red-packet-dialog .form-group input[type=number]::-webkit-inner-spin-button,
.red-packet-dialog .form-group input[type=text]::-webkit-outer-spin-button,
.red-packet-dialog .form-group input[type=text]::-webkit-inner-spin-button,
.red-packet-dialog .form-group input[type=email]::-webkit-outer-spin-button,
.red-packet-dialog .form-group input[type=email]::-webkit-inner-spin-button,
.red-packet-dialog .form-group input[type=url]::-webkit-outer-spin-button,
.red-packet-dialog .form-group input[type=url]::-webkit-inner-spin-button,
.gift-dialog .form-group input[type=number]::-webkit-outer-spin-button,
.gift-dialog .form-group input[type=number]::-webkit-inner-spin-button,
.gift-dialog .form-group input[type=text]::-webkit-outer-spin-button,
.gift-dialog .form-group input[type=text]::-webkit-inner-spin-button,
.gift-dialog .form-group input[type=email]::-webkit-outer-spin-button,
.gift-dialog .form-group input[type=email]::-webkit-inner-spin-button,
.gift-dialog .form-group input[type=url]::-webkit-outer-spin-button,
.gift-dialog .form-group input[type=url]::-webkit-inner-spin-button,
.comment-dialog .form-group input[type=number]::-webkit-outer-spin-button,
.comment-dialog .form-group input[type=number]::-webkit-inner-spin-button,
.comment-dialog .form-group input[type=text]::-webkit-outer-spin-button,
.comment-dialog .form-group input[type=text]::-webkit-inner-spin-button,
.comment-dialog .form-group input[type=email]::-webkit-outer-spin-button,
.comment-dialog .form-group input[type=email]::-webkit-inner-spin-button,
.comment-dialog .form-group input[type=url]::-webkit-outer-spin-button,
.comment-dialog .form-group input[type=url]::-webkit-inner-spin-button {
  -webkit-appearance: none;
  margin: 0;
}
.transfer-dialog .form-group label:has(+ input[required])::after,
.transfer-dialog .form-group label:has(+ textarea[required])::after,
.red-packet-dialog .form-group label:has(+ input[required])::after,
.red-packet-dialog .form-group label:has(+ textarea[required])::after,
.gift-dialog .form-group label:has(+ input[required])::after,
.gift-dialog .form-group label:has(+ textarea[required])::after,
.comment-dialog .form-group label:has(+ input[required])::after,
.comment-dialog .form-group label:has(+ textarea[required])::after {
  content: " *";
  color: #e74c3c;
  font-weight: bold;
}
.transfer-dialog .dialog-body,
.red-packet-dialog .dialog-body,
.gift-dialog .dialog-body,
.comment-dialog .dialog-body {
  padding: 1.5rem 1.25rem;
}

.comment-dialog {
  width: 92%;
  max-width: 22rem;
}
.comment-dialog textarea {
  min-height: 4rem;
  resize: vertical;
  font-family: inherit;
  line-height: 1.4;
}

.transfer-dialog {
  width: 90%;
  max-width: 20rem;
}
.transfer-dialog .form-group {
  margin-bottom: 1rem;
}
.transfer-dialog .form-group:last-child {
  margin-bottom: 0;
}
.transfer-dialog input[type=number] {
  font-size: 1.1rem;
  font-weight: 600;
  text-align: center;
}
.transfer-dialog input[type=number]:focus {
  color: var(--primary-blue);
}
.transfer-dialog input[type=text] {
  font-size: 0.95rem;
}

.red-packet-dialog {
  width: 90%;
  max-width: 20rem;
}
.red-packet-dialog .dialog-header h3 {
  color: #e74c3c;
}
.red-packet-dialog .form-group {
  margin-bottom: 1rem;
}
.red-packet-dialog .form-group:last-child {
  margin-bottom: 0;
}
.red-packet-dialog input[type=number] {
  font-size: 1.1rem;
  font-weight: 600;
  text-align: center;
  color: #e74c3c;
}
.red-packet-dialog input[type=number]:focus {
  border-color: #e74c3c;
  box-shadow: 0 0 0 2px rgba(231, 76, 60, 0.2);
}
.red-packet-dialog input[type=text] {
  font-size: 0.95rem;
  text-align: center;
}

.gift-dialog {
  width: 90%;
  max-width: 20rem;
}
.gift-dialog .form-group {
  margin-bottom: 1rem;
}
.gift-dialog .form-group:last-child {
  margin-bottom: 0;
}
.gift-dialog input[type=text] {
  font-size: 1rem;
  font-weight: 500;
}
.gift-dialog input[type=number] {
  font-size: 1rem;
  text-align: center;
}

.comment-dialog .dialog-footer {
  display: flex;
  border-top: 1px solid var(--border-color);
}

.comment-dialog .dialog-button {
  flex: 1;
  padding: 0.875rem;
  border: none;
  background: transparent;
  font-size: 0.95rem;
  font-weight: 500;
  cursor: pointer;
  transition: background-color 0.2s ease;
  color: var(--primary-blue);
}
.comment-dialog .dialog-button:not(:last-child) {
  border-right: 1px solid var(--border-color);
}
.comment-dialog .dialog-button:hover {
  background-color: var(--ultra-light-blue);
}
.comment-dialog .dialog-button:active {
  background-color: var(--soft-blue);
}

body.dark-mode .transfer-dialog .form-group input,
body.dark-mode .transfer-dialog .form-group textarea,
body.dark-mode .red-packet-dialog .form-group input,
body.dark-mode .red-packet-dialog .form-group textarea,
body.dark-mode .gift-dialog .form-group input,
body.dark-mode .gift-dialog .form-group textarea,
body.dark-mode .comment-dialog .form-group input,
body.dark-mode .comment-dialog .form-group textarea {
  background-color: #2a2a2a;
  border-color: #3c3c3c;
  color: #e0e0e0;
}
body.dark-mode .transfer-dialog .form-group input:focus,
body.dark-mode .transfer-dialog .form-group textarea:focus,
body.dark-mode .red-packet-dialog .form-group input:focus,
body.dark-mode .red-packet-dialog .form-group textarea:focus,
body.dark-mode .gift-dialog .form-group input:focus,
body.dark-mode .gift-dialog .form-group textarea:focus,
body.dark-mode .comment-dialog .form-group input:focus,
body.dark-mode .comment-dialog .form-group textarea:focus {
  background-color: #333333;
  border-color: var(--primary-blue);
  box-shadow: 0 0 0 3px rgba(114, 173, 243, 0.2);
}
body.dark-mode .transfer-dialog .form-group input::placeholder,
body.dark-mode .transfer-dialog .form-group textarea::placeholder,
body.dark-mode .red-packet-dialog .form-group input::placeholder,
body.dark-mode .red-packet-dialog .form-group textarea::placeholder,
body.dark-mode .gift-dialog .form-group input::placeholder,
body.dark-mode .gift-dialog .form-group textarea::placeholder,
body.dark-mode .comment-dialog .form-group input::placeholder,
body.dark-mode .comment-dialog .form-group textarea::placeholder {
  color: #888888;
}
body.dark-mode .transfer-dialog .form-group input[type=url],
body.dark-mode .red-packet-dialog .form-group input[type=url],
body.dark-mode .gift-dialog .form-group input[type=url],
body.dark-mode .comment-dialog .form-group input[type=url] {
  background: #1a1a1a;
  border-color: #3c3c3c;
  color: #e0e0e0;
}
body.dark-mode .transfer-dialog .form-group input[type=url]:focus,
body.dark-mode .red-packet-dialog .form-group input[type=url]:focus,
body.dark-mode .gift-dialog .form-group input[type=url]:focus,
body.dark-mode .comment-dialog .form-group input[type=url]:focus {
  background: #2a2a2a;
  border-color: var(--primary-blue);
}
body.dark-mode .transfer-dialog .form-group input[type=url]::placeholder,
body.dark-mode .red-packet-dialog .form-group input[type=url]::placeholder,
body.dark-mode .gift-dialog .form-group input[type=url]::placeholder,
body.dark-mode .comment-dialog .form-group input[type=url]::placeholder {
  color: #888888;
}
body.dark-mode .red-packet-dialog input[type=number]:focus {
  border-color: #e74c3c;
  box-shadow: 0 0 0 3px rgba(231, 76, 60, 0.2);
}

body[data-theme=pink] .transfer-dialog input[type=number]:focus {
  color: #d63384;
  border-color: #d63384;
  box-shadow: 0 0 0 3px rgba(216, 51, 132, 0.1);
}
body[data-theme=pink] .red-packet-dialog .dialog-header h3 {
  color: #d63384;
}
body[data-theme=pink] .input-dialog input[type=url] {
  background: linear-gradient(135deg, #fdf2f8 0%, #fce7f3 100%);
  border-color: #f8bbd9;
}
body[data-theme=pink] .input-dialog input[type=url]:focus {
  border-color: #d63384;
  box-shadow: 0 0 0 3px rgba(216, 51, 132, 0.1);
}

body[data-theme=white] .transfer-dialog input[type=number]:focus {
  color: #689f38;
  border-color: #689f38;
  box-shadow: 0 0 0 3px rgba(104, 159, 56, 0.1);
}
body[data-theme=white] .red-packet-dialog .dialog-header h3 {
  color: #f44336;
}
body[data-theme=white] .input-dialog input[type=url] {
  background: linear-gradient(135deg, #f8f8f8 0%, #f0f0f0 100%);
  border-color: #e0e0e0;
  color: #333333;
}
body[data-theme=white] .input-dialog input[type=url]:focus {
  border-color: #689f38;
  box-shadow: 0 0 0 3px rgba(104, 159, 56, 0.1);
}
body[data-theme=white] .input-dialog input[type=url]::placeholder {
  color: #999999;
}

.input-dialog {
  width: 90%;
  max-width: 20rem;
}

.voice-dialog {
  width: 90%;
  max-width: 22rem;
}
.voice-dialog .dialog-header h3 {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 0.5rem;
}
.voice-dialog .form-group {
  margin-bottom: 1rem;
}
.voice-dialog .form-group:last-child {
  margin-bottom: 0;
}
.voice-dialog .form-group label {
  display: block;
  margin-bottom: 0.5rem;
  font-weight: 600;
  color: var(--text-primary);
  font-size: 0.9rem;
}
.voice-dialog .form-group textarea {
  width: 100%;
  min-height: 80px;
  padding: 0.75rem 1rem;
  border: 2px solid var(--border-color);
  border-radius: 0.75rem;
  font-size: 1rem;
  color: var(--text-primary);
  background-color: var(--input-bg);
  transition: all 0.2s ease;
  box-sizing: border-box;
  font-family: inherit;
  resize: vertical;
}
.voice-dialog .form-group textarea:focus {
  outline: none;
  border-color: var(--primary-blue);
  box-shadow: 0 0 0 3px rgba(114, 173, 243, 0.1);
  background-color: white;
}
.voice-dialog .form-group textarea::placeholder {
  color: var(--text-secondary);
  opacity: 0.7;
}
.voice-dialog .form-group input[type=number] {
  width: 100%;
  padding: 0.75rem 1rem;
  border: 2px solid var(--border-color);
  border-radius: 0.75rem;
  font-size: 1rem;
  color: var(--text-primary);
  background-color: var(--input-bg);
  transition: all 0.2s ease;
  box-sizing: border-box;
  font-family: inherit;
  -webkit-appearance: none;
  appearance: none;
}
.voice-dialog .form-group input[type=number]:focus {
  outline: none;
  border-color: var(--primary-blue);
  box-shadow: 0 0 0 3px rgba(114, 173, 243, 0.1);
  background-color: white;
}
.voice-dialog .form-group input[type=number]::placeholder {
  color: var(--text-secondary);
  opacity: 0.7;
}
.voice-dialog .form-group input[type=number]::-webkit-outer-spin-button, .voice-dialog .form-group input[type=number]::-webkit-inner-spin-button {
  -webkit-appearance: none;
  margin: 0;
}

.receive-dialog {
  width: 85%;
  max-width: 18rem;
}
.receive-dialog .receive-content {
  display: flex;
  align-items: center;
  gap: 1rem;
  padding: 0.5rem 0;
}
.receive-dialog .receive-icon {
  font-size: 2.5rem;
  flex-shrink: 0;
}
.receive-dialog .receive-info {
  flex: 1;
}
.receive-dialog .receive-title {
  font-size: 1rem;
  font-weight: 500;
  color: var(--text-primary);
  margin-bottom: 0.25rem;
}
.receive-dialog .receive-price {
  font-size: 1.2rem;
  font-weight: 600;
  color: var(--primary-blue);
  margin-bottom: 0.25rem;
}
.receive-dialog .receive-note {
  font-size: 0.85rem;
  color: var(--text-secondary);
  font-style: italic;
}
.receive-dialog .dialog-footer {
  display: flex;
  border-top: 1px solid var(--border-color);
}
.receive-dialog .dialog-footer .dialog-button {
  flex: 1;
  padding: 0.875rem;
  border: none;
  background: transparent;
  font-size: 0.95rem;
  font-weight: 500;
  cursor: pointer;
  transition: background-color 0.2s ease;
  color: var(--primary-blue);
}
.receive-dialog .dialog-footer .dialog-button:not(:last-child) {
  border-right: 1px solid var(--border-color);
}
.receive-dialog .dialog-footer .dialog-button:hover {
  background-color: var(--ultra-light-blue);
}
.receive-dialog .dialog-footer .dialog-button:active {
  background-color: var(--soft-blue);
}

.sticker-manager-modal {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background-color: transparent;
  display: flex;
  justify-content: center;
  align-items: center;
  z-index: 1000;
  animation: fadeIn 0.2s ease;
}

.sticker-manager-container {
  background: var(--header-bg);
  border-radius: 1rem;
  box-shadow: 0 35px 70px rgba(0, 0, 0, 0.35), 0 25px 50px rgba(0, 0, 0, 0.25), 0 15px 30px rgba(0, 0, 0, 0.2), 0 8px 16px rgba(0, 0, 0, 0.15);
  width: 90%;
  max-width: 28rem;
  max-height: 80vh;
  overflow: hidden;
  display: flex;
  flex-direction: column;
  animation: dialogSlideIn 0.3s ease;
  border: 1px solid var(--border-color);
}
.sticker-manager-container h2 {
  margin: 0;
  padding: 1rem;
  text-align: center;
  border-bottom: 1px solid var(--border-color);
  background: var(--header-bg);
  font-size: 1.1rem;
  font-weight: 600;
  color: var(--text-primary);
}
.sticker-manager-container .sticker-manager-tabs {
  display: flex;
  border-bottom: 1px solid var(--border-color);
  background: var(--header-bg);
}
.sticker-manager-container .sticker-manager-tabs .tab-button {
  flex: 1;
  padding: 0.75rem 1rem;
  text-align: center;
  cursor: pointer;
  font-size: 0.9rem;
  font-weight: 500;
  color: var(--text-secondary);
  border-bottom: 2px solid transparent;
  transition: all 0.2s ease;
}
.sticker-manager-container .sticker-manager-tabs .tab-button:hover {
  background-color: var(--ultra-light-blue);
  color: var(--text-primary);
}
.sticker-manager-container .sticker-manager-tabs .tab-button.active {
  color: var(--primary-blue);
  border-bottom-color: var(--primary-blue);
  font-weight: 600;
}
.sticker-manager-container .sticker-manager-tabs .tab-button:not(:last-child) {
  border-right: 1px solid var(--border-color);
}
.sticker-manager-container .sticker-manager-content {
  overflow-y: auto;
  flex: 1;
}
.sticker-manager-container .sticker-manager-content .tab-content {
  display: none;
  padding: 1.5rem 1.25rem;
}
.sticker-manager-container .sticker-manager-content .tab-content.active {
  display: block;
}
.sticker-manager-container .sticker-manager-content .form-group {
  display: flex;
  flex-direction: column;
  gap: 0.5rem;
  margin-bottom: 1rem;
}
.sticker-manager-container .sticker-manager-content .form-group label {
  font-size: 0.9rem;
  font-weight: 500;
  color: var(--text-primary);
}
.sticker-manager-container .sticker-manager-content .form-group input,
.sticker-manager-container .sticker-manager-content .form-group textarea {
  width: 100%;
  padding: 0.75rem 1rem;
  border: 2px solid var(--border-color);
  border-radius: 0.75rem;
  font-size: 1rem;
  color: var(--text-primary);
  background-color: var(--input-bg);
  transition: all 0.2s ease;
  box-sizing: border-box;
}
.sticker-manager-container .sticker-manager-content .form-group input:focus,
.sticker-manager-container .sticker-manager-content .form-group textarea:focus {
  outline: none;
  border-color: var(--primary-blue);
  box-shadow: 0 0 0 3px rgba(114, 173, 243, 0.1);
  background-color: white;
}
.sticker-manager-container .sticker-manager-content .form-group input::placeholder,
.sticker-manager-container .sticker-manager-content .form-group textarea::placeholder {
  color: var(--text-secondary);
  opacity: 0.7;
}
.sticker-manager-container .sticker-manager-content .form-group textarea {
  min-height: 120px;
  resize: vertical;
  font-family: inherit;
}
.sticker-manager-container .sticker-manager-content .add-sticker-section .add-sticker-form {
  display: flex;
  flex-direction: column;
  gap: 1rem;
}
.sticker-manager-container .sticker-manager-content .add-sticker-section .add-sticker-form .preview-container {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 0.5rem;
  margin: 1rem 0;
}
.sticker-manager-container .sticker-manager-content .add-sticker-section .add-sticker-form .preview-container .preview-label {
  font-size: 0.9rem;
  color: var(--text-secondary);
}
.sticker-manager-container .sticker-manager-content .add-sticker-section .add-sticker-form .preview-container .preview-img {
  max-width: 150px;
  max-height: 150px;
  border: 1px dashed var(--border-color);
  padding: 0.5rem;
  border-radius: 0.5rem;
  background: var(--input-bg);
}
.sticker-manager-container .sticker-manager-content .add-sticker-section .add-sticker-form .add-sticker-btn {
  padding: 0.75rem 1.5rem;
  background: var(--primary-blue);
  color: white;
  border: none;
  border-radius: 0.75rem;
  font-size: 0.95rem;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.2s ease;
}
.sticker-manager-container .sticker-manager-content .add-sticker-section .add-sticker-form .add-sticker-btn:hover {
  background: var(--soft-blue);
}
.sticker-manager-container .sticker-manager-content .add-sticker-section .add-sticker-form .add-sticker-btn:active {
  transform: translateY(1px);
}
.sticker-manager-container .sticker-manager-content .batch-add-section .batch-instructions {
  margin-bottom: 1rem;
  padding: 1rem;
  background: var(--input-bg);
  border-radius: 0.75rem;
  border-left: 4px solid var(--primary-blue);
}
.sticker-manager-container .sticker-manager-content .batch-add-section .batch-instructions p {
  margin: 0 0 0.5rem 0;
  font-size: 0.9rem;
  font-weight: 600;
  color: var(--text-primary);
}
.sticker-manager-container .sticker-manager-content .batch-add-section .batch-instructions ul {
  margin: 0;
  padding-left: 1.5rem;
}
.sticker-manager-container .sticker-manager-content .batch-add-section .batch-instructions ul li {
  font-size: 0.85rem;
  color: var(--text-secondary);
  line-height: 1.4;
  margin-bottom: 0.25rem;
}
.sticker-manager-container .sticker-manager-content .batch-add-section .batch-instructions ul li strong {
  color: var(--text-primary);
}
.sticker-manager-container .sticker-manager-content .batch-add-section .batch-instructions ul li code {
  background: rgba(114, 173, 243, 0.1);
  padding: 0.2rem 0.4rem;
  border-radius: 0.25rem;
  font-family: "Consolas", "Monaco", "Courier New", monospace;
  font-size: 0.8rem;
}
.sticker-manager-container .sticker-manager-content .batch-add-section .batch-add-btn {
  width: 100%;
  padding: 0.75rem;
  background: var(--primary-blue);
  color: white;
  border: none;
  border-radius: 0.75rem;
  font-size: 0.95rem;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.2s ease;
}
.sticker-manager-container .sticker-manager-content .batch-add-section .batch-add-btn:hover {
  background: var(--soft-blue);
}
.sticker-manager-container .sticker-manager-content .batch-add-section .batch-add-btn:active {
  transform: translateY(1px);
}
.sticker-manager-container .sticker-manager-content .delete-manage-section .control-bar {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 1rem;
}
.sticker-manager-container .sticker-manager-content .delete-manage-section .control-bar .selection-controls {
  display: flex;
  gap: 0.5rem;
}
.sticker-manager-container .sticker-manager-content .delete-manage-section .control-bar .selection-controls button {
  padding: 0.5rem 0.75rem;
  background: var(--input-bg);
  border: 1px solid var(--border-color);
  border-radius: 0.5rem;
  font-size: 0.85rem;
  cursor: pointer;
  transition: all 0.2s ease;
  color: var(--text-primary);
}
.sticker-manager-container .sticker-manager-content .delete-manage-section .control-bar .selection-controls button:hover {
  background: var(--ultra-light-blue);
  border-color: var(--primary-blue);
}
.sticker-manager-container .sticker-manager-content .delete-manage-section .control-bar .delete-selected-btn {
  padding: 0.5rem 0.75rem;
  background: #e74c3c;
  color: white;
  border: none;
  border-radius: 0.5rem;
  font-size: 0.85rem;
  cursor: pointer;
  transition: all 0.2s ease;
}
.sticker-manager-container .sticker-manager-content .delete-manage-section .control-bar .delete-selected-btn:hover {
  background: #c0392b;
}
.sticker-manager-container .sticker-manager-content .delete-manage-section .sticker-list-container {
  max-height: 400px;
  overflow-y: auto;
  border: 1px solid var(--border-color);
  border-radius: 0.75rem;
  padding: 1rem;
  background: var(--input-bg);
}
.sticker-manager-container .sticker-manager-content .delete-manage-section .sticker-list-container .sticker-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(100px, 1fr));
  gap: 1rem;
}
.sticker-manager-container .sticker-manager-content .delete-manage-section .sticker-list-container .sticker-grid .sticker-item {
  display: flex;
  flex-direction: column;
  align-items: center;
  padding: 0.75rem;
  border: 1px solid var(--border-color);
  border-radius: 0.5rem;
  background: white;
  transition: all 0.2s ease;
  position: relative;
}
.sticker-manager-container .sticker-manager-content .delete-manage-section .sticker-list-container .sticker-grid .sticker-item:hover {
  border-color: var(--primary-blue);
  box-shadow: 0 2px 8px rgba(114, 173, 243, 0.2);
}
.sticker-manager-container .sticker-manager-content .delete-manage-section .sticker-list-container .sticker-grid .sticker-item:has(.sticker-checkbox:checked) {
  border: 2px solid var(--checkbox-border-checked);
  box-shadow: 0 0 0 2px var(--shadow-color-rgba);
  background: var(--checkbox-hover-bg);
}
.sticker-manager-container .sticker-manager-content .delete-manage-section .sticker-list-container .sticker-grid .sticker-item:has(.sticker-checkbox:checked) .sticker-label {
  color: var(--checkbox-border-checked);
  font-weight: 600;
}
.sticker-manager-container .sticker-manager-content .delete-manage-section .sticker-list-container .sticker-grid .sticker-item:has(.sticker-checkbox:checked) .sticker-preview {
  opacity: 0.8;
}
.sticker-manager-container .sticker-manager-content .delete-manage-section .sticker-list-container .sticker-grid .sticker-item .sticker-checkbox {
  position: absolute;
  opacity: 0;
  width: 0;
  height: 0;
  pointer-events: none;
}
.sticker-manager-container .sticker-manager-content .delete-manage-section .sticker-list-container .sticker-grid .sticker-item .sticker-checkbox-button {
  position: absolute;
  top: 0.5rem;
  right: 0.5rem;
  width: 1.25rem;
  height: 1.25rem;
  border: 1px solid var(--checkbox-border-unchecked);
  border-radius: 0.25rem;
  background: var(--checkbox-bg-unchecked);
  cursor: pointer;
  transition: all 0.2s ease;
  z-index: 10;
}
.sticker-manager-container .sticker-manager-content .delete-manage-section .sticker-list-container .sticker-grid .sticker-item .sticker-checkbox-button.checked {
  border: 2px solid var(--checkbox-border-checked);
}
.sticker-manager-container .sticker-manager-content .delete-manage-section .sticker-list-container .sticker-grid .sticker-item .sticker-checkbox-button.checked::after {
  content: "✓";
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  font-size: 0.7rem;
  font-weight: bold;
  color: var(--checkbox-border-checked);
}
@media (hover: hover) {
  .sticker-manager-container .sticker-manager-content .delete-manage-section .sticker-list-container .sticker-grid .sticker-item .sticker-checkbox-button:hover {
    border-color: var(--checkbox-border-checked);
    background: var(--checkbox-hover-bg);
  }
}
.sticker-manager-container .sticker-manager-content .delete-manage-section .sticker-list-container .sticker-grid .sticker-item .sticker-preview {
  width: 60px;
  height: 60px;
  object-fit: contain;
  margin-bottom: 0.5rem;
}
.sticker-manager-container .sticker-manager-content .delete-manage-section .sticker-list-container .sticker-grid .sticker-item .sticker-label {
  font-size: 0.8rem;
  color: var(--text-secondary);
  text-align: center;
  word-break: break-all;
  line-height: 1.2;
}
.sticker-manager-container .sticker-manager-content .delete-manage-section .sticker-list-container .sticker-grid .no-stickers-msg {
  grid-column: 1/-1;
  text-align: center;
  color: var(--text-secondary);
  padding: 2rem;
  font-style: italic;
}
.sticker-manager-container .sticker-manager-footer {
  display: flex;
  border-top: 1px solid var(--border-color);
}
.sticker-manager-container .sticker-manager-footer .dialog-button {
  flex: 1;
  padding: 0.875rem;
  border: none;
  background: transparent;
  font-size: 0.95rem;
  font-weight: 500;
  cursor: pointer;
  transition: background-color 0.2s ease;
  color: var(--primary-blue);
}
.sticker-manager-container .sticker-manager-footer .dialog-button:hover {
  background-color: var(--ultra-light-blue);
}
.sticker-manager-container .sticker-manager-footer .dialog-button:active {
  background-color: var(--soft-blue);
}

.scrollable-text-dialog {
  width: 85%;
  max-width: 18rem;
  max-height: 70vh;
}
.scrollable-text-dialog .dialog-header {
  padding: 1.2rem 1rem 1rem;
  text-align: center;
  border-bottom: 1px solid var(--border-color);
  background: var(--header-bg);
}
.scrollable-text-dialog .dialog-header h3 {
  margin: 0;
  font-size: 1.1rem;
  font-weight: 600;
  color: var(--text-primary);
  letter-spacing: 0.3px;
}
.scrollable-text-dialog .dialog-body.scrollable-content {
  max-height: 50vh;
  overflow-y: auto;
  padding: 1.25rem 1rem;
  color: var(--text-primary);
  font-size: 0.9rem;
  line-height: 1.5;
  background: transparent;
}
.scrollable-text-dialog .dialog-body.scrollable-content .scrollable-text {
  margin: 0;
  padding: 0;
  font-family: "Consolas", "Monaco", "Courier New", monospace;
  font-size: 0.8rem;
  line-height: 1.4;
  white-space: pre-wrap;
  word-wrap: break-word;
  color: var(--text-primary);
  background: transparent;
  border: none;
}
.scrollable-text-dialog .dialog-footer {
  display: flex;
  border-top: 1px solid var(--border-color);
}
.scrollable-text-dialog .dialog-footer .dialog-button {
  flex: 1;
  padding: 0.875rem;
  border: none;
  background: transparent;
  font-size: 0.95rem;
  font-weight: 500;
  cursor: pointer;
  transition: background-color 0.2s ease;
  color: var(--primary-blue);
}
.scrollable-text-dialog .dialog-footer .dialog-button:hover {
  background: var(--ultra-light-blue);
}
.scrollable-text-dialog .dialog-footer .dialog-button:active {
  background: var(--light-blue);
}
.scrollable-text-dialog .dialog-footer .dialog-button:not(:last-child) {
  border-right: 1px solid var(--border-color);
}
.scrollable-text-dialog .dialog-footer .dialog-button:first-child {
  border-bottom-left-radius: 1rem;
}
.scrollable-text-dialog .dialog-footer .dialog-button:last-child {
  border-bottom-right-radius: 1rem;
}
.scrollable-text-dialog .dialog-footer .dialog-button.copy-btn {
  color: var(--text-secondary);
}
.scrollable-text-dialog .dialog-footer .dialog-button.primary-button {
  color: var(--primary-blue);
  font-weight: 600;
}

/**
 * 触屏友好的Checkbox按钮样式
 * 完美适配多主题系统：blue、pink、white、custom
 * 基于Material Design，支持主题自动切换
 */
input[type=checkbox] {
  position: absolute;
  opacity: 0;
  width: 0;
  height: 0;
  pointer-events: none;
}

.checkbox-button {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  min-height: 44px;
  padding: 0.75rem 1.25rem;
  margin: 0.25rem;
  border: 1px solid var(--checkbox-border-unchecked);
  border-radius: 1rem;
  background: var(--checkbox-bg-unchecked);
  color: var(--checkbox-text-unchecked);
  font-size: 0.9rem;
  font-weight: 500;
  text-align: center;
  cursor: pointer;
  -webkit-user-select: none;
          user-select: none;
  transition: all 0.2s ease;
  box-shadow: var(--checkbox-shadow-unchecked);
  position: relative;
}
@media (hover: hover) {
  .checkbox-button:hover {
    background: var(--checkbox-hover-bg);
    border-color: var(--primary-blue);
    transform: translateY(-1px);
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.15);
  }
}
.checkbox-button.checked {
  background: var(--checkbox-bg-unchecked);
  border: 2px solid var(--checkbox-border-checked);
  color: var(--checkbox-border-checked);
  box-shadow: var(--checkbox-shadow-checked);
  font-weight: 600;
}
@media (hover: hover) {
  .checkbox-button.checked:hover {
    background: var(--checkbox-hover-bg);
    border-color: var(--checkbox-border-checked);
    transform: translateY(-1px);
    box-shadow: 0 6px 16px var(--checkbox-shadow-checked);
  }
}
.checkbox-button.checked::after {
  content: "✓";
  position: absolute;
  right: 0.5rem;
  top: 50%;
  transform: translateY(-50%);
  font-size: 0.9rem;
  font-weight: bold;
  color: var(--checkbox-border-checked);
  opacity: 1;
}
.checkbox-button:disabled, .checkbox-button.disabled {
  opacity: 0.5;
  cursor: not-allowed;
  pointer-events: none;
}
.checkbox-button:focus-within {
  outline: 2px solid var(--primary-blue);
  outline-offset: 2px;
}

.checkbox-button.size-small {
  min-height: 36px;
  padding: 0.5rem 1rem;
  font-size: 0.8rem;
  border-radius: 0.5rem;
}
.checkbox-button.size-large {
  min-height: 52px;
  padding: 1rem 1.5rem;
  font-size: 1rem;
  border-radius: 1rem;
}
.checkbox-button.full-width {
  width: 100%;
  margin: 0.25rem 0;
}

.checkbox-group {
  display: flex;
  flex-wrap: wrap;
  gap: 0.5rem;
  margin: 0.5rem 0;
}
.checkbox-group.vertical {
  flex-direction: column;
}
.checkbox-group.vertical .checkbox-button {
  margin: 0.25rem 0;
}
.checkbox-group.horizontal {
  flex-direction: row;
}
.checkbox-group.horizontal .checkbox-button {
  flex: 1;
  min-width: 0;
}
.checkbox-group.grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
  gap: 0.5rem;
}

body[data-theme=pink] .checkbox-button {
  --checkbox-border-checked: #f372ad;
  --checkbox-text-unchecked: rgb(186, 139, 162);
  --checkbox-border-unchecked: #e1cbd5;
  --checkbox-hover-bg: #fde8f4;
  --checkbox-shadow-checked: 0 4px 12px rgba(226, 74, 144, 0.3);
}

body[data-theme=white] .checkbox-button {
  --checkbox-border-checked: #666666;
  --checkbox-text-unchecked: #333333;
  --checkbox-border-unchecked: #e0e0e0;
  --checkbox-hover-bg: #f8f8f8;
  --checkbox-shadow-checked: 0 4px 12px rgba(102, 102, 102, 0.3);
}

body[data-theme=custom] .checkbox-button {
  --checkbox-border-checked: var(--primary-blue);
  --checkbox-text-unchecked: var(--text-primary);
  --checkbox-border-unchecked: var(--border-color);
  --checkbox-hover-bg: var(--ultra-light-blue);
  --checkbox-shadow-checked: 0 4px 12px var(--shadow-color-rgba);
}

body.dark-mode .checkbox-button {
  --checkbox-bg-unchecked: #374151;
  --checkbox-border-unchecked: #6b7280;
  --checkbox-text-unchecked: #d1d5db;
  --checkbox-hover-bg: #4b5563;
  --checkbox-shadow-unchecked: 0 2px 4px rgba(0, 0, 0, 0.3);
}

@media (prefers-color-scheme: dark) {
  .checkbox-button {
    --checkbox-bg-unchecked: #374151;
    --checkbox-border-unchecked: #6b7280;
    --checkbox-text-unchecked: #d1d5db;
    --checkbox-hover-bg: #4b5563;
    --checkbox-shadow-unchecked: 0 2px 4px rgba(0, 0, 0, 0.3);
  }
}
body.dark-mode[data-theme=pink] .checkbox-button {
  --checkbox-bg-unchecked: #4c1d3d;
  --checkbox-border-unchecked: #8b647a;
  --checkbox-border-checked: #f372ad;
  --checkbox-text-unchecked: #f3d5e7;
  --checkbox-hover-bg: #5d2449;
}

body.dark-mode[data-theme=white] .checkbox-button {
  --checkbox-bg-unchecked: #2a2a2a;
  --checkbox-border-unchecked: #3c3c3c;
  --checkbox-border-checked: #cccccc;
  --checkbox-text-unchecked: #e0e0e0;
  --checkbox-hover-bg: #3c3c3c;
}

.sticker-checkbox-button {
  border-color: var(--checkbox-border-unchecked);
  background: var(--checkbox-bg-unchecked);
}
.sticker-checkbox-button.checked {
  border-color: var(--checkbox-border-checked);
}
.sticker-checkbox-button.checked::after {
  color: var(--checkbox-border-checked);
}
@media (hover: hover) {
  .sticker-checkbox-button:hover {
    border-color: var(--checkbox-border-checked);
    background: var(--checkbox-hover-bg);
  }
}

.feature-item:has(.sticker-checkbox:checked),
.sticker-item:has(.sticker-checkbox:checked) {
  border-color: var(--checkbox-border-checked);
  box-shadow: 0 0 0 2px var(--shadow-color-rgba);
  background: var(--checkbox-hover-bg);
}
.feature-item:has(.sticker-checkbox:checked) .feature-label,
.feature-item:has(.sticker-checkbox:checked) .sticker-label,
.sticker-item:has(.sticker-checkbox:checked) .feature-label,
.sticker-item:has(.sticker-checkbox:checked) .sticker-label {
  color: var(--checkbox-border-checked);
}

@media (max-width: 768px) {
  .checkbox-button {
    min-height: 48px;
    padding: 0.875rem 1.5rem;
    font-size: 0.95rem;
  }
  .checkbox-group.horizontal {
    flex-direction: column;
  }
  .checkbox-group.horizontal .checkbox-button {
    width: 100%;
  }
  .sticker-checkbox-button {
    width: 1.75rem;
    height: 1.75rem;
    top: 0.125rem;
    right: 0.125rem;
  }
}
* {
  box-sizing: border-box;
}

* {
  transition-timing-function: ease;
}

::-webkit-scrollbar {
  width: 4px;
}

::-webkit-scrollbar-track {
  background: transparent;
}

::-webkit-scrollbar-thumb {
  background: var(--border-color);
  border-radius: 2px;
}

::-webkit-scrollbar-thumb:hover {
  background: var(--text-secondary);
}

.wechat-body::-webkit-scrollbar,
.moments-body::-webkit-scrollbar,
.settings-body::-webkit-scrollbar,
.panel-view::-webkit-scrollbar,
.app-screen::-webkit-scrollbar,
.file-content::-webkit-scrollbar,
.message-bubble::-webkit-scrollbar,
.voice-text-content::-webkit-scrollbar,
.image-desc-content::-webkit-scrollbar,
.event-description::-webkit-scrollbar,
.recall-content::-webkit-scrollbar {
  display: none;
}

.wechat-body,
.moments-body,
.settings-body,
.panel-view,
.app-screen,
.file-content,
.message-bubble,
.voice-text-content,
.image-desc-content,
.event-description,
.recall-content {
  scrollbar-width: none; /* Firefox */
}

::selection {
  background: var(--primary-blue);
  color: white;
}

::-moz-selection {
  background: var(--primary-blue);
  color: white;
}

:focus {
  outline: none;
}

.no-select {
  -webkit-user-select: none;
  user-select: none;
}

@media (max-width: 360px) {
  body {
    padding: 0.5rem;
  }
  .phone-frame {
    max-width: 100%;
    width: 100%;
  }
  .wechat-body,
  .settings-body,
  .moments-body,
  .app-screen {
    -webkit-overflow-scrolling: touch;
  }
  input,
  textarea {
    font-size: 16px;
  }
}
</style></head>
  <body>
    <div class="phone-frame">
      <div class="phone-screen">
        <div id="delete-mode-trigger"></div>
        <div id="hidden-send-trigger"></div>

        <!-- Status Bar (Added from original theme) -->
        <div class="phone-status-bar">
          <div class="status-left">
            <span id="current-time">00:00</span>
            <i class="fas fa-moon moon-icon"></i>
          </div>
          <div class="status-right">
            <div class="signal-bars">
              <i class="fas fa-signal"></i>
            </div>
            <i class="fas fa-wifi wifi-icon"></i>
            <i class="fas fa-battery-three-quarters battery-icon"></i>
          </div>
        </div>

        <div class="dynamic-island"></div>

        <!-- 主屏幕 -->
        <div class="app-view app-screen active" id="app-homescreen">
          <div class="app-grid">
            <div class="app-icon" id="app-wechat">
              <div class="icon-image icon-wechat"><i class="fab fa-weixin"></i></div>
              <span class="app-name">WeChat</span>
            </div>
            <div class="app-icon" id="app-settings">
              <div class="icon-image icon-settings"><i class="fas fa-cog"></i></div>
              <span class="app-name">设置</span>
            </div>
          </div>
        </div>

        <!-- 微信聊天界面 -->
        <div class="app-view" id="wechat-view">
          <div class="wechat-header">
            <i class="fas fa-chevron-left back-btn" id="wechat-back-btn-dummy"></i>
            <span class="contact-name" id="contact-name-header">Character</span>
            <i class="fas fa-ellipsis-h options-btn" id="wechat-options-btn">
              <div class="notification-dot" id="moments-notification" style="display: none"></div>
            </i>
          </div>

          <div class="wechat-body" id="wechat-body">
            <!-- 消息内容将通过JavaScript动态生成 -->
          </div>

          <div class="wechat-input-area">
            <footer class="wechat-footer">
              <i id="microphone-btn" class="fas fa-microphone footer-icon"></i>
              <input
                type="text"
                id="wechat-input-field"
                class="text-input"
                placeholder="发送信息"
                autocomplete="off"
                autocapitalize="off"
                spellcheck="false"
              />
              <i id="smile-btn" class="far fa-smile footer-icon"></i>
              <i id="plus-btn" class="fas fa-plus-circle footer-icon"></i>
              <button id="send-btn" class="send-btn"><i class="fas fa-paper-plane"></i></button>
            </footer>
            <div id="panel-container" class="panel-container">
              <div id="sticker-panel" class="panel-view"><div id="sticker-grid" class="features-grid"></div></div>
              <div id="char-sticker-panel" class="panel-view">
                <div id="char-sticker-grid" class="features-grid"></div>
              </div>
              <div id="plus-panel" class="panel-view"><div id="plus-grid" class="features-grid"></div></div>
            </div>
          </div>
        </div>

        <!-- 设置视图 -->
        <div id="settings-view" class="app-view">
          <header class="settings-header">
            <i class="fas fa-chevron-left back-btn" id="settings-back-btn"></i>
            <span class="title">关于</span>
          </header>
          <main class="settings-body">
            <div class="settings-card">
              <p>
                本同层手机<span class="highlight">【免费】</span>发布于discord的尾巴镇社区和旅程社区，作者：<span
                  class="highlight"
                  >暴力美学BLMX</span
                >，点击即可跳转到社区
                <a href="https://discord.com/channels/1379304008157499423/1388180976873766973" target="_blank"
                  >https://discord.com/...</a
                >。<a href="https://discord.com/channels/1291925535324110879/1388182155707814009" target="_blank"
                  >https://discord.com/...</a
                >。
              </p>
              <p>
                如果你是通过任何<span class="highlight">付费途径</span>获取，请带着购买记录来找作者，<span
                  class="highlight"
                  >重重有赏</span
                >。抵制任何窃取创作者劳动成果的商业化行为，从你我做起TvT
              </p>
              <p>
                <span class="highlight">禁止</span>在酒馆以外的平台使用！<span class="highlight">禁止</span
                >未经授权的二传二改！<span class="highlight">禁止</span>任何行为的倒卖和商业化行为！
              </p>
              <p>
                后续更新内容也会发在discord的尾巴镇社区和旅程社区，有问题欢迎来提问哦！有想玩的功能、想提出的建议也可以在帖子下评论。
              </p>
            </div>
            <div class="settings-card" style="margin-top: 1rem; padding: 0">
              <ul style="list-style: none; margin: 0; padding: 0">
                <li style="border-bottom: 1px solid #efefef">
                  <a
                    href="#"
                    id="change-chat-wallpaper-btn"
                    style="
                      text-decoration: none;
                      color: #8ba2ba;
                      display: flex;
                      justify-content: space-between;
                      align-items: center;
                      padding: 1rem;
                    "
                  >
                    <span>更换聊天壁纸</span>
                    <i class="fas fa-chevron-right"></i>
                  </a>
                </li>
                <li style="border-bottom: 1px solid #efefef">
                  <a
                    href="#"
                    id="change-home-wallpaper-btn"
                    style="
                      text-decoration: none;
                      color: #8ba2ba;
                      display: flex;
                      justify-content: space-between;
                      align-items: center;
                      padding: 1rem;
                    "
                  >
                    <span>更换主屏幕壁纸</span>
                    <i class="fas fa-chevron-right"></i>
                  </a>
                </li>
                <li>
                  <a
                    href="#"
                    id="change-settings-wallpaper-btn"
                    style="
                      text-decoration: none;
                      color: #8ba2ba;
                      display: flex;
                      justify-content: space-between;
                      align-items: center;
                      padding: 1rem;
                    "
                  >
                    <span>更换设置壁纸</span>
                    <i class="fas fa-chevron-right"></i>
                  </a>
                </li>
              </ul>
            </div>

            <!-- 新增主题配色设置卡片 -->
            <div class="settings-card" style="margin-top: 1rem; padding: 0">
              <div style="padding: 1rem; border-bottom: 1px solid #efefef">
                <h3 style="margin: 0; font-size: 1rem; color: var(--text-primary)">主题配色</h3>
              </div>
              <div
                class="theme-options"
                style="padding: 1rem; display: flex; flex-wrap: wrap; gap: 1rem; justify-content: space-between"
              >
                <!-- 主题选项将通过JS动态生成 -->
              </div>
              <div style="padding: 1rem; border-top: 1px solid #efefef">
                <button
                  id="custom-theme-btn"
                  style="
                    width: 100%;
                    padding: 0.75rem;
                    background: var(--primary-blue);
                    color: white;
                    border: none;
                    border-radius: 0.5rem;
                    font-weight: 500;
                    cursor: pointer;
                  "
                >
                  自定义主题
                </button>
              </div>
            </div>

            <div class="settings-card" style="margin-top: 1rem; padding: 1rem">
              <p style="font-weight: 500; margin: 0 0 0.75rem 0.25rem; color: var(--text-primary); font-size: 0.9em">
                调试工具
              </p>
              <ul style="list-style: none; margin: 0; padding: 0; display: flex; flex-direction: column; gap: 0.5rem">
                <li>
                  <a
                    href="#"
                    id="show-last-ai-response-btn"
                    style="
                      text-decoration: none;
                      display: block;
                      text-align: center;
                      background-color: #eef4fd;
                      padding: 0.6rem 1rem;
                      border-radius: 0.6rem;
                      color: var(--text-primary);
                      font-weight: 500;
                    "
                  >
                    <span>显示AI最新原始回复</span>
                  </a>
                </li>
                <li>
                  <a
                    href="#"
                    id="show-last-sent-prompt-btn"
                    style="
                      text-decoration: none;
                      display: block;
                      text-align: center;
                      background-color: #eef4fd;
                      padding: 0.6rem 1rem;
                      border-radius: 0.6rem;
                      color: var(--text-primary);
                      font-weight: 500;
                    "
                  >
                    <span>显示发送给AI的提示</span>
                  </a>
                </li>
              </ul>
            </div>

            <!-- 新增手机尺寸调整卡片 -->
            <div class="settings-card" style="margin-top: 1rem; padding: 1rem">
              <p style="font-weight: 500; margin: 0 0 0.75rem 0.25rem; color: var(--text-primary); font-size: 0.9em">
                手机尺寸调整
              </p>
              <div style="display: flex; flex-direction: column; gap: 0.75rem">
                <div style="display: flex; justify-content: space-between; align-items: center; gap: 0.5rem">
                  <button id="phone-size-default" class="phone-size-btn phone-size-active">
                    <span class="size-icon" style="height: 24px"></span>
                    <span class="size-label">默认尺寸</span>
                  </button>
                  <button id="phone-size-medium" class="phone-size-btn">
                    <span class="size-icon" style="height: 20px"></span>
                    <span class="size-label">中等尺寸</span>
                  </button>
                  <button id="phone-size-small" class="phone-size-btn">
                    <span class="size-icon" style="height: 16px"></span>
                    <span class="size-label">小尺寸</span>
                  </button>
                </div>
                <div style="font-size: 0.8em; color: var(--text-secondary); text-align: center">
                  选择适合您屏幕的手机尺寸
                </div>
              </div>
            </div>

            <!-- 新增表情大小调整卡片 -->
            <div class="settings-card" style="margin-top: 1rem; padding: 1rem">
              <p style="font-weight: 500; margin: 0 0 0.75rem 0.25rem; color: var(--text-primary); font-size: 0.9em">
                表情包大小设置
              </p>
              <div style="display: flex; flex-direction: column; gap: 0.75rem">
                <!-- 滑块区域 -->
                <div style="display: flex; flex-direction: column; gap: 0.5rem">
                  <div style="display: flex; justify-content: space-between; align-items: center">
                    <span style="font-size: 0.9em; color: var(--text-secondary)">小</span>
                    <input
                      type="range"
                      id="sticker-size-slider"
                      min="40"
                      max="200"
                      value="120"
                      style="flex-grow: 1; margin: 0 10px; accent-color: var(--primary-blue)"
                    />
                    <span style="font-size: 0.9em; color: var(--text-secondary)">大</span>
                  </div>
                  <div style="display: flex; justify-content: center; align-items: center; gap: 0.5rem">
                    <input
                      type="number"
                      id="sticker-size-input"
                      value="120"
                      min="40"
                      max="200"
                      style="
                        width: 70px;
                        padding: 8px;
                        border: 1px solid var(--border-color);
                        border-radius: 5px;
                        text-align: center;
                      "
                    />
                    <span style="font-size: 0.9em; color: var(--text-secondary)">像素</span>
                  </div>
                </div>

                <!-- 预设按钮 -->
                <div style="display: flex; justify-content: space-between; gap: 0.5rem; margin-top: 0.5rem">
                  <button id="sticker-size-small" class="phone-size-btn">
                    <span class="size-icon" style="height: 16px"></span>
                    <span class="size-label">小 (80px)</span>
                  </button>
                  <button id="sticker-size-medium" class="phone-size-btn phone-size-active">
                    <span class="size-icon" style="height: 20px"></span>
                    <span class="size-label">中 (120px)</span>
                  </button>
                </div>

                <div style="font-size: 0.8em; color: var(--text-secondary); text-align: center">
                  调整聊天中表情包的显示大小
                </div>
              </div>
            </div>
          </main>
        </div>

        <!-- 朋友圈视图 -->
        <div id="moments-view" class="app-view">
          <header class="moments-header">
            <i class="fas fa-chevron-left header-action" id="moments-back-btn"></i>
            <span class="title">朋友圈</span>
            <i class="fas fa-camera header-action" id="post-moment-btn"></i>
          </header>
          <main class="moments-body">
            <div class="moments-feed-header">
              <img
                src="https://gitgud.io/lolodesu/lolobabytutorial/-/raw/master/lologame/素材/wallpaper/白色_1.jpg"
                alt="朋友圈封面"
                class="moments-cover-photo"
                id="moments-cover-photo"
              />
              <div class="moments-user-info">
                <span class="moments-user-name" id="moments-user-name">用户名</span>
                <img
                  src="https://gitgud.io/lolodesu/lolobabytutorial/-/raw/master/lologame/素材/头像/默认头像.jpg"
                  alt="用户头像"
                  class="moments-user-avatar"
                  id="moments-user-avatar"
                />
              </div>
              <div class="user-signature" id="user-signature">这里是个性签名...</div>
            </div>
            <ul class="moments-feed-list" id="moments-feed-list"></ul>
          </main>
        </div>
      </div>
    </div>

    <input type="file" id="image-upload-input" accept="image/*" style="display: none" />

    <!-- 自定义主题编辑器模态框 -->
    <div
      id="theme-editor-modal"
      class="modal"
      style="
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.5);
        z-index: 1000;
        overflow-y: auto;
      "
    >
      <div
        class="modal-content"
        style="
          background-color: white;
          margin: 10% auto;
          padding: 20px;
          width: 80%;
          max-width: 500px;
          border-radius: 10px;
          box-shadow: 0 4px 20px rgba(0, 0, 0, 0.2);
        "
      >
        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px">
          <h2 style="margin: 0; color: var(--text-primary); font-size: 1.2rem">自定义主题</h2>
          <button
            id="close-theme-editor"
            style="background: none; border: none; font-size: 1.5rem; cursor: pointer; color: var(--text-secondary)"
          >
            &times;
          </button>
        </div>

        <div style="margin-bottom: 15px">
          <label style="display: block; margin-bottom: 5px; color: var(--text-primary); font-weight: 500"
            >主题名称</label
          >
          <input
            type="text"
            id="theme-name-input"
            style="
              width: 100%;
              padding: 8px;
              border: 1px solid var(--border-color);
              border-radius: 5px;
              box-sizing: border-box;
            "
            placeholder="我的自定义主题"
          />
        </div>

        <div style="max-height: 400px; overflow-y: auto; padding-right: 10px">
          <div style="margin-bottom: 20px">
            <h3 style="margin: 0 0 10px 0; color: var(--text-primary); font-size: 1rem">主题色</h3>
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-bottom: 10px">
              <div>
                <label style="display: block; margin-bottom: 5px; font-size: 0.9rem; color: var(--text-secondary)"
                  >主色调</label
                >
                <input
                  type="color"
                  id="primary-color"
                  style="width: 100%; height: 40px; border: none; border-radius: 5px; cursor: pointer"
                />
              </div>
              <div>
                <label style="display: block; margin-bottom: 5px; font-size: 0.9rem; color: var(--text-secondary)"
                  >次要强调色</label
                >
                <input
                  type="color"
                  id="light-color"
                  style="width: 100%; height: 40px; border: none; border-radius: 5px; cursor: pointer"
                />
              </div>
            </div>
            <div style="font-size: 0.8rem; color: var(--text-secondary); margin-top: 5px">
              主题色用于按钮、图标、链接等交互元素
            </div>
          </div>

          <div style="margin-bottom: 20px">
            <h3 style="margin: 0 0 10px 0; color: var(--text-primary); font-size: 1rem">背景色</h3>
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-bottom: 10px">
              <div>
                <label style="display: block; margin-bottom: 5px; font-size: 0.9rem; color: var(--text-secondary)"
                  >应用背景色</label
                >
                <input
                  type="color"
                  id="ultra-light-color"
                  style="width: 100%; height: 40px; border: none; border-radius: 5px; cursor: pointer"
                />
              </div>
              <div>
                <label style="display: block; margin-bottom: 5px; font-size: 0.9rem; color: var(--text-secondary)"
                  >卡片背景色</label
                >
                <input
                  type="color"
                  id="deep-color"
                  style="width: 100%; height: 40px; border: none; border-radius: 5px; cursor: pointer"
                />
              </div>
            </div>
          </div>

          <div style="margin-bottom: 20px">
            <h3 style="margin: 0 0 10px 0; color: var(--text-primary); font-size: 1rem">文字颜色</h3>
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-bottom: 10px">
              <div>
                <label style="display: block; margin-bottom: 5px; font-size: 0.9rem; color: var(--text-secondary)"
                  >主要文字</label
                >
                <input
                  type="color"
                  id="text-primary-color"
                  style="width: 100%; height: 40px; border: none; border-radius: 5px; cursor: pointer"
                />
              </div>
              <div>
                <label style="display: block; margin-bottom: 5px; font-size: 0.9rem; color: var(--text-secondary)"
                  >次要文字</label
                >
                <input
                  type="color"
                  id="text-secondary-color"
                  style="width: 100%; height: 40px; border: none; border-radius: 5px; cursor: pointer"
                />
              </div>
            </div>
          </div>

          <div style="margin-bottom: 20px">
            <h3 style="margin: 0 0 10px 0; color: var(--text-primary); font-size: 1rem">边框与阴影</h3>
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-bottom: 10px">
              <div>
                <label style="display: block; margin-bottom: 5px; font-size: 0.9rem; color: var(--text-secondary)"
                  >边框颜色</label
                >
                <input
                  type="color"
                  id="border-color"
                  style="width: 100%; height: 40px; border: none; border-radius: 5px; cursor: pointer"
                />
              </div>
              <div>
                <label style="display: block; margin-bottom: 5px; font-size: 0.9rem; color: var(--text-secondary)"
                  >阴影颜色</label
                >
                <input
                  type="color"
                  id="shadow-color"
                  style="width: 100%; height: 40px; border: none; border-radius: 5px; cursor: pointer"
                />
              </div>
            </div>
          </div>

          <div style="margin-bottom: 20px">
            <h3 style="margin: 0 0 10px 0; color: var(--text-primary); font-size: 1rem">状态栏与灵动岛</h3>
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-bottom: 10px">
              <div>
                <label style="display: block; margin-bottom: 5px; font-size: 0.9rem; color: var(--text-secondary)"
                  >状态栏颜色</label
                >
                <input
                  type="color"
                  id="status-bar-color"
                  style="width: 100%; height: 40px; border: none; border-radius: 5px; cursor: pointer"
                />
              </div>
              <div>
                <label style="display: block; margin-bottom: 5px; font-size: 0.9rem; color: var(--text-secondary)"
                  >灵动岛颜色</label
                >
                <input
                  type="color"
                  id="dynamic-island-color"
                  style="width: 100%; height: 40px; border: none; border-radius: 5px; cursor: pointer"
                />
              </div>
            </div>
          </div>

          <div style="margin-bottom: 20px">
            <h3 style="margin: 0 0 10px 0; color: var(--text-primary); font-size: 1rem">我的消息气泡</h3>
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-bottom: 10px">
              <div>
                <label style="display: block; margin-bottom: 5px; font-size: 0.9rem; color: var(--text-secondary)"
                  >背景颜色</label
                >
                <input
                  type="color"
                  id="bubble-me-color"
                  style="width: 100%; height: 40px; border: none; border-radius: 5px; cursor: pointer"
                />
              </div>
              <div>
                <label style="display: block; margin-bottom: 5px; font-size: 0.9rem; color: var(--text-secondary)"
                  >文字颜色</label
                >
                <input
                  type="color"
                  id="bubble-me-text-color"
                  style="width: 100%; height: 40px; border: none; border-radius: 5px; cursor: pointer"
                />
              </div>
            </div>
          </div>

          <div style="margin-bottom: 20px">
            <h3 style="margin: 0 0 10px 0; color: var(--text-primary); font-size: 1rem">AI消息气泡</h3>
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-bottom: 10px">
              <div>
                <label style="display: block; margin-bottom: 5px; font-size: 0.9rem; color: var(--text-secondary)"
                  >背景颜色</label
                >
                <input
                  type="color"
                  id="bubble-them-color"
                  style="width: 100%; height: 40px; border: none; border-radius: 5px; cursor: pointer"
                />
              </div>
              <div>
                <label style="display: block; margin-bottom: 5px; font-size: 0.9rem; color: var(--text-secondary)"
                  >文字颜色</label
                >
                <input
                  type="color"
                  id="bubble-them-text-color"
                  style="width: 100%; height: 40px; border: none; border-radius: 5px; cursor: pointer"
                />
              </div>
            </div>
          </div>

          <div style="margin-bottom: 20px">
            <h3 style="margin: 0 0 10px 0; color: var(--text-primary); font-size: 1rem">手机边框</h3>
            <div style="display: flex; gap: 10px; margin-bottom: 10px">
              <div style="flex: 1">
                <label style="display: block; margin-bottom: 5px; font-size: 0.9rem; color: var(--text-secondary)"
                  >边框颜色</label
                >
                <input
                  type="color"
                  id="phone-frame-color"
                  style="width: 100%; height: 40px; border: none; border-radius: 5px; cursor: pointer"
                />
              </div>
            </div>
          </div>

          <div style="margin-bottom: 20px">
            <h3 style="margin: 0 0 10px 0; color: var(--text-primary); font-size: 1rem">主题模式</h3>
            <div style="display: flex; align-items: center">
              <input type="checkbox" id="dark-mode-toggle" style="margin-right: 10px; width: 18px; height: 18px" />
              <label for="dark-mode-toggle" style="color: var(--text-primary); font-size: 0.9rem">启用夜间模式</label>
            </div>
            <div style="font-size: 0.8rem; color: var(--text-secondary); margin-top: 5px">
              夜间模式会将应用背景、设置页面和卡片等元素变为深色
            </div>
          </div>

          <div style="margin-bottom: 20px">
            <h3 style="margin: 0 0 10px 0; color: var(--text-primary); font-size: 1rem">图标样式</h3>
            <div style="display: flex; align-items: center">
              <input
                type="checkbox"
                id="single-color-icons-toggle"
                style="margin-right: 10px; width: 18px; height: 18px"
              />
              <label for="single-color-icons-toggle" style="color: var(--text-primary); font-size: 0.9rem"
                >使用单一颜色图标</label
              >
            </div>
            <div style="font-size: 0.8rem; color: var(--text-secondary); margin-top: 5px">
              启用后，微信图标和设置图标将使用主题色，而不是默认的绿色和灰色
            </div>
          </div>
        </div>

        <div style="display: flex; justify-content: space-between; margin-top: 20px">
          <button
            id="reset-theme-btn"
            style="
              padding: 10px 15px;
              background: #f1f5f9;
              color: var(--text-primary);
              border: none;
              border-radius: 5px;
              cursor: pointer;
              font-weight: 500;
            "
          >
            重置
          </button>
          <button
            id="save-theme-btn"
            style="
              padding: 10px 20px;
              background: var(--primary-blue);
              color: white;
              border: none;
              border-radius: 5px;
              cursor: pointer;
              font-weight: 500;
            "
          >
            保存主题
          </button>
        </div>
      </div>
    </div>
  <script>/*! For license information please see index.js.LICENSE.txt */
var __webpack_modules__={"./src/同层手机/ai-response-manager.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AiResponseManager: () => (/* binding */ AiResponseManager)\n/* harmony export */ });\n/* harmony import */ var _debug_logger__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./debug-logger */ \"./src/同层手机/debug-logger.ts\");\n/* harmony import */ var _event_manager__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./event-manager */ \"./src/同层手机/event-manager.ts\");\n/* harmony import */ var _script__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./script */ \"./src/同层手机/script.ts\");\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./utils */ \"./src/同层手机/utils.ts\");\n// AI响应处理模块\n// 负责AI响应触发、条目处理、动画显示等功能\n\n\n\n\nclass AiResponseManager {\n    blmxManager;\n    uiRenderer;\n    eventHandler;\n    momentsManager;\n    eventManager;\n    isGenerating = false;\n    latestAiRawResponse = '还没有收到AI的回复。';\n    latestSentPrompt = '还没有发送任何内容给AI。';\n    // 新增：记录原始响应和完整提示词，与同层手机保持一致\n    rawAiResponse = '';\n    fullPrompt = '';\n    constructor(blmxManager, uiRenderer, eventHandler, momentsManager) {\n        this.blmxManager = blmxManager;\n        this.uiRenderer = uiRenderer;\n        this.eventHandler = eventHandler;\n        this.momentsManager = momentsManager;\n        this.eventManager = new _event_manager__WEBPACK_IMPORTED_MODULE_1__.EventManager();\n        // 使用事件管理器来添加事件监听器，防止内存泄漏\n        this.eventManager.addGlobalListener('js_generation_ended', (text) => {\n            this.rawAiResponse = text;\n            _debug_logger__WEBPACK_IMPORTED_MODULE_0__.logger.debug('AiResponseManager', '原始AI响应已接收', { length: text.length });\n        });\n        this.eventManager.addGlobalListener('chat_completion_prompt_ready', (event_data) => {\n            this.fullPrompt = (0,_utils__WEBPACK_IMPORTED_MODULE_3__.safeJsonStringify)(event_data.chat);\n            _debug_logger__WEBPACK_IMPORTED_MODULE_0__.logger.debug('AiResponseManager', '完整提示词已准备', { promptLength: this.fullPrompt.length });\n        });\n    }\n    // 获取是否正在生成\n    getIsGenerating() {\n        return this.isGenerating;\n    }\n    // 触发AI响应 - 按照原始同层手机中的实现移植\n    async triggerAiResponse(_immediate = false) {\n        if (this.isGenerating || !this.blmxManager)\n            return;\n        // 检查逻辑已移到AppController中，这里直接处理\n        // 检查全局标志，防止重复处理\n        if (window.BLMX_PROCESSING_AI_RESPONSE) {\n            _debug_logger__WEBPACK_IMPORTED_MODULE_0__.logger.debug('AiResponseManager', '已有AI响应处理进行中，跳过重复处理');\n            return;\n        }\n        // 设置全局处理标志\n        window.BLMX_PROCESSING_AI_RESPONSE = true;\n        this.isGenerating = true;\n        try {\n            // getContextForAI should now get all necessary context from the main log.\n            let contextForAI = this.blmxManager.getContextForAI();\n            contextForAI +=\n                '\\n【BLMX_LOG中的内容为目前过往线上聊天记录，其中也包括最新的USER输入，请你作为CHAR进行回应。】\\n【本次响应必须遵循线上规则】【必须使用特殊约定的格式且保证正确换行】';\n            this.latestSentPrompt = contextForAI;\n            // Clean up 'isNewForAI' flags from the main log after generating context.\n            this.blmxManager.logEntries.forEach(entry => {\n                if ('type' in entry && entry.type === 'image' && 'content' in entry && entry.content.isNewForAI) {\n                    entry.content.value = `[用户发送的图片]`;\n                    delete entry.content.isNewForAI;\n                }\n            });\n            // 重置待响应标志\n            this.eventHandler.setHasPendingNotifications(false);\n            const MAX_RETRIES = 2;\n            let attempt = 0;\n            let success = false;\n            while (attempt <= MAX_RETRIES && !success) {\n                if (attempt > 0) {\n                    _debug_logger__WEBPACK_IMPORTED_MODULE_0__.logger.warn('AiResponseManager', `AI响应为空，重试中`, { attempt: attempt + 1, maxRetries: MAX_RETRIES + 1 });\n                    await new Promise(resolve => setTimeout(resolve, 1000 * attempt));\n                }\n                try {\n                    // 显示灵动岛生成指示器，而不是打字指示器\n                    this.uiRenderer.showGeneratingIndicator();\n                    const stream = await (0,_script__WEBPACK_IMPORTED_MODULE_2__.getTavernHelper)().generate({ user_input: contextForAI, should_stream: true });\n                    let finalAiResponse = '';\n                    for await (const chunk of stream) {\n                        finalAiResponse += chunk;\n                    }\n                    // 隐藏灵动岛生成指示器\n                    this.uiRenderer.hideGeneratingIndicator();\n                    this.latestAiRawResponse = finalAiResponse.trim();\n                    // 记录原始响应以便调试\n                    if (!this.rawAiResponse) {\n                        this.rawAiResponse = finalAiResponse.trim();\n                        _debug_logger__WEBPACK_IMPORTED_MODULE_0__.logger.debug('AiResponseManager', '直接获取的原始AI响应', { length: this.rawAiResponse.length });\n                    }\n                    // 处理重复响应问题 - 从原始同层手机移植过来\n                    let processedResponse = finalAiResponse.trim();\n                    const len = processedResponse.length;\n                    // 检查完全相同的两半\n                    if (len > 0 && len % 2 === 0) {\n                        const firstHalf = processedResponse.substring(0, len / 2);\n                        const secondHalf = processedResponse.substring(len / 2);\n                        if (firstHalf === secondHalf && firstHalf.trim() !== '') {\n                            _debug_logger__WEBPACK_IMPORTED_MODULE_0__.logger.warn('AiResponseManager', '检测到完全重复的AI响应，自动修剪');\n                            processedResponse = firstHalf;\n                        }\n                    }\n                    // 增强的重复检测：检查是否有相同的行被重复\n                    const lines = processedResponse.split('\\n').filter(line => line.trim() !== '');\n                    if (lines.length > 1) {\n                        const uniqueLines = window._.uniq(lines);\n                        // 如果去重后的行数明显少于原始行数，可能存在重复\n                        if (uniqueLines.length < lines.length * 0.7) {\n                            _debug_logger__WEBPACK_IMPORTED_MODULE_0__.logger.warn('AiResponseManager', '检测到AI响应中的潜在行重复，仅使用唯一行');\n                            processedResponse = uniqueLines.join('\\n');\n                        }\n                    }\n                    if (processedResponse.trim()) {\n                        // 处理AI响应\n                        success = await this.processAiResponse(processedResponse.trim());\n                    }\n                }\n                catch (error) {\n                    _debug_logger__WEBPACK_IMPORTED_MODULE_0__.logger.error('AiResponseManager', `尝试${attempt}时出错`, { attempt, error });\n                    this.uiRenderer.hideGeneratingIndicator();\n                    if (attempt >= MAX_RETRIES) {\n                        this.showErrorMessage('AI代理出错 (详情见F12控制台)');\n                    }\n                }\n                attempt++;\n            }\n            if (!success && attempt > MAX_RETRIES) {\n                console.error(`[BLMX] AI generation failed after ${MAX_RETRIES + 1} attempts (empty response).`);\n                this.showErrorMessage('(AI响应为空，请稍后再试或手动触发)');\n                this.latestAiRawResponse = '[AI响应为空]';\n            }\n            await this.blmxManager.persistLogToStorage();\n            // 刷新所有时间戳的显示，确保AI回复的时间戳正确展示\n            this.uiRenderer.refreshAllTimestamps();\n        }\n        catch (error) {\n            console.error('[BLMX] Error in triggerAiResponse:', error);\n        }\n        finally {\n            // 无论成功失败，都重置处理标志\n            this.isGenerating = false;\n            window.BLMX_PROCESSING_AI_RESPONSE = false;\n        }\n    }\n    // 处理AI响应\n    async processAiResponse(response) {\n        const entriesForAnimation = [];\n        let hasNewCharMoments = false;\n        // 预处理响应文本\n        const processedResponse = response.replace(/^\\s*[[{].*[\\]}]\\s*$/gm, match => {\n            const parsed = (0,_utils__WEBPACK_IMPORTED_MODULE_3__.safeJsonParse)(match.trim());\n            return parsed !== null ? match : '';\n        });\n        const responseLines = processedResponse.split('\\n').filter(line => line.trim() !== '');\n        _debug_logger__WEBPACK_IMPORTED_MODULE_0__.logger.debug('AiResponseManager', '处理AI响应行', { lineCount: responseLines.length });\n        responseLines.forEach(line => {\n            const separatorIndex = line.indexOf(':');\n            if (separatorIndex === -1) {\n                _debug_logger__WEBPACK_IMPORTED_MODULE_0__.logger.debug('AiResponseManager', '跳过没有分隔符的行', { line });\n                return;\n            }\n            const key = line.substring(0, separatorIndex).trim();\n            const value = line.substring(separatorIndex + 1).trim();\n            _debug_logger__WEBPACK_IMPORTED_MODULE_0__.logger.debug('AiResponseManager', '解析响应', {\n                key,\n                valuePreview: value.substring(0, 50) + (value.length > 50 ? '...' : ''),\n                valueLength: value.length,\n            });\n            if (!key || !value)\n                return;\n            try {\n                let newEntry = null;\n                // 声明所有可能在case中使用的变量\n                const id = `ai-${Date.now()}-${Math.random()}`;\n                let voiceMatch = null;\n                let stickerMatch = null;\n                let imageMatch = null;\n                let locationMatch = null;\n                let transferMatch = null;\n                let fileMatch = null;\n                let giftMatch = null;\n                switch (key) {\n                    case 'CHAR_MOMENT':\n                    case 'CHAR_COMMENT':\n                    case 'CHAR_LIKE':\n                        newEntry = { key, data: (0,_utils__WEBPACK_IMPORTED_MODULE_3__.safeJsonParse)(value) };\n                        this.blmxManager.addEntry(newEntry);\n                        // 将朋友圈相关条目也添加到动画队列中\n                        if (newEntry) {\n                            entriesForAnimation.push(newEntry);\n                            hasNewCharMoments = true;\n                        }\n                        // 立即更新朋友圈界面，不等待动画完成\n                        if (this.momentsManager) {\n                            this.momentsManager.renderMomentsFeed();\n                        }\n                        break;\n                    case 'message':\n                        try {\n                            // 尝试解析JSON\n                            newEntry = {\n                                id: `ai-${Date.now()}-${Math.random()}`,\n                                type: 'message',\n                                sender: 'them',\n                                content: (0,_utils__WEBPACK_IMPORTED_MODULE_3__.safeJsonParse)(value),\n                            };\n                        }\n                        catch (e) {\n                            // 如果JSON解析失败，则直接使用字符串\n                            newEntry = {\n                                id: `ai-${Date.now()}-${Math.random()}`,\n                                type: 'message',\n                                sender: 'them',\n                                content: value,\n                            };\n                        }\n                        this.blmxManager.addEntry(newEntry);\n                        if (newEntry)\n                            entriesForAnimation.push(newEntry);\n                        break;\n                    case 'CHAR':\n                        // 兼容原始的CHAR格式\n                        voiceMatch = value.match(/^\\[语音:\\s*({.*})\\]/);\n                        stickerMatch = value.match(/^\\[表情:\\s*(.*)\\]/);\n                        imageMatch = value.match(/^\\[图片:\\s*(.*)\\]/);\n                        locationMatch = value.match(/^\\[位置:\\s*(.*)\\]/);\n                        transferMatch = value.match(/^\\[转账:\\s*(.*)\\]/);\n                        fileMatch = value.match(/^\\[文件:\\s*(.*)\\]/);\n                        giftMatch = value.match(/^\\[礼物:\\s*(.*)\\]/);\n                        if (voiceMatch) {\n                            try {\n                                newEntry = {\n                                    id,\n                                    type: 'voice',\n                                    sender: 'them',\n                                    content: (0,_utils__WEBPACK_IMPORTED_MODULE_3__.safeJsonParse)(voiceMatch[1]) || { text: '', duration: 0 },\n                                };\n                            }\n                            catch (e) {\n                                console.error('Failed to parse voice data:', voiceMatch[1], e);\n                            }\n                        }\n                        else if (stickerMatch) {\n                            newEntry = {\n                                id,\n                                type: 'sticker',\n                                sender: 'them',\n                                content: stickerMatch[1],\n                            };\n                        }\n                        else if (imageMatch) {\n                            try {\n                                newEntry = {\n                                    id,\n                                    type: 'image',\n                                    sender: 'them',\n                                    content: (0,_utils__WEBPACK_IMPORTED_MODULE_3__.safeJsonParse)(imageMatch[1]) || { type: 'url', value: '' },\n                                };\n                            }\n                            catch (e) {\n                                newEntry = {\n                                    id,\n                                    type: 'image',\n                                    sender: 'them',\n                                    content: { type: 'desc', value: imageMatch[1] },\n                                };\n                            }\n                        }\n                        else if (locationMatch) {\n                            newEntry = {\n                                id,\n                                type: 'location',\n                                sender: 'them',\n                                content: locationMatch[1],\n                            };\n                        }\n                        else if (transferMatch) {\n                            try {\n                                newEntry = {\n                                    id,\n                                    type: 'transfer',\n                                    sender: 'them',\n                                    content: transferMatch[1],\n                                    data: (0,_utils__WEBPACK_IMPORTED_MODULE_3__.safeJsonParse)(transferMatch[1]) || { amount: 0, message: '' },\n                                };\n                            }\n                            catch (e) {\n                                console.error('Failed to parse transfer data:', transferMatch[1], e);\n                            }\n                        }\n                        else if (fileMatch) {\n                            try {\n                                newEntry = {\n                                    id,\n                                    type: 'file',\n                                    sender: 'them',\n                                    content: fileMatch[1],\n                                    data: (0,_utils__WEBPACK_IMPORTED_MODULE_3__.safeJsonParse)(fileMatch[1]) || { name: '', size: 0, url: '' },\n                                };\n                            }\n                            catch (e) {\n                                console.error('Failed to parse file data:', fileMatch[1], e);\n                            }\n                        }\n                        else if (giftMatch) {\n                            try {\n                                newEntry = {\n                                    id,\n                                    type: 'gift',\n                                    sender: 'them',\n                                    content: giftMatch[1],\n                                    data: (0,_utils__WEBPACK_IMPORTED_MODULE_3__.safeJsonParse)(giftMatch[1]) || { name: '', value: 0 },\n                                };\n                            }\n                            catch (e) {\n                                console.error('Failed to parse gift data:', giftMatch[1], e);\n                            }\n                        }\n                        else {\n                            // 纯文本消息\n                            newEntry = {\n                                id,\n                                type: 'message',\n                                sender: 'them',\n                                content: value,\n                            };\n                        }\n                        if (newEntry) {\n                            this.blmxManager.addEntry(newEntry);\n                            entriesForAnimation.push(newEntry);\n                        }\n                        break;\n                    case 'sticker':\n                        newEntry = {\n                            id: `ai-sticker-${Date.now()}-${Math.random()}`,\n                            type: 'sticker',\n                            sender: 'them',\n                            content: (0,_utils__WEBPACK_IMPORTED_MODULE_3__.safeJsonParse)(value),\n                        };\n                        this.blmxManager.addEntry(newEntry);\n                        if (newEntry)\n                            entriesForAnimation.push(newEntry);\n                        break;\n                    case 'voice':\n                        newEntry = {\n                            id: `ai-voice-${Date.now()}-${Math.random()}`,\n                            type: 'voice',\n                            sender: 'them',\n                            content: JSON.parse(value),\n                        };\n                        this.blmxManager.addEntry(newEntry);\n                        if (newEntry)\n                            entriesForAnimation.push(newEntry);\n                        break;\n                    case 'image':\n                        newEntry = {\n                            id: `ai-image-${Date.now()}-${Math.random()}`,\n                            type: 'image',\n                            sender: 'them',\n                            content: JSON.parse(value),\n                        };\n                        this.blmxManager.addEntry(newEntry);\n                        if (newEntry)\n                            entriesForAnimation.push(newEntry);\n                        break;\n                    case 'location':\n                        newEntry = {\n                            id: `ai-location-${Date.now()}-${Math.random()}`,\n                            type: 'location',\n                            sender: 'them',\n                            content: JSON.parse(value),\n                        };\n                        this.blmxManager.addEntry(newEntry);\n                        if (newEntry)\n                            entriesForAnimation.push(newEntry);\n                        break;\n                    case 'transfer':\n                        newEntry = {\n                            id: `ai-transfer-${Date.now()}-${Math.random()}`,\n                            type: 'transfer',\n                            sender: 'them',\n                            content: JSON.parse(value),\n                        };\n                        this.blmxManager.addEntry(newEntry);\n                        if (newEntry)\n                            entriesForAnimation.push(newEntry);\n                        break;\n                    case 'file':\n                        newEntry = {\n                            id: `ai-file-${Date.now()}-${Math.random()}`,\n                            type: 'file',\n                            sender: 'them',\n                            content: JSON.parse(value),\n                        };\n                        this.blmxManager.addEntry(newEntry);\n                        if (newEntry)\n                            entriesForAnimation.push(newEntry);\n                        break;\n                    case 'gift':\n                        newEntry = {\n                            id: `ai-gift-${Date.now()}-${Math.random()}`,\n                            type: 'gift',\n                            sender: 'them',\n                            content: JSON.parse(value),\n                        };\n                        this.blmxManager.addEntry(newEntry);\n                        if (newEntry)\n                            entriesForAnimation.push(newEntry);\n                        break;\n                    case 'RECALL': {\n                        const recallData = (0,_utils__WEBPACK_IMPORTED_MODULE_3__.safeJsonParse)(value);\n                        const senderToFind = recallData.sender === 'USER' ? 'me' : 'them';\n                        const entryToRecall = this.blmxManager.logEntries\n                            .slice()\n                            .reverse()\n                            .find(e => 'sender' in e && e.sender === senderToFind && 'content' in e && e.content === recallData.target_text);\n                        if (entryToRecall) {\n                            // 创建一个\"指令\"条目给动画函数处理\n                            entriesForAnimation.push({\n                                type: 'recall_instruction',\n                                content: {\n                                    originalEntry: entryToRecall,\n                                    recallTimestamp: recallData.timestamp,\n                                },\n                            });\n                        }\n                        break;\n                    }\n                    case 'EVENT_LOG':\n                    case 'TIME':\n                        newEntry = {\n                            type: key === 'TIME' ? 'time' : 'event',\n                            content: (0,_utils__WEBPACK_IMPORTED_MODULE_3__.safeJsonParse)(value),\n                        };\n                        this.blmxManager.addEntry(newEntry);\n                        if (newEntry)\n                            entriesForAnimation.push(newEntry);\n                        break;\n                    default:\n                        _debug_logger__WEBPACK_IMPORTED_MODULE_0__.logger.warn('AiResponseManager', '未知的AI响应键', { key });\n                }\n            }\n            catch (error) {\n                console.error(`[BLMX] Error processing AI response line \"${line}\":`, error);\n            }\n        });\n        // 如果有新条目要动画显示\n        if (entriesForAnimation.length > 0) {\n            await this.displayAiEntriesSequentially(entriesForAnimation);\n            // 如果有朋友圈相关的更新，检查用户是否在朋友圈视图\n            if (hasNewCharMoments && this.momentsManager) {\n                // 只有当用户不在朋友圈视图时才设置通知\n                const userInMomentsView = $('#moments-view').hasClass('active');\n                if (!userInMomentsView) {\n                    this.momentsManager.setMomentNotification(true);\n                }\n                else {\n                    // 如果用户正在朋友圈视图，更新最后查看时间戳\n                    this.momentsManager.setLastMomentViewTimestamp();\n                }\n            }\n            return true;\n        }\n        return false;\n    }\n    // 显示错误消息\n    showErrorMessage(message) {\n        const $errorDiv = $('<div>').addClass('ai-error-message').text(message);\n        $('.wechat-body').append($errorDiv);\n        setTimeout(() => {\n            $errorDiv.remove();\n        }, 5000);\n    }\n    // 按顺序展示AI条目\n    async displayAiEntriesSequentially(entries) {\n        // 定义哪些类型是\"消息\"，需要播放输入动画\n        const messageLikeTypes = ['message', 'sticker', 'voice', 'image', 'location', 'transfer', 'file', 'gift'];\n        for (const entry of entries) {\n            // 找到条目在日志中的索引\n            const entryIndex = this.blmxManager.logEntries.findIndex(log => {\n                // 对于有ID的条目，通过ID匹配\n                if ('id' in log && 'id' in entry && log.id === entry.id) {\n                    return true;\n                }\n                // 对于朋友圈相关条目，通过key和内容匹配\n                if ('key' in log && 'key' in entry && log.key === entry.key) {\n                    // 对于朋友圈动态\n                    if (entry.key.includes('_MOMENT')) {\n                        return window._.isEqual(log.data, entry.data);\n                    }\n                    // 对于点赞和评论\n                    if (entry.key.includes('_LIKE') || entry.key.includes('_COMMENT')) {\n                        return window._.isEqual(log.data, entry.data);\n                    }\n                }\n                // 对于没有ID的条目（如TIME、EVENT_LOG），通过内容匹配\n                if ('type' in log &&\n                    'type' in entry &&\n                    (log.type === 'time' || log.type === 'event') &&\n                    log.type === entry.type &&\n                    window._.isEqual(log.content, entry.content)) {\n                    return true;\n                }\n                // 对于消息类型条目，通过类型、发送者和内容匹配\n                if ('type' in log &&\n                    'type' in entry &&\n                    'sender' in log &&\n                    'sender' in entry &&\n                    'content' in log &&\n                    'content' in entry &&\n                    log.type === entry.type &&\n                    log.sender === entry.sender) {\n                    // 对于简单类型的内容，直接比较\n                    if (typeof log.content === 'string' && typeof entry.content === 'string') {\n                        return log.content === entry.content;\n                    }\n                    // 对于复杂类型的内容，使用lodash深度比较\n                    return window._.isEqual(log.content, entry.content);\n                }\n                return false;\n            });\n            if (entryIndex !== -1) {\n                _debug_logger__WEBPACK_IMPORTED_MODULE_0__.logger.debug('AiResponseManager', '找到已存在的条目', {\n                    entryIndex,\n                    entryType: 'type' in entry ? entry.type : 'unknown',\n                });\n            }\n            // 判断条目类型是否是需要动画的\"消息\"\n            if ('type' in entry && messageLikeTypes.includes(entry.type)) {\n                // 是消息，执行完整的动画流程\n                this.uiRenderer.showTypingIndicator();\n                const messageText = entry.type === 'message' ? entry.content : entry.type === 'voice' ? entry.content.text : '';\n                const delay = this.uiRenderer.calculateTypingDelay(messageText);\n                await new Promise(resolve => setTimeout(resolve, delay));\n                this.uiRenderer.hideTypingIndicator();\n                this.uiRenderer.renderEntry(entry, entryIndex !== -1 ? entryIndex : undefined, true);\n            }\n            else if ('type' in entry && entry.type === 'recall_instruction') {\n                // 处理撤回指令，使用类型断言\n                const { originalEntry, recallTimestamp } = entry.content;\n                // 在内存中找到这个条目并标记\n                const entryToUpdate = this.blmxManager.logEntries.find(log => 'id' in log && log.id === originalEntry.id);\n                if (entryToUpdate) {\n                    entryToUpdate.recalled = true;\n                    entryToUpdate.recalled_content = originalEntry.content;\n                    entryToUpdate.recalled_timestamp = recallTimestamp;\n                    // 获取条目在日志中的索引，以便在删除模式下显示删除按钮\n                    const recallEntryIndex = this.blmxManager.logEntries.indexOf(entryToUpdate);\n                    // 在UI上找到对应的DOM元素并替换它\n                    const $elementToReplace = $(`[data-message-id=\"${originalEntry.id}\"]`);\n                    if ($elementToReplace.length) {\n                        // 使用一个小的延迟，让撤回动作看起来更自然\n                        await new Promise(resolve => setTimeout(resolve, 500));\n                        this.uiRenderer.renderRecallNotice(entryToUpdate, $elementToReplace[0], recallEntryIndex);\n                    }\n                }\n            }\n            else {\n                // 是系统事件 (如 EVENT_LOG, TIME)，直接显示\n                this.uiRenderer.renderEntry(entry, entryIndex !== -1 ? entryIndex : undefined, true);\n            }\n            // 在所有条目之间都增加一个短暂的停顿，让节奏更舒适\n            await new Promise(resolve => setTimeout(resolve, 800));\n        }\n        // 显示完所有条目后刷新时间戳，确保日期格式正确\n        this.uiRenderer.refreshAllTimestamps();\n    }\n    /**\n     * 清理资源，防止内存泄漏\n     */\n    cleanup() {\n        this.eventManager.cleanup();\n        console.log('[AiResponseManager] 资源已清理');\n    }\n    // 获取最新的AI原始响应\n    getLatestAiRawResponse() {\n        return this.latestAiRawResponse;\n    }\n    // 获取最新发送的提示词\n    getLatestSentPrompt() {\n        return this.latestSentPrompt;\n    }\n    // 获取原始AI响应\n    getRawAiResponse() {\n        return this.rawAiResponse;\n    }\n    // 获取完整提示词\n    getFullPrompt() {\n        return this.fullPrompt;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMv5ZCM5bGC5omL5py6L2FpLXJlc3BvbnNlLW1hbmFnZXIudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBQSxXQUFXO0FBQ1gsd0JBQXdCO0FBRWdCO0FBQ087QUFFcUI7QUFHVDtBQUVwRCxNQUFNLGlCQUFpQjtJQUNwQixXQUFXLENBQWdCO0lBQzNCLFVBQVUsQ0FBYTtJQUN2QixZQUFZLENBQWdCO0lBQzVCLGNBQWMsQ0FBaUI7SUFDL0IsWUFBWSxDQUFlO0lBRTNCLFlBQVksR0FBWSxLQUFLLENBQUM7SUFDOUIsbUJBQW1CLEdBQVcsYUFBYSxDQUFDO0lBQzVDLGdCQUFnQixHQUFXLGVBQWUsQ0FBQztJQUVuRCw0QkFBNEI7SUFDcEIsYUFBYSxHQUFXLEVBQUUsQ0FBQztJQUMzQixVQUFVLEdBQVcsRUFBRSxDQUFDO0lBRWhDLFlBQ0UsV0FBMEIsRUFDMUIsVUFBc0IsRUFDdEIsWUFBMkIsRUFDM0IsY0FBOEI7UUFFOUIsSUFBSSxDQUFDLFdBQVcsR0FBRyxXQUFXLENBQUM7UUFDL0IsSUFBSSxDQUFDLFVBQVUsR0FBRyxVQUFVLENBQUM7UUFDN0IsSUFBSSxDQUFDLFlBQVksR0FBRyxZQUFZLENBQUM7UUFDakMsSUFBSSxDQUFDLGNBQWMsR0FBRyxjQUFjLENBQUM7UUFDckMsSUFBSSxDQUFDLFlBQVksR0FBRyxJQUFJLHdEQUFZLEVBQUUsQ0FBQztRQUV2Qyx5QkFBeUI7UUFDekIsSUFBSSxDQUFDLFlBQVksQ0FBQyxpQkFBaUIsQ0FBQyxxQkFBcUIsRUFBRSxDQUFDLElBQVksRUFBRSxFQUFFO1lBQzFFLElBQUksQ0FBQyxhQUFhLEdBQUcsSUFBSSxDQUFDO1lBQzFCLGlEQUFNLENBQUMsS0FBSyxDQUFDLG1CQUFtQixFQUFFLFdBQVcsRUFBRSxFQUFFLE1BQU0sRUFBRSxJQUFJLENBQUMsTUFBTSxFQUFFLENBQUMsQ0FBQztRQUMxRSxDQUFDLENBQUMsQ0FBQztRQUVILElBQUksQ0FBQyxZQUFZLENBQUMsaUJBQWlCLENBQUMsOEJBQThCLEVB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SSxDQUFDLFlBQVksQ0FBQyxPQUFPLEVBQUUsQ0FBQztRQUM1QixPQUFPLENBQUMsR0FBRyxDQUFDLDJCQUEyQixDQUFDLENBQUM7SUFDM0MsQ0FBQztJQUVELGNBQWM7SUFDZCxzQkFBc0I7UUFDcEIsT0FBTyxJQUFJLENBQUMsbUJBQW1CLENBQUM7SUFDbEMsQ0FBQztJQUVELGFBQWE7SUFDYixtQkFBbUI7UUFDakIsT0FBTyxJQUFJLENBQUMsZ0JBQWdCLENBQUM7SUFDL0IsQ0FBQztJQUVELFdBQVc7SUFDWCxnQkFBZ0I7UUFDZCxPQUFPLElBQUksQ0FBQyxhQUFhLENBQUM7SUFDNUIsQ0FBQztJQUVELFVBQVU7SUFDVixhQUFhO1FBQ1gsT0FBTyxJQUFJLENBQUMsVUFBVSxDQUFDO0lBQ3pCLENBQUM7Q0FDRiIsInNvdXJjZXMiOlsid2VicGFjazovL3RhdmVybl9oZWxwZXJfdGVtcGxhdGUvLi9zcmMv5ZCM5bGC5omL5py6L2FpLXJlc3BvbnNlLW1hbmFnZXIudHM/Il0sInNvdXJjZXNDb250ZW50IjpbIi8vIEFJ5ZON5bqU5aSE55CG5qih5Z2XXG4vLyDotJ/otKNBSeWTjeW6lOinpuWPkeOAgeadoeebruWkhOeQhuOAgeWKqOeUu+aYvuekuuetieWKn+iDvVxuXG5pbXBvcnQgeyBsb2dnZXIgfSBmcm9tICcuL2RlYnVnLWxvZ2dlcic7XG5pbXBvcnQgeyBFdmVudE1hbmFnZXIgfSBmcm9tICcuL2V2ZW50LW1hbmFnZXInO1xuaW1wb3J0IHsgTW9tZW50c01hbmFnZXIgfSBmcm9tICcuL21vbWVudHMtbWFuYWdlcic7XG5pbXBvcnQgeyBCTE1YX1Byb3RvY29sLCBMb2dFbnRyeSwgZ2V0VGF2ZXJuSGVscGVyIH0gZnJvbSAnLi9zY3JpcHQnO1xuaW1wb3J0IHsgSUV2ZW50SGFuZGxlciB9IGZyb20gJy4vdHlwZXMnO1xuaW1wb3J0IHsgVUlSZW5kZXJlciB9IGZyb20gJy4vdWktcmVuZGVyZXInO1xuaW1wb3J0IHsgc2FmZUpzb25QYXJzZSwgc2FmZUpzb25TdHJpbmdpZnkgfSBmcm9tICcuL3V0aWxzJztcblxuZXhwb3J0IGNsYXNzIEFpUmVzcG9uc2VNYW5hZ2VyIHtcbiAgcHJpdmF0ZSBibG14TWFuYWdlcjogQkxNWF9Qcm90b2NvbDtcbiAgcHJpdmF0ZSB1aVJlbmRlcmVyOiBVSVJlbmRlcmVyO1xuICBwcml2YXRlIGV2ZW50SGFuZGxlcjogSUV2ZW50SGFuZGxlcjtcbiAgcHJpdmF0ZSBtb21lbnRzTWFuYWdlcjogTW9tZW50c01hbmFnZXI7XG4gIHByaXZhdGUgZXZlbnRNYW5hZ2VyOiBFdmVudE1hbmFnZXI7XG5cbiAgcHJpdmF0ZSBpc0dlbmVyYXRpbmc6IGJvb2xlYW4gPSBmYWxzZTtcbiAgcHJpdmF0ZSBsYXRlc3RBaVJhd1Jlc3BvbnNlOiBzdHJpbmcgPSAn6L+Y5rKh5pyJ5pS25YiwQUnnmoTlm57lpI3jgIInO1xuICBwcml2YXRlIGxhdGVzdFNlbnRQcm9tcHQ6IHN0cmluZyA9ICfov5jmsqHmnInlj5HpgIHku7vkvZXlhoXlrrnnu5lBSeOAgic7XG5cbiAgLy8g5paw5aKe77ya6K6w5b2V5Y6f5aeL5ZON5bqU5ZKM5a6M5pW05o+Q56S66K+N77yM5LiO5ZCM5bGC5omL5py65L+d5oyB5LiA6Ie0XG4gIHByaXZhdGUgcmF3QWlSZXNwb25zZTogc3RyaW5nID0gJyc7XG4gIHByaXZhdGUgZnVsbFByb21wdDogc3RyaW5nID0gJyc7XG5cbiAgY29uc3RydWN0b3IoXG4gICAgYmxteE1hbmFnZXI6IEJMTVhfUHJvdG9jb2wsXG4gICAgdWlSZW5kZXJlcjogVUlSZW5kZXJlcixcbiAgICBldmVudEhhbmRsZXI6IElFdmVudEhhbmRsZXIsXG4gICAgbW9tZW50c01hbmFnZXI6IE1vbWVudHNNYW5hZ2VyLFxuICApIHtcbiAgICB0aGlzLmJsbXhNYW5hZ2VyID0gYmxteE1hbmFnZXI7XG4gICAgdGhpcy51aVJlbmRlcmVyID0gdWlSZW5kZXJlcjtcbiAgICB0aGlzLmV2ZW50SGFuZGxlciA9IGV2ZW50SGFuZGxlcjtcbiAgICB0aGlzLm1vbWVudHNNYW5hZ2VyID0gbW9tZW50c01hbmFnZXI7XG4gICAgdGhpcy5ldmVudE1hbmFnZXIgPSBuZXcgRXZlbnRNYW5hZ2VyKCk7XG5cbiAgICAvLyDkvb/nlKjkuovku7bnrqHnkIblmajmnaXmt7vliqDkuovku7bnm5HlkKzlmajvvIzpmLLmraLlhoXlrZjms4TmvI9cbiAgICB0aGlzLmV2ZW50TWFuYWdlci5hZGRHbG9iYWxMaXN0ZW5lcignanNfZ2VuZXJhdGlvbl9lbmRlZCcsICh0ZXh0OiBzdHJpbmcpID0+IHtcbiAgICAgIHRoaXMucmF3QWlSZXNwb25zZSA9IHRleHQ7XG4gICAgICBsb2dnZXIuZGVidWcoJ0FpUmVzcG9uc2VNYW5hZ2VyJywgJ+WOn+Wni0FJ5ZON5bqU5bey5o6l5pS2JywgeyBsZW5ndGg6IHRleHQubGVuZ3RoIH0pO1xuICAgIH0pO1xuXG4gICAgdGhpcy5ldmVudE1hbmFnZXIuYWRkR2xvYmFsTGlzdGVuZXIoJ2NoYXRfY29tcGxldGlvbl9wcm9tcHRfcmVhZHknLCAoZXZlbnRfZGF0YTogYW55KSA9PiB7XG4gICAgICB0aGlzLmZ1bGxQcm9tcHQgPSBzYWZlSnNvblN0cmluZ2lmeShldmVudF9kYXRhLmNoYXQpO1xuICAgICAgbG9nZ2VyLmRlYnVnKCdBaVJlc3BvbnNlTWFuYWdlcicsICflrozmlbTmj5DnpLror43lt7Llh4blpIcnLCB7IHByb21wdExlbmd0aDogdGhpcy5mdWxsUHJvbXB0Lmxlbmd0aCB9KTtcbiAgICB9KTtcbiAgfVxuXG4gIC8vIOiOt+WPluaYr+WQpuato+WcqOeUn+aIkFxuICBnZXRJc0dlbmVyYXRpbmcoKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMuaXNHZW5lcmF0aW5nO1xuICB9XG5cbiAgLy8g6Kem5Y+RQUnlk43lupQgLSDmjInnhafljp/lp4vlkIzlsYLmiYvmnLrkuK3nmoTlrp7njrDnp7vmpI1cbiAgYXN5bmMgdHJpZ2dlckFpUmVzcG9uc2UoX2ltbWVkaWF0ZTogYm9vbGVhbiA9IGZhbHNlKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgaWYgKHRoaXMuaXNHZW5lcmF0aW5nIHx8ICF0aGlzLmJsbXhNYW5hZ2VyKSByZXR1cm47XG5cbiAgICAvLyDmo4Dmn6XpgLvovpHlt7Lnp7vliLBBcHBDb250cm9sbGVy5Lit77yM6L+Z6YeM55u05o6l5aSE55CGXG5cbiAgICAvLyDmo4Dmn6XlhajlsYDmoIflv5fvvIzpmLLmraLph43lpI3lpITnkIZcbiAgICBpZiAoKHdpbmRvdyBhcyBhbnkpLkJMTVhfUFJPQ0VTU0lOR19BSV9SRVNQT05TRSkge1xuICAgICAgbG9nZ2VyLmRlYnVnKCdBaVJlc3BvbnNlTWFuYWdlcicsICflt7LmnIlBSeWTjeW6lOWkhOeQhui/m+ihjOS4re+8jOi3s+i/h+mHjeWkjeWkhOeQhicpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIOiuvue9ruWFqOWxgOWkhOeQhuagh+W/l1xuICAgICh3aW5kb3cgYXMgYW55KS5CTE1YX1BST0NFU1NJTkdfQUlfUkVTUE9OU0UgPSB0cnVlO1xuICAgIHRoaXMuaXNHZW5lcmF0aW5nID0gdHJ1ZTtcblxuICAgIHRyeSB7XG4gICAgICAvLyBnZXRDb250ZXh0Rm9yQUkgc2hvdWxkIG5vdyBnZXQgYWxsIG5lY2Vzc2FyeSBjb250ZXh0IGZyb20gdGhlIG1haW4gbG9nLlxuICAgICAgbGV0IGNvbnRleHRGb3JBSSA9IHRoaXMuYmxteE1hbmFnZXIuZ2V0Q29udGV4dEZvckFJKCk7XG5cbiAgICAgIGNvbnRleHRGb3JBSSArPVxuICAgICAgICAnXFxu44CQQkxNWF9MT0fkuK3nmoTlhoXlrrnkuLrnm67liY3ov4flvoDnur/kuIrogYrlpKnorrDlvZXvvIzlhbbkuK3kuZ/ljIXmi6zmnIDmlrDnmoRVU0VS6L6T5YWl77yM6K+35L2g5L2c5Li6Q0hBUui/m+ihjOWbnuW6lOOAguOAkVxcbuOAkOacrOasoeWTjeW6lOW/hemhu+mBteW+que6v+S4iuinhOWImeOAkeOAkOW/hemhu+S9v+eUqOeJueauiue6puWumueahOagvOW8j+S4lOS/neivgeato+ehruaNouihjOOAkSc7XG4gICAgICB0aGlzLmxhdGVzdFNlbnRQcm9tcHQgPSBjb250ZXh0Rm9yQUk7XG5cbiAgICAgIC8vIENsZWFuIHVwICdpc05ld0ZvckFJJyBmbGFncyBmcm9tIHRoZSBtYWluIGxvZyBhZnRlciBnZW5lcmF0aW5nIGNvbnRleHQuXG4gICAgICB0aGlzLmJsbXhNYW5hZ2VyLmxvZ0VudHJpZXMuZm9yRWFjaChlbnRyeSA9PiB7XG4gICAgICAgIGlmICgndHlwZScgaW4gZW50cnkgJiYgZW50cnkudHlwZSA9PT0gJ2ltYWdlJyAmJiAnY29udGVudCcgaW4gZW50cnkgJiYgKGVudHJ5LmNvbnRlbnQgYXMgYW55KS5pc05ld0ZvckFJKSB7XG4gICAgICAgICAgKGVudHJ5LmNvbnRlbnQgYXMgYW55KS52YWx1ZSA9IGBb55So5oi35Y+R6YCB55qE5Zu+54mHXWA7XG4gICAgICAgICAgZGVsZXRlIChlbnRyeS5jb250ZW50IGFzIGFueSkuaXNOZXdGb3JBSTtcbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICAgIC8vIOmHjee9ruW+heWTjeW6lOagh+W/l1xuICAgICAgdGhpcy5ldmVudEhhbmRsZXIuc2V0SGFzUGVuZGluZ05vdGlmaWNhdGlvbnMoZmFsc2UpO1xuXG4gICAgICBjb25zdCBNQVhfUkVUUklFUyA9IDI7XG4gICAgICBsZXQgYXR0ZW1wdCA9IDA7XG4gICAgICBsZXQgc3VjY2VzcyA9IGZhbHNlO1xuXG4gICAgICB3aGlsZSAoYXR0ZW1wdCA8PSBNQVhfUkVUUklFUyAmJiAhc3VjY2Vzcykge1xuICAgICAgICBpZiAoYXR0ZW1wdCA+IDApIHtcbiAgICAgICAgICBsb2dnZXIud2FybignQWlSZXNwb25zZU1hbmFnZXInLCBgQUnlk43lupTkuLrnqbrvvIzph43or5XkuK1gLCB7IGF0dGVtcHQ6IGF0dGVtcHQgKyAxLCBtYXhSZXRyaWVzOiBNQVhfUkVUUklFUyArIDEgfSk7XG4gICAgICAgICAgYXdhaXQgbmV3IFByb21pc2UocmVzb2x2ZSA9PiBzZXRUaW1lb3V0KHJlc29sdmUsIDEwMDAgKiBhdHRlbXB0KSk7XG4gICAgICAgIH1cblxuICAgICAgICB0cnkge1xuICAgICAgICAgIC8vIOaYvuekuueBteWKqOWym+eUn+aIkOaMh+ekuuWZqO+8jOiAjOS4jeaYr+aJk+Wtl+aMh+ekuuWZqFxuICAgICAgICAgIHRoaXMudWlSZW5kZXJlci5zaG93R2VuZXJhdGluZ0luZGljYXRvcigpO1xuXG4gICAgICAgICAgY29uc3Qgc3RyZWFtID0gYXdhaXQgZ2V0VGF2ZXJuSGVscGVyKCkuZ2VuZXJhdGUoeyB1c2VyX2lucHV0OiBjb250ZXh0Rm9yQUksIHNob3VsZF9zdHJlYW06IHRydWUgfSk7XG4gICAgICAgICAgbGV0IGZpbmFsQWlSZXNwb25zZSA9ICcnO1xuXG4gICAgICAgICAgZm9yIGF3YWl0IChjb25zdCBjaHVuayBvZiBzdHJlYW0pIHtcbiAgICAgICAgICAgIGZpbmFsQWlSZXNwb25zZSArPSBjaHVuaztcbiAgICAgICAgICB9XG5cbiAgICAgICAgICAvLyDpmpDol4/ngbXliqjlspvnlJ/miJDmjIfnpLrlmahcbiAgICAgICAgICB0aGlzLnVpUmVuZGVyZXIuaGlkZUdlbmVyYXRpbmdJbmRpY2F0b3IoKTtcbiAgICAgICAgICB0aGlzLmxhdGVzdEFpUmF3UmVzcG9uc2UgPSBmaW5hbEFpUmVzcG9uc2UudHJpbSgpO1xuXG4gICAgICAgICAgLy8g6K6w5b2V5Y6f5aeL5ZON5bqU5Lul5L6/6LCD6K+VXG4gICAgICAgICAgaWYgKCF0aGlzLnJhd0FpUmVzcG9uc2UpIHtcbiAgICAgICAgICAgIHRoaXMucmF3QWlSZXNwb25zZSA9IGZpbmFsQWlSZXNwb25zZS50cmltKCk7XG4gICAgICAgICAgICBsb2dnZXIuZGVidWcoJ0FpUmVzcG9uc2VNYW5hZ2VyJywgJ+ebtOaOpeiOt+WPlueahOWOn+Wni0FJ5ZON5bqUJywgeyBsZW5ndGg6IHRoaXMucmF3QWlSZXNwb25zZS5sZW5ndGggfSk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgLy8g5aSE55CG6YeN5aSN5ZON5bqU6Zeu6aKYIC0g5LuO5Y6f5aeL5ZCM5bGC5omL5py656e75qSN6L+H5p2lXG4gICAgICAgICAgbGV0IHByb2Nlc3NlZFJlc3BvbnNlID0gZmluYWxBaVJlc3BvbnNlLnRyaW0oKTtcbiAgICAgICAgICBjb25zdCBsZW4gPSBwcm9jZXNzZWRSZXNwb25zZS5sZW5ndGg7XG5cbiAgICAgICAgICAvLyDmo4Dmn6Xlrozlhajnm7jlkIznmoTkuKTljYpcbiAgICAgICAgICBpZiAobGVuID4gMCAmJiBsZW4gJSAyID09PSAwKSB7XG4gICAgICAgICAgICBjb25zdCBmaXJzdEhhbGYgPSBwcm9jZXNzZWRSZXNwb25zZS5zdWJzdHJpbmcoMCwgbGVuIC8gMik7XG4gICAgICAgICAgICBjb25zdCBzZWNvbmRIYWxmID0gcHJvY2Vzc2VkUmVzcG9uc2Uuc3Vic3RyaW5nKGxlbiAvIDIpO1xuXG4gICAgICAgICAgICBpZiAoZmlyc3RIYWxmID09PSBzZWNvbmRIYWxmICYmIGZpcnN0SGFsZi50cmltKCkgIT09ICcnKSB7XG4gICAgICAgICAgICAgIGxvZ2dlci53YXJuKCdBaVJlc3BvbnNlTWFuYWdlcicsICfmo4DmtYvliLDlrozlhajph43lpI3nmoRBSeWTjeW6lO+8jOiHquWKqOS/ruWJqicpO1xuICAgICAgICAgICAgICBwcm9jZXNzZWRSZXNwb25zZSA9IGZpcnN0SGFsZjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG5cbiAgICAgICAgICAvLyDlop7lvLrnmoTph43lpI3mo4DmtYvvvJrmo4Dmn6XmmK/lkKbmnInnm7jlkIznmoTooYzooqvph43lpI1cbiAgICAgICAgICBjb25zdCBsaW5lcyA9IHByb2Nlc3NlZFJlc3BvbnNlLnNwbGl0KCdcXG4nKS5maWx0ZXIobGluZSA9PiBsaW5lLnRyaW0oKSAhPT0gJycpO1xuICAgICAgICAgIGlmIChsaW5lcy5sZW5ndGggPiAxKSB7XG4gICAgICAgICAgICBjb25zdCB1bmlxdWVMaW5lcyA9ICh3aW5kb3cgYXMgYW55KS5fLnVuaXEobGluZXMpO1xuICAgICAgICAgICAgLy8g5aaC5p6c5Y676YeN5ZCO55qE6KGM5pWw5piO5pi+5bCR5LqO5Y6f5aeL6KGM5pWw77yM5Y+v6IO95a2Y5Zyo6YeN5aSNXG4gICAgICAgICAgICBpZiAodW5pcXVlTGluZXMubGVuZ3RoIDwgbGluZXMubGVuZ3RoICogMC43KSB7XG4gICAgICAgICAgICAgIGxvZ2dlci53YXJuKCdBaVJlc3BvbnNlTWFuYWdlcicsICfmo4DmtYvliLBBSeWTjeW6lOS4reeahOa9nOWcqOihjOmHjeWkje+8jOS7heS9v+eUqOWUr+S4gOihjCcpO1xuICAgICAgICAgICAgICBwcm9jZXNzZWRSZXNwb25zZSA9IHVuaXF1ZUxpbmVzLmpvaW4oJ1xcbicpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmIChwcm9jZXNzZWRSZXNwb25zZS50cmltKCkpIHtcbiAgICAgICAgICAgIC8vIOWkhOeQhkFJ5ZON5bqUXG4gICAgICAgICAgICBzdWNjZXNzID0gYXdhaXQgdGhpcy5wcm9jZXNzQWlSZXNwb25zZShwcm9jZXNzZWRSZXNwb25zZS50cmltKCkpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICBsb2dnZXIuZXJyb3IoJ0FpUmVzcG9uc2VNYW5hZ2VyJywgYOWwneivlSR7YXR0ZW1wdH3ml7blh7rplJlgLCB7IGF0dGVtcHQsIGVycm9yIH0pO1xuICAgICAgICAgIHRoaXMudWlSZW5kZXJlci5oaWRlR2VuZXJhdGluZ0luZGljYXRvcigpO1xuXG4gICAgICAgICAgaWYgKGF0dGVtcHQgPj0gTUFYX1JFVFJJRVMpIHtcbiAgICAgICAgICAgIHRoaXMuc2hvd0Vycm9yTWVzc2FnZSgnQUnku6PnkIblh7rplJkgKOivpuaDheingUYxMuaOp+WItuWPsCknKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBhdHRlbXB0Kys7XG4gICAgICB9XG5cbiAgICAgIGlmICghc3VjY2VzcyAmJiBhdHRlbXB0ID4gTUFYX1JFVFJJRVMpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihgW0JMTVhdIEFJIGdlbmVyYXRpb24gZmFpbGVkIGFmdGVyICR7TUFYX1JFVFJJRVMgKyAxfSBhdHRlbXB0cyAoZW1wdHkgcmVzcG9uc2UpLmApO1xuICAgICAgICB0aGlzLnNob3dFcnJvck1lc3NhZ2UoJyhBSeWTjeW6lOS4uuepuu+8jOivt+eojeWQjuWGjeivleaIluaJi+WKqOinpuWPkSknKTtcbiAgICAgICAgdGhpcy5sYXRlc3RBaVJhd1Jlc3BvbnNlID0gJ1tBSeWTjeW6lOS4uuepul0nO1xuICAgICAgfVxuXG4gICAgICBhd2FpdCB0aGlzLmJsbXhNYW5hZ2VyLnBlcnNpc3RMb2dUb1N0b3JhZ2UoKTtcblxuICAgICAgLy8g5Yi35paw5omA5pyJ5pe26Ze05oiz55qE5pi+56S677yM56Gu5L+dQUnlm57lpI3nmoTml7bpl7TmiLPmraPnoa7lsZXnpLpcbiAgICAgIHRoaXMudWlSZW5kZXJlci5yZWZyZXNoQWxsVGltZXN0YW1wcygpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdbQkxNWF0gRXJyb3IgaW4gdHJpZ2dlckFpUmVzcG9uc2U6JywgZXJyb3IpO1xuICAgIH0gZmluYWxseSB7XG4gICAgICAvLyDml6DorrrmiJDlip/lpLHotKXvvIzpg73ph43nva7lpITnkIbmoIflv5dcbiAgICAgIHRoaXMuaXNHZW5lcmF0aW5nID0gZmFsc2U7XG4gICAgICAod2luZG93IGFzIGFueSkuQkxNWF9QUk9DRVNTSU5HX0FJX1JFU1BPTlNFID0gZmFsc2U7XG4gICAgfVxuICB9XG5cbiAgLy8g5aSE55CGQUnlk43lupRcbiAgcHJpdmF0ZSBhc3luYyBwcm9jZXNzQWlSZXNwb25zZShyZXNwb25zZTogc3RyaW5nKTogUHJvbWlzZTxib29sZWFuPiB7XG4gICAgY29uc3QgZW50cmllc0ZvckFuaW1hdGlvbjogTG9nRW50cnlbXSA9IFtdO1xuICAgIGxldCBoYXNOZXdDaGFyTW9tZW50cyA9IGZhbHNlO1xuXG4gICAgLy8g6aKE5aSE55CG5ZON5bqU5paH5pysXG4gICAgY29uc3QgcHJvY2Vzc2VkUmVzcG9uc2UgPSByZXNwb25zZS5yZXBsYWNlKC9eXFxzKltbe10uKltcXF19XVxccyokL2dtLCBtYXRjaCA9PiB7XG4gICAgICBjb25zdCBwYXJzZWQgPSBzYWZlSnNvblBhcnNlKG1hdGNoLnRyaW0oKSk7XG4gICAgICByZXR1cm4gcGFyc2VkICE9PSBudWxsID8gbWF0Y2ggOiAnJztcbiAgICB9KTtcblxuICAgIGNvbnN0IHJlc3BvbnNlTGluZXMgPSBwcm9jZXNzZWRSZXNwb25zZS5zcGxpdCgnXFxuJykuZmlsdGVyKGxpbmUgPT4gbGluZS50cmltKCkgIT09ICcnKTtcbiAgICBsb2dnZXIuZGVidWcoJ0FpUmVzcG9uc2VNYW5hZ2VyJywgJ+WkhOeQhkFJ5ZON5bqU6KGMJywgeyBsaW5lQ291bnQ6IHJlc3BvbnNlTGluZXMubGVuZ3RoIH0pO1xuXG4gICAgcmVzcG9uc2VMaW5lcy5mb3JFYWNoKGxpbmUgPT4ge1xuICAgICAgY29uc3Qgc2VwYXJhdG9ySW5kZXggPSBsaW5lLmluZGV4T2YoJzonKTtcbiAgICAgIGlmIChzZXBhcmF0b3JJbmRleCA9PT0gLTEpIHtcbiAgICAgICAgbG9nZ2VyLmRlYnVnKCdBaVJlc3BvbnNlTWFuYWdlcicsICfot7Pov4fmsqHmnInliIbpmpTnrKbnmoTooYwnLCB7IGxpbmUgfSk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgY29uc3Qga2V5ID0gbGluZS5zdWJzdHJpbmcoMCwgc2VwYXJhdG9ySW5kZXgpLnRyaW0oKTtcbiAgICAgIGNvbnN0IHZhbHVlID0gbGluZS5zdWJzdHJpbmcoc2VwYXJhdG9ySW5kZXggKyAxKS50cmltKCk7XG4gICAgICBsb2dnZXIuZGVidWcoJ0FpUmVzcG9uc2VNYW5hZ2VyJywgJ+ino+aekOWTjeW6lCcsIHtcbiAgICAgICAga2V5LFxuICAgICAgICB2YWx1ZVByZXZpZXc6IHZhbHVlLnN1YnN0cmluZygwLCA1MCkgKyAodmFsdWUubGVuZ3RoID4gNTAgPyAnLi4uJyA6ICcnKSxcbiAgICAgICAgdmFsdWVMZW5ndGg6IHZhbHVlLmxlbmd0aCxcbiAgICAgIH0pO1xuXG4gICAgICBpZiAoIWtleSB8fCAhdmFsdWUpIHJldHVybjtcblxuICAgICAgdHJ5IHtcbiAgICAgICAgbGV0IG5ld0VudHJ5OiBMb2dFbnRyeSB8IG51bGwgPSBudWxsO1xuICAgICAgICAvLyDlo7DmmI7miYDmnInlj6/og73lnKhjYXNl5Lit5L2/55So55qE5Y+Y6YePXG4gICAgICAgIGNvbnN0IGlkID0gYGFpLSR7RGF0ZS5ub3coKX0tJHtNYXRoLnJhbmRvbSgpfWA7XG4gICAgICAgIGxldCB2b2ljZU1hdGNoOiBSZWdFeHBNYXRjaEFycmF5IHwgbnVsbCA9IG51bGw7XG4gICAgICAgIGxldCBzdGlja2VyTWF0Y2g6IFJlZ0V4cE1hdGNoQXJyYXkgfCBudWxsID0gbnVsbDtcbiAgICAgICAgbGV0IGltYWdlTWF0Y2g6IFJlZ0V4cE1hdGNoQXJyYXkgfCBudWxsID0gbnVsbDtcbiAgICAgICAgbGV0IGxvY2F0aW9uTWF0Y2g6IFJlZ0V4cE1hdGNoQXJyYXkgfCBudWxsID0gbnVsbDtcbiAgICAgICAgbGV0IHRyYW5zZmVyTWF0Y2g6IFJlZ0V4cE1hdGNoQXJyYXkgfCBudWxsID0gbnVsbDtcbiAgICAgICAgbGV0IGZpbGVNYXRjaDogUmVnRXhwTWF0Y2hBcnJheSB8IG51bGwgPSBudWxsO1xuICAgICAgICBsZXQgZ2lmdE1hdGNoOiBSZWdFeHBNYXRjaEFycmF5IHwgbnVsbCA9IG51bGw7XG5cbiAgICAgICAgc3dpdGNoIChrZXkpIHtcbiAgICAgICAgICBjYXNlICdDSEFSX01PTUVOVCc6XG4gICAgICAgICAgY2FzZSAnQ0hBUl9DT01NRU5UJzpcbiAgICAgICAgICBjYXNlICdDSEFSX0xJS0UnOlxuICAgICAgICAgICAgbmV3RW50cnkgPSB7IGtleSwgZGF0YTogc2FmZUpzb25QYXJzZSh2YWx1ZSkgfSBhcyBhbnk7XG4gICAgICAgICAgICB0aGlzLmJsbXhNYW5hZ2VyLmFkZEVudHJ5KG5ld0VudHJ5KTtcblxuICAgICAgICAgICAgLy8g5bCG5pyL5Y+L5ZyI55u45YWz5p2h55uu5Lmf5re75Yqg5Yiw5Yqo55S76Zif5YiX5LitXG4gICAgICAgICAgICBpZiAobmV3RW50cnkpIHtcbiAgICAgICAgICAgICAgZW50cmllc0ZvckFuaW1hdGlvbi5wdXNoKG5ld0VudHJ5KTtcbiAgICAgICAgICAgICAgaGFzTmV3Q2hhck1vbWVudHMgPSB0cnVlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyDnq4vljbPmm7TmlrDmnIvlj4vlnIjnlYzpnaLvvIzkuI3nrYnlvoXliqjnlLvlrozmiJBcbiAgICAgICAgICAgIGlmICh0aGlzLm1vbWVudHNNYW5hZ2VyKSB7XG4gICAgICAgICAgICAgIHRoaXMubW9tZW50c01hbmFnZXIucmVuZGVyTW9tZW50c0ZlZWQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgY2FzZSAnbWVzc2FnZSc6XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAvLyDlsJ3or5Xop6PmnpBKU09OXG4gICAgICAgICAgICAgIG5ld0VudHJ5ID0ge1xuICAgICAgICAgICAgICAgIGlkOiBgYWktJHtEYXRlLm5vdygpfS0ke01hdGgucmFuZG9tKCl9YCxcbiAgICAgICAgICAgICAgICB0eXBlOiAnbWVzc2FnZScsXG4gICAgICAgICAgICAgICAgc2VuZGVyOiAndGhlbScsXG4gICAgICAgICAgICAgICAgY29udGVudDogc2FmZUpzb25QYXJzZSh2YWx1ZSksXG4gICAgICAgICAgICAgIH0gYXMgYW55O1xuICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAvLyDlpoLmnpxKU09O6Kej5p6Q5aSx6LSl77yM5YiZ55u05o6l5L2/55So5a2X56ym5LiyXG4gICAgICAgICAgICAgIG5ld0VudHJ5ID0ge1xuICAgICAgICAgICAgICAgIGlkOiBgYWktJHtEYXRlLm5vdygpfS0ke01hdGgucmFuZG9tKCl9YCxcbiAgICAgICAgICAgICAgICB0eXBlOiAnbWVzc2FnZScsXG4gICAgICAgICAgICAgICAgc2VuZGVyOiAndGhlbScsXG4gICAgICAgICAgICAgICAgY29udGVudDogdmFsdWUsXG4gICAgICAgICAgICAgIH0gYXMgYW55O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5ibG14TWFuYWdlci5hZGRFbnRyeShuZXdFbnRyeSk7XG4gICAgICAgICAgICBpZiAobmV3RW50cnkpIGVudHJpZXNGb3JBbmltYXRpb24ucHVzaChuZXdFbnRyeSk7XG4gICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgIGNhc2UgJ0NIQVInOlxuICAgICAgICAgICAgLy8g5YW85a655Y6f5aeL55qEQ0hBUuagvOW8j1xuICAgICAgICAgICAgdm9pY2VNYXRjaCA9IHZhbHVlLm1hdGNoKC9eXFxb6K+t6Z+zOlxccyooey4qfSlcXF0vKTtcbiAgICAgICAgICAgIHN0aWNrZXJNYXRjaCA9IHZhbHVlLm1hdGNoKC9eXFxb6KGo5oOFOlxccyooLiopXFxdLyk7XG4gICAgICAgICAgICBpbWFnZU1hdGNoID0gdmFsdWUubWF0Y2goL15cXFvlm77niYc6XFxzKiguKilcXF0vKTtcbiAgICAgICAgICAgIGxvY2F0aW9uTWF0Y2ggPSB2YWx1ZS5tYXRjaCgvXlxcW+S9jee9rjpcXHMqKC4qKVxcXS8pO1xuICAgICAgICAgICAgdHJhbnNmZXJNYXRjaCA9IHZhbHVlLm1hdGNoKC9eXFxb6L2s6LSmOlxccyooLiopXFxdLyk7XG4gICAgICAgICAgICBmaWxlTWF0Y2ggPSB2YWx1ZS5tYXRjaCgvXlxcW+aWh+S7tjpcXHMqKC4qKVxcXS8pO1xuICAgICAgICAgICAgZ2lmdE1hdGNoID0gdmFsdWUubWF0Y2goL15cXFvnpLzniak6XFxzKiguKilcXF0vKTtcblxuICAgICAgICAgICAgaWYgKHZvaWNlTWF0Y2gpIHtcbiAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBuZXdFbnRyeSA9IHtcbiAgICAgICAgICAgICAgICAgIGlkLFxuICAgICAgICAgICAgICAgICAgdHlwZTogJ3ZvaWNlJyxcbiAgICAgICAgICAgICAgICAgIHNlbmRlcjogJ3RoZW0nLFxuICAgICAgICAgICAgICAgICAgY29udGVudDogc2FmZUpzb25QYXJzZSh2b2ljZU1hdGNoWzFdKSB8fCB7IHRleHQ6ICcnLCBkdXJhdGlvbjogMCB9LFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdGYWlsZWQgdG8gcGFyc2Ugdm9pY2UgZGF0YTonLCB2b2ljZU1hdGNoWzFdLCBlKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIGlmIChzdGlja2VyTWF0Y2gpIHtcbiAgICAgICAgICAgICAgbmV3RW50cnkgPSB7XG4gICAgICAgICAgICAgICAgaWQsXG4gICAgICAgICAgICAgICAgdHlwZTogJ3N0aWNrZXInLFxuICAgICAgICAgICAgICAgIHNlbmRlcjogJ3RoZW0nLFxuICAgICAgICAgICAgICAgIGNvbnRlbnQ6IHN0aWNrZXJNYXRjaFsxXSxcbiAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoaW1hZ2VNYXRjaCkge1xuICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIG5ld0VudHJ5ID0ge1xuICAgICAgICAgICAgICAgICAgaWQsXG4gICAgICAgICAgICAgICAgICB0eXBlOiAnaW1hZ2UnLFxuICAgICAgICAgICAgICAgICAgc2VuZGVyOiAndGhlbScsXG4gICAgICAgICAgICAgICAgICBjb250ZW50OiBzYWZlSnNvblBhcnNlKGltYWdlTWF0Y2hbMV0pIHx8IHsgdHlwZTogJ3VybCcsIHZhbHVlOiAnJyB9LFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICBuZXdFbnRyeSA9IHtcbiAgICAgICAgICAgICAgICAgIGlkLFxuICAgICAgICAgICAgICAgICAgdHlwZTogJ2ltYWdlJyxcbiAgICAgICAgICAgICAgICAgIHNlbmRlcjogJ3RoZW0nLFxuICAgICAgICAgICAgICAgICAgY29udGVudDogeyB0eXBlOiAnZGVzYycsIHZhbHVlOiBpbWFnZU1hdGNoWzFdIH0sXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIGlmIChsb2NhdGlvbk1hdGNoKSB7XG4gICAgICAgICAgICAgIG5ld0VudHJ5ID0ge1xuICAgICAgICAgICAgICAgIGlkLFxuICAgICAgICAgICAgICAgIHR5cGU6ICdsb2NhdGlvbicsXG4gICAgICAgICAgICAgICAgc2VuZGVyOiAndGhlbScsXG4gICAgICAgICAgICAgICAgY29udGVudDogbG9jYXRpb25NYXRjaFsxXSxcbiAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAodHJhbnNmZXJNYXRjaCkge1xuICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIG5ld0VudHJ5ID0ge1xuICAgICAgICAgICAgICAgICAgaWQsXG4gICAgICAgICAgICAgICAgICB0eXBlOiAndHJhbnNmZXInLFxuICAgICAgICAgICAgICAgICAgc2VuZGVyOiAndGhlbScsXG4gICAgICAgICAgICAgICAgICBjb250ZW50OiB0cmFuc2Zlck1hdGNoWzFdLFxuICAgICAgICAgICAgICAgICAgZGF0YTogc2FmZUpzb25QYXJzZSh0cmFuc2Zlck1hdGNoWzFdKSB8fCB7IGFtb3VudDogMCwgbWVzc2FnZTogJycgfSxcbiAgICAgICAgICAgICAgICB9IGFzIGFueTtcbiAgICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0ZhaWxlZCB0byBwYXJzZSB0cmFuc2ZlciBkYXRhOicsIHRyYW5zZmVyTWF0Y2hbMV0sIGUpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGZpbGVNYXRjaCkge1xuICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIG5ld0VudHJ5ID0ge1xuICAgICAgICAgICAgICAgICAgaWQsXG4gICAgICAgICAgICAgICAgICB0eXBlOiAnZmlsZScsXG4gICAgICAgICAgICAgICAgICBzZW5kZXI6ICd0aGVtJyxcbiAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6IGZpbGVNYXRjaFsxXSxcbiAgICAgICAgICAgICAgICAgIGRhdGE6IHNhZmVKc29uUGFyc2UoZmlsZU1hdGNoWzFdKSB8fCB7IG5hbWU6ICcnLCBzaXplOiAwLCB1cmw6ICcnIH0sXG4gICAgICAgICAgICAgICAgfSBhcyBhbnk7XG4gICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdGYWlsZWQgdG8gcGFyc2UgZmlsZSBkYXRhOicsIGZpbGVNYXRjaFsxXSwgZSk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZ2lmdE1hdGNoKSB7XG4gICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgbmV3RW50cnkgPSB7XG4gICAgICAgICAgICAgICAgICBpZCxcbiAgICAgICAgICAgICAgICAgIHR5cGU6ICdnaWZ0JyxcbiAgICAgICAgICAgICAgICAgIHNlbmRlcjogJ3RoZW0nLFxuICAgICAgICAgICAgICAgICAgY29udGVudDogZ2lmdE1hdGNoWzFdLFxuICAgICAgICAgICAgICAgICAgZGF0YTogc2FmZUpzb25QYXJzZShnaWZ0TWF0Y2hbMV0pIHx8IHsgbmFtZTogJycsIHZhbHVlOiAwIH0sXG4gICAgICAgICAgICAgICAgfSBhcyBhbnk7XG4gICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdGYWlsZWQgdG8gcGFyc2UgZ2lmdCBkYXRhOicsIGdpZnRNYXRjaFsxXSwgZSk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIC8vIOe6r+aWh+acrOa2iOaBr1xuICAgICAgICAgICAgICBuZXdFbnRyeSA9IHtcbiAgICAgICAgICAgICAgICBpZCxcbiAgICAgICAgICAgICAgICB0eXBlOiAnbWVzc2FnZScsXG4gICAgICAgICAgICAgICAgc2VuZGVyOiAndGhlbScsXG4gICAgICAgICAgICAgICAgY29udGVudDogdmFsdWUsXG4gICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChuZXdFbnRyeSkge1xuICAgICAgICAgICAgICB0aGlzLmJsbXhNYW5hZ2VyLmFkZEVudHJ5KG5ld0VudHJ5KTtcbiAgICAgICAgICAgICAgZW50cmllc0ZvckFuaW1hdGlvbi5wdXNoKG5ld0VudHJ5KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgY2FzZSAnc3RpY2tlcic6XG4gICAgICAgICAgICBuZXdFbnRyeSA9IHtcbiAgICAgICAgICAgICAgaWQ6IGBhaS1zdGlja2VyLSR7RGF0ZS5ub3coKX0tJHtNYXRoLnJhbmRvbSgpfWAsXG4gICAgICAgICAgICAgIHR5cGU6ICdzdGlja2VyJyxcbiAgICAgICAgICAgICAgc2VuZGVyOiAndGhlbScsXG4gICAgICAgICAgICAgIGNvbnRlbnQ6IHNhZmVKc29uUGFyc2UodmFsdWUpLFxuICAgICAgICAgICAgfSBhcyBhbnk7XG4gICAgICAgICAgICB0aGlzLmJsbXhNYW5hZ2VyLmFkZEVudHJ5KG5ld0VudHJ5KTtcbiAgICAgICAgICAgIGlmIChuZXdFbnRyeSkgZW50cmllc0ZvckFuaW1hdGlvbi5wdXNoKG5ld0VudHJ5KTtcbiAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgY2FzZSAndm9pY2UnOlxuICAgICAgICAgICAgbmV3RW50cnkgPSB7XG4gICAgICAgICAgICAgIGlkOiBgYWktdm9pY2UtJHtEYXRlLm5vdygpfS0ke01hdGgucmFuZG9tKCl9YCxcbiAgICAgICAgICAgICAgdHlwZTogJ3ZvaWNlJyxcbiAgICAgICAgICAgICAgc2VuZGVyOiAndGhlbScsXG4gICAgICAgICAgICAgIGNvbnRlbnQ6IEpTT04ucGFyc2UodmFsdWUpLFxuICAgICAgICAgICAgfSBhcyBhbnk7XG4gICAgICAgICAgICB0aGlzLmJsbXhNYW5hZ2VyLmFkZEVudHJ5KG5ld0VudHJ5KTtcbiAgICAgICAgICAgIGlmIChuZXdFbnRyeSkgZW50cmllc0ZvckFuaW1hdGlvbi5wdXNoKG5ld0VudHJ5KTtcbiAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgY2FzZSAnaW1hZ2UnOlxuICAgICAgICAgICAgbmV3RW50cnkgPSB7XG4gICAgICAgICAgICAgIGlkOiBgYWktaW1hZ2UtJHtEYXRlLm5vdygpfS0ke01hdGgucmFuZG9tKCl9YCxcbiAgICAgICAgICAgICAgdHlwZTogJ2ltYWdlJyxcbiAgICAgICAgICAgICAgc2VuZGVyOiAndGhlbScsXG4gICAgICAgICAgICAgIGNvbnRlbnQ6IEpTT04ucGFyc2UodmFsdWUpLFxuICAgICAgICAgICAgfSBhcyBhbnk7XG4gICAgICAgICAgICB0aGlzLmJsbXhNYW5hZ2VyLmFkZEVudHJ5KG5ld0VudHJ5KTtcbiAgICAgICAgICAgIGlmIChuZXdFbnRyeSkgZW50cmllc0ZvckFuaW1hdGlvbi5wdXNoKG5ld0VudHJ5KTtcbiAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgY2FzZSAnbG9jYXRpb24nOlxuICAgICAgICAgICAgbmV3RW50cnkgPSB7XG4gICAgICAgICAgICAgIGlkOiBgYWktbG9jYXRpb24tJHtEYXRlLm5vdygpfS0ke01hdGgucmFuZG9tKCl9YCxcbiAgICAgICAgICAgICAgdHlwZTogJ2xvY2F0aW9uJyxcbiAgICAgICAgICAgICAgc2VuZGVyOiAndGhlbScsXG4gICAgICAgICAgICAgIGNvbnRlbnQ6IEpTT04ucGFyc2UodmFsdWUpLFxuICAgICAgICAgICAgfSBhcyBhbnk7XG4gICAgICAgICAgICB0aGlzLmJsbXhNYW5hZ2VyLmFkZEVudHJ5KG5ld0VudHJ5KTtcbiAgICAgICAgICAgIGlmIChuZXdFbnRyeSkgZW50cmllc0ZvckFuaW1hdGlvbi5wdXNoKG5ld0VudHJ5KTtcbiAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgY2FzZSAndHJhbnNmZXInOlxuICAgICAgICAgICAgbmV3RW50cnkgPSB7XG4gICAgICAgICAgICAgIGlkOiBgYWktdHJhbnNmZXItJHtEYXRlLm5vdygpfS0ke01hdGgucmFuZG9tKCl9YCxcbiAgICAgICAgICAgICAgdHlwZTogJ3RyYW5zZmVyJyxcbiAgICAgICAgICAgICAgc2VuZGVyOiAndGhlbScsXG4gICAgICAgICAgICAgIGNvbnRlbnQ6IEpTT04ucGFyc2UodmFsdWUpLFxuICAgICAgICAgICAgfSBhcyBhbnk7XG4gICAgICAgICAgICB0aGlzLmJsbXhNYW5hZ2VyLmFkZEVudHJ5KG5ld0VudHJ5KTtcbiAgICAgICAgICAgIGlmIChuZXdFbnRyeSkgZW50cmllc0ZvckFuaW1hdGlvbi5wdXNoKG5ld0VudHJ5KTtcbiAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgY2FzZSAnZmlsZSc6XG4gICAgICAgICAgICBuZXdFbnRyeSA9IHtcbiAgICAgICAgICAgICAgaWQ6IGBhaS1maWxlLSR7RGF0ZS5ub3coKX0tJHtNYXRoLnJhbmRvbSgpfWAsXG4gICAgICAgICAgICAgIHR5cGU6ICdmaWxlJyxcbiAgICAgICAgICAgICAgc2VuZGVyOiAndGhlbScsXG4gICAgICAgICAgICAgIGNvbnRlbnQ6IEpTT04ucGFyc2UodmFsdWUpLFxuICAgICAgICAgICAgfSBhcyBhbnk7XG4gICAgICAgICAgICB0aGlzLmJsbXhNYW5hZ2VyLmFkZEVudHJ5KG5ld0VudHJ5KTtcbiAgICAgICAgICAgIGlmIChuZXdFbnRyeSkgZW50cmllc0ZvckFuaW1hdGlvbi5wdXNoKG5ld0VudHJ5KTtcbiAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgY2FzZSAnZ2lmdCc6XG4gICAgICAgICAgICBuZXdFbnRyeSA9IHtcbiAgICAgICAgICAgICAgaWQ6IGBhaS1naWZ0LSR7RGF0ZS5ub3coKX0tJHtNYXRoLnJhbmRvbSgpfWAsXG4gICAgICAgICAgICAgIHR5cGU6ICdnaWZ0JyxcbiAgICAgICAgICAgICAgc2VuZGVyOiAndGhlbScsXG4gICAgICAgICAgICAgIGNvbnRlbnQ6IEpTT04ucGFyc2UodmFsdWUpLFxuICAgICAgICAgICAgfSBhcyBhbnk7XG4gICAgICAgICAgICB0aGlzLmJsbXhNYW5hZ2VyLmFkZEVudHJ5KG5ld0VudHJ5KTtcbiAgICAgICAgICAgIGlmIChuZXdFbnRyeSkgZW50cmllc0ZvckFuaW1hdGlvbi5wdXNoKG5ld0VudHJ5KTtcbiAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgY2FzZSAnUkVDQUxMJzoge1xuICAgICAgICAgICAgY29uc3QgcmVjYWxsRGF0YSA9IHNhZmVKc29uUGFyc2UodmFsdWUpO1xuICAgICAgICAgICAgY29uc3Qgc2VuZGVyVG9GaW5kID0gcmVjYWxsRGF0YS5zZW5kZXIgPT09ICdVU0VSJyA/ICdtZScgOiAndGhlbSc7XG4gICAgICAgICAgICBjb25zdCBlbnRyeVRvUmVjYWxsID0gdGhpcy5ibG14TWFuYWdlci5sb2dFbnRyaWVzXG4gICAgICAgICAgICAgIC5zbGljZSgpXG4gICAgICAgICAgICAgIC5yZXZlcnNlKClcbiAgICAgICAgICAgICAgLmZpbmQoXG4gICAgICAgICAgICAgICAgZSA9PlxuICAgICAgICAgICAgICAgICAgJ3NlbmRlcicgaW4gZSAmJiBlLnNlbmRlciA9PT0gc2VuZGVyVG9GaW5kICYmICdjb250ZW50JyBpbiBlICYmIGUuY29udGVudCA9PT0gcmVjYWxsRGF0YS50YXJnZXRfdGV4dCxcbiAgICAgICAgICAgICAgKSBhcyBhbnk7XG5cbiAgICAgICAgICAgIGlmIChlbnRyeVRvUmVjYWxsKSB7XG4gICAgICAgICAgICAgIC8vIOWIm+W7uuS4gOS4qlwi5oyH5LukXCLmnaHnm67nu5nliqjnlLvlh73mlbDlpITnkIZcbiAgICAgICAgICAgICAgZW50cmllc0ZvckFuaW1hdGlvbi5wdXNoKHtcbiAgICAgICAgICAgICAgICB0eXBlOiAncmVjYWxsX2luc3RydWN0aW9uJyxcbiAgICAgICAgICAgICAgICBjb250ZW50OiB7XG4gICAgICAgICAgICAgICAgICBvcmlnaW5hbEVudHJ5OiBlbnRyeVRvUmVjYWxsLFxuICAgICAgICAgICAgICAgICAgcmVjYWxsVGltZXN0YW1wOiByZWNhbGxEYXRhLnRpbWVzdGFtcCxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICB9IGFzIGFueSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBjYXNlICdFVkVOVF9MT0cnOlxuICAgICAgICAgIGNhc2UgJ1RJTUUnOlxuICAgICAgICAgICAgbmV3RW50cnkgPSB7XG4gICAgICAgICAgICAgIHR5cGU6IGtleSA9PT0gJ1RJTUUnID8gJ3RpbWUnIDogJ2V2ZW50JyxcbiAgICAgICAgICAgICAgY29udGVudDogc2FmZUpzb25QYXJzZSh2YWx1ZSksXG4gICAgICAgICAgICB9IGFzIGFueTtcbiAgICAgICAgICAgIHRoaXMuYmxteE1hbmFnZXIuYWRkRW50cnkobmV3RW50cnkpO1xuICAgICAgICAgICAgaWYgKG5ld0VudHJ5KSBlbnRyaWVzRm9yQW5pbWF0aW9uLnB1c2gobmV3RW50cnkpO1xuICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgbG9nZ2VyLndhcm4oJ0FpUmVzcG9uc2VNYW5hZ2VyJywgJ+acquefpeeahEFJ5ZON5bqU6ZSuJywgeyBrZXkgfSk7XG4gICAgICAgIH1cbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoYFtCTE1YXSBFcnJvciBwcm9jZXNzaW5nIEFJIHJlc3BvbnNlIGxpbmUgXCIke2xpbmV9XCI6YCwgZXJyb3IpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgLy8g5aaC5p6c5pyJ5paw5p2h55uu6KaB5Yqo55S75pi+56S6XG4gICAgaWYgKGVudHJpZXNGb3JBbmltYXRpb24ubGVuZ3RoID4gMCkge1xuICAgICAgYXdhaXQgdGhpcy5kaXNwbGF5QWlFbnRyaWVzU2VxdWVudGlhbGx5KGVudHJpZXNGb3JBbmltYXRpb24pO1xuXG4gICAgICAvLyDlpoLmnpzmnInmnIvlj4vlnIjnm7jlhbPnmoTmm7TmlrDvvIzmo4Dmn6XnlKjmiLfmmK/lkKblnKjmnIvlj4vlnIjop4blm75cbiAgICAgIGlmIChoYXNOZXdDaGFyTW9tZW50cyAmJiB0aGlzLm1vbWVudHNNYW5hZ2VyKSB7XG4gICAgICAgIC8vIOWPquacieW9k+eUqOaIt+S4jeWcqOaci+WPi+WciOinhuWbvuaXtuaJjeiuvue9rumAmuefpVxuICAgICAgICBjb25zdCB1c2VySW5Nb21lbnRzVmlldyA9ICQoJyNtb21lbnRzLXZpZXcnKS5oYXNDbGFzcygnYWN0aXZlJyk7XG4gICAgICAgIGlmICghdXNlckluTW9tZW50c1ZpZXcpIHtcbiAgICAgICAgICB0aGlzLm1vbWVudHNNYW5hZ2VyLnNldE1vbWVudE5vdGlmaWNhdGlvbih0cnVlKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyDlpoLmnpznlKjmiLfmraPlnKjmnIvlj4vlnIjop4blm77vvIzmm7TmlrDmnIDlkI7mn6XnnIvml7bpl7TmiLNcbiAgICAgICAgICB0aGlzLm1vbWVudHNNYW5hZ2VyLnNldExhc3RNb21lbnRWaWV3VGltZXN0YW1wKCk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgLy8g5pi+56S66ZSZ6K+v5raI5oGvXG4gIHByaXZhdGUgc2hvd0Vycm9yTWVzc2FnZShtZXNzYWdlOiBzdHJpbmcpOiB2b2lkIHtcbiAgICBjb25zdCAkZXJyb3JEaXYgPSAkKCc8ZGl2PicpLmFkZENsYXNzKCdhaS1lcnJvci1tZXNzYWdlJykudGV4dChtZXNzYWdlKTtcblxuICAgICQoJy53ZWNoYXQtYm9keScpLmFwcGVuZCgkZXJyb3JEaXYpO1xuXG4gICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAkZXJyb3JEaXYucmVtb3ZlKCk7XG4gICAgfSwgNTAwMCk7XG4gIH1cblxuICAvLyDmjInpobrluo/lsZXnpLpBSeadoeebrlxuICBhc3luYyBkaXNwbGF5QWlFbnRyaWVzU2VxdWVudGlhbGx5KGVudHJpZXM6IExvZ0VudHJ5W10pOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAvLyDlrprkuYnlk6rkupvnsbvlnovmmK9cIua2iOaBr1wi77yM6ZyA6KaB5pKt5pS+6L6T5YWl5Yqo55S7XG4gICAgY29uc3QgbWVzc2FnZUxpa2VUeXBlcyA9IFsnbWVzc2FnZScsICdzdGlja2VyJywgJ3ZvaWNlJywgJ2ltYWdlJywgJ2xvY2F0aW9uJywgJ3RyYW5zZmVyJywgJ2ZpbGUnLCAnZ2lmdCddO1xuICAgIGZvciAoY29uc3QgZW50cnkgb2YgZW50cmllcykge1xuICAgICAgLy8g5om+5Yiw5p2h55uu5Zyo5pel5b+X5Lit55qE57Si5byVXG4gICAgICBjb25zdCBlbnRyeUluZGV4ID0gdGhpcy5ibG14TWFuYWdlci5sb2dFbnRyaWVzLmZpbmRJbmRleChsb2cgPT4ge1xuICAgICAgICAvLyDlr7nkuo7mnIlJROeahOadoeebru+8jOmAmui/h0lE5Yy56YWNXG4gICAgICAgIGlmICgnaWQnIGluIGxvZyAmJiAnaWQnIGluIGVudHJ5ICYmIGxvZy5pZCA9PT0gZW50cnkuaWQpIHtcbiAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIOWvueS6juaci+WPi+WciOebuOWFs+adoeebru+8jOmAmui/h2tleeWSjOWGheWuueWMuemFjVxuICAgICAgICBpZiAoJ2tleScgaW4gbG9nICYmICdrZXknIGluIGVudHJ5ICYmIGxvZy5rZXkgPT09IGVudHJ5LmtleSkge1xuICAgICAgICAgIC8vIOWvueS6juaci+WPi+WciOWKqOaAgVxuICAgICAgICAgIGlmIChlbnRyeS5rZXkuaW5jbHVkZXMoJ19NT01FTlQnKSkge1xuICAgICAgICAgICAgcmV0dXJuICh3aW5kb3cgYXMgYW55KS5fLmlzRXF1YWwoKGxvZyBhcyBhbnkpLmRhdGEsIChlbnRyeSBhcyBhbnkpLmRhdGEpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIC8vIOWvueS6jueCuei1nuWSjOivhOiuulxuICAgICAgICAgIGlmIChlbnRyeS5rZXkuaW5jbHVkZXMoJ19MSUtFJykgfHwgZW50cnkua2V5LmluY2x1ZGVzKCdfQ09NTUVOVCcpKSB7XG4gICAgICAgICAgICByZXR1cm4gKHdpbmRvdyBhcyBhbnkpLl8uaXNFcXVhbCgobG9nIGFzIGFueSkuZGF0YSwgKGVudHJ5IGFzIGFueSkuZGF0YSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLy8g5a+55LqO5rKh5pyJSUTnmoTmnaHnm67vvIjlpoJUSU1F44CBRVZFTlRfTE9H77yJ77yM6YCa6L+H5YaF5a655Yy56YWNXG4gICAgICAgIGlmIChcbiAgICAgICAgICAndHlwZScgaW4gbG9nICYmXG4gICAgICAgICAgJ3R5cGUnIGluIGVudHJ5ICYmXG4gICAgICAgICAgKGxvZy50eXBlID09PSAndGltZScgfHwgbG9nLnR5cGUgPT09ICdldmVudCcpICYmXG4gICAgICAgICAgbG9nLnR5cGUgPT09IGVudHJ5LnR5cGUgJiZcbiAgICAgICAgICAod2luZG93IGFzIGFueSkuXy5pc0VxdWFsKGxvZy5jb250ZW50LCAoZW50cnkgYXMgYW55KS5jb250ZW50KVxuICAgICAgICApIHtcbiAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIOWvueS6jua2iOaBr+exu+Wei+adoeebru+8jOmAmui/h+exu+Wei+OAgeWPkemAgeiAheWSjOWGheWuueWMuemFjVxuICAgICAgICBpZiAoXG4gICAgICAgICAgJ3R5cGUnIGluIGxvZyAmJlxuICAgICAgICAgICd0eXBlJyBpbiBlbnRyeSAmJlxuICAgICAgICAgICdzZW5kZXInIGluIGxvZyAmJlxuICAgICAgICAgICdzZW5kZXInIGluIGVudHJ5ICYmXG4gICAgICAgICAgJ2NvbnRlbnQnIGluIGxvZyAmJlxuICAgICAgICAgICdjb250ZW50JyBpbiBlbnRyeSAmJlxuICAgICAgICAgIGxvZy50eXBlID09PSBlbnRyeS50eXBlICYmXG4gICAgICAgICAgbG9nLnNlbmRlciA9PT0gZW50cnkuc2VuZGVyXG4gICAgICAgICkge1xuICAgICAgICAgIC8vIOWvueS6jueugOWNleexu+Wei+eahOWGheWuue+8jOebtOaOpeavlOi+g1xuICAgICAgICAgIGlmICh0eXBlb2YgbG9nLmNvbnRlbnQgPT09ICdzdHJpbmcnICYmIHR5cGVvZiAoZW50cnkgYXMgYW55KS5jb250ZW50ID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgcmV0dXJuIGxvZy5jb250ZW50ID09PSAoZW50cnkgYXMgYW55KS5jb250ZW50O1xuICAgICAgICAgIH1cbiAgICAgICAgICAvLyDlr7nkuo7lpI3mnYLnsbvlnovnmoTlhoXlrrnvvIzkvb/nlKhsb2Rhc2jmt7Hluqbmr5TovoNcbiAgICAgICAgICByZXR1cm4gKHdpbmRvdyBhcyBhbnkpLl8uaXNFcXVhbChsb2cuY29udGVudCwgKGVudHJ5IGFzIGFueSkuY29udGVudCk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9KTtcblxuICAgICAgaWYgKGVudHJ5SW5kZXggIT09IC0xKSB7XG4gICAgICAgIGxvZ2dlci5kZWJ1ZygnQWlSZXNwb25zZU1hbmFnZXInLCAn5om+5Yiw5bey5a2Y5Zyo55qE5p2h55uuJywge1xuICAgICAgICAgIGVudHJ5SW5kZXgsXG4gICAgICAgICAgZW50cnlUeXBlOiAndHlwZScgaW4gZW50cnkgPyBlbnRyeS50eXBlIDogJ3Vua25vd24nLFxuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgLy8g5Yik5pat5p2h55uu57G75Z6L5piv5ZCm5piv6ZyA6KaB5Yqo55S755qEXCLmtojmga9cIlxuICAgICAgaWYgKCd0eXBlJyBpbiBlbnRyeSAmJiBtZXNzYWdlTGlrZVR5cGVzLmluY2x1ZGVzKGVudHJ5LnR5cGUpKSB7XG4gICAgICAgIC8vIOaYr+a2iOaBr++8jOaJp+ihjOWujOaVtOeahOWKqOeUu+a1geeoi1xuICAgICAgICB0aGlzLnVpUmVuZGVyZXIuc2hvd1R5cGluZ0luZGljYXRvcigpO1xuXG4gICAgICAgIGNvbnN0IG1lc3NhZ2VUZXh0ID1cbiAgICAgICAgICBlbnRyeS50eXBlID09PSAnbWVzc2FnZScgPyBlbnRyeS5jb250ZW50IDogZW50cnkudHlwZSA9PT0gJ3ZvaWNlJyA/IChlbnRyeS5jb250ZW50IGFzIGFueSkudGV4dCA6ICcnO1xuXG4gICAgICAgIGNvbnN0IGRlbGF5ID0gdGhpcy51aVJlbmRlcmVyLmNhbGN1bGF0ZVR5cGluZ0RlbGF5KG1lc3NhZ2VUZXh0KTtcbiAgICAgICAgYXdhaXQgbmV3IFByb21pc2UocmVzb2x2ZSA9PiBzZXRUaW1lb3V0KHJlc29sdmUsIGRlbGF5KSk7XG5cbiAgICAgICAgdGhpcy51aVJlbmRlcmVyLmhpZGVUeXBpbmdJbmRpY2F0b3IoKTtcbiAgICAgICAgdGhpcy51aVJlbmRlcmVyLnJlbmRlckVudHJ5KGVudHJ5LCBlbnRyeUluZGV4ICE9PSAtMSA/IGVudHJ5SW5kZXggOiB1bmRlZmluZWQsIHRydWUpO1xuICAgICAgfSBlbHNlIGlmICgndHlwZScgaW4gZW50cnkgJiYgKGVudHJ5LnR5cGUgYXMgYW55KSA9PT0gJ3JlY2FsbF9pbnN0cnVjdGlvbicpIHtcbiAgICAgICAgLy8g5aSE55CG5pKk5Zue5oyH5Luk77yM5L2/55So57G75Z6L5pat6KiAXG4gICAgICAgIGNvbnN0IHsgb3JpZ2luYWxFbnRyeSwgcmVjYWxsVGltZXN0YW1wIH0gPSAoZW50cnkgYXMgYW55KS5jb250ZW50O1xuXG4gICAgICAgIC8vIOWcqOWGheWtmOS4reaJvuWIsOi/meS4quadoeebruW5tuagh+iusFxuICAgICAgICBjb25zdCBlbnRyeVRvVXBkYXRlID0gdGhpcy5ibG14TWFuYWdlci5sb2dFbnRyaWVzLmZpbmQobG9nID0+ICdpZCcgaW4gbG9nICYmIGxvZy5pZCA9PT0gb3JpZ2luYWxFbnRyeS5pZCk7XG4gICAgICAgIGlmIChlbnRyeVRvVXBkYXRlKSB7XG4gICAgICAgICAgKGVudHJ5VG9VcGRhdGUgYXMgYW55KS5yZWNhbGxlZCA9IHRydWU7XG4gICAgICAgICAgKGVudHJ5VG9VcGRhdGUgYXMgYW55KS5yZWNhbGxlZF9jb250ZW50ID0gb3JpZ2luYWxFbnRyeS5jb250ZW50O1xuICAgICAgICAgIChlbnRyeVRvVXBkYXRlIGFzIGFueSkucmVjYWxsZWRfdGltZXN0YW1wID0gcmVjYWxsVGltZXN0YW1wO1xuXG4gICAgICAgICAgLy8g6I635Y+W5p2h55uu5Zyo5pel5b+X5Lit55qE57Si5byV77yM5Lul5L6/5Zyo5Yig6Zmk5qih5byP5LiL5pi+56S65Yig6Zmk5oyJ6ZKuXG4gICAgICAgICAgY29uc3QgcmVjYWxsRW50cnlJbmRleCA9IHRoaXMuYmxteE1hbmFnZXIubG9nRW50cmllcy5pbmRleE9mKGVudHJ5VG9VcGRhdGUpO1xuXG4gICAgICAgICAgLy8g5ZyoVUnkuIrmib7liLDlr7nlupTnmoRET03lhYPntKDlubbmm7/mjaLlroNcbiAgICAgICAgICBjb25zdCAkZWxlbWVudFRvUmVwbGFjZSA9ICQoYFtkYXRhLW1lc3NhZ2UtaWQ9XCIke29yaWdpbmFsRW50cnkuaWR9XCJdYCk7XG4gICAgICAgICAgaWYgKCRlbGVtZW50VG9SZXBsYWNlLmxlbmd0aCkge1xuICAgICAgICAgICAgLy8g5L2/55So5LiA5Liq5bCP55qE5bu26L+f77yM6K6p5pKk5Zue5Yqo5L2c55yL6LW35p2l5pu06Ieq54S2XG4gICAgICAgICAgICBhd2FpdCBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHNldFRpbWVvdXQocmVzb2x2ZSwgNTAwKSk7XG4gICAgICAgICAgICB0aGlzLnVpUmVuZGVyZXIucmVuZGVyUmVjYWxsTm90aWNlKGVudHJ5VG9VcGRhdGUsICRlbGVtZW50VG9SZXBsYWNlWzBdIGFzIEhUTUxFbGVtZW50LCByZWNhbGxFbnRyeUluZGV4KTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIOaYr+ezu+e7n+S6i+S7tiAo5aaCIEVWRU5UX0xPRywgVElNRSnvvIznm7TmjqXmmL7npLpcbiAgICAgICAgdGhpcy51aVJlbmRlcmVyLnJlbmRlckVudHJ5KGVudHJ5LCBlbnRyeUluZGV4ICE9PSAtMSA/IGVudHJ5SW5kZXggOiB1bmRlZmluZWQsIHRydWUpO1xuICAgICAgfVxuXG4gICAgICAvLyDlnKjmiYDmnInmnaHnm67kuYvpl7Tpg73lop7liqDkuIDkuKrnn63mmoLnmoTlgZzpob/vvIzorqnoioLlpY/mm7ToiJLpgIJcbiAgICAgIGF3YWl0IG5ldyBQcm9taXNlKHJlc29sdmUgPT4gc2V0VGltZW91dChyZXNvbHZlLCA4MDApKTtcbiAgICB9XG5cbiAgICAvLyDmmL7npLrlrozmiYDmnInmnaHnm67lkI7liLfmlrDml7bpl7TmiLPvvIznoa7kv53ml6XmnJ/moLzlvI/mraPnoa5cbiAgICB0aGlzLnVpUmVuZGVyZXIucmVmcmVzaEFsbFRpbWVzdGFtcHMoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiDmuIXnkIbotYTmupDvvIzpmLLmraLlhoXlrZjms4TmvI9cbiAgICovXG4gIGNsZWFudXAoKTogdm9pZCB7XG4gICAgdGhpcy5ldmVudE1hbmFnZXIuY2xlYW51cCgpO1xuICAgIGNvbnNvbGUubG9nKCdbQWlSZXNwb25zZU1hbmFnZXJdIOi1hOa6kOW3sua4heeQhicpO1xuICB9XG5cbiAgLy8g6I635Y+W5pyA5paw55qEQUnljp/lp4vlk43lupRcbiAgZ2V0TGF0ZXN0QWlSYXdSZXNwb25zZSgpOiBzdHJpbmcge1xuICAgIHJldHVybiB0aGlzLmxhdGVzdEFpUmF3UmVzcG9uc2U7XG4gIH1cblxuICAvLyDojrflj5bmnIDmlrDlj5HpgIHnmoTmj5DnpLror41cbiAgZ2V0TGF0ZXN0U2VudFByb21wdCgpOiBzdHJpbmcge1xuICAgIHJldHVybiB0aGlzLmxhdGVzdFNlbnRQcm9tcHQ7XG4gIH1cblxuICAvLyDojrflj5bljp/lp4tBSeWTjeW6lFxuICBnZXRSYXdBaVJlc3BvbnNlKCk6IHN0cmluZyB7XG4gICAgcmV0dXJuIHRoaXMucmF3QWlSZXNwb25zZTtcbiAgfVxuXG4gIC8vIOiOt+WPluWujOaVtOaPkOekuuivjVxuICBnZXRGdWxsUHJvbXB0KCk6IHN0cmluZyB7XG4gICAgcmV0dXJuIHRoaXMuZnVsbFByb21wdDtcbiAgfVxufVxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/同层手机/ai-response-manager.ts\n")},"./src/同层手机/app-controller.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AppController: () => (/* binding */ AppController)\n/* harmony export */ });\n/* harmony import */ var _ai_response_manager__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./ai-response-manager */ \"./src/同层手机/ai-response-manager.ts\");\n/* harmony import */ var _config_manager__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./config-manager */ \"./src/同层手机/config-manager.ts\");\n/* harmony import */ var _debug_data__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./debug-data */ \"./src/同层手机/debug-data.ts\");\n/* harmony import */ var _dialog_manager__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./dialog-manager */ \"./src/同层手机/dialog-manager.ts\");\n/* harmony import */ var _input_handler__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./input-handler */ \"./src/同层手机/input-handler.ts\");\n/* harmony import */ var _moments_manager__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./moments-manager */ \"./src/同层手机/moments-manager.ts\");\n/* harmony import */ var _script__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./script */ \"./src/同层手机/script.ts\");\n/* harmony import */ var _theme_editor__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./theme-editor */ \"./src/同层手机/theme-editor.ts\");\n/* harmony import */ var _theme_manager__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./theme-manager */ \"./src/同层手机/theme-manager.ts\");\n/* harmony import */ var _ui_manager__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./ui-manager */ \"./src/同层手机/ui-manager.ts\");\n/* harmony import */ var _ui_renderer__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./ui-renderer */ \"./src/同层手机/ui-renderer.ts\");\n/* harmony import */ var _wallpaper_controller__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./wallpaper-controller */ \"./src/同层手机/wallpaper-controller.ts\");\n\n\n // 导入调试数据\n\n\n\n\n\n\n\n\n\n/**\n * 应用主控制器\n *\n * 重构后的主控制器专注于：\n * 1. 模块初始化和协调\n * 2. 核心业务流程编排\n * 3. 模块间通信协调\n * 4. 对外接口统一管理\n *\n * 具体功能已拆分到各专门模块：\n * - ConfigManager: 配置管理\n * - UIManager: 界面管理\n * - MomentsManager: 朋友圈管理\n * - AiResponseManager: AI响应处理\n * - ThemeEditor: 主题编辑\n * - InputHandler: 输入处理\n * - WallpaperController: 壁纸管理\n */\nclass AppController {\n    blmxManager;\n    uiRenderer;\n    eventHandler;\n    themeManager;\n    wallpaperController;\n    configManager;\n    momentsManager;\n    aiResponseManager;\n    themeEditor;\n    inputHandler;\n    uiManager;\n    dialogManager;\n    // 用户消息队列，模拟原版机制\n    userMessageQueue = [];\n    // 朋友圈通知状态管理\n    hasMomentNotifications() {\n        return this.momentsManager.hasMomentNotifications();\n    }\n    setMomentNotification(value) {\n        this.momentsManager.setMomentNotification(value);\n    }\n    constructor() {\n        // 初始化配置管理器\n        this.configManager = new _config_manager__WEBPACK_IMPORTED_MODULE_1__.ConfigManager();\n    }\n    // 初始化应用\n    async initialize() {\n        try {\n            // console.log('[BLMX] Fetching SillyTavern info...');\n            window.currentGameDate = new Date();\n            // 初始化主题管理器\n            this.themeManager = new _theme_manager__WEBPACK_IMPORTED_MODULE_8__.ThemeManager();\n            this.wallpaperController = new _wallpaper_controller__WEBPACK_IMPORTED_MODULE_11__.WallpaperController(this.themeManager);\n            // 确保应用当前主题的默认壁纸，但不覆盖用户已保存的壁纸设置\n            const currentTheme = this.themeManager.getCurrentTheme();\n            this.wallpaperController.initializeWallpapers(currentTheme);\n            const charData = await (0,_script__WEBPACK_IMPORTED_MODULE_6__.getTavernHelper)().getCharData();\n            // 使用配置管理器加载配置\n            await this.configManager.loadFromStorage(charData);\n            // 如果没有保存的角色头像，获取默认头像\n            let config = this.configManager.getConfig();\n            if (!config.avatars.char) {\n                const charAvatarPath = await (0,_script__WEBPACK_IMPORTED_MODULE_6__.getTavernHelper)().getCharAvatarPath();\n                this.configManager.updateAvatar('char', charAvatarPath);\n                config = this.configManager.getConfig(); // 重新获取更新后的配置\n            }\n            // 更新UI元素 - 使用jQuery\n            $('.contact-name').text(this.getDisplayName('char'));\n            $('#moments-user-name').text(this.getDisplayName('user'));\n            $('#moments-user-avatar').attr('src', config.avatars.user);\n            // 加载朋友圈封面图片 - 使用jQuery\n            const savedCoverPhoto = this.configManager.getSavedCoverPhoto();\n            if (savedCoverPhoto) {\n                $('#moments-cover-photo').attr('src', savedCoverPhoto);\n            }\n            // 加载个性签名 - 使用jQuery\n            const savedSignature = this.configManager.getSavedSignature();\n            $('#user-signature-display').text(savedSignature);\n            // 初始化BLMX协议\n            this.blmxManager = new _script__WEBPACK_IMPORTED_MODULE_6__.BLMX_Protocol(config.currentCharId);\n            await this.blmxManager.initialize();\n            // 加载调试数据（仅在开发模式下）\n            if (window.BLMX_DEV_MODE) {\n                (0,_debug_data__WEBPACK_IMPORTED_MODULE_2__.loadDebugData)(this.blmxManager);\n            }\n            // 首先初始化EventHandler，因为其他模块可能依赖它\n            const EventHandler = window.EventHandlerClass;\n            this.eventHandler = new EventHandler('#wechat-input-field', '#send-btn', '#plus-btn', this.blmxManager, this, null, // uiRenderer 稍后设置\n            {\n                getDisplayName: this.getDisplayName.bind(this),\n                stageAndDisplayEntry: this.stageAndDisplayEntry.bind(this),\n                triggerAiResponse: this.triggerAiResponse.bind(this),\n                updateFooterButtonsState: this.updateFooterButtonsState.bind(this),\n                renderChatHistory: this.renderChatHistory.bind(this),\n                renderMomentsFeed: this.renderMomentsFeed.bind(this),\n                togglePanel: this.togglePanel.bind(this),\n                findStickerUrlByName: this.findStickerUrlByName.bind(this),\n            });\n            // 初始化UI渲染器\n            this.uiRenderer = new _ui_renderer__WEBPACK_IMPORTED_MODULE_10__.UIRenderer('.wechat-body', config.avatars, {\n                getDisplayName: this.getDisplayName.bind(this),\n                findStickerUrlByName: this.findStickerUrlByName.bind(this),\n                onTransferAccept: this.handleTransferAccept.bind(this),\n                onGiftAction: this.handleGiftAction.bind(this),\n                onRecallMessage: this.handleMessageRecall.bind(this),\n                isMessageInQueue: this.isMessageInQueue.bind(this),\n            });\n            // 更新EventHandler中的uiRenderer引用\n            this.eventHandler.setUIRenderer(this.uiRenderer);\n            // 初始化朋友圈管理器\n            this.momentsManager = new _moments_manager__WEBPACK_IMPORTED_MODULE_5__.MomentsManager(this.blmxManager, this.configManager, this.uiRenderer);\n            // 初始化AI响应管理器\n            this.aiResponseManager = new _ai_response_manager__WEBPACK_IMPORTED_MODULE_0__.AiResponseManager(this.blmxManager, this.uiRenderer, this.eventHandler, this.momentsManager);\n            // 初始化主题编辑器\n            this.themeEditor = new _theme_editor__WEBPACK_IMPORTED_MODULE_7__.ThemeEditor(this.themeManager, () => {\n                this.applyWallpapers();\n            });\n            // 初始化输入处理器\n            this.inputHandler = new _input_handler__WEBPACK_IMPORTED_MODULE_4__.InputHandler(this.configManager, this.stageAndDisplayEntry.bind(this), this.updateFooterButtonsState.bind(this));\n            // 初始化UI管理器\n            this.uiManager = new _ui_manager__WEBPACK_IMPORTED_MODULE_9__.UIManager(this.configManager, this.blmxManager.addEntry.bind(this.blmxManager), this.uiRenderer.renderEntry.bind(this.uiRenderer));\n            // 初始化对话框管理器\n            this.dialogManager = _dialog_manager__WEBPACK_IMPORTED_MODULE_3__.DialogManager.getInstance();\n            // 应用壁纸\n            this.applyWallpapers();\n            // 渲染初始界面\n            this.renderChatHistory();\n            this.renderMomentsFeed();\n            // 设置输入框提示文字\n            this.uiManager.setupInputPlaceholder(this.getDisplayName('char'));\n            // 更新底部按钮状态\n            this.updateFooterButtonsState();\n            // 初始化UI后设置主题选择器\n            this.setupThemeSelector();\n            // 初始化手机尺寸调整功能\n            this.uiManager.setupPhoneSizeAdjustment();\n            // 初始化表情包尺寸控制\n            this.uiManager.setupStickerSizeControl();\n            // 显示当前版本\n            this.uiManager.displayAppVersion();\n            // 检查是否显示版本更新通知\n            this.uiManager.checkVersionUpdateNotification();\n            // 初始化朋友圈通知状态\n            // 通知状态由 MomentsManager 管理\n            // 事件监听器现在由 AiResponseManager 管理\n            // console.log('[BLMX] Initialization complete!');\n        }\n        catch (error) {\n            // console.error('[BLMX] Failed to initialize:', error);\n        }\n    }\n    // 核心数据访问方法\n    getDisplayName(type) {\n        return this.configManager.getDisplayName(type);\n    }\n    findStickerUrlByName(name) {\n        return this.configManager.findStickerUrlByName(name);\n    }\n    // 壁纸管理\n    applyWallpapers() {\n        this.wallpaperController.applyWallpapers();\n    }\n    changeWallpaper(viewType) {\n        this.wallpaperController.changeWallpaper(viewType);\n    }\n    // 界面渲染协调\n    renderChatHistory() {\n        this.uiRenderer.clearChat();\n        if (!this.blmxManager)\n            return;\n        // 先渲染主日志中的消息\n        this.blmxManager.logEntries.forEach((entry, index) => {\n            if (entry.recalled) {\n                this.uiRenderer.renderRecallNotice(entry, null, index);\n            }\n            else {\n                this.uiRenderer.renderEntry(entry, index, false);\n            }\n        });\n        // 再渲染队列中的消息（模拟原版机制）\n        this.userMessageQueue.forEach((entry, queueIndex) => {\n            if (entry.recalled) {\n                this.uiRenderer.renderRecallNotice(entry, null, queueIndex);\n            }\n            else {\n                this.uiRenderer.renderEntry(entry, queueIndex, false);\n            }\n        });\n        this.uiRenderer.refreshAllTimestamps();\n        this.uiManager.scrollToBottom();\n    }\n    renderMomentsFeed() {\n        this.momentsManager.renderMomentsFeed();\n    }\n    // 暂存并显示条目\n    stageAndDisplayEntry(entry) {\n        if ('type' in entry) {\n            if (entry.type === 'event') {\n                // 为event类型的条目添加到日志中并渲染\n                this.blmxManager.addEntry(entry);\n                const entryIndex = this.blmxManager.logEntries.length - 1;\n                this.uiRenderer.renderEntry(entry, entryIndex, true);\n                // 如果是用户发送的事件，则标记为需要AI响应\n                if ('sender' in entry && entry.sender === 'me') {\n                    this.eventHandler.setHasPendingNotifications(true);\n                }\n                return;\n            }\n            else if (entry.type === 'time') {\n                // 跳过time类型处理\n                return;\n            }\n            if (!entry.id) {\n                entry.id = 'msg-' + Date.now() + Math.random();\n            }\n            // 处理图片上传\n            if (entry.type === 'image' &&\n                'content' in entry &&\n                entry.content.type === 'url' &&\n                typeof entry.content.value === 'string' &&\n                entry.content.value.startsWith('data:image')) {\n                // 使用类型断言\n                entry.content.isNewForAI = true;\n            }\n            // 如果是用户消息，先添加到队列（模拟原版机制）\n            if ('sender' in entry && entry.sender === 'me') {\n                this.userMessageQueue.push(entry);\n                this.eventHandler.setHasPendingNotifications(true);\n                // console.log('[BLMX] 用户发送了消息，添加到队列');\n                // 渲染条目（使用队列中的索引）\n                const queueIndex = this.userMessageQueue.length - 1;\n                this.uiRenderer.renderEntry(entry, queueIndex, true);\n            }\n            else {\n                // 非用户消息直接添加到主日志\n                this.blmxManager.addEntry(entry);\n                const entryIndex = this.blmxManager.logEntries.length - 1;\n                this.uiRenderer.renderEntry(entry, entryIndex, true);\n            }\n            this.updateFooterButtonsState();\n        }\n    }\n    // AI响应协调\n    async triggerAiResponse(immediate = false) {\n        // 检查是否有待处理的消息（队列机制）\n        const hasQueuedMessages = this.userMessageQueue.length > 0;\n        // 如果没有立即触发标志，且没有队列消息和通知，则不触发\n        if (!immediate && !hasQueuedMessages && !this.eventHandler.hasNotifications) {\n            return;\n        }\n        // 在触发AI响应前，将队列中的消息移到主日志（模拟原版机制）\n        if (hasQueuedMessages) {\n            // console.log('[BLMX] 将队列中的消息移到主日志，队列长度:', this.userMessageQueue.length);\n            // 复制队列中的消息\n            const messagesToProcess = [...this.userMessageQueue];\n            // 将消息添加到主日志\n            messagesToProcess.forEach(entry => {\n                if (entry.type === 'image' && 'content' in entry && entry.content.isNewForAI) {\n                    entry.content.value = `[用户发送的图片]`;\n                    delete entry.content.isNewForAI;\n                }\n                this.blmxManager.addEntry(entry);\n            });\n            // 清空队列（模拟原版的 userMessageQueue = []）\n            this.userMessageQueue = [];\n            // console.log('[BLMX] 队列已清空，消息已移到主日志');\n        }\n        await this.aiResponseManager.triggerAiResponse(immediate);\n    }\n    // UI控制协调\n    updateFooterButtonsState() {\n        this.uiManager.updateFooterButtonsState(this.eventHandler.hasNotifications);\n    }\n    togglePanel(panelToShow) {\n        this.uiManager.togglePanel(panelToShow);\n    }\n    // 导航到指定视图\n    navigateTo(viewName) {\n        const views = {\n            home: '#app-homescreen',\n            wechat: '#wechat-view',\n            moments: '#moments-view',\n            settings: '#settings-view',\n        };\n        try {\n            // 首先尝试使用jQuery\n            if (typeof $ !== 'undefined' && typeof jQuery !== 'undefined') {\n                // 使用jQuery隐藏所有视图并显示目标视图\n                $('.app-view').removeClass('active');\n                $(views[viewName]).addClass('active');\n                // console.log(`[BLMX] 使用jQuery导航到: ${viewName}`);\n            }\n            else {\n                // 备用方案：使用原生DOM API\n                // console.log(`[BLMX] jQuery未加载，使用原生DOM API导航到: ${viewName}`);\n                document.querySelectorAll('.app-view').forEach(view => {\n                    view.classList.remove('active');\n                });\n                const targetView = document.querySelector(views[viewName]);\n                if (targetView) {\n                    targetView.classList.add('active');\n                }\n                else {\n                    console.error(`[BLMX] 找不到目标视图: ${views[viewName]}`);\n                }\n            }\n            // 当导航到朋友圈视图时，更新通知状态并重新渲染\n            if (viewName === 'moments') {\n                // 更新朋友圈通知状态\n                this.setMomentNotification(false);\n                // 重新渲染朋友圈内容\n                this.renderMomentsFeed();\n            }\n        }\n        catch (error) {\n            console.error(`[BLMX] 导航错误:`, error);\n            // 最后的备用方案，使用最基本的DOM操作\n            try {\n                const allViews = document.querySelectorAll('.app-view');\n                for (let i = 0; i < allViews.length; i++) {\n                    allViews[i].classList.remove('active');\n                }\n                const selector = views[viewName];\n                const targetElement = document.querySelector(selector);\n                if (targetElement) {\n                    targetElement.classList.add('active');\n                    // console.log(`[BLMX] 使用基本DOM API导航到: ${viewName}`);\n                }\n            }\n            catch (e) {\n                console.error(`[BLMX] 最终导航失败:`, e);\n            }\n        }\n    }\n    async updateAvatar(avatarType) {\n        const config = this.configManager.getConfig();\n        const currentUrl = config.avatars[avatarType] || '';\n        const displayName = this.getDisplayName(avatarType);\n        const newUrl = await this.dialogManager.showInputDialog('更换头像', `${displayName}头像URL`, currentUrl, '请输入头像图片链接', 'url');\n        if (newUrl) {\n            this.configManager.updateAvatar(avatarType, newUrl);\n            await this.dialogManager.alert('头像已更新！', '更新成功');\n            this.renderChatHistory();\n            this.renderMomentsFeed();\n            if (avatarType === 'user') {\n                $('#moments-user-avatar').attr('src', newUrl);\n            }\n        }\n    }\n    async updateCharRemark() {\n        const oldDisplayName = this.getDisplayName('char');\n        const config = this.configManager.getConfig();\n        const newRemark = await this.dialogManager.prompt('请输入新的备注:', config.charRemark, '修改备注');\n        if (newRemark !== null) {\n            this.configManager.updateCharRemark(newRemark);\n            const newDisplayName = this.getDisplayName('char');\n            $('#contact-name-header').text(newDisplayName);\n            $('#wechat-input-field').attr('placeholder', this.configManager.getSavedInputPlaceholder() || `与 ${newDisplayName} 对话...`);\n            $('#moments-feed-list .post-author-name').each(function () {\n                if ($(this).text() === oldDisplayName)\n                    $(this).text(newDisplayName);\n            });\n            $('.recall-notice-text').each(function () {\n                const text = $(this).text();\n                if (text && text.includes(`\"${oldDisplayName}\"`)) {\n                    $(this).text(`\"${newDisplayName}\" 撤回了一条消息`);\n                }\n            });\n            await this.dialogManager.alert('备注已更新！', '更新成功');\n        }\n    }\n    async updateUserName() {\n        const oldName = this.getDisplayName('user');\n        const newName = await this.dialogManager.showInputDialog('更改名字', '请输入你的新名字', oldName, '输入新名字...');\n        if (newName && newName.trim() !== '' && newName !== oldName) {\n            this.configManager.updateUserName(newName);\n            $('#moments-user-name').text(newName);\n            // 询问用户是否要发送朋友圈通知AI\n            const shouldNotify = await this.dialogManager.confirm('是否要发送朋友圈动态通知AI你更改了名字？', '朋友圈通知');\n            if (shouldNotify) {\n                this.momentsManager.notifyMomentChange('name', oldName, newName);\n                this.eventHandler.setHasPendingNotifications(true);\n            }\n            await this.dialogManager.alert('名字已更新！', '更新成功');\n        }\n    }\n    async updateSignature() {\n        const currentSignature = this.configManager.getSavedSignature();\n        const newSignature = await this.dialogManager.showInputDialog('个性签名', '请输入你的个性签名', currentSignature, '输入个性签名...');\n        if (newSignature !== null && newSignature !== currentSignature) {\n            this.configManager.setSignature(newSignature);\n            $('#user-signature-display').text(newSignature);\n            // 询问用户是否要发送朋友圈通知AI\n            const shouldNotify = await this.dialogManager.confirm('是否要发送朋友圈动态通知AI你更改了个性签名？', '朋友圈通知');\n            if (shouldNotify) {\n                this.momentsManager.notifyMomentChange('signature', currentSignature, newSignature);\n                this.eventHandler.setHasPendingNotifications(true);\n            }\n        }\n    }\n    async updateCoverPhoto() {\n        const currentCover = this.configManager.getSavedCoverPhoto() || '';\n        const newCover = await this.dialogManager.showInputDialog('朋友圈封面', '朋友圈封面URL', currentCover, '请输入封面图片链接', 'url');\n        if (newCover) {\n            this.configManager.setCoverPhoto(newCover);\n            $('#moments-cover-photo').attr('src', newCover);\n        }\n    }\n    // 输入处理协调\n    async handleTransferAccept(data) {\n        await this.inputHandler.handleTransferAccept(data);\n    }\n    async handleGiftAction(data) {\n        await this.inputHandler.handleGiftAction(data);\n        this.eventHandler.setHasPendingNotifications(true);\n    }\n    // 检查消息是否在队列中（模拟原版逻辑）\n    isMessageInQueue(messageId) {\n        return this.userMessageQueue.some(entry => entry.id === messageId);\n    }\n    // 处理消息撤回（仅限文字消息）\n    async handleMessageRecall(entry) {\n        try {\n            // 只允许撤回文字消息\n            if (entry.type !== 'message') {\n                console.warn('只能撤回文字消息，当前消息类型:', entry.type);\n                return;\n            }\n            // 查找消息在队列中的索引\n            const queueIndex = this.userMessageQueue.findIndex(queueEntry => queueEntry.id === entry.id);\n            if (queueIndex === -1) {\n                console.warn('未找到要撤回的消息:', entry.id);\n                return;\n            }\n            const targetEntry = this.userMessageQueue[queueIndex];\n            // 保存原始内容到recalled_content\n            targetEntry.recalled_content = targetEntry.content;\n            // 设置撤回时间戳\n            targetEntry.recalled_timestamp = new Date().toISOString();\n            // 标记消息为已撤回\n            targetEntry.recalled = true;\n            // 重新渲染聊天历史\n            this.renderChatHistory();\n            // console.log('[BLMX] 文字消息已撤回:', entry.id);\n        }\n        catch (error) {\n            console.error('撤回消息时出错:', error);\n        }\n    }\n    // AI响应数据访问\n    getLatestAiRawResponse() {\n        return this.aiResponseManager.getLatestAiRawResponse();\n    }\n    getLatestSentPrompt() {\n        return this.aiResponseManager.getLatestSentPrompt();\n    }\n    getRawAiResponse() {\n        return this.aiResponseManager.getRawAiResponse();\n    }\n    getFullPrompt() {\n        return this.aiResponseManager.getFullPrompt();\n    }\n    // 主题管理协调\n    setupThemeSelector() {\n        this.themeEditor.setupThemeSelector();\n        this.setupThemeEditorEvents();\n    }\n    setupThemeEditorEvents() {\n        const closeBtn = document.getElementById('close-theme-editor');\n        const saveBtn = document.getElementById('save-theme-btn');\n        const resetBtn = document.getElementById('reset-theme-btn');\n        const customThemeBtn = document.getElementById('custom-theme-btn');\n        if (closeBtn) {\n            closeBtn.addEventListener('click', () => this.themeEditor.closeThemeEditor());\n        }\n        if (saveBtn) {\n            saveBtn.addEventListener('click', () => this.themeEditor.saveCustomTheme());\n        }\n        if (resetBtn) {\n            resetBtn.addEventListener('click', () => this.themeEditor.resetThemeEditor());\n        }\n        if (customThemeBtn) {\n            customThemeBtn.addEventListener('click', () => this.themeEditor.openThemeEditor());\n        }\n    }\n    openThemeEditor() {\n        this.themeEditor.openThemeEditor();\n    }\n    closeThemeEditor() {\n        this.themeEditor.closeThemeEditor();\n    }\n    // 辅助方法：HEX转RGBA\n    hexToRgba(hex, alpha) {\n        const r = parseInt(hex.slice(1, 3), 16);\n        const g = parseInt(hex.slice(3, 5), 16);\n        const b = parseInt(hex.slice(5, 7), 16);\n        return `rgba(${r}, ${g}, ${b}, ${alpha})`;\n    }\n    // 调试功能协调\n    addTestEntry(entryType) {\n        (0,_debug_data__WEBPACK_IMPORTED_MODULE_2__.addTestEntry)(this.blmxManager, entryType);\n    }\n    clearDebugData() {\n        (0,_debug_data__WEBPACK_IMPORTED_MODULE_2__.clearDebugData)(this.blmxManager);\n    }\n    showTestEntryTypes() {\n        (0,_debug_data__WEBPACK_IMPORTED_MODULE_2__.showTestEntryTypes)();\n    }\n    showDebugInfo() {\n        (0,_debug_data__WEBPACK_IMPORTED_MODULE_2__.showDebugInfo)(this);\n    }\n    // 处理消息撤回的朋友圈通知\n    notifyRecallViaMoments(sender, targetText) {\n        // 询问用户是否要发送朋友圈通知AI\n        if (confirm('是否要发送朋友圈动态通知AI你撤回了消息？')) {\n            this.momentsManager.notifyRecallViaMoments(sender, targetText);\n            this.eventHandler.setHasPendingNotifications(true);\n        }\n    }\n    /**\n     * 清理所有资源，防止内存泄漏\n     */\n    cleanup() {\n        // console.log('[AppController] 开始清理资源...');\n        // 清理各个管理器的资源\n        if (this.aiResponseManager && typeof this.aiResponseManager.cleanup === 'function') {\n            this.aiResponseManager.cleanup();\n        }\n        if (this.uiRenderer && typeof this.uiRenderer.cleanup === 'function') {\n            this.uiRenderer.cleanup();\n        }\n        // console.log('[AppController] 资源清理完成');\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMv5ZCM5bGC5omL5py6L2FwcC1jb250cm9sbGVyLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBMEQ7QUFDVDtBQUM2RCxDQUFDLFNBQVM7QUFDdkU7QUFDRjtBQUNJO0FBQzRCO0FBQ2xDO0FBQ0U7QUFFTjtBQUNFO0FBQ2tCO0FBRTdEOzs7Ozs7Ozs7Ozs7Ozs7OztHQWlCRztBQUNJLE1BQU0sYUFBYTtJQUNoQixXQUFXLENBQWlCO0lBQzVCLFVBQVUsQ0FBYztJQUN4QixZQUFZLENBQWlCO0lBQzdCLFlBQVksQ0FBZ0I7SUFDNUIsbUJBQW1CLENBQXVCO0lBQzFDLGFBQWEsQ0FBaUI7SUFDOUIsY0FBYyxDQUFrQjtJQUNoQyxpQkFBaUIsQ0FBcUI7SUFDdEMsV0FBVyxDQUFlO0lBQzFCLFlBQVksQ0FBZ0I7SUFDNUIsU0FBUyxDQUFhO0lBQ3RCLGFBQWEsQ0FBaUI7SUFFdEMsZ0JBQWdCO0lBQ1IsZ0JBQWdCLEdBQWdCLEVBQUUsQ0FBQztJQUUzQyxZQUFZO0lBQ1osc0JBQXNCO1FBQ3BCLE9BQU8sSUFBSSxDQUFDLGNBQWMsQ0FBQyxzQkFBc0IsRUFBRSxDQUFDO0lBQ3RELENBQUM7SUFFRCxxQkFBcUIsQ0FBQyxLQUFjO1FBQ2xDLElBQUksQ0FBQyxjQUFjLENBQUMscUJBQXFCLENBQUMsS0FBSyxDQUFDLENBQUM7SUFDbkQsQ0FBQztJQUVEO1FBQ0UsV0FBVztRQUNYLElBQUksQ0FBQyxhQUFhLEdBQUcsSUFBSSwwREFBYSxFQUFFLENBQUM7SUFDM0MsQ0FBQztJQUVELFFBQVE7SUFDUixLQUFLLENBQUMsVUFBVTtRQUNkLElBQUksQ0FBQztZQUNILHNEQUFzRDtZQUN0RCxNQUFNLENBQUMsZUFBZSxHQUFHLElBQUksSUFBSSxFQUFFLENBQUM7WUFFcEMsV0FBVztZQUNYLElBQUksQ0FBQyxZQUFZLEdBQUcsSUFBSSx3REFBWSxFQUFFLENBQUM7WUFDdkMsSUFBSSxDQUFDLG1CQUFtQixHQUFHLElBQUksdUVBQW1CLENBQUMsSUFB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UUFDWiwyREFBYyxDQUFDLElBQUksQ0FBQyxXQUFXLENBQUMsQ0FBQztJQUNuQyxDQUFDO0lBRUQsa0JBQWtCO1FBQ2hCLCtEQUFrQixFQUFFLENBQUM7SUFDdkIsQ0FBQztJQUVELGFBQWE7UUFDWCwwREFBYSxDQUFDLElBQUksQ0FBQyxDQUFDO0lBQ3RCLENBQUM7SUFFRCxlQUFlO0lBQ2Ysc0JBQXNCLENBQUMsTUFBdUIsRUFBRSxVQUFrQjtRQUNoRSxtQkFBbUI7UUFDbkIsSUFBSSxPQUFPLENBQUMsdUJBQXVCLENBQUMsRUFBRSxDQUFDO1lBQ3JDLElBQUksQ0FBQyxjQUFjLENBQUMsc0JBQXNCLENBQUMsTUFBTSxFQUFFLFVBQVUsQ0FBQyxDQUFDO1lBQy9ELElBQUksQ0FBQyxZQUFZLENBQUMsMEJBQTBCLENBQUMsSUFBSSxDQUFDLENBQUM7UUFDckQsQ0FBQztJQUNILENBQUM7SUFFRDs7T0FFRztJQUNILE9BQU87UUFDTCw0Q0FBNEM7UUFFNUMsYUFBYTtRQUNiLElBQUksSUFBSSxDQUFDLGlCQUFpQixJQUFJLE9BQU8sSUFBSSxDQUFDLGlCQUFpQixDQUFDLE9BQU8sS0FBSyxVQUFVLEVBQUUsQ0FBQztZQUNuRixJQUFJLENBQUMsaUJBQWlCLENBQUMsT0FBTyxFQUFFLENBQUM7UUFDbkMsQ0FBQztRQUVELElBQUksSUFBSSxDQUFDLFVBQVUsSUFBSSxPQUFPLElBQUksQ0FBQyxVQUFVLENBQUMsT0FBTyxLQUFLLFVBQVUsRUFBRSxDQUFDO1lBQ3JFLElBQUksQ0FBQyxVQUFVLENBQUMsT0FBTyxFQUFFLENBQUM7UUFDNUIsQ0FBQztRQUVELHlDQUF5QztJQUMzQyxDQUFDO0NBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly90YXZlcm5faGVscGVyX3RlbXBsYXRlLy4vc3JjL+WQjOWxguaJi+acui9hcHAtY29udHJvbGxlci50cz8iXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQWlSZXNwb25zZU1hbmFnZXIgfSBmcm9tICcuL2FpLXJlc3BvbnNlLW1hbmFnZXInO1xuaW1wb3J0IHsgQ29uZmlnTWFuYWdlciB9IGZyb20gJy4vY29uZmlnLW1hbmFnZXInO1xuaW1wb3J0IHsgYWRkVGVzdEVudHJ5LCBjbGVhckRlYnVnRGF0YSwgbG9hZERlYnVnRGF0YSwgc2hvd0RlYnVnSW5mbywgc2hvd1Rlc3RFbnRyeVR5cGVzIH0gZnJvbSAnLi9kZWJ1Zy1kYXRhJzsgLy8g5a+85YWl6LCD6K+V5pWw5o2uXG5pbXBvcnQgeyBEaWFsb2dNYW5hZ2VyIH0gZnJvbSAnLi9kaWFsb2ctbWFuYWdlcic7XG5pbXBvcnQgeyBJbnB1dEhhbmRsZXIgfSBmcm9tICcuL2lucHV0LWhhbmRsZXInO1xuaW1wb3J0IHsgTW9tZW50c01hbmFnZXIgfSBmcm9tICcuL21vbWVudHMtbWFuYWdlcic7XG5pbXBvcnQgeyBCTE1YX1Byb3RvY29sLCBDaGF0RW50cnksIGdldFRhdmVybkhlbHBlciwgTG9nRW50cnkgfSBmcm9tICcuL3NjcmlwdCc7XG5pbXBvcnQgeyBUaGVtZUVkaXRvciB9IGZyb20gJy4vdGhlbWUtZWRpdG9yJztcbmltcG9ydCB7IFRoZW1lTWFuYWdlciB9IGZyb20gJy4vdGhlbWUtbWFuYWdlcic7XG5pbXBvcnQgeyBJQXBwQ29udHJvbGxlciwgSUV2ZW50SGFuZGxlciB9IGZyb20gJy4vdHlwZXMnO1xuaW1wb3J0IHsgVUlNYW5hZ2VyIH0gZnJvbSAnLi91aS1tYW5hZ2VyJztcbmltcG9ydCB7IFVJUmVuZGVyZXIgfSBmcm9tICcuL3VpLXJlbmRlcmVyJztcbmltcG9ydCB7IFdhbGxwYXBlckNvbnRyb2xsZXIgfSBmcm9tICcuL3dhbGxwYXBlci1jb250cm9sbGVyJztcblxuLyoqXG4gKiDlupTnlKjkuLvmjqfliLblmahcbiAqXG4gKiDph43mnoTlkI7nmoTkuLvmjqfliLblmajkuJPms6jkuo7vvJpcbiAqIDEuIOaooeWdl+WIneWni+WMluWSjOWNj+iwg1xuICogMi4g5qC45b+D5Lia5Yqh5rWB56iL57yW5o6SXG4gKiAzLiDmqKHlnZfpl7TpgJrkv6HljY/osINcbiAqIDQuIOWvueWkluaOpeWPo+e7n+S4gOeuoeeQhlxuICpcbiAqIOWFt+S9k+WKn+iDveW3suaLhuWIhuWIsOWQhOS4k+mXqOaooeWdl++8mlxuICogLSBDb25maWdNYW5hZ2VyOiDphY3nva7nrqHnkIZcbiAqIC0gVUlNYW5hZ2VyOiDnlYzpnaLnrqHnkIZcbiAqIC0gTW9tZW50c01hbmFnZXI6IOaci+WPi+WciOeuoeeQhlxuICogLSBBaVJlc3BvbnNlTWFuYWdlcjogQUnlk43lupTlpITnkIZcbiAqIC0gVGhlbWVFZGl0b3I6IOS4u+mimOe8lui+kVxuICogLSBJbnB1dEhhbmRsZXI6IOi+k+WFpeWkhOeQhlxuICogLSBXYWxscGFwZXJDb250cm9sbGVyOiDlo4HnurjnrqHnkIZcbiAqL1xuZXhwb3J0IGNsYXNzIEFwcENvbnRyb2xsZXIgaW1wbGVtZW50cyBJQXBwQ29udHJvbGxlciB7XG4gIHByaXZhdGUgYmxteE1hbmFnZXIhOiBCTE1YX1Byb3RvY29sO1xuICBwcml2YXRlIHVpUmVuZGVyZXIhOiBVSVJlbmRlcmVyO1xuICBwcml2YXRlIGV2ZW50SGFuZGxlciE6IElFdmVudEhhbmRsZXI7XG4gIHByaXZhdGUgdGhlbWVNYW5hZ2VyITogVGhlbWVNYW5hZ2VyO1xuICBwcml2YXRlIHdhbGxwYXBlckNvbnRyb2xsZXIhOiBXYWxscGFwZXJDb250cm9sbGVyO1xuICBwcml2YXRlIGNvbmZpZ01hbmFnZXIhOiBDb25maWdNYW5hZ2VyO1xuICBwcml2YXRlIG1vbWVudHNNYW5hZ2VyITogTW9tZW50c01hbmFnZXI7XG4gIHByaXZhdGUgYWlSZXNwb25zZU1hbmFnZXIhOiBBaVJlc3BvbnNlTWFuYWdlcjtcbiAgcHJpdmF0ZSB0aGVtZUVkaXRvciE6IFRoZW1lRWRpdG9yO1xuICBwcml2YXRlIGlucHV0SGFuZGxlciE6IElucHV0SGFuZGxlcjtcbiAgcHJpdmF0ZSB1aU1hbmFnZXIhOiBVSU1hbmFnZXI7XG4gIHByaXZhdGUgZGlhbG9nTWFuYWdlciE6IERpYWxvZ01hbmFnZXI7XG5cbiAgLy8g55So5oi35raI5oGv6Zif5YiX77yM5qih5ouf5Y6f54mI5py65Yi2XG4gIHByaXZhdGUgdXNlck1lc3NhZ2VRdWV1ZTogQ2hhdEVudHJ5W10gPSBbXTtcblxuICAvLyDmnIvlj4vlnIjpgJrnn6XnirbmgIHnrqHnkIZcbiAgaGFzTW9tZW50Tm90aWZpY2F0aW9ucygpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy5tb21lbnRzTWFuYWdlci5oYXNNb21lbnROb3RpZmljYXRpb25zKCk7XG4gIH1cblxuICBzZXRNb21lbnROb3RpZmljYXRpb24odmFsdWU6IGJvb2xlYW4pOiB2b2lkIHtcbiAgICB0aGlzLm1vbWVudHNNYW5hZ2VyLnNldE1vbWVudE5vdGlmaWNhdGlvbih2YWx1ZSk7XG4gIH1cblxuICBjb25zdHJ1Y3RvcigpIHtcbiAgICAvLyDliJ3lp4vljJbphY3nva7nrqHnkIblmahcbiAgICB0aGlzLmNvbmZpZ01hbmFnZXIgPSBuZXcgQ29uZmlnTWFuYWdlcigpO1xuICB9XG5cbiAgLy8g5Yid5aeL5YyW5bqU55SoXG4gIGFzeW5jIGluaXRpYWxpemUoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgdHJ5IHtcbiAgICAgIC8vIGNvbnNvbGUubG9nKCdbQkxNWF0gRmV0Y2hpbmcgU2lsbHlUYXZlcm4gaW5mby4uLicpO1xuICAgICAgd2luZG93LmN1cnJlbnRHYW1lRGF0ZSA9IG5ldyBEYXRlKCk7XG5cbiAgICAgIC8vIOWIneWni+WMluS4u+mimOeuoeeQhuWZqFxuICAgICAgdGhpcy50aGVtZU1hbmFnZXIgPSBuZXcgVGhlbWVNYW5hZ2VyKCk7XG4gICAgICB0aGlzLndhbGxwYXBlckNvbnRyb2xsZXIgPSBuZXcgV2FsbHBhcGVyQ29udHJvbGxlcih0aGlzLnRoZW1lTWFuYWdlcik7XG5cbiAgICAgIC8vIOehruS/neW6lOeUqOW9k+WJjeS4u+mimOeahOm7mOiupOWjgee6uO+8jOS9huS4jeimhueblueUqOaIt+W3suS/neWtmOeahOWjgee6uOiuvue9rlxuICAgICAgY29uc3QgY3VycmVudFRoZW1lID0gdGhpcy50aGVtZU1hbmFnZXIuZ2V0Q3VycmVudFRoZW1lKCk7XG4gICAgICB0aGlzLndhbGxwYXBlckNvbnRyb2xsZXIuaW5pdGlhbGl6ZVdhbGxwYXBlcnMoY3VycmVudFRoZW1lKTtcblxuICAgICAgY29uc3QgY2hhckRhdGEgPSBhd2FpdCBnZXRUYXZlcm5IZWxwZXIoKS5nZXRDaGFyRGF0YSgpO1xuXG4gICAgICAvLyDkvb/nlKjphY3nva7nrqHnkIblmajliqDovb3phY3nva5cbiAgICAgIGF3YWl0IHRoaXMuY29uZmlnTWFuYWdlci5sb2FkRnJvbVN0b3JhZ2UoY2hhckRhdGEpO1xuXG4gICAgICAvLyDlpoLmnpzmsqHmnInkv53lrZjnmoTop5LoibLlpLTlg4/vvIzojrflj5bpu5jorqTlpLTlg49cbiAgICAgIGxldCBjb25maWcgPSB0aGlzLmNvbmZpZ01hbmFnZXIuZ2V0Q29uZmlnKCk7XG4gICAgICBpZiAoIWNvbmZpZy5hdmF0YXJzLmNoYXIpIHtcbiAgICAgICAgY29uc3QgY2hhckF2YXRhclBhdGggPSBhd2FpdCBnZXRUYXZlcm5IZWxwZXIoKS5nZXRDaGFyQXZhdGFyUGF0aCgpO1xuICAgICAgICB0aGlzLmNvbmZpZ01hbmFnZXIudXBkYXRlQXZhdGFyKCdjaGFyJywgY2hhckF2YXRhclBhdGgpO1xuICAgICAgICBjb25maWcgPSB0aGlzLmNvbmZpZ01hbmFnZXIuZ2V0Q29uZmlnKCk7IC8vIOmHjeaWsOiOt+WPluabtOaWsOWQjueahOmFjee9rlxuICAgICAgfVxuXG4gICAgICAvLyDmm7TmlrBVSeWFg+e0oCAtIOS9v+eUqGpRdWVyeVxuICAgICAgJCgnLmNvbnRhY3QtbmFtZScpLnRleHQodGhpcy5nZXREaXNwbGF5TmFtZSgnY2hhcicpKTtcbiAgICAgICQoJyNtb21lbnRzLXVzZXItbmFtZScpLnRleHQodGhpcy5nZXREaXNwbGF5TmFtZSgndXNlcicpKTtcbiAgICAgICQoJyNtb21lbnRzLXVzZXItYXZhdGFyJykuYXR0cignc3JjJywgY29uZmlnLmF2YXRhcnMudXNlcik7XG5cbiAgICAgIC8vIOWKoOi9veaci+WPi+WciOWwgemdouWbvueJhyAtIOS9v+eUqGpRdWVyeVxuICAgICAgY29uc3Qgc2F2ZWRDb3ZlclBob3RvID0gdGhpcy5jb25maWdNYW5hZ2VyLmdldFNhdmVkQ292ZXJQaG90bygpO1xuICAgICAgaWYgKHNhdmVkQ292ZXJQaG90bykge1xuICAgICAgICAkKCcjbW9tZW50cy1jb3Zlci1waG90bycpLmF0dHIoJ3NyYycsIHNhdmVkQ292ZXJQaG90byk7XG4gICAgICB9XG5cbiAgICAgIC8vIOWKoOi9veS4quaAp+etvuWQjSAtIOS9v+eUqGpRdWVyeVxuICAgICAgY29uc3Qgc2F2ZWRTaWduYXR1cmUgPSB0aGlzLmNvbmZpZ01hbmFnZXIuZ2V0U2F2ZWRTaWduYXR1cmUoKTtcbiAgICAgICQoJyN1c2VyLXNpZ25hdHVyZS1kaXNwbGF5JykudGV4dChzYXZlZFNpZ25hdHVyZSk7XG5cbiAgICAgIC8vIOWIneWni+WMlkJMTVjljY/orq5cbiAgICAgIHRoaXMuYmxteE1hbmFnZXIgPSBuZXcgQkxNWF9Qcm90b2NvbChjb25maWcuY3VycmVudENoYXJJZCk7XG4gICAgICBhd2FpdCB0aGlzLmJsbXhNYW5hZ2VyLmluaXRpYWxpemUoKTtcblxuICAgICAgLy8g5Yqg6L296LCD6K+V5pWw5o2u77yI5LuF5Zyo5byA5Y+R5qih5byP5LiL77yJXG4gICAgICBpZiAoKHdpbmRvdyBhcyBhbnkpLkJMTVhfREVWX01PREUpIHtcbiAgICAgICAgbG9hZERlYnVnRGF0YSh0aGlzLmJsbXhNYW5hZ2VyKTtcbiAgICAgIH1cblxuICAgICAgLy8g6aaW5YWI5Yid5aeL5YyWRXZlbnRIYW5kbGVy77yM5Zug5Li65YW25LuW5qih5Z2X5Y+v6IO95L6d6LWW5a6DXG4gICAgICBjb25zdCBFdmVudEhhbmRsZXIgPSAod2luZG93IGFzIGFueSkuRXZlbnRIYW5kbGVyQ2xhc3M7XG4gICAgICB0aGlzLmV2ZW50SGFuZGxlciA9IG5ldyBFdmVudEhhbmRsZXIoXG4gICAgICAgICcjd2VjaGF0LWlucHV0LWZpZWxkJyxcbiAgICAgICAgJyNzZW5kLWJ0bicsXG4gICAgICAgICcjcGx1cy1idG4nLFxuICAgICAgICB0aGlzLmJsbXhNYW5hZ2VyLFxuICAgICAgICB0aGlzLFxuICAgICAgICBudWxsLCAvLyB1aVJlbmRlcmVyIOeojeWQjuiuvue9rlxuICAgICAgICB7XG4gICAgICAgICAgZ2V0RGlzcGxheU5hbWU6IHRoaXMuZ2V0RGlzcGxheU5hbWUuYmluZCh0aGlzKSxcbiAgICAgICAgICBzdGFnZUFuZERpc3BsYXlFbnRyeTogdGhpcy5zdGFnZUFuZERpc3BsYXlFbnRyeS5iaW5kKHRoaXMpLFxuICAgICAgICAgIHRyaWdnZXJBaVJlc3BvbnNlOiB0aGlzLnRyaWdnZXJBaVJlc3BvbnNlLmJpbmQodGhpcyksXG4gICAgICAgICAgdXBkYXRlRm9vdGVyQnV0dG9uc1N0YXRlOiB0aGlzLnVwZGF0ZUZvb3RlckJ1dHRvbnNTdGF0ZS5iaW5kKHRoaXMpLFxuICAgICAgICAgIHJlbmRlckNoYXRIaXN0b3J5OiB0aGlzLnJlbmRlckNoYXRIaXN0b3J5LmJpbmQodGhpcyksXG4gICAgICAgICAgcmVuZGVyTW9tZW50c0ZlZWQ6IHRoaXMucmVuZGVyTW9tZW50c0ZlZWQuYmluZCh0aGlzKSxcbiAgICAgICAgICB0b2dnbGVQYW5lbDogdGhpcy50b2dnbGVQYW5lbC5iaW5kKHRoaXMpLFxuICAgICAgICAgIGZpbmRTdGlja2VyVXJsQnlOYW1lOiB0aGlzLmZpbmRTdGlja2VyVXJsQnlOYW1lLmJpbmQodGhpcyksXG4gICAgICAgIH0sXG4gICAgICApO1xuXG4gICAgICAvLyDliJ3lp4vljJZVSea4suafk+WZqFxuICAgICAgdGhpcy51aVJlbmRlcmVyID0gbmV3IFVJUmVuZGVyZXIoJy53ZWNoYXQtYm9keScsIGNvbmZpZy5hdmF0YXJzLCB7XG4gICAgICAgIGdldERpc3BsYXlOYW1lOiB0aGlzLmdldERpc3BsYXlOYW1lLmJpbmQodGhpcyksXG4gICAgICAgIGZpbmRTdGlja2VyVXJsQnlOYW1lOiB0aGlzLmZpbmRTdGlja2VyVXJsQnlOYW1lLmJpbmQodGhpcyksXG4gICAgICAgIG9uVHJhbnNmZXJBY2NlcHQ6IHRoaXMuaGFuZGxlVHJhbnNmZXJBY2NlcHQuYmluZCh0aGlzKSxcbiAgICAgICAgb25HaWZ0QWN0aW9uOiB0aGlzLmhhbmRsZUdpZnRBY3Rpb24uYmluZCh0aGlzKSxcbiAgICAgICAgb25SZWNhbGxNZXNzYWdlOiB0aGlzLmhhbmRsZU1lc3NhZ2VSZWNhbGwuYmluZCh0aGlzKSxcbiAgICAgICAgaXNNZXNzYWdlSW5RdWV1ZTogdGhpcy5pc01lc3NhZ2VJblF1ZXVlLmJpbmQodGhpcyksXG4gICAgICB9KTtcblxuICAgICAgLy8g5pu05pawRXZlbnRIYW5kbGVy5Lit55qEdWlSZW5kZXJlcuW8leeUqFxuICAgICAgdGhpcy5ldmVudEhhbmRsZXIuc2V0VUlSZW5kZXJlcih0aGlzLnVpUmVuZGVyZXIpO1xuXG4gICAgICAvLyDliJ3lp4vljJbmnIvlj4vlnIjnrqHnkIblmahcbiAgICAgIHRoaXMubW9tZW50c01hbmFnZXIgPSBuZXcgTW9tZW50c01hbmFnZXIodGhpcy5ibG14TWFuYWdlciwgdGhpcy5jb25maWdNYW5hZ2VyLCB0aGlzLnVpUmVuZGVyZXIpO1xuXG4gICAgICAvLyDliJ3lp4vljJZBSeWTjeW6lOeuoeeQhuWZqFxuICAgICAgdGhpcy5haVJlc3BvbnNlTWFuYWdlciA9IG5ldyBBaVJlc3BvbnNlTWFuYWdlcihcbiAgICAgICAgdGhpcy5ibG14TWFuYWdlcixcbiAgICAgICAgdGhpcy51aVJlbmRlcmVyLFxuICAgICAgICB0aGlzLmV2ZW50SGFuZGxlcixcbiAgICAgICAgdGhpcy5tb21lbnRzTWFuYWdlcixcbiAgICAgICk7XG5cbiAgICAgIC8vIOWIneWni+WMluS4u+mimOe8lui+keWZqFxuICAgICAgdGhpcy50aGVtZUVkaXRvciA9IG5ldyBUaGVtZUVkaXRvcih0aGlzLnRoZW1lTWFuYWdlciwgKCkgPT4ge1xuICAgICAgICB0aGlzLmFwcGx5V2FsbHBhcGVycygpO1xuICAgICAgfSk7XG5cbiAgICAgIC8vIOWIneWni+WMlui+k+WFpeWkhOeQhuWZqFxuICAgICAgdGhpcy5pbnB1dEhhbmRsZXIgPSBuZXcgSW5wdXRIYW5kbGVyKFxuICAgICAgICB0aGlzLmNvbmZpZ01hbmFnZXIsXG4gICAgICAgIHRoaXMuc3RhZ2VBbmREaXNwbGF5RW50cnkuYmluZCh0aGlzKSxcbiAgICAgICAgdGhpcy51cGRhdGVGb290ZXJCdXR0b25zU3RhdGUuYmluZCh0aGlzKSxcbiAgICAgICk7XG5cbiAgICAgIC8vIOWIneWni+WMllVJ566h55CG5ZmoXG4gICAgICB0aGlzLnVpTWFuYWdlciA9IG5ldyBVSU1hbmFnZXIoXG4gICAgICAgIHRoaXMuY29uZmlnTWFuYWdlcixcbiAgICAgICAgdGhpcy5ibG14TWFuYWdlci5hZGRFbnRyeS5iaW5kKHRoaXMuYmxteE1hbmFnZXIpLFxuICAgICAgICB0aGlzLnVpUmVuZGVyZXIucmVuZGVyRW50cnkuYmluZCh0aGlzLnVpUmVuZGVyZXIpLFxuICAgICAgKTtcblxuICAgICAgLy8g5Yid5aeL5YyW5a+56K+d5qGG566h55CG5ZmoXG4gICAgICB0aGlzLmRpYWxvZ01hbmFnZXIgPSBEaWFsb2dNYW5hZ2VyLmdldEluc3RhbmNlKCk7XG5cbiAgICAgIC8vIOW6lOeUqOWjgee6uFxuICAgICAgdGhpcy5hcHBseVdhbGxwYXBlcnMoKTtcblxuICAgICAgLy8g5riy5p+T5Yid5aeL55WM6Z2iXG4gICAgICB0aGlzLnJlbmRlckNoYXRIaXN0b3J5KCk7XG4gICAgICB0aGlzLnJlbmRlck1vbWVudHNGZWVkKCk7XG5cbiAgICAgIC8vIOiuvue9rui+k+WFpeahhuaPkOekuuaWh+Wtl1xuICAgICAgdGhpcy51aU1hbmFnZXIuc2V0dXBJbnB1dFBsYWNlaG9sZGVyKHRoaXMuZ2V0RGlzcGxheU5hbWUoJ2NoYXInKSk7XG5cbiAgICAgIC8vIOabtOaWsOW6lemDqOaMiemSrueKtuaAgVxuICAgICAgdGhpcy51cGRhdGVGb290ZXJCdXR0b25zU3RhdGUoKTtcblxuICAgICAgLy8g5Yid5aeL5YyWVUnlkI7orr7nva7kuLvpopjpgInmi6nlmahcbiAgICAgIHRoaXMuc2V0dXBUaGVtZVNlbGVjdG9yKCk7XG5cbiAgICAgIC8vIOWIneWni+WMluaJi+acuuWwuuWvuOiwg+aVtOWKn+iDvVxuICAgICAgdGhpcy51aU1hbmFnZXIuc2V0dXBQaG9uZVNpemVBZGp1c3RtZW50KCk7XG5cbiAgICAgIC8vIOWIneWni+WMluihqOaDheWMheWwuuWvuOaOp+WItlxuICAgICAgdGhpcy51aU1hbmFnZXIuc2V0dXBTdGlja2VyU2l6ZUNvbnRyb2woKTtcblxuICAgICAgLy8g5pi+56S65b2T5YmN54mI5pysXG4gICAgICB0aGlzLnVpTWFuYWdlci5kaXNwbGF5QXBwVmVyc2lvbigpO1xuXG4gICAgICAvLyDmo4Dmn6XmmK/lkKbmmL7npLrniYjmnKzmm7TmlrDpgJrnn6VcbiAgICAgIHRoaXMudWlNYW5hZ2VyLmNoZWNrVmVyc2lvblVwZGF0ZU5vdGlmaWNhdGlvbigpO1xuXG4gICAgICAvLyDliJ3lp4vljJbmnIvlj4vlnIjpgJrnn6XnirbmgIFcbiAgICAgIC8vIOmAmuefpeeKtuaAgeeUsSBNb21lbnRzTWFuYWdlciDnrqHnkIZcblxuICAgICAgLy8g5LqL5Lu255uR5ZCs5Zmo546w5Zyo55SxIEFpUmVzcG9uc2VNYW5hZ2VyIOeuoeeQhlxuXG4gICAgICAvLyBjb25zb2xlLmxvZygnW0JMTVhdIEluaXRpYWxpemF0aW9uIGNvbXBsZXRlIScpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAvLyBjb25zb2xlLmVycm9yKCdbQkxNWF0gRmFpbGVkIHRvIGluaXRpYWxpemU6JywgZXJyb3IpO1xuICAgIH1cbiAgfVxuXG4gIC8vIOaguOW/g+aVsOaNruiuv+mXruaWueazlVxuICBnZXREaXNwbGF5TmFtZSh0eXBlOiAndXNlcicgfCAnY2hhcicpOiBzdHJpbmcge1xuICAgIHJldHVybiB0aGlzLmNvbmZpZ01hbmFnZXIuZ2V0RGlzcGxheU5hbWUodHlwZSk7XG4gIH1cblxuICBmaW5kU3RpY2tlclVybEJ5TmFtZShuYW1lOiBzdHJpbmcpOiBzdHJpbmcgfCB1bmRlZmluZWQge1xuICAgIHJldHVybiB0aGlzLmNvbmZpZ01hbmFnZXIuZmluZFN0aWNrZXJVcmxCeU5hbWUobmFtZSk7XG4gIH1cblxuICAvLyDlo4HnurjnrqHnkIZcbiAgYXBwbHlXYWxscGFwZXJzKCk6IHZvaWQge1xuICAgIHRoaXMud2FsbHBhcGVyQ29udHJvbGxlci5hcHBseVdhbGxwYXBlcnMoKTtcbiAgfVxuXG4gIGNoYW5nZVdhbGxwYXBlcih2aWV3VHlwZTogJ2NoYXQnIHwgJ2hvbWUnIHwgJ3NldHRpbmdzJyk6IHZvaWQge1xuICAgIHRoaXMud2FsbHBhcGVyQ29udHJvbGxlci5jaGFuZ2VXYWxscGFwZXIodmlld1R5cGUpO1xuICB9XG5cbiAgLy8g55WM6Z2i5riy5p+T5Y2P6LCDXG4gIHJlbmRlckNoYXRIaXN0b3J5KCk6IHZvaWQge1xuICAgIHRoaXMudWlSZW5kZXJlci5jbGVhckNoYXQoKTtcbiAgICBpZiAoIXRoaXMuYmxteE1hbmFnZXIpIHJldHVybjtcblxuICAgIC8vIOWFiOa4suafk+S4u+aXpeW/l+S4reeahOa2iOaBr1xuICAgIHRoaXMuYmxteE1hbmFnZXIubG9nRW50cmllcy5mb3JFYWNoKChlbnRyeSwgaW5kZXgpID0+IHtcbiAgICAgIGlmIChlbnRyeS5yZWNhbGxlZCkge1xuICAgICAgICB0aGlzLnVpUmVuZGVyZXIucmVuZGVyUmVjYWxsTm90aWNlKGVudHJ5LCBudWxsLCBpbmRleCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLnVpUmVuZGVyZXIucmVuZGVyRW50cnkoZW50cnksIGluZGV4LCBmYWxzZSk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICAvLyDlho3muLLmn5PpmJ/liJfkuK3nmoTmtojmga/vvIjmqKHmi5/ljp/niYjmnLrliLbvvIlcbiAgICB0aGlzLnVzZXJNZXNzYWdlUXVldWUuZm9yRWFjaCgoZW50cnksIHF1ZXVlSW5kZXgpID0+IHtcbiAgICAgIGlmIChlbnRyeS5yZWNhbGxlZCkge1xuICAgICAgICB0aGlzLnVpUmVuZGVyZXIucmVuZGVyUmVjYWxsTm90aWNlKGVudHJ5LCBudWxsLCBxdWV1ZUluZGV4KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMudWlSZW5kZXJlci5yZW5kZXJFbnRyeShlbnRyeSwgcXVldWVJbmRleCwgZmFsc2UpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgdGhpcy51aVJlbmRlcmVyLnJlZnJlc2hBbGxUaW1lc3RhbXBzKCk7XG4gICAgdGhpcy51aU1hbmFnZXIuc2Nyb2xsVG9Cb3R0b20oKTtcbiAgfVxuXG4gIHJlbmRlck1vbWVudHNGZWVkKCk6IHZvaWQge1xuICAgIHRoaXMubW9tZW50c01hbmFnZXIucmVuZGVyTW9tZW50c0ZlZWQoKTtcbiAgfVxuXG4gIC8vIOaaguWtmOW5tuaYvuekuuadoeebrlxuICBzdGFnZUFuZERpc3BsYXlFbnRyeShlbnRyeTogTG9nRW50cnkpOiB2b2lkIHtcbiAgICBpZiAoJ3R5cGUnIGluIGVudHJ5KSB7XG4gICAgICBpZiAoZW50cnkudHlwZSA9PT0gJ2V2ZW50Jykge1xuICAgICAgICAvLyDkuLpldmVudOexu+Wei+eahOadoeebrua3u+WKoOWIsOaXpeW/l+S4reW5tua4suafk1xuICAgICAgICB0aGlzLmJsbXhNYW5hZ2VyLmFkZEVudHJ5KGVudHJ5KTtcbiAgICAgICAgY29uc3QgZW50cnlJbmRleCA9IHRoaXMuYmxteE1hbmFnZXIubG9nRW50cmllcy5sZW5ndGggLSAxO1xuICAgICAgICB0aGlzLnVpUmVuZGVyZXIucmVuZGVyRW50cnkoZW50cnksIGVudHJ5SW5kZXgsIHRydWUpO1xuXG4gICAgICAgIC8vIOWmguaenOaYr+eUqOaIt+WPkemAgeeahOS6i+S7tu+8jOWImeagh+iusOS4uumcgOimgUFJ5ZON5bqUXG4gICAgICAgIGlmICgnc2VuZGVyJyBpbiBlbnRyeSAmJiBlbnRyeS5zZW5kZXIgPT09ICdtZScpIHtcbiAgICAgICAgICB0aGlzLmV2ZW50SGFuZGxlci5zZXRIYXNQZW5kaW5nTm90aWZpY2F0aW9ucyh0cnVlKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybjtcbiAgICAgIH0gZWxzZSBpZiAoZW50cnkudHlwZSA9PT0gJ3RpbWUnKSB7XG4gICAgICAgIC8vIOi3s+i/h3RpbWXnsbvlnovlpITnkIZcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBpZiAoIWVudHJ5LmlkKSB7XG4gICAgICAgIGVudHJ5LmlkID0gJ21zZy0nICsgRGF0ZS5ub3coKSArIE1hdGgucmFuZG9tKCk7XG4gICAgICB9XG5cbiAgICAgIC8vIOWkhOeQhuWbvueJh+S4iuS8oFxuICAgICAgaWYgKFxuICAgICAgICBlbnRyeS50eXBlID09PSAnaW1hZ2UnICYmXG4gICAgICAgICdjb250ZW50JyBpbiBlbnRyeSAmJlxuICAgICAgICBlbnRyeS5jb250ZW50LnR5cGUgPT09ICd1cmwnICYmXG4gICAgICAgIHR5cGVvZiBlbnRyeS5jb250ZW50LnZhbHVlID09PSAnc3RyaW5nJyAmJlxuICAgICAgICBlbnRyeS5jb250ZW50LnZhbHVlLnN0YXJ0c1dpdGgoJ2RhdGE6aW1hZ2UnKVxuICAgICAgKSB7XG4gICAgICAgIC8vIOS9v+eUqOexu+Wei+aWreiogFxuICAgICAgICAoKGVudHJ5IGFzIENoYXRFbnRyeSkuY29udGVudCBhcyBhbnkpLmlzTmV3Rm9yQUkgPSB0cnVlO1xuICAgICAgfVxuXG4gICAgICAvLyDlpoLmnpzmmK/nlKjmiLfmtojmga/vvIzlhYjmt7vliqDliLDpmJ/liJfvvIjmqKHmi5/ljp/niYjmnLrliLbvvIlcbiAgICAgIGlmICgnc2VuZGVyJyBpbiBlbnRyeSAmJiBlbnRyeS5zZW5kZXIgPT09ICdtZScpIHtcbiAgICAgICAgdGhpcy51c2VyTWVzc2FnZVF1ZXVlLnB1c2goZW50cnkgYXMgQ2hhdEVudHJ5KTtcbiAgICAgICAgdGhpcy5ldmVudEhhbmRsZXIuc2V0SGFzUGVuZGluZ05vdGlmaWNhdGlvbnModHJ1ZSk7XG4gICAgICAgIC8vIGNvbnNvbGUubG9nKCdbQkxNWF0g55So5oi35Y+R6YCB5LqG5raI5oGv77yM5re75Yqg5Yiw6Zif5YiXJyk7XG5cbiAgICAgICAgLy8g5riy5p+T5p2h55uu77yI5L2/55So6Zif5YiX5Lit55qE57Si5byV77yJXG4gICAgICAgIGNvbnN0IHF1ZXVlSW5kZXggPSB0aGlzLnVzZXJNZXNzYWdlUXVldWUubGVuZ3RoIC0gMTtcbiAgICAgICAgdGhpcy51aVJlbmRlcmVyLnJlbmRlckVudHJ5KGVudHJ5IGFzIENoYXRFbnRyeSwgcXVldWVJbmRleCwgdHJ1ZSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyDpnZ7nlKjmiLfmtojmga/nm7TmjqXmt7vliqDliLDkuLvml6Xlv5dcbiAgICAgICAgdGhpcy5ibG14TWFuYWdlci5hZGRFbnRyeShlbnRyeSBhcyBDaGF0RW50cnkpO1xuICAgICAgICBjb25zdCBlbnRyeUluZGV4ID0gdGhpcy5ibG14TWFuYWdlci5sb2dFbnRyaWVzLmxlbmd0aCAtIDE7XG4gICAgICAgIHRoaXMudWlSZW5kZXJlci5yZW5kZXJFbnRyeShlbnRyeSBhcyBDaGF0RW50cnksIGVudHJ5SW5kZXgsIHRydWUpO1xuICAgICAgfVxuICAgICAgdGhpcy51cGRhdGVGb290ZXJCdXR0b25zU3RhdGUoKTtcbiAgICB9XG4gIH1cblxuICAvLyBBSeWTjeW6lOWNj+iwg1xuICBhc3luYyB0cmlnZ2VyQWlSZXNwb25zZShpbW1lZGlhdGU6IGJvb2xlYW4gPSBmYWxzZSk6IFByb21pc2U8dm9pZD4ge1xuICAgIC8vIOajgOafpeaYr+WQpuacieW+heWkhOeQhueahOa2iOaBr++8iOmYn+WIl+acuuWItu+8iVxuICAgIGNvbnN0IGhhc1F1ZXVlZE1lc3NhZ2VzID0gdGhpcy51c2VyTWVzc2FnZVF1ZXVlLmxlbmd0aCA+IDA7XG5cbiAgICAvLyDlpoLmnpzmsqHmnInnq4vljbPop6blj5HmoIflv5fvvIzkuJTmsqHmnInpmJ/liJfmtojmga/lkozpgJrnn6XvvIzliJnkuI3op6blj5FcbiAgICBpZiAoIWltbWVkaWF0ZSAmJiAhaGFzUXVldWVkTWVzc2FnZXMgJiYgIXRoaXMuZXZlbnRIYW5kbGVyLmhhc05vdGlmaWNhdGlvbnMpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyDlnKjop6blj5FBSeWTjeW6lOWJje+8jOWwhumYn+WIl+S4reeahOa2iOaBr+enu+WIsOS4u+aXpeW/l++8iOaooeaLn+WOn+eJiOacuuWItu+8iVxuICAgIGlmIChoYXNRdWV1ZWRNZXNzYWdlcykge1xuICAgICAgLy8gY29uc29sZS5sb2coJ1tCTE1YXSDlsIbpmJ/liJfkuK3nmoTmtojmga/np7vliLDkuLvml6Xlv5fvvIzpmJ/liJfplb/luqY6JywgdGhpcy51c2VyTWVzc2FnZVF1ZXVlLmxlbmd0aCk7XG5cbiAgICAgIC8vIOWkjeWItumYn+WIl+S4reeahOa2iOaBr1xuICAgICAgY29uc3QgbWVzc2FnZXNUb1Byb2Nlc3MgPSBbLi4udGhpcy51c2VyTWVzc2FnZVF1ZXVlXTtcblxuICAgICAgLy8g5bCG5raI5oGv5re75Yqg5Yiw5Li75pel5b+XXG4gICAgICBtZXNzYWdlc1RvUHJvY2Vzcy5mb3JFYWNoKGVudHJ5ID0+IHtcbiAgICAgICAgaWYgKGVudHJ5LnR5cGUgPT09ICdpbWFnZScgJiYgJ2NvbnRlbnQnIGluIGVudHJ5ICYmIChlbnRyeS5jb250ZW50IGFzIGFueSkuaXNOZXdGb3JBSSkge1xuICAgICAgICAgIChlbnRyeS5jb250ZW50IGFzIGFueSkudmFsdWUgPSBgW+eUqOaIt+WPkemAgeeahOWbvueJh11gO1xuICAgICAgICAgIGRlbGV0ZSAoZW50cnkuY29udGVudCBhcyBhbnkpLmlzTmV3Rm9yQUk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5ibG14TWFuYWdlci5hZGRFbnRyeShlbnRyeSk7XG4gICAgICB9KTtcblxuICAgICAgLy8g5riF56m66Zif5YiX77yI5qih5ouf5Y6f54mI55qEIHVzZXJNZXNzYWdlUXVldWUgPSBbXe+8iVxuICAgICAgdGhpcy51c2VyTWVzc2FnZVF1ZXVlID0gW107XG5cbiAgICAgIC8vIGNvbnNvbGUubG9nKCdbQkxNWF0g6Zif5YiX5bey5riF56m677yM5raI5oGv5bey56e75Yiw5Li75pel5b+XJyk7XG4gICAgfVxuXG4gICAgYXdhaXQgdGhpcy5haVJlc3BvbnNlTWFuYWdlci50cmlnZ2VyQWlSZXNwb25zZShpbW1lZGlhdGUpO1xuICB9XG5cbiAgLy8gVUnmjqfliLbljY/osINcbiAgdXBkYXRlRm9vdGVyQnV0dG9uc1N0YXRlKCk6IHZvaWQge1xuICAgIHRoaXMudWlNYW5hZ2VyLnVwZGF0ZUZvb3RlckJ1dHRvbnNTdGF0ZSh0aGlzLmV2ZW50SGFuZGxlci5oYXNOb3RpZmljYXRpb25zKTtcbiAgfVxuXG4gIHRvZ2dsZVBhbmVsKHBhbmVsVG9TaG93OiBzdHJpbmcgfCBudWxsKTogdm9pZCB7XG4gICAgdGhpcy51aU1hbmFnZXIudG9nZ2xlUGFuZWwocGFuZWxUb1Nob3cpO1xuICB9XG5cbiAgLy8g5a+86Iiq5Yiw5oyH5a6a6KeG5Zu+XG4gIG5hdmlnYXRlVG8odmlld05hbWU6ICdob21lJyB8ICd3ZWNoYXQnIHwgJ21vbWVudHMnIHwgJ3NldHRpbmdzJyk6IHZvaWQge1xuICAgIGNvbnN0IHZpZXdzID0ge1xuICAgICAgaG9tZTogJyNhcHAtaG9tZXNjcmVlbicsXG4gICAgICB3ZWNoYXQ6ICcjd2VjaGF0LXZpZXcnLFxuICAgICAgbW9tZW50czogJyNtb21lbnRzLXZpZXcnLFxuICAgICAgc2V0dGluZ3M6ICcjc2V0dGluZ3MtdmlldycsXG4gICAgfTtcblxuICAgIHRyeSB7XG4gICAgICAvLyDpppblhYjlsJ3or5Xkvb/nlKhqUXVlcnlcbiAgICAgIGlmICh0eXBlb2YgJCAhPT0gJ3VuZGVmaW5lZCcgJiYgdHlwZW9mIGpRdWVyeSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgLy8g5L2/55SoalF1ZXJ56ZqQ6JeP5omA5pyJ6KeG5Zu+5bm25pi+56S655uu5qCH6KeG5Zu+XG4gICAgICAgICQoJy5hcHAtdmlldycpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcbiAgICAgICAgJCh2aWV3c1t2aWV3TmFtZV0pLmFkZENsYXNzKCdhY3RpdmUnKTtcblxuICAgICAgICAvLyBjb25zb2xlLmxvZyhgW0JMTVhdIOS9v+eUqGpRdWVyeeWvvOiIquWIsDogJHt2aWV3TmFtZX1gKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIOWkh+eUqOaWueahiO+8muS9v+eUqOWOn+eUn0RPTSBBUElcbiAgICAgICAgLy8gY29uc29sZS5sb2coYFtCTE1YXSBqUXVlcnnmnKrliqDovb3vvIzkvb/nlKjljp/nlJ9ET00gQVBJ5a+86Iiq5YiwOiAke3ZpZXdOYW1lfWApO1xuICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuYXBwLXZpZXcnKS5mb3JFYWNoKHZpZXcgPT4ge1xuICAgICAgICAgICh2aWV3IGFzIEhUTUxFbGVtZW50KS5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgY29uc3QgdGFyZ2V0VmlldyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Iodmlld3Nbdmlld05hbWVdKTtcbiAgICAgICAgaWYgKHRhcmdldFZpZXcpIHtcbiAgICAgICAgICAodGFyZ2V0VmlldyBhcyBIVE1MRWxlbWVudCkuY2xhc3NMaXN0LmFkZCgnYWN0aXZlJyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY29uc29sZS5lcnJvcihgW0JMTVhdIOaJvuS4jeWIsOebruagh+inhuWbvjogJHt2aWV3c1t2aWV3TmFtZV19YCk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8g5b2T5a+86Iiq5Yiw5pyL5Y+L5ZyI6KeG5Zu+5pe277yM5pu05paw6YCa55+l54q25oCB5bm26YeN5paw5riy5p+TXG4gICAgICBpZiAodmlld05hbWUgPT09ICdtb21lbnRzJykge1xuICAgICAgICAvLyDmm7TmlrDmnIvlj4vlnIjpgJrnn6XnirbmgIFcbiAgICAgICAgdGhpcy5zZXRNb21lbnROb3RpZmljYXRpb24oZmFsc2UpO1xuXG4gICAgICAgIC8vIOmHjeaWsOa4suafk+aci+WPi+WciOWGheWuuVxuICAgICAgICB0aGlzLnJlbmRlck1vbWVudHNGZWVkKCk7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoYFtCTE1YXSDlr7zoiKrplJnor686YCwgZXJyb3IpO1xuXG4gICAgICAvLyDmnIDlkI7nmoTlpIfnlKjmlrnmoYjvvIzkvb/nlKjmnIDln7rmnKznmoRET03mk43kvZxcbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IGFsbFZpZXdzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmFwcC12aWV3Jyk7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYWxsVmlld3MubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAoYWxsVmlld3NbaV0gYXMgSFRNTEVsZW1lbnQpLmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3Qgc2VsZWN0b3IgPSB2aWV3c1t2aWV3TmFtZV07XG4gICAgICAgIGNvbnN0IHRhcmdldEVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHNlbGVjdG9yKTtcbiAgICAgICAgaWYgKHRhcmdldEVsZW1lbnQpIHtcbiAgICAgICAgICAodGFyZ2V0RWxlbWVudCBhcyBIVE1MRWxlbWVudCkuY2xhc3NMaXN0LmFkZCgnYWN0aXZlJyk7XG4gICAgICAgICAgLy8gY29uc29sZS5sb2coYFtCTE1YXSDkvb/nlKjln7rmnKxET00gQVBJ5a+86Iiq5YiwOiAke3ZpZXdOYW1lfWApO1xuICAgICAgICB9XG4gICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoYFtCTE1YXSDmnIDnu4jlr7zoiKrlpLHotKU6YCwgZSk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgdXBkYXRlQXZhdGFyKGF2YXRhclR5cGU6ICd1c2VyJyB8ICdjaGFyJyk6IFByb21pc2U8dm9pZD4ge1xuICAgIGNvbnN0IGNvbmZpZyA9IHRoaXMuY29uZmlnTWFuYWdlci5nZXRDb25maWcoKTtcbiAgICBjb25zdCBjdXJyZW50VXJsID0gY29uZmlnLmF2YXRhcnNbYXZhdGFyVHlwZV0gfHwgJyc7XG4gICAgY29uc3QgZGlzcGxheU5hbWUgPSB0aGlzLmdldERpc3BsYXlOYW1lKGF2YXRhclR5cGUpO1xuXG4gICAgY29uc3QgbmV3VXJsID0gYXdhaXQgdGhpcy5kaWFsb2dNYW5hZ2VyLnNob3dJbnB1dERpYWxvZyhcbiAgICAgICfmm7TmjaLlpLTlg48nLFxuICAgICAgYCR7ZGlzcGxheU5hbWV95aS05YOPVVJMYCxcbiAgICAgIGN1cnJlbnRVcmwsXG4gICAgICAn6K+36L6T5YWl5aS05YOP5Zu+54mH6ZO+5o6lJyxcbiAgICAgICd1cmwnLFxuICAgICk7XG5cbiAgICBpZiAobmV3VXJsKSB7XG4gICAgICB0aGlzLmNvbmZpZ01hbmFnZXIudXBkYXRlQXZhdGFyKGF2YXRhclR5cGUsIG5ld1VybCk7XG4gICAgICBhd2FpdCB0aGlzLmRpYWxvZ01hbmFnZXIuYWxlcnQoJ+WktOWDj+W3suabtOaWsO+8gScsICfmm7TmlrDmiJDlip8nKTtcbiAgICAgIHRoaXMucmVuZGVyQ2hhdEhpc3RvcnkoKTtcbiAgICAgIHRoaXMucmVuZGVyTW9tZW50c0ZlZWQoKTtcbiAgICAgIGlmIChhdmF0YXJUeXBlID09PSAndXNlcicpIHtcbiAgICAgICAgJCgnI21vbWVudHMtdXNlci1hdmF0YXInKS5hdHRyKCdzcmMnLCBuZXdVcmwpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGFzeW5jIHVwZGF0ZUNoYXJSZW1hcmsoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgY29uc3Qgb2xkRGlzcGxheU5hbWUgPSB0aGlzLmdldERpc3BsYXlOYW1lKCdjaGFyJyk7XG4gICAgY29uc3QgY29uZmlnID0gdGhpcy5jb25maWdNYW5hZ2VyLmdldENvbmZpZygpO1xuICAgIGNvbnN0IG5ld1JlbWFyayA9IGF3YWl0IHRoaXMuZGlhbG9nTWFuYWdlci5wcm9tcHQoJ+ivt+i+k+WFpeaWsOeahOWkh+azqDonLCBjb25maWcuY2hhclJlbWFyaywgJ+S/ruaUueWkh+azqCcpO1xuICAgIGlmIChuZXdSZW1hcmsgIT09IG51bGwpIHtcbiAgICAgIHRoaXMuY29uZmlnTWFuYWdlci51cGRhdGVDaGFyUmVtYXJrKG5ld1JlbWFyayk7XG4gICAgICBjb25zdCBuZXdEaXNwbGF5TmFtZSA9IHRoaXMuZ2V0RGlzcGxheU5hbWUoJ2NoYXInKTtcblxuICAgICAgJCgnI2NvbnRhY3QtbmFtZS1oZWFkZXInKS50ZXh0KG5ld0Rpc3BsYXlOYW1lKTtcbiAgICAgICQoJyN3ZWNoYXQtaW5wdXQtZmllbGQnKS5hdHRyKFxuICAgICAgICAncGxhY2Vob2xkZXInLFxuICAgICAgICB0aGlzLmNvbmZpZ01hbmFnZXIuZ2V0U2F2ZWRJbnB1dFBsYWNlaG9sZGVyKCkgfHwgYOS4jiAke25ld0Rpc3BsYXlOYW1lfSDlr7nor50uLi5gLFxuICAgICAgKTtcblxuICAgICAgJCgnI21vbWVudHMtZmVlZC1saXN0IC5wb3N0LWF1dGhvci1uYW1lJykuZWFjaChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICgkKHRoaXMpLnRleHQoKSA9PT0gb2xkRGlzcGxheU5hbWUpICQodGhpcykudGV4dChuZXdEaXNwbGF5TmFtZSk7XG4gICAgICB9KTtcblxuICAgICAgJCgnLnJlY2FsbC1ub3RpY2UtdGV4dCcpLmVhY2goZnVuY3Rpb24gKCkge1xuICAgICAgICBjb25zdCB0ZXh0ID0gJCh0aGlzKS50ZXh0KCk7XG4gICAgICAgIGlmICh0ZXh0ICYmIHRleHQuaW5jbHVkZXMoYFwiJHtvbGREaXNwbGF5TmFtZX1cImApKSB7XG4gICAgICAgICAgJCh0aGlzKS50ZXh0KGBcIiR7bmV3RGlzcGxheU5hbWV9XCIg5pKk5Zue5LqG5LiA5p2h5raI5oGvYCk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgICBhd2FpdCB0aGlzLmRpYWxvZ01hbmFnZXIuYWxlcnQoJ+Wkh+azqOW3suabtOaWsO+8gScsICfmm7TmlrDmiJDlip8nKTtcbiAgICB9XG4gIH1cblxuICBhc3luYyB1cGRhdGVVc2VyTmFtZSgpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICBjb25zdCBvbGROYW1lID0gdGhpcy5nZXREaXNwbGF5TmFtZSgndXNlcicpO1xuICAgIGNvbnN0IG5ld05hbWUgPSBhd2FpdCB0aGlzLmRpYWxvZ01hbmFnZXIuc2hvd0lucHV0RGlhbG9nKCfmm7TmlLnlkI3lrZcnLCAn6K+36L6T5YWl5L2g55qE5paw5ZCN5a2XJywgb2xkTmFtZSwgJ+i+k+WFpeaWsOWQjeWtly4uLicpO1xuXG4gICAgaWYgKG5ld05hbWUgJiYgbmV3TmFtZS50cmltKCkgIT09ICcnICYmIG5ld05hbWUgIT09IG9sZE5hbWUpIHtcbiAgICAgIHRoaXMuY29uZmlnTWFuYWdlci51cGRhdGVVc2VyTmFtZShuZXdOYW1lKTtcbiAgICAgICQoJyNtb21lbnRzLXVzZXItbmFtZScpLnRleHQobmV3TmFtZSk7XG5cbiAgICAgIC8vIOivoumXrueUqOaIt+aYr+WQpuimgeWPkemAgeaci+WPi+WciOmAmuefpUFJXG4gICAgICBjb25zdCBzaG91bGROb3RpZnkgPSBhd2FpdCB0aGlzLmRpYWxvZ01hbmFnZXIuY29uZmlybSgn5piv5ZCm6KaB5Y+R6YCB5pyL5Y+L5ZyI5Yqo5oCB6YCa55+lQUnkvaDmm7TmlLnkuoblkI3lrZfvvJ8nLCAn5pyL5Y+L5ZyI6YCa55+lJyk7XG4gICAgICBpZiAoc2hvdWxkTm90aWZ5KSB7XG4gICAgICAgIHRoaXMubW9tZW50c01hbmFnZXIubm90aWZ5TW9tZW50Q2hhbmdlKCduYW1lJywgb2xkTmFtZSwgbmV3TmFtZSk7XG4gICAgICAgIHRoaXMuZXZlbnRIYW5kbGVyLnNldEhhc1BlbmRpbmdOb3RpZmljYXRpb25zKHRydWUpO1xuICAgICAgfVxuXG4gICAgICBhd2FpdCB0aGlzLmRpYWxvZ01hbmFnZXIuYWxlcnQoJ+WQjeWtl+W3suabtOaWsO+8gScsICfmm7TmlrDmiJDlip8nKTtcbiAgICB9XG4gIH1cblxuICBhc3luYyB1cGRhdGVTaWduYXR1cmUoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgY29uc3QgY3VycmVudFNpZ25hdHVyZSA9IHRoaXMuY29uZmlnTWFuYWdlci5nZXRTYXZlZFNpZ25hdHVyZSgpO1xuICAgIGNvbnN0IG5ld1NpZ25hdHVyZSA9IGF3YWl0IHRoaXMuZGlhbG9nTWFuYWdlci5zaG93SW5wdXREaWFsb2coXG4gICAgICAn5Liq5oCn562+5ZCNJyxcbiAgICAgICfor7fovpPlhaXkvaDnmoTkuKrmgKfnrb7lkI0nLFxuICAgICAgY3VycmVudFNpZ25hdHVyZSxcbiAgICAgICfovpPlhaXkuKrmgKfnrb7lkI0uLi4nLFxuICAgICk7XG5cbiAgICBpZiAobmV3U2lnbmF0dXJlICE9PSBudWxsICYmIG5ld1NpZ25hdHVyZSAhPT0gY3VycmVudFNpZ25hdHVyZSkge1xuICAgICAgdGhpcy5jb25maWdNYW5hZ2VyLnNldFNpZ25hdHVyZShuZXdTaWduYXR1cmUpO1xuICAgICAgJCgnI3VzZXItc2lnbmF0dXJlLWRpc3BsYXknKS50ZXh0KG5ld1NpZ25hdHVyZSk7XG5cbiAgICAgIC8vIOivoumXrueUqOaIt+aYr+WQpuimgeWPkemAgeaci+WPi+WciOmAmuefpUFJXG4gICAgICBjb25zdCBzaG91bGROb3RpZnkgPSBhd2FpdCB0aGlzLmRpYWxvZ01hbmFnZXIuY29uZmlybShcbiAgICAgICAgJ+aYr+WQpuimgeWPkemAgeaci+WPi+WciOWKqOaAgemAmuefpUFJ5L2g5pu05pS55LqG5Liq5oCn562+5ZCN77yfJyxcbiAgICAgICAgJ+aci+WPi+WciOmAmuefpScsXG4gICAgICApO1xuICAgICAgaWYgKHNob3VsZE5vdGlmeSkge1xuICAgICAgICB0aGlzLm1vbWVudHNNYW5hZ2VyLm5vdGlmeU1vbWVudENoYW5nZSgnc2lnbmF0dXJlJywgY3VycmVudFNpZ25hdHVyZSwgbmV3U2lnbmF0dXJlKTtcbiAgICAgICAgdGhpcy5ldmVudEhhbmRsZXIuc2V0SGFzUGVuZGluZ05vdGlmaWNhdGlvbnModHJ1ZSk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgdXBkYXRlQ292ZXJQaG90bygpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICBjb25zdCBjdXJyZW50Q292ZXIgPSB0aGlzLmNvbmZpZ01hbmFnZXIuZ2V0U2F2ZWRDb3ZlclBob3RvKCkgfHwgJyc7XG4gICAgY29uc3QgbmV3Q292ZXIgPSBhd2FpdCB0aGlzLmRpYWxvZ01hbmFnZXIuc2hvd0lucHV0RGlhbG9nKFxuICAgICAgJ+aci+WPi+WciOWwgemdoicsXG4gICAgICAn5pyL5Y+L5ZyI5bCB6Z2iVVJMJyxcbiAgICAgIGN1cnJlbnRDb3ZlcixcbiAgICAgICfor7fovpPlhaXlsIHpnaLlm77niYfpk77mjqUnLFxuICAgICAgJ3VybCcsXG4gICAgKTtcbiAgICBpZiAobmV3Q292ZXIpIHtcbiAgICAgIHRoaXMuY29uZmlnTWFuYWdlci5zZXRDb3ZlclBob3RvKG5ld0NvdmVyKTtcbiAgICAgICQoJyNtb21lbnRzLWNvdmVyLXBob3RvJykuYXR0cignc3JjJywgbmV3Q292ZXIpO1xuICAgIH1cbiAgfVxuXG4gIC8vIOi+k+WFpeWkhOeQhuWNj+iwg1xuICBhc3luYyBoYW5kbGVUcmFuc2ZlckFjY2VwdChkYXRhOiBhbnkpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICBhd2FpdCB0aGlzLmlucHV0SGFuZGxlci5oYW5kbGVUcmFuc2ZlckFjY2VwdChkYXRhKTtcbiAgfVxuXG4gIGFzeW5jIGhhbmRsZUdpZnRBY3Rpb24oZGF0YTogYW55KTogUHJvbWlzZTx2b2lkPiB7XG4gICAgYXdhaXQgdGhpcy5pbnB1dEhhbmRsZXIuaGFuZGxlR2lmdEFjdGlvbihkYXRhKTtcbiAgICB0aGlzLmV2ZW50SGFuZGxlci5zZXRIYXNQZW5kaW5nTm90aWZpY2F0aW9ucyh0cnVlKTtcbiAgfVxuXG4gIC8vIOajgOafpea2iOaBr+aYr+WQpuWcqOmYn+WIl+S4re+8iOaooeaLn+WOn+eJiOmAu+i+ke+8iVxuICBpc01lc3NhZ2VJblF1ZXVlKG1lc3NhZ2VJZDogc3RyaW5nKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMudXNlck1lc3NhZ2VRdWV1ZS5zb21lKGVudHJ5ID0+IGVudHJ5LmlkID09PSBtZXNzYWdlSWQpO1xuICB9XG5cbiAgLy8g5aSE55CG5raI5oGv5pKk5Zue77yI5LuF6ZmQ5paH5a2X5raI5oGv77yJXG4gIGFzeW5jIGhhbmRsZU1lc3NhZ2VSZWNhbGwoZW50cnk6IENoYXRFbnRyeSk6IFByb21pc2U8dm9pZD4ge1xuICAgIHRyeSB7XG4gICAgICAvLyDlj6rlhYHorrjmkqTlm57mloflrZfmtojmga9cbiAgICAgIGlmIChlbnRyeS50eXBlICE9PSAnbWVzc2FnZScpIHtcbiAgICAgICAgY29uc29sZS53YXJuKCflj6rog73mkqTlm57mloflrZfmtojmga/vvIzlvZPliY3mtojmga/nsbvlnos6JywgZW50cnkudHlwZSk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgLy8g5p+l5om+5raI5oGv5Zyo6Zif5YiX5Lit55qE57Si5byVXG4gICAgICBjb25zdCBxdWV1ZUluZGV4ID0gdGhpcy51c2VyTWVzc2FnZVF1ZXVlLmZpbmRJbmRleChxdWV1ZUVudHJ5ID0+IHF1ZXVlRW50cnkuaWQgPT09IGVudHJ5LmlkKTtcblxuICAgICAgaWYgKHF1ZXVlSW5kZXggPT09IC0xKSB7XG4gICAgICAgIGNvbnNvbGUud2Fybign5pyq5om+5Yiw6KaB5pKk5Zue55qE5raI5oGvOicsIGVudHJ5LmlkKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBjb25zdCB0YXJnZXRFbnRyeSA9IHRoaXMudXNlck1lc3NhZ2VRdWV1ZVtxdWV1ZUluZGV4XTtcblxuICAgICAgLy8g5L+d5a2Y5Y6f5aeL5YaF5a655YiwcmVjYWxsZWRfY29udGVudFxuICAgICAgdGFyZ2V0RW50cnkucmVjYWxsZWRfY29udGVudCA9IHRhcmdldEVudHJ5LmNvbnRlbnQ7XG5cbiAgICAgIC8vIOiuvue9ruaSpOWbnuaXtumXtOaIs1xuICAgICAgdGFyZ2V0RW50cnkucmVjYWxsZWRfdGltZXN0YW1wID0gbmV3IERhdGUoKS50b0lTT1N0cmluZygpO1xuXG4gICAgICAvLyDmoIforrDmtojmga/kuLrlt7LmkqTlm55cbiAgICAgIHRhcmdldEVudHJ5LnJlY2FsbGVkID0gdHJ1ZTtcblxuICAgICAgLy8g6YeN5paw5riy5p+T6IGK5aSp5Y6G5Y+yXG4gICAgICB0aGlzLnJlbmRlckNoYXRIaXN0b3J5KCk7XG5cbiAgICAgIC8vIGNvbnNvbGUubG9nKCdbQkxNWF0g5paH5a2X5raI5oGv5bey5pKk5ZueOicsIGVudHJ5LmlkKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcign5pKk5Zue5raI5oGv5pe25Ye66ZSZOicsIGVycm9yKTtcbiAgICB9XG4gIH1cblxuICAvLyBBSeWTjeW6lOaVsOaNruiuv+mXrlxuICBnZXRMYXRlc3RBaVJhd1Jlc3BvbnNlKCk6IHN0cmluZyB7XG4gICAgcmV0dXJuIHRoaXMuYWlSZXNwb25zZU1hbmFnZXIuZ2V0TGF0ZXN0QWlSYXdSZXNwb25zZSgpO1xuICB9XG5cbiAgZ2V0TGF0ZXN0U2VudFByb21wdCgpOiBzdHJpbmcge1xuICAgIHJldHVybiB0aGlzLmFpUmVzcG9uc2VNYW5hZ2VyLmdldExhdGVzdFNlbnRQcm9tcHQoKTtcbiAgfVxuXG4gIGdldFJhd0FpUmVzcG9uc2UoKTogc3RyaW5nIHtcbiAgICByZXR1cm4gdGhpcy5haVJlc3BvbnNlTWFuYWdlci5nZXRSYXdBaVJlc3BvbnNlKCk7XG4gIH1cblxuICBnZXRGdWxsUHJvbXB0KCk6IHN0cmluZyB7XG4gICAgcmV0dXJuIHRoaXMuYWlSZXNwb25zZU1hbmFnZXIuZ2V0RnVsbFByb21wdCgpO1xuICB9XG5cbiAgLy8g5Li76aKY566h55CG5Y2P6LCDXG4gIHNldHVwVGhlbWVTZWxlY3RvcigpOiB2b2lkIHtcbiAgICB0aGlzLnRoZW1lRWRpdG9yLnNldHVwVGhlbWVTZWxlY3RvcigpO1xuICAgIHRoaXMuc2V0dXBUaGVtZUVkaXRvckV2ZW50cygpO1xuICB9XG5cbiAgcHJpdmF0ZSBzZXR1cFRoZW1lRWRpdG9yRXZlbnRzKCk6IHZvaWQge1xuICAgIGNvbnN0IGNsb3NlQnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Nsb3NlLXRoZW1lLWVkaXRvcicpO1xuICAgIGNvbnN0IHNhdmVCdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2F2ZS10aGVtZS1idG4nKTtcbiAgICBjb25zdCByZXNldEJ0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyZXNldC10aGVtZS1idG4nKTtcbiAgICBjb25zdCBjdXN0b21UaGVtZUJ0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjdXN0b20tdGhlbWUtYnRuJyk7XG5cbiAgICBpZiAoY2xvc2VCdG4pIHtcbiAgICAgIGNsb3NlQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gdGhpcy50aGVtZUVkaXRvci5jbG9zZVRoZW1lRWRpdG9yKCkpO1xuICAgIH1cblxuICAgIGlmIChzYXZlQnRuKSB7XG4gICAgICBzYXZlQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gdGhpcy50aGVtZUVkaXRvci5zYXZlQ3VzdG9tVGhlbWUoKSk7XG4gICAgfVxuXG4gICAgaWYgKHJlc2V0QnRuKSB7XG4gICAgICByZXNldEJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHRoaXMudGhlbWVFZGl0b3IucmVzZXRUaGVtZUVkaXRvcigpKTtcbiAgICB9XG5cbiAgICBpZiAoY3VzdG9tVGhlbWVCdG4pIHtcbiAgICAgIGN1c3RvbVRoZW1lQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gdGhpcy50aGVtZUVkaXRvci5vcGVuVGhlbWVFZGl0b3IoKSk7XG4gICAgfVxuICB9XG5cbiAgb3BlblRoZW1lRWRpdG9yKCk6IHZvaWQge1xuICAgIHRoaXMudGhlbWVFZGl0b3Iub3BlblRoZW1lRWRpdG9yKCk7XG4gIH1cblxuICBjbG9zZVRoZW1lRWRpdG9yKCk6IHZvaWQge1xuICAgIHRoaXMudGhlbWVFZGl0b3IuY2xvc2VUaGVtZUVkaXRvcigpO1xuICB9XG5cbiAgLy8g6L6F5Yqp5pa55rOV77yaSEVY6L2sUkdCQVxuICBoZXhUb1JnYmEoaGV4OiBzdHJpbmcsIGFscGhhOiBudW1iZXIpOiBzdHJpbmcge1xuICAgIGNvbnN0IHIgPSBwYXJzZUludChoZXguc2xpY2UoMSwgMyksIDE2KTtcbiAgICBjb25zdCBnID0gcGFyc2VJbnQoaGV4LnNsaWNlKDMsIDUpLCAxNik7XG4gICAgY29uc3QgYiA9IHBhcnNlSW50KGhleC5zbGljZSg1LCA3KSwgMTYpO1xuXG4gICAgcmV0dXJuIGByZ2JhKCR7cn0sICR7Z30sICR7Yn0sICR7YWxwaGF9KWA7XG4gIH1cblxuICAvLyDosIPor5Xlip/og73ljY/osINcbiAgYWRkVGVzdEVudHJ5KGVudHJ5VHlwZTogc3RyaW5nKTogdm9pZCB7XG4gICAgYWRkVGVzdEVudHJ5KHRoaXMuYmxteE1hbmFnZXIsIGVudHJ5VHlwZSk7XG4gIH1cblxuICBjbGVhckRlYnVnRGF0YSgpOiB2b2lkIHtcbiAgICBjbGVhckRlYnVnRGF0YSh0aGlzLmJsbXhNYW5hZ2VyKTtcbiAgfVxuXG4gIHNob3dUZXN0RW50cnlUeXBlcygpOiB2b2lkIHtcbiAgICBzaG93VGVzdEVudHJ5VHlwZXMoKTtcbiAgfVxuXG4gIHNob3dEZWJ1Z0luZm8oKTogdm9pZCB7XG4gICAgc2hvd0RlYnVnSW5mbyh0aGlzKTtcbiAgfVxuXG4gIC8vIOWkhOeQhua2iOaBr+aSpOWbnueahOaci+WPi+WciOmAmuefpVxuICBub3RpZnlSZWNhbGxWaWFNb21lbnRzKHNlbmRlcjogJ1VTRVInIHwgJ0NIQVInLCB0YXJnZXRUZXh0OiBzdHJpbmcpOiB2b2lkIHtcbiAgICAvLyDor6Lpl67nlKjmiLfmmK/lkKbopoHlj5HpgIHmnIvlj4vlnIjpgJrnn6VBSVxuICAgIGlmIChjb25maXJtKCfmmK/lkKbopoHlj5HpgIHmnIvlj4vlnIjliqjmgIHpgJrnn6VBSeS9oOaSpOWbnuS6hua2iOaBr++8nycpKSB7XG4gICAgICB0aGlzLm1vbWVudHNNYW5hZ2VyLm5vdGlmeVJlY2FsbFZpYU1vbWVudHMoc2VuZGVyLCB0YXJnZXRUZXh0KTtcbiAgICAgIHRoaXMuZXZlbnRIYW5kbGVyLnNldEhhc1BlbmRpbmdOb3RpZmljYXRpb25zKHRydWUpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiDmuIXnkIbmiYDmnInotYTmupDvvIzpmLLmraLlhoXlrZjms4TmvI9cbiAgICovXG4gIGNsZWFudXAoKTogdm9pZCB7XG4gICAgLy8gY29uc29sZS5sb2coJ1tBcHBDb250cm9sbGVyXSDlvIDlp4vmuIXnkIbotYTmupAuLi4nKTtcblxuICAgIC8vIOa4heeQhuWQhOS4queuoeeQhuWZqOeahOi1hOa6kFxuICAgIGlmICh0aGlzLmFpUmVzcG9uc2VNYW5hZ2VyICYmIHR5cGVvZiB0aGlzLmFpUmVzcG9uc2VNYW5hZ2VyLmNsZWFudXAgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgIHRoaXMuYWlSZXNwb25zZU1hbmFnZXIuY2xlYW51cCgpO1xuICAgIH1cblxuICAgIGlmICh0aGlzLnVpUmVuZGVyZXIgJiYgdHlwZW9mIHRoaXMudWlSZW5kZXJlci5jbGVhbnVwID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICB0aGlzLnVpUmVuZGVyZXIuY2xlYW51cCgpO1xuICAgIH1cblxuICAgIC8vIGNvbnNvbGUubG9nKCdbQXBwQ29udHJvbGxlcl0g6LWE5rqQ5riF55CG5a6M5oiQJyk7XG4gIH1cbn1cbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/同层手机/app-controller.ts\n")},"./src/同层手机/config-manager.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ConfigManager: () => (/* binding */ ConfigManager),\n/* harmony export */   PHONE_SIZES: () => (/* binding */ PHONE_SIZES),\n/* harmony export */   STORAGE_KEYS: () => (/* binding */ STORAGE_KEYS)\n/* harmony export */ });\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./utils */ \"./src/同层手机/utils.ts\");\n// 配置管理模块\n// 负责管理应用配置、常量定义和配置初始化\n\n// 常量定义\nconst STORAGE_KEYS = {\n    GLOBAL_STICKER: 'blmx_wechat_stickers_global',\n    CHAR_STICKER_PREFIX: 'blmx_char_stickers_',\n    PHONE_SIZE: 'blmx_phone_size',\n    STICKER_SIZE: 'blmx_sticker_size',\n    MOMENT_NOTIFICATION: 'blmx_moment_notification',\n    MOMENT_LAST_VIEW: 'blmx_moment_last_view',\n    USER_NAME_PREFIX: 'blmx_user_name_',\n    USER_AVATAR_PREFIX: 'blmx_user_avatar_',\n    CHAR_AVATAR_PREFIX: 'blmx_char_avatar_',\n    CHAR_REMARK_PREFIX: 'blmx_remark_',\n    COVER_PHOTO_PREFIX: 'blmx_cover_photo_',\n    SIGNATURE_PREFIX: 'blmx_signature_',\n    INPUT_PLACEHOLDER_PREFIX: 'blmx_input_placeholder_',\n    LAST_NOTIFIED_VERSION: 'blmx_last_notified_version',\n};\n// 手机尺寸常量\nconst PHONE_SIZES = {\n    default: '48.75rem', // 默认尺寸: 48.75rem (780px)\n    medium: '42rem', // 中等尺寸: 42rem (672px)\n    small: '36rem', // 小尺寸: 36rem (576px)\n};\n// 配置管理器类\nclass ConfigManager {\n    config;\n    defaultGlobalStickers = [{ label: '好的', url: 'https://files.catbox.moe/3j0tpc.jpeg' }];\n    constructor() {\n        // 初始化默认配置\n        this.config = {\n            avatars: { user: '', char: '' },\n            names: { user: 'User', char: 'Character' },\n            charRemark: '',\n            currentCharId: '',\n        };\n    }\n    // 获取配置\n    getConfig() {\n        return this.config;\n    }\n    // 设置配置\n    setConfig(config) {\n        this.config = { ...this.config, ...config };\n    }\n    // 获取显示名称\n    getDisplayName(type) {\n        if (type === 'char') {\n            return this.config.charRemark || this.config.names.char;\n        }\n        return this.config.names.user;\n    }\n    // 更新头像\n    updateAvatar(avatarType, newUrl) {\n        this.config.avatars[avatarType] = newUrl;\n        const storageKey = avatarType === 'user'\n            ? `${STORAGE_KEYS.USER_AVATAR_PREFIX}${this.config.currentCharId}`\n            : `${STORAGE_KEYS.CHAR_AVATAR_PREFIX}${this.config.currentCharId}`;\n        localStorage.setItem(storageKey, newUrl);\n    }\n    // 更新角色备注\n    updateCharRemark(newRemark) {\n        this.config.charRemark = newRemark;\n        localStorage.setItem(`${STORAGE_KEYS.CHAR_REMARK_PREFIX}${this.config.currentCharId}`, newRemark);\n    }\n    // 更新用户名\n    updateUserName(newName) {\n        this.config.names.user = newName;\n        localStorage.setItem(`${STORAGE_KEYS.USER_NAME_PREFIX}${this.config.currentCharId}`, newName);\n    }\n    // 查找表情包URL\n    findStickerUrlByName(name) {\n        const globalStickers = [\n            ...this.defaultGlobalStickers,\n            ...(_utils__WEBPACK_IMPORTED_MODULE_0__.SafeStorage.getItem(STORAGE_KEYS.GLOBAL_STICKER, []) || []),\n        ];\n        const charStickers = _utils__WEBPACK_IMPORTED_MODULE_0__.SafeStorage.getItem(`${STORAGE_KEYS.CHAR_STICKER_PREFIX}${this.config.currentCharId}`, []) || [];\n        return [...globalStickers, ...charStickers].find((s) => s.label === name)?.url;\n    }\n    // 从localStorage加载配置\n    async loadFromStorage(charData) {\n        this.config.currentCharId = charData.name;\n        this.config.names.char = charData.name;\n        // 加载保存的配置\n        this.config.charRemark =\n            localStorage.getItem(`${STORAGE_KEYS.CHAR_REMARK_PREFIX}${this.config.currentCharId}`) || '';\n        this.config.names.user =\n            localStorage.getItem(`${STORAGE_KEYS.USER_NAME_PREFIX}${this.config.currentCharId}`) || 'User';\n        this.config.avatars.user =\n            localStorage.getItem(`${STORAGE_KEYS.USER_AVATAR_PREFIX}${this.config.currentCharId}`) || '';\n        // 加载角色头像\n        const savedCharAvatar = localStorage.getItem(`${STORAGE_KEYS.CHAR_AVATAR_PREFIX}${this.config.currentCharId}`);\n        if (savedCharAvatar) {\n            this.config.avatars.char = savedCharAvatar;\n        }\n        else {\n            // 这里需要从外部获取角色头像路径\n            // 在实际使用时会通过参数传入\n            this.config.avatars.char = '';\n        }\n    }\n    // 获取朋友圈通知状态\n    getMomentNotificationState() {\n        const notificationState = localStorage.getItem(`${STORAGE_KEYS.MOMENT_NOTIFICATION}_${this.config.currentCharId}`);\n        return notificationState === 'true';\n    }\n    // 设置朋友圈通知状态\n    setMomentNotificationState(value) {\n        localStorage.setItem(`${STORAGE_KEYS.MOMENT_NOTIFICATION}_${this.config.currentCharId}`, value.toString());\n    }\n    // 获取最后查看朋友圈时的时间戳\n    getLastMomentViewTimestamp() {\n        const lastView = localStorage.getItem(`${STORAGE_KEYS.MOMENT_LAST_VIEW}_${this.config.currentCharId}`);\n        return lastView ? parseInt(lastView, 10) : 0;\n    }\n    // 设置最后查看朋友圈时的时间戳\n    setLastMomentViewTimestamp(timestamp) {\n        localStorage.setItem(`${STORAGE_KEYS.MOMENT_LAST_VIEW}_${this.config.currentCharId}`, timestamp.toString());\n    }\n    // 获取保存的封面图片\n    getSavedCoverPhoto() {\n        return localStorage.getItem(`${STORAGE_KEYS.COVER_PHOTO_PREFIX}${this.config.currentCharId}`);\n    }\n    // 设置封面图片\n    setCoverPhoto(url) {\n        localStorage.setItem(`${STORAGE_KEYS.COVER_PHOTO_PREFIX}${this.config.currentCharId}`, url);\n    }\n    // 获取保存的个性签名\n    getSavedSignature() {\n        return localStorage.getItem(`${STORAGE_KEYS.SIGNATURE_PREFIX}${this.config.currentCharId}`) || '';\n    }\n    // 设置个性签名\n    setSignature(signature) {\n        localStorage.setItem(`${STORAGE_KEYS.SIGNATURE_PREFIX}${this.config.currentCharId}`, signature);\n    }\n    // 获取保存的输入框占位符\n    getSavedInputPlaceholder() {\n        return localStorage.getItem(`${STORAGE_KEYS.INPUT_PLACEHOLDER_PREFIX}${this.config.currentCharId}`);\n    }\n    // 设置输入框占位符\n    setInputPlaceholder(placeholder) {\n        localStorage.setItem(`${STORAGE_KEYS.INPUT_PLACEHOLDER_PREFIX}${this.config.currentCharId}`, placeholder);\n    }\n    // 获取手机尺寸设置\n    getPhoneSize() {\n        const savedSize = localStorage.getItem(STORAGE_KEYS.PHONE_SIZE) || 'default';\n        return savedSize === 'medium' ? 'medium' : savedSize === 'small' ? 'small' : 'default';\n    }\n    // 设置手机尺寸\n    setPhoneSize(size) {\n        localStorage.setItem(STORAGE_KEYS.PHONE_SIZE, size);\n    }\n    // 获取表情包尺寸设置\n    getStickerSize() {\n        const savedSize = localStorage.getItem(STORAGE_KEYS.STICKER_SIZE) || '120';\n        return parseInt(savedSize, 10);\n    }\n    // 设置表情包尺寸\n    setStickerSize(size) {\n        localStorage.setItem(STORAGE_KEYS.STICKER_SIZE, size.toString());\n    }\n    // 获取版本通知状态\n    getLastNotifiedVersion() {\n        return localStorage.getItem(STORAGE_KEYS.LAST_NOTIFIED_VERSION);\n    }\n    // 设置版本通知状态\n    setLastNotifiedVersion(version) {\n        localStorage.setItem(STORAGE_KEYS.LAST_NOTIFIED_VERSION, version);\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFjO1FBQ1osTUFBTSxTQUFTLEdBQUcsWUFBWSxDQUFDLE9BQU8sQ0FBQyxZQUFZLENBQUMsWUFBWSxDQUFDLElBQUksS0FBSyxDQUFDO1FBQzNFLE9BQU8sUUFBUSxDQUFDLFNBQVMsRUFBRSxFQUFFLENBQUMsQ0FBQztJQUNqQyxDQUFDO0lBRUQsVUFBVTtJQUNWLGNBQWMsQ0FBQyxJQUFZO1FBQ3pCLFlBQVksQ0FBQyxPQUFPLENBQUMsWUFBWSxDQUFDLFlBQVksRUFBRSxJQUFJLENBQUMsUUFBUSxFQUFFLENBQUMsQ0FBQztJQUNuRSxDQUFDO0lBRUQsV0FBVztJQUNYLHNCQUFzQjtRQUNwQixPQUFPLFlBQVksQ0FBQyxPQUFPLENBQUMsWUFBWSxDQUFDLHFCQUFxQixDQUFDLENBQUM7SUFDbEUsQ0FBQztJQUVELFdBQVc7SUFDWCxzQkFBc0IsQ0FBQyxPQUFlO1FBQ3BDLFlBQVksQ0FBQyxPQUFPLENBQUMsWUFBWSxDQUFDLHFCQUFxQixFQUFFLE9BQU8sQ0FBQyxDQUFDO0lBQ3BFLENBQUM7Q0FDRiIsInNvdXJjZXMiOlsid2VicGFjazovL3RhdmVybl9oZWxwZXJfdGVtcGxhdGUvLi9zcmMv5ZCM5bGC5omL5py6L2NvbmZpZy1tYW5hZ2VyLnRzPyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyDphY3nva7nrqHnkIbmqKHlnZdcbi8vIOi0n+i0o+euoeeQhuW6lOeUqOmFjee9ruOAgeW4uOmHj+WumuS5ieWSjOmFjee9ruWIneWni+WMllxuXG5pbXBvcnQgeyBTYWZlU3RvcmFnZSB9IGZyb20gJy4vdXRpbHMnO1xuXG4vLyDnsbvlnovlrprkuYlcbmV4cG9ydCBpbnRlcmZhY2UgQXBwQ29uZmlnIHtcbiAgYXZhdGFyczoge1xuICAgIHVzZXI6IHN0cmluZztcbiAgICBjaGFyOiBzdHJpbmc7XG4gIH07XG4gIG5hbWVzOiB7XG4gICAgdXNlcjogc3RyaW5nO1xuICAgIGNoYXI6IHN0cmluZztcbiAgfTtcbiAgY2hhclJlbWFyazogc3RyaW5nO1xuICBjdXJyZW50Q2hhcklkOiBzdHJpbmc7XG59XG5cbi8vIOihqOaDheWMheWumuS5iVxuZXhwb3J0IGludGVyZmFjZSBTdGlja2VyIHtcbiAgbGFiZWw6IHN0cmluZztcbiAgdXJsOiBzdHJpbmc7XG59XG5cbi8vIOW4uOmHj+WumuS5iVxuZXhwb3J0IGNvbnN0IFNUT1JBR0VfS0VZUyA9IHtcbiAgR0xPQkFMX1NUSUNLRVI6ICdibG14X3dlY2hhdF9zdGlja2Vyc19nbG9iYWwnLFxuICBDSEFSX1NUSUNLRVJfUFJFRklYOiAnYmxteF9jaGFyX3N0aWNrZXJzXycsXG4gIFBIT05FX1NJWkU6ICdibG14X3Bob25lX3NpemUnLFxuICBTVElDS0VSX1NJWkU6ICdibG14X3N0aWNrZXJfc2l6ZScsXG4gIE1PTUVOVF9OT1RJRklDQVRJT046ICdibG14X21vbWVudF9ub3RpZmljYXRpb24nLFxuICBNT01FTlRfTEFTVF9WSUVXOiAnYmxteF9tb21lbnRfbGFzdF92aWV3JyxcbiAgVVNFUl9OQU1FX1BSRUZJWDogJ2JsbXhfdXNlcl9uYW1lXycsXG4gIFVTRVJfQVZBVEFSX1BSRUZJWDogJ2JsbXhfdXNlcl9hdmF0YXJfJyxcbiAgQ0hBUl9BVkFUQVJfUFJFRklYOiAnYmxteF9jaGFyX2F2YXRhcl8nLFxuICBDSEFSX1JFTUFSS19QUkVGSVg6ICdibG14X3JlbWFya18nLFxuICBDT1ZFUl9QSE9UT19QUkVGSVg6ICdibG14X2NvdmVyX3Bob3RvXycsXG4gIFNJR05BVFVSRV9QUkVGSVg6ICdibG14X3NpZ25hdHVyZV8nLFxuICBJTlBVVF9QTEFDRUhPTERFUl9QUkVGSVg6ICdibG14X2lucHV0X3BsYWNlaG9sZGVyXycsXG4gIExBU1RfTk9USUZJRURfVkVSU0lPTjogJ2JsbXhfbGFzdF9ub3RpZmllZF92ZXJzaW9uJyxcbn0gYXMgY29uc3Q7XG5cbi8vIOaJi+acuuWwuuWvuOW4uOmHj1xuZXhwb3J0IGNvbnN0IFBIT05FX1NJWkVTID0ge1xuICBkZWZhdWx0OiAnNDguNzVyZW0nLCAvLyDpu5jorqTlsLrlr7g6IDQ4Ljc1cmVtICg3ODBweClcbiAgbWVkaXVtOiAnNDJyZW0nLCAvLyDkuK3nrYnlsLrlr7g6IDQycmVtICg2NzJweClcbiAgc21hbGw6ICczNnJlbScsIC8vIOWwj+WwuuWvuDogMzZyZW0gKDU3NnB4KVxufSBhcyBjb25zdDtcblxuLy8g6YWN572u566h55CG5Zmo57G7XG5leHBvcnQgY2xhc3MgQ29uZmlnTWFuYWdlciB7XG4gIHByaXZhdGUgY29uZmlnOiBBcHBDb25maWc7XG4gIHByaXZhdGUgZGVmYXVsdEdsb2JhbFN0aWNrZXJzOiBTdGlja2VyW10gPSBbeyBsYWJlbDogJ+WlveeahCcsIHVybDogJ2h0dHBzOi8vZmlsZXMuY2F0Ym94Lm1vZS8zajB0cGMuanBlZycgfV07XG5cbiAgY29uc3RydWN0b3IoKSB7XG4gICAgLy8g5Yid5aeL5YyW6buY6K6k6YWN572uXG4gICAgdGhpcy5jb25maWcgPSB7XG4gICAgICBhdmF0YXJzOiB7IHVzZXI6ICcnLCBjaGFyOiAnJyB9LFxuICAgICAgbmFtZXM6IHsgdXNlcjogJ1VzZXInLCBjaGFyOiAnQ2hhcmFjdGVyJyB9LFxuICAgICAgY2hhclJlbWFyazogJycsXG4gICAgICBjdXJyZW50Q2hhcklkOiAnJyxcbiAgICB9O1xuICB9XG5cbiAgLy8g6I635Y+W6YWN572uXG4gIGdldENvbmZpZygpOiBBcHBDb25maWcge1xuICAgIHJldHVybiB0aGlzLmNvbmZpZztcbiAgfVxuXG4gIC8vIOiuvue9rumFjee9rlxuICBzZXRDb25maWcoY29uZmlnOiBQYXJ0aWFsPEFwcENvbmZpZz4pOiB2b2lkIHtcbiAgICB0aGlzLmNvbmZpZyA9IHsgLi4udGhpcy5jb25maWcsIC4uLmNvbmZpZyB9O1xuICB9XG5cbiAgLy8g6I635Y+W5pi+56S65ZCN56ewXG4gIGdldERpc3BsYXlOYW1lKHR5cGU6ICd1c2VyJyB8ICdjaGFyJyk6IHN0cmluZyB7XG4gICAgaWYgKHR5cGUgPT09ICdjaGFyJykge1xuICAgICAgcmV0dXJuIHRoaXMuY29uZmlnLmNoYXJSZW1hcmsgfHwgdGhpcy5jb25maWcubmFtZXMuY2hhcjtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuY29uZmlnLm5hbWVzLnVzZXI7XG4gIH1cblxuICAvLyDmm7TmlrDlpLTlg49cbiAgdXBkYXRlQXZhdGFyKGF2YXRhclR5cGU6ICd1c2VyJyB8ICdjaGFyJywgbmV3VXJsOiBzdHJpbmcpOiB2b2lkIHtcbiAgICB0aGlzLmNvbmZpZy5hdmF0YXJzW2F2YXRhclR5cGVdID0gbmV3VXJsO1xuICAgIGNvbnN0IHN0b3JhZ2VLZXkgPVxuICAgICAgYXZhdGFyVHlwZSA9PT0gJ3VzZXInXG4gICAgICAgID8gYCR7U1RPUkFHRV9LRVlTLlVTRVJfQVZBVEFSX1BSRUZJWH0ke3RoaXMuY29uZmlnLmN1cnJlbnRDaGFySWR9YFxuICAgICAgICA6IGAke1NUT1JBR0VfS0VZUy5DSEFSX0FWQVRBUl9QUkVGSVh9JHt0aGlzLmNvbmZpZy5jdXJyZW50Q2hhcklkfWA7XG4gICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oc3RvcmFnZUtleSwgbmV3VXJsKTtcbiAgfVxuXG4gIC8vIOabtOaWsOinkuiJsuWkh+azqFxuICB1cGRhdGVDaGFyUmVtYXJrKG5ld1JlbWFyazogc3RyaW5nKTogdm9pZCB7XG4gICAgdGhpcy5jb25maWcuY2hhclJlbWFyayA9IG5ld1JlbWFyaztcbiAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShgJHtTVE9SQUdFX0tFWVMuQ0hBUl9SRU1BUktfUFJFRklYfSR7dGhpcy5jb25maWcuY3VycmVudENoYXJJZH1gLCBuZXdSZW1hcmspO1xuICB9XG5cbiAgLy8g5pu05paw55So5oi35ZCNXG4gIHVwZGF0ZVVzZXJOYW1lKG5ld05hbWU6IHN0cmluZyk6IHZvaWQge1xuICAgIHRoaXMuY29uZmlnLm5hbWVzLnVzZXIgPSBuZXdOYW1lO1xuICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKGAke1NUT1JBR0VfS0VZUy5VU0VSX05BTUVfUFJFRklYfSR7dGhpcy5jb25maWcuY3VycmVudENoYXJJZH1gLCBuZXdOYW1lKTtcbiAgfVxuXG4gIC8vIOafpeaJvuihqOaDheWMhVVSTFxuICBmaW5kU3RpY2tlclVybEJ5TmFtZShuYW1lOiBzdHJpbmcpOiBzdHJpbmcgfCB1bmRlZmluZWQge1xuICAgIGNvbnN0IGdsb2JhbFN0aWNrZXJzID0gW1xuICAgICAgLi4udGhpcy5kZWZhdWx0R2xvYmFsU3RpY2tlcnMsXG4gICAgICAuLi4oU2FmZVN0b3JhZ2UuZ2V0SXRlbTxhbnlbXT4oU1RPUkFHRV9LRVlTLkdMT0JBTF9TVElDS0VSLCBbXSkgfHwgW10pLFxuICAgIF07XG4gICAgY29uc3QgY2hhclN0aWNrZXJzID1cbiAgICAgIFNhZmVTdG9yYWdlLmdldEl0ZW08YW55W10+KGAke1NUT1JBR0VfS0VZUy5DSEFSX1NUSUNLRVJfUFJFRklYfSR7dGhpcy5jb25maWcuY3VycmVudENoYXJJZH1gLCBbXSkgfHwgW107XG4gICAgcmV0dXJuIFsuLi5nbG9iYWxTdGlja2VycywgLi4uY2hhclN0aWNrZXJzXS5maW5kKChzOiBTdGlja2VyKSA9PiBzLmxhYmVsID09PSBuYW1lKT8udXJsO1xuICB9XG5cbiAgLy8g5LuObG9jYWxTdG9yYWdl5Yqg6L296YWN572uXG4gIGFzeW5jIGxvYWRGcm9tU3RvcmFnZShjaGFyRGF0YTogYW55KTogUHJvbWlzZTx2b2lkPiB7XG4gICAgdGhpcy5jb25maWcuY3VycmVudENoYXJJZCA9IGNoYXJEYXRhLm5hbWU7XG4gICAgdGhpcy5jb25maWcubmFtZXMuY2hhciA9IGNoYXJEYXRhLm5hbWU7XG5cbiAgICAvLyDliqDovb3kv53lrZjnmoTphY3nva5cbiAgICB0aGlzLmNvbmZpZy5jaGFyUmVtYXJrID1cbiAgICAgIGxvY2FsU3RvcmFnZS5nZXRJdGVtKGAke1NUT1JBR0VfS0VZUy5DSEFSX1JFTUFSS19QUkVGSVh9JHt0aGlzLmNvbmZpZy5jdXJyZW50Q2hhcklkfWApIHx8ICcnO1xuICAgIHRoaXMuY29uZmlnLm5hbWVzLnVzZXIgPVxuICAgICAgbG9jYWxTdG9yYWdlLmdldEl0ZW0oYCR7U1RPUkFHRV9LRVlTLlVTRVJfTkFNRV9QUkVGSVh9JHt0aGlzLmNvbmZpZy5jdXJyZW50Q2hhcklkfWApIHx8ICdVc2VyJztcbiAgICB0aGlzLmNvbmZpZy5hdmF0YXJzLnVzZXIgPVxuICAgICAgbG9jYWxTdG9yYWdlLmdldEl0ZW0oYCR7U1RPUkFHRV9LRVlTLlVTRVJfQVZBVEFSX1BSRUZJWH0ke3RoaXMuY29uZmlnLmN1cnJlbnRDaGFySWR9YCkgfHwgJyc7XG5cbiAgICAvLyDliqDovb3op5LoibLlpLTlg49cbiAgICBjb25zdCBzYXZlZENoYXJBdmF0YXIgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShgJHtTVE9SQUdFX0tFWVMuQ0hBUl9BVkFUQVJfUFJFRklYfSR7dGhpcy5jb25maWcuY3VycmVudENoYXJJZH1gKTtcbiAgICBpZiAoc2F2ZWRDaGFyQXZhdGFyKSB7XG4gICAgICB0aGlzLmNvbmZpZy5hdmF0YXJzLmNoYXIgPSBzYXZlZENoYXJBdmF0YXI7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIOi/memHjOmcgOimgeS7juWklumDqOiOt+WPluinkuiJsuWktOWDj+i3r+W+hFxuICAgICAgLy8g5Zyo5a6e6ZmF5L2/55So5pe25Lya6YCa6L+H5Y+C5pWw5Lyg5YWlXG4gICAgICB0aGlzLmNvbmZpZy5hdmF0YXJzLmNoYXIgPSAnJztcbiAgICB9XG4gIH1cblxuICAvLyDojrflj5bmnIvlj4vlnIjpgJrnn6XnirbmgIFcbiAgZ2V0TW9tZW50Tm90aWZpY2F0aW9uU3RhdGUoKTogYm9vbGVhbiB7XG4gICAgY29uc3Qgbm90aWZpY2F0aW9uU3RhdGUgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShgJHtTVE9SQUdFX0tFWVMuTU9NRU5UX05PVElGSUNBVElPTn1fJHt0aGlzLmNvbmZpZy5jdXJyZW50Q2hhcklkfWApO1xuICAgIHJldHVybiBub3RpZmljYXRpb25TdGF0ZSA9PT0gJ3RydWUnO1xuICB9XG5cbiAgLy8g6K6+572u5pyL5Y+L5ZyI6YCa55+l54q25oCBXG4gIHNldE1vbWVudE5vdGlmaWNhdGlvblN0YXRlKHZhbHVlOiBib29sZWFuKTogdm9pZCB7XG4gICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oYCR7U1RPUkFHRV9LRVlTLk1PTUVOVF9OT1RJRklDQVRJT059XyR7dGhpcy5jb25maWcuY3VycmVudENoYXJJZH1gLCB2YWx1ZS50b1N0cmluZygpKTtcbiAgfVxuXG4gIC8vIOiOt+WPluacgOWQjuafpeeci+aci+WPi+WciOaXtueahOaXtumXtOaIs1xuICBnZXRMYXN0TW9tZW50Vmlld1RpbWVzdGFtcCgpOiBudW1iZXIge1xuICAgIGNvbnN0IGxhc3RWaWV3ID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oYCR7U1RPUkFHRV9LRVlTLk1PTUVOVF9MQVNUX1ZJRVd9XyR7dGhpcy5jb25maWcuY3VycmVudENoYXJJZH1gKTtcbiAgICByZXR1cm4gbGFzdFZpZXcgPyBwYXJzZUludChsYXN0VmlldywgMTApIDogMDtcbiAgfVxuXG4gIC8vIOiuvue9ruacgOWQjuafpeeci+aci+WPi+WciOaXtueahOaXtumXtOaIs1xuICBzZXRMYXN0TW9tZW50Vmlld1RpbWVzdGFtcCh0aW1lc3RhbXA6IG51bWJlcik6IHZvaWQge1xuICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKGAke1NUT1JBR0VfS0VZUy5NT01FTlRfTEFTVF9WSUVXfV8ke3RoaXMuY29uZmlnLmN1cnJlbnRDaGFySWR9YCwgdGltZXN0YW1wLnRvU3RyaW5nKCkpO1xuICB9XG5cbiAgLy8g6I635Y+W5L+d5a2Y55qE5bCB6Z2i5Zu+54mHXG4gIGdldFNhdmVkQ292ZXJQaG90bygpOiBzdHJpbmcgfCBudWxsIHtcbiAgICByZXR1cm4gbG9jYWxTdG9yYWdlLmdldEl0ZW0oYCR7U1RPUkFHRV9LRVlTLkNPVkVSX1BIT1RPX1BSRUZJWH0ke3RoaXMuY29uZmlnLmN1cnJlbnRDaGFySWR9YCk7XG4gIH1cblxuICAvLyDorr7nva7lsIHpnaLlm77niYdcbiAgc2V0Q292ZXJQaG90byh1cmw6IHN0cmluZyk6IHZvaWQge1xuICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKGAke1NUT1JBR0VfS0VZUy5DT1ZFUl9QSE9UT19QUkVGSVh9JHt0aGlzLmNvbmZpZy5jdXJyZW50Q2hhcklkfWAsIHVybCk7XG4gIH1cblxuICAvLyDojrflj5bkv53lrZjnmoTkuKrmgKfnrb7lkI1cbiAgZ2V0U2F2ZWRTaWduYXR1cmUoKTogc3RyaW5nIHtcbiAgICByZXR1cm4gbG9jYWxTdG9yYWdlLmdldEl0ZW0oYCR7U1RPUkFHRV9LRVlTLlNJR05BVFVSRV9QUkVGSVh9JHt0aGlzLmNvbmZpZy5jdXJyZW50Q2hhcklkfWApIHx8ICcnO1xuICB9XG5cbiAgLy8g6K6+572u5Liq5oCn562+5ZCNXG4gIHNldFNpZ25hdHVyZShzaWduYXR1cmU6IHN0cmluZyk6IHZvaWQge1xuICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKGAke1NUT1JBR0VfS0VZUy5TSUdOQVRVUkVfUFJFRklYfSR7dGhpcy5jb25maWcuY3VycmVudENoYXJJZH1gLCBzaWduYXR1cmUpO1xuICB9XG5cbiAgLy8g6I635Y+W5L+d5a2Y55qE6L6T5YWl5qGG5Y2g5L2N56ymXG4gIGdldFNhdmVkSW5wdXRQbGFjZWhvbGRlcigpOiBzdHJpbmcgfCBudWxsIHtcbiAgICByZXR1cm4gbG9jYWxTdG9yYWdlLmdldEl0ZW0oYCR7U1RPUkFHRV9LRVlTLklOUFVUX1BMQUNFSE9MREVSX1BSRUZJWH0ke3RoaXMuY29uZmlnLmN1cnJlbnRDaGFySWR9YCk7XG4gIH1cblxuICAvLyDorr7nva7ovpPlhaXmoYbljaDkvY3nrKZcbiAgc2V0SW5wdXRQbGFjZWhvbGRlcihwbGFjZWhvbGRlcjogc3RyaW5nKTogdm9pZCB7XG4gICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oYCR7U1RPUkFHRV9LRVlTLklOUFVUX1BMQUNFSE9MREVSX1BSRUZJWH0ke3RoaXMuY29uZmlnLmN1cnJlbnRDaGFySWR9YCwgcGxhY2Vob2xkZXIpO1xuICB9XG5cbiAgLy8g6I635Y+W5omL5py65bC65a+46K6+572uXG4gIGdldFBob25lU2l6ZSgpOiAnZGVmYXVsdCcgfCAnbWVkaXVtJyB8ICdzbWFsbCcge1xuICAgIGNvbnN0IHNhdmVkU2l6ZSA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKFNUT1JBR0VfS0VZUy5QSE9ORV9TSVpFKSB8fCAnZGVmYXVsdCc7XG4gICAgcmV0dXJuIHNhdmVkU2l6ZSA9PT0gJ21lZGl1bScgPyAnbWVkaXVtJyA6IHNhdmVkU2l6ZSA9PT0gJ3NtYWxsJyA/ICdzbWFsbCcgOiAnZGVmYXVsdCc7XG4gIH1cblxuICAvLyDorr7nva7miYvmnLrlsLrlr7hcbiAgc2V0UGhvbmVTaXplKHNpemU6ICdkZWZhdWx0JyB8ICdtZWRpdW0nIHwgJ3NtYWxsJyk6IHZvaWQge1xuICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKFNUT1JBR0VfS0VZUy5QSE9ORV9TSVpFLCBzaXplKTtcbiAgfVxuXG4gIC8vIOiOt+WPluihqOaDheWMheWwuuWvuOiuvue9rlxuICBnZXRTdGlja2VyU2l6ZSgpOiBudW1iZXIge1xuICAgIGNvbnN0IHNhdmVkU2l6ZSA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKFNUT1JBR0VfS0VZUy5TVElDS0VSX1NJWkUpIHx8ICcxMjAnO1xuICAgIHJldHVybiBwYXJzZUludChzYXZlZFNpemUsIDEwKTtcbiAgfVxuXG4gIC8vIOiuvue9ruihqOaDheWMheWwuuWvuFxuICBzZXRTdGlja2VyU2l6ZShzaXplOiBudW1iZXIpOiB2b2lkIHtcbiAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShTVE9SQUdFX0tFWVMuU1RJQ0tFUl9TSVpFLCBzaXplLnRvU3RyaW5nKCkpO1xuICB9XG5cbiAgLy8g6I635Y+W54mI5pys6YCa55+l54q25oCBXG4gIGdldExhc3ROb3RpZmllZFZlcnNpb24oKTogc3RyaW5nIHwgbnVsbCB7XG4gICAgcmV0dXJuIGxvY2FsU3RvcmFnZS5nZXRJdGVtKFNUT1JBR0VfS0VZUy5MQVNUX05PVElGSUVEX1ZFUlNJT04pO1xuICB9XG5cbiAgLy8g6K6+572u54mI5pys6YCa55+l54q25oCBXG4gIHNldExhc3ROb3RpZmllZFZlcnNpb24odmVyc2lvbjogc3RyaW5nKTogdm9pZCB7XG4gICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oU1RPUkFHRV9LRVlTLkxBU1RfTk9USUZJRURfVkVSU0lPTiwgdmVyc2lvbik7XG4gIH1cbn1cbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/同层手机/config-manager.ts\n")},"./src/同层手机/debug-data.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   addTestEntry: () => (/* binding */ addTestEntry),\n/* harmony export */   clearDebugData: () => (/* binding */ clearDebugData),\n/* harmony export */   debugData: () => (/* binding */ debugData),\n/* harmony export */   loadDebugData: () => (/* binding */ loadDebugData),\n/* harmony export */   showDebugInfo: () => (/* binding */ showDebugInfo),\n/* harmony export */   showTestEntryTypes: () => (/* binding */ showTestEntryTypes)\n/* harmony export */ });\n// debug-data.ts\n// 此文件包含用于测试和调试的数据\n// 在发布前应删除或注释掉对此文件的引用\n// 获取当前日期和时间\nconst getCurrentDate = () => {\n    const now = new Date();\n    return `${now.getFullYear()}-${(now.getMonth() + 1).toString().padStart(2, '0')}-${now\n        .getDate()\n        .toString()\n        .padStart(2, '0')}`;\n};\nconst getCurrentTime = () => {\n    const now = new Date();\n    return `${now.getHours().toString().padStart(2, '0')}:${now.getMinutes().toString().padStart(2, '0')}`;\n};\n// 生成随机ID\nconst generateId = (prefix) => {\n    return `${prefix}_${Date.now()}_${Math.floor(Math.random() * 1000)}`;\n};\n// 测试数据\nconst debugData = [\n    // 系统时间条目\n    {\n        type: 'time',\n        content: {\n            date: getCurrentDate(),\n            time: getCurrentTime(),\n        },\n    },\n    // 系统事件条目\n    {\n        type: 'event',\n        content: {\n            date: getCurrentDate(),\n            time: getCurrentTime(),\n            description: '调试模式已启用',\n        },\n    },\n    // 文本消息 - 用户\n    {\n        id: generateId('msg'),\n        type: 'message',\n        sender: 'me',\n        content: '你好，这是一条测试消息',\n    },\n    // 文本消息 - AI\n    {\n        id: generateId('msg'),\n        type: 'message',\n        sender: 'them',\n        content: '你好！很高兴见到你，这是一条AI回复的测试消息。',\n    },\n    // 表情消息 - 用户\n    {\n        id: generateId('sticker'),\n        type: 'sticker',\n        sender: 'me',\n        content: '好的',\n    },\n    // 表情消息 - AI\n    {\n        id: generateId('sticker'),\n        type: 'sticker',\n        sender: 'them',\n        content: '好的',\n    },\n    // 图片消息 - 用户\n    {\n        id: generateId('img'),\n        type: 'image',\n        sender: 'me',\n        content: {\n            type: 'url',\n            value: 'https://gitgud.io/lolodesu/lolobabytutorial/-/raw/master/lologame/素材/wallpaper/蓝色_1.jpg',\n        },\n    },\n    // 图片消息 - AI\n    {\n        id: generateId('img'),\n        type: 'image',\n        sender: 'them',\n        content: {\n            type: 'url',\n            value: 'https://gitgud.io/lolodesu/lolobabytutorial/-/raw/master/lologame/素材/wallpaper/粉色星星_1.jpg',\n        },\n    },\n    // 图片消息 - 描述类型\n    {\n        id: generateId('img'),\n        type: 'image',\n        sender: 'them',\n        content: {\n            type: 'desc',\n            value: '这是一张描述类型的图片，实际上不会显示图片内容',\n        },\n    },\n    // 语音消息 - 用户\n    {\n        id: generateId('voice'),\n        type: 'voice',\n        sender: 'me',\n        content: {\n            text: '这是一条测试语音消息的文本内容',\n            duration: 5,\n        },\n    },\n    // 语音消息 - AI\n    {\n        id: generateId('voice'),\n        type: 'voice',\n        sender: 'them',\n        content: {\n            text: '这是AI回复的语音消息文本内容',\n            duration: 8,\n        },\n    },\n    // 位置消息 - 用户\n    {\n        id: generateId('loc'),\n        type: 'location',\n        sender: 'me',\n        content: '北京市朝阳区三里屯',\n    },\n    // 位置消息 - AI\n    {\n        id: generateId('loc'),\n        type: 'location',\n        sender: 'them',\n        content: '上海市浦东新区陆家嘴',\n    },\n    // 转账消息 - 用户发送\n    {\n        id: generateId('transfer'),\n        type: 'transfer',\n        sender: 'me',\n        content: JSON.stringify({\n            amount: '88.88',\n            note: '测试转账',\n            status: 'sent',\n        }),\n        data: {\n            amount: '88.88',\n            note: '测试转账',\n            status: 'sent',\n        },\n    },\n    // 转账消息 - AI接受\n    {\n        id: generateId('transfer'),\n        type: 'transfer',\n        sender: 'them',\n        content: JSON.stringify({\n            amount: '88.88',\n            note: '测试转账',\n            status: 'accepted',\n        }),\n        data: {\n            amount: '88.88',\n            note: '测试转账',\n            status: 'accepted',\n        },\n    },\n    // 转账消息 - AI发送\n    {\n        id: generateId('transfer'),\n        type: 'transfer',\n        sender: 'them',\n        content: JSON.stringify({\n            amount: '66.66',\n            note: 'AI测试转账',\n            status: 'sent',\n        }),\n        data: {\n            amount: '66.66',\n            note: 'AI测试转账',\n            status: 'sent',\n        },\n    },\n    // 转账消息 - 用户接受\n    {\n        id: generateId('transfer'),\n        type: 'transfer',\n        sender: 'me',\n        content: JSON.stringify({\n            amount: '66.66',\n            note: 'AI测试转账',\n            status: 'accepted',\n        }),\n        data: {\n            amount: '66.66',\n            note: 'AI测试转账',\n            status: 'accepted',\n        },\n    },\n    // 礼物消息 - 用户发送\n    {\n        id: generateId('gift'),\n        type: 'gift',\n        sender: 'me',\n        content: JSON.stringify({\n            name: '生日蛋糕',\n            price: '99.99',\n            status: 'sent',\n        }),\n        data: {\n            name: '生日蛋糕',\n            price: '99.99',\n            status: 'sent',\n        },\n    },\n    // 礼物消息 - AI接受\n    {\n        id: generateId('gift'),\n        type: 'gift',\n        sender: 'them',\n        content: JSON.stringify({\n            name: '生日蛋糕',\n            status: 'accepted',\n        }),\n        data: {\n            name: '生日蛋糕',\n            status: 'accepted',\n        },\n    },\n    // 礼物消息 - AI发送\n    {\n        id: generateId('gift'),\n        type: 'gift',\n        sender: 'them',\n        content: JSON.stringify({\n            name: '巧克力',\n            price: '39.99',\n            status: 'sent',\n        }),\n        data: {\n            name: '巧克力',\n            price: '39.99',\n            status: 'sent',\n        },\n    },\n    // 礼物消息 - 用户接受\n    {\n        id: generateId('gift'),\n        type: 'gift',\n        sender: 'me',\n        content: JSON.stringify({\n            name: '巧克力',\n            status: 'accepted',\n        }),\n        data: {\n            name: '巧克力',\n            status: 'accepted',\n        },\n    },\n    // 文件消息 - 用户\n    {\n        id: generateId('file'),\n        type: 'file',\n        sender: 'me',\n        content: '测试文档.docx',\n    },\n    // 文件消息 - AI\n    {\n        id: generateId('file'),\n        type: 'file',\n        sender: 'them',\n        content: '重要资料.pdf',\n    },\n    // 朋友圈 - 用户发布\n    {\n        key: 'USER_MOMENT',\n        data: {\n            text: '这是用户发布的朋友圈测试内容',\n            image: 'https://gitgud.io/lolodesu/lolobabytutorial/-/raw/master/lologame/素材/wallpaper/蓝色_2.jpg',\n            image_type: 'url',\n            date: getCurrentDate(),\n            time: getCurrentTime(),\n        },\n    },\n    // 朋友圈 - AI发布\n    {\n        key: 'CHAR_MOMENT',\n        data: {\n            text: '这是AI发布的朋友圈测试内容',\n            image: 'https://gitgud.io/lolodesu/lolobabytutorial/-/raw/master/lologame/素材/wallpaper/粉色小猫_1.jpg',\n            image_type: 'url',\n            date: getCurrentDate(),\n            time: getCurrentTime(),\n        },\n    },\n    // 朋友圈 - 纯文本\n    {\n        key: 'CHAR_MOMENT',\n        data: {\n            text: '这是一条没有图片的朋友圈',\n            image: '',\n            image_type: 'none',\n            date: getCurrentDate(),\n            time: getCurrentTime(),\n        },\n    },\n    // 朋友圈 - 图片描述\n    {\n        key: 'USER_MOMENT',\n        data: {\n            text: '这是带有图片描述的朋友圈',\n            image: '一张美丽的风景照片',\n            image_type: 'desc',\n            image_desc: '一张美丽的风景照片',\n            date: getCurrentDate(),\n            time: getCurrentTime(),\n        },\n    },\n    // 朋友圈评论 - 用户评论\n    {\n        key: 'USER_COMMENT',\n        data: {\n            text: '这是用户的评论',\n            target_post_id: 1,\n        },\n    },\n    // 朋友圈评论 - AI评论\n    {\n        key: 'CHAR_COMMENT',\n        data: {\n            text: '这是AI的评论',\n            target_post_id: 0,\n        },\n    },\n    // 朋友圈点赞 - 用户点赞\n    {\n        key: 'USER_LIKE',\n        data: {\n            target_post_id: 1,\n        },\n    },\n    // 朋友圈点赞 - AI点赞\n    {\n        key: 'CHAR_LIKE',\n        data: {\n            target_post_id: 0,\n        },\n    },\n    // 撤回消息示例\n    {\n        id: generateId('msg'),\n        type: 'message',\n        sender: 'them',\n        content: '这条消息将被撤回',\n        recalled: true,\n        recalled_content: '这条消息将被撤回',\n        recalled_timestamp: getCurrentTime(),\n    },\n];\n// 加载调试数据的函数\nfunction loadDebugData(blmxManager) {\n    console.log('[DEBUG] 正在加载调试数据...');\n    debugData.forEach(entry => {\n        blmxManager.addEntry(entry);\n    });\n    console.log('[DEBUG] 调试数据加载完成，共加载', debugData.length, '条数据');\n}\n// 清除调试数据的函数\nfunction clearDebugData(blmxManager) {\n    console.log('[DEBUG] 正在清除调试数据...');\n    blmxManager.logEntries = [];\n    console.log('[DEBUG] 调试数据已清除');\n}\n// 添加单个测试数据的函数，方便在控制台中使用\nfunction addTestEntry(blmxManager, entryType) {\n    let entry = null;\n    switch (entryType) {\n        case 'text-user':\n            entry = {\n                id: generateId('msg'),\n                type: 'message',\n                sender: 'me',\n                content: '这是一条测试文本消息',\n            };\n            break;\n        case 'text-char':\n            entry = {\n                id: generateId('msg'),\n                type: 'message',\n                sender: 'them',\n                content: '这是一条AI回复的测试消息',\n            };\n            break;\n        case 'sticker-user':\n            entry = {\n                id: generateId('sticker'),\n                type: 'sticker',\n                sender: 'me',\n                content: '好的',\n            };\n            break;\n        case 'sticker-char':\n            entry = {\n                id: generateId('sticker'),\n                type: 'sticker',\n                sender: 'them',\n                content: '好的',\n            };\n            break;\n        case 'image-user':\n            entry = {\n                id: generateId('img'),\n                type: 'image',\n                sender: 'me',\n                content: {\n                    type: 'url',\n                    value: 'https://gitgud.io/lolodesu/lolobabytutorial/-/raw/master/lologame/素材/wallpaper/蓝色_1.jpg',\n                },\n            };\n            break;\n        case 'image-char':\n            entry = {\n                id: generateId('img'),\n                type: 'image',\n                sender: 'them',\n                content: {\n                    type: 'url',\n                    value: 'https://gitgud.io/lolodesu/lolobabytutorial/-/raw/master/lologame/素材/wallpaper/粉色星星_1.jpg',\n                },\n            };\n            break;\n        case 'voice-user':\n            entry = {\n                id: generateId('voice'),\n                type: 'voice',\n                sender: 'me',\n                content: {\n                    text: '这是一条测试语音消息',\n                    duration: 3,\n                },\n            };\n            break;\n        case 'voice-char':\n            entry = {\n                id: generateId('voice'),\n                type: 'voice',\n                sender: 'them',\n                content: {\n                    text: '这是AI的测试语音消息',\n                    duration: 4,\n                },\n            };\n            break;\n        case 'transfer-user':\n            entry = {\n                id: generateId('transfer'),\n                type: 'transfer',\n                sender: 'me',\n                content: JSON.stringify({\n                    amount: '88.88',\n                    note: '测试转账',\n                    status: 'sent',\n                }),\n                data: {\n                    amount: '88.88',\n                    note: '测试转账',\n                    status: 'sent',\n                },\n            };\n            break;\n        case 'transfer-char':\n            entry = {\n                id: generateId('transfer'),\n                type: 'transfer',\n                sender: 'them',\n                content: JSON.stringify({\n                    amount: '66.66',\n                    note: 'AI测试转账',\n                    status: 'sent',\n                }),\n                data: {\n                    amount: '66.66',\n                    note: 'AI测试转账',\n                    status: 'sent',\n                },\n            };\n            break;\n        case 'gift-user':\n            entry = {\n                id: generateId('gift'),\n                type: 'gift',\n                sender: 'me',\n                content: JSON.stringify({\n                    name: '生日蛋糕',\n                    price: '99.99',\n                    status: 'sent',\n                }),\n                data: {\n                    name: '生日蛋糕',\n                    price: '99.99',\n                    status: 'sent',\n                },\n            };\n            break;\n        case 'gift-char':\n            entry = {\n                id: generateId('gift'),\n                type: 'gift',\n                sender: 'them',\n                content: JSON.stringify({\n                    name: '巧克力',\n                    price: '39.99',\n                    status: 'sent',\n                }),\n                data: {\n                    name: '巧克力',\n                    price: '39.99',\n                    status: 'sent',\n                },\n            };\n            break;\n        case 'moment-user':\n            entry = {\n                key: 'USER_MOMENT',\n                data: {\n                    text: '用户朋友圈测试',\n                    image: 'https://gitgud.io/lolodesu/lolobabytutorial/-/raw/master/lologame/素材/wallpaper/蓝色_2.jpg',\n                    image_type: 'url',\n                    date: getCurrentDate(),\n                    time: getCurrentTime(),\n                },\n            };\n            break;\n        case 'moment-char':\n            entry = {\n                key: 'CHAR_MOMENT',\n                data: {\n                    text: 'AI朋友圈测试',\n                    image: 'https://gitgud.io/lolodesu/lolobabytutorial/-/raw/master/lologame/素材/wallpaper/粉色小猫_1.jpg',\n                    image_type: 'url',\n                    date: getCurrentDate(),\n                    time: getCurrentTime(),\n                },\n            };\n            break;\n        default:\n            console.error('[DEBUG] 未知的测试数据类型:', entryType);\n            return;\n    }\n    if (entry) {\n        blmxManager.addEntry(entry);\n        blmxManager.persistLogToStorage();\n        console.log(`[DEBUG] 已添加测试数据: ${entryType}`, entry);\n    }\n}\n// 显示测试条目类型\nfunction showTestEntryTypes() {\n    console.log('[BLMX Debug] 可用的测试条目类型:');\n    console.log('- message: 文本消息');\n    console.log('- sticker: 表情消息');\n    console.log('- image: 图片消息');\n    console.log('- voice: 语音消息');\n    console.log('- location: 位置消息');\n    console.log('- transfer: 转账消息');\n    console.log('- file: 文件消息');\n    console.log('- gift: 礼物消息');\n    console.log('- moment: 朋友圈动态');\n    console.log('- comment: 朋友圈评论');\n    console.log('- like: 朋友圈点赞');\n    console.log('- recall: 消息撤回');\n    console.log('- system: 系统消息');\n    console.log('- time: 时间戳');\n    console.log('- event: 事件日志');\n}\n// 显示调试信息\nfunction showDebugInfo(appController) {\n    console.log('[BLMX Debug] 调试信息:');\n    try {\n        // 确保能够获取到这些方法\n        const rawAiResponse = appController.getRawAiResponse ? appController.getRawAiResponse() : '无法获取';\n        const fullPrompt = appController.getFullPrompt ? appController.getFullPrompt() : '无法获取';\n        const latestAiRawResponse = appController.getLatestAiRawResponse\n            ? appController.getLatestAiRawResponse()\n            : '无法获取';\n        const latestSentPrompt = appController.getLatestSentPrompt ? appController.getLatestSentPrompt() : '无法获取';\n        console.log('- 原始AI响应:', rawAiResponse);\n        console.log('- 完整提示词:', fullPrompt);\n        console.log('- 最新处理后的AI响应:', latestAiRawResponse);\n        console.log('- 最新发送给AI的提示:', latestSentPrompt);\n    }\n    catch (error) {\n        console.error('[BLMX Debug] 获取调试信息时出错:', error);\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LENBQUMsQ0FBQztJQUNqRCxDQUFDO0lBQUMsT0FBTyxLQUFLLEVBQUUsQ0FBQztRQUNmLE9BQU8sQ0FBQyxLQUFLLENBQUMseUJBQXlCLEVBQUUsS0FBSyxDQUFDLENBQUM7SUFDbEQsQ0FBQztBQUNILENBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly90YXZlcm5faGVscGVyX3RlbXBsYXRlLy4vc3JjL+WQjOWxguaJi+acui9kZWJ1Zy1kYXRhLnRzPyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBkZWJ1Zy1kYXRhLnRzXG4vLyDmraTmlofku7bljIXlkKvnlKjkuo7mtYvor5XlkozosIPor5XnmoTmlbDmja5cbi8vIOWcqOWPkeW4g+WJjeW6lOWIoOmZpOaIluazqOmHiuaOieWvueatpOaWh+S7tueahOW8leeUqFxuXG5pbXBvcnQgeyBMb2dFbnRyeSB9IGZyb20gJy4vc2NyaXB0JztcblxuLy8g6I635Y+W5b2T5YmN5pel5pyf5ZKM5pe26Ze0XG5jb25zdCBnZXRDdXJyZW50RGF0ZSA9ICgpOiBzdHJpbmcgPT4ge1xuICBjb25zdCBub3cgPSBuZXcgRGF0ZSgpO1xuICByZXR1cm4gYCR7bm93LmdldEZ1bGxZZWFyKCl9LSR7KG5vdy5nZXRNb250aCgpICsgMSkudG9TdHJpbmcoKS5wYWRTdGFydCgyLCAnMCcpfS0ke25vd1xuICAgIC5nZXREYXRlKClcbiAgICAudG9TdHJpbmcoKVxuICAgIC5wYWRTdGFydCgyLCAnMCcpfWA7XG59O1xuXG5jb25zdCBnZXRDdXJyZW50VGltZSA9ICgpOiBzdHJpbmcgPT4ge1xuICBjb25zdCBub3cgPSBuZXcgRGF0ZSgpO1xuICByZXR1cm4gYCR7bm93LmdldEhvdXJzKCkudG9TdHJpbmcoKS5wYWRTdGFydCgyLCAnMCcpfToke25vdy5nZXRNaW51dGVzKCkudG9TdHJpbmcoKS5wYWRTdGFydCgyLCAnMCcpfWA7XG59O1xuXG4vLyDnlJ/miJDpmo/mnLpJRFxuY29uc3QgZ2VuZXJhdGVJZCA9IChwcmVmaXg6IHN0cmluZyk6IHN0cmluZyA9PiB7XG4gIHJldHVybiBgJHtwcmVmaXh9XyR7RGF0ZS5ub3coKX1fJHtNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAxMDAwKX1gO1xufTtcblxuLy8g5rWL6K+V5pWw5o2uXG5leHBvcnQgY29uc3QgZGVidWdEYXRhOiBMb2dFbnRyeVtdID0gW1xuICAvLyDns7vnu5/ml7bpl7TmnaHnm65cbiAge1xuICAgIHR5cGU6ICd0aW1lJyxcbiAgICBjb250ZW50OiB7XG4gICAgICBkYXRlOiBnZXRDdXJyZW50RGF0ZSgpLFxuICAgICAgdGltZTogZ2V0Q3VycmVudFRpbWUoKSxcbiAgICB9LFxuICB9LFxuXG4gIC8vIOezu+e7n+S6i+S7tuadoeebrlxuICB7XG4gICAgdHlwZTogJ2V2ZW50JyxcbiAgICBjb250ZW50OiB7XG4gICAgICBkYXRlOiBnZXRDdXJyZW50RGF0ZSgpLFxuICAgICAgdGltZTogZ2V0Q3VycmVudFRpbWUoKSxcbiAgICAgIGRlc2NyaXB0aW9uOiAn6LCD6K+V5qih5byP5bey5ZCv55SoJyxcbiAgICB9LFxuICB9LFxuXG4gIC8vIOaWh+acrOa2iOaBryAtIOeUqOaIt1xuICB7XG4gICAgaWQ6IGdlbmVyYXRlSWQoJ21zZycpLFxuICAgIHR5cGU6ICdtZXNzYWdlJyxcbiAgICBzZW5kZXI6ICdtZScsXG4gICAgY29udGVudDogJ+S9oOWlve+8jOi/meaYr+S4gOadoea1i+ivlea2iOaBrycsXG4gIH0sXG5cbiAgLy8g5paH5pys5raI5oGvIC0gQUlcbiAge1xuICAgIGlkOiBnZW5lcmF0ZUlkKCdtc2cnKSxcbiAgICB0eXBlOiAnbWVzc2FnZScsXG4gICAgc2VuZGVyOiAndGhlbScsXG4gICAgY29udGVudDogJ+S9oOWlve+8geW+iOmrmOWFtOingeWIsOS9oO+8jOi/meaYr+S4gOadoUFJ5Zue5aSN55qE5rWL6K+V5raI5oGv44CCJyxcbiAgfSxcblxuICAvLyDooajmg4Xmtojmga8gLSDnlKjmiLdcbiAge1xuICAgIGlkOiBnZW5lcmF0ZUlkKCdzdGlja2VyJyksXG4gICAgdHlwZTogJ3N0aWNrZXInLFxuICAgIHNlbmRlcjogJ21lJyxcbiAgICBjb250ZW50OiAn5aW955qEJyxcbiAgfSxcblxuICAvLyDooajmg4Xmtojmga8gLSBBSVxuICB7XG4gICAgaWQ6IGdlbmVyYXRlSWQoJ3N0aWNrZXInKSxcbiAgICB0eXBlOiAnc3RpY2tlcicsXG4gICAgc2VuZGVyOiAndGhlbScsXG4gICAgY29udGVudDogJ+WlveeahCcsXG4gIH0sXG5cbiAgLy8g5Zu+54mH5raI5oGvIC0g55So5oi3XG4gIHtcbiAgICBpZDogZ2VuZXJhdGVJZCgnaW1nJyksXG4gICAgdHlwZTogJ2ltYWdlJyxcbiAgICBzZW5kZXI6ICdtZScsXG4gICAgY29udGVudDoge1xuICAgICAgdHlwZTogJ3VybCcsXG4gICAgICB2YWx1ZTogJ2h0dHBzOi8vZ2l0Z3VkLmlvL2xvbG9kZXN1L2xvbG9iYWJ5dHV0b3JpYWwvLS9yYXcvbWFzdGVyL2xvbG9nYW1lL+e0oOadkC93YWxscGFwZXIv6JOd6ImyXzEuanBnJyxcbiAgICB9LFxuICB9LFxuXG4gIC8vIOWbvueJh+a2iOaBryAtIEFJXG4gIHtcbiAgICBpZDogZ2VuZXJhdGVJZCgnaW1nJyksXG4gICAgdHlwZTogJ2ltYWdlJyxcbiAgICBzZW5kZXI6ICd0aGVtJyxcbiAgICBjb250ZW50OiB7XG4gICAgICB0eXBlOiAndXJsJyxcbiAgICAgIHZhbHVlOiAnaHR0cHM6Ly9naXRndWQuaW8vbG9sb2Rlc3UvbG9sb2JhYnl0dXRvcmlhbC8tL3Jhdy9tYXN0ZXIvbG9sb2dhbWUv57Sg5p2QL3dhbGxwYXBlci/nsonoibLmmJ/mmJ9fMS5qcGcnLFxuICAgIH0sXG4gIH0sXG5cbiAgLy8g5Zu+54mH5raI5oGvIC0g5o+P6L+w57G75Z6LXG4gIHtcbiAgICBpZDogZ2VuZXJhdGVJZCgnaW1nJyksXG4gICAgdHlwZTogJ2ltYWdlJyxcbiAgICBzZW5kZXI6ICd0aGVtJyxcbiAgICBjb250ZW50OiB7XG4gICAgICB0eXBlOiAnZGVzYycsXG4gICAgICB2YWx1ZTogJ+i/meaYr+S4gOW8oOaPj+i/sOexu+Wei+eahOWbvueJh++8jOWunumZheS4iuS4jeS8muaYvuekuuWbvueJh+WGheWuuScsXG4gICAgfSxcbiAgfSxcblxuICAvLyDor63pn7Pmtojmga8gLSDnlKjmiLdcbiAge1xuICAgIGlkOiBnZW5lcmF0ZUlkKCd2b2ljZScpLFxuICAgIHR5cGU6ICd2b2ljZScsXG4gICAgc2VuZGVyOiAnbWUnLFxuICAgIGNvbnRlbnQ6IHtcbiAgICAgIHRleHQ6ICfov5nmmK/kuIDmnaHmtYvor5Xor63pn7Pmtojmga/nmoTmlofmnKzlhoXlrrknLFxuICAgICAgZHVyYXRpb246IDUsXG4gICAgfSxcbiAgfSxcblxuICAvLyDor63pn7Pmtojmga8gLSBBSVxuICB7XG4gICAgaWQ6IGdlbmVyYXRlSWQoJ3ZvaWNlJyksXG4gICAgdHlwZTogJ3ZvaWNlJyxcbiAgICBzZW5kZXI6ICd0aGVtJyxcbiAgICBjb250ZW50OiB7XG4gICAgICB0ZXh0OiAn6L+Z5pivQUnlm57lpI3nmoTor63pn7Pmtojmga/mlofmnKzlhoXlrrknLFxuICAgICAgZHVyYXRpb246IDgsXG4gICAgfSxcbiAgfSxcblxuICAvLyDkvY3nva7mtojmga8gLSDnlKjmiLdcbiAge1xuICAgIGlkOiBnZW5lcmF0ZUlkKCdsb2MnKSxcbiAgICB0eXBlOiAnbG9jYXRpb24nLFxuICAgIHNlbmRlcjogJ21lJyxcbiAgICBjb250ZW50OiAn5YyX5Lqs5biC5pyd6Ziz5Yy65LiJ6YeM5bGvJyxcbiAgfSxcblxuICAvLyDkvY3nva7mtojmga8gLSBBSVxuICB7XG4gICAgaWQ6IGdlbmVyYXRlSWQoJ2xvYycpLFxuICAgIHR5cGU6ICdsb2NhdGlvbicsXG4gICAgc2VuZGVyOiAndGhlbScsXG4gICAgY29udGVudDogJ+S4iua1t+W4gua1puS4nOaWsOWMuumZhuWutuWYtCcsXG4gIH0sXG5cbiAgLy8g6L2s6LSm5raI5oGvIC0g55So5oi35Y+R6YCBXG4gIHtcbiAgICBpZDogZ2VuZXJhdGVJZCgndHJhbnNmZXInKSxcbiAgICB0eXBlOiAndHJhbnNmZXInLFxuICAgIHNlbmRlcjogJ21lJyxcbiAgICBjb250ZW50OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICBhbW91bnQ6ICc4OC44OCcsXG4gICAgICBub3RlOiAn5rWL6K+V6L2s6LSmJyxcbiAgICAgIHN0YXR1czogJ3NlbnQnLFxuICAgIH0pLFxuICAgIGRhdGE6IHtcbiAgICAgIGFtb3VudDogJzg4Ljg4JyxcbiAgICAgIG5vdGU6ICfmtYvor5XovazotKYnLFxuICAgICAgc3RhdHVzOiAnc2VudCcsXG4gICAgfSxcbiAgfSxcblxuICAvLyDovazotKbmtojmga8gLSBBSeaOpeWPl1xuICB7XG4gICAgaWQ6IGdlbmVyYXRlSWQoJ3RyYW5zZmVyJyksXG4gICAgdHlwZTogJ3RyYW5zZmVyJyxcbiAgICBzZW5kZXI6ICd0aGVtJyxcbiAgICBjb250ZW50OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICBhbW91bnQ6ICc4OC44OCcsXG4gICAgICBub3RlOiAn5rWL6K+V6L2s6LSmJyxcbiAgICAgIHN0YXR1czogJ2FjY2VwdGVkJyxcbiAgICB9KSxcbiAgICBkYXRhOiB7XG4gICAgICBhbW91bnQ6ICc4OC44OCcsXG4gICAgICBub3RlOiAn5rWL6K+V6L2s6LSmJyxcbiAgICAgIHN0YXR1czogJ2FjY2VwdGVkJyxcbiAgICB9LFxuICB9LFxuXG4gIC8vIOi9rOi0pua2iOaBryAtIEFJ5Y+R6YCBXG4gIHtcbiAgICBpZDogZ2VuZXJhdGVJZCgndHJhbnNmZXInKSxcbiAgICB0eXBlOiAndHJhbnNmZXInLFxuICAgIHNlbmRlcjogJ3RoZW0nLFxuICAgIGNvbnRlbnQ6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgIGFtb3VudDogJzY2LjY2JyxcbiAgICAgIG5vdGU6ICdBSea1i+ivlei9rOi0picsXG4gICAgICBzdGF0dXM6ICdzZW50JyxcbiAgICB9KSxcbiAgICBkYXRhOiB7XG4gICAgICBhbW91bnQ6ICc2Ni42NicsXG4gICAgICBub3RlOiAnQUnmtYvor5XovazotKYnLFxuICAgICAgc3RhdHVzOiAnc2VudCcsXG4gICAgfSxcbiAgfSxcblxuICAvLyDovazotKbmtojmga8gLSDnlKjmiLfmjqXlj5dcbiAge1xuICAgIGlkOiBnZW5lcmF0ZUlkKCd0cmFuc2ZlcicpLFxuICAgIHR5cGU6ICd0cmFuc2ZlcicsXG4gICAgc2VuZGVyOiAnbWUnLFxuICAgIGNvbnRlbnQ6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgIGFtb3VudDogJzY2LjY2JyxcbiAgICAgIG5vdGU6ICdBSea1i+ivlei9rOi0picsXG4gICAgICBzdGF0dXM6ICdhY2NlcHRlZCcsXG4gICAgfSksXG4gICAgZGF0YToge1xuICAgICAgYW1vdW50OiAnNjYuNjYnLFxuICAgICAgbm90ZTogJ0FJ5rWL6K+V6L2s6LSmJyxcbiAgICAgIHN0YXR1czogJ2FjY2VwdGVkJyxcbiAgICB9LFxuICB9LFxuXG4gIC8vIOekvOeJqea2iOaBryAtIOeUqOaIt+WPkemAgVxuICB7XG4gICAgaWQ6IGdlbmVyYXRlSWQoJ2dpZnQnKSxcbiAgICB0eXBlOiAnZ2lmdCcsXG4gICAgc2VuZGVyOiAnbWUnLFxuICAgIGNvbnRlbnQ6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgIG5hbWU6ICfnlJ/ml6Xom4vns5UnLFxuICAgICAgcHJpY2U6ICc5OS45OScsXG4gICAgICBzdGF0dXM6ICdzZW50JyxcbiAgICB9KSxcbiAgICBkYXRhOiB7XG4gICAgICBuYW1lOiAn55Sf5pel6JuL57OVJyxcbiAgICAgIHByaWNlOiAnOTkuOTknLFxuICAgICAgc3RhdHVzOiAnc2VudCcsXG4gICAgfSxcbiAgfSxcblxuICAvLyDnpLznianmtojmga8gLSBBSeaOpeWPl1xuICB7XG4gICAgaWQ6IGdlbmVyYXRlSWQoJ2dpZnQnKSxcbiAgICB0eXBlOiAnZ2lmdCcsXG4gICAgc2VuZGVyOiAndGhlbScsXG4gICAgY29udGVudDogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgbmFtZTogJ+eUn+aXpeibi+ezlScsXG4gICAgICBzdGF0dXM6ICdhY2NlcHRlZCcsXG4gICAgfSksXG4gICAgZGF0YToge1xuICAgICAgbmFtZTogJ+eUn+aXpeibi+ezlScsXG4gICAgICBzdGF0dXM6ICdhY2NlcHRlZCcsXG4gICAgfSxcbiAgfSxcblxuICAvLyDnpLznianmtojmga8gLSBBSeWPkemAgVxuICB7XG4gICAgaWQ6IGdlbmVyYXRlSWQoJ2dpZnQnKSxcbiAgICB0eXBlOiAnZ2lmdCcsXG4gICAgc2VuZGVyOiAndGhlbScsXG4gICAgY29udGVudDogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgbmFtZTogJ+W3p+WFi+WKmycsXG4gICAgICBwcmljZTogJzM5Ljk5JyxcbiAgICAgIHN0YXR1czogJ3NlbnQnLFxuICAgIH0pLFxuICAgIGRhdGE6IHtcbiAgICAgIG5hbWU6ICflt6flhYvlipsnLFxuICAgICAgcHJpY2U6ICczOS45OScsXG4gICAgICBzdGF0dXM6ICdzZW50JyxcbiAgICB9LFxuICB9LFxuXG4gIC8vIOekvOeJqea2iOaBryAtIOeUqOaIt+aOpeWPl1xuICB7XG4gICAgaWQ6IGdlbmVyYXRlSWQoJ2dpZnQnKSxcbiAgICB0eXBlOiAnZ2lmdCcsXG4gICAgc2VuZGVyOiAnbWUnLFxuICAgIGNvbnRlbnQ6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgIG5hbWU6ICflt6flhYvlipsnLFxuICAgICAgc3RhdHVzOiAnYWNjZXB0ZWQnLFxuICAgIH0pLFxuICAgIGRhdGE6IHtcbiAgICAgIG5hbWU6ICflt6flhYvlipsnLFxuICAgICAgc3RhdHVzOiAnYWNjZXB0ZWQnLFxuICAgIH0sXG4gIH0sXG5cbiAgLy8g5paH5Lu25raI5oGvIC0g55So5oi3XG4gIHtcbiAgICBpZDogZ2VuZXJhdGVJZCgnZmlsZScpLFxuICAgIHR5cGU6ICdmaWxlJyxcbiAgICBzZW5kZXI6ICdtZScsXG4gICAgY29udGVudDogJ+a1i+ivleaWh+ahoy5kb2N4JyxcbiAgfSxcblxuICAvLyDmlofku7bmtojmga8gLSBBSVxuICB7XG4gICAgaWQ6IGdlbmVyYXRlSWQoJ2ZpbGUnKSxcbiAgICB0eXBlOiAnZmlsZScsXG4gICAgc2VuZGVyOiAndGhlbScsXG4gICAgY29udGVudDogJ+mHjeimgei1hOaWmS5wZGYnLFxuICB9LFxuXG4gIC8vIOaci+WPi+WciCAtIOeUqOaIt+WPkeW4g1xuICB7XG4gICAga2V5OiAnVVNFUl9NT01FTlQnLFxuICAgIGRhdGE6IHtcbiAgICAgIHRleHQ6ICfov5nmmK/nlKjmiLflj5HluIPnmoTmnIvlj4vlnIjmtYvor5XlhoXlrrknLFxuICAgICAgaW1hZ2U6ICdodHRwczovL2dpdGd1ZC5pby9sb2xvZGVzdS9sb2xvYmFieXR1dG9yaWFsLy0vcmF3L21hc3Rlci9sb2xvZ2FtZS/ntKDmnZAvd2FsbHBhcGVyL+iTneiJsl8yLmpwZycsXG4gICAgICBpbWFnZV90eXBlOiAndXJsJyxcbiAgICAgIGRhdGU6IGdldEN1cnJlbnREYXRlKCksXG4gICAgICB0aW1lOiBnZXRDdXJyZW50VGltZSgpLFxuICAgIH0sXG4gIH0sXG5cbiAgLy8g5pyL5Y+L5ZyIIC0gQUnlj5HluINcbiAge1xuICAgIGtleTogJ0NIQVJfTU9NRU5UJyxcbiAgICBkYXRhOiB7XG4gICAgICB0ZXh0OiAn6L+Z5pivQUnlj5HluIPnmoTmnIvlj4vlnIjmtYvor5XlhoXlrrknLFxuICAgICAgaW1hZ2U6ICdodHRwczovL2dpdGd1ZC5pby9sb2xvZGVzdS9sb2xvYmFieXR1dG9yaWFsLy0vcmF3L21hc3Rlci9sb2xvZ2FtZS/ntKDmnZAvd2FsbHBhcGVyL+eyieiJsuWwj+eMq18xLmpwZycsXG4gICAgICBpbWFnZV90eXBlOiAndXJsJyxcbiAgICAgIGRhdGU6IGdldEN1cnJlbnREYXRlKCksXG4gICAgICB0aW1lOiBnZXRDdXJyZW50VGltZSgpLFxuICAgIH0sXG4gIH0sXG5cbiAgLy8g5pyL5Y+L5ZyIIC0g57qv5paH5pysXG4gIHtcbiAgICBrZXk6ICdDSEFSX01PTUVOVCcsXG4gICAgZGF0YToge1xuICAgICAgdGV4dDogJ+i/meaYr+S4gOadoeayoeacieWbvueJh+eahOaci+WPi+WciCcsXG4gICAgICBpbWFnZTogJycsXG4gICAgICBpbWFnZV90eXBlOiAnbm9uZScsXG4gICAgICBkYXRlOiBnZXRDdXJyZW50RGF0ZSgpLFxuICAgICAgdGltZTogZ2V0Q3VycmVudFRpbWUoKSxcbiAgICB9LFxuICB9LFxuXG4gIC8vIOaci+WPi+WciCAtIOWbvueJh+aPj+i/sFxuICB7XG4gICAga2V5OiAnVVNFUl9NT01FTlQnLFxuICAgIGRhdGE6IHtcbiAgICAgIHRleHQ6ICfov5nmmK/luKbmnInlm77niYfmj4/ov7DnmoTmnIvlj4vlnIgnLFxuICAgICAgaW1hZ2U6ICfkuIDlvKDnvo7kuL3nmoTpo47mma/nhafniYcnLFxuICAgICAgaW1hZ2VfdHlwZTogJ2Rlc2MnLFxuICAgICAgaW1hZ2VfZGVzYzogJ+S4gOW8oOe+juS4veeahOmjjuaZr+eFp+eJhycsXG4gICAgICBkYXRlOiBnZXRDdXJyZW50RGF0ZSgpLFxuICAgICAgdGltZTogZ2V0Q3VycmVudFRpbWUoKSxcbiAgICB9LFxuICB9LFxuXG4gIC8vIOaci+WPi+WciOivhOiuuiAtIOeUqOaIt+ivhOiuulxuICB7XG4gICAga2V5OiAnVVNFUl9DT01NRU5UJyxcbiAgICBkYXRhOiB7XG4gICAgICB0ZXh0OiAn6L+Z5piv55So5oi355qE6K+E6K66JyxcbiAgICAgIHRhcmdldF9wb3N0X2lkOiAxLFxuICAgIH0sXG4gIH0sXG5cbiAgLy8g5pyL5Y+L5ZyI6K+E6K66IC0gQUnor4TorrpcbiAge1xuICAgIGtleTogJ0NIQVJfQ09NTUVOVCcsXG4gICAgZGF0YToge1xuICAgICAgdGV4dDogJ+i/meaYr0FJ55qE6K+E6K66JyxcbiAgICAgIHRhcmdldF9wb3N0X2lkOiAwLFxuICAgIH0sXG4gIH0sXG5cbiAgLy8g5pyL5Y+L5ZyI54K56LWeIC0g55So5oi354K56LWeXG4gIHtcbiAgICBrZXk6ICdVU0VSX0xJS0UnLFxuICAgIGRhdGE6IHtcbiAgICAgIHRhcmdldF9wb3N0X2lkOiAxLFxuICAgIH0sXG4gIH0sXG5cbiAgLy8g5pyL5Y+L5ZyI54K56LWeIC0gQUnngrnotZ5cbiAge1xuICAgIGtleTogJ0NIQVJfTElLRScsXG4gICAgZGF0YToge1xuICAgICAgdGFyZ2V0X3Bvc3RfaWQ6IDAsXG4gICAgfSxcbiAgfSxcblxuICAvLyDmkqTlm57mtojmga/npLrkvotcbiAge1xuICAgIGlkOiBnZW5lcmF0ZUlkKCdtc2cnKSxcbiAgICB0eXBlOiAnbWVzc2FnZScsXG4gICAgc2VuZGVyOiAndGhlbScsXG4gICAgY29udGVudDogJ+i/meadoea2iOaBr+Wwhuiiq+aSpOWbnicsXG4gICAgcmVjYWxsZWQ6IHRydWUsXG4gICAgcmVjYWxsZWRfY29udGVudDogJ+i/meadoea2iOaBr+Wwhuiiq+aSpOWbnicsXG4gICAgcmVjYWxsZWRfdGltZXN0YW1wOiBnZXRDdXJyZW50VGltZSgpLFxuICB9LFxuXTtcblxuLy8g5Yqg6L296LCD6K+V5pWw5o2u55qE5Ye95pWwXG5leHBvcnQgZnVuY3Rpb24gbG9hZERlYnVnRGF0YShibG14TWFuYWdlcjogYW55KTogdm9pZCB7XG4gIGNvbnNvbGUubG9nKCdbREVCVUddIOato+WcqOWKoOi9veiwg+ivleaVsOaNri4uLicpO1xuICBkZWJ1Z0RhdGEuZm9yRWFjaChlbnRyeSA9PiB7XG4gICAgYmxteE1hbmFnZXIuYWRkRW50cnkoZW50cnkpO1xuICB9KTtcbiAgY29uc29sZS5sb2coJ1tERUJVR10g6LCD6K+V5pWw5o2u5Yqg6L295a6M5oiQ77yM5YWx5Yqg6L29JywgZGVidWdEYXRhLmxlbmd0aCwgJ+adoeaVsOaNricpO1xufVxuXG4vLyDmuIXpmaTosIPor5XmlbDmja7nmoTlh73mlbBcbmV4cG9ydCBmdW5jdGlvbiBjbGVhckRlYnVnRGF0YShibG14TWFuYWdlcjogYW55KTogdm9pZCB7XG4gIGNvbnNvbGUubG9nKCdbREVCVUddIOato+WcqOa4hemZpOiwg+ivleaVsOaNri4uLicpO1xuICBibG14TWFuYWdlci5sb2dFbnRyaWVzID0gW107XG4gIGNvbnNvbGUubG9nKCdbREVCVUddIOiwg+ivleaVsOaNruW3sua4hemZpCcpO1xufVxuXG4vLyDmt7vliqDljZXkuKrmtYvor5XmlbDmja7nmoTlh73mlbDvvIzmlrnkvr/lnKjmjqfliLblj7DkuK3kvb/nlKhcbmV4cG9ydCBmdW5jdGlvbiBhZGRUZXN0RW50cnkoYmxteE1hbmFnZXI6IGFueSwgZW50cnlUeXBlOiBzdHJpbmcpOiB2b2lkIHtcbiAgbGV0IGVudHJ5OiBhbnkgPSBudWxsO1xuXG4gIHN3aXRjaCAoZW50cnlUeXBlKSB7XG4gICAgY2FzZSAndGV4dC11c2VyJzpcbiAgICAgIGVudHJ5ID0ge1xuICAgICAgICBpZDogZ2VuZXJhdGVJZCgnbXNnJyksXG4gICAgICAgIHR5cGU6ICdtZXNzYWdlJyxcbiAgICAgICAgc2VuZGVyOiAnbWUnLFxuICAgICAgICBjb250ZW50OiAn6L+Z5piv5LiA5p2h5rWL6K+V5paH5pys5raI5oGvJyxcbiAgICAgIH07XG4gICAgICBicmVhaztcbiAgICBjYXNlICd0ZXh0LWNoYXInOlxuICAgICAgZW50cnkgPSB7XG4gICAgICAgIGlkOiBnZW5lcmF0ZUlkKCdtc2cnKSxcbiAgICAgICAgdHlwZTogJ21lc3NhZ2UnLFxuICAgICAgICBzZW5kZXI6ICd0aGVtJyxcbiAgICAgICAgY29udGVudDogJ+i/meaYr+S4gOadoUFJ5Zue5aSN55qE5rWL6K+V5raI5oGvJyxcbiAgICAgIH07XG4gICAgICBicmVhaztcbiAgICBjYXNlICdzdGlja2VyLXVzZXInOlxuICAgICAgZW50cnkgPSB7XG4gICAgICAgIGlkOiBnZW5lcmF0ZUlkKCdzdGlja2VyJyksXG4gICAgICAgIHR5cGU6ICdzdGlja2VyJyxcbiAgICAgICAgc2VuZGVyOiAnbWUnLFxuICAgICAgICBjb250ZW50OiAn5aW955qEJyxcbiAgICAgIH07XG4gICAgICBicmVhaztcbiAgICBjYXNlICdzdGlja2VyLWNoYXInOlxuICAgICAgZW50cnkgPSB7XG4gICAgICAgIGlkOiBnZW5lcmF0ZUlkKCdzdGlja2VyJyksXG4gICAgICAgIHR5cGU6ICdzdGlja2VyJyxcbiAgICAgICAgc2VuZGVyOiAndGhlbScsXG4gICAgICAgIGNvbnRlbnQ6ICflpb3nmoQnLFxuICAgICAgfTtcbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgJ2ltYWdlLXVzZXInOlxuICAgICAgZW50cnkgPSB7XG4gICAgICAgIGlkOiBnZW5lcmF0ZUlkKCdpbWcnKSxcbiAgICAgICAgdHlwZTogJ2ltYWdlJyxcbiAgICAgICAgc2VuZGVyOiAnbWUnLFxuICAgICAgICBjb250ZW50OiB7XG4gICAgICAgICAgdHlwZTogJ3VybCcsXG4gICAgICAgICAgdmFsdWU6ICdodHRwczovL2dpdGd1ZC5pby9sb2xvZGVzdS9sb2xvYmFieXR1dG9yaWFsLy0vcmF3L21hc3Rlci9sb2xvZ2FtZS/ntKDmnZAvd2FsbHBhcGVyL+iTneiJsl8xLmpwZycsXG4gICAgICAgIH0sXG4gICAgICB9O1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSAnaW1hZ2UtY2hhcic6XG4gICAgICBlbnRyeSA9IHtcbiAgICAgICAgaWQ6IGdlbmVyYXRlSWQoJ2ltZycpLFxuICAgICAgICB0eXBlOiAnaW1hZ2UnLFxuICAgICAgICBzZW5kZXI6ICd0aGVtJyxcbiAgICAgICAgY29udGVudDoge1xuICAgICAgICAgIHR5cGU6ICd1cmwnLFxuICAgICAgICAgIHZhbHVlOiAnaHR0cHM6Ly9naXRndWQuaW8vbG9sb2Rlc3UvbG9sb2JhYnl0dXRvcmlhbC8tL3Jhdy9tYXN0ZXIvbG9sb2dhbWUv57Sg5p2QL3dhbGxwYXBlci/nsonoibLmmJ/mmJ9fMS5qcGcnLFxuICAgICAgICB9LFxuICAgICAgfTtcbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgJ3ZvaWNlLXVzZXInOlxuICAgICAgZW50cnkgPSB7XG4gICAgICAgIGlkOiBnZW5lcmF0ZUlkKCd2b2ljZScpLFxuICAgICAgICB0eXBlOiAndm9pY2UnLFxuICAgICAgICBzZW5kZXI6ICdtZScsXG4gICAgICAgIGNvbnRlbnQ6IHtcbiAgICAgICAgICB0ZXh0OiAn6L+Z5piv5LiA5p2h5rWL6K+V6K+t6Z+z5raI5oGvJyxcbiAgICAgICAgICBkdXJhdGlvbjogMyxcbiAgICAgICAgfSxcbiAgICAgIH07XG4gICAgICBicmVhaztcbiAgICBjYXNlICd2b2ljZS1jaGFyJzpcbiAgICAgIGVudHJ5ID0ge1xuICAgICAgICBpZDogZ2VuZXJhdGVJZCgndm9pY2UnKSxcbiAgICAgICAgdHlwZTogJ3ZvaWNlJyxcbiAgICAgICAgc2VuZGVyOiAndGhlbScsXG4gICAgICAgIGNvbnRlbnQ6IHtcbiAgICAgICAgICB0ZXh0OiAn6L+Z5pivQUnnmoTmtYvor5Xor63pn7Pmtojmga8nLFxuICAgICAgICAgIGR1cmF0aW9uOiA0LFxuICAgICAgICB9LFxuICAgICAgfTtcbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgJ3RyYW5zZmVyLXVzZXInOlxuICAgICAgZW50cnkgPSB7XG4gICAgICAgIGlkOiBnZW5lcmF0ZUlkKCd0cmFuc2ZlcicpLFxuICAgICAgICB0eXBlOiAndHJhbnNmZXInLFxuICAgICAgICBzZW5kZXI6ICdtZScsXG4gICAgICAgIGNvbnRlbnQ6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICBhbW91bnQ6ICc4OC44OCcsXG4gICAgICAgICAgbm90ZTogJ+a1i+ivlei9rOi0picsXG4gICAgICAgICAgc3RhdHVzOiAnc2VudCcsXG4gICAgICAgIH0pLFxuICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgYW1vdW50OiAnODguODgnLFxuICAgICAgICAgIG5vdGU6ICfmtYvor5XovazotKYnLFxuICAgICAgICAgIHN0YXR1czogJ3NlbnQnLFxuICAgICAgICB9LFxuICAgICAgfTtcbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgJ3RyYW5zZmVyLWNoYXInOlxuICAgICAgZW50cnkgPSB7XG4gICAgICAgIGlkOiBnZW5lcmF0ZUlkKCd0cmFuc2ZlcicpLFxuICAgICAgICB0eXBlOiAndHJhbnNmZXInLFxuICAgICAgICBzZW5kZXI6ICd0aGVtJyxcbiAgICAgICAgY29udGVudDogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgIGFtb3VudDogJzY2LjY2JyxcbiAgICAgICAgICBub3RlOiAnQUnmtYvor5XovazotKYnLFxuICAgICAgICAgIHN0YXR1czogJ3NlbnQnLFxuICAgICAgICB9KSxcbiAgICAgICAgZGF0YToge1xuICAgICAgICAgIGFtb3VudDogJzY2LjY2JyxcbiAgICAgICAgICBub3RlOiAnQUnmtYvor5XovazotKYnLFxuICAgICAgICAgIHN0YXR1czogJ3NlbnQnLFxuICAgICAgICB9LFxuICAgICAgfTtcbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgJ2dpZnQtdXNlcic6XG4gICAgICBlbnRyeSA9IHtcbiAgICAgICAgaWQ6IGdlbmVyYXRlSWQoJ2dpZnQnKSxcbiAgICAgICAgdHlwZTogJ2dpZnQnLFxuICAgICAgICBzZW5kZXI6ICdtZScsXG4gICAgICAgIGNvbnRlbnQ6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICBuYW1lOiAn55Sf5pel6JuL57OVJyxcbiAgICAgICAgICBwcmljZTogJzk5Ljk5JyxcbiAgICAgICAgICBzdGF0dXM6ICdzZW50JyxcbiAgICAgICAgfSksXG4gICAgICAgIGRhdGE6IHtcbiAgICAgICAgICBuYW1lOiAn55Sf5pel6JuL57OVJyxcbiAgICAgICAgICBwcmljZTogJzk5Ljk5JyxcbiAgICAgICAgICBzdGF0dXM6ICdzZW50JyxcbiAgICAgICAgfSxcbiAgICAgIH07XG4gICAgICBicmVhaztcbiAgICBjYXNlICdnaWZ0LWNoYXInOlxuICAgICAgZW50cnkgPSB7XG4gICAgICAgIGlkOiBnZW5lcmF0ZUlkKCdnaWZ0JyksXG4gICAgICAgIHR5cGU6ICdnaWZ0JyxcbiAgICAgICAgc2VuZGVyOiAndGhlbScsXG4gICAgICAgIGNvbnRlbnQ6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICBuYW1lOiAn5ben5YWL5YqbJyxcbiAgICAgICAgICBwcmljZTogJzM5Ljk5JyxcbiAgICAgICAgICBzdGF0dXM6ICdzZW50JyxcbiAgICAgICAgfSksXG4gICAgICAgIGRhdGE6IHtcbiAgICAgICAgICBuYW1lOiAn5ben5YWL5YqbJyxcbiAgICAgICAgICBwcmljZTogJzM5Ljk5JyxcbiAgICAgICAgICBzdGF0dXM6ICdzZW50JyxcbiAgICAgICAgfSxcbiAgICAgIH07XG4gICAgICBicmVhaztcbiAgICBjYXNlICdtb21lbnQtdXNlcic6XG4gICAgICBlbnRyeSA9IHtcbiAgICAgICAga2V5OiAnVVNFUl9NT01FTlQnLFxuICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgdGV4dDogJ+eUqOaIt+aci+WPi+WciOa1i+ivlScsXG4gICAgICAgICAgaW1hZ2U6ICdodHRwczovL2dpdGd1ZC5pby9sb2xvZGVzdS9sb2xvYmFieXR1dG9yaWFsLy0vcmF3L21hc3Rlci9sb2xvZ2FtZS/ntKDmnZAvd2FsbHBhcGVyL+iTneiJsl8yLmpwZycsXG4gICAgICAgICAgaW1hZ2VfdHlwZTogJ3VybCcsXG4gICAgICAgICAgZGF0ZTogZ2V0Q3VycmVudERhdGUoKSxcbiAgICAgICAgICB0aW1lOiBnZXRDdXJyZW50VGltZSgpLFxuICAgICAgICB9LFxuICAgICAgfTtcbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgJ21vbWVudC1jaGFyJzpcbiAgICAgIGVudHJ5ID0ge1xuICAgICAgICBrZXk6ICdDSEFSX01PTUVOVCcsXG4gICAgICAgIGRhdGE6IHtcbiAgICAgICAgICB0ZXh0OiAnQUnmnIvlj4vlnIjmtYvor5UnLFxuICAgICAgICAgIGltYWdlOiAnaHR0cHM6Ly9naXRndWQuaW8vbG9sb2Rlc3UvbG9sb2JhYnl0dXRvcmlhbC8tL3Jhdy9tYXN0ZXIvbG9sb2dhbWUv57Sg5p2QL3dhbGxwYXBlci/nsonoibLlsI/njKtfMS5qcGcnLFxuICAgICAgICAgIGltYWdlX3R5cGU6ICd1cmwnLFxuICAgICAgICAgIGRhdGU6IGdldEN1cnJlbnREYXRlKCksXG4gICAgICAgICAgdGltZTogZ2V0Q3VycmVudFRpbWUoKSxcbiAgICAgICAgfSxcbiAgICAgIH07XG4gICAgICBicmVhaztcbiAgICBkZWZhdWx0OlxuICAgICAgY29uc29sZS5lcnJvcignW0RFQlVHXSDmnKrnn6XnmoTmtYvor5XmlbDmja7nsbvlnos6JywgZW50cnlUeXBlKTtcbiAgICAgIHJldHVybjtcbiAgfVxuXG4gIGlmIChlbnRyeSkge1xuICAgIGJsbXhNYW5hZ2VyLmFkZEVudHJ5KGVudHJ5KTtcbiAgICBibG14TWFuYWdlci5wZXJzaXN0TG9nVG9TdG9yYWdlKCk7XG4gICAgY29uc29sZS5sb2coYFtERUJVR10g5bey5re75Yqg5rWL6K+V5pWw5o2uOiAke2VudHJ5VHlwZX1gLCBlbnRyeSk7XG4gIH1cbn1cblxuLy8g5pi+56S65rWL6K+V5p2h55uu57G75Z6LXG5leHBvcnQgZnVuY3Rpb24gc2hvd1Rlc3RFbnRyeVR5cGVzKCk6IHZvaWQge1xuICBjb25zb2xlLmxvZygnW0JMTVggRGVidWddIOWPr+eUqOeahOa1i+ivleadoeebruexu+WeizonKTtcbiAgY29uc29sZS5sb2coJy0gbWVzc2FnZTog5paH5pys5raI5oGvJyk7XG4gIGNvbnNvbGUubG9nKCctIHN0aWNrZXI6IOihqOaDhea2iOaBrycpO1xuICBjb25zb2xlLmxvZygnLSBpbWFnZTog5Zu+54mH5raI5oGvJyk7XG4gIGNvbnNvbGUubG9nKCctIHZvaWNlOiDor63pn7Pmtojmga8nKTtcbiAgY29uc29sZS5sb2coJy0gbG9jYXRpb246IOS9jee9rua2iOaBrycpO1xuICBjb25zb2xlLmxvZygnLSB0cmFuc2Zlcjog6L2s6LSm5raI5oGvJyk7XG4gIGNvbnNvbGUubG9nKCctIGZpbGU6IOaWh+S7tua2iOaBrycpO1xuICBjb25zb2xlLmxvZygnLSBnaWZ0OiDnpLznianmtojmga8nKTtcbiAgY29uc29sZS5sb2coJy0gbW9tZW50OiDmnIvlj4vlnIjliqjmgIEnKTtcbiAgY29uc29sZS5sb2coJy0gY29tbWVudDog5pyL5Y+L5ZyI6K+E6K66Jyk7XG4gIGNvbnNvbGUubG9nKCctIGxpa2U6IOaci+WPi+WciOeCuei1nicpO1xuICBjb25zb2xlLmxvZygnLSByZWNhbGw6IOa2iOaBr+aSpOWbnicpO1xuICBjb25zb2xlLmxvZygnLSBzeXN0ZW06IOezu+e7n+a2iOaBrycpO1xuICBjb25zb2xlLmxvZygnLSB0aW1lOiDml7bpl7TmiLMnKTtcbiAgY29uc29sZS5sb2coJy0gZXZlbnQ6IOS6i+S7tuaXpeW/lycpO1xufVxuXG4vLyDmmL7npLrosIPor5Xkv6Hmga9cbmV4cG9ydCBmdW5jdGlvbiBzaG93RGVidWdJbmZvKGFwcENvbnRyb2xsZXI6IGFueSk6IHZvaWQge1xuICBjb25zb2xlLmxvZygnW0JMTVggRGVidWddIOiwg+ivleS/oeaBrzonKTtcblxuICB0cnkge1xuICAgIC8vIOehruS/neiDveWkn+iOt+WPluWIsOi/meS6m+aWueazlVxuICAgIGNvbnN0IHJhd0FpUmVzcG9uc2UgPSBhcHBDb250cm9sbGVyLmdldFJhd0FpUmVzcG9uc2UgPyBhcHBDb250cm9sbGVyLmdldFJhd0FpUmVzcG9uc2UoKSA6ICfml6Dms5Xojrflj5YnO1xuICAgIGNvbnN0IGZ1bGxQcm9tcHQgPSBhcHBDb250cm9sbGVyLmdldEZ1bGxQcm9tcHQgPyBhcHBDb250cm9sbGVyLmdldEZ1bGxQcm9tcHQoKSA6ICfml6Dms5Xojrflj5YnO1xuICAgIGNvbnN0IGxhdGVzdEFpUmF3UmVzcG9uc2UgPSBhcHBDb250cm9sbGVyLmdldExhdGVzdEFpUmF3UmVzcG9uc2VcbiAgICAgID8gYXBwQ29udHJvbGxlci5nZXRMYXRlc3RBaVJhd1Jlc3BvbnNlKClcbiAgICAgIDogJ+aXoOazleiOt+WPlic7XG4gICAgY29uc3QgbGF0ZXN0U2VudFByb21wdCA9IGFwcENvbnRyb2xsZXIuZ2V0TGF0ZXN0U2VudFByb21wdCA/IGFwcENvbnRyb2xsZXIuZ2V0TGF0ZXN0U2VudFByb21wdCgpIDogJ+aXoOazleiOt+WPlic7XG5cbiAgICBjb25zb2xlLmxvZygnLSDljp/lp4tBSeWTjeW6lDonLCByYXdBaVJlc3BvbnNlKTtcbiAgICBjb25zb2xlLmxvZygnLSDlrozmlbTmj5DnpLror406JywgZnVsbFByb21wdCk7XG4gICAgY29uc29sZS5sb2coJy0g5pyA5paw5aSE55CG5ZCO55qEQUnlk43lupQ6JywgbGF0ZXN0QWlSYXdSZXNwb25zZSk7XG4gICAgY29uc29sZS5sb2coJy0g5pyA5paw5Y+R6YCB57uZQUnnmoTmj5DnpLo6JywgbGF0ZXN0U2VudFByb21wdCk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignW0JMTVggRGVidWddIOiOt+WPluiwg+ivleS/oeaBr+aXtuWHuumUmTonLCBlcnJvcik7XG4gIH1cbn1cbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/同层手机/debug-data.ts\n")},"./src/同层手机/debug-logger.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DebugLogger: () => (/* binding */ DebugLogger),\n/* harmony export */   LogLevel: () => (/* binding */ LogLevel),\n/* harmony export */   logger: () => (/* binding */ logger)\n/* harmony export */ });\n/**\n * 统一的调试日志工具\n * 用于替代散布在各处的 console.log 调试代码\n */\nvar LogLevel;\n(function (LogLevel) {\n    LogLevel[LogLevel[\"DEBUG\"] = 0] = \"DEBUG\";\n    LogLevel[LogLevel[\"INFO\"] = 1] = \"INFO\";\n    LogLevel[LogLevel[\"WARN\"] = 2] = \"WARN\";\n    LogLevel[LogLevel[\"ERROR\"] = 3] = \"ERROR\";\n})(LogLevel || (LogLevel = {}));\nclass DebugLogger {\n    static instance;\n    isDevelopment;\n    logLevel;\n    logHistory = [];\n    maxHistorySize = 1000;\n    constructor() {\n        // 检查是否为开发模式\n        this.isDevelopment = this.checkDevelopmentMode();\n        this.logLevel = this.isDevelopment ? LogLevel.DEBUG : LogLevel.ERROR;\n    }\n    static getInstance() {\n        if (!DebugLogger.instance) {\n            DebugLogger.instance = new DebugLogger();\n        }\n        return DebugLogger.instance;\n    }\n    /**\n     * 检查是否为开发模式\n     */\n    checkDevelopmentMode() {\n        // 检查多种开发模式标识\n        return !!(window.BLMX_DEV_MODE ||\n            window.DEBUG ||\n            localStorage.getItem('blmx_debug') === 'true' ||\n            location.hostname === 'localhost' ||\n            location.hostname === '127.0.0.1' ||\n            location.search.includes('debug=true'));\n    }\n    /**\n     * 设置日志级别\n     */\n    setLogLevel(level) {\n        this.logLevel = level;\n    }\n    /**\n     * 启用/禁用开发模式\n     */\n    setDevelopmentMode(enabled) {\n        this.isDevelopment = enabled;\n        if (enabled) {\n            localStorage.setItem('blmx_debug', 'true');\n        }\n        else {\n            localStorage.removeItem('blmx_debug');\n        }\n    }\n    /**\n     * 记录日志到历史\n     */\n    addToHistory(level, module, message, data) {\n        this.logHistory.push({\n            timestamp: new Date(),\n            level,\n            module,\n            message,\n            data,\n        });\n        // 限制历史记录大小\n        if (this.logHistory.length > this.maxHistorySize) {\n            this.logHistory.shift();\n        }\n    }\n    /**\n     * 格式化日志消息\n     */\n    formatMessage(module, message) {\n        const timestamp = new Date().toISOString().substr(11, 12);\n        return `[${timestamp}] [BLMX:${module}] ${message}`;\n    }\n    /**\n     * 调试日志\n     */\n    debug(module, message, data) {\n        if (this.logLevel <= LogLevel.DEBUG && this.isDevelopment) {\n            console.log(this.formatMessage(module, message), data || '');\n            this.addToHistory(LogLevel.DEBUG, module, message, data);\n        }\n    }\n    /**\n     * 信息日志\n     */\n    info(module, message, data) {\n        if (this.logLevel <= LogLevel.INFO && this.isDevelopment) {\n            console.info(this.formatMessage(module, message), data || '');\n            this.addToHistory(LogLevel.INFO, module, message, data);\n        }\n    }\n    /**\n     * 警告日志\n     */\n    warn(module, message, data) {\n        if (this.logLevel <= LogLevel.WARN) {\n            console.warn(this.formatMessage(module, message), data || '');\n            this.addToHistory(LogLevel.WARN, module, message, data);\n        }\n    }\n    /**\n     * 错误日志（总是显示）\n     */\n    error(module, message, data) {\n        console.error(this.formatMessage(module, message), data || '');\n        this.addToHistory(LogLevel.ERROR, module, message, data);\n    }\n    /**\n     * 性能测量开始\n     */\n    timeStart(module, label) {\n        if (this.isDevelopment) {\n            console.time(this.formatMessage(module, label));\n        }\n    }\n    /**\n     * 性能测量结束\n     */\n    timeEnd(module, label) {\n        if (this.isDevelopment) {\n            console.timeEnd(this.formatMessage(module, label));\n        }\n    }\n    /**\n     * 分组日志开始\n     */\n    groupStart(module, title) {\n        if (this.isDevelopment) {\n            console.group(this.formatMessage(module, title));\n        }\n    }\n    /**\n     * 分组日志结束\n     */\n    groupEnd() {\n        if (this.isDevelopment) {\n            console.groupEnd();\n        }\n    }\n    /**\n     * 获取日志历史\n     */\n    getHistory(filterModule, filterLevel) {\n        let filtered = this.logHistory;\n        if (filterModule) {\n            filtered = filtered.filter(log => log.module === filterModule);\n        }\n        if (filterLevel !== undefined) {\n            filtered = filtered.filter(log => log.level >= filterLevel);\n        }\n        return filtered;\n    }\n    /**\n     * 清空日志历史\n     */\n    clearHistory() {\n        this.logHistory = [];\n    }\n    /**\n     * 导出日志历史为JSON\n     */\n    exportHistory() {\n        return JSON.stringify(this.logHistory, null, 2);\n    }\n    /**\n     * 显示调试面板（如果在开发模式）\n     */\n    showDebugPanel() {\n        if (!this.isDevelopment) {\n            console.warn('调试面板仅在开发模式下可用');\n            return;\n        }\n        console.group('🐛 BLMX 调试信息');\n        console.log('开发模式:', this.isDevelopment);\n        console.log('日志级别:', LogLevel[this.logLevel]);\n        console.log('历史记录数量:', this.logHistory.length);\n        if (this.logHistory.length > 0) {\n            console.log('最近的日志:');\n            this.logHistory.slice(-10).forEach(log => {\n                const levelIcon = ['🔍', 'ℹ️', '⚠️', '❌'][log.level];\n                console.log(`${levelIcon} [${log.module}] ${log.message}`, log.data || '');\n            });\n        }\n        console.groupEnd();\n    }\n    /**\n     * 获取当前状态\n     */\n    getStatus() {\n        return {\n            isDevelopment: this.isDevelopment,\n            logLevel: LogLevel[this.logLevel],\n            historyCount: this.logHistory.length,\n        };\n    }\n}\n// 创建全局实例\nconst logger = DebugLogger.getInstance();\n// 在开发模式下暴露到全局作用域，方便调试\nif (typeof window !== 'undefined' && logger.getStatus().isDevelopment) {\n    window.blmxLogger = logger;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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iYvmnLovZGVidWctbG9nZ2VyLnRzPyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIOe7n+S4gOeahOiwg+ivleaXpeW/l+W3peWFt1xuICog55So5LqO5pu/5Luj5pWj5biD5Zyo5ZCE5aSE55qEIGNvbnNvbGUubG9nIOiwg+ivleS7o+eggVxuICovXG5cbmV4cG9ydCBlbnVtIExvZ0xldmVsIHtcbiAgREVCVUcgPSAwLFxuICBJTkZPID0gMSxcbiAgV0FSTiA9IDIsXG4gIEVSUk9SID0gMyxcbn1cblxuZXhwb3J0IGNsYXNzIERlYnVnTG9nZ2VyIHtcbiAgcHJpdmF0ZSBzdGF0aWMgaW5zdGFuY2U6IERlYnVnTG9nZ2VyO1xuICBwcml2YXRlIGlzRGV2ZWxvcG1lbnQ6IGJvb2xlYW47XG4gIHByaXZhdGUgbG9nTGV2ZWw6IExvZ0xldmVsO1xuICBwcml2YXRlIGxvZ0hpc3Rvcnk6IEFycmF5PHsgdGltZXN0YW1wOiBEYXRlOyBsZXZlbDogTG9nTGV2ZWw7IG1vZHVsZTogc3RyaW5nOyBtZXNzYWdlOiBzdHJpbmc7IGRhdGE/OiBhbnkgfT4gPSBbXTtcbiAgcHJpdmF0ZSBtYXhIaXN0b3J5U2l6ZTogbnVtYmVyID0gMTAwMDtcblxuICBwcml2YXRlIGNvbnN0cnVjdG9yKCkge1xuICAgIC8vIOajgOafpeaYr+WQpuS4uuW8gOWPkeaooeW8j1xuICAgIHRoaXMuaXNEZXZlbG9wbWVudCA9IHRoaXMuY2hlY2tEZXZlbG9wbWVudE1vZGUoKTtcbiAgICB0aGlzLmxvZ0xldmVsID0gdGhpcy5pc0RldmVsb3BtZW50ID8gTG9nTGV2ZWwuREVCVUcgOiBMb2dMZXZlbC5FUlJPUjtcbiAgfVxuXG4gIHN0YXRpYyBnZXRJbnN0YW5jZSgpOiBEZWJ1Z0xvZ2dlciB7XG4gICAgaWYgKCFEZWJ1Z0xvZ2dlci5pbnN0YW5jZSkge1xuICAgICAgRGVidWdMb2dnZXIuaW5zdGFuY2UgPSBuZXcgRGVidWdMb2dnZXIoKTtcbiAgICB9XG4gICAgcmV0dXJuIERlYnVnTG9nZ2VyLmluc3RhbmNlO1xuICB9XG5cbiAgLyoqXG4gICAqIOajgOafpeaYr+WQpuS4uuW8gOWPkeaooeW8j1xuICAgKi9cbiAgcHJpdmF0ZSBjaGVja0RldmVsb3BtZW50TW9kZSgpOiBib29sZWFuIHtcbiAgICAvLyDmo4Dmn6XlpJrnp43lvIDlj5HmqKHlvI/moIfor4ZcbiAgICByZXR1cm4gISEoXG4gICAgICAod2luZG93IGFzIGFueSkuQkxNWF9ERVZfTU9ERSB8fFxuICAgICAgKHdpbmRvdyBhcyBhbnkpLkRFQlVHIHx8XG4gICAgICBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnYmxteF9kZWJ1ZycpID09PSAndHJ1ZScgfHxcbiAgICAgIGxvY2F0aW9uLmhvc3RuYW1lID09PSAnbG9jYWxob3N0JyB8fFxuICAgICAgbG9jYXRpb24uaG9zdG5hbWUgPT09ICcxMjcuMC4wLjEnIHx8XG4gICAgICBsb2NhdGlvbi5zZWFyY2guaW5jbHVkZXMoJ2RlYnVnPXRydWUnKVxuICAgICk7XG4gIH1cblxuICAvKipcbiAgICog6K6+572u5pel5b+X57qn5YirXG4gICAqL1xuICBzZXRMb2dMZXZlbChsZXZlbDogTG9nTGV2ZWwpOiB2b2lkIHtcbiAgICB0aGlzLmxvZ0xldmVsID0gbGV2ZWw7XG4gIH1cblxuICAvKipcbiAgICog5ZCv55SoL+emgeeUqOW8gOWPkeaooeW8j1xuICAgKi9cbiAgc2V0RGV2ZWxvcG1lbnRNb2RlKGVuYWJsZWQ6IGJvb2xlYW4pOiB2b2lkIHtcbiAgICB0aGlzLmlzRGV2ZWxvcG1lbnQgPSBlbmFibGVkO1xuICAgIGlmIChlbmFibGVkKSB7XG4gICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnYmxteF9kZWJ1ZycsICd0cnVlJyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCdibG14X2RlYnVnJyk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIOiusOW9leaXpeW/l+WIsOWOhuWPslxuICAgKi9cbiAgcHJpdmF0ZSBhZGRUb0hpc3RvcnkobGV2ZWw6IExvZ0xldmVsLCBtb2R1bGU6IHN0cmluZywgbWVzc2FnZTogc3RyaW5nLCBkYXRhPzogYW55KTogdm9pZCB7XG4gICAgdGhpcy5sb2dIaXN0b3J5LnB1c2goe1xuICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLFxuICAgICAgbGV2ZWwsXG4gICAgICBtb2R1bGUsXG4gICAgICBtZXNzYWdlLFxuICAgICAgZGF0YSxcbiAgICB9KTtcblxuICAgIC8vIOmZkOWItuWOhuWPsuiusOW9leWkp+Wwj1xuICAgIGlmICh0aGlzLmxvZ0hpc3RvcnkubGVuZ3RoID4gdGhpcy5tYXhIaXN0b3J5U2l6ZSkge1xuICAgICAgdGhpcy5sb2dIaXN0b3J5LnNoaWZ0KCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIOagvOW8j+WMluaXpeW/l+a2iOaBr1xuICAgKi9cbiAgcHJpdmF0ZSBmb3JtYXRNZXNzYWdlKG1vZHVsZTogc3RyaW5nLCBtZXNzYWdlOiBzdHJpbmcpOiBzdHJpbmcge1xuICAgIGNvbnN0IHRpbWVzdGFtcCA9IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKS5zdWJzdHIoMTEsIDEyKTtcbiAgICByZXR1cm4gYFske3RpbWVzdGFtcH1dIFtCTE1YOiR7bW9kdWxlfV0gJHttZXNzYWdlfWA7XG4gIH1cblxuICAvKipcbiAgICog6LCD6K+V5pel5b+XXG4gICAqL1xuICBkZWJ1Zyhtb2R1bGU6IHN0cmluZywgbWVzc2FnZTogc3RyaW5nLCBkYXRhPzogYW55KTogdm9pZCB7XG4gICAgaWYgKHRoaXMubG9nTGV2ZWwgPD0gTG9nTGV2ZWwuREVCVUcgJiYgdGhpcy5pc0RldmVsb3BtZW50KSB7XG4gICAgICBjb25zb2xlLmxvZyh0aGlzLmZvcm1hdE1lc3NhZ2UobW9kdWxlLCBtZXNzYWdlKSwgZGF0YSB8fCAnJyk7XG4gICAgICB0aGlzLmFkZFRvSGlzdG9yeShMb2dMZXZlbC5ERUJVRywgbW9kdWxlLCBtZXNzYWdlLCBkYXRhKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICog5L+h5oGv5pel5b+XXG4gICAqL1xuICBpbmZvKG1vZHVsZTogc3RyaW5nLCBtZXNzYWdlOiBzdHJpbmcsIGRhdGE/OiBhbnkpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5sb2dMZXZlbCA8PSBMb2dMZXZlbC5JTkZPICYmIHRoaXMuaXNEZXZlbG9wbWVudCkge1xuICAgICAgY29uc29sZS5pbmZvKHRoaXMuZm9ybWF0TWVzc2FnZShtb2R1bGUsIG1lc3NhZ2UpLCBkYXRhIHx8ICcnKTtcbiAgICAgIHRoaXMuYWRkVG9IaXN0b3J5KExvZ0xldmVsLklORk8sIG1vZHVsZSwgbWVzc2FnZSwgZGF0YSk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIOitpuWRiuaXpeW/l1xuICAgKi9cbiAgd2Fybihtb2R1bGU6IHN0cmluZywgbWVzc2FnZTogc3RyaW5nLCBkYXRhPzogYW55KTogdm9pZCB7XG4gICAgaWYgKHRoaXMubG9nTGV2ZWwgPD0gTG9nTGV2ZWwuV0FSTikge1xuICAgICAgY29uc29sZS53YXJuKHRoaXMuZm9ybWF0TWVzc2FnZShtb2R1bGUsIG1lc3NhZ2UpLCBkYXRhIHx8ICcnKTtcbiAgICAgIHRoaXMuYWRkVG9IaXN0b3J5KExvZ0xldmVsLldBUk4sIG1vZHVsZSwgbWVzc2FnZSwgZGF0YSk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIOmUmeivr+aXpeW/l++8iOaAu+aYr+aYvuekuu+8iVxuICAgKi9cbiAgZXJyb3IobW9kdWxlOiBzdHJpbmcsIG1lc3NhZ2U6IHN0cmluZywgZGF0YT86IGFueSk6IHZvaWQge1xuICAgIGNvbnNvbGUuZXJyb3IodGhpcy5mb3JtYXRNZXNzYWdlKG1vZHVsZSwgbWVzc2FnZSksIGRhdGEgfHwgJycpO1xuICAgIHRoaXMuYWRkVG9IaXN0b3J5KExvZ0xldmVsLkVSUk9SLCBtb2R1bGUsIG1lc3NhZ2UsIGRhdGEpO1xuICB9XG5cbiAgLyoqXG4gICAqIOaAp+iDvea1i+mHj+W8gOWni1xuICAgKi9cbiAgdGltZVN0YXJ0KG1vZHVsZTogc3RyaW5nLCBsYWJlbDogc3RyaW5nKTogdm9pZCB7XG4gICAgaWYgKHRoaXMuaXNEZXZlbG9wbWVudCkge1xuICAgICAgY29uc29sZS50aW1lKHRoaXMuZm9ybWF0TWVzc2FnZShtb2R1bGUsIGxhYmVsKSk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIOaAp+iDvea1i+mHj+e7k+adn1xuICAgKi9cbiAgdGltZUVuZChtb2R1bGU6IHN0cmluZywgbGFiZWw6IHN0cmluZyk6IHZvaWQge1xuICAgIGlmICh0aGlzLmlzRGV2ZWxvcG1lbnQpIHtcbiAgICAgIGNvbnNvbGUudGltZUVuZCh0aGlzLmZvcm1hdE1lc3NhZ2UobW9kdWxlLCBsYWJlbCkpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiDliIbnu4Tml6Xlv5flvIDlp4tcbiAgICovXG4gIGdyb3VwU3RhcnQobW9kdWxlOiBzdHJpbmcsIHRpdGxlOiBzdHJpbmcpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5pc0RldmVsb3BtZW50KSB7XG4gICAgICBjb25zb2xlLmdyb3VwKHRoaXMuZm9ybWF0TWVzc2FnZShtb2R1bGUsIHRpdGxlKSk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIOWIhue7hOaXpeW/l+e7k+adn1xuICAgKi9cbiAgZ3JvdXBFbmQoKTogdm9pZCB7XG4gICAgaWYgKHRoaXMuaXNEZXZlbG9wbWVudCkge1xuICAgICAgY29uc29sZS5ncm91cEVuZCgpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiDojrflj5bml6Xlv5fljoblj7JcbiAgICovXG4gIGdldEhpc3RvcnkoZmlsdGVyTW9kdWxlPzogc3RyaW5nLCBmaWx0ZXJMZXZlbD86IExvZ0xldmVsKTogdHlwZW9mIHRoaXMubG9nSGlzdG9yeSB7XG4gICAgbGV0IGZpbHRlcmVkID0gdGhpcy5sb2dIaXN0b3J5O1xuXG4gICAgaWYgKGZpbHRlck1vZHVsZSkge1xuICAgICAgZmlsdGVyZWQgPSBmaWx0ZXJlZC5maWx0ZXIobG9nID0+IGxvZy5tb2R1bGUgPT09IGZpbHRlck1vZHVsZSk7XG4gICAgfVxuXG4gICAgaWYgKGZpbHRlckxldmVsICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIGZpbHRlcmVkID0gZmlsdGVyZWQuZmlsdGVyKGxvZyA9PiBsb2cubGV2ZWwgPj0gZmlsdGVyTGV2ZWwpO1xuICAgIH1cblxuICAgIHJldHVybiBmaWx0ZXJlZDtcbiAgfVxuXG4gIC8qKlxuICAgKiDmuIXnqbrml6Xlv5fljoblj7JcbiAgICovXG4gIGNsZWFySGlzdG9yeSgpOiB2b2lkIHtcbiAgICB0aGlzLmxvZ0hpc3RvcnkgPSBbXTtcbiAgfVxuXG4gIC8qKlxuICAgKiDlr7zlh7rml6Xlv5fljoblj7LkuLpKU09OXG4gICAqL1xuICBleHBvcnRIaXN0b3J5KCk6IHN0cmluZyB7XG4gICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KHRoaXMubG9nSGlzdG9yeSwgbnVsbCwgMik7XG4gIH1cblxuICAvKipcbiAgICog5pi+56S66LCD6K+V6Z2i5p2/77yI5aaC5p6c5Zyo5byA5Y+R5qih5byP77yJXG4gICAqL1xuICBzaG93RGVidWdQYW5lbCgpOiB2b2lkIHtcbiAgICBpZiAoIXRoaXMuaXNEZXZlbG9wbWVudCkge1xuICAgICAgY29uc29sZS53YXJuKCfosIPor5XpnaLmnb/ku4XlnKjlvIDlj5HmqKHlvI/kuIvlj6/nlKgnKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zb2xlLmdyb3VwKCfwn5CbIEJMTVgg6LCD6K+V5L+h5oGvJyk7XG4gICAgY29uc29sZS5sb2coJ+W8gOWPkeaooeW8jzonLCB0aGlzLmlzRGV2ZWxvcG1lbnQpO1xuICAgIGNvbnNvbGUubG9nKCfml6Xlv5fnuqfliKs6JywgTG9nTGV2ZWxbdGhpcy5sb2dMZXZlbF0pO1xuICAgIGNvbnNvbGUubG9nKCfljoblj7LorrDlvZXmlbDph486JywgdGhpcy5sb2dIaXN0b3J5Lmxlbmd0aCk7XG4gICAgXG4gICAgaWYgKHRoaXMubG9nSGlzdG9yeS5sZW5ndGggPiAwKSB7XG4gICAgICBjb25zb2xlLmxvZygn5pyA6L+R55qE5pel5b+XOicpO1xuICAgICAgdGhpcy5sb2dIaXN0b3J5LnNsaWNlKC0xMCkuZm9yRWFjaChsb2cgPT4ge1xuICAgICAgICBjb25zdCBsZXZlbEljb24gPSBbJ/CflI0nLCAn4oS577iPJywgJ+KaoO+4jycsICfinYwnXVtsb2cubGV2ZWxdO1xuICAgICAgICBjb25zb2xlLmxvZyhgJHtsZXZlbEljb259IFske2xvZy5tb2R1bGV9XSAke2xvZy5tZXNzYWdlfWAsIGxvZy5kYXRhIHx8ICcnKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgICBcbiAgICBjb25zb2xlLmdyb3VwRW5kKCk7XG4gIH1cblxuICAvKipcbiAgICog6I635Y+W5b2T5YmN54q25oCBXG4gICAqL1xuICBnZXRTdGF0dXMoKToge1xuICAgIGlzRGV2ZWxvcG1lbnQ6IGJvb2xlYW47XG4gICAgbG9nTGV2ZWw6IHN0cmluZztcbiAgICBoaXN0b3J5Q291bnQ6IG51bWJlcjtcbiAgfSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGlzRGV2ZWxvcG1lbnQ6IHRoaXMuaXNEZXZlbG9wbWVudCxcbiAgICAgIGxvZ0xldmVsOiBMb2dMZXZlbFt0aGlzLmxvZ0xldmVsXSxcbiAgICAgIGhpc3RvcnlDb3VudDogdGhpcy5sb2dIaXN0b3J5Lmxlbmd0aCxcbiAgICB9O1xuICB9XG59XG5cbi8vIOWIm+W7uuWFqOWxgOWunuS+i1xuZXhwb3J0IGNvbnN0IGxvZ2dlciA9IERlYnVnTG9nZ2VyLmdldEluc3RhbmNlKCk7XG5cbi8vIOWcqOW8gOWPkeaooeW8j+S4i+aatOmcsuWIsOWFqOWxgOS9nOeUqOWfn++8jOaWueS+v+iwg+ivlVxuaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnICYmIGxvZ2dlci5nZXRTdGF0dXMoKS5pc0RldmVsb3BtZW50KSB7XG4gICh3aW5kb3cgYXMgYW55KS5ibG14TG9nZ2VyID0gbG9nZ2VyO1xufVxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/同层手机/debug-logger.ts\n")},"./src/同层手机/dialog-manager.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DialogManager: () => (/* binding */ DialogManager)\n/* harmony export */ });\n/**\n * 对话框管理器\n * 提供自定义的alert、confirm、prompt对话框，替代系统默认对话框\n */\nclass DialogManager {\n    static instance;\n    activeDialog = null;\n    activeOverlay = null;\n    constructor() {\n        // 私有构造函数，确保单例模式\n    }\n    /**\n     * 获取单例实例\n     */\n    static getInstance() {\n        if (!DialogManager.instance) {\n            DialogManager.instance = new DialogManager();\n        }\n        return DialogManager.instance;\n    }\n    /**\n     * HTML转义辅助方法\n     */\n    escapeHtml(text) {\n        const div = document.createElement('div');\n        div.textContent = text;\n        return div.innerHTML;\n    }\n    /**\n     * 安全显示对话框 - 如果已有对话框则先关闭\n     */\n    async safeShowDialog(dialogFunction) {\n        // 强制清理所有对话框（无论是否有活跃对话框）\n        this.forceCleanupDialogs();\n        return await dialogFunction();\n    }\n    /**\n     * 将对话框添加到页面中\n     */\n    appendDialogToPage() {\n        if (!this.activeOverlay)\n            return;\n        const phoneScreen = document.querySelector('.phone-screen');\n        if (phoneScreen) {\n            phoneScreen.appendChild(this.activeOverlay);\n        }\n        else {\n            // 如果找不到手机屏幕容器，回退到body\n            document.body.appendChild(this.activeOverlay);\n        }\n    }\n    /**\n     * 初始化对话框中的checkbox按钮样式\n     */\n    initializeCheckboxButtons() {\n        if (!this.activeDialog)\n            return;\n        const checkboxButtons = this.activeDialog.querySelectorAll('.checkbox-button');\n        checkboxButtons.forEach(button => {\n            const checkbox = button.querySelector('input[type=\"checkbox\"]');\n            if (!checkbox)\n                return;\n            // 设置初始状态\n            this.updateCheckboxButtonState(button, checkbox.checked);\n            // 添加点击事件\n            button.addEventListener('click', e => {\n                e.preventDefault();\n                if (checkbox.disabled)\n                    return;\n                // 切换状态\n                checkbox.checked = !checkbox.checked;\n                this.updateCheckboxButtonState(button, checkbox.checked);\n                // 触发change事件\n                const changeEvent = new Event('change', { bubbles: true });\n                checkbox.dispatchEvent(changeEvent);\n            });\n            // 监听外部状态变化\n            checkbox.addEventListener('change', () => {\n                this.updateCheckboxButtonState(button, checkbox.checked);\n            });\n            // 设置可访问性属性\n            button.setAttribute('role', 'checkbox');\n            button.setAttribute('tabindex', '0');\n            button.setAttribute('aria-checked', checkbox.checked.toString());\n        });\n    }\n    /**\n     * 更新checkbox按钮状态\n     */\n    updateCheckboxButtonState(button, checked) {\n        if (checked) {\n            button.classList.add('checked');\n        }\n        else {\n            button.classList.remove('checked');\n        }\n        // 更新aria属性\n        button.setAttribute('aria-checked', checked.toString());\n    }\n    /**\n     * 显示提示对话框（替代alert）\n     */\n    alert(message, title = '提示', confirmText = '确定') {\n        return this.safeShowDialog(() => this.showDialog({\n            type: 'alert',\n            title,\n            message,\n            confirmText,\n        }));\n    }\n    /**\n     * 显示确认对话框（替代confirm）\n     */\n    confirm(message, title = '确认', confirmText = '确定', cancelText = '取消') {\n        return this.safeShowDialog(() => this.showDialog({\n            type: 'confirm',\n            title,\n            message,\n            confirmText,\n            cancelText,\n        }));\n    }\n    /**\n     * 显示输入对话框（替代prompt）\n     */\n    prompt(message, defaultValue = '', title = '请输入', confirmText = '确定', cancelText = '取消', inputType = 'text', placeholder = '') {\n        return this.safeShowDialog(() => this.showDialog({\n            type: 'prompt',\n            title,\n            message,\n            confirmText,\n            cancelText,\n            inputType,\n            inputValue: defaultValue,\n            inputPlaceholder: placeholder,\n        }));\n    }\n    /**\n     * 显示可滚动文本对话框（用于显示长文本内容）\n     */\n    showScrollableText(content, title = '内容', confirmText = '关闭') {\n        return this.safeShowDialog(() => new Promise(resolve => {\n            // 创建遮罩层\n            this.activeOverlay = document.createElement('div');\n            this.activeOverlay.className = 'dialog-overlay mobile-dialog-overlay';\n            // 创建对话框\n            this.activeDialog = document.createElement('div');\n            this.activeDialog.className = 'dialog scrollable-text-dialog mobile-dialog';\n            // 设置对话框内容\n            this.activeDialog.innerHTML = `\n          <div class=\"dialog-header\">\n            <h3>${title}</h3>\n          </div>\n          <div class=\"dialog-body scrollable-content\">\n            <pre class=\"scrollable-text\">${this.escapeHtml(content)}</pre>\n          </div>\n          <div class=\"dialog-footer\">\n            <button class=\"dialog-button copy-btn\">复制</button>\n            <button class=\"dialog-button primary-button\">${confirmText}</button>\n          </div>\n        `;\n            const copyBtn = this.activeDialog.querySelector('.copy-btn');\n            const confirmBtn = this.activeDialog.querySelector('.primary-button');\n            const handleCopy = async () => {\n                try {\n                    await navigator.clipboard.writeText(content);\n                    // 临时改变按钮文字提示复制成功\n                    const originalText = copyBtn.textContent;\n                    copyBtn.textContent = '已复制';\n                    setTimeout(() => {\n                        copyBtn.textContent = originalText;\n                    }, 1000);\n                }\n                catch (error) {\n                    console.error('复制失败:', error);\n                    // 降级方案：选择文本\n                    const textElement = this.activeDialog.querySelector('.scrollable-text');\n                    if (textElement) {\n                        const range = document.createRange();\n                        range.selectNodeContents(textElement);\n                        const selection = window.getSelection();\n                        if (selection) {\n                            selection.removeAllRanges();\n                            selection.addRange(range);\n                        }\n                    }\n                }\n            };\n            const handleConfirm = () => {\n                this.closeDialog();\n                resolve();\n            };\n            const handleCancel = () => {\n                this.closeDialog();\n                resolve();\n            };\n            copyBtn.addEventListener('click', handleCopy);\n            confirmBtn.addEventListener('click', handleConfirm);\n            // ESC键关闭\n            const handleKeyDown = (e) => {\n                if (e.key === 'Escape') {\n                    handleCancel();\n                    document.removeEventListener('keydown', handleKeyDown);\n                }\n            };\n            document.addEventListener('keydown', handleKeyDown);\n            // 添加到手机屏幕容器内\n            this.activeOverlay.appendChild(this.activeDialog);\n            this.appendDialogToPage();\n        }));\n    }\n    /**\n     * 显示对话框\n     */\n    showDialog(options) {\n        // 创建对话框元素\n        const { overlay, dialog } = this.createDialogElements(options);\n        // 保存引用\n        this.activeOverlay = overlay;\n        this.activeDialog = dialog;\n        // 添加到页面中\n        this.appendDialogToPage();\n        // 处理输入框自动聚焦\n        if (options.type === 'prompt') {\n            const inputEl = dialog.querySelector('input, textarea');\n            if (inputEl) {\n                setTimeout(() => inputEl.focus(), 100);\n            }\n        }\n        return new Promise(resolve => {\n            // 确认按钮点击处理\n            const confirmButton = dialog.querySelector('.primary-button');\n            if (confirmButton) {\n                confirmButton.addEventListener('click', () => {\n                    if (options.type === 'prompt') {\n                        const inputEl = dialog.querySelector('input, textarea');\n                        const value = inputEl ? inputEl.value : null;\n                        this.closeDialog();\n                        resolve(value);\n                    }\n                    else {\n                        this.closeDialog();\n                        resolve(options.type === 'confirm' ? true : undefined);\n                    }\n                });\n            }\n            // 取消按钮点击处理\n            const cancelButton = dialog.querySelector('.cancel-button');\n            if (cancelButton) {\n                cancelButton.addEventListener('click', () => {\n                    this.closeDialog();\n                    resolve(options.type === 'prompt' ? null : false);\n                });\n            }\n            // 点击遮罩层关闭（仅对alert有效）\n            if (options.type === 'alert') {\n                overlay.addEventListener('click', e => {\n                    if (e.target === overlay) {\n                        this.closeDialog();\n                        resolve(undefined);\n                    }\n                });\n            }\n            // 键盘事件处理\n            const handleKeyDown = (e) => {\n                if (e.key === 'Enter') {\n                    e.preventDefault();\n                    if (options.type === 'prompt') {\n                        const inputEl = dialog.querySelector('input, textarea');\n                        const value = inputEl ? inputEl.value : null;\n                        this.closeDialog();\n                        resolve(value);\n                    }\n                    else if (options.type === 'confirm') {\n                        this.closeDialog();\n                        resolve(true);\n                    }\n                    else {\n                        // alert\n                        this.closeDialog();\n                        resolve(undefined);\n                    }\n                    document.removeEventListener('keydown', handleKeyDown);\n                }\n                else if (e.key === 'Escape') {\n                    e.preventDefault();\n                    this.closeDialog();\n                    resolve(options.type === 'prompt' ? null : false);\n                    document.removeEventListener('keydown', handleKeyDown);\n                }\n            };\n            document.addEventListener('keydown', handleKeyDown);\n        });\n    }\n    /**\n     * 创建对话框元素\n     */\n    createDialogElements(options) {\n        // 创建遮罩层\n        const overlay = document.createElement('div');\n        overlay.className = 'custom-dialog-overlay';\n        // 创建对话框\n        const dialog = document.createElement('div');\n        dialog.className = `custom-dialog ${options.className || ''}`;\n        // 创建标题\n        const header = document.createElement('div');\n        header.className = 'dialog-header';\n        const title = document.createElement('h3');\n        title.className = 'dialog-title';\n        title.textContent = options.title || '';\n        header.appendChild(title);\n        dialog.appendChild(header);\n        // 创建内容\n        const body = document.createElement('div');\n        body.className = 'dialog-body';\n        // 添加消息\n        const message = document.createElement('div');\n        message.textContent = options.message;\n        body.appendChild(message);\n        // 如果是prompt，添加输入框\n        if (options.type === 'prompt') {\n            const inputContainer = document.createElement('div');\n            inputContainer.className = 'dialog-input-container';\n            const input = document.createElement(options.inputType === 'textarea' ? 'textarea' : 'input');\n            if (options.inputType !== 'textarea') {\n                input.type = options.inputType || 'text';\n            }\n            if (options.inputValue) {\n                input.value = options.inputValue;\n            }\n            if (options.inputPlaceholder) {\n                input.setAttribute('placeholder', options.inputPlaceholder);\n            }\n            inputContainer.appendChild(input);\n            body.appendChild(inputContainer);\n        }\n        dialog.appendChild(body);\n        // 创建按钮区域\n        const footer = document.createElement('div');\n        footer.className = 'dialog-footer';\n        // 根据类型添加不同的按钮\n        if (options.type === 'confirm' || options.type === 'prompt') {\n            const cancelButton = document.createElement('button');\n            cancelButton.className = 'dialog-button cancel-button';\n            cancelButton.textContent = options.cancelText || '取消';\n            footer.appendChild(cancelButton);\n        }\n        const confirmButton = document.createElement('button');\n        confirmButton.className = 'dialog-button primary-button';\n        confirmButton.textContent = options.confirmText || '确定';\n        footer.appendChild(confirmButton);\n        dialog.appendChild(footer);\n        overlay.appendChild(dialog);\n        return { overlay, dialog };\n    }\n    /**\n     * 显示朋友圈评论/点赞对话框\n     */\n    showCommentDialog() {\n        return this.safeShowDialog(() => new Promise(resolve => {\n            // 创建遮罩层\n            this.activeOverlay = document.createElement('div');\n            this.activeOverlay.className = 'dialog-overlay mobile-dialog-overlay';\n            // 创建对话框\n            this.activeDialog = document.createElement('div');\n            this.activeDialog.className = 'dialog comment-dialog mobile-dialog';\n            this.activeDialog.innerHTML = `\n        <div class=\"dialog-header\">\n          <h3>互动</h3>\n        </div>\n        <div class=\"dialog-body\">\n          <div class=\"form-group\">\n            <label for=\"comment-text\">评论内容</label>\n            <textarea id=\"comment-text\" placeholder=\"说点什么...\" rows=\"3\"></textarea>\n          </div>\n        </div>\n        <div class=\"dialog-footer\">\n          <button class=\"dialog-button cancel-btn\">取消</button>\n          <button class=\"dialog-button like-btn\">点赞</button>\n          <button class=\"dialog-button confirm-btn\">发送</button>\n        </div>\n      `;\n            const cancelBtn = this.activeDialog.querySelector('.cancel-btn');\n            const likeBtn = this.activeDialog.querySelector('.like-btn');\n            const confirmBtn = this.activeDialog.querySelector('.confirm-btn');\n            const commentText = this.activeDialog.querySelector('#comment-text');\n            const handleCancel = () => {\n                this.closeDialog();\n                resolve(null);\n            };\n            const handleLike = () => {\n                this.closeDialog();\n                resolve({ type: 'like' });\n            };\n            const handleComment = () => {\n                const content = commentText.value.trim();\n                if (!content) {\n                    // 在输入框上显示错误提示，而不是弹出新的alert\n                    commentText.style.borderColor = '#ff4444';\n                    commentText.placeholder = '请输入评论内容';\n                    commentText.focus();\n                    return;\n                }\n                this.closeDialog();\n                resolve({ type: 'comment', content });\n            };\n            cancelBtn.addEventListener('click', handleCancel);\n            likeBtn.addEventListener('click', handleLike);\n            confirmBtn.addEventListener('click', handleComment);\n            // 键盘事件处理\n            const handleKeyDown = (e) => {\n                if (e.key === 'Enter' && e.ctrlKey) {\n                    // Ctrl+Enter 发送评论\n                    e.preventDefault();\n                    handleComment();\n                }\n                else if (e.key === 'Escape') {\n                    handleCancel();\n                    document.removeEventListener('keydown', handleKeyDown);\n                }\n            };\n            document.addEventListener('keydown', handleKeyDown);\n            // 添加到手机屏幕容器内\n            this.activeOverlay.appendChild(this.activeDialog);\n            this.appendDialogToPage();\n            // 聚焦到文本框\n            setTimeout(() => {\n                commentText.focus();\n            }, 100);\n        }));\n    }\n    /**\n     * 显示转账对话框\n     */\n    showTransferDialog() {\n        return this.safeShowDialog(() => new Promise(resolve => {\n            // 创建遮罩层\n            this.activeOverlay = document.createElement('div');\n            this.activeOverlay.className = 'dialog-overlay mobile-dialog-overlay';\n            // 创建对话框\n            this.activeDialog = document.createElement('div');\n            this.activeDialog.className = 'dialog transfer-dialog mobile-dialog';\n            this.activeDialog.innerHTML = `\n        <div class=\"dialog-header\">\n          <h3>转账</h3>\n        </div>\n        <div class=\"dialog-body\">\n          <div class=\"form-group\">\n            <label for=\"transfer-amount\">转账金额 *</label>\n            <input type=\"number\" id=\"transfer-amount\" placeholder=\"请输入转账金额\" step=\"0.01\" min=\"0.01\">\n          </div>\n          <div class=\"form-group\">\n            <label for=\"transfer-note\">转账备注</label>\n            <input type=\"text\" id=\"transfer-note\" placeholder=\"请输入转账备注（可选）\">\n          </div>\n        </div>\n        <div class=\"dialog-footer\">\n          <button class=\"dialog-button cancel-btn\">取消</button>\n          <button class=\"dialog-button confirm-btn\">确认转账</button>\n        </div>\n      `;\n            const cancelBtn = this.activeDialog.querySelector('.cancel-btn');\n            const confirmBtn = this.activeDialog.querySelector('.confirm-btn');\n            const amountInput = this.activeDialog.querySelector('#transfer-amount');\n            const noteInput = this.activeDialog.querySelector('#transfer-note');\n            const handleCancel = () => {\n                this.closeDialog();\n                resolve(null);\n            };\n            const handleConfirm = () => {\n                const amount = amountInput.value.trim();\n                const note = noteInput.value.trim();\n                if (!amount || parseFloat(amount) <= 0) {\n                    // 在输入框上显示错误提示，而不是弹出新的alert\n                    amountInput.style.borderColor = '#ff4444';\n                    amountInput.placeholder = '请输入有效的转账金额';\n                    amountInput.focus();\n                    return;\n                }\n                this.closeDialog();\n                resolve({ amount: parseFloat(amount).toFixed(2), note: note || '' });\n            };\n            cancelBtn.addEventListener('click', handleCancel);\n            confirmBtn.addEventListener('click', handleConfirm);\n            // 回车键确认\n            const handleKeyDown = (e) => {\n                if (e.key === 'Enter') {\n                    handleConfirm();\n                }\n                else if (e.key === 'Escape') {\n                    handleCancel();\n                    document.removeEventListener('keydown', handleKeyDown);\n                }\n            };\n            document.addEventListener('keydown', handleKeyDown);\n            // 添加到手机屏幕容器内\n            this.activeOverlay.appendChild(this.activeDialog);\n            this.appendDialogToPage();\n            // 聚焦到金额输入框\n            setTimeout(() => {\n                amountInput.focus();\n            }, 100);\n        }));\n    }\n    /**\n     * 显示红包对话框\n     */\n    showRedPacketDialog() {\n        return this.safeShowDialog(() => new Promise(resolve => {\n            // 创建遮罩层\n            this.activeOverlay = document.createElement('div');\n            this.activeOverlay.className = 'dialog-overlay mobile-dialog-overlay';\n            // 创建对话框\n            this.activeDialog = document.createElement('div');\n            this.activeDialog.className = 'dialog red-packet-dialog mobile-dialog';\n            this.activeDialog.innerHTML = `\n        <div class=\"dialog-header\">\n          <h3>🧧 发送红包</h3>\n        </div>\n        <div class=\"dialog-body\">\n          <div class=\"form-group\">\n            <label for=\"red-packet-amount\">红包金额 *</label>\n            <input type=\"number\" id=\"red-packet-amount\" placeholder=\"请输入红包金额\" step=\"0.01\" min=\"0.01\">\n          </div>\n          <div class=\"form-group\">\n            <label for=\"red-packet-note\">红包祝福语</label>\n            <input type=\"text\" id=\"red-packet-note\" placeholder=\"恭喜发财，大吉大利！\" value=\"恭喜发财，大吉大利！\">\n          </div>\n        </div>\n        <div class=\"dialog-footer\">\n          <button class=\"dialog-button cancel-btn\">取消</button>\n          <button class=\"dialog-button confirm-btn\">发送红包</button>\n        </div>\n      `;\n            const cancelBtn = this.activeDialog.querySelector('.cancel-btn');\n            const confirmBtn = this.activeDialog.querySelector('.confirm-btn');\n            const amountInput = this.activeDialog.querySelector('#red-packet-amount');\n            const noteInput = this.activeDialog.querySelector('#red-packet-note');\n            const handleCancel = () => {\n                this.closeDialog();\n                resolve(null);\n            };\n            const handleConfirm = () => {\n                const amount = amountInput.value.trim();\n                const note = noteInput.value.trim();\n                if (!amount || parseFloat(amount) <= 0) {\n                    // 在输入框上显示错误提示，而不是弹出新的alert\n                    amountInput.style.borderColor = '#ff4444';\n                    amountInput.placeholder = '请输入有效的红包金额';\n                    amountInput.focus();\n                    return;\n                }\n                this.closeDialog();\n                resolve({ amount: parseFloat(amount).toFixed(2), note: note || '恭喜发财，大吉大利！' });\n            };\n            cancelBtn.addEventListener('click', handleCancel);\n            confirmBtn.addEventListener('click', handleConfirm);\n            // 回车键确认\n            const handleKeyDown = (e) => {\n                if (e.key === 'Enter') {\n                    handleConfirm();\n                }\n                else if (e.key === 'Escape') {\n                    handleCancel();\n                    document.removeEventListener('keydown', handleKeyDown);\n                }\n            };\n            document.addEventListener('keydown', handleKeyDown);\n            // 添加到手机屏幕容器内\n            this.activeOverlay.appendChild(this.activeDialog);\n            this.appendDialogToPage();\n            // 聚焦到金额输入框\n            setTimeout(() => {\n                amountInput.focus();\n            }, 100);\n        }));\n    }\n    /**\n     * 显示礼物对话框\n     */\n    showGiftDialog() {\n        return this.safeShowDialog(() => new Promise(resolve => {\n            // 创建遮罩层\n            this.activeOverlay = document.createElement('div');\n            this.activeOverlay.className = 'dialog-overlay mobile-dialog-overlay';\n            // 创建对话框\n            this.activeDialog = document.createElement('div');\n            this.activeDialog.className = 'dialog gift-dialog mobile-dialog';\n            this.activeDialog.innerHTML = `\n        <div class=\"dialog-header\">\n          <h3>🎁 发送礼物</h3>\n        </div>\n        <div class=\"dialog-body\">\n          <div class=\"form-group\">\n            <label for=\"gift-name\">礼物名称 *</label>\n            <input type=\"text\" id=\"gift-name\" placeholder=\"请输入礼物名称\">\n          </div>\n          <div class=\"form-group\">\n            <label for=\"gift-price\">礼物价格</label>\n            <input type=\"number\" id=\"gift-price\" placeholder=\"请输入价格（可选）\" step=\"0.01\" min=\"0\">\n          </div>\n        </div>\n        <div class=\"dialog-footer\">\n          <button class=\"dialog-button cancel-btn\">取消</button>\n          <button class=\"dialog-button confirm-btn\">发送礼物</button>\n        </div>\n      `;\n            const cancelBtn = this.activeDialog.querySelector('.cancel-btn');\n            const confirmBtn = this.activeDialog.querySelector('.confirm-btn');\n            const nameInput = this.activeDialog.querySelector('#gift-name');\n            const priceInput = this.activeDialog.querySelector('#gift-price');\n            const handleCancel = () => {\n                this.closeDialog();\n                resolve(null);\n            };\n            const handleConfirm = () => {\n                const name = nameInput.value.trim();\n                const price = priceInput.value.trim();\n                if (!name) {\n                    // 在输入框上显示错误提示，而不是弹出新的alert\n                    nameInput.style.borderColor = '#ff4444';\n                    nameInput.placeholder = '请输入礼物名称';\n                    nameInput.focus();\n                    return;\n                }\n                this.closeDialog();\n                resolve({\n                    name,\n                    price: price && parseFloat(price) > 0 ? parseFloat(price).toFixed(2) : undefined,\n                });\n            };\n            cancelBtn.addEventListener('click', handleCancel);\n            confirmBtn.addEventListener('click', handleConfirm);\n            // 回车键确认\n            const handleKeyDown = (e) => {\n                if (e.key === 'Enter') {\n                    handleConfirm();\n                }\n                else if (e.key === 'Escape') {\n                    handleCancel();\n                    document.removeEventListener('keydown', handleKeyDown);\n                }\n            };\n            document.addEventListener('keydown', handleKeyDown);\n            // 添加到手机屏幕容器内\n            this.activeOverlay.appendChild(this.activeDialog);\n            this.appendDialogToPage();\n            // 聚焦到名称输入框\n            setTimeout(() => {\n                nameInput.focus();\n            }, 100);\n        }));\n    }\n    /**\n     * 显示自定义输入对话框（替代系统prompt）\n     */\n    showInputDialog(title, label, defaultValue = '', placeholder = '', inputType = 'text') {\n        return this.safeShowDialog(() => new Promise(resolve => {\n            // 创建遮罩层\n            this.activeOverlay = document.createElement('div');\n            this.activeOverlay.className = 'dialog-overlay mobile-dialog-overlay';\n            // 创建对话框\n            this.activeDialog = document.createElement('div');\n            this.activeDialog.className = 'dialog input-dialog mobile-dialog';\n            this.activeDialog.innerHTML = `\n            <div class=\"dialog-header\">\n              <h3>${title}</h3>\n            </div>\n            <div class=\"dialog-body\">\n              <div class=\"form-group\">\n                <label for=\"input-field\">${label}</label>\n                <input type=\"${inputType}\" id=\"input-field\" placeholder=\"${placeholder}\" value=\"${defaultValue}\">\n              </div>\n            </div>\n            <div class=\"dialog-footer\">\n              <button class=\"dialog-button cancel-btn\">取消</button>\n              <button class=\"dialog-button confirm-btn\">确定</button>\n            </div>\n          `;\n            const cancelBtn = this.activeDialog.querySelector('.cancel-btn');\n            const confirmBtn = this.activeDialog.querySelector('.confirm-btn');\n            const inputField = this.activeDialog.querySelector('#input-field');\n            const handleCancel = () => {\n                this.closeDialog();\n                resolve(null);\n            };\n            const handleConfirm = () => {\n                const value = inputField.value.trim();\n                this.closeDialog();\n                resolve(value);\n            };\n            cancelBtn.addEventListener('click', handleCancel);\n            confirmBtn.addEventListener('click', handleConfirm);\n            // 回车键确认\n            const handleKeyDown = (e) => {\n                if (e.key === 'Enter') {\n                    handleConfirm();\n                }\n                else if (e.key === 'Escape') {\n                    handleCancel();\n                    document.removeEventListener('keydown', handleKeyDown);\n                }\n            };\n            document.addEventListener('keydown', handleKeyDown);\n            // 添加到手机屏幕容器内\n            this.activeOverlay.appendChild(this.activeDialog);\n            this.appendDialogToPage();\n            // 聚焦到输入框并选中默认值\n            setTimeout(() => {\n                inputField.focus();\n                if (defaultValue) {\n                    inputField.select();\n                }\n            }, 100);\n        }));\n    }\n    /**\n     * 显示语音输入对话框\n     */\n    showVoiceDialog() {\n        return this.safeShowDialog(() => new Promise(resolve => {\n            // 创建遮罩层\n            this.activeOverlay = document.createElement('div');\n            this.activeOverlay.className = 'dialog-overlay mobile-dialog-overlay';\n            // 创建对话框\n            this.activeDialog = document.createElement('div');\n            this.activeDialog.className = 'dialog voice-dialog mobile-dialog';\n            this.activeDialog.innerHTML = `\n        <div class=\"dialog-header\">\n          <h3>🎤 语音消息</h3>\n        </div>\n        <div class=\"dialog-body\">\n          <div class=\"form-group\">\n            <label for=\"voice-text\">语音内容</label>\n            <textarea id=\"voice-text\" placeholder=\"请输入语音内容...\" rows=\"3\"></textarea>\n          </div>\n          <div class=\"form-group\">\n            <label for=\"voice-duration\">语音时长（秒）</label>\n            <input type=\"number\" id=\"voice-duration\" placeholder=\"请输入秒数\" min=\"1\" max=\"60\" value=\"3\">\n          </div>\n        </div>\n        <div class=\"dialog-footer\">\n          <button class=\"dialog-button cancel-btn\">取消</button>\n          <button class=\"dialog-button confirm-btn\">发送</button>\n        </div>\n      `;\n            const cancelBtn = this.activeDialog.querySelector('.cancel-btn');\n            const confirmBtn = this.activeDialog.querySelector('.confirm-btn');\n            const textArea = this.activeDialog.querySelector('#voice-text');\n            const durationInput = this.activeDialog.querySelector('#voice-duration');\n            const handleCancel = () => {\n                this.closeDialog();\n                resolve(null);\n            };\n            const handleConfirm = () => {\n                const text = textArea.value.trim();\n                const durationStr = durationInput.value.trim();\n                if (!text) {\n                    // 在文本框上显示错误提示，而不是弹出新的alert\n                    textArea.style.borderColor = '#ff4444';\n                    textArea.placeholder = '请输入语音内容';\n                    textArea.focus();\n                    return;\n                }\n                const duration = parseInt(durationStr, 10);\n                if (!durationStr || isNaN(duration) || duration <= 0 || duration > 60) {\n                    // 在输入框上显示错误提示，而不是弹出新的alert\n                    durationInput.style.borderColor = '#ff4444';\n                    durationInput.placeholder = '请输入有效的语音时长（1-60秒）';\n                    durationInput.focus();\n                    return;\n                }\n                this.closeDialog();\n                resolve({ text, duration });\n            };\n            cancelBtn.addEventListener('click', handleCancel);\n            confirmBtn.addEventListener('click', handleConfirm);\n            // 回车键确认（在textarea中使用Ctrl+Enter）\n            const handleKeyDown = (e) => {\n                if (e.key === 'Enter' && e.ctrlKey) {\n                    e.preventDefault();\n                    handleConfirm();\n                }\n                else if (e.key === 'Escape') {\n                    handleCancel();\n                    document.removeEventListener('keydown', handleKeyDown);\n                }\n            };\n            document.addEventListener('keydown', handleKeyDown);\n            // 添加到手机屏幕容器内\n            this.activeOverlay.appendChild(this.activeDialog);\n            this.appendDialogToPage();\n            // 聚焦到文本框\n            setTimeout(() => {\n                textArea.focus();\n            }, 100);\n        }));\n    }\n    /**\n     * 显示礼物/转账接收对话框\n     */\n    showReceiveDialog(type, data) {\n        return this.safeShowDialog(() => new Promise(resolve => {\n            // 创建遮罩层\n            this.activeOverlay = document.createElement('div');\n            this.activeOverlay.className = 'dialog-overlay mobile-dialog-overlay';\n            // 创建对话框\n            this.activeDialog = document.createElement('div');\n            this.activeDialog.className = 'dialog receive-dialog mobile-dialog';\n            const isGift = type === 'gift';\n            const title = isGift ? '收到礼物' : '收到转账';\n            const icon = isGift ? '🎁' : '💰';\n            let content = '';\n            if (isGift) {\n                content = `\n          <div class=\"receive-content\">\n            <div class=\"receive-icon\">${icon}</div>\n            <div class=\"receive-info\">\n              <div class=\"receive-title\">${data.name}</div>\n              ${data.price ? `<div class=\"receive-price\">¥${data.price}</div>` : ''}\n              ${data.note ? `<div class=\"receive-note\">${data.note}</div>` : ''}\n            </div>\n          </div>\n        `;\n            }\n            else {\n                content = `\n          <div class=\"receive-content\">\n            <div class=\"receive-icon\">${icon}</div>\n            <div class=\"receive-info\">\n              <div class=\"receive-title\">转账金额</div>\n              <div class=\"receive-price\">¥${data.amount}</div>\n              ${data.note ? `<div class=\"receive-note\">${data.note}</div>` : ''}\n            </div>\n          </div>\n        `;\n            }\n            this.activeDialog.innerHTML = `\n        <div class=\"dialog-header\">\n          <h3>${title}</h3>\n        </div>\n        <div class=\"dialog-body\">\n          ${content}\n        </div>\n        <div class=\"dialog-footer\">\n          <button class=\"dialog-button reject-btn\">拒绝</button>\n          <button class=\"dialog-button accept-btn\">接收</button>\n        </div>\n      `;\n            const rejectBtn = this.activeDialog.querySelector('.reject-btn');\n            const acceptBtn = this.activeDialog.querySelector('.accept-btn');\n            const handleReject = () => {\n                this.closeDialog();\n                resolve('reject');\n            };\n            const handleAccept = () => {\n                this.closeDialog();\n                resolve('accept');\n            };\n            const handleCancel = () => {\n                this.closeDialog();\n                resolve(null);\n            };\n            rejectBtn.addEventListener('click', handleReject);\n            acceptBtn.addEventListener('click', handleAccept);\n            // 键盘事件处理\n            const handleKeyDown = (e) => {\n                if (e.key === 'Enter') {\n                    // Enter键接受转账/礼物\n                    e.preventDefault();\n                    handleAccept();\n                }\n                else if (e.key === 'Escape') {\n                    handleCancel();\n                    document.removeEventListener('keydown', handleKeyDown);\n                }\n            };\n            document.addEventListener('keydown', handleKeyDown);\n            // 添加到手机屏幕容器内\n            this.activeOverlay.appendChild(this.activeDialog);\n            this.appendDialogToPage();\n        }));\n    }\n    /**\n     * 显示朋友圈发布对话框\n     */\n    showMomentDialog(defaultTime) {\n        return this.safeShowDialog(() => new Promise(resolve => {\n            const currentDate = window.currentGameDate || new Date();\n            const defaultDateTime = defaultTime ||\n                `${currentDate.getFullYear()}-${(currentDate.getMonth() + 1).toString().padStart(2, '0')}-${currentDate\n                    .getDate()\n                    .toString()\n                    .padStart(2, '0')} ${currentDate.getHours().toString().padStart(2, '0')}:${currentDate\n                    .getMinutes()\n                    .toString()\n                    .padStart(2, '0')}`;\n            // 创建遮罩层 - 限制在手机屏幕内\n            this.activeOverlay = document.createElement('div');\n            this.activeOverlay.className = 'dialog-overlay mobile-dialog-overlay';\n            // 创建对话框\n            this.activeDialog = document.createElement('div');\n            this.activeDialog.className = 'dialog moment-dialog mobile-dialog';\n            this.activeDialog.innerHTML = `\n        <div class=\"dialog-header\">\n          <h3>发布朋友圈</h3>\n        </div>\n        <div class=\"dialog-body\">\n          <div class=\"form-group\">\n            <label for=\"moment-text\">这一刻的想法...</label>\n            <textarea id=\"moment-text\" placeholder=\"分享你的想法...\" rows=\"3\"></textarea>\n          </div>\n\n          <div class=\"form-group\">\n            <div class=\"checkbox-group vertical\">\n              <label class=\"checkbox-button full-width\" for=\"attach-image\">\n                <input type=\"checkbox\" id=\"attach-image\">\n                📷 添加图片\n              </label>\n            </div>\n          </div>\n\n          <div class=\"image-options\" style=\"display: none;\">\n            <div class=\"form-group\">\n              <label>图片类型</label>\n              <div class=\"radio-group\">\n                <label><input type=\"radio\" name=\"image-type\" value=\"desc\" checked> 图片描述</label>\n                <label><input type=\"radio\" name=\"image-type\" value=\"url\"> 图片链接</label>\n              </div>\n            </div>\n\n            <div class=\"form-group\">\n              <label for=\"image-content\" id=\"image-content-label\">图片描述</label>\n              <input type=\"text\" id=\"image-content\" placeholder=\"请输入图片描述\">\n            </div>\n\n            <div class=\"form-group url-desc-group\" style=\"display: none;\">\n              <label for=\"image-desc\">图片描述（供AI识别）</label>\n              <input type=\"text\" id=\"image-desc\" placeholder=\"描述图片内容，仅供AI识别\">\n            </div>\n          </div>\n\n          <div class=\"form-group\">\n            <label for=\"moment-datetime\">发布时间</label>\n            <input type=\"text\" id=\"moment-datetime\" value=\"${defaultDateTime}\" placeholder=\"YYYY-MM-DD HH:MM\">\n          </div>\n        </div>\n        <div class=\"dialog-footer\">\n          <button class=\"dialog-btn dialog-btn-cancel\">取消</button>\n          <button class=\"dialog-btn dialog-btn-confirm\">发布</button>\n        </div>\n      `;\n            // 添加事件监听器\n            const attachImageCheckbox = this.activeDialog.querySelector('#attach-image');\n            const imageOptions = this.activeDialog.querySelector('.image-options');\n            const imageTypeRadios = this.activeDialog.querySelectorAll('input[name=\"image-type\"]');\n            const imageContentLabel = this.activeDialog.querySelector('#image-content-label');\n            const imageContentInput = this.activeDialog.querySelector('#image-content');\n            const urlDescGroup = this.activeDialog.querySelector('.url-desc-group');\n            // 初始化checkbox按钮样式\n            this.initializeCheckboxButtons();\n            // 图片选项切换\n            attachImageCheckbox.addEventListener('change', () => {\n                imageOptions.style.display = attachImageCheckbox.checked ? 'block' : 'none';\n            });\n            // 图片类型切换\n            imageTypeRadios.forEach(radio => {\n                radio.addEventListener('change', () => {\n                    const isDesc = radio.value === 'desc';\n                    imageContentLabel.textContent = isDesc ? '图片描述' : '图片链接';\n                    imageContentInput.placeholder = isDesc ? '请输入图片描述' : '请输入图片链接';\n                    urlDescGroup.style.display = isDesc ? 'none' : 'block';\n                });\n            });\n            // 按钮事件\n            const cancelBtn = this.activeDialog.querySelector('.dialog-btn-cancel');\n            const confirmBtn = this.activeDialog.querySelector('.dialog-btn-confirm');\n            const handleCancel = () => {\n                this.closeDialog();\n                resolve(null);\n            };\n            const handleConfirm = () => {\n                // 检查对话框是否还存在\n                if (!this.activeDialog) {\n                    return;\n                }\n                const textArea = this.activeDialog.querySelector('#moment-text');\n                const attachImageInput = this.activeDialog.querySelector('#attach-image');\n                const imageTypeInput = this.activeDialog.querySelector('input[name=\"image-type\"]:checked');\n                const imageContentField = this.activeDialog.querySelector('#image-content');\n                const imageDescField = this.activeDialog.querySelector('#image-desc');\n                const datetimeInput = this.activeDialog.querySelector('#moment-datetime');\n                if (!textArea || !attachImageInput || !datetimeInput) {\n                    return;\n                }\n                const text = textArea.value;\n                const attachImage = attachImageInput.checked;\n                const imageType = attachImage && imageTypeInput ? imageTypeInput.value : 'none';\n                const imageContent = attachImage && imageContentField ? imageContentField.value : '';\n                const imageDesc = imageType === 'url' && imageDescField ? imageDescField.value : imageContent;\n                const datetime = datetimeInput.value;\n                // 验证输入\n                if ((!text || text.trim() === '') && (!imageContent || imageContent.trim() === '')) {\n                    // 在文本框上显示错误提示，而不是弹出新的alert\n                    textArea.style.borderColor = '#ff4444';\n                    textArea.placeholder = '请输入朋友圈内容或添加图片';\n                    textArea.focus();\n                    return;\n                }\n                // 解析时间\n                const datetimeMatch = datetime.match(/^(\\d{4}-\\d{2}-\\d{2})\\s+(\\d{2}:\\d{2})$/);\n                if (!datetimeMatch) {\n                    // 在时间输入框上显示错误提示，而不是弹出新的alert\n                    datetimeInput.style.borderColor = '#ff4444';\n                    datetimeInput.placeholder = '格式：YYYY-MM-DD HH:MM';\n                    datetimeInput.focus();\n                    return;\n                }\n                this.closeDialog();\n                resolve({\n                    text: text.trim(),\n                    image: imageContent.trim(),\n                    image_type: imageType,\n                    image_desc: imageDesc.trim(),\n                    date: datetimeMatch[1],\n                    time: datetimeMatch[2],\n                });\n            };\n            cancelBtn.addEventListener('click', handleCancel);\n            confirmBtn.addEventListener('click', handleConfirm);\n            // 键盘事件处理\n            const handleKeyDown = (e) => {\n                if (e.key === 'Enter' && e.ctrlKey) {\n                    // Ctrl+Enter 发布朋友圈\n                    e.preventDefault();\n                    handleConfirm();\n                }\n                else if (e.key === 'Escape') {\n                    handleCancel();\n                    document.removeEventListener('keydown', handleKeyDown);\n                }\n            };\n            document.addEventListener('keydown', handleKeyDown);\n            // 添加到手机屏幕容器内\n            this.activeOverlay.appendChild(this.activeDialog);\n            this.appendDialogToPage();\n            // 聚焦到文本框\n            setTimeout(() => {\n                if (this.activeDialog) {\n                    const textArea = this.activeDialog.querySelector('#moment-text');\n                    if (textArea) {\n                        textArea.focus();\n                    }\n                }\n            }, 100);\n        }));\n    }\n    /**\n     * 显示时间跳跃对话框\n     */\n    showTimeJumpDialog(defaultTime) {\n        return this.safeShowDialog(() => new Promise(resolve => {\n            const currentDate = window.currentGameDate || new Date();\n            const defaultDateTime = defaultTime ||\n                `${currentDate.getFullYear()}-${(currentDate.getMonth() + 1).toString().padStart(2, '0')}-${currentDate\n                    .getDate()\n                    .toString()\n                    .padStart(2, '0')} ${currentDate.getHours().toString().padStart(2, '0')}:${currentDate\n                    .getMinutes()\n                    .toString()\n                    .padStart(2, '0')}`;\n            // 创建遮罩层 - 限制在手机屏幕内\n            this.activeOverlay = document.createElement('div');\n            this.activeOverlay.className = 'dialog-overlay mobile-dialog-overlay';\n            // 创建对话框\n            this.activeDialog = document.createElement('div');\n            this.activeDialog.className = 'dialog time-jump-dialog mobile-dialog';\n            this.activeDialog.innerHTML = `\n        <div class=\"dialog-header\">\n          <h3>时间跳跃</h3>\n        </div>\n        <div class=\"dialog-body\">\n          <div class=\"form-group\">\n            <label for=\"jump-datetime\">跳跃到时间</label>\n            <input type=\"text\" id=\"jump-datetime\" value=\"${defaultDateTime}\" placeholder=\"YYYY-MM-DD HH:MM\">\n          </div>\n\n          <div class=\"form-group\">\n            <div class=\"checkbox-group vertical\">\n              <label class=\"checkbox-button full-width\" for=\"add-description\">\n                <input type=\"checkbox\" id=\"add-description\">\n                📝 记录这段时间发生了什么\n              </label>\n            </div>\n          </div>\n\n          <div class=\"description-group\" style=\"display: none;\">\n            <div class=\"form-group\">\n              <label for=\"event-description\">事件描述</label>\n              <textarea id=\"event-description\" placeholder=\"描述这段时间发生的事情...\" rows=\"3\"></textarea>\n            </div>\n          </div>\n        </div>\n        <div class=\"dialog-footer\">\n          <button class=\"dialog-btn dialog-btn-cancel\">取消</button>\n          <button class=\"dialog-btn dialog-btn-confirm\">跳跃</button>\n        </div>\n      `;\n            // 添加事件监听器\n            const addDescriptionCheckbox = this.activeDialog.querySelector('#add-description');\n            const descriptionGroup = this.activeDialog.querySelector('.description-group');\n            // 初始化checkbox按钮样式\n            this.initializeCheckboxButtons();\n            // 描述选项切换\n            addDescriptionCheckbox.addEventListener('change', () => {\n                descriptionGroup.style.display = addDescriptionCheckbox.checked ? 'block' : 'none';\n            });\n            // 按钮事件\n            const cancelBtn = this.activeDialog.querySelector('.dialog-btn-cancel');\n            const confirmBtn = this.activeDialog.querySelector('.dialog-btn-confirm');\n            const handleCancel = () => {\n                this.closeDialog();\n                resolve(null);\n            };\n            const handleConfirm = () => {\n                // 检查对话框是否还存在\n                if (!this.activeDialog) {\n                    return;\n                }\n                const datetimeInput = this.activeDialog.querySelector('#jump-datetime');\n                const addDescriptionInput = this.activeDialog.querySelector('#add-description');\n                const descriptionInput = this.activeDialog.querySelector('#event-description');\n                if (!datetimeInput) {\n                    return;\n                }\n                const datetime = datetimeInput.value;\n                const addDescription = addDescriptionInput ? addDescriptionInput.checked : false;\n                const description = addDescription && descriptionInput ? descriptionInput.value : '';\n                // 解析时间\n                const datetimeMatch = datetime.match(/^(\\d{4}-\\d{2}-\\d{2})\\s+(\\d{2}:\\d{2})$/);\n                if (!datetimeMatch) {\n                    // 在时间输入框上显示错误提示，而不是弹出新的alert\n                    datetimeInput.style.borderColor = '#ff4444';\n                    datetimeInput.placeholder = '格式：YYYY-MM-DD HH:MM';\n                    datetimeInput.focus();\n                    return;\n                }\n                this.closeDialog();\n                resolve({\n                    date: datetimeMatch[1],\n                    time: datetimeMatch[2],\n                    description: description.trim(),\n                });\n            };\n            cancelBtn.addEventListener('click', handleCancel);\n            confirmBtn.addEventListener('click', handleConfirm);\n            // 键盘事件处理\n            const handleKeyDown = (e) => {\n                // 检查对话框是否还存在\n                if (!this.activeDialog) {\n                    document.removeEventListener('keydown', handleKeyDown);\n                    return;\n                }\n                if (e.key === 'Enter') {\n                    // Enter键确认时间跳转\n                    e.preventDefault();\n                    handleConfirm();\n                    document.removeEventListener('keydown', handleKeyDown);\n                }\n                else if (e.key === 'Escape') {\n                    handleCancel();\n                    document.removeEventListener('keydown', handleKeyDown);\n                }\n            };\n            document.addEventListener('keydown', handleKeyDown);\n            // 添加到手机屏幕容器内\n            this.activeOverlay.appendChild(this.activeDialog);\n            this.appendDialogToPage();\n            // 聚焦到时间输入框\n            setTimeout(() => {\n                if (this.activeDialog) {\n                    const timeInput = this.activeDialog.querySelector('#jump-datetime');\n                    if (timeInput) {\n                        timeInput.focus();\n                        timeInput.select();\n                    }\n                }\n            }, 100);\n        }));\n    }\n    /**\n     * 强制清理所有对话框元素\n     */\n    forceCleanupDialogs() {\n        // 清理所有可能残留的对话框元素\n        const container = document.querySelector('.phone-screen') || document.body;\n        // 使用通用选择器清理所有对话框相关元素\n        const selectors = [\n            '[class*=\"dialog-overlay\"]',\n            '[class*=\"dialog\"]',\n            '.custom-dialog-overlay',\n            '.mobile-dialog-overlay',\n            '.custom-dialog',\n            '.mobile-dialog',\n        ];\n        selectors.forEach(selector => {\n            const elements = container.querySelectorAll(selector);\n            elements.forEach(element => {\n                try {\n                    if (element.parentNode) {\n                        element.parentNode.removeChild(element);\n                    }\n                }\n                catch (error) {\n                    console.warn('移除对话框元素时出错:', error);\n                }\n            });\n        });\n        // 清理引用\n        this.activeDialog = null;\n        this.activeOverlay = null;\n    }\n    /**\n     * 关闭对话框\n     */\n    closeDialog() {\n        this.forceCleanupDialogs();\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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O0lBRUQ7O09BRUc7SUFDSyxtQkFBbUI7UUFDekIsaUJBQWlCO1FBQ2pCLE1BQU0sU0FBUyxHQUFHLFFBQVEsQ0FBQyxhQUFhLENBQUMsZUFBZSxDQUFDLElBQUksUUFBUSxDQUFDLElBQUksQ0FBQztRQUUzRSxxQkFBcUI7UUFDckIsTUFBTSxTQUFTLEdBQUc7WUFDaEIsMkJBQTJCO1lBQzNCLG1CQUFtQjtZQUNuQix3QkFBd0I7WUFDeEIsd0JBQXdCO1lBQ3hCLGdCQUFnQjtZQUNoQixnQkFBZ0I7U0FDakIsQ0FBQztRQUVGLFNBQVMsQ0FBQyxPQUFPLENBQUMsUUFBUSxDQUFDLEVBQUU7WUFDM0IsTUFBTSxRQUFRLEdBQUcsU0FBUyxDQUFDLGdCQUFnQixDQUFDLFFBQVEsQ0FBQyxDQUFDO1lBQ3RELFFBQVEsQ0FBQyxPQUFPLENBQUMsT0FBTyxDQUFDLEVBQUU7Z0JBQ3pCLElBQUksQ0FBQztvQkFDSCxJQUFJLE9BQU8sQ0FBQyxVQUFVLEVBQUUsQ0FBQzt3QkFDdkIsT0FBTyxDQUFDLFVBQVUsQ0FBQyxXQUFXLENBQUMsT0FBTyxDQUFDLENBQUM7b0JBQzFDLENBQUM7Z0JBQ0gsQ0FBQztnQkFBQyxPQUFPLEtBQUssRUFBRSxDQUFDO29CQUNmLE9BQU8sQ0FBQyxJQUFJLENBQUMsYUFBYSxFQUFFLEtBQUssQ0FBQyxDQUFDO2dCQUNyQyxDQUFDO1lBQ0gsQ0FBQyxDQUFDLENBQUM7UUFDTCxDQUFDLENBQUMsQ0FBQztRQUVILE9BQU87UUFDUCxJQUFJLENBQUMsWUFBWSxHQUFHLElBQUksQ0FBQztRQUN6QixJQUFJLENBQUMsYUFBYSxHQUFHLElBQUksQ0FBQztJQUM1QixDQUFDO0lBRUQ7O09BRUc7SUFDSyxXQUFXO1FBQ2pCLElBQUksQ0FBQyxtQkFBbUIsRUFBRSxDQUFDO0lBQzdCLENBQUM7Q0FDRiIsInNvdXJjZXMiOlsid2VicGFjazovL3RhdmVybl9oZWxwZXJfdGVtcGxhdGUvLi9zcmMv5ZCM5bGC5omL5py6L2RpYWxvZy1tYW5hZ2VyLnRzPyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIOWvueivneahhueuoeeQhuWZqFxuICog5o+Q5L6b6Ieq5a6a5LmJ55qEYWxlcnTjgIFjb25maXJt44CBcHJvbXB05a+56K+d5qGG77yM5pu/5Luj57O757uf6buY6K6k5a+56K+d5qGGXG4gKi9cblxuLy8g5a+56K+d5qGG57G75Z6LXG50eXBlIERpYWxvZ1R5cGUgPSAnYWxlcnQnIHwgJ2NvbmZpcm0nIHwgJ3Byb21wdCc7XG5cbi8vIOWvueivneahhumAiemhuVxuaW50ZXJmYWNlIERpYWxvZ09wdGlvbnMge1xuICB0aXRsZT86IHN0cmluZztcbiAgbWVzc2FnZTogc3RyaW5nO1xuICB0eXBlOiBEaWFsb2dUeXBlO1xuICBpbnB1dFR5cGU/OiBzdHJpbmc7XG4gIGlucHV0UGxhY2Vob2xkZXI/OiBzdHJpbmc7XG4gIGlucHV0VmFsdWU/OiBzdHJpbmc7XG4gIGNvbmZpcm1UZXh0Pzogc3RyaW5nO1xuICBjYW5jZWxUZXh0Pzogc3RyaW5nO1xuICBjbGFzc05hbWU/OiBzdHJpbmc7XG59XG5cbmV4cG9ydCBjbGFzcyBEaWFsb2dNYW5hZ2VyIHtcbiAgcHJpdmF0ZSBzdGF0aWMgaW5zdGFuY2U6IERpYWxvZ01hbmFnZXI7XG4gIHByaXZhdGUgYWN0aXZlRGlhbG9nOiBIVE1MRWxlbWVudCB8IG51bGwgPSBudWxsO1xuICBwcml2YXRlIGFjdGl2ZU92ZXJsYXk6IEhUTUxFbGVtZW50IHwgbnVsbCA9IG51bGw7XG5cbiAgcHJpdmF0ZSBjb25zdHJ1Y3RvcigpIHtcbiAgICAvLyDnp4HmnInmnoTpgKDlh73mlbDvvIznoa7kv53ljZXkvovmqKHlvI9cbiAgfVxuXG4gIC8qKlxuICAgKiDojrflj5bljZXkvovlrp7kvotcbiAgICovXG4gIHB1YmxpYyBzdGF0aWMgZ2V0SW5zdGFuY2UoKTogRGlhbG9nTWFuYWdlciB7XG4gICAgaWYgKCFEaWFsb2dNYW5hZ2VyLmluc3RhbmNlKSB7XG4gICAgICBEaWFsb2dNYW5hZ2VyLmluc3RhbmNlID0gbmV3IERpYWxvZ01hbmFnZXIoKTtcbiAgICB9XG4gICAgcmV0dXJuIERpYWxvZ01hbmFnZXIuaW5zdGFuY2U7XG4gIH1cblxuICAvKipcbiAgICogSFRNTOi9rOS5iei+heWKqeaWueazlVxuICAgKi9cbiAgcHJpdmF0ZSBlc2NhcGVIdG1sKHRleHQ6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgY29uc3QgZGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgZGl2LnRleHRDb250ZW50ID0gdGV4dDtcbiAgICByZXR1cm4gZGl2LmlubmVySFRNTDtcbiAgfVxuXG4gIC8qKlxuICAgKiDlronlhajmmL7npLrlr7nor53moYYgLSDlpoLmnpzlt7LmnInlr7nor53moYbliJnlhYjlhbPpl61cbiAgICovXG4gIHByaXZhdGUgYXN5bmMgc2FmZVNob3dEaWFsb2c8VD4oZGlhbG9nRnVuY3Rpb246ICgpID0+IFByb21pc2U8VD4pOiBQcm9taXNlPFQ+IHtcbiAgICAvLyDlvLrliLbmuIXnkIbmiYDmnInlr7nor53moYbvvIjml6DorrrmmK/lkKbmnInmtLvot4Plr7nor53moYbvvIlcbiAgICB0aGlzLmZvcmNlQ2xlYW51cERpYWxvZ3MoKTtcblxuICAgIHJldHVybiBhd2FpdCBkaWFsb2dGdW5jdGlvbigpO1xuICB9XG5cbiAgLyoqXG4gICAqIOWwhuWvueivneahhua3u+WKoOWIsOmhtemdouS4rVxuICAgKi9cbiAgcHJpdmF0ZSBhcHBlbmREaWFsb2dUb1BhZ2UoKTogdm9pZCB7XG4gICAgaWYgKCF0aGlzLmFjdGl2ZU92ZXJsYXkpIHJldHVybjtcblxuICAgIGNvbnN0IHBob25lU2NyZWVuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBob25lLXNjcmVlbicpO1xuICAgIGlmIChwaG9uZVNjcmVlbikge1xuICAgICAgcGhvbmVTY3JlZW4uYXBwZW5kQ2hpbGQodGhpcy5hY3RpdmVPdmVybGF5KTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8g5aaC5p6c5om+5LiN5Yiw5omL5py65bGP5bmV5a655Zmo77yM5Zue6YCA5YiwYm9keVxuICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZCh0aGlzLmFjdGl2ZU92ZXJsYXkpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiDliJ3lp4vljJblr7nor53moYbkuK3nmoRjaGVja2JveOaMiemSruagt+W8j1xuICAgKi9cbiAgcHJpdmF0ZSBpbml0aWFsaXplQ2hlY2tib3hCdXR0b25zKCk6IHZvaWQge1xuICAgIGlmICghdGhpcy5hY3RpdmVEaWFsb2cpIHJldHVybjtcblxuICAgIGNvbnN0IGNoZWNrYm94QnV0dG9ucyA9IHRoaXMuYWN0aXZlRGlhbG9nLnF1ZXJ5U2VsZWN0b3JBbGwoJy5jaGVja2JveC1idXR0b24nKTtcblxuICAgIGNoZWNrYm94QnV0dG9ucy5mb3JFYWNoKGJ1dHRvbiA9PiB7XG4gICAgICBjb25zdCBjaGVja2JveCA9IGJ1dHRvbi5xdWVyeVNlbGVjdG9yKCdpbnB1dFt0eXBlPVwiY2hlY2tib3hcIl0nKSBhcyBIVE1MSW5wdXRFbGVtZW50O1xuICAgICAgaWYgKCFjaGVja2JveCkgcmV0dXJuO1xuXG4gICAgICAvLyDorr7nva7liJ3lp4vnirbmgIFcbiAgICAgIHRoaXMudXBkYXRlQ2hlY2tib3hCdXR0b25TdGF0ZShidXR0b24gYXMgSFRNTEVsZW1lbnQsIGNoZWNrYm94LmNoZWNrZWQpO1xuXG4gICAgICAvLyDmt7vliqDngrnlh7vkuovku7ZcbiAgICAgIGJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGUgPT4ge1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICAgICAgaWYgKGNoZWNrYm94LmRpc2FibGVkKSByZXR1cm47XG5cbiAgICAgICAgLy8g5YiH5o2i54q25oCBXG4gICAgICAgIGNoZWNrYm94LmNoZWNrZWQgPSAhY2hlY2tib3guY2hlY2tlZDtcbiAgICAgICAgdGhpcy51cGRhdGVDaGVja2JveEJ1dHRvblN0YXRlKGJ1dHRvbiBhcyBIVE1MRWxlbWVudCwgY2hlY2tib3guY2hlY2tlZCk7XG5cbiAgICAgICAgLy8g6Kem5Y+RY2hhbmdl5LqL5Lu2XG4gICAgICAgIGNvbnN0IGNoYW5nZUV2ZW50ID0gbmV3IEV2ZW50KCdjaGFuZ2UnLCB7IGJ1YmJsZXM6IHRydWUgfSk7XG4gICAgICAgIGNoZWNrYm94LmRpc3BhdGNoRXZlbnQoY2hhbmdlRXZlbnQpO1xuICAgICAgfSk7XG5cbiAgICAgIC8vIOebkeWQrOWklumDqOeKtuaAgeWPmOWMllxuICAgICAgY2hlY2tib3guYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgKCkgPT4ge1xuICAgICAgICB0aGlzLnVwZGF0ZUNoZWNrYm94QnV0dG9uU3RhdGUoYnV0dG9uIGFzIEhUTUxFbGVtZW50LCBjaGVja2JveC5jaGVja2VkKTtcbiAgICAgIH0pO1xuXG4gICAgICAvLyDorr7nva7lj6/orr/pl67mgKflsZ7mgKdcbiAgICAgIGJ1dHRvbi5zZXRBdHRyaWJ1dGUoJ3JvbGUnLCAnY2hlY2tib3gnKTtcbiAgICAgIGJ1dHRvbi5zZXRBdHRyaWJ1dGUoJ3RhYmluZGV4JywgJzAnKTtcbiAgICAgIGJ1dHRvbi5zZXRBdHRyaWJ1dGUoJ2FyaWEtY2hlY2tlZCcsIGNoZWNrYm94LmNoZWNrZWQudG9TdHJpbmcoKSk7XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICog5pu05pawY2hlY2tib3jmjInpkq7nirbmgIFcbiAgICovXG4gIHByaXZhdGUgdXBkYXRlQ2hlY2tib3hCdXR0b25TdGF0ZShidXR0b246IEhUTUxFbGVtZW50LCBjaGVja2VkOiBib29sZWFuKTogdm9pZCB7XG4gICAgaWYgKGNoZWNrZWQpIHtcbiAgICAgIGJ1dHRvbi5jbGFzc0xpc3QuYWRkKCdjaGVja2VkJyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKCdjaGVja2VkJyk7XG4gICAgfVxuXG4gICAgLy8g5pu05pawYXJpYeWxnuaAp1xuICAgIGJ1dHRvbi5zZXRBdHRyaWJ1dGUoJ2FyaWEtY2hlY2tlZCcsIGNoZWNrZWQudG9TdHJpbmcoKSk7XG4gIH1cblxuICAvKipcbiAgICog5pi+56S65o+Q56S65a+56K+d5qGG77yI5pu/5LujYWxlcnTvvIlcbiAgICovXG4gIHB1YmxpYyBhbGVydChtZXNzYWdlOiBzdHJpbmcsIHRpdGxlID0gJ+aPkOekuicsIGNvbmZpcm1UZXh0ID0gJ+ehruWumicpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICByZXR1cm4gdGhpcy5zYWZlU2hvd0RpYWxvZygoKSA9PlxuICAgICAgdGhpcy5zaG93RGlhbG9nKHtcbiAgICAgICAgdHlwZTogJ2FsZXJ0JyxcbiAgICAgICAgdGl0bGUsXG4gICAgICAgIG1lc3NhZ2UsXG4gICAgICAgIGNvbmZpcm1UZXh0LFxuICAgICAgfSksXG4gICAgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiDmmL7npLrnoa7orqTlr7nor53moYbvvIjmm7/ku6Njb25maXJt77yJXG4gICAqL1xuICBwdWJsaWMgY29uZmlybShtZXNzYWdlOiBzdHJpbmcsIHRpdGxlID0gJ+ehruiupCcsIGNvbmZpcm1UZXh0ID0gJ+ehruWumicsIGNhbmNlbFRleHQgPSAn5Y+W5raIJyk6IFByb21pc2U8Ym9vbGVhbj4ge1xuICAgIHJldHVybiB0aGlzLnNhZmVTaG93RGlhbG9nKFxuICAgICAgKCkgPT5cbiAgICAgICAgdGhpcy5zaG93RGlhbG9nKHtcbiAgICAgICAgICB0eXBlOiAnY29uZmlybScsXG4gICAgICAgICAgdGl0bGUsXG4gICAgICAgICAgbWVzc2FnZSxcbiAgICAgICAgICBjb25maXJtVGV4dCxcbiAgICAgICAgICBjYW5jZWxUZXh0LFxuICAgICAgICB9KSBhcyBQcm9taXNlPGJvb2xlYW4+LFxuICAgICk7XG4gIH1cblxuICAvKipcbiAgICog5pi+56S66L6T5YWl5a+56K+d5qGG77yI5pu/5LujcHJvbXB077yJXG4gICAqL1xuICBwdWJsaWMgcHJvbXB0KFxuICAgIG1lc3NhZ2U6IHN0cmluZyxcbiAgICBkZWZhdWx0VmFsdWUgPSAnJyxcbiAgICB0aXRsZSA9ICfor7fovpPlhaUnLFxuICAgIGNvbmZpcm1UZXh0ID0gJ+ehruWumicsXG4gICAgY2FuY2VsVGV4dCA9ICflj5bmtognLFxuICAgIGlucHV0VHlwZSA9ICd0ZXh0JyxcbiAgICBwbGFjZWhvbGRlciA9ICcnLFxuICApOiBQcm9taXNlPHN0cmluZyB8IG51bGw+IHtcbiAgICByZXR1cm4gdGhpcy5zYWZlU2hvd0RpYWxvZyhcbiAgICAgICgpID0+XG4gICAgICAgIHRoaXMuc2hvd0RpYWxvZyh7XG4gICAgICAgICAgdHlwZTogJ3Byb21wdCcsXG4gICAgICAgICAgdGl0bGUsXG4gICAgICAgICAgbWVzc2FnZSxcbiAgICAgICAgICBjb25maXJtVGV4dCxcbiAgICAgICAgICBjYW5jZWxUZXh0LFxuICAgICAgICAgIGlucHV0VHlwZSxcbiAgICAgICAgICBpbnB1dFZhbHVlOiBkZWZhdWx0VmFsdWUsXG4gICAgICAgICAgaW5wdXRQbGFjZWhvbGRlcjogcGxhY2Vob2xkZXIsXG4gICAgICAgIH0pIGFzIFByb21pc2U8c3RyaW5nIHwgbnVsbD4sXG4gICAgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiDmmL7npLrlj6/mu5rliqjmlofmnKzlr7nor53moYbvvIjnlKjkuo7mmL7npLrplb/mlofmnKzlhoXlrrnvvIlcbiAgICovXG4gIHB1YmxpYyBzaG93U2Nyb2xsYWJsZVRleHQoY29udGVudDogc3RyaW5nLCB0aXRsZSA9ICflhoXlrrknLCBjb25maXJtVGV4dCA9ICflhbPpl60nKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgcmV0dXJuIHRoaXMuc2FmZVNob3dEaWFsb2coXG4gICAgICAoKSA9PlxuICAgICAgICBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHtcbiAgICAgICAgICAvLyDliJvlu7rpga7nvanlsYJcbiAgICAgICAgICB0aGlzLmFjdGl2ZU92ZXJsYXkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgICB0aGlzLmFjdGl2ZU92ZXJsYXkuY2xhc3NOYW1lID0gJ2RpYWxvZy1vdmVybGF5IG1vYmlsZS1kaWFsb2ctb3ZlcmxheSc7XG5cbiAgICAgICAgICAvLyDliJvlu7rlr7nor53moYZcbiAgICAgICAgICB0aGlzLmFjdGl2ZURpYWxvZyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICAgIHRoaXMuYWN0aXZlRGlhbG9nLmNsYXNzTmFtZSA9ICdkaWFsb2cgc2Nyb2xsYWJsZS10ZXh0LWRpYWxvZyBtb2JpbGUtZGlhbG9nJztcblxuICAgICAgICAgIC8vIOiuvue9ruWvueivneahhuWGheWuuVxuICAgICAgICAgIHRoaXMuYWN0aXZlRGlhbG9nLmlubmVySFRNTCA9IGBcbiAgICAgICAgICA8ZGl2IGNsYXNzPVwiZGlhbG9nLWhlYWRlclwiPlxuICAgICAgICAgICAgPGgzPiR7dGl0bGV9PC9oMz5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8ZGl2IGNsYXNzPVwiZGlhbG9nLWJvZHkgc2Nyb2xsYWJsZS1jb250ZW50XCI+XG4gICAgICAgICAgICA8cHJlIGNsYXNzPVwic2Nyb2xsYWJsZS10ZXh0XCI+JHt0aGlzLmVzY2FwZUh0bWwoY29udGVudCl9PC9wcmU+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPGRpdiBjbGFzcz1cImRpYWxvZy1mb290ZXJcIj5cbiAgICAgICAgICAgIDxidXR0b24gY2xhc3M9XCJkaWFsb2ctYnV0dG9uIGNvcHktYnRuXCI+5aSN5Yi2PC9idXR0b24+XG4gICAgICAgICAgICA8YnV0dG9uIGNsYXNzPVwiZGlhbG9nLWJ1dHRvbiBwcmltYXJ5LWJ1dHRvblwiPiR7Y29uZmlybVRleHR9PC9idXR0b24+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIGA7XG5cbiAgICAgICAgICBjb25zdCBjb3B5QnRuID0gdGhpcy5hY3RpdmVEaWFsb2cucXVlcnlTZWxlY3RvcignLmNvcHktYnRuJykgYXMgSFRNTEJ1dHRvbkVsZW1lbnQ7XG4gICAgICAgICAgY29uc3QgY29uZmlybUJ0biA9IHRoaXMuYWN0aXZlRGlhbG9nLnF1ZXJ5U2VsZWN0b3IoJy5wcmltYXJ5LWJ1dHRvbicpIGFzIEhUTUxCdXR0b25FbGVtZW50O1xuXG4gICAgICAgICAgY29uc3QgaGFuZGxlQ29weSA9IGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgIGF3YWl0IG5hdmlnYXRvci5jbGlwYm9hcmQud3JpdGVUZXh0KGNvbnRlbnQpO1xuICAgICAgICAgICAgICAvLyDkuLTml7bmlLnlj5jmjInpkq7mloflrZfmj5DnpLrlpI3liLbmiJDlip9cbiAgICAgICAgICAgICAgY29uc3Qgb3JpZ2luYWxUZXh0ID0gY29weUJ0bi50ZXh0Q29udGVudDtcbiAgICAgICAgICAgICAgY29weUJ0bi50ZXh0Q29udGVudCA9ICflt7LlpI3liLYnO1xuICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgICAgICBjb3B5QnRuLnRleHRDb250ZW50ID0gb3JpZ2luYWxUZXh0O1xuICAgICAgICAgICAgICB9LCAxMDAwKTtcbiAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ+WkjeWItuWksei0pTonLCBlcnJvcik7XG4gICAgICAgICAgICAgIC8vIOmZjee6p+aWueahiO+8mumAieaLqeaWh+acrFxuICAgICAgICAgICAgICBjb25zdCB0ZXh0RWxlbWVudCA9IHRoaXMuYWN0aXZlRGlhbG9nIS5xdWVyeVNlbGVjdG9yKCcuc2Nyb2xsYWJsZS10ZXh0JykgYXMgSFRNTEVsZW1lbnQ7XG4gICAgICAgICAgICAgIGlmICh0ZXh0RWxlbWVudCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHJhbmdlID0gZG9jdW1lbnQuY3JlYXRlUmFuZ2UoKTtcbiAgICAgICAgICAgICAgICByYW5nZS5zZWxlY3ROb2RlQ29udGVudHModGV4dEVsZW1lbnQpO1xuICAgICAgICAgICAgICAgIGNvbnN0IHNlbGVjdGlvbiA9IHdpbmRvdy5nZXRTZWxlY3Rpb24oKTtcbiAgICAgICAgICAgICAgICBpZiAoc2VsZWN0aW9uKSB7XG4gICAgICAgICAgICAgICAgICBzZWxlY3Rpb24ucmVtb3ZlQWxsUmFuZ2VzKCk7XG4gICAgICAgICAgICAgICAgICBzZWxlY3Rpb24uYWRkUmFuZ2UocmFuZ2UpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH07XG5cbiAgICAgICAgICBjb25zdCBoYW5kbGVDb25maXJtID0gKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5jbG9zZURpYWxvZygpO1xuICAgICAgICAgICAgcmVzb2x2ZSgpO1xuICAgICAgICAgIH07XG5cbiAgICAgICAgICBjb25zdCBoYW5kbGVDYW5jZWwgPSAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLmNsb3NlRGlhbG9nKCk7XG4gICAgICAgICAgICByZXNvbHZlKCk7XG4gICAgICAgICAgfTtcblxuICAgICAgICAgIGNvcHlCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBoYW5kbGVDb3B5KTtcbiAgICAgICAgICBjb25maXJtQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgaGFuZGxlQ29uZmlybSk7XG5cbiAgICAgICAgICAvLyBFU0PplK7lhbPpl61cbiAgICAgICAgICBjb25zdCBoYW5kbGVLZXlEb3duID0gKGU6IEtleWJvYXJkRXZlbnQpID0+IHtcbiAgICAgICAgICAgIGlmIChlLmtleSA9PT0gJ0VzY2FwZScpIHtcbiAgICAgICAgICAgICAgaGFuZGxlQ2FuY2VsKCk7XG4gICAgICAgICAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCBoYW5kbGVLZXlEb3duKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9O1xuICAgICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCBoYW5kbGVLZXlEb3duKTtcblxuICAgICAgICAgIC8vIOa3u+WKoOWIsOaJi+acuuWxj+W5leWuueWZqOWGhVxuICAgICAgICAgIHRoaXMuYWN0aXZlT3ZlcmxheS5hcHBlbmRDaGlsZCh0aGlzLmFjdGl2ZURpYWxvZyk7XG4gICAgICAgICAgdGhpcy5hcHBlbmREaWFsb2dUb1BhZ2UoKTtcbiAgICAgICAgfSksXG4gICAgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiDmmL7npLrlr7nor53moYZcbiAgICovXG4gIHByaXZhdGUgc2hvd0RpYWxvZyhvcHRpb25zOiBEaWFsb2dPcHRpb25zKTogUHJvbWlzZTxhbnk+IHtcbiAgICAvLyDliJvlu7rlr7nor53moYblhYPntKBcbiAgICBjb25zdCB7IG92ZXJsYXksIGRpYWxvZyB9ID0gdGhpcy5jcmVhdGVEaWFsb2dFbGVtZW50cyhvcHRpb25zKTtcblxuICAgIC8vIOS/neWtmOW8leeUqFxuICAgIHRoaXMuYWN0aXZlT3ZlcmxheSA9IG92ZXJsYXk7XG4gICAgdGhpcy5hY3RpdmVEaWFsb2cgPSBkaWFsb2c7XG5cbiAgICAvLyDmt7vliqDliLDpobXpnaLkuK1cbiAgICB0aGlzLmFwcGVuZERpYWxvZ1RvUGFnZSgpO1xuXG4gICAgLy8g5aSE55CG6L6T5YWl5qGG6Ieq5Yqo6IGa54SmXG4gICAgaWYgKG9wdGlvbnMudHlwZSA9PT0gJ3Byb21wdCcpIHtcbiAgICAgIGNvbnN0IGlucHV0RWwgPSBkaWFsb2cucXVlcnlTZWxlY3RvcignaW5wdXQsIHRleHRhcmVhJykgYXMgSFRNTElucHV0RWxlbWVudDtcbiAgICAgIGlmIChpbnB1dEVsKSB7XG4gICAgICAgIHNldFRpbWVvdXQoKCkgPT4gaW5wdXRFbC5mb2N1cygpLCAxMDApO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHtcbiAgICAgIC8vIOehruiupOaMiemSrueCueWHu+WkhOeQhlxuICAgICAgY29uc3QgY29uZmlybUJ1dHRvbiA9IGRpYWxvZy5xdWVyeVNlbGVjdG9yKCcucHJpbWFyeS1idXR0b24nKTtcbiAgICAgIGlmIChjb25maXJtQnV0dG9uKSB7XG4gICAgICAgIGNvbmZpcm1CdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgICAgaWYgKG9wdGlvbnMudHlwZSA9PT0gJ3Byb21wdCcpIHtcbiAgICAgICAgICAgIGNvbnN0IGlucHV0RWwgPSBkaWFsb2cucXVlcnlTZWxlY3RvcignaW5wdXQsIHRleHRhcmVhJykgYXMgSFRNTElucHV0RWxlbWVudDtcbiAgICAgICAgICAgIGNvbnN0IHZhbHVlID0gaW5wdXRFbCA/IGlucHV0RWwudmFsdWUgOiBudWxsO1xuICAgICAgICAgICAgdGhpcy5jbG9zZURpYWxvZygpO1xuICAgICAgICAgICAgcmVzb2x2ZSh2YWx1ZSk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuY2xvc2VEaWFsb2coKTtcbiAgICAgICAgICAgIHJlc29sdmUob3B0aW9ucy50eXBlID09PSAnY29uZmlybScgPyB0cnVlIDogdW5kZWZpbmVkKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICAvLyDlj5bmtojmjInpkq7ngrnlh7vlpITnkIZcbiAgICAgIGNvbnN0IGNhbmNlbEJ1dHRvbiA9IGRpYWxvZy5xdWVyeVNlbGVjdG9yKCcuY2FuY2VsLWJ1dHRvbicpO1xuICAgICAgaWYgKGNhbmNlbEJ1dHRvbikge1xuICAgICAgICBjYW5jZWxCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgICAgdGhpcy5jbG9zZURpYWxvZygpO1xuICAgICAgICAgIHJlc29sdmUob3B0aW9ucy50eXBlID09PSAncHJvbXB0JyA/IG51bGwgOiBmYWxzZSk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICAvLyDngrnlh7vpga7nvanlsYLlhbPpl63vvIjku4Xlr7lhbGVydOacieaViO+8iVxuICAgICAgaWYgKG9wdGlvbnMudHlwZSA9PT0gJ2FsZXJ0Jykge1xuICAgICAgICBvdmVybGF5LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZSA9PiB7XG4gICAgICAgICAgaWYgKGUudGFyZ2V0ID09PSBvdmVybGF5KSB7XG4gICAgICAgICAgICB0aGlzLmNsb3NlRGlhbG9nKCk7XG4gICAgICAgICAgICByZXNvbHZlKHVuZGVmaW5lZCk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgLy8g6ZSu55uY5LqL5Lu25aSE55CGXG4gICAgICBjb25zdCBoYW5kbGVLZXlEb3duID0gKGU6IEtleWJvYXJkRXZlbnQpID0+IHtcbiAgICAgICAgaWYgKGUua2V5ID09PSAnRW50ZXInKSB7XG4gICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgIGlmIChvcHRpb25zLnR5cGUgPT09ICdwcm9tcHQnKSB7XG4gICAgICAgICAgICBjb25zdCBpbnB1dEVsID0gZGlhbG9nLnF1ZXJ5U2VsZWN0b3IoJ2lucHV0LCB0ZXh0YXJlYScpIGFzIEhUTUxJbnB1dEVsZW1lbnQ7XG4gICAgICAgICAgICBjb25zdCB2YWx1ZSA9IGlucHV0RWwgPyBpbnB1dEVsLnZhbHVlIDogbnVsbDtcbiAgICAgICAgICAgIHRoaXMuY2xvc2VEaWFsb2coKTtcbiAgICAgICAgICAgIHJlc29sdmUodmFsdWUpO1xuICAgICAgICAgIH0gZWxzZSBpZiAob3B0aW9ucy50eXBlID09PSAnY29uZmlybScpIHtcbiAgICAgICAgICAgIHRoaXMuY2xvc2VEaWFsb2coKTtcbiAgICAgICAgICAgIHJlc29sdmUodHJ1ZSk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vIGFsZXJ0XG4gICAgICAgICAgICB0aGlzLmNsb3NlRGlhbG9nKCk7XG4gICAgICAgICAgICByZXNvbHZlKHVuZGVmaW5lZCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCBoYW5kbGVLZXlEb3duKTtcbiAgICAgICAgfSBlbHNlIGlmIChlLmtleSA9PT0gJ0VzY2FwZScpIHtcbiAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgdGhpcy5jbG9zZURpYWxvZygpO1xuICAgICAgICAgIHJlc29sdmUob3B0aW9ucy50eXBlID09PSAncHJvbXB0JyA/IG51bGwgOiBmYWxzZSk7XG4gICAgICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIGhhbmRsZUtleURvd24pO1xuICAgICAgICB9XG4gICAgICB9O1xuICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIGhhbmRsZUtleURvd24pO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIOWIm+W7uuWvueivneahhuWFg+e0oFxuICAgKi9cbiAgcHJpdmF0ZSBjcmVhdGVEaWFsb2dFbGVtZW50cyhvcHRpb25zOiBEaWFsb2dPcHRpb25zKTogeyBvdmVybGF5OiBIVE1MRWxlbWVudDsgZGlhbG9nOiBIVE1MRWxlbWVudCB9IHtcbiAgICAvLyDliJvlu7rpga7nvanlsYJcbiAgICBjb25zdCBvdmVybGF5ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgb3ZlcmxheS5jbGFzc05hbWUgPSAnY3VzdG9tLWRpYWxvZy1vdmVybGF5JztcblxuICAgIC8vIOWIm+W7uuWvueivneahhlxuICAgIGNvbnN0IGRpYWxvZyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIGRpYWxvZy5jbGFzc05hbWUgPSBgY3VzdG9tLWRpYWxvZyAke29wdGlvbnMuY2xhc3NOYW1lIHx8ICcnfWA7XG5cbiAgICAvLyDliJvlu7rmoIfpophcbiAgICBjb25zdCBoZWFkZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICBoZWFkZXIuY2xhc3NOYW1lID0gJ2RpYWxvZy1oZWFkZXInO1xuICAgIGNvbnN0IHRpdGxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaDMnKTtcbiAgICB0aXRsZS5jbGFzc05hbWUgPSAnZGlhbG9nLXRpdGxlJztcbiAgICB0aXRsZS50ZXh0Q29udGVudCA9IG9wdGlvbnMudGl0bGUgfHwgJyc7XG4gICAgaGVhZGVyLmFwcGVuZENoaWxkKHRpdGxlKTtcbiAgICBkaWFsb2cuYXBwZW5kQ2hpbGQoaGVhZGVyKTtcblxuICAgIC8vIOWIm+W7uuWGheWuuVxuICAgIGNvbnN0IGJvZHkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICBib2R5LmNsYXNzTmFtZSA9ICdkaWFsb2ctYm9keSc7XG5cbiAgICAvLyDmt7vliqDmtojmga9cbiAgICBjb25zdCBtZXNzYWdlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgbWVzc2FnZS50ZXh0Q29udGVudCA9IG9wdGlvbnMubWVzc2FnZTtcbiAgICBib2R5LmFwcGVuZENoaWxkKG1lc3NhZ2UpO1xuXG4gICAgLy8g5aaC5p6c5pivcHJvbXB077yM5re75Yqg6L6T5YWl5qGGXG4gICAgaWYgKG9wdGlvbnMudHlwZSA9PT0gJ3Byb21wdCcpIHtcbiAgICAgIGNvbnN0IGlucHV0Q29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICBpbnB1dENvbnRhaW5lci5jbGFzc05hbWUgPSAnZGlhbG9nLWlucHV0LWNvbnRhaW5lcic7XG5cbiAgICAgIGNvbnN0IGlucHV0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChvcHRpb25zLmlucHV0VHlwZSA9PT0gJ3RleHRhcmVhJyA/ICd0ZXh0YXJlYScgOiAnaW5wdXQnKTtcblxuICAgICAgaWYgKG9wdGlvbnMuaW5wdXRUeXBlICE9PSAndGV4dGFyZWEnKSB7XG4gICAgICAgIChpbnB1dCBhcyBIVE1MSW5wdXRFbGVtZW50KS50eXBlID0gb3B0aW9ucy5pbnB1dFR5cGUgfHwgJ3RleHQnO1xuICAgICAgfVxuXG4gICAgICBpZiAob3B0aW9ucy5pbnB1dFZhbHVlKSB7XG4gICAgICAgIChpbnB1dCBhcyBIVE1MSW5wdXRFbGVtZW50KS52YWx1ZSA9IG9wdGlvbnMuaW5wdXRWYWx1ZTtcbiAgICAgIH1cblxuICAgICAgaWYgKG9wdGlvbnMuaW5wdXRQbGFjZWhvbGRlcikge1xuICAgICAgICBpbnB1dC5zZXRBdHRyaWJ1dGUoJ3BsYWNlaG9sZGVyJywgb3B0aW9ucy5pbnB1dFBsYWNlaG9sZGVyKTtcbiAgICAgIH1cblxuICAgICAgaW5wdXRDb250YWluZXIuYXBwZW5kQ2hpbGQoaW5wdXQpO1xuICAgICAgYm9keS5hcHBlbmRDaGlsZChpbnB1dENvbnRhaW5lcik7XG4gICAgfVxuXG4gICAgZGlhbG9nLmFwcGVuZENoaWxkKGJvZHkpO1xuXG4gICAgLy8g5Yib5bu65oyJ6ZKu5Yy65Z+fXG4gICAgY29uc3QgZm9vdGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgZm9vdGVyLmNsYXNzTmFtZSA9ICdkaWFsb2ctZm9vdGVyJztcblxuICAgIC8vIOagueaNruexu+Wei+a3u+WKoOS4jeWQjOeahOaMiemSrlxuICAgIGlmIChvcHRpb25zLnR5cGUgPT09ICdjb25maXJtJyB8fCBvcHRpb25zLnR5cGUgPT09ICdwcm9tcHQnKSB7XG4gICAgICBjb25zdCBjYW5jZWxCdXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTtcbiAgICAgIGNhbmNlbEJ1dHRvbi5jbGFzc05hbWUgPSAnZGlhbG9nLWJ1dHRvbiBjYW5jZWwtYnV0dG9uJztcbiAgICAgIGNhbmNlbEJ1dHRvbi50ZXh0Q29udGVudCA9IG9wdGlvbnMuY2FuY2VsVGV4dCB8fCAn5Y+W5raIJztcbiAgICAgIGZvb3Rlci5hcHBlbmRDaGlsZChjYW5jZWxCdXR0b24pO1xuICAgIH1cblxuICAgIGNvbnN0IGNvbmZpcm1CdXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTtcbiAgICBjb25maXJtQnV0dG9uLmNsYXNzTmFtZSA9ICdkaWFsb2ctYnV0dG9uIHByaW1hcnktYnV0dG9uJztcbiAgICBjb25maXJtQnV0dG9uLnRleHRDb250ZW50ID0gb3B0aW9ucy5jb25maXJtVGV4dCB8fCAn56Gu5a6aJztcbiAgICBmb290ZXIuYXBwZW5kQ2hpbGQoY29uZmlybUJ1dHRvbik7XG5cbiAgICBkaWFsb2cuYXBwZW5kQ2hpbGQoZm9vdGVyKTtcbiAgICBvdmVybGF5LmFwcGVuZENoaWxkKGRpYWxvZyk7XG5cbiAgICByZXR1cm4geyBvdmVybGF5LCBkaWFsb2cgfTtcbiAgfVxuXG4gIC8qKlxuICAgKiDmmL7npLrmnIvlj4vlnIjor4Torrov54K56LWe5a+56K+d5qGGXG4gICAqL1xuICBwdWJsaWMgc2hvd0NvbW1lbnREaWFsb2coKTogUHJvbWlzZTx7IHR5cGU6ICdsaWtlJyB8ICdjb21tZW50JzsgY29udGVudD86IHN0cmluZyB9IHwgbnVsbD4ge1xuICAgIHJldHVybiB0aGlzLnNhZmVTaG93RGlhbG9nKFxuICAgICAgKCkgPT5cbiAgICAgICAgbmV3IFByb21pc2UocmVzb2x2ZSA9PiB7XG4gICAgICAgICAgLy8g5Yib5bu66YGu572p5bGCXG4gICAgICAgICAgdGhpcy5hY3RpdmVPdmVybGF5ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgICAgdGhpcy5hY3RpdmVPdmVybGF5LmNsYXNzTmFtZSA9ICdkaWFsb2ctb3ZlcmxheSBtb2JpbGUtZGlhbG9nLW92ZXJsYXknO1xuXG4gICAgICAgICAgLy8g5Yib5bu65a+56K+d5qGGXG4gICAgICAgICAgdGhpcy5hY3RpdmVEaWFsb2cgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgICB0aGlzLmFjdGl2ZURpYWxvZy5jbGFzc05hbWUgPSAnZGlhbG9nIGNvbW1lbnQtZGlhbG9nIG1vYmlsZS1kaWFsb2cnO1xuXG4gICAgICAgICAgdGhpcy5hY3RpdmVEaWFsb2cuaW5uZXJIVE1MID0gYFxuICAgICAgICA8ZGl2IGNsYXNzPVwiZGlhbG9nLWhlYWRlclwiPlxuICAgICAgICAgIDxoMz7kupLliqg8L2gzPlxuICAgICAgICA8L2Rpdj5cbiAgICAgICAgPGRpdiBjbGFzcz1cImRpYWxvZy1ib2R5XCI+XG4gICAgICAgICAgPGRpdiBjbGFzcz1cImZvcm0tZ3JvdXBcIj5cbiAgICAgICAgICAgIDxsYWJlbCBmb3I9XCJjb21tZW50LXRleHRcIj7or4TorrrlhoXlrrk8L2xhYmVsPlxuICAgICAgICAgICAgPHRleHRhcmVhIGlkPVwiY29tbWVudC10ZXh0XCIgcGxhY2Vob2xkZXI9XCLor7Tngrnku4DkuYguLi5cIiByb3dzPVwiM1wiPjwvdGV4dGFyZWE+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgICAgICA8ZGl2IGNsYXNzPVwiZGlhbG9nLWZvb3RlclwiPlxuICAgICAgICAgIDxidXR0b24gY2xhc3M9XCJkaWFsb2ctYnV0dG9uIGNhbmNlbC1idG5cIj7lj5bmtog8L2J1dHRvbj5cbiAgICAgICAgICA8YnV0dG9uIGNsYXNzPVwiZGlhbG9nLWJ1dHRvbiBsaWtlLWJ0blwiPueCuei1njwvYnV0dG9uPlxuICAgICAgICAgIDxidXR0b24gY2xhc3M9XCJkaWFsb2ctYnV0dG9uIGNvbmZpcm0tYnRuXCI+5Y+R6YCBPC9idXR0b24+XG4gICAgICAgIDwvZGl2PlxuICAgICAgYDtcblxuICAgICAgICAgIGNvbnN0IGNhbmNlbEJ0biA9IHRoaXMuYWN0aXZlRGlhbG9nLnF1ZXJ5U2VsZWN0b3IoJy5jYW5jZWwtYnRuJykgYXMgSFRNTEJ1dHRvbkVsZW1lbnQ7XG4gICAgICAgICAgY29uc3QgbGlrZUJ0biA9IHRoaXMuYWN0aXZlRGlhbG9nLnF1ZXJ5U2VsZWN0b3IoJy5saWtlLWJ0bicpIGFzIEhUTUxCdXR0b25FbGVtZW50O1xuICAgICAgICAgIGNvbnN0IGNvbmZpcm1CdG4gPSB0aGlzLmFjdGl2ZURpYWxvZy5xdWVyeVNlbGVjdG9yKCcuY29uZmlybS1idG4nKSBhcyBIVE1MQnV0dG9uRWxlbWVudDtcbiAgICAgICAgICBjb25zdCBjb21tZW50VGV4dCA9IHRoaXMuYWN0aXZlRGlhbG9nLnF1ZXJ5U2VsZWN0b3IoJyNjb21tZW50LXRleHQnKSBhcyBIVE1MVGV4dEFyZWFFbGVtZW50O1xuXG4gICAgICAgICAgY29uc3QgaGFuZGxlQ2FuY2VsID0gKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5jbG9zZURpYWxvZygpO1xuICAgICAgICAgICAgcmVzb2x2ZShudWxsKTtcbiAgICAgICAgICB9O1xuXG4gICAgICAgICAgY29uc3QgaGFuZGxlTGlrZSA9ICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuY2xvc2VEaWFsb2coKTtcbiAgICAgICAgICAgIHJlc29sdmUoeyB0eXBlOiAnbGlrZScgfSk7XG4gICAgICAgICAgfTtcblxuICAgICAgICAgIGNvbnN0IGhhbmRsZUNvbW1lbnQgPSAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBjb250ZW50ID0gY29tbWVudFRleHQudmFsdWUudHJpbSgpO1xuICAgICAgICAgICAgaWYgKCFjb250ZW50KSB7XG4gICAgICAgICAgICAgIC8vIOWcqOi+k+WFpeahhuS4iuaYvuekuumUmeivr+aPkOekuu+8jOiAjOS4jeaYr+W8ueWHuuaWsOeahGFsZXJ0XG4gICAgICAgICAgICAgIGNvbW1lbnRUZXh0LnN0eWxlLmJvcmRlckNvbG9yID0gJyNmZjQ0NDQnO1xuICAgICAgICAgICAgICBjb21tZW50VGV4dC5wbGFjZWhvbGRlciA9ICfor7fovpPlhaXor4TorrrlhoXlrrknO1xuICAgICAgICAgICAgICBjb21tZW50VGV4dC5mb2N1cygpO1xuICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmNsb3NlRGlhbG9nKCk7XG4gICAgICAgICAgICByZXNvbHZlKHsgdHlwZTogJ2NvbW1lbnQnLCBjb250ZW50IH0pO1xuICAgICAgICAgIH07XG5cbiAgICAgICAgICBjYW5jZWxCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBoYW5kbGVDYW5jZWwpO1xuICAgICAgICAgIGxpa2VCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBoYW5kbGVMaWtlKTtcbiAgICAgICAgICBjb25maXJtQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgaGFuZGxlQ29tbWVudCk7XG5cbiAgICAgICAgICAvLyDplK7nm5jkuovku7blpITnkIZcbiAgICAgICAgICBjb25zdCBoYW5kbGVLZXlEb3duID0gKGU6IEtleWJvYXJkRXZlbnQpID0+IHtcbiAgICAgICAgICAgIGlmIChlLmtleSA9PT0gJ0VudGVyJyAmJiBlLmN0cmxLZXkpIHtcbiAgICAgICAgICAgICAgLy8gQ3RybCtFbnRlciDlj5HpgIHor4TorrpcbiAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICBoYW5kbGVDb21tZW50KCk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGUua2V5ID09PSAnRXNjYXBlJykge1xuICAgICAgICAgICAgICBoYW5kbGVDYW5jZWwoKTtcbiAgICAgICAgICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIGhhbmRsZUtleURvd24pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH07XG4gICAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIGhhbmRsZUtleURvd24pO1xuXG4gICAgICAgICAgLy8g5re75Yqg5Yiw5omL5py65bGP5bmV5a655Zmo5YaFXG4gICAgICAgICAgdGhpcy5hY3RpdmVPdmVybGF5LmFwcGVuZENoaWxkKHRoaXMuYWN0aXZlRGlhbG9nKTtcbiAgICAgICAgICB0aGlzLmFwcGVuZERpYWxvZ1RvUGFnZSgpO1xuXG4gICAgICAgICAgLy8g6IGa54Sm5Yiw5paH5pys5qGGXG4gICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICBjb21tZW50VGV4dC5mb2N1cygpO1xuICAgICAgICAgIH0sIDEwMCk7XG4gICAgICAgIH0pLFxuICAgICk7XG4gIH1cblxuICAvKipcbiAgICog5pi+56S66L2s6LSm5a+56K+d5qGGXG4gICAqL1xuICBwdWJsaWMgc2hvd1RyYW5zZmVyRGlhbG9nKCk6IFByb21pc2U8eyBhbW91bnQ6IHN0cmluZzsgbm90ZTogc3RyaW5nIH0gfCBudWxsPiB7XG4gICAgcmV0dXJuIHRoaXMuc2FmZVNob3dEaWFsb2coXG4gICAgICAoKSA9PlxuICAgICAgICBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHtcbiAgICAgICAgICAvLyDliJvlu7rpga7nvanlsYJcbiAgICAgICAgICB0aGlzLmFjdGl2ZU92ZXJsYXkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgICB0aGlzLmFjdGl2ZU92ZXJsYXkuY2xhc3NOYW1lID0gJ2RpYWxvZy1vdmVybGF5IG1vYmlsZS1kaWFsb2ctb3ZlcmxheSc7XG5cbiAgICAgICAgICAvLyDliJvlu7rlr7nor53moYZcbiAgICAgICAgICB0aGlzLmFjdGl2ZURpYWxvZyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICAgIHRoaXMuYWN0aXZlRGlhbG9nLmNsYXNzTmFtZSA9ICdkaWFsb2cgdHJhbnNmZXItZGlhbG9nIG1vYmlsZS1kaWFsb2cnO1xuXG4gICAgICAgICAgdGhpcy5hY3RpdmVEaWFsb2cuaW5uZXJIVE1MID0gYFxuICAgICAgICA8ZGl2IGNsYXNzPVwiZGlhbG9nLWhlYWRlclwiPlxuICAgICAgICAgIDxoMz7ovazotKY8L2gzPlxuICAgICAgICA8L2Rpdj5cbiAgICAgICAgPGRpdiBjbGFzcz1cImRpYWxvZy1ib2R5XCI+XG4gICAgICAgICAgPGRpdiBjbGFzcz1cImZvcm0tZ3JvdXBcIj5cbiAgICAgICAgICAgIDxsYWJlbCBmb3I9XCJ0cmFuc2Zlci1hbW91bnRcIj7ovazotKbph5Hpop0gKjwvbGFiZWw+XG4gICAgICAgICAgICA8aW5wdXQgdHlwZT1cIm51bWJlclwiIGlkPVwidHJhbnNmZXItYW1vdW50XCIgcGxhY2Vob2xkZXI9XCLor7fovpPlhaXovazotKbph5Hpop1cIiBzdGVwPVwiMC4wMVwiIG1pbj1cIjAuMDFcIj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8ZGl2IGNsYXNzPVwiZm9ybS1ncm91cFwiPlxuICAgICAgICAgICAgPGxhYmVsIGZvcj1cInRyYW5zZmVyLW5vdGVcIj7ovazotKblpIfms6g8L2xhYmVsPlxuICAgICAgICAgICAgPGlucHV0IHR5cGU9XCJ0ZXh0XCIgaWQ9XCJ0cmFuc2Zlci1ub3RlXCIgcGxhY2Vob2xkZXI9XCLor7fovpPlhaXovazotKblpIfms6jvvIjlj6/pgInvvIlcIj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIDxkaXYgY2xhc3M9XCJkaWFsb2ctZm9vdGVyXCI+XG4gICAgICAgICAgPGJ1dHRvbiBjbGFzcz1cImRpYWxvZy1idXR0b24gY2FuY2VsLWJ0blwiPuWPlua2iDwvYnV0dG9uPlxuICAgICAgICAgIDxidXR0b24gY2xhc3M9XCJkaWFsb2ctYnV0dG9uIGNvbmZpcm0tYnRuXCI+56Gu6K6k6L2s6LSmPC9idXR0b24+XG4gICAgICAgIDwvZGl2PlxuICAgICAgYDtcblxuICAgICAgICAgIGNvbnN0IGNhbmNlbEJ0biA9IHRoaXMuYWN0aXZlRGlhbG9nLnF1ZXJ5U2VsZWN0b3IoJy5jYW5jZWwtYnRuJykgYXMgSFRNTEJ1dHRvbkVsZW1lbnQ7XG4gICAgICAgICAgY29uc3QgY29uZmlybUJ0biA9IHRoaXMuYWN0aXZlRGlhbG9nLnF1ZXJ5U2VsZWN0b3IoJy5jb25maXJtLWJ0bicpIGFzIEhUTUxCdXR0b25FbGVtZW50O1xuICAgICAgICAgIGNvbnN0IGFtb3VudElucHV0ID0gdGhpcy5hY3RpdmVEaWFsb2cucXVlcnlTZWxlY3RvcignI3RyYW5zZmVyLWFtb3VudCcpIGFzIEhUTUxJbnB1dEVsZW1lbnQ7XG4gICAgICAgICAgY29uc3Qgbm90ZUlucHV0ID0gdGhpcy5hY3RpdmVEaWFsb2cucXVlcnlTZWxlY3RvcignI3RyYW5zZmVyLW5vdGUnKSBhcyBIVE1MSW5wdXRFbGVtZW50O1xuXG4gICAgICAgICAgY29uc3QgaGFuZGxlQ2FuY2VsID0gKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5jbG9zZURpYWxvZygpO1xuICAgICAgICAgICAgcmVzb2x2ZShudWxsKTtcbiAgICAgICAgICB9O1xuXG4gICAgICAgICAgY29uc3QgaGFuZGxlQ29uZmlybSA9ICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGFtb3VudCA9IGFtb3VudElucHV0LnZhbHVlLnRyaW0oKTtcbiAgICAgICAgICAgIGNvbnN0IG5vdGUgPSBub3RlSW5wdXQudmFsdWUudHJpbSgpO1xuXG4gICAgICAgICAgICBpZiAoIWFtb3VudCB8fCBwYXJzZUZsb2F0KGFtb3VudCkgPD0gMCkge1xuICAgICAgICAgICAgICAvLyDlnKjovpPlhaXmoYbkuIrmmL7npLrplJnor6/mj5DnpLrvvIzogIzkuI3mmK/lvLnlh7rmlrDnmoRhbGVydFxuICAgICAgICAgICAgICBhbW91bnRJbnB1dC5zdHlsZS5ib3JkZXJDb2xvciA9ICcjZmY0NDQ0JztcbiAgICAgICAgICAgICAgYW1vdW50SW5wdXQucGxhY2Vob2xkZXIgPSAn6K+36L6T5YWl5pyJ5pWI55qE6L2s6LSm6YeR6aKdJztcbiAgICAgICAgICAgICAgYW1vdW50SW5wdXQuZm9jdXMoKTtcbiAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0aGlzLmNsb3NlRGlhbG9nKCk7XG4gICAgICAgICAgICByZXNvbHZlKHsgYW1vdW50OiBwYXJzZUZsb2F0KGFtb3VudCkudG9GaXhlZCgyKSwgbm90ZTogbm90ZSB8fCAnJyB9KTtcbiAgICAgICAgICB9O1xuXG4gICAgICAgICAgY2FuY2VsQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgaGFuZGxlQ2FuY2VsKTtcbiAgICAgICAgICBjb25maXJtQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgaGFuZGxlQ29uZmlybSk7XG5cbiAgICAgICAgICAvLyDlm57ovabplK7noa7orqRcbiAgICAgICAgICBjb25zdCBoYW5kbGVLZXlEb3duID0gKGU6IEtleWJvYXJkRXZlbnQpID0+IHtcbiAgICAgICAgICAgIGlmIChlLmtleSA9PT0gJ0VudGVyJykge1xuICAgICAgICAgICAgICBoYW5kbGVDb25maXJtKCk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGUua2V5ID09PSAnRXNjYXBlJykge1xuICAgICAgICAgICAgICBoYW5kbGVDYW5jZWwoKTtcbiAgICAgICAgICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIGhhbmRsZUtleURvd24pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH07XG4gICAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIGhhbmRsZUtleURvd24pO1xuXG4gICAgICAgICAgLy8g5re75Yqg5Yiw5omL5py65bGP5bmV5a655Zmo5YaFXG4gICAgICAgICAgdGhpcy5hY3RpdmVPdmVybGF5LmFwcGVuZENoaWxkKHRoaXMuYWN0aXZlRGlhbG9nKTtcbiAgICAgICAgICB0aGlzLmFwcGVuZERpYWxvZ1RvUGFnZSgpO1xuXG4gICAgICAgICAgLy8g6IGa54Sm5Yiw6YeR6aKd6L6T5YWl5qGGXG4gICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICBhbW91bnRJbnB1dC5mb2N1cygpO1xuICAgICAgICAgIH0sIDEwMCk7XG4gICAgICAgIH0pLFxuICAgICk7XG4gIH1cblxuICAvKipcbiAgICog5pi+56S657qi5YyF5a+56K+d5qGGXG4gICAqL1xuICBwdWJsaWMgc2hvd1JlZFBhY2tldERpYWxvZygpOiBQcm9taXNlPHsgYW1vdW50OiBzdHJpbmc7IG5vdGU6IHN0cmluZyB9IHwgbnVsbD4ge1xuICAgIHJldHVybiB0aGlzLnNhZmVTaG93RGlhbG9nKFxuICAgICAgKCkgPT5cbiAgICAgICAgbmV3IFByb21pc2UocmVzb2x2ZSA9PiB7XG4gICAgICAgICAgLy8g5Yib5bu66YGu572p5bGCXG4gICAgICAgICAgdGhpcy5hY3RpdmVPdmVybGF5ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgICAgdGhpcy5hY3RpdmVPdmVybGF5LmNsYXNzTmFtZSA9ICdkaWFsb2ctb3ZlcmxheSBtb2JpbGUtZGlhbG9nLW92ZXJsYXknO1xuXG4gICAgICAgICAgLy8g5Yib5bu65a+56K+d5qGGXG4gICAgICAgICAgdGhpcy5hY3RpdmVEaWFsb2cgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgICB0aGlzLmFjdGl2ZURpYWxvZy5jbGFzc05hbWUgPSAnZGlhbG9nIHJlZC1wYWNrZXQtZGlhbG9nIG1vYmlsZS1kaWFsb2cnO1xuXG4gICAgICAgICAgdGhpcy5hY3RpdmVEaWFsb2cuaW5uZXJIVE1MID0gYFxuICAgICAgICA8ZGl2IGNsYXNzPVwiZGlhbG9nLWhlYWRlclwiPlxuICAgICAgICAgIDxoMz7wn6enIOWPkemAgee6ouWMhTwvaDM+XG4gICAgICAgIDwvZGl2PlxuICAgICAgICA8ZGl2IGNsYXNzPVwiZGlhbG9nLWJvZHlcIj5cbiAgICAgICAgICA8ZGl2IGNsYXNzPVwiZm9ybS1ncm91cFwiPlxuICAgICAgICAgICAgPGxhYmVsIGZvcj1cInJlZC1wYWNrZXQtYW1vdW50XCI+57qi5YyF6YeR6aKdICo8L2xhYmVsPlxuICAgICAgICAgICAgPGlucHV0IHR5cGU9XCJudW1iZXJcIiBpZD1cInJlZC1wYWNrZXQtYW1vdW50XCIgcGxhY2Vob2xkZXI9XCLor7fovpPlhaXnuqLljIXph5Hpop1cIiBzdGVwPVwiMC4wMVwiIG1pbj1cIjAuMDFcIj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8ZGl2IGNsYXNzPVwiZm9ybS1ncm91cFwiPlxuICAgICAgICAgICAgPGxhYmVsIGZvcj1cInJlZC1wYWNrZXQtbm90ZVwiPue6ouWMheelneemj+ivrTwvbGFiZWw+XG4gICAgICAgICAgICA8aW5wdXQgdHlwZT1cInRleHRcIiBpZD1cInJlZC1wYWNrZXQtbm90ZVwiIHBsYWNlaG9sZGVyPVwi5oGt5Zac5Y+R6LSi77yM5aSn5ZCJ5aSn5Yip77yBXCIgdmFsdWU9XCLmga3llpzlj5HotKLvvIzlpKflkInlpKfliKnvvIFcIj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIDxkaXYgY2xhc3M9XCJkaWFsb2ctZm9vdGVyXCI+XG4gICAgICAgICAgPGJ1dHRvbiBjbGFzcz1cImRpYWxvZy1idXR0b24gY2FuY2VsLWJ0blwiPuWPlua2iDwvYnV0dG9uPlxuICAgICAgICAgIDxidXR0b24gY2xhc3M9XCJkaWFsb2ctYnV0dG9uIGNvbmZpcm0tYnRuXCI+5Y+R6YCB57qi5YyFPC9idXR0b24+XG4gICAgICAgIDwvZGl2PlxuICAgICAgYDtcblxuICAgICAgICAgIGNvbnN0IGNhbmNlbEJ0biA9IHRoaXMuYWN0aXZlRGlhbG9nLnF1ZXJ5U2VsZWN0b3IoJy5jYW5jZWwtYnRuJykgYXMgSFRNTEJ1dHRvbkVsZW1lbnQ7XG4gICAgICAgICAgY29uc3QgY29uZmlybUJ0biA9IHRoaXMuYWN0aXZlRGlhbG9nLnF1ZXJ5U2VsZWN0b3IoJy5jb25maXJtLWJ0bicpIGFzIEhUTUxCdXR0b25FbGVtZW50O1xuICAgICAgICAgIGNvbnN0IGFtb3VudElucHV0ID0gdGhpcy5hY3RpdmVEaWFsb2cucXVlcnlTZWxlY3RvcignI3JlZC1wYWNrZXQtYW1vdW50JykgYXMgSFRNTElucHV0RWxlbWVudDtcbiAgICAgICAgICBjb25zdCBub3RlSW5wdXQgPSB0aGlzLmFjdGl2ZURpYWxvZy5xdWVyeVNlbGVjdG9yKCcjcmVkLXBhY2tldC1ub3RlJykgYXMgSFRNTElucHV0RWxlbWVudDtcblxuICAgICAgICAgIGNvbnN0IGhhbmRsZUNhbmNlbCA9ICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuY2xvc2VEaWFsb2coKTtcbiAgICAgICAgICAgIHJlc29sdmUobnVsbCk7XG4gICAgICAgICAgfTtcblxuICAgICAgICAgIGNvbnN0IGhhbmRsZUNvbmZpcm0gPSAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBhbW91bnQgPSBhbW91bnRJbnB1dC52YWx1ZS50cmltKCk7XG4gICAgICAgICAgICBjb25zdCBub3RlID0gbm90ZUlucHV0LnZhbHVlLnRyaW0oKTtcblxuICAgICAgICAgICAgaWYgKCFhbW91bnQgfHwgcGFyc2VGbG9hdChhbW91bnQpIDw9IDApIHtcbiAgICAgICAgICAgICAgLy8g5Zyo6L6T5YWl5qGG5LiK5pi+56S66ZSZ6K+v5o+Q56S677yM6ICM5LiN5piv5by55Ye65paw55qEYWxlcnRcbiAgICAgICAgICAgICAgYW1vdW50SW5wdXQuc3R5bGUuYm9yZGVyQ29sb3IgPSAnI2ZmNDQ0NCc7XG4gICAgICAgICAgICAgIGFtb3VudElucHV0LnBsYWNlaG9sZGVyID0gJ+ivt+i+k+WFpeacieaViOeahOe6ouWMhemHkeminSc7XG4gICAgICAgICAgICAgIGFtb3VudElucHV0LmZvY3VzKCk7XG4gICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdGhpcy5jbG9zZURpYWxvZygpO1xuICAgICAgICAgICAgcmVzb2x2ZSh7IGFtb3VudDogcGFyc2VGbG9hdChhbW91bnQpLnRvRml4ZWQoMiksIG5vdGU6IG5vdGUgfHwgJ+aBreWWnOWPkei0ou+8jOWkp+WQieWkp+WIqe+8gScgfSk7XG4gICAgICAgICAgfTtcblxuICAgICAgICAgIGNhbmNlbEJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGhhbmRsZUNhbmNlbCk7XG4gICAgICAgICAgY29uZmlybUJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGhhbmRsZUNvbmZpcm0pO1xuXG4gICAgICAgICAgLy8g5Zue6L2m6ZSu56Gu6K6kXG4gICAgICAgICAgY29uc3QgaGFuZGxlS2V5RG93biA9IChlOiBLZXlib2FyZEV2ZW50KSA9PiB7XG4gICAgICAgICAgICBpZiAoZS5rZXkgPT09ICdFbnRlcicpIHtcbiAgICAgICAgICAgICAgaGFuZGxlQ29uZmlybSgpO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChlLmtleSA9PT0gJ0VzY2FwZScpIHtcbiAgICAgICAgICAgICAgaGFuZGxlQ2FuY2VsKCk7XG4gICAgICAgICAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCBoYW5kbGVLZXlEb3duKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9O1xuICAgICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCBoYW5kbGVLZXlEb3duKTtcblxuICAgICAgICAgIC8vIOa3u+WKoOWIsOaJi+acuuWxj+W5leWuueWZqOWGhVxuICAgICAgICAgIHRoaXMuYWN0aXZlT3ZlcmxheS5hcHBlbmRDaGlsZCh0aGlzLmFjdGl2ZURpYWxvZyk7XG4gICAgICAgICAgdGhpcy5hcHBlbmREaWFsb2dUb1BhZ2UoKTtcblxuICAgICAgICAgIC8vIOiBmueEpuWIsOmHkeminei+k+WFpeahhlxuICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgYW1vdW50SW5wdXQuZm9jdXMoKTtcbiAgICAgICAgICB9LCAxMDApO1xuICAgICAgICB9KSxcbiAgICApO1xuICB9XG5cbiAgLyoqXG4gICAqIOaYvuekuuekvOeJqeWvueivneahhlxuICAgKi9cbiAgcHVibGljIHNob3dHaWZ0RGlhbG9nKCk6IFByb21pc2U8eyBuYW1lOiBzdHJpbmc7IHByaWNlPzogc3RyaW5nIH0gfCBudWxsPiB7XG4gICAgcmV0dXJuIHRoaXMuc2FmZVNob3dEaWFsb2coXG4gICAgICAoKSA9PlxuICAgICAgICBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHtcbiAgICAgICAgICAvLyDliJvlu7rpga7nvanlsYJcbiAgICAgICAgICB0aGlzLmFjdGl2ZU92ZXJsYXkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgICB0aGlzLmFjdGl2ZU92ZXJsYXkuY2xhc3NOYW1lID0gJ2RpYWxvZy1vdmVybGF5IG1vYmlsZS1kaWFsb2ctb3ZlcmxheSc7XG5cbiAgICAgICAgICAvLyDliJvlu7rlr7nor53moYZcbiAgICAgICAgICB0aGlzLmFjdGl2ZURpYWxvZyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICAgIHRoaXMuYWN0aXZlRGlhbG9nLmNsYXNzTmFtZSA9ICdkaWFsb2cgZ2lmdC1kaWFsb2cgbW9iaWxlLWRpYWxvZyc7XG5cbiAgICAgICAgICB0aGlzLmFjdGl2ZURpYWxvZy5pbm5lckhUTUwgPSBgXG4gICAgICAgIDxkaXYgY2xhc3M9XCJkaWFsb2ctaGVhZGVyXCI+XG4gICAgICAgICAgPGgzPvCfjoEg5Y+R6YCB56S854mpPC9oMz5cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIDxkaXYgY2xhc3M9XCJkaWFsb2ctYm9keVwiPlxuICAgICAgICAgIDxkaXYgY2xhc3M9XCJmb3JtLWdyb3VwXCI+XG4gICAgICAgICAgICA8bGFiZWwgZm9yPVwiZ2lmdC1uYW1lXCI+56S854mp5ZCN56ewICo8L2xhYmVsPlxuICAgICAgICAgICAgPGlucHV0IHR5cGU9XCJ0ZXh0XCIgaWQ9XCJnaWZ0LW5hbWVcIiBwbGFjZWhvbGRlcj1cIuivt+i+k+WFpeekvOeJqeWQjeensFwiPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDxkaXYgY2xhc3M9XCJmb3JtLWdyb3VwXCI+XG4gICAgICAgICAgICA8bGFiZWwgZm9yPVwiZ2lmdC1wcmljZVwiPuekvOeJqeS7t+agvDwvbGFiZWw+XG4gICAgICAgICAgICA8aW5wdXQgdHlwZT1cIm51bWJlclwiIGlkPVwiZ2lmdC1wcmljZVwiIHBsYWNlaG9sZGVyPVwi6K+36L6T5YWl5Lu35qC877yI5Y+v6YCJ77yJXCIgc3RlcD1cIjAuMDFcIiBtaW49XCIwXCI+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgICAgICA8ZGl2IGNsYXNzPVwiZGlhbG9nLWZvb3RlclwiPlxuICAgICAgICAgIDxidXR0b24gY2xhc3M9XCJkaWFsb2ctYnV0dG9uIGNhbmNlbC1idG5cIj7lj5bmtog8L2J1dHRvbj5cbiAgICAgICAgICA8YnV0dG9uIGNsYXNzPVwiZGlhbG9nLWJ1dHRvbiBjb25maXJtLWJ0blwiPuWPkemAgeekvOeJqTwvYnV0dG9uPlxuICAgICAgICA8L2Rpdj5cbiAgICAgIGA7XG5cbiAgICAgICAgICBjb25zdCBjYW5jZWxCdG4gPSB0aGlzLmFjdGl2ZURpYWxvZy5xdWVyeVNlbGVjdG9yKCcuY2FuY2VsLWJ0bicpIGFzIEhUTUxCdXR0b25FbGVtZW50O1xuICAgICAgICAgIGNvbnN0IGNvbmZpcm1CdG4gPSB0aGlzLmFjdGl2ZURpYWxvZy5xdWVyeVNlbGVjdG9yKCcuY29uZmlybS1idG4nKSBhcyBIVE1MQnV0dG9uRWxlbWVudDtcbiAgICAgICAgICBjb25zdCBuYW1lSW5wdXQgPSB0aGlzLmFjdGl2ZURpYWxvZy5xdWVyeVNlbGVjdG9yKCcjZ2lmdC1uYW1lJykgYXMgSFRNTElucHV0RWxlbWVudDtcbiAgICAgICAgICBjb25zdCBwcmljZUlucHV0ID0gdGhpcy5hY3RpdmVEaWFsb2cucXVlcnlTZWxlY3RvcignI2dpZnQtcHJpY2UnKSBhcyBIVE1MSW5wdXRFbGVtZW50O1xuXG4gICAgICAgICAgY29uc3QgaGFuZGxlQ2FuY2VsID0gKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5jbG9zZURpYWxvZygpO1xuICAgICAgICAgICAgcmVzb2x2ZShudWxsKTtcbiAgICAgICAgICB9O1xuXG4gICAgICAgICAgY29uc3QgaGFuZGxlQ29uZmlybSA9ICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IG5hbWUgPSBuYW1lSW5wdXQudmFsdWUudHJpbSgpO1xuICAgICAgICAgICAgY29uc3QgcHJpY2UgPSBwcmljZUlucHV0LnZhbHVlLnRyaW0oKTtcblxuICAgICAgICAgICAgaWYgKCFuYW1lKSB7XG4gICAgICAgICAgICAgIC8vIOWcqOi+k+WFpeahhuS4iuaYvuekuumUmeivr+aPkOekuu+8jOiAjOS4jeaYr+W8ueWHuuaWsOeahGFsZXJ0XG4gICAgICAgICAgICAgIG5hbWVJbnB1dC5zdHlsZS5ib3JkZXJDb2xvciA9ICcjZmY0NDQ0JztcbiAgICAgICAgICAgICAgbmFtZUlucHV0LnBsYWNlaG9sZGVyID0gJ+ivt+i+k+WFpeekvOeJqeWQjeensCc7XG4gICAgICAgICAgICAgIG5hbWVJbnB1dC5mb2N1cygpO1xuICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHRoaXMuY2xvc2VEaWFsb2coKTtcbiAgICAgICAgICAgIHJlc29sdmUoe1xuICAgICAgICAgICAgICBuYW1lLFxuICAgICAgICAgICAgICBwcmljZTogcHJpY2UgJiYgcGFyc2VGbG9hdChwcmljZSkgPiAwID8gcGFyc2VGbG9hdChwcmljZSkudG9GaXhlZCgyKSA6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH07XG5cbiAgICAgICAgICBjYW5jZWxCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBoYW5kbGVDYW5jZWwpO1xuICAgICAgICAgIGNvbmZpcm1CdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBoYW5kbGVDb25maXJtKTtcblxuICAgICAgICAgIC8vIOWbnui9pumUruehruiupFxuICAgICAgICAgIGNvbnN0IGhhbmRsZUtleURvd24gPSAoZTogS2V5Ym9hcmRFdmVudCkgPT4ge1xuICAgICAgICAgICAgaWYgKGUua2V5ID09PSAnRW50ZXInKSB7XG4gICAgICAgICAgICAgIGhhbmRsZUNvbmZpcm0oKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZS5rZXkgPT09ICdFc2NhcGUnKSB7XG4gICAgICAgICAgICAgIGhhbmRsZUNhbmNlbCgpO1xuICAgICAgICAgICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdrZXlkb3duJywgaGFuZGxlS2V5RG93bik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfTtcbiAgICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgaGFuZGxlS2V5RG93bik7XG5cbiAgICAgICAgICAvLyDmt7vliqDliLDmiYvmnLrlsY/luZXlrrnlmajlhoVcbiAgICAgICAgICB0aGlzLmFjdGl2ZU92ZXJsYXkuYXBwZW5kQ2hpbGQodGhpcy5hY3RpdmVEaWFsb2cpO1xuICAgICAgICAgIHRoaXMuYXBwZW5kRGlhbG9nVG9QYWdlKCk7XG5cbiAgICAgICAgICAvLyDogZrnhKbliLDlkI3np7DovpPlhaXmoYZcbiAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgIG5hbWVJbnB1dC5mb2N1cygpO1xuICAgICAgICAgIH0sIDEwMCk7XG4gICAgICAgIH0pLFxuICAgICk7XG4gIH1cblxuICAvKipcbiAgICog5pi+56S66Ieq5a6a5LmJ6L6T5YWl5a+56K+d5qGG77yI5pu/5Luj57O757ufcHJvbXB077yJXG4gICAqL1xuICBwdWJsaWMgc2hvd0lucHV0RGlhbG9nKFxuICAgIHRpdGxlOiBzdHJpbmcsXG4gICAgbGFiZWw6IHN0cmluZyxcbiAgICBkZWZhdWx0VmFsdWU6IHN0cmluZyA9ICcnLFxuICAgIHBsYWNlaG9sZGVyOiBzdHJpbmcgPSAnJyxcbiAgICBpbnB1dFR5cGU6ICd0ZXh0JyB8ICd1cmwnIHwgJ2VtYWlsJyA9ICd0ZXh0JyxcbiAgKTogUHJvbWlzZTxzdHJpbmcgfCBudWxsPiB7XG4gICAgcmV0dXJuIHRoaXMuc2FmZVNob3dEaWFsb2coXG4gICAgICAoKSA9PlxuICAgICAgICBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHtcbiAgICAgICAgICAvLyDliJvlu7rpga7nvanlsYJcbiAgICAgICAgICB0aGlzLmFjdGl2ZU92ZXJsYXkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgICB0aGlzLmFjdGl2ZU92ZXJsYXkuY2xhc3NOYW1lID0gJ2RpYWxvZy1vdmVybGF5IG1vYmlsZS1kaWFsb2ctb3ZlcmxheSc7XG5cbiAgICAgICAgICAvLyDliJvlu7rlr7nor53moYZcbiAgICAgICAgICB0aGlzLmFjdGl2ZURpYWxvZyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICAgIHRoaXMuYWN0aXZlRGlhbG9nLmNsYXNzTmFtZSA9ICdkaWFsb2cgaW5wdXQtZGlhbG9nIG1vYmlsZS1kaWFsb2cnO1xuXG4gICAgICAgICAgdGhpcy5hY3RpdmVEaWFsb2cuaW5uZXJIVE1MID0gYFxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cImRpYWxvZy1oZWFkZXJcIj5cbiAgICAgICAgICAgICAgPGgzPiR7dGl0bGV9PC9oMz5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cImRpYWxvZy1ib2R5XCI+XG4gICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJmb3JtLWdyb3VwXCI+XG4gICAgICAgICAgICAgICAgPGxhYmVsIGZvcj1cImlucHV0LWZpZWxkXCI+JHtsYWJlbH08L2xhYmVsPlxuICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPVwiJHtpbnB1dFR5cGV9XCIgaWQ9XCJpbnB1dC1maWVsZFwiIHBsYWNlaG9sZGVyPVwiJHtwbGFjZWhvbGRlcn1cIiB2YWx1ZT1cIiR7ZGVmYXVsdFZhbHVlfVwiPlxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cImRpYWxvZy1mb290ZXJcIj5cbiAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz1cImRpYWxvZy1idXR0b24gY2FuY2VsLWJ0blwiPuWPlua2iDwvYnV0dG9uPlxuICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzPVwiZGlhbG9nLWJ1dHRvbiBjb25maXJtLWJ0blwiPuehruWumjwvYnV0dG9uPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgYDtcblxuICAgICAgICAgIGNvbnN0IGNhbmNlbEJ0biA9IHRoaXMuYWN0aXZlRGlhbG9nLnF1ZXJ5U2VsZWN0b3IoJy5jYW5jZWwtYnRuJykgYXMgSFRNTEJ1dHRvbkVsZW1lbnQ7XG4gICAgICAgICAgY29uc3QgY29uZmlybUJ0biA9IHRoaXMuYWN0aXZlRGlhbG9nLnF1ZXJ5U2VsZWN0b3IoJy5jb25maXJtLWJ0bicpIGFzIEhUTUxCdXR0b25FbGVtZW50O1xuICAgICAgICAgIGNvbnN0IGlucHV0RmllbGQgPSB0aGlzLmFjdGl2ZURpYWxvZy5xdWVyeVNlbGVjdG9yKCcjaW5wdXQtZmllbGQnKSBhcyBIVE1MSW5wdXRFbGVtZW50O1xuXG4gICAgICAgICAgY29uc3QgaGFuZGxlQ2FuY2VsID0gKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5jbG9zZURpYWxvZygpO1xuICAgICAgICAgICAgcmVzb2x2ZShudWxsKTtcbiAgICAgICAgICB9O1xuXG4gICAgICAgICAgY29uc3QgaGFuZGxlQ29uZmlybSA9ICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHZhbHVlID0gaW5wdXRGaWVsZC52YWx1ZS50cmltKCk7XG4gICAgICAgICAgICB0aGlzLmNsb3NlRGlhbG9nKCk7XG4gICAgICAgICAgICByZXNvbHZlKHZhbHVlKTtcbiAgICAgICAgICB9O1xuXG4gICAgICAgICAgY2FuY2VsQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgaGFuZGxlQ2FuY2VsKTtcbiAgICAgICAgICBjb25maXJtQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgaGFuZGxlQ29uZmlybSk7XG5cbiAgICAgICAgICAvLyDlm57ovabplK7noa7orqRcbiAgICAgICAgICBjb25zdCBoYW5kbGVLZXlEb3duID0gKGU6IEtleWJvYXJkRXZlbnQpID0+IHtcbiAgICAgICAgICAgIGlmIChlLmtleSA9PT0gJ0VudGVyJykge1xuICAgICAgICAgICAgICBoYW5kbGVDb25maXJtKCk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGUua2V5ID09PSAnRXNjYXBlJykge1xuICAgICAgICAgICAgICBoYW5kbGVDYW5jZWwoKTtcbiAgICAgICAgICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIGhhbmRsZUtleURvd24pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH07XG4gICAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIGhhbmRsZUtleURvd24pO1xuXG4gICAgICAgICAgLy8g5re75Yqg5Yiw5omL5py65bGP5bmV5a655Zmo5YaFXG4gICAgICAgICAgdGhpcy5hY3RpdmVPdmVybGF5LmFwcGVuZENoaWxkKHRoaXMuYWN0aXZlRGlhbG9nKTtcbiAgICAgICAgICB0aGlzLmFwcGVuZERpYWxvZ1RvUGFnZSgpO1xuXG4gICAgICAgICAgLy8g6IGa54Sm5Yiw6L6T5YWl5qGG5bm26YCJ5Lit6buY6K6k5YC8XG4gICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICBpbnB1dEZpZWxkLmZvY3VzKCk7XG4gICAgICAgICAgICBpZiAoZGVmYXVsdFZhbHVlKSB7XG4gICAgICAgICAgICAgIGlucHV0RmllbGQuc2VsZWN0KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSwgMTAwKTtcbiAgICAgICAgfSksXG4gICAgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiDmmL7npLror63pn7PovpPlhaXlr7nor53moYZcbiAgICovXG4gIHB1YmxpYyBzaG93Vm9pY2VEaWFsb2coKTogUHJvbWlzZTx7IHRleHQ6IHN0cmluZzsgZHVyYXRpb246IG51bWJlciB9IHwgbnVsbD4ge1xuICAgIHJldHVybiB0aGlzLnNhZmVTaG93RGlhbG9nKFxuICAgICAgKCkgPT5cbiAgICAgICAgbmV3IFByb21pc2UocmVzb2x2ZSA9PiB7XG4gICAgICAgICAgLy8g5Yib5bu66YGu572p5bGCXG4gICAgICAgICAgdGhpcy5hY3RpdmVPdmVybGF5ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgICAgdGhpcy5hY3RpdmVPdmVybGF5LmNsYXNzTmFtZSA9ICdkaWFsb2ctb3ZlcmxheSBtb2JpbGUtZGlhbG9nLW92ZXJsYXknO1xuXG4gICAgICAgICAgLy8g5Yib5bu65a+56K+d5qGGXG4gICAgICAgICAgdGhpcy5hY3RpdmVEaWFsb2cgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgICB0aGlzLmFjdGl2ZURpYWxvZy5jbGFzc05hbWUgPSAnZGlhbG9nIHZvaWNlLWRpYWxvZyBtb2JpbGUtZGlhbG9nJztcblxuICAgICAgICAgIHRoaXMuYWN0aXZlRGlhbG9nLmlubmVySFRNTCA9IGBcbiAgICAgICAgPGRpdiBjbGFzcz1cImRpYWxvZy1oZWFkZXJcIj5cbiAgICAgICAgICA8aDM+8J+OpCDor63pn7Pmtojmga88L2gzPlxuICAgICAgICA8L2Rpdj5cbiAgICAgICAgPGRpdiBjbGFzcz1cImRpYWxvZy1ib2R5XCI+XG4gICAgICAgICAgPGRpdiBjbGFzcz1cImZvcm0tZ3JvdXBcIj5cbiAgICAgICAgICAgIDxsYWJlbCBmb3I9XCJ2b2ljZS10ZXh0XCI+6K+t6Z+z5YaF5a65PC9sYWJlbD5cbiAgICAgICAgICAgIDx0ZXh0YXJlYSBpZD1cInZvaWNlLXRleHRcIiBwbGFjZWhvbGRlcj1cIuivt+i+k+WFpeivremfs+WGheWuuS4uLlwiIHJvd3M9XCIzXCI+PC90ZXh0YXJlYT5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8ZGl2IGNsYXNzPVwiZm9ybS1ncm91cFwiPlxuICAgICAgICAgICAgPGxhYmVsIGZvcj1cInZvaWNlLWR1cmF0aW9uXCI+6K+t6Z+z5pe26ZW/77yI56eS77yJPC9sYWJlbD5cbiAgICAgICAgICAgIDxpbnB1dCB0eXBlPVwibnVtYmVyXCIgaWQ9XCJ2b2ljZS1kdXJhdGlvblwiIHBsYWNlaG9sZGVyPVwi6K+36L6T5YWl56eS5pWwXCIgbWluPVwiMVwiIG1heD1cIjYwXCIgdmFsdWU9XCIzXCI+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgICAgICA8ZGl2IGNsYXNzPVwiZGlhbG9nLWZvb3RlclwiPlxuICAgICAgICAgIDxidXR0b24gY2xhc3M9XCJkaWFsb2ctYnV0dG9uIGNhbmNlbC1idG5cIj7lj5bmtog8L2J1dHRvbj5cbiAgICAgICAgICA8YnV0dG9uIGNsYXNzPVwiZGlhbG9nLWJ1dHRvbiBjb25maXJtLWJ0blwiPuWPkemAgTwvYnV0dG9uPlxuICAgICAgICA8L2Rpdj5cbiAgICAgIGA7XG5cbiAgICAgICAgICBjb25zdCBjYW5jZWxCdG4gPSB0aGlzLmFjdGl2ZURpYWxvZy5xdWVyeVNlbGVjdG9yKCcuY2FuY2VsLWJ0bicpIGFzIEhUTUxCdXR0b25FbGVtZW50O1xuICAgICAgICAgIGNvbnN0IGNvbmZpcm1CdG4gPSB0aGlzLmFjdGl2ZURpYWxvZy5xdWVyeVNlbGVjdG9yKCcuY29uZmlybS1idG4nKSBhcyBIVE1MQnV0dG9uRWxlbWVudDtcbiAgICAgICAgICBjb25zdCB0ZXh0QXJlYSA9IHRoaXMuYWN0aXZlRGlhbG9nLnF1ZXJ5U2VsZWN0b3IoJyN2b2ljZS10ZXh0JykgYXMgSFRNTFRleHRBcmVhRWxlbWVudDtcbiAgICAgICAgICBjb25zdCBkdXJhdGlvbklucHV0ID0gdGhpcy5hY3RpdmVEaWFsb2cucXVlcnlTZWxlY3RvcignI3ZvaWNlLWR1cmF0aW9uJykgYXMgSFRNTElucHV0RWxlbWVudDtcblxuICAgICAgICAgIGNvbnN0IGhhbmRsZUNhbmNlbCA9ICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuY2xvc2VEaWFsb2coKTtcbiAgICAgICAgICAgIHJlc29sdmUobnVsbCk7XG4gICAgICAgICAgfTtcblxuICAgICAgICAgIGNvbnN0IGhhbmRsZUNvbmZpcm0gPSAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCB0ZXh0ID0gdGV4dEFyZWEudmFsdWUudHJpbSgpO1xuICAgICAgICAgICAgY29uc3QgZHVyYXRpb25TdHIgPSBkdXJhdGlvbklucHV0LnZhbHVlLnRyaW0oKTtcblxuICAgICAgICAgICAgaWYgKCF0ZXh0KSB7XG4gICAgICAgICAgICAgIC8vIOWcqOaWh+acrOahhuS4iuaYvuekuumUmeivr+aPkOekuu+8jOiAjOS4jeaYr+W8ueWHuuaWsOeahGFsZXJ0XG4gICAgICAgICAgICAgIHRleHRBcmVhLnN0eWxlLmJvcmRlckNvbG9yID0gJyNmZjQ0NDQnO1xuICAgICAgICAgICAgICB0ZXh0QXJlYS5wbGFjZWhvbGRlciA9ICfor7fovpPlhaXor63pn7PlhoXlrrknO1xuICAgICAgICAgICAgICB0ZXh0QXJlYS5mb2N1cygpO1xuICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGNvbnN0IGR1cmF0aW9uID0gcGFyc2VJbnQoZHVyYXRpb25TdHIsIDEwKTtcbiAgICAgICAgICAgIGlmICghZHVyYXRpb25TdHIgfHwgaXNOYU4oZHVyYXRpb24pIHx8IGR1cmF0aW9uIDw9IDAgfHwgZHVyYXRpb24gPiA2MCkge1xuICAgICAgICAgICAgICAvLyDlnKjovpPlhaXmoYbkuIrmmL7npLrplJnor6/mj5DnpLrvvIzogIzkuI3mmK/lvLnlh7rmlrDnmoRhbGVydFxuICAgICAgICAgICAgICBkdXJhdGlvbklucHV0LnN0eWxlLmJvcmRlckNvbG9yID0gJyNmZjQ0NDQnO1xuICAgICAgICAgICAgICBkdXJhdGlvbklucHV0LnBsYWNlaG9sZGVyID0gJ+ivt+i+k+WFpeacieaViOeahOivremfs+aXtumVv++8iDEtNjDnp5LvvIknO1xuICAgICAgICAgICAgICBkdXJhdGlvbklucHV0LmZvY3VzKCk7XG4gICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdGhpcy5jbG9zZURpYWxvZygpO1xuICAgICAgICAgICAgcmVzb2x2ZSh7IHRleHQsIGR1cmF0aW9uIH0pO1xuICAgICAgICAgIH07XG5cbiAgICAgICAgICBjYW5jZWxCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBoYW5kbGVDYW5jZWwpO1xuICAgICAgICAgIGNvbmZpcm1CdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBoYW5kbGVDb25maXJtKTtcblxuICAgICAgICAgIC8vIOWbnui9pumUruehruiupO+8iOWcqHRleHRhcmVh5Lit5L2/55SoQ3RybCtFbnRlcu+8iVxuICAgICAgICAgIGNvbnN0IGhhbmRsZUtleURvd24gPSAoZTogS2V5Ym9hcmRFdmVudCkgPT4ge1xuICAgICAgICAgICAgaWYgKGUua2V5ID09PSAnRW50ZXInICYmIGUuY3RybEtleSkge1xuICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgIGhhbmRsZUNvbmZpcm0oKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZS5rZXkgPT09ICdFc2NhcGUnKSB7XG4gICAgICAgICAgICAgIGhhbmRsZUNhbmNlbCgpO1xuICAgICAgICAgICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdrZXlkb3duJywgaGFuZGxlS2V5RG93bik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfTtcbiAgICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgaGFuZGxlS2V5RG93bik7XG5cbiAgICAgICAgICAvLyDmt7vliqDliLDmiYvmnLrlsY/luZXlrrnlmajlhoVcbiAgICAgICAgICB0aGlzLmFjdGl2ZU92ZXJsYXkuYXBwZW5kQ2hpbGQodGhpcy5hY3RpdmVEaWFsb2cpO1xuICAgICAgICAgIHRoaXMuYXBwZW5kRGlhbG9nVG9QYWdlKCk7XG5cbiAgICAgICAgICAvLyDogZrnhKbliLDmlofmnKzmoYZcbiAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgIHRleHRBcmVhLmZvY3VzKCk7XG4gICAgICAgICAgfSwgMTAwKTtcbiAgICAgICAgfSksXG4gICAgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiDmmL7npLrnpLzniakv6L2s6LSm5o6l5pS25a+56K+d5qGGXG4gICAqL1xuICBwdWJsaWMgc2hvd1JlY2VpdmVEaWFsb2codHlwZTogJ2dpZnQnIHwgJ3RyYW5zZmVyJywgZGF0YTogYW55KTogUHJvbWlzZTwnYWNjZXB0JyB8ICdyZWplY3QnIHwgbnVsbD4ge1xuICAgIHJldHVybiB0aGlzLnNhZmVTaG93RGlhbG9nKFxuICAgICAgKCkgPT5cbiAgICAgICAgbmV3IFByb21pc2UocmVzb2x2ZSA9PiB7XG4gICAgICAgICAgLy8g5Yib5bu66YGu572p5bGCXG4gICAgICAgICAgdGhpcy5hY3RpdmVPdmVybGF5ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgICAgdGhpcy5hY3RpdmVPdmVybGF5LmNsYXNzTmFtZSA9ICdkaWFsb2ctb3ZlcmxheSBtb2JpbGUtZGlhbG9nLW92ZXJsYXknO1xuXG4gICAgICAgICAgLy8g5Yib5bu65a+56K+d5qGGXG4gICAgICAgICAgdGhpcy5hY3RpdmVEaWFsb2cgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgICB0aGlzLmFjdGl2ZURpYWxvZy5jbGFzc05hbWUgPSAnZGlhbG9nIHJlY2VpdmUtZGlhbG9nIG1vYmlsZS1kaWFsb2cnO1xuXG4gICAgICAgICAgY29uc3QgaXNHaWZ0ID0gdHlwZSA9PT0gJ2dpZnQnO1xuICAgICAgICAgIGNvbnN0IHRpdGxlID0gaXNHaWZ0ID8gJ+aUtuWIsOekvOeJqScgOiAn5pS25Yiw6L2s6LSmJztcbiAgICAgICAgICBjb25zdCBpY29uID0gaXNHaWZ0ID8gJ/CfjoEnIDogJ/CfkrAnO1xuXG4gICAgICAgICAgbGV0IGNvbnRlbnQgPSAnJztcbiAgICAgICAgICBpZiAoaXNHaWZ0KSB7XG4gICAgICAgICAgICBjb250ZW50ID0gYFxuICAgICAgICAgIDxkaXYgY2xhc3M9XCJyZWNlaXZlLWNvbnRlbnRcIj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJyZWNlaXZlLWljb25cIj4ke2ljb259PC9kaXY+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwicmVjZWl2ZS1pbmZvXCI+XG4gICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJyZWNlaXZlLXRpdGxlXCI+JHtkYXRhLm5hbWV9PC9kaXY+XG4gICAgICAgICAgICAgICR7ZGF0YS5wcmljZSA/IGA8ZGl2IGNsYXNzPVwicmVjZWl2ZS1wcmljZVwiPsKlJHtkYXRhLnByaWNlfTwvZGl2PmAgOiAnJ31cbiAgICAgICAgICAgICAgJHtkYXRhLm5vdGUgPyBgPGRpdiBjbGFzcz1cInJlY2VpdmUtbm90ZVwiPiR7ZGF0YS5ub3RlfTwvZGl2PmAgOiAnJ31cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICBgO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjb250ZW50ID0gYFxuICAgICAgICAgIDxkaXYgY2xhc3M9XCJyZWNlaXZlLWNvbnRlbnRcIj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJyZWNlaXZlLWljb25cIj4ke2ljb259PC9kaXY+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwicmVjZWl2ZS1pbmZvXCI+XG4gICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJyZWNlaXZlLXRpdGxlXCI+6L2s6LSm6YeR6aKdPC9kaXY+XG4gICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJyZWNlaXZlLXByaWNlXCI+wqUke2RhdGEuYW1vdW50fTwvZGl2PlxuICAgICAgICAgICAgICAke2RhdGEubm90ZSA/IGA8ZGl2IGNsYXNzPVwicmVjZWl2ZS1ub3RlXCI+JHtkYXRhLm5vdGV9PC9kaXY+YCA6ICcnfVxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIGA7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgdGhpcy5hY3RpdmVEaWFsb2cuaW5uZXJIVE1MID0gYFxuICAgICAgICA8ZGl2IGNsYXNzPVwiZGlhbG9nLWhlYWRlclwiPlxuICAgICAgICAgIDxoMz4ke3RpdGxlfTwvaDM+XG4gICAgICAgIDwvZGl2PlxuICAgICAgICA8ZGl2IGNsYXNzPVwiZGlhbG9nLWJvZHlcIj5cbiAgICAgICAgICAke2NvbnRlbnR9XG4gICAgICAgIDwvZGl2PlxuICAgICAgICA8ZGl2IGNsYXNzPVwiZGlhbG9nLWZvb3RlclwiPlxuICAgICAgICAgIDxidXR0b24gY2xhc3M9XCJkaWFsb2ctYnV0dG9uIHJlamVjdC1idG5cIj7mi5Lnu508L2J1dHRvbj5cbiAgICAgICAgICA8YnV0dG9uIGNsYXNzPVwiZGlhbG9nLWJ1dHRvbiBhY2NlcHQtYnRuXCI+5o6l5pS2PC9idXR0b24+XG4gICAgICAgIDwvZGl2PlxuICAgICAgYDtcblxuICAgICAgICAgIGNvbnN0IHJlamVjdEJ0biA9IHRoaXMuYWN0aXZlRGlhbG9nLnF1ZXJ5U2VsZWN0b3IoJy5yZWplY3QtYnRuJykgYXMgSFRNTEJ1dHRvbkVsZW1lbnQ7XG4gICAgICAgICAgY29uc3QgYWNjZXB0QnRuID0gdGhpcy5hY3RpdmVEaWFsb2cucXVlcnlTZWxlY3RvcignLmFjY2VwdC1idG4nKSBhcyBIVE1MQnV0dG9uRWxlbWVudDtcblxuICAgICAgICAgIGNvbnN0IGhhbmRsZVJlamVjdCA9ICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuY2xvc2VEaWFsb2coKTtcbiAgICAgICAgICAgIHJlc29sdmUoJ3JlamVjdCcpO1xuICAgICAgICAgIH07XG5cbiAgICAgICAgICBjb25zdCBoYW5kbGVBY2NlcHQgPSAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLmNsb3NlRGlhbG9nKCk7XG4gICAgICAgICAgICByZXNvbHZlKCdhY2NlcHQnKTtcbiAgICAgICAgICB9O1xuXG4gICAgICAgICAgY29uc3QgaGFuZGxlQ2FuY2VsID0gKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5jbG9zZURpYWxvZygpO1xuICAgICAgICAgICAgcmVzb2x2ZShudWxsKTtcbiAgICAgICAgICB9O1xuXG4gICAgICAgICAgcmVqZWN0QnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgaGFuZGxlUmVqZWN0KTtcbiAgICAgICAgICBhY2NlcHRCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBoYW5kbGVBY2NlcHQpO1xuXG4gICAgICAgICAgLy8g6ZSu55uY5LqL5Lu25aSE55CGXG4gICAgICAgICAgY29uc3QgaGFuZGxlS2V5RG93biA9IChlOiBLZXlib2FyZEV2ZW50KSA9PiB7XG4gICAgICAgICAgICBpZiAoZS5rZXkgPT09ICdFbnRlcicpIHtcbiAgICAgICAgICAgICAgLy8gRW50ZXLplK7mjqXlj5fovazotKYv56S854mpXG4gICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgaGFuZGxlQWNjZXB0KCk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGUua2V5ID09PSAnRXNjYXBlJykge1xuICAgICAgICAgICAgICBoYW5kbGVDYW5jZWwoKTtcbiAgICAgICAgICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIGhhbmRsZUtleURvd24pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH07XG4gICAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIGhhbmRsZUtleURvd24pO1xuXG4gICAgICAgICAgLy8g5re75Yqg5Yiw5omL5py65bGP5bmV5a655Zmo5YaFXG4gICAgICAgICAgdGhpcy5hY3RpdmVPdmVybGF5LmFwcGVuZENoaWxkKHRoaXMuYWN0aXZlRGlhbG9nKTtcbiAgICAgICAgICB0aGlzLmFwcGVuZERpYWxvZ1RvUGFnZSgpO1xuICAgICAgICB9KSxcbiAgICApO1xuICB9XG5cbiAgLyoqXG4gICAqIOaYvuekuuaci+WPi+WciOWPkeW4g+WvueivneahhlxuICAgKi9cbiAgcHVibGljIHNob3dNb21lbnREaWFsb2coZGVmYXVsdFRpbWU/OiBzdHJpbmcpOiBQcm9taXNlPHtcbiAgICB0ZXh0OiBzdHJpbmc7XG4gICAgaW1hZ2U6IHN0cmluZztcbiAgICBpbWFnZV90eXBlOiAnbm9uZScgfCAndXJsJyB8ICdkZXNjJztcbiAgICBpbWFnZV9kZXNjOiBzdHJpbmc7XG4gICAgZGF0ZTogc3RyaW5nO1xuICAgIHRpbWU6IHN0cmluZztcbiAgfSB8IG51bGw+IHtcbiAgICByZXR1cm4gdGhpcy5zYWZlU2hvd0RpYWxvZyhcbiAgICAgICgpID0+XG4gICAgICAgIG5ldyBQcm9taXNlKHJlc29sdmUgPT4ge1xuICAgICAgICAgIGNvbnN0IGN1cnJlbnREYXRlID0gd2luZG93LmN1cnJlbnRHYW1lRGF0ZSB8fCBuZXcgRGF0ZSgpO1xuICAgICAgICAgIGNvbnN0IGRlZmF1bHREYXRlVGltZSA9XG4gICAgICAgICAgICBkZWZhdWx0VGltZSB8fFxuICAgICAgICAgICAgYCR7Y3VycmVudERhdGUuZ2V0RnVsbFllYXIoKX0tJHsoY3VycmVudERhdGUuZ2V0TW9udGgoKSArIDEpLnRvU3RyaW5nKCkucGFkU3RhcnQoMiwgJzAnKX0tJHtjdXJyZW50RGF0ZVxuICAgICAgICAgICAgICAuZ2V0RGF0ZSgpXG4gICAgICAgICAgICAgIC50b1N0cmluZygpXG4gICAgICAgICAgICAgIC5wYWRTdGFydCgyLCAnMCcpfSAke2N1cnJlbnREYXRlLmdldEhvdXJzKCkudG9TdHJpbmcoKS5wYWRTdGFydCgyLCAnMCcpfToke2N1cnJlbnREYXRlXG4gICAgICAgICAgICAgIC5nZXRNaW51dGVzKClcbiAgICAgICAgICAgICAgLnRvU3RyaW5nKClcbiAgICAgICAgICAgICAgLnBhZFN0YXJ0KDIsICcwJyl9YDtcblxuICAgICAgICAgIC8vIOWIm+W7uumBrue9qeWxgiAtIOmZkOWItuWcqOaJi+acuuWxj+W5leWGhVxuICAgICAgICAgIHRoaXMuYWN0aXZlT3ZlcmxheSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICAgIHRoaXMuYWN0aXZlT3ZlcmxheS5jbGFzc05hbWUgPSAnZGlhbG9nLW92ZXJsYXkgbW9iaWxlLWRpYWxvZy1vdmVybGF5JztcblxuICAgICAgICAgIC8vIOWIm+W7uuWvueivneahhlxuICAgICAgICAgIHRoaXMuYWN0aXZlRGlhbG9nID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgICAgdGhpcy5hY3RpdmVEaWFsb2cuY2xhc3NOYW1lID0gJ2RpYWxvZyBtb21lbnQtZGlhbG9nIG1vYmlsZS1kaWFsb2cnO1xuXG4gICAgICAgICAgdGhpcy5hY3RpdmVEaWFsb2cuaW5uZXJIVE1MID0gYFxuICAgICAgICA8ZGl2IGNsYXNzPVwiZGlhbG9nLWhlYWRlclwiPlxuICAgICAgICAgIDxoMz7lj5HluIPmnIvlj4vlnIg8L2gzPlxuICAgICAgICA8L2Rpdj5cbiAgICAgICAgPGRpdiBjbGFzcz1cImRpYWxvZy1ib2R5XCI+XG4gICAgICAgICAgPGRpdiBjbGFzcz1cImZvcm0tZ3JvdXBcIj5cbiAgICAgICAgICAgIDxsYWJlbCBmb3I9XCJtb21lbnQtdGV4dFwiPui/meS4gOWIu+eahOaDs+azlS4uLjwvbGFiZWw+XG4gICAgICAgICAgICA8dGV4dGFyZWEgaWQ9XCJtb21lbnQtdGV4dFwiIHBsYWNlaG9sZGVyPVwi5YiG5Lqr5L2g55qE5oOz5rOVLi4uXCIgcm93cz1cIjNcIj48L3RleHRhcmVhPlxuICAgICAgICAgIDwvZGl2PlxuXG4gICAgICAgICAgPGRpdiBjbGFzcz1cImZvcm0tZ3JvdXBcIj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjaGVja2JveC1ncm91cCB2ZXJ0aWNhbFwiPlxuICAgICAgICAgICAgICA8bGFiZWwgY2xhc3M9XCJjaGVja2JveC1idXR0b24gZnVsbC13aWR0aFwiIGZvcj1cImF0dGFjaC1pbWFnZVwiPlxuICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPVwiY2hlY2tib3hcIiBpZD1cImF0dGFjaC1pbWFnZVwiPlxuICAgICAgICAgICAgICAgIPCfk7cg5re75Yqg5Zu+54mHXG4gICAgICAgICAgICAgIDwvbGFiZWw+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8L2Rpdj5cblxuICAgICAgICAgIDxkaXYgY2xhc3M9XCJpbWFnZS1vcHRpb25zXCIgc3R5bGU9XCJkaXNwbGF5OiBub25lO1wiPlxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cImZvcm0tZ3JvdXBcIj5cbiAgICAgICAgICAgICAgPGxhYmVsPuWbvueJh+exu+WeizwvbGFiZWw+XG4gICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJyYWRpby1ncm91cFwiPlxuICAgICAgICAgICAgICAgIDxsYWJlbD48aW5wdXQgdHlwZT1cInJhZGlvXCIgbmFtZT1cImltYWdlLXR5cGVcIiB2YWx1ZT1cImRlc2NcIiBjaGVja2VkPiDlm77niYfmj4/ov7A8L2xhYmVsPlxuICAgICAgICAgICAgICAgIDxsYWJlbD48aW5wdXQgdHlwZT1cInJhZGlvXCIgbmFtZT1cImltYWdlLXR5cGVcIiB2YWx1ZT1cInVybFwiPiDlm77niYfpk77mjqU8L2xhYmVsPlxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDwvZGl2PlxuXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZm9ybS1ncm91cFwiPlxuICAgICAgICAgICAgICA8bGFiZWwgZm9yPVwiaW1hZ2UtY29udGVudFwiIGlkPVwiaW1hZ2UtY29udGVudC1sYWJlbFwiPuWbvueJh+aPj+i/sDwvbGFiZWw+XG4gICAgICAgICAgICAgIDxpbnB1dCB0eXBlPVwidGV4dFwiIGlkPVwiaW1hZ2UtY29udGVudFwiIHBsYWNlaG9sZGVyPVwi6K+36L6T5YWl5Zu+54mH5o+P6L+wXCI+XG4gICAgICAgICAgICA8L2Rpdj5cblxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cImZvcm0tZ3JvdXAgdXJsLWRlc2MtZ3JvdXBcIiBzdHlsZT1cImRpc3BsYXk6IG5vbmU7XCI+XG4gICAgICAgICAgICAgIDxsYWJlbCBmb3I9XCJpbWFnZS1kZXNjXCI+5Zu+54mH5o+P6L+w77yI5L6bQUnor4bliKvvvIk8L2xhYmVsPlxuICAgICAgICAgICAgICA8aW5wdXQgdHlwZT1cInRleHRcIiBpZD1cImltYWdlLWRlc2NcIiBwbGFjZWhvbGRlcj1cIuaPj+i/sOWbvueJh+WGheWuue+8jOS7heS+m0FJ6K+G5YirXCI+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8L2Rpdj5cblxuICAgICAgICAgIDxkaXYgY2xhc3M9XCJmb3JtLWdyb3VwXCI+XG4gICAgICAgICAgICA8bGFiZWwgZm9yPVwibW9tZW50LWRhdGV0aW1lXCI+5Y+R5biD5pe26Ze0PC9sYWJlbD5cbiAgICAgICAgICAgIDxpbnB1dCB0eXBlPVwidGV4dFwiIGlkPVwibW9tZW50LWRhdGV0aW1lXCIgdmFsdWU9XCIke2RlZmF1bHREYXRlVGltZX1cIiBwbGFjZWhvbGRlcj1cIllZWVktTU0tREQgSEg6TU1cIj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIDxkaXYgY2xhc3M9XCJkaWFsb2ctZm9vdGVyXCI+XG4gICAgICAgICAgPGJ1dHRvbiBjbGFzcz1cImRpYWxvZy1idG4gZGlhbG9nLWJ0bi1jYW5jZWxcIj7lj5bmtog8L2J1dHRvbj5cbiAgICAgICAgICA8YnV0dG9uIGNsYXNzPVwiZGlhbG9nLWJ0biBkaWFsb2ctYnRuLWNvbmZpcm1cIj7lj5HluIM8L2J1dHRvbj5cbiAgICAgICAgPC9kaXY+XG4gICAgICBgO1xuXG4gICAgICAgICAgLy8g5re75Yqg5LqL5Lu255uR5ZCs5ZmoXG4gICAgICAgICAgY29uc3QgYXR0YWNoSW1hZ2VDaGVja2JveCA9IHRoaXMuYWN0aXZlRGlhbG9nLnF1ZXJ5U2VsZWN0b3IoJyNhdHRhY2gtaW1hZ2UnKSBhcyBIVE1MSW5wdXRFbGVtZW50O1xuICAgICAgICAgIGNvbnN0IGltYWdlT3B0aW9ucyA9IHRoaXMuYWN0aXZlRGlhbG9nLnF1ZXJ5U2VsZWN0b3IoJy5pbWFnZS1vcHRpb25zJykgYXMgSFRNTEVsZW1lbnQ7XG4gICAgICAgICAgY29uc3QgaW1hZ2VUeXBlUmFkaW9zID0gdGhpcy5hY3RpdmVEaWFsb2cucXVlcnlTZWxlY3RvckFsbChcbiAgICAgICAgICAgICdpbnB1dFtuYW1lPVwiaW1hZ2UtdHlwZVwiXScsXG4gICAgICAgICAgKSBhcyBOb2RlTGlzdE9mPEhUTUxJbnB1dEVsZW1lbnQ+O1xuICAgICAgICAgIGNvbnN0IGltYWdlQ29udGVudExhYmVsID0gdGhpcy5hY3RpdmVEaWFsb2cucXVlcnlTZWxlY3RvcignI2ltYWdlLWNvbnRlbnQtbGFiZWwnKSBhcyBIVE1MRWxlbWVudDtcbiAgICAgICAgICBjb25zdCBpbWFnZUNvbnRlbnRJbnB1dCA9IHRoaXMuYWN0aXZlRGlhbG9nLnF1ZXJ5U2VsZWN0b3IoJyNpbWFnZS1jb250ZW50JykgYXMgSFRNTElucHV0RWxlbWVudDtcbiAgICAgICAgICBjb25zdCB1cmxEZXNjR3JvdXAgPSB0aGlzLmFjdGl2ZURpYWxvZy5xdWVyeVNlbGVjdG9yKCcudXJsLWRlc2MtZ3JvdXAnKSBhcyBIVE1MRWxlbWVudDtcblxuICAgICAgICAgIC8vIOWIneWni+WMlmNoZWNrYm945oyJ6ZKu5qC35byPXG4gICAgICAgICAgdGhpcy5pbml0aWFsaXplQ2hlY2tib3hCdXR0b25zKCk7XG5cbiAgICAgICAgICAvLyDlm77niYfpgInpobnliIfmjaJcbiAgICAgICAgICBhdHRhY2hJbWFnZUNoZWNrYm94LmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsICgpID0+IHtcbiAgICAgICAgICAgIGltYWdlT3B0aW9ucy5zdHlsZS5kaXNwbGF5ID0gYXR0YWNoSW1hZ2VDaGVja2JveC5jaGVja2VkID8gJ2Jsb2NrJyA6ICdub25lJztcbiAgICAgICAgICB9KTtcblxuICAgICAgICAgIC8vIOWbvueJh+exu+Wei+WIh+aNolxuICAgICAgICAgIGltYWdlVHlwZVJhZGlvcy5mb3JFYWNoKHJhZGlvID0+IHtcbiAgICAgICAgICAgIHJhZGlvLmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsICgpID0+IHtcbiAgICAgICAgICAgICAgY29uc3QgaXNEZXNjID0gcmFkaW8udmFsdWUgPT09ICdkZXNjJztcbiAgICAgICAgICAgICAgaW1hZ2VDb250ZW50TGFiZWwudGV4dENvbnRlbnQgPSBpc0Rlc2MgPyAn5Zu+54mH5o+P6L+wJyA6ICflm77niYfpk77mjqUnO1xuICAgICAgICAgICAgICBpbWFnZUNvbnRlbnRJbnB1dC5wbGFjZWhvbGRlciA9IGlzRGVzYyA/ICfor7fovpPlhaXlm77niYfmj4/ov7AnIDogJ+ivt+i+k+WFpeWbvueJh+mTvuaOpSc7XG4gICAgICAgICAgICAgIHVybERlc2NHcm91cC5zdHlsZS5kaXNwbGF5ID0gaXNEZXNjID8gJ25vbmUnIDogJ2Jsb2NrJztcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgLy8g5oyJ6ZKu5LqL5Lu2XG4gICAgICAgICAgY29uc3QgY2FuY2VsQnRuID0gdGhpcy5hY3RpdmVEaWFsb2cucXVlcnlTZWxlY3RvcignLmRpYWxvZy1idG4tY2FuY2VsJykgYXMgSFRNTEVsZW1lbnQ7XG4gICAgICAgICAgY29uc3QgY29uZmlybUJ0biA9IHRoaXMuYWN0aXZlRGlhbG9nLnF1ZXJ5U2VsZWN0b3IoJy5kaWFsb2ctYnRuLWNvbmZpcm0nKSBhcyBIVE1MRWxlbWVudDtcblxuICAgICAgICAgIGNvbnN0IGhhbmRsZUNhbmNlbCA9ICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuY2xvc2VEaWFsb2coKTtcbiAgICAgICAgICAgIHJlc29sdmUobnVsbCk7XG4gICAgICAgICAgfTtcblxuICAgICAgICAgIGNvbnN0IGhhbmRsZUNvbmZpcm0gPSAoKSA9PiB7XG4gICAgICAgICAgICAvLyDmo4Dmn6Xlr7nor53moYbmmK/lkKbov5jlrZjlnKhcbiAgICAgICAgICAgIGlmICghdGhpcy5hY3RpdmVEaWFsb2cpIHtcbiAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjb25zdCB0ZXh0QXJlYSA9IHRoaXMuYWN0aXZlRGlhbG9nLnF1ZXJ5U2VsZWN0b3IoJyNtb21lbnQtdGV4dCcpIGFzIEhUTUxUZXh0QXJlYUVsZW1lbnQ7XG4gICAgICAgICAgICBjb25zdCBhdHRhY2hJbWFnZUlucHV0ID0gdGhpcy5hY3RpdmVEaWFsb2cucXVlcnlTZWxlY3RvcignI2F0dGFjaC1pbWFnZScpIGFzIEhUTUxJbnB1dEVsZW1lbnQ7XG4gICAgICAgICAgICBjb25zdCBpbWFnZVR5cGVJbnB1dCA9IHRoaXMuYWN0aXZlRGlhbG9nLnF1ZXJ5U2VsZWN0b3IoXG4gICAgICAgICAgICAgICdpbnB1dFtuYW1lPVwiaW1hZ2UtdHlwZVwiXTpjaGVja2VkJyxcbiAgICAgICAgICAgICkgYXMgSFRNTElucHV0RWxlbWVudDtcbiAgICAgICAgICAgIGNvbnN0IGltYWdlQ29udGVudEZpZWxkID0gdGhpcy5hY3RpdmVEaWFsb2cucXVlcnlTZWxlY3RvcignI2ltYWdlLWNvbnRlbnQnKSBhcyBIVE1MSW5wdXRFbGVtZW50O1xuICAgICAgICAgICAgY29uc3QgaW1hZ2VEZXNjRmllbGQgPSB0aGlzLmFjdGl2ZURpYWxvZy5xdWVyeVNlbGVjdG9yKCcjaW1hZ2UtZGVzYycpIGFzIEhUTUxJbnB1dEVsZW1lbnQ7XG4gICAgICAgICAgICBjb25zdCBkYXRldGltZUlucHV0ID0gdGhpcy5hY3RpdmVEaWFsb2cucXVlcnlTZWxlY3RvcignI21vbWVudC1kYXRldGltZScpIGFzIEhUTUxJbnB1dEVsZW1lbnQ7XG5cbiAgICAgICAgICAgIGlmICghdGV4dEFyZWEgfHwgIWF0dGFjaEltYWdlSW5wdXQgfHwgIWRhdGV0aW1lSW5wdXQpIHtcbiAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjb25zdCB0ZXh0ID0gdGV4dEFyZWEudmFsdWU7XG4gICAgICAgICAgICBjb25zdCBhdHRhY2hJbWFnZSA9IGF0dGFjaEltYWdlSW5wdXQuY2hlY2tlZDtcbiAgICAgICAgICAgIGNvbnN0IGltYWdlVHlwZSA9IGF0dGFjaEltYWdlICYmIGltYWdlVHlwZUlucHV0ID8gKGltYWdlVHlwZUlucHV0LnZhbHVlIGFzICd1cmwnIHwgJ2Rlc2MnKSA6ICdub25lJztcbiAgICAgICAgICAgIGNvbnN0IGltYWdlQ29udGVudCA9IGF0dGFjaEltYWdlICYmIGltYWdlQ29udGVudEZpZWxkID8gaW1hZ2VDb250ZW50RmllbGQudmFsdWUgOiAnJztcbiAgICAgICAgICAgIGNvbnN0IGltYWdlRGVzYyA9IGltYWdlVHlwZSA9PT0gJ3VybCcgJiYgaW1hZ2VEZXNjRmllbGQgPyBpbWFnZURlc2NGaWVsZC52YWx1ZSA6IGltYWdlQ29udGVudDtcbiAgICAgICAgICAgIGNvbnN0IGRhdGV0aW1lID0gZGF0ZXRpbWVJbnB1dC52YWx1ZTtcblxuICAgICAgICAgICAgLy8g6aqM6K+B6L6T5YWlXG4gICAgICAgICAgICBpZiAoKCF0ZXh0IHx8IHRleHQudHJpbSgpID09PSAnJykgJiYgKCFpbWFnZUNvbnRlbnQgfHwgaW1hZ2VDb250ZW50LnRyaW0oKSA9PT0gJycpKSB7XG4gICAgICAgICAgICAgIC8vIOWcqOaWh+acrOahhuS4iuaYvuekuumUmeivr+aPkOekuu+8jOiAjOS4jeaYr+W8ueWHuuaWsOeahGFsZXJ0XG4gICAgICAgICAgICAgIHRleHRBcmVhLnN0eWxlLmJvcmRlckNvbG9yID0gJyNmZjQ0NDQnO1xuICAgICAgICAgICAgICB0ZXh0QXJlYS5wbGFjZWhvbGRlciA9ICfor7fovpPlhaXmnIvlj4vlnIjlhoXlrrnmiJbmt7vliqDlm77niYcnO1xuICAgICAgICAgICAgICB0ZXh0QXJlYS5mb2N1cygpO1xuICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIOino+aekOaXtumXtFxuICAgICAgICAgICAgY29uc3QgZGF0ZXRpbWVNYXRjaCA9IGRhdGV0aW1lLm1hdGNoKC9eKFxcZHs0fS1cXGR7Mn0tXFxkezJ9KVxccysoXFxkezJ9OlxcZHsyfSkkLyk7XG4gICAgICAgICAgICBpZiAoIWRhdGV0aW1lTWF0Y2gpIHtcbiAgICAgICAgICAgICAgLy8g5Zyo5pe26Ze06L6T5YWl5qGG5LiK5pi+56S66ZSZ6K+v5o+Q56S677yM6ICM5LiN5piv5by55Ye65paw55qEYWxlcnRcbiAgICAgICAgICAgICAgZGF0ZXRpbWVJbnB1dC5zdHlsZS5ib3JkZXJDb2xvciA9ICcjZmY0NDQ0JztcbiAgICAgICAgICAgICAgZGF0ZXRpbWVJbnB1dC5wbGFjZWhvbGRlciA9ICfmoLzlvI/vvJpZWVlZLU1NLUREIEhIOk1NJztcbiAgICAgICAgICAgICAgZGF0ZXRpbWVJbnB1dC5mb2N1cygpO1xuICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHRoaXMuY2xvc2VEaWFsb2coKTtcbiAgICAgICAgICAgIHJlc29sdmUoe1xuICAgICAgICAgICAgICB0ZXh0OiB0ZXh0LnRyaW0oKSxcbiAgICAgICAgICAgICAgaW1hZ2U6IGltYWdlQ29udGVudC50cmltKCksXG4gICAgICAgICAgICAgIGltYWdlX3R5cGU6IGltYWdlVHlwZSxcbiAgICAgICAgICAgICAgaW1hZ2VfZGVzYzogaW1hZ2VEZXNjLnRyaW0oKSxcbiAgICAgICAgICAgICAgZGF0ZTogZGF0ZXRpbWVNYXRjaFsxXSxcbiAgICAgICAgICAgICAgdGltZTogZGF0ZXRpbWVNYXRjaFsyXSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH07XG5cbiAgICAgICAgICBjYW5jZWxCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBoYW5kbGVDYW5jZWwpO1xuICAgICAgICAgIGNvbmZpcm1CdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBoYW5kbGVDb25maXJtKTtcblxuICAgICAgICAgIC8vIOmUruebmOS6i+S7tuWkhOeQhlxuICAgICAgICAgIGNvbnN0IGhhbmRsZUtleURvd24gPSAoZTogS2V5Ym9hcmRFdmVudCkgPT4ge1xuICAgICAgICAgICAgaWYgKGUua2V5ID09PSAnRW50ZXInICYmIGUuY3RybEtleSkge1xuICAgICAgICAgICAgICAvLyBDdHJsK0VudGVyIOWPkeW4g+aci+WPi+WciFxuICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgIGhhbmRsZUNvbmZpcm0oKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZS5rZXkgPT09ICdFc2NhcGUnKSB7XG4gICAgICAgICAgICAgIGhhbmRsZUNhbmNlbCgpO1xuICAgICAgICAgICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdrZXlkb3duJywgaGFuZGxlS2V5RG93bik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfTtcbiAgICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgaGFuZGxlS2V5RG93bik7XG5cbiAgICAgICAgICAvLyDmt7vliqDliLDmiYvmnLrlsY/luZXlrrnlmajlhoVcbiAgICAgICAgICB0aGlzLmFjdGl2ZU92ZXJsYXkuYXBwZW5kQ2hpbGQodGhpcy5hY3RpdmVEaWFsb2cpO1xuICAgICAgICAgIHRoaXMuYXBwZW5kRGlhbG9nVG9QYWdlKCk7XG5cbiAgICAgICAgICAvLyDogZrnhKbliLDmlofmnKzmoYZcbiAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgIGlmICh0aGlzLmFjdGl2ZURpYWxvZykge1xuICAgICAgICAgICAgICBjb25zdCB0ZXh0QXJlYSA9IHRoaXMuYWN0aXZlRGlhbG9nLnF1ZXJ5U2VsZWN0b3IoJyNtb21lbnQtdGV4dCcpIGFzIEhUTUxUZXh0QXJlYUVsZW1lbnQ7XG4gICAgICAgICAgICAgIGlmICh0ZXh0QXJlYSkge1xuICAgICAgICAgICAgICAgIHRleHRBcmVhLmZvY3VzKCk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9LCAxMDApO1xuICAgICAgICB9KSxcbiAgICApO1xuICB9XG5cbiAgLyoqXG4gICAqIOaYvuekuuaXtumXtOi3s+i3g+WvueivneahhlxuICAgKi9cbiAgcHVibGljIHNob3dUaW1lSnVtcERpYWxvZyhkZWZhdWx0VGltZT86IHN0cmluZyk6IFByb21pc2U8e1xuICAgIGRhdGU6IHN0cmluZztcbiAgICB0aW1lOiBzdHJpbmc7XG4gICAgZGVzY3JpcHRpb246IHN0cmluZztcbiAgfSB8IG51bGw+IHtcbiAgICByZXR1cm4gdGhpcy5zYWZlU2hvd0RpYWxvZyhcbiAgICAgICgpID0+XG4gICAgICAgIG5ldyBQcm9taXNlKHJlc29sdmUgPT4ge1xuICAgICAgICAgIGNvbnN0IGN1cnJlbnREYXRlID0gd2luZG93LmN1cnJlbnRHYW1lRGF0ZSB8fCBuZXcgRGF0ZSgpO1xuICAgICAgICAgIGNvbnN0IGRlZmF1bHREYXRlVGltZSA9XG4gICAgICAgICAgICBkZWZhdWx0VGltZSB8fFxuICAgICAgICAgICAgYCR7Y3VycmVudERhdGUuZ2V0RnVsbFllYXIoKX0tJHsoY3VycmVudERhdGUuZ2V0TW9udGgoKSArIDEpLnRvU3RyaW5nKCkucGFkU3RhcnQoMiwgJzAnKX0tJHtjdXJyZW50RGF0ZVxuICAgICAgICAgICAgICAuZ2V0RGF0ZSgpXG4gICAgICAgICAgICAgIC50b1N0cmluZygpXG4gICAgICAgICAgICAgIC5wYWRTdGFydCgyLCAnMCcpfSAke2N1cnJlbnREYXRlLmdldEhvdXJzKCkudG9TdHJpbmcoKS5wYWRTdGFydCgyLCAnMCcpfToke2N1cnJlbnREYXRlXG4gICAgICAgICAgICAgIC5nZXRNaW51dGVzKClcbiAgICAgICAgICAgICAgLnRvU3RyaW5nKClcbiAgICAgICAgICAgICAgLnBhZFN0YXJ0KDIsICcwJyl9YDtcblxuICAgICAgICAgIC8vIOWIm+W7uumBrue9qeWxgiAtIOmZkOWItuWcqOaJi+acuuWxj+W5leWGhVxuICAgICAgICAgIHRoaXMuYWN0aXZlT3ZlcmxheSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICAgIHRoaXMuYWN0aXZlT3ZlcmxheS5jbGFzc05hbWUgPSAnZGlhbG9nLW92ZXJsYXkgbW9iaWxlLWRpYWxvZy1vdmVybGF5JztcblxuICAgICAgICAgIC8vIOWIm+W7uuWvueivneahhlxuICAgICAgICAgIHRoaXMuYWN0aXZlRGlhbG9nID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgICAgdGhpcy5hY3RpdmVEaWFsb2cuY2xhc3NOYW1lID0gJ2RpYWxvZyB0aW1lLWp1bXAtZGlhbG9nIG1vYmlsZS1kaWFsb2cnO1xuXG4gICAgICAgICAgdGhpcy5hY3RpdmVEaWFsb2cuaW5uZXJIVE1MID0gYFxuICAgICAgICA8ZGl2IGNsYXNzPVwiZGlhbG9nLWhlYWRlclwiPlxuICAgICAgICAgIDxoMz7ml7bpl7Tot7Pot4M8L2gzPlxuICAgICAgICA8L2Rpdj5cbiAgICAgICAgPGRpdiBjbGFzcz1cImRpYWxvZy1ib2R5XCI+XG4gICAgICAgICAgPGRpdiBjbGFzcz1cImZvcm0tZ3JvdXBcIj5cbiAgICAgICAgICAgIDxsYWJlbCBmb3I9XCJqdW1wLWRhdGV0aW1lXCI+6Lez6LeD5Yiw5pe26Ze0PC9sYWJlbD5cbiAgICAgICAgICAgIDxpbnB1dCB0eXBlPVwidGV4dFwiIGlkPVwianVtcC1kYXRldGltZVwiIHZhbHVlPVwiJHtkZWZhdWx0RGF0ZVRpbWV9XCIgcGxhY2Vob2xkZXI9XCJZWVlZLU1NLUREIEhIOk1NXCI+XG4gICAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgICA8ZGl2IGNsYXNzPVwiZm9ybS1ncm91cFwiPlxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cImNoZWNrYm94LWdyb3VwIHZlcnRpY2FsXCI+XG4gICAgICAgICAgICAgIDxsYWJlbCBjbGFzcz1cImNoZWNrYm94LWJ1dHRvbiBmdWxsLXdpZHRoXCIgZm9yPVwiYWRkLWRlc2NyaXB0aW9uXCI+XG4gICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9XCJjaGVja2JveFwiIGlkPVwiYWRkLWRlc2NyaXB0aW9uXCI+XG4gICAgICAgICAgICAgICAg8J+TnSDorrDlvZXov5nmrrXml7bpl7Tlj5HnlJ/kuobku4DkuYhcbiAgICAgICAgICAgICAgPC9sYWJlbD5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDwvZGl2PlxuXG4gICAgICAgICAgPGRpdiBjbGFzcz1cImRlc2NyaXB0aW9uLWdyb3VwXCIgc3R5bGU9XCJkaXNwbGF5OiBub25lO1wiPlxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cImZvcm0tZ3JvdXBcIj5cbiAgICAgICAgICAgICAgPGxhYmVsIGZvcj1cImV2ZW50LWRlc2NyaXB0aW9uXCI+5LqL5Lu25o+P6L+wPC9sYWJlbD5cbiAgICAgICAgICAgICAgPHRleHRhcmVhIGlkPVwiZXZlbnQtZGVzY3JpcHRpb25cIiBwbGFjZWhvbGRlcj1cIuaPj+i/sOi/meauteaXtumXtOWPkeeUn+eahOS6i+aDhS4uLlwiIHJvd3M9XCIzXCI+PC90ZXh0YXJlYT5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICAgICAgPGRpdiBjbGFzcz1cImRpYWxvZy1mb290ZXJcIj5cbiAgICAgICAgICA8YnV0dG9uIGNsYXNzPVwiZGlhbG9nLWJ0biBkaWFsb2ctYnRuLWNhbmNlbFwiPuWPlua2iDwvYnV0dG9uPlxuICAgICAgICAgIDxidXR0b24gY2xhc3M9XCJkaWFsb2ctYnRuIGRpYWxvZy1idG4tY29uZmlybVwiPui3s+i3gzwvYnV0dG9uPlxuICAgICAgICA8L2Rpdj5cbiAgICAgIGA7XG5cbiAgICAgICAgICAvLyDmt7vliqDkuovku7bnm5HlkKzlmahcbiAgICAgICAgICBjb25zdCBhZGREZXNjcmlwdGlvbkNoZWNrYm94ID0gdGhpcy5hY3RpdmVEaWFsb2cucXVlcnlTZWxlY3RvcignI2FkZC1kZXNjcmlwdGlvbicpIGFzIEhUTUxJbnB1dEVsZW1lbnQ7XG4gICAgICAgICAgY29uc3QgZGVzY3JpcHRpb25Hcm91cCA9IHRoaXMuYWN0aXZlRGlhbG9nLnF1ZXJ5U2VsZWN0b3IoJy5kZXNjcmlwdGlvbi1ncm91cCcpIGFzIEhUTUxFbGVtZW50O1xuXG4gICAgICAgICAgLy8g5Yid5aeL5YyWY2hlY2tib3jmjInpkq7moLflvI9cbiAgICAgICAgICB0aGlzLmluaXRpYWxpemVDaGVja2JveEJ1dHRvbnMoKTtcblxuICAgICAgICAgIC8vIOaPj+i/sOmAiemhueWIh+aNolxuICAgICAgICAgIGFkZERlc2NyaXB0aW9uQ2hlY2tib3guYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgKCkgPT4ge1xuICAgICAgICAgICAgZGVzY3JpcHRpb25Hcm91cC5zdHlsZS5kaXNwbGF5ID0gYWRkRGVzY3JpcHRpb25DaGVja2JveC5jaGVja2VkID8gJ2Jsb2NrJyA6ICdub25lJztcbiAgICAgICAgICB9KTtcblxuICAgICAgICAgIC8vIOaMiemSruS6i+S7tlxuICAgICAgICAgIGNvbnN0IGNhbmNlbEJ0biA9IHRoaXMuYWN0aXZlRGlhbG9nLnF1ZXJ5U2VsZWN0b3IoJy5kaWFsb2ctYnRuLWNhbmNlbCcpIGFzIEhUTUxFbGVtZW50O1xuICAgICAgICAgIGNvbnN0IGNvbmZpcm1CdG4gPSB0aGlzLmFjdGl2ZURpYWxvZy5xdWVyeVNlbGVjdG9yKCcuZGlhbG9nLWJ0bi1jb25maXJtJykgYXMgSFRNTEVsZW1lbnQ7XG5cbiAgICAgICAgICBjb25zdCBoYW5kbGVDYW5jZWwgPSAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLmNsb3NlRGlhbG9nKCk7XG4gICAgICAgICAgICByZXNvbHZlKG51bGwpO1xuICAgICAgICAgIH07XG5cbiAgICAgICAgICBjb25zdCBoYW5kbGVDb25maXJtID0gKCkgPT4ge1xuICAgICAgICAgICAgLy8g5qOA5p+l5a+56K+d5qGG5piv5ZCm6L+Y5a2Y5ZyoXG4gICAgICAgICAgICBpZiAoIXRoaXMuYWN0aXZlRGlhbG9nKSB7XG4gICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgY29uc3QgZGF0ZXRpbWVJbnB1dCA9IHRoaXMuYWN0aXZlRGlhbG9nLnF1ZXJ5U2VsZWN0b3IoJyNqdW1wLWRhdGV0aW1lJykgYXMgSFRNTElucHV0RWxlbWVudDtcbiAgICAgICAgICAgIGNvbnN0IGFkZERlc2NyaXB0aW9uSW5wdXQgPSB0aGlzLmFjdGl2ZURpYWxvZy5xdWVyeVNlbGVjdG9yKCcjYWRkLWRlc2NyaXB0aW9uJykgYXMgSFRNTElucHV0RWxlbWVudDtcbiAgICAgICAgICAgIGNvbnN0IGRlc2NyaXB0aW9uSW5wdXQgPSB0aGlzLmFjdGl2ZURpYWxvZy5xdWVyeVNlbGVjdG9yKCcjZXZlbnQtZGVzY3JpcHRpb24nKSBhcyBIVE1MVGV4dEFyZWFFbGVtZW50O1xuXG4gICAgICAgICAgICBpZiAoIWRhdGV0aW1lSW5wdXQpIHtcbiAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjb25zdCBkYXRldGltZSA9IGRhdGV0aW1lSW5wdXQudmFsdWU7XG4gICAgICAgICAgICBjb25zdCBhZGREZXNjcmlwdGlvbiA9IGFkZERlc2NyaXB0aW9uSW5wdXQgPyBhZGREZXNjcmlwdGlvbklucHV0LmNoZWNrZWQgOiBmYWxzZTtcbiAgICAgICAgICAgIGNvbnN0IGRlc2NyaXB0aW9uID0gYWRkRGVzY3JpcHRpb24gJiYgZGVzY3JpcHRpb25JbnB1dCA/IGRlc2NyaXB0aW9uSW5wdXQudmFsdWUgOiAnJztcblxuICAgICAgICAgICAgLy8g6Kej5p6Q5pe26Ze0XG4gICAgICAgICAgICBjb25zdCBkYXRldGltZU1hdGNoID0gZGF0ZXRpbWUubWF0Y2goL14oXFxkezR9LVxcZHsyfS1cXGR7Mn0pXFxzKyhcXGR7Mn06XFxkezJ9KSQvKTtcbiAgICAgICAgICAgIGlmICghZGF0ZXRpbWVNYXRjaCkge1xuICAgICAgICAgICAgICAvLyDlnKjml7bpl7TovpPlhaXmoYbkuIrmmL7npLrplJnor6/mj5DnpLrvvIzogIzkuI3mmK/lvLnlh7rmlrDnmoRhbGVydFxuICAgICAgICAgICAgICBkYXRldGltZUlucHV0LnN0eWxlLmJvcmRlckNvbG9yID0gJyNmZjQ0NDQnO1xuICAgICAgICAgICAgICBkYXRldGltZUlucHV0LnBsYWNlaG9sZGVyID0gJ+agvOW8j++8mllZWVktTU0tREQgSEg6TU0nO1xuICAgICAgICAgICAgICBkYXRldGltZUlucHV0LmZvY3VzKCk7XG4gICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdGhpcy5jbG9zZURpYWxvZygpO1xuICAgICAgICAgICAgcmVzb2x2ZSh7XG4gICAgICAgICAgICAgIGRhdGU6IGRhdGV0aW1lTWF0Y2hbMV0sXG4gICAgICAgICAgICAgIHRpbWU6IGRhdGV0aW1lTWF0Y2hbMl0sXG4gICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBkZXNjcmlwdGlvbi50cmltKCksXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9O1xuXG4gICAgICAgICAgY2FuY2VsQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgaGFuZGxlQ2FuY2VsKTtcbiAgICAgICAgICBjb25maXJtQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgaGFuZGxlQ29uZmlybSk7XG5cbiAgICAgICAgICAvLyDplK7nm5jkuovku7blpITnkIZcbiAgICAgICAgICBjb25zdCBoYW5kbGVLZXlEb3duID0gKGU6IEtleWJvYXJkRXZlbnQpID0+IHtcbiAgICAgICAgICAgIC8vIOajgOafpeWvueivneahhuaYr+WQpui/mOWtmOWcqFxuICAgICAgICAgICAgaWYgKCF0aGlzLmFjdGl2ZURpYWxvZykge1xuICAgICAgICAgICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdrZXlkb3duJywgaGFuZGxlS2V5RG93bik7XG4gICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKGUua2V5ID09PSAnRW50ZXInKSB7XG4gICAgICAgICAgICAgIC8vIEVudGVy6ZSu56Gu6K6k5pe26Ze06Lez6L2sXG4gICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgaGFuZGxlQ29uZmlybSgpO1xuICAgICAgICAgICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdrZXlkb3duJywgaGFuZGxlS2V5RG93bik7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGUua2V5ID09PSAnRXNjYXBlJykge1xuICAgICAgICAgICAgICBoYW5kbGVDYW5jZWwoKTtcbiAgICAgICAgICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIGhhbmRsZUtleURvd24pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH07XG4gICAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIGhhbmRsZUtleURvd24pO1xuXG4gICAgICAgICAgLy8g5re75Yqg5Yiw5omL5py65bGP5bmV5a655Zmo5YaFXG4gICAgICAgICAgdGhpcy5hY3RpdmVPdmVybGF5LmFwcGVuZENoaWxkKHRoaXMuYWN0aXZlRGlhbG9nKTtcbiAgICAgICAgICB0aGlzLmFwcGVuZERpYWxvZ1RvUGFnZSgpO1xuXG4gICAgICAgICAgLy8g6IGa54Sm5Yiw5pe26Ze06L6T5YWl5qGGXG4gICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICBpZiAodGhpcy5hY3RpdmVEaWFsb2cpIHtcbiAgICAgICAgICAgICAgY29uc3QgdGltZUlucHV0ID0gdGhpcy5hY3RpdmVEaWFsb2cucXVlcnlTZWxlY3RvcignI2p1bXAtZGF0ZXRpbWUnKSBhcyBIVE1MSW5wdXRFbGVtZW50O1xuICAgICAgICAgICAgICBpZiAodGltZUlucHV0KSB7XG4gICAgICAgICAgICAgICAgdGltZUlucHV0LmZvY3VzKCk7XG4gICAgICAgICAgICAgICAgdGltZUlucHV0LnNlbGVjdCgpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSwgMTAwKTtcbiAgICAgICAgfSksXG4gICAgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiDlvLrliLbmuIXnkIbmiYDmnInlr7nor53moYblhYPntKBcbiAgICovXG4gIHByaXZhdGUgZm9yY2VDbGVhbnVwRGlhbG9ncygpOiB2b2lkIHtcbiAgICAvLyDmuIXnkIbmiYDmnInlj6/og73mrovnlZnnmoTlr7nor53moYblhYPntKBcbiAgICBjb25zdCBjb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucGhvbmUtc2NyZWVuJykgfHwgZG9jdW1lbnQuYm9keTtcblxuICAgIC8vIOS9v+eUqOmAmueUqOmAieaLqeWZqOa4heeQhuaJgOacieWvueivneahhuebuOWFs+WFg+e0oFxuICAgIGNvbnN0IHNlbGVjdG9ycyA9IFtcbiAgICAgICdbY2xhc3MqPVwiZGlhbG9nLW92ZXJsYXlcIl0nLFxuICAgICAgJ1tjbGFzcyo9XCJkaWFsb2dcIl0nLFxuICAgICAgJy5jdXN0b20tZGlhbG9nLW92ZXJsYXknLFxuICAgICAgJy5tb2JpbGUtZGlhbG9nLW92ZXJsYXknLFxuICAgICAgJy5jdXN0b20tZGlhbG9nJyxcbiAgICAgICcubW9iaWxlLWRpYWxvZycsXG4gICAgXTtcblxuICAgIHNlbGVjdG9ycy5mb3JFYWNoKHNlbGVjdG9yID0+IHtcbiAgICAgIGNvbnN0IGVsZW1lbnRzID0gY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3JBbGwoc2VsZWN0b3IpO1xuICAgICAgZWxlbWVudHMuZm9yRWFjaChlbGVtZW50ID0+IHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBpZiAoZWxlbWVudC5wYXJlbnROb2RlKSB7XG4gICAgICAgICAgICBlbGVtZW50LnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoZWxlbWVudCk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgIGNvbnNvbGUud2Fybign56e76Zmk5a+56K+d5qGG5YWD57Sg5pe25Ye66ZSZOicsIGVycm9yKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICAvLyDmuIXnkIblvJXnlKhcbiAgICB0aGlzLmFjdGl2ZURpYWxvZyA9IG51bGw7XG4gICAgdGhpcy5hY3RpdmVPdmVybGF5ID0gbnVsbDtcbiAgfVxuXG4gIC8qKlxuICAgKiDlhbPpl63lr7nor53moYZcbiAgICovXG4gIHByaXZhdGUgY2xvc2VEaWFsb2coKTogdm9pZCB7XG4gICAgdGhpcy5mb3JjZUNsZWFudXBEaWFsb2dzKCk7XG4gIH1cbn1cbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/同层手机/dialog-manager.ts\n")},"./src/同层手机/event-handler.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   EventHandler: () => (/* binding */ EventHandler)\n/* harmony export */ });\n/* harmony import */ var _dialog_manager__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./dialog-manager */ \"./src/同层手机/dialog-manager.ts\");\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./utils */ \"./src/同层手机/utils.ts\");\n\n\n// 事件处理器类\nclass EventHandler {\n    wechatInput;\n    sendBtn;\n    plusBtn;\n    uiRenderer;\n    options;\n    blmxManager;\n    appController;\n    hasPendingNotifications = false;\n    dialogManager = _dialog_manager__WEBPACK_IMPORTED_MODULE_0__.DialogManager.getInstance();\n    // 添加getter方法\n    get hasNotifications() {\n        return this.hasPendingNotifications;\n    }\n    // 设置UIRenderer引用\n    setUIRenderer(uiRenderer) {\n        this.uiRenderer = uiRenderer;\n    }\n    constructor(inputSelector, sendBtnSelector, plusBtnSelector, blmxManager, appController, uiRenderer, options) {\n        this.wechatInput = $(inputSelector)[0];\n        this.sendBtn = $(sendBtnSelector)[0];\n        this.plusBtn = $(plusBtnSelector)[0];\n        if (!this.wechatInput || !this.sendBtn || !this.plusBtn) {\n            throw new Error('One or more required elements not found');\n        }\n        this.blmxManager = blmxManager;\n        this.options = options;\n        this.appController = appController;\n        this.uiRenderer = uiRenderer;\n        this.setupEventListeners();\n    }\n    // 设置是否有待处理的通知\n    setHasPendingNotifications(value) {\n        this.hasPendingNotifications = value;\n        this.options.updateFooterButtonsState();\n    }\n    // 添加长按监听器\n    addLongPressListener(element, callback, options = { duration: 600, preventDefault: true }) {\n        let timer;\n        let startX, startY;\n        const onStart = (e) => {\n            if (e.type === 'mousedown' && e.button !== 0)\n                return;\n            startX = e.clientX;\n            startY = e.clientY;\n            if (options.preventDefault)\n                e.preventDefault();\n            clearTimeout(timer);\n            timer = window.setTimeout(() => {\n                timer = 0;\n                callback();\n            }, options.duration);\n        };\n        const onMove = (e) => {\n            if (!timer)\n                return;\n            const moveX = e.clientX;\n            const moveY = e.clientY;\n            if (Math.abs(moveX - startX) > 10 || Math.abs(moveY - startY) > 10) {\n                clearTimeout(timer);\n            }\n        };\n        const onEnd = () => clearTimeout(timer);\n        element.addEventListener('pointerdown', onStart);\n        element.addEventListener('pointermove', onMove);\n        element.addEventListener('pointerup', onEnd);\n        element.addEventListener('pointerleave', onEnd);\n        if (options.preventDefault) {\n            element.addEventListener('contextmenu', e => e.preventDefault());\n        }\n    }\n    // 提示用户输入日期和时间\n    async promptForDateTime(defaultText) {\n        const dateTimeInput = await this.dialogManager.prompt('请输入日期和时间', defaultText, '日期时间设置', '确定', '取消', 'text', '格式YYYY-MM-DD HH:mm');\n        if (!dateTimeInput || !/^\\d{4}-\\d{2}-\\d{2} \\d{2}:\\d{2}$/.test(dateTimeInput)) {\n            if (dateTimeInput)\n                await this.dialogManager.alert('格式错误，请输入YYYY-MM-DD HH:mm 格式。', '格式错误');\n            return null;\n        }\n        const [newDate, newTime] = dateTimeInput.split(' ');\n        const parsedDate = new Date(dateTimeInput.replace(' ', 'T'));\n        if (isNaN(parsedDate.getTime())) {\n            await this.dialogManager.alert('无效的日期时间格式。', '格式错误');\n            return null;\n        }\n        // 更新系统当前日期\n        window.currentGameDate = parsedDate;\n        // 更新状态栏时间\n        const $timeElement = $('#current-time');\n        if ($timeElement.length) {\n            const formattedTime = `${window.currentGameDate.getHours().toString().padStart(2, '0')}:${window.currentGameDate\n                .getMinutes()\n                .toString()\n                .padStart(2, '0')}`;\n            $timeElement.text(formattedTime);\n        }\n        // 刷新所有时间戳的显示\n        if (this.uiRenderer) {\n            this.uiRenderer.refreshAllTimestamps();\n        }\n        return [newDate, newTime];\n    }\n    // 处理消息撤回\n    async handleMessageRecall(messageId) {\n        const entryToRecall = this.blmxManager.logEntries.find(e => 'id' in e && e.id === messageId);\n        if (entryToRecall) {\n            const currentDate = window.currentGameDate || new Date();\n            const timeString = `${currentDate.getFullYear()}-${(currentDate.getMonth() + 1)\n                .toString()\n                .padStart(2, '0')}-${currentDate.getDate().toString().padStart(2, '0')} ${currentDate\n                .getHours()\n                .toString()\n                .padStart(2, '0')}:${currentDate.getMinutes().toString().padStart(2, '0')}`;\n            const dateTimeResult = await this.promptForDateTime(timeString);\n            if (dateTimeResult === null) {\n                return;\n            }\n            const confirmed = await this.dialogManager.confirm('是否要撤回这条消息？', '确认撤回');\n            if (confirmed) {\n                const [newDate, newTime] = dateTimeResult;\n                // 标记消息为已撤回\n                entryToRecall.recalled = true;\n                entryToRecall.recalled_timestamp = `${newDate} ${newTime}`;\n                entryToRecall.recalled_content = entryToRecall.content;\n                // 立即保存更新后的日志\n                this.blmxManager.persistLogToStorage().then(() => {\n                    // 保存成功后，立即用最新的数据重绘整个聊天界面\n                    this.options.renderChatHistory();\n                });\n                // 更新底部按钮状态\n                this.options.updateFooterButtonsState();\n                // 如果是用户撤回的消息，询问是否通过朋友圈通知AI\n                if (entryToRecall.sender === 'me') {\n                    // 获取消息内容\n                    const messageContent = typeof entryToRecall.content === 'string'\n                        ? entryToRecall.content\n                        : (0,_utils__WEBPACK_IMPORTED_MODULE_1__.safeJsonStringify)(entryToRecall.content);\n                    // 调用AppController的通知方法\n                    this.appController.notifyRecallViaMoments('USER', messageContent);\n                }\n            }\n        }\n        else {\n            await this.dialogManager.alert('找不到该消息，无法撤回。', '错误');\n        }\n    }\n    // 设置事件监听器\n    setupEventListeners() {\n        // 发送按钮点击事件\n        this.sendBtn.addEventListener('click', () => {\n            const text = this.wechatInput.value.trim();\n            if (text) {\n                this.options.stageAndDisplayEntry({\n                    id: `msg-${Date.now()}${Math.random()}`,\n                    type: 'message',\n                    sender: 'me',\n                    content: text,\n                });\n                this.wechatInput.value = '';\n                this.options.updateFooterButtonsState();\n            }\n            else {\n                // 无论是否有通知，都强制触发AI响应\n                this.hasPendingNotifications = false;\n                this.options.triggerAiResponse(true); // 明确传递immediate=true\n            }\n        });\n        $('#smile-btn').on('click', () => {\n            this.options.togglePanel('sticker');\n            this.renderStickerFeatures();\n        });\n        this.plusBtn.addEventListener('click', () => {\n            this.options.togglePanel('plus');\n            this.renderPlusFeatures();\n        });\n        $('#microphone-btn').on('click', async () => {\n            const result = await this.dialogManager.showVoiceDialog();\n            if (result) {\n                this.options.stageAndDisplayEntry({\n                    id: `msg-${Date.now()}${Math.random()}`,\n                    type: 'voice',\n                    sender: 'me',\n                    content: { text: result.text, duration: result.duration },\n                });\n            }\n        });\n        // 输入框键盘事件\n        this.wechatInput.addEventListener('keydown', e => {\n            if (e.key === 'Enter' && !e.shiftKey) {\n                e.preventDefault();\n                this.sendBtn.click();\n            }\n        });\n        // 输入框内容变化事件\n        this.wechatInput.addEventListener('input', () => {\n            this.options.updateFooterButtonsState();\n        });\n        // 输入框聚焦事件\n        this.wechatInput.addEventListener('focus', () => {\n            this.options.togglePanel(null);\n        });\n        // 导航事件\n        $('#app-wechat').on('click', () => this.appController.navigateTo('wechat'));\n        $('#app-settings').on('click', () => this.appController.navigateTo('settings'));\n        $('#wechat-back-btn-dummy').on('click', () => this.appController.navigateTo('home'));\n        $('#settings-back-btn').on('click', () => this.appController.navigateTo('home'));\n        $('#wechat-options-btn').on('click', () => this.appController.navigateTo('moments'));\n        $('#moments-back-btn').on('click', () => this.appController.navigateTo('wechat'));\n        // 渲染功能面板\n        this.renderPlusFeatures();\n        this.renderStickerFeatures();\n        // 各种点击事件监听\n        this.setupClickListeners();\n        // 输入框长按事件\n        this.addLongPressListener(document.getElementById('wechat-input-field'), async () => {\n            // 使用自定义对话框来更新输入框提示文字\n            const currentPlaceholder = $('#wechat-input-field').attr('placeholder') || '';\n            const newPlaceholder = await this.dialogManager.prompt('修改输入框提示文字:', currentPlaceholder, '修改提示文字');\n            if (newPlaceholder !== null) {\n                $('#wechat-input-field').attr('placeholder', newPlaceholder);\n                localStorage.setItem(`blmx_input_placeholder_${this.blmxManager.getCharId()}`, newPlaceholder);\n            }\n        }, { duration: 5000, preventDefault: false });\n    }\n    async setupClickListeners() {\n        $('#hidden-send-trigger').on('click', async () => {\n            const confirmed = await this.dialogManager.confirm('是否要立即触发AI响应（即使没有新消息）？', '触发AI响应');\n            if (confirmed) {\n                this.options.triggerAiResponse(true);\n            }\n        });\n        // 添加微信选项按钮点击事件 - 导航到朋友圈\n        $('#wechat-options-btn').on('click', () => {\n            this.appController.navigateTo('moments');\n        });\n        $('#delete-mode-trigger').on('click', async () => {\n            const wechatView = $('#wechat-view');\n            wechatView?.toggleClass('delete-mode');\n            if (wechatView?.hasClass('delete-mode')) {\n                await this.dialogManager.alert('已进入删除模式。点击任意消息或时间戳可将其删除。再次点击左上角可退出。', '删除模式');\n            }\n            else {\n                await this.dialogManager.alert('已退出删除模式。', '删除模式');\n            }\n        });\n        $('#post-moment-btn').on('click', async () => {\n            const currentDate = window.currentGameDate || new Date();\n            const timeString = `${currentDate.getFullYear()}-${(currentDate.getMonth() + 1)\n                .toString()\n                .padStart(2, '0')}-${currentDate.getDate().toString().padStart(2, '0')} ${currentDate\n                .getHours()\n                .toString()\n                .padStart(2, '0')}:${currentDate.getMinutes().toString().padStart(2, '0')}`;\n            // 使用综合对话框获取所有朋友圈信息\n            const momentData = await this.dialogManager.showMomentDialog(timeString);\n            if (!momentData)\n                return; // 用户取消了发布\n            // 为朋友圈生成唯一ID\n            const momentId = `moment-${Date.now()}-${Math.random().toString(36).substring(2, 10)}`;\n            const momentEntry = {\n                key: 'USER_MOMENT',\n                id: momentId,\n                data: {\n                    text: momentData.text,\n                    image: momentData.image,\n                    image_type: momentData.image_type,\n                    image_desc: momentData.image_desc,\n                    date: momentData.date,\n                    time: momentData.time,\n                },\n            };\n            // 添加到日志\n            this.blmxManager.addEntry(momentEntry);\n            // console.log(`[BLMX] 发布朋友圈，ID: ${momentId}, 内容: ${momentData.text}, 图片类型: ${momentData.image_type}`);\n            // 检查是否需要推进时间\n            const momentDateTime = `${momentData.date} ${momentData.time}`;\n            const momentDate = new Date(momentDateTime.replace(' ', 'T'));\n            const currentGameDate = window.currentGameDate || new Date();\n            // 如果朋友圈时间晚于当前游戏时间，延迟询问用户是否要推进时间（避免对话框冲突）\n            if (momentDate > currentGameDate) {\n                // 延迟300ms避免与朋友圈发布对话框冲突\n                setTimeout(async () => {\n                    const shouldAdvanceTime = await this.dialogManager.confirm(`朋友圈发布时间（${momentData.date} ${momentData.time}）晚于当前游戏时间。\\n是否要将游戏时间推进到朋友圈发布时间？`, '时间推进确认');\n                    if (shouldAdvanceTime) {\n                        // 推进时间到朋友圈发布时间\n                        const parsedDate = new Date(momentDateTime.replace(' ', 'T'));\n                        if (!isNaN(parsedDate.getTime())) {\n                            // 更新系统当前日期\n                            window.currentGameDate = parsedDate;\n                            // 更新状态栏时间\n                            const $timeElement = $('#current-time');\n                            if ($timeElement.length) {\n                                const formattedTime = `${window.currentGameDate\n                                    .getHours()\n                                    .toString()\n                                    .padStart(2, '0')}:${window.currentGameDate.getMinutes().toString().padStart(2, '0')}`;\n                                $timeElement.text(formattedTime);\n                            }\n                            // 刷新所有时间戳的显示\n                            if (this.uiRenderer) {\n                                this.uiRenderer.refreshAllTimestamps();\n                            }\n                            // 创建时间推进事件记录\n                            const timeAdvanceEvent = {\n                                type: 'event',\n                                content: {\n                                    date: momentData.date,\n                                    time: momentData.time,\n                                    description: `通过发布朋友圈推进时间到 ${momentData.date} ${momentData.time}`,\n                                },\n                            };\n                            this.blmxManager.addEntry(timeAdvanceEvent);\n                            // 重新渲染朋友圈以反映时间变化\n                            this.options.renderMomentsFeed();\n                            // console.log(`[BLMX] 通过朋友圈推进时间到: ${momentData.date} ${momentData.time}`);\n                        }\n                    }\n                }, 300);\n            }\n            // 关键修改：先渲染朋友圈，再异步持久化数据\n            this.options.renderMomentsFeed();\n            // 设置通知状态\n            this.setHasPendingNotifications(true);\n            this.options.updateFooterButtonsState();\n            // 在后台进行数据持久化，不阻塞UI更新\n            this.blmxManager.persistLogToStorage().then(() => {\n                // console.log('[BLMX] 朋友圈数据已持久化');\n            });\n        });\n        const momentsFeedList = $('#moments-feed-list');\n        momentsFeedList?.on('click', async (e) => {\n            const target = $(e.target)[0];\n            const postEl = target.closest('.moment-post');\n            if (!postEl)\n                return;\n            // 获取朋友圈的唯一ID\n            const momentId = postEl.dataset.momentId;\n            if (!momentId) {\n                console.error('[BLMX] 无法获取朋友圈ID，data-moment-id属性缺失');\n                return;\n            }\n            console.log(`[BLMX] 朋友圈操作，ID: ${momentId}`);\n            if (target.closest('.delete-moment-btn')) {\n                const confirmed = await this.dialogManager.confirm('确定要删除这条朋友圈吗？\\n此操作也会删除相关的点赞和评论。', '删除朋友圈');\n                if (confirmed) {\n                    // momentId是序列ID，需要找到对应的实际朋友圈条目\n                    const momentPostLogIndices = [];\n                    this.blmxManager.logEntries.forEach((entry, index) => {\n                        if ('key' in entry && entry.key.includes('_MOMENT')) {\n                            momentPostLogIndices.push(index);\n                        }\n                    });\n                    const momentSequenceId = parseInt(momentId, 10);\n                    const actualMomentIndex = momentPostLogIndices[momentSequenceId];\n                    console.log(`[BLMX] 删除朋友圈 - 序列ID: ${momentSequenceId}, 实际索引: ${actualMomentIndex}, 朋友圈索引列表:`, momentPostLogIndices);\n                    if (actualMomentIndex !== undefined && actualMomentIndex >= 0) {\n                        // 先收集所有需要删除的条目索引（从后往前删除避免索引变化）\n                        const indicesToDelete = [actualMomentIndex];\n                        // 找到相关的点赞和评论索引\n                        this.blmxManager.logEntries.forEach((entry, index) => {\n                            if ('key' in entry &&\n                                (entry.key === 'USER_LIKE' || entry.key === 'USER_COMMENT') &&\n                                'data' in entry &&\n                                'target_post_id' in entry.data &&\n                                entry.data.target_post_id === momentSequenceId) {\n                                indicesToDelete.push(index);\n                            }\n                        });\n                        // 按索引从大到小排序，从后往前删除\n                        indicesToDelete.sort((a, b) => b - a);\n                        for (const index of indicesToDelete) {\n                            this.blmxManager.logEntries.splice(index, 1);\n                        }\n                        // 保存更新后的日志\n                        this.blmxManager.persistLogToStorage().then(() => {\n                            // 重绘朋友圈界面\n                            this.options.renderMomentsFeed();\n                        });\n                    }\n                }\n            }\n            else if (target.closest('.comment-button')) {\n                // 处理评论/点赞按钮\n                const result = await this.dialogManager.showCommentDialog();\n                if (result) {\n                    if (result.type === 'like') {\n                        // 添加点赞\n                        const likeId = `like-${Date.now()}-${Math.random().toString(36).substring(2, 10)}`;\n                        const likeEntry = {\n                            key: 'USER_LIKE',\n                            id: likeId,\n                            data: { target_post_id: parseInt(momentId, 10) },\n                        };\n                        this.blmxManager.addEntry(likeEntry);\n                        console.log(`[BLMX] 用户点赞朋友圈，ID: ${momentId}`);\n                    }\n                    else if (result.type === 'comment' && result.content) {\n                        // 添加评论\n                        const commentId = `comment-${Date.now()}-${Math.random().toString(36).substring(2, 10)}`;\n                        const commentEntry = {\n                            key: 'USER_COMMENT',\n                            id: commentId,\n                            data: { text: result.content, target_post_id: parseInt(momentId, 10) },\n                        };\n                        this.blmxManager.addEntry(commentEntry);\n                        console.log(`[BLMX] 用户评论朋友圈，ID: ${momentId}, 内容: ${result.content}`);\n                    }\n                    // 更新界面和状态\n                    this.options.renderMomentsFeed();\n                    this.setHasPendingNotifications(true);\n                    this.options.updateFooterButtonsState();\n                    // 持久化数据\n                    this.blmxManager.persistLogToStorage();\n                }\n            }\n        });\n        $(document.body).on('click', e => {\n            const target = $(e.target)[0];\n            if (target.matches('.message-avatar')) {\n                const row = target.closest('.message-row');\n                if (row) {\n                    const avatarType = row.classList.contains('me') ? 'user' : 'char';\n                    this.appController.updateAvatar(avatarType);\n                }\n            }\n        });\n        $('#contact-name-header').on('click', () => {\n            this.appController.updateCharRemark();\n        });\n        $('#moments-user-name').on('click', () => {\n            this.appController.updateUserName();\n        });\n        $('#moments-user-avatar').on('click', () => {\n            this.appController.updateSignature();\n        });\n        $('#moments-cover-photo').on('click', () => {\n            this.appController.updateCoverPhoto();\n        });\n        const $wechatBody = $('.wechat-body');\n        // 使用jQuery的on方法，不使用capture参数\n        $wechatBody.on('click', async (e) => {\n            const $wechatView = $('#wechat-view');\n            if (!$wechatView.hasClass('delete-mode')) {\n                return;\n            }\n            // 首先检查是否有data-log-index属性\n            const $targetRow = $(e.target).closest('[data-log-index]');\n            if ($targetRow.length) {\n                e.preventDefault();\n                e.stopPropagation();\n                const indexToDelete = parseInt($targetRow.data('logIndex'), 10);\n                const previewText = $targetRow.text().trim().replace(/\\s+/g, ' ').substring(0, 50);\n                const confirmed = await this.dialogManager.confirm(`确定要删除这条记录吗？\\n\\n预览: \"${previewText}...\"`, '删除记录');\n                if (confirmed) {\n                    this.blmxManager.logEntries.splice(indexToDelete, 1);\n                    try {\n                        await this.blmxManager.persistLogToStorage();\n                        this.options.renderChatHistory();\n                        this.options.renderMomentsFeed();\n                    }\n                    catch (error) {\n                        console.error('[BLMX] 删除记录时保存失败:', error);\n                        // 显示用户友好的错误信息\n                        try {\n                            const dialogManager = _dialog_manager__WEBPACK_IMPORTED_MODULE_0__.DialogManager.getInstance();\n                            await dialogManager.alert('删除失败，请重试', '操作失败');\n                        }\n                        catch {\n                            // 如果自定义对话框也失败，使用console.error而不是alert\n                            console.error('删除失败，请重试');\n                        }\n                    }\n                }\n                return;\n            }\n            // 如果没有data-log-index属性，检查是否有data-message-id属性\n            const $messageRow = $(e.target).closest('[data-message-id]');\n            if ($messageRow.length) {\n                e.preventDefault();\n                e.stopPropagation();\n                const messageId = $messageRow.data('messageId');\n                const previewText = $messageRow.text().trim().replace(/\\s+/g, ' ').substring(0, 50);\n                const confirmed = await this.dialogManager.confirm(`确定要删除这条消息吗？\\n\\n预览: \"${previewText}...\"`, '删除消息');\n                if (confirmed) {\n                    // 通过messageId查找对应的日志条目索引\n                    const indexToDelete = this.blmxManager.logEntries.findIndex(entry => 'id' in entry && entry.id === messageId);\n                    if (indexToDelete !== -1) {\n                        this.blmxManager.logEntries.splice(indexToDelete, 1);\n                        this.blmxManager.persistLogToStorage().then(() => {\n                            this.options.renderChatHistory();\n                            this.options.renderMomentsFeed();\n                        });\n                    }\n                    else {\n                        // 如果找不到对应的日志条目，直接从DOM中移除该元素\n                        $messageRow.remove();\n                        await this.dialogManager.alert('无法找到对应的日志条目，已从界面移除该消息', '错误');\n                    }\n                }\n            }\n        });\n        $('#change-chat-wallpaper-btn').on('click', e => {\n            e.preventDefault();\n            this.appController.changeWallpaper('chat');\n        });\n        $('#change-home-wallpaper-btn').on('click', e => {\n            e.preventDefault();\n            this.appController.changeWallpaper('home');\n        });\n        $('#change-settings-wallpaper-btn').on('click', e => {\n            e.preventDefault();\n            this.appController.changeWallpaper('settings');\n        });\n        $('#show-last-ai-response-btn').on('click', async (e) => {\n            e.preventDefault();\n            const response = this.appController.getLatestAiRawResponse();\n            await this.dialogManager.showScrollableText(response || '暂无AI回复内容', 'AI原始回复', '关闭');\n        });\n        $('#show-last-sent-prompt-btn').on('click', async (e) => {\n            e.preventDefault();\n            const prompt = this.appController.getLatestSentPrompt();\n            await this.dialogManager.showScrollableText(prompt || '暂无发送的提示内容', '发送的提示', '关闭');\n        });\n        // 灵动岛全屏功能\n        $('.dynamic-island').on('click', async () => {\n            try {\n                if (!document.fullscreenElement) {\n                    // 进入全屏\n                    await document.documentElement.requestFullscreen();\n                }\n                else {\n                    // 退出全屏\n                    await document.exitFullscreen();\n                }\n            }\n            catch (error) {\n                console.warn('[BLMX] 全屏功能不支持或被阻止:', error);\n                await this.dialogManager.alert('您的浏览器不支持全屏功能或被阻止', '全屏功能');\n            }\n        });\n    }\n    renderPlusFeatures() {\n        const $plusGrid = $('#plus-grid');\n        if (!$plusGrid.length)\n            return;\n        const PLUS_FEATURES = [\n            {\n                label: '相册',\n                icon: 'fas fa-images',\n                action: async () => {\n                    const desc = await this.dialogManager.prompt('请输入图片描述:', '', '添加图片');\n                    if (desc) {\n                        this.options.stageAndDisplayEntry({\n                            type: 'image',\n                            sender: 'me',\n                            content: { type: 'desc', value: desc },\n                            id: `msg-${Date.now()}`,\n                        });\n                        this.options.togglePanel(null);\n                    }\n                },\n            },\n            {\n                label: '拍摄',\n                icon: 'fas fa-camera',\n                action: async () => {\n                    const currentDate = window.currentGameDate || new Date();\n                    const dateString = `${currentDate.getFullYear()}-${(currentDate.getMonth() + 1)\n                        .toString()\n                        .padStart(2, '0')}-${currentDate.getDate().toString().padStart(2, '0')}`;\n                    const timeString = `${currentDate.getHours().toString().padStart(2, '0')}:${currentDate\n                        .getMinutes()\n                        .toString()\n                        .padStart(2, '0')}`;\n                    // 使用综合时间跳跃对话框\n                    const timeJumpData = await this.dialogManager.showTimeJumpDialog(`${dateString} ${timeString}`);\n                    if (!timeJumpData)\n                        return;\n                    const eventData = {\n                        date: timeJumpData.date,\n                        time: timeJumpData.time,\n                        description: timeJumpData.description,\n                    };\n                    this.options.stageAndDisplayEntry({\n                        type: 'event',\n                        sender: 'me',\n                        content: eventData,\n                        id: `event-${Date.now()}`,\n                    });\n                    this.options.togglePanel(null);\n                },\n            },\n            {\n                label: '视频通话',\n                icon: 'fas fa-video',\n                action: async () => await this.dialogManager.alert('本同层手机只【免费发布于discord的尾巴镇社区和旅程社区，作者暴力美学，点击链接即可免费获取https://discord.com/channels/1379304008157499423/1388180976873766973。https://discord.com/channels/1291925535324110879/1388182155707814009', '关于作者'),\n            },\n            {\n                label: '位置',\n                icon: 'fas fa-map-marker-alt',\n                action: async () => {\n                    const loc = await this.dialogManager.prompt('请输入位置:', '', '发送位置');\n                    if (loc)\n                        this.options.stageAndDisplayEntry({\n                            type: 'location',\n                            sender: 'me',\n                            content: loc,\n                            id: `msg-${Date.now()}`,\n                        });\n                    this.options.togglePanel(null);\n                },\n            },\n            {\n                label: '红包',\n                icon: 'fas fa-envelope',\n                action: async () => {\n                    const result = await this.dialogManager.showRedPacketDialog();\n                    if (result) {\n                        const giftData = {\n                            name: '红包',\n                            price: result.amount,\n                            note: result.note,\n                            status: 'sent',\n                        };\n                        this.options.stageAndDisplayEntry({\n                            type: 'gift',\n                            sender: 'me',\n                            content: (0,_utils__WEBPACK_IMPORTED_MODULE_1__.safeJsonStringify)(giftData),\n                            data: giftData,\n                            id: `msg-${Date.now()}`,\n                        });\n                        this.options.togglePanel(null);\n                    }\n                },\n            },\n            {\n                label: '转账',\n                icon: 'fas fa-money-bill-wave',\n                action: async () => {\n                    const result = await this.dialogManager.showTransferDialog();\n                    if (result) {\n                        const transferData = {\n                            amount: result.amount,\n                            note: result.note || ' ',\n                            status: 'sent',\n                        };\n                        this.options.stageAndDisplayEntry({\n                            type: 'transfer',\n                            sender: 'me',\n                            content: (0,_utils__WEBPACK_IMPORTED_MODULE_1__.safeJsonStringify)(transferData),\n                            data: transferData,\n                            id: `msg-${Date.now()}`,\n                        });\n                        this.options.togglePanel(null);\n                    }\n                },\n            },\n            {\n                label: '文件',\n                icon: 'fas fa-file-alt',\n                action: async () => {\n                    const fileName = await this.dialogManager.prompt('请输入文件名:', '', '发送文件');\n                    if (fileName)\n                        this.options.stageAndDisplayEntry({\n                            type: 'file',\n                            sender: 'me',\n                            content: fileName,\n                            id: `msg-${Date.now()}`,\n                        });\n                    this.options.togglePanel(null);\n                },\n            },\n            {\n                label: '礼物',\n                icon: 'fas fa-gift',\n                action: async () => {\n                    const result = await this.dialogManager.showGiftDialog();\n                    if (result) {\n                        const giftData = {\n                            name: result.name,\n                            price: result.price,\n                            status: 'sent',\n                        };\n                        this.options.stageAndDisplayEntry({\n                            type: 'gift',\n                            sender: 'me',\n                            content: (0,_utils__WEBPACK_IMPORTED_MODULE_1__.safeJsonStringify)(giftData),\n                            data: giftData,\n                            id: `msg-${Date.now()}`,\n                        });\n                        this.options.togglePanel(null);\n                    }\n                },\n            },\n        ];\n        // 确保uiRenderer存在且已经初始化\n        if (this.uiRenderer) {\n            // 直接使用DOM元素而不是jQuery对象\n            this.uiRenderer.renderFeatureGrid($plusGrid[0], PLUS_FEATURES, {\n                onToggleDeleteMode: () => { },\n                onAddStickers: () => { },\n            });\n        }\n        else {\n            console.error('[BLMX] UIRenderer is not initialized');\n        }\n    }\n    renderStickerFeatures() {\n        const $stickerGrid = $('#sticker-grid');\n        if (!$stickerGrid.length)\n            return;\n        // 定义默认表情包\n        const defaultGlobalStickers = [{ label: '好的', url: 'https://files.catbox.moe/3j0tpc.jpeg' }];\n        // 读取全局表情包\n        const GLOBAL_STICKER_STORAGE_KEY = 'blmx_wechat_stickers_global';\n        const customStickers = _utils__WEBPACK_IMPORTED_MODULE_1__.SafeStorage.getItem(GLOBAL_STICKER_STORAGE_KEY, []) || [];\n        const allStickers = [...defaultGlobalStickers, ...customStickers];\n        // 创建表情包功能\n        const features = allStickers.map(s => ({\n            label: s.label,\n            icon: s.url,\n            isDefault: defaultGlobalStickers.some(ds => ds.label === s.label),\n            action: () => {\n                this.options.stageAndDisplayEntry({\n                    type: 'sticker',\n                    sender: 'me',\n                    content: s.label,\n                    id: `msg-${Date.now()}`,\n                });\n                this.options.togglePanel(null);\n            },\n        }));\n        // 添加\"表情管理\"按钮\n        features.unshift({\n            label: '表情管理',\n            icon: 'fas fa-cog', // 将图标改为齿轮图标\n            isAddBtn: true,\n            isDefault: false, // 添加isDefault属性\n            action: () => {\n                this.showStickerManager();\n            },\n        });\n        // 确保uiRenderer存在且已经初始化\n        if (this.uiRenderer) {\n            // 直接使用DOM元素而不是jQuery对象\n            this.uiRenderer.renderFeatureGrid($stickerGrid[0], features, {\n                onToggleDeleteMode: () => this.showStickerManager(),\n                onAddStickers: () => this.showStickerManager(),\n            });\n        }\n        else {\n            console.error('[BLMX] UIRenderer is not initialized');\n        }\n    }\n    // 表情包管理界面\n    showStickerManager() {\n        // 创建模态框\n        const modal = document.createElement('div');\n        modal.className = 'sticker-manager-modal';\n        // 创建内容容器\n        const container = document.createElement('div');\n        container.className = 'sticker-manager-container';\n        // 使用innerHTML创建完整结构，包含多标签页\n        container.innerHTML = `\n      <h2>表情包管理</h2>\n      <div class=\"sticker-manager-tabs\">\n        <div class=\"tab-button active\" data-tab=\"add-sticker\">添加表情</div>\n        <div class=\"tab-button\" data-tab=\"batch-add\">批量添加</div>\n        <div class=\"tab-button\" data-tab=\"delete-manage\">删除管理</div>\n      </div>\n      <div class=\"sticker-manager-content\">\n        \x3c!-- 添加单个表情标签页 --\x3e\n        <div class=\"tab-content active\" data-tab=\"add-sticker\">\n          <div class=\"add-sticker-section\">\n            <div class=\"add-sticker-form\">\n              <div class=\"form-group\">\n                <label for=\"sticker-label\">表情包名称</label>\n                <input type=\"text\" id=\"sticker-label\" placeholder=\"表情描述/名称\">\n              </div>\n              <div class=\"form-group\">\n                <label for=\"sticker-url\">表情包URL</label>\n                <input type=\"url\" id=\"sticker-url\" placeholder=\"表情图片URL链接\">\n              </div>\n              <div class=\"preview-container\">\n                <div class=\"preview-label\">预览</div>\n                <img id=\"preview-img\" class=\"preview-img\" style=\"display: none;\">\n              </div>\n              <button class=\"add-sticker-btn\">添加表情包</button>\n            </div>\n          </div>\n        </div>\n\n        \x3c!-- 批量添加标签页 --\x3e\n        <div class=\"tab-content\" data-tab=\"batch-add\">\n          <div class=\"batch-add-section\">\n            <div class=\"batch-instructions\">\n              <p>批量添加格式说明：</p>\n              <ul>\n                <li>每个表情包格式：<strong>表情名称http://图片链接</strong></li>\n                <li>多个表情包用<strong>英文逗号</strong>分隔</li>\n                <li>也支持 <strong>表情名称=http://图片链接</strong> 格式</li>\n                <li>示例：<code>笑脸https://example.com/smile.jpg,哭脸https://example.com/cry.jpg</code></li>\n              </ul>\n            </div>\n            <div class=\"form-group\">\n              <label for=\"batch-textarea\">批量表情包数据</label>\n              <textarea id=\"batch-textarea\" placeholder=\"请按照上述格式输入多个表情包...\"></textarea>\n            </div>\n            <button class=\"batch-add-btn\">批量添加表情包</button>\n          </div>\n        </div>\n\n        \x3c!-- 删除管理标签页 --\x3e\n        <div class=\"tab-content\" data-tab=\"delete-manage\">\n          <div class=\"delete-manage-section\">\n            <div class=\"control-bar\">\n              <div class=\"selection-controls\">\n                <button class=\"select-all-btn\">全选</button>\n                <button class=\"deselect-all-btn\">取消选择</button>\n              </div>\n              <button class=\"delete-selected-btn\">删除选中</button>\n            </div>\n            <div class=\"sticker-list-container\">\n              <div class=\"sticker-grid\" id=\"delete-sticker-grid\">\n                \x3c!-- 表情包列表将在这里动态生成 --\x3e\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n      <div class=\"sticker-manager-footer\">\n        <button class=\"dialog-button\">关闭</button>\n      </div>\n    `;\n        // 获取DOM元素\n        const tabButtons = container.querySelectorAll('.tab-button');\n        const tabContents = container.querySelectorAll('.tab-content');\n        const closeBtn = container.querySelector('.dialog-button');\n        // 添加表情相关元素\n        const labelInput = container.querySelector('#sticker-label');\n        const urlInput = container.querySelector('#sticker-url');\n        const previewImg = container.querySelector('#preview-img');\n        const addStickerBtn = container.querySelector('.add-sticker-btn');\n        // 批量添加相关元素\n        const batchTextarea = container.querySelector('#batch-textarea');\n        const batchAddBtn = container.querySelector('.batch-add-btn');\n        // 删除管理相关元素\n        const selectAllBtn = container.querySelector('.select-all-btn');\n        const deselectAllBtn = container.querySelector('.deselect-all-btn');\n        const deleteSelectedBtn = container.querySelector('.delete-selected-btn');\n        const deleteStickerGrid = container.querySelector('#delete-sticker-grid');\n        // 标签页切换功能\n        tabButtons.forEach(button => {\n            button.addEventListener('click', () => {\n                const targetTab = button.dataset.tab;\n                // 移除所有活动状态\n                tabButtons.forEach(btn => btn.classList.remove('active'));\n                tabContents.forEach(content => content.classList.remove('active'));\n                // 设置当前标签为活动状态\n                button.classList.add('active');\n                const targetContent = container.querySelector(`.tab-content[data-tab=\"${targetTab}\"]`);\n                if (targetContent) {\n                    targetContent.classList.add('active');\n                }\n                // 如果切换到删除管理标签页，渲染表情包列表\n                if (targetTab === 'delete-manage') {\n                    renderDeleteStickerList();\n                }\n            });\n        });\n        // URL输入预览功能\n        urlInput.addEventListener('input', () => {\n            if (urlInput.value.trim()) {\n                previewImg.src = urlInput.value.trim();\n                previewImg.style.display = 'block';\n            }\n            else {\n                previewImg.style.display = 'none';\n            }\n        });\n        // 添加单个表情包\n        addStickerBtn.addEventListener('click', () => {\n            const label = labelInput.value.trim();\n            const url = urlInput.value.trim();\n            if (!label || !url) {\n                alert('请输入表情名称和URL');\n                return;\n            }\n            const GLOBAL_STICKER_STORAGE_KEY = 'blmx_wechat_stickers_global';\n            const existingStickers = _utils__WEBPACK_IMPORTED_MODULE_1__.SafeStorage.getItem(GLOBAL_STICKER_STORAGE_KEY, []) || [];\n            const newSticker = { label, url };\n            existingStickers.push(newSticker);\n            _utils__WEBPACK_IMPORTED_MODULE_1__.SafeStorage.setItem(GLOBAL_STICKER_STORAGE_KEY, existingStickers);\n            alert('表情包添加成功！');\n            // 清空输入框\n            labelInput.value = '';\n            urlInput.value = '';\n            previewImg.style.display = 'none';\n        });\n        // 批量添加表情包\n        batchAddBtn.addEventListener('click', () => {\n            const input = batchTextarea.value.trim();\n            if (!input) {\n                alert('请输入表情包数据');\n                return;\n            }\n            const GLOBAL_STICKER_STORAGE_KEY = 'blmx_wechat_stickers_global';\n            const pairs = input.split(',');\n            const newStickers = [];\n            for (const pair of pairs) {\n                // 查找URL部分的起始位置 - 通常是http或https开头\n                const urlStartIndex = pair.indexOf('http');\n                if (urlStartIndex > 0) {\n                    const label = pair.substring(0, urlStartIndex).trim();\n                    const url = pair.substring(urlStartIndex).trim();\n                    if (label && url) {\n                        newStickers.push({ label, url });\n                    }\n                }\n                else if (pair.includes('=')) {\n                    // 支持label=url格式\n                    const [label, url] = pair.split('=').map(part => part.trim());\n                    if (label && url) {\n                        newStickers.push({ label, url });\n                    }\n                }\n            }\n            if (newStickers.length > 0) {\n                const existingStickers = _utils__WEBPACK_IMPORTED_MODULE_1__.SafeStorage.getItem(GLOBAL_STICKER_STORAGE_KEY, []) || [];\n                const updatedStickers = [...existingStickers, ...newStickers];\n                _utils__WEBPACK_IMPORTED_MODULE_1__.SafeStorage.setItem(GLOBAL_STICKER_STORAGE_KEY, updatedStickers);\n                alert(`${newStickers.length} 个表情包已添加！`);\n                batchTextarea.value = '';\n            }\n            else {\n                alert('未找到有效的表情包格式。请按照上方的格式说明输入。');\n            }\n        });\n        // 渲染删除管理的表情包列表\n        const renderDeleteStickerList = () => {\n            const GLOBAL_STICKER_STORAGE_KEY = 'blmx_wechat_stickers_global';\n            const stickers = _utils__WEBPACK_IMPORTED_MODULE_1__.SafeStorage.getItem(GLOBAL_STICKER_STORAGE_KEY, []) || [];\n            deleteStickerGrid.innerHTML = '';\n            if (stickers.length === 0) {\n                const noStickersMsg = document.createElement('div');\n                noStickersMsg.textContent = '没有表情包，请点击\"添加表情\"标签添加。';\n                noStickersMsg.className = 'no-stickers-msg';\n                deleteStickerGrid.appendChild(noStickersMsg);\n                return;\n            }\n            stickers.forEach((sticker, index) => {\n                const stickerItem = document.createElement('div');\n                stickerItem.className = 'sticker-item';\n                // 创建隐藏的原生checkbox\n                const checkbox = document.createElement('input');\n                checkbox.type = 'checkbox';\n                checkbox.className = 'sticker-checkbox';\n                checkbox.dataset.index = index.toString();\n                // 创建可见的checkbox按钮\n                const checkboxButton = document.createElement('div');\n                checkboxButton.className = 'sticker-checkbox-button';\n                // 创建其他元素\n                const stickerImg = document.createElement('img');\n                stickerImg.src = sticker.url;\n                stickerImg.alt = sticker.label;\n                stickerImg.className = 'sticker-preview';\n                const stickerLabel = document.createElement('div');\n                stickerLabel.className = 'sticker-label';\n                stickerLabel.textContent = sticker.label;\n                // 更新checkbox按钮状态\n                const updateCheckboxState = (checked) => {\n                    if (checked) {\n                        checkboxButton.classList.add('checked');\n                    }\n                    else {\n                        checkboxButton.classList.remove('checked');\n                    }\n                };\n                // 点击事件\n                const handleClick = (e) => {\n                    e.preventDefault();\n                    e.stopPropagation();\n                    checkbox.checked = !checkbox.checked;\n                    updateCheckboxState(checkbox.checked);\n                };\n                stickerItem.addEventListener('click', handleClick);\n                checkboxButton.addEventListener('click', handleClick);\n                // 组装元素\n                stickerItem.appendChild(checkbox);\n                stickerItem.appendChild(checkboxButton);\n                stickerItem.appendChild(stickerImg);\n                stickerItem.appendChild(stickerLabel);\n                deleteStickerGrid.appendChild(stickerItem);\n                // 设置初始状态\n                updateCheckboxState(checkbox.checked);\n            });\n        };\n        // 全选功能\n        selectAllBtn.addEventListener('click', () => {\n            const checkboxes = deleteStickerGrid.querySelectorAll('.sticker-checkbox');\n            const checkboxButtons = deleteStickerGrid.querySelectorAll('.sticker-checkbox-button');\n            checkboxes.forEach((checkbox, index) => {\n                checkbox.checked = true;\n                checkboxButtons[index]?.classList.add('checked');\n            });\n        });\n        // 取消选择功能\n        deselectAllBtn.addEventListener('click', () => {\n            const checkboxes = deleteStickerGrid.querySelectorAll('.sticker-checkbox');\n            const checkboxButtons = deleteStickerGrid.querySelectorAll('.sticker-checkbox-button');\n            checkboxes.forEach((checkbox, index) => {\n                checkbox.checked = false;\n                checkboxButtons[index]?.classList.remove('checked');\n            });\n        });\n        // 删除选中功能\n        deleteSelectedBtn.addEventListener('click', () => {\n            const checkboxes = deleteStickerGrid.querySelectorAll('.sticker-checkbox:checked');\n            if (checkboxes.length === 0) {\n                alert('请选择要删除的表情包');\n                return;\n            }\n            if (confirm(`确定要删除选中的 ${checkboxes.length} 个表情包吗？`)) {\n                const GLOBAL_STICKER_STORAGE_KEY = 'blmx_wechat_stickers_global';\n                const stickers = _utils__WEBPACK_IMPORTED_MODULE_1__.SafeStorage.getItem(GLOBAL_STICKER_STORAGE_KEY, []) || [];\n                // 获取要删除的索引（从大到小排序，避免删除时索引变化）\n                const indicesToDelete = window._.chain(checkboxes)\n                    .map((checkbox) => parseInt(checkbox.dataset.index))\n                    .sortBy()\n                    .reverse()\n                    .value();\n                // 删除选中的表情包\n                indicesToDelete.forEach((index) => {\n                    stickers.splice(index, 1);\n                });\n                _utils__WEBPACK_IMPORTED_MODULE_1__.SafeStorage.setItem(GLOBAL_STICKER_STORAGE_KEY, stickers);\n                alert(`已删除 ${checkboxes.length} 个表情包`);\n                // 重新渲染列表\n                renderDeleteStickerList();\n            }\n        });\n        // 关闭按钮事件\n        closeBtn.addEventListener('click', () => {\n            document.body.removeChild(modal);\n        });\n        // 点击遮罩层关闭\n        modal.addEventListener('click', e => {\n            if (e.target === modal) {\n                document.body.removeChild(modal);\n            }\n        });\n        modal.appendChild(container);\n        document.body.appendChild(modal);\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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S0FBSyxFQUFFLENBQUM7Z0JBRVgsV0FBVztnQkFDWCxlQUFlLENBQUMsT0FBTyxDQUFDLENBQUMsS0FBYSxFQUFFLEVBQUU7b0JBQ3hDLFFBQVEsQ0FBQyxNQUFNLENBQUMsS0FBSyxFQUFFLENBQUMsQ0FBQyxDQUFDO2dCQUM1QixDQUFDLENBQUMsQ0FBQztnQkFFSCwrQ0FBVyxDQUFDLE9BQU8sQ0FBQywwQkFBMEIsRUFBRSxRQUFRLENBQUMsQ0FBQztnQkFDMUQsS0FBSyxDQUFDLE9BQU8sVUFBVSxDQUFDLE1BQU0sT0FBTyxDQUFDLENBQUM7Z0JBRXZDLFNBQVM7Z0JBQ1QsdUJBQXVCLEVBQUUsQ0FBQztZQUM1QixDQUFDO1FBQ0gsQ0FBQyxDQUFDLENBQUM7UUFFSCxTQUFTO1FBQ1QsUUFBUSxDQUFDLGdCQUFnQixDQUFDLE9BQU8sRUFBRSxHQUFHLEVBQUU7WUFDdEMsUUFBUSxDQUFDLElBQUksQ0FBQyxXQUFXLENBQUMsS0FBSyxDQUFDLENBQUM7UUFDbkMsQ0FBQyxDQUFDLENBQUM7UUFFSCxVQUFVO1FBQ1YsS0FBSyxDQUFDLGdCQUFnQixDQUFDLE9BQU8sRUFBRSxDQUFDLENBQUMsRUFBRTtZQUNsQyxJQUFJLENBQUMsQ0FBQyxNQUFNLEtBQUssS0FBSyxFQUFFLENBQUM7Z0JBQ3ZCLFFBQVEsQ0FBQyxJQUFJLENBQUMsV0FBVyxDQUFDLEtBQUssQ0FBQyxDQUFDO1lBQ25DLENBQUM7UUFDSCxDQUFDLENBQUMsQ0FBQztRQUVILEtBQUssQ0FBQyxXQUFXLENBQUMsU0FBUyxDQUFDLENBQUM7UUFDN0IsUUFBUSxDQUFDLElBQUksQ0FBQyxXQUFXLENBQUMsS0FBSyxDQUFDLENBQUM7SUFDbkMsQ0FBQztDQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdGF2ZXJuX2hlbHBlcl90ZW1wbGF0ZS8uL3NyYy/lkIzlsYLmiYvmnLovZXZlbnQtaGFuZGxlci50cz8iXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgRGlhbG9nTWFuYWdlciB9IGZyb20gJy4vZGlhbG9nLW1hbmFnZXInO1xuaW1wb3J0IHsgQkxNWF9Qcm90b2NvbCwgQ2hhdEVudHJ5LCBMb2dFbnRyeSB9IGZyb20gJy4vc2NyaXB0JztcbmltcG9ydCB7IElBcHBDb250cm9sbGVyLCBJRXZlbnRIYW5kbGVyIH0gZnJvbSAnLi90eXBlcyc7XG5pbXBvcnQgeyBVSVJlbmRlcmVyIH0gZnJvbSAnLi91aS1yZW5kZXJlcic7XG5pbXBvcnQgeyBzYWZlSnNvblN0cmluZ2lmeSwgU2FmZVN0b3JhZ2UgfSBmcm9tICcuL3V0aWxzJztcblxuLy8g57G75Z6L5a6a5LmJXG5pbnRlcmZhY2UgRXZlbnRIYW5kbGVyT3B0aW9ucyB7XG4gIGdldERpc3BsYXlOYW1lOiAodHlwZTogJ3VzZXInIHwgJ2NoYXInKSA9PiBzdHJpbmc7XG4gIHN0YWdlQW5kRGlzcGxheUVudHJ5OiAoZW50cnk6IExvZ0VudHJ5KSA9PiB2b2lkO1xuICB0cmlnZ2VyQWlSZXNwb25zZTogKGltbWVkaWF0ZT86IGJvb2xlYW4pID0+IFByb21pc2U8dm9pZD47XG4gIHVwZGF0ZUZvb3RlckJ1dHRvbnNTdGF0ZTogKCkgPT4gdm9pZDtcbiAgcmVuZGVyQ2hhdEhpc3Rvcnk6ICgpID0+IHZvaWQ7XG4gIHJlbmRlck1vbWVudHNGZWVkOiAoKSA9PiB2b2lkO1xuICB0b2dnbGVQYW5lbDogKHBhbmVsTmFtZTogc3RyaW5nIHwgbnVsbCkgPT4gdm9pZDtcbiAgZmluZFN0aWNrZXJVcmxCeU5hbWU6IChuYW1lOiBzdHJpbmcpID0+IHN0cmluZyB8IHVuZGVmaW5lZDtcbn1cblxuLy8g5LqL5Lu25aSE55CG5Zmo57G7XG5leHBvcnQgY2xhc3MgRXZlbnRIYW5kbGVyIGltcGxlbWVudHMgSUV2ZW50SGFuZGxlciB7XG4gIHByaXZhdGUgd2VjaGF0SW5wdXQ6IEhUTUxJbnB1dEVsZW1lbnQ7XG4gIHByaXZhdGUgc2VuZEJ0bjogSFRNTEVsZW1lbnQ7XG4gIHByaXZhdGUgcGx1c0J0bjogSFRNTEVsZW1lbnQ7XG4gIHByaXZhdGUgdWlSZW5kZXJlcjogVUlSZW5kZXJlciB8IG51bGw7XG4gIHByaXZhdGUgb3B0aW9uczogRXZlbnRIYW5kbGVyT3B0aW9ucztcbiAgcHJpdmF0ZSBibG14TWFuYWdlcjogQkxNWF9Qcm90b2NvbDtcbiAgcHJpdmF0ZSBhcHBDb250cm9sbGVyOiBJQXBwQ29udHJvbGxlcjtcbiAgcHJpdmF0ZSBoYXNQZW5kaW5nTm90aWZpY2F0aW9uczogYm9vbGVhbiA9IGZhbHNlO1xuICBwcml2YXRlIGRpYWxvZ01hbmFnZXI6IERpYWxvZ01hbmFnZXIgPSBEaWFsb2dNYW5hZ2VyLmdldEluc3RhbmNlKCk7XG5cbiAgLy8g5re75YqgZ2V0dGVy5pa55rOVXG4gIGdldCBoYXNOb3RpZmljYXRpb25zKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLmhhc1BlbmRpbmdOb3RpZmljYXRpb25zO1xuICB9XG5cbiAgLy8g6K6+572uVUlSZW5kZXJlcuW8leeUqFxuICBzZXRVSVJlbmRlcmVyKHVpUmVuZGVyZXI6IFVJUmVuZGVyZXIpOiB2b2lkIHtcbiAgICB0aGlzLnVpUmVuZGVyZXIgPSB1aVJlbmRlcmVyO1xuICB9XG5cbiAgY29uc3RydWN0b3IoXG4gICAgaW5wdXRTZWxlY3Rvcjogc3RyaW5nLFxuICAgIHNlbmRCdG5TZWxlY3Rvcjogc3RyaW5nLFxuICAgIHBsdXNCdG5TZWxlY3Rvcjogc3RyaW5nLFxuICAgIGJsbXhNYW5hZ2VyOiBCTE1YX1Byb3RvY29sLFxuICAgIGFwcENvbnRyb2xsZXI6IElBcHBDb250cm9sbGVyLFxuICAgIHVpUmVuZGVyZXI6IFVJUmVuZGVyZXIgfCBudWxsLFxuICAgIG9wdGlvbnM6IEV2ZW50SGFuZGxlck9wdGlvbnMsXG4gICkge1xuICAgIHRoaXMud2VjaGF0SW5wdXQgPSAkKGlucHV0U2VsZWN0b3IpWzBdIGFzIEhUTUxJbnB1dEVsZW1lbnQ7XG4gICAgdGhpcy5zZW5kQnRuID0gJChzZW5kQnRuU2VsZWN0b3IpWzBdIGFzIEhUTUxFbGVtZW50O1xuICAgIHRoaXMucGx1c0J0biA9ICQocGx1c0J0blNlbGVjdG9yKVswXSBhcyBIVE1MRWxlbWVudDtcblxuICAgIGlmICghdGhpcy53ZWNoYXRJbnB1dCB8fCAhdGhpcy5zZW5kQnRuIHx8ICF0aGlzLnBsdXNCdG4pIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignT25lIG9yIG1vcmUgcmVxdWlyZWQgZWxlbWVudHMgbm90IGZvdW5kJyk7XG4gICAgfVxuXG4gICAgdGhpcy5ibG14TWFuYWdlciA9IGJsbXhNYW5hZ2VyO1xuICAgIHRoaXMub3B0aW9ucyA9IG9wdGlvbnM7XG4gICAgdGhpcy5hcHBDb250cm9sbGVyID0gYXBwQ29udHJvbGxlcjtcbiAgICB0aGlzLnVpUmVuZGVyZXIgPSB1aVJlbmRlcmVyO1xuXG4gICAgdGhpcy5zZXR1cEV2ZW50TGlzdGVuZXJzKCk7XG4gIH1cblxuICAvLyDorr7nva7mmK/lkKbmnInlvoXlpITnkIbnmoTpgJrnn6VcbiAgc2V0SGFzUGVuZGluZ05vdGlmaWNhdGlvbnModmFsdWU6IGJvb2xlYW4pOiB2b2lkIHtcbiAgICB0aGlzLmhhc1BlbmRpbmdOb3RpZmljYXRpb25zID0gdmFsdWU7XG4gICAgdGhpcy5vcHRpb25zLnVwZGF0ZUZvb3RlckJ1dHRvbnNTdGF0ZSgpO1xuICB9XG5cbiAgLy8g5re75Yqg6ZW/5oyJ55uR5ZCs5ZmoXG4gIGFkZExvbmdQcmVzc0xpc3RlbmVyKFxuICAgIGVsZW1lbnQ6IEhUTUxFbGVtZW50LFxuICAgIGNhbGxiYWNrOiAoKSA9PiB2b2lkLFxuICAgIG9wdGlvbnM6IHsgZHVyYXRpb246IG51bWJlcjsgcHJldmVudERlZmF1bHQ6IGJvb2xlYW4gfSA9IHsgZHVyYXRpb246IDYwMCwgcHJldmVudERlZmF1bHQ6IHRydWUgfSxcbiAgKTogdm9pZCB7XG4gICAgbGV0IHRpbWVyOiBudW1iZXI7XG4gICAgbGV0IHN0YXJ0WDogbnVtYmVyLCBzdGFydFk6IG51bWJlcjtcblxuICAgIGNvbnN0IG9uU3RhcnQgPSAoZTogUG9pbnRlckV2ZW50KSA9PiB7XG4gICAgICBpZiAoZS50eXBlID09PSAnbW91c2Vkb3duJyAmJiBlLmJ1dHRvbiAhPT0gMCkgcmV0dXJuO1xuICAgICAgc3RhcnRYID0gZS5jbGllbnRYO1xuICAgICAgc3RhcnRZID0gZS5jbGllbnRZO1xuICAgICAgaWYgKG9wdGlvbnMucHJldmVudERlZmF1bHQpIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgIGNsZWFyVGltZW91dCh0aW1lcik7XG4gICAgICB0aW1lciA9IHdpbmRvdy5zZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgdGltZXIgPSAwO1xuICAgICAgICBjYWxsYmFjaygpO1xuICAgICAgfSwgb3B0aW9ucy5kdXJhdGlvbik7XG4gICAgfTtcblxuICAgIGNvbnN0IG9uTW92ZSA9IChlOiBQb2ludGVyRXZlbnQpID0+IHtcbiAgICAgIGlmICghdGltZXIpIHJldHVybjtcbiAgICAgIGNvbnN0IG1vdmVYID0gZS5jbGllbnRYO1xuICAgICAgY29uc3QgbW92ZVkgPSBlLmNsaWVudFk7XG4gICAgICBpZiAoTWF0aC5hYnMobW92ZVggLSBzdGFydFgpID4gMTAgfHwgTWF0aC5hYnMobW92ZVkgLSBzdGFydFkpID4gMTApIHtcbiAgICAgICAgY2xlYXJUaW1lb3V0KHRpbWVyKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgY29uc3Qgb25FbmQgPSAoKSA9PiBjbGVhclRpbWVvdXQodGltZXIpO1xuXG4gICAgZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdwb2ludGVyZG93bicsIG9uU3RhcnQpO1xuICAgIGVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigncG9pbnRlcm1vdmUnLCBvbk1vdmUpO1xuICAgIGVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigncG9pbnRlcnVwJywgb25FbmQpO1xuICAgIGVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigncG9pbnRlcmxlYXZlJywgb25FbmQpO1xuXG4gICAgaWYgKG9wdGlvbnMucHJldmVudERlZmF1bHQpIHtcbiAgICAgIGVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY29udGV4dG1lbnUnLCBlID0+IGUucHJldmVudERlZmF1bHQoKSk7XG4gICAgfVxuICB9XG5cbiAgLy8g5o+Q56S655So5oi36L6T5YWl5pel5pyf5ZKM5pe26Ze0XG4gIGFzeW5jIHByb21wdEZvckRhdGVUaW1lKGRlZmF1bHRUZXh0OiBzdHJpbmcpOiBQcm9taXNlPFtzdHJpbmcsIHN0cmluZ10gfCBudWxsPiB7XG4gICAgY29uc3QgZGF0ZVRpbWVJbnB1dCA9IGF3YWl0IHRoaXMuZGlhbG9nTWFuYWdlci5wcm9tcHQoXG4gICAgICAn6K+36L6T5YWl5pel5pyf5ZKM5pe26Ze0JyxcbiAgICAgIGRlZmF1bHRUZXh0LFxuICAgICAgJ+aXpeacn+aXtumXtOiuvue9ricsXG4gICAgICAn56Gu5a6aJyxcbiAgICAgICflj5bmtognLFxuICAgICAgJ3RleHQnLFxuICAgICAgJ+agvOW8j1lZWVktTU0tREQgSEg6bW0nLFxuICAgICk7XG5cbiAgICBpZiAoIWRhdGVUaW1lSW5wdXQgfHwgIS9eXFxkezR9LVxcZHsyfS1cXGR7Mn0gXFxkezJ9OlxcZHsyfSQvLnRlc3QoZGF0ZVRpbWVJbnB1dCkpIHtcbiAgICAgIGlmIChkYXRlVGltZUlucHV0KSBhd2FpdCB0aGlzLmRpYWxvZ01hbmFnZXIuYWxlcnQoJ+agvOW8j+mUmeivr++8jOivt+i+k+WFpVlZWVktTU0tREQgSEg6bW0g5qC85byP44CCJywgJ+agvOW8j+mUmeivrycpO1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgY29uc3QgW25ld0RhdGUsIG5ld1RpbWVdID0gZGF0ZVRpbWVJbnB1dC5zcGxpdCgnICcpO1xuICAgIGNvbnN0IHBhcnNlZERhdGUgPSBuZXcgRGF0ZShkYXRlVGltZUlucHV0LnJlcGxhY2UoJyAnLCAnVCcpKTtcblxuICAgIGlmIChpc05hTihwYXJzZWREYXRlLmdldFRpbWUoKSkpIHtcbiAgICAgIGF3YWl0IHRoaXMuZGlhbG9nTWFuYWdlci5hbGVydCgn5peg5pWI55qE5pel5pyf5pe26Ze05qC85byP44CCJywgJ+agvOW8j+mUmeivrycpO1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgLy8g5pu05paw57O757uf5b2T5YmN5pel5pyfXG4gICAgd2luZG93LmN1cnJlbnRHYW1lRGF0ZSA9IHBhcnNlZERhdGU7XG5cbiAgICAvLyDmm7TmlrDnirbmgIHmoI/ml7bpl7RcbiAgICBjb25zdCAkdGltZUVsZW1lbnQgPSAkKCcjY3VycmVudC10aW1lJyk7XG4gICAgaWYgKCR0aW1lRWxlbWVudC5sZW5ndGgpIHtcbiAgICAgIGNvbnN0IGZvcm1hdHRlZFRpbWUgPSBgJHt3aW5kb3cuY3VycmVudEdhbWVEYXRlLmdldEhvdXJzKCkudG9TdHJpbmcoKS5wYWRTdGFydCgyLCAnMCcpfToke3dpbmRvdy5jdXJyZW50R2FtZURhdGVcbiAgICAgICAgLmdldE1pbnV0ZXMoKVxuICAgICAgICAudG9TdHJpbmcoKVxuICAgICAgICAucGFkU3RhcnQoMiwgJzAnKX1gO1xuICAgICAgJHRpbWVFbGVtZW50LnRleHQoZm9ybWF0dGVkVGltZSk7XG4gICAgfVxuXG4gICAgLy8g5Yi35paw5omA5pyJ5pe26Ze05oiz55qE5pi+56S6XG4gICAgaWYgKHRoaXMudWlSZW5kZXJlcikge1xuICAgICAgdGhpcy51aVJlbmRlcmVyLnJlZnJlc2hBbGxUaW1lc3RhbXBzKCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIFtuZXdEYXRlLCBuZXdUaW1lXSBhcyBbc3RyaW5nLCBzdHJpbmddO1xuICB9XG5cbiAgLy8g5aSE55CG5raI5oGv5pKk5ZueXG4gIGFzeW5jIGhhbmRsZU1lc3NhZ2VSZWNhbGwobWVzc2FnZUlkOiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICBjb25zdCBlbnRyeVRvUmVjYWxsID0gdGhpcy5ibG14TWFuYWdlci5sb2dFbnRyaWVzLmZpbmQoZSA9PiAnaWQnIGluIGUgJiYgZS5pZCA9PT0gbWVzc2FnZUlkKSBhc1xuICAgICAgfCBDaGF0RW50cnlcbiAgICAgIHwgdW5kZWZpbmVkO1xuXG4gICAgaWYgKGVudHJ5VG9SZWNhbGwpIHtcbiAgICAgIGNvbnN0IGN1cnJlbnREYXRlID0gd2luZG93LmN1cnJlbnRHYW1lRGF0ZSB8fCBuZXcgRGF0ZSgpO1xuICAgICAgY29uc3QgdGltZVN0cmluZyA9IGAke2N1cnJlbnREYXRlLmdldEZ1bGxZZWFyKCl9LSR7KGN1cnJlbnREYXRlLmdldE1vbnRoKCkgKyAxKVxuICAgICAgICAudG9TdHJpbmcoKVxuICAgICAgICAucGFkU3RhcnQoMiwgJzAnKX0tJHtjdXJyZW50RGF0ZS5nZXREYXRlKCkudG9TdHJpbmcoKS5wYWRTdGFydCgyLCAnMCcpfSAke2N1cnJlbnREYXRlXG4gICAgICAgIC5nZXRIb3VycygpXG4gICAgICAgIC50b1N0cmluZygpXG4gICAgICAgIC5wYWRTdGFydCgyLCAnMCcpfToke2N1cnJlbnREYXRlLmdldE1pbnV0ZXMoKS50b1N0cmluZygpLnBhZFN0YXJ0KDIsICcwJyl9YDtcblxuICAgICAgY29uc3QgZGF0ZVRpbWVSZXN1bHQgPSBhd2FpdCB0aGlzLnByb21wdEZvckRhdGVUaW1lKHRpbWVTdHJpbmcpO1xuXG4gICAgICBpZiAoZGF0ZVRpbWVSZXN1bHQgPT09IG51bGwpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBjb25maXJtZWQgPSBhd2FpdCB0aGlzLmRpYWxvZ01hbmFnZXIuY29uZmlybSgn5piv5ZCm6KaB5pKk5Zue6L+Z5p2h5raI5oGv77yfJywgJ+ehruiupOaSpOWbnicpO1xuXG4gICAgICBpZiAoY29uZmlybWVkKSB7XG4gICAgICAgIGNvbnN0IFtuZXdEYXRlLCBuZXdUaW1lXSA9IGRhdGVUaW1lUmVzdWx0O1xuICAgICAgICAvLyDmoIforrDmtojmga/kuLrlt7LmkqTlm55cbiAgICAgICAgZW50cnlUb1JlY2FsbC5yZWNhbGxlZCA9IHRydWU7XG4gICAgICAgIGVudHJ5VG9SZWNhbGwucmVjYWxsZWRfdGltZXN0YW1wID0gYCR7bmV3RGF0ZX0gJHtuZXdUaW1lfWA7XG4gICAgICAgIGVudHJ5VG9SZWNhbGwucmVjYWxsZWRfY29udGVudCA9IGVudHJ5VG9SZWNhbGwuY29udGVudDtcblxuICAgICAgICAvLyDnq4vljbPkv53lrZjmm7TmlrDlkI7nmoTml6Xlv5dcbiAgICAgICAgdGhpcy5ibG14TWFuYWdlci5wZXJzaXN0TG9nVG9TdG9yYWdlKCkudGhlbigoKSA9PiB7XG4gICAgICAgICAgLy8g5L+d5a2Y5oiQ5Yqf5ZCO77yM56uL5Y2z55So5pyA5paw55qE5pWw5o2u6YeN57uY5pW05Liq6IGK5aSp55WM6Z2iXG4gICAgICAgICAgdGhpcy5vcHRpb25zLnJlbmRlckNoYXRIaXN0b3J5KCk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIOabtOaWsOW6lemDqOaMiemSrueKtuaAgVxuICAgICAgICB0aGlzLm9wdGlvbnMudXBkYXRlRm9vdGVyQnV0dG9uc1N0YXRlKCk7XG5cbiAgICAgICAgLy8g5aaC5p6c5piv55So5oi35pKk5Zue55qE5raI5oGv77yM6K+i6Zeu5piv5ZCm6YCa6L+H5pyL5Y+L5ZyI6YCa55+lQUlcbiAgICAgICAgaWYgKGVudHJ5VG9SZWNhbGwuc2VuZGVyID09PSAnbWUnKSB7XG4gICAgICAgICAgLy8g6I635Y+W5raI5oGv5YaF5a65XG4gICAgICAgICAgY29uc3QgbWVzc2FnZUNvbnRlbnQgPVxuICAgICAgICAgICAgdHlwZW9mIGVudHJ5VG9SZWNhbGwuY29udGVudCA9PT0gJ3N0cmluZydcbiAgICAgICAgICAgICAgPyBlbnRyeVRvUmVjYWxsLmNvbnRlbnRcbiAgICAgICAgICAgICAgOiBzYWZlSnNvblN0cmluZ2lmeShlbnRyeVRvUmVjYWxsLmNvbnRlbnQpO1xuXG4gICAgICAgICAgLy8g6LCD55SoQXBwQ29udHJvbGxlcueahOmAmuefpeaWueazlVxuICAgICAgICAgIHRoaXMuYXBwQ29udHJvbGxlci5ub3RpZnlSZWNhbGxWaWFNb21lbnRzKCdVU0VSJywgbWVzc2FnZUNvbnRlbnQpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGF3YWl0IHRoaXMuZGlhbG9nTWFuYWdlci5hbGVydCgn5om+5LiN5Yiw6K+l5raI5oGv77yM5peg5rOV5pKk5Zue44CCJywgJ+mUmeivrycpO1xuICAgIH1cbiAgfVxuXG4gIC8vIOiuvue9ruS6i+S7tuebkeWQrOWZqFxuICBwcml2YXRlIHNldHVwRXZlbnRMaXN0ZW5lcnMoKTogdm9pZCB7XG4gICAgLy8g5Y+R6YCB5oyJ6ZKu54K55Ye75LqL5Lu2XG4gICAgdGhpcy5zZW5kQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgY29uc3QgdGV4dCA9IHRoaXMud2VjaGF0SW5wdXQudmFsdWUudHJpbSgpO1xuICAgICAgaWYgKHRleHQpIHtcbiAgICAgICAgdGhpcy5vcHRpb25zLnN0YWdlQW5kRGlzcGxheUVudHJ5KHtcbiAgICAgICAgICBpZDogYG1zZy0ke0RhdGUubm93KCl9JHtNYXRoLnJhbmRvbSgpfWAsXG4gICAgICAgICAgdHlwZTogJ21lc3NhZ2UnLFxuICAgICAgICAgIHNlbmRlcjogJ21lJyxcbiAgICAgICAgICBjb250ZW50OiB0ZXh0LFxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy53ZWNoYXRJbnB1dC52YWx1ZSA9ICcnO1xuICAgICAgICB0aGlzLm9wdGlvbnMudXBkYXRlRm9vdGVyQnV0dG9uc1N0YXRlKCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyDml6DorrrmmK/lkKbmnInpgJrnn6XvvIzpg73lvLrliLbop6blj5FBSeWTjeW6lFxuICAgICAgICB0aGlzLmhhc1BlbmRpbmdOb3RpZmljYXRpb25zID0gZmFsc2U7XG4gICAgICAgIHRoaXMub3B0aW9ucy50cmlnZ2VyQWlSZXNwb25zZSh0cnVlKTsgLy8g5piO56Gu5Lyg6YCSaW1tZWRpYXRlPXRydWVcbiAgICAgIH1cbiAgICB9KTtcblxuICAgICQoJyNzbWlsZS1idG4nKS5vbignY2xpY2snLCAoKSA9PiB7XG4gICAgICB0aGlzLm9wdGlvbnMudG9nZ2xlUGFuZWwoJ3N0aWNrZXInKTtcbiAgICAgIHRoaXMucmVuZGVyU3RpY2tlckZlYXR1cmVzKCk7XG4gICAgfSk7XG5cbiAgICB0aGlzLnBsdXNCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICB0aGlzLm9wdGlvbnMudG9nZ2xlUGFuZWwoJ3BsdXMnKTtcbiAgICAgIHRoaXMucmVuZGVyUGx1c0ZlYXR1cmVzKCk7XG4gICAgfSk7XG5cbiAgICAkKCcjbWljcm9waG9uZS1idG4nKS5vbignY2xpY2snLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB0aGlzLmRpYWxvZ01hbmFnZXIuc2hvd1ZvaWNlRGlhbG9nKCk7XG4gICAgICBpZiAocmVzdWx0KSB7XG4gICAgICAgIHRoaXMub3B0aW9ucy5zdGFnZUFuZERpc3BsYXlFbnRyeSh7XG4gICAgICAgICAgaWQ6IGBtc2ctJHtEYXRlLm5vdygpfSR7TWF0aC5yYW5kb20oKX1gLFxuICAgICAgICAgIHR5cGU6ICd2b2ljZScsXG4gICAgICAgICAgc2VuZGVyOiAnbWUnLFxuICAgICAgICAgIGNvbnRlbnQ6IHsgdGV4dDogcmVzdWx0LnRleHQsIGR1cmF0aW9uOiByZXN1bHQuZHVyYXRpb24gfSxcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICAvLyDovpPlhaXmoYbplK7nm5jkuovku7ZcbiAgICB0aGlzLndlY2hhdElucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCBlID0+IHtcbiAgICAgIGlmIChlLmtleSA9PT0gJ0VudGVyJyAmJiAhZS5zaGlmdEtleSkge1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIHRoaXMuc2VuZEJ0bi5jbGljaygpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgLy8g6L6T5YWl5qGG5YaF5a655Y+Y5YyW5LqL5Lu2XG4gICAgdGhpcy53ZWNoYXRJbnB1dC5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsICgpID0+IHtcbiAgICAgIHRoaXMub3B0aW9ucy51cGRhdGVGb290ZXJCdXR0b25zU3RhdGUoKTtcbiAgICB9KTtcblxuICAgIC8vIOi+k+WFpeahhuiBmueEpuS6i+S7tlxuICAgIHRoaXMud2VjaGF0SW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignZm9jdXMnLCAoKSA9PiB7XG4gICAgICB0aGlzLm9wdGlvbnMudG9nZ2xlUGFuZWwobnVsbCk7XG4gICAgfSk7XG5cbiAgICAvLyDlr7zoiKrkuovku7ZcbiAgICAkKCcjYXBwLXdlY2hhdCcpLm9uKCdjbGljaycsICgpID0+IHRoaXMuYXBwQ29udHJvbGxlci5uYXZpZ2F0ZVRvKCd3ZWNoYXQnKSk7XG4gICAgJCgnI2FwcC1zZXR0aW5ncycpLm9uKCdjbGljaycsICgpID0+IHRoaXMuYXBwQ29udHJvbGxlci5uYXZpZ2F0ZVRvKCdzZXR0aW5ncycpKTtcbiAgICAkKCcjd2VjaGF0LWJhY2stYnRuLWR1bW15Jykub24oJ2NsaWNrJywgKCkgPT4gdGhpcy5hcHBDb250cm9sbGVyLm5hdmlnYXRlVG8oJ2hvbWUnKSk7XG4gICAgJCgnI3NldHRpbmdzLWJhY2stYnRuJykub24oJ2NsaWNrJywgKCkgPT4gdGhpcy5hcHBDb250cm9sbGVyLm5hdmlnYXRlVG8oJ2hvbWUnKSk7XG4gICAgJCgnI3dlY2hhdC1vcHRpb25zLWJ0bicpLm9uKCdjbGljaycsICgpID0+IHRoaXMuYXBwQ29udHJvbGxlci5uYXZpZ2F0ZVRvKCdtb21lbnRzJykpO1xuICAgICQoJyNtb21lbnRzLWJhY2stYnRuJykub24oJ2NsaWNrJywgKCkgPT4gdGhpcy5hcHBDb250cm9sbGVyLm5hdmlnYXRlVG8oJ3dlY2hhdCcpKTtcblxuICAgIC8vIOa4suafk+WKn+iDvemdouadv1xuICAgIHRoaXMucmVuZGVyUGx1c0ZlYXR1cmVzKCk7XG4gICAgdGhpcy5yZW5kZXJTdGlja2VyRmVhdHVyZXMoKTtcblxuICAgIC8vIOWQhOenjeeCueWHu+S6i+S7tuebkeWQrFxuICAgIHRoaXMuc2V0dXBDbGlja0xpc3RlbmVycygpO1xuXG4gICAgLy8g6L6T5YWl5qGG6ZW/5oyJ5LqL5Lu2XG4gICAgdGhpcy5hZGRMb25nUHJlc3NMaXN0ZW5lcihcbiAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd3ZWNoYXQtaW5wdXQtZmllbGQnKSEsXG4gICAgICBhc3luYyAoKSA9PiB7XG4gICAgICAgIC8vIOS9v+eUqOiHquWumuS5ieWvueivneahhuadpeabtOaWsOi+k+WFpeahhuaPkOekuuaWh+Wtl1xuICAgICAgICBjb25zdCBjdXJyZW50UGxhY2Vob2xkZXIgPSAkKCcjd2VjaGF0LWlucHV0LWZpZWxkJykuYXR0cigncGxhY2Vob2xkZXInKSB8fCAnJztcbiAgICAgICAgY29uc3QgbmV3UGxhY2Vob2xkZXIgPSBhd2FpdCB0aGlzLmRpYWxvZ01hbmFnZXIucHJvbXB0KFxuICAgICAgICAgICfkv67mlLnovpPlhaXmoYbmj5DnpLrmloflrZc6JyxcbiAgICAgICAgICBjdXJyZW50UGxhY2Vob2xkZXIsXG4gICAgICAgICAgJ+S/ruaUueaPkOekuuaWh+WtlycsXG4gICAgICAgICk7XG4gICAgICAgIGlmIChuZXdQbGFjZWhvbGRlciAhPT0gbnVsbCkge1xuICAgICAgICAgICQoJyN3ZWNoYXQtaW5wdXQtZmllbGQnKS5hdHRyKCdwbGFjZWhvbGRlcicsIG5ld1BsYWNlaG9sZGVyKTtcbiAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShgYmxteF9pbnB1dF9wbGFjZWhvbGRlcl8ke3RoaXMuYmxteE1hbmFnZXIuZ2V0Q2hhcklkKCl9YCwgbmV3UGxhY2Vob2xkZXIpO1xuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgeyBkdXJhdGlvbjogNTAwMCwgcHJldmVudERlZmF1bHQ6IGZhbHNlIH0sXG4gICAgKTtcbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgc2V0dXBDbGlja0xpc3RlbmVycygpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAkKCcjaGlkZGVuLXNlbmQtdHJpZ2dlcicpLm9uKCdjbGljaycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGNvbmZpcm1lZCA9IGF3YWl0IHRoaXMuZGlhbG9nTWFuYWdlci5jb25maXJtKCfmmK/lkKbopoHnq4vljbPop6blj5FBSeWTjeW6lO+8iOWNs+S9v+ayoeacieaWsOa2iOaBr++8ie+8nycsICfop6blj5FBSeWTjeW6lCcpO1xuICAgICAgaWYgKGNvbmZpcm1lZCkge1xuICAgICAgICB0aGlzLm9wdGlvbnMudHJpZ2dlckFpUmVzcG9uc2UodHJ1ZSk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICAvLyDmt7vliqDlvq7kv6HpgInpobnmjInpkq7ngrnlh7vkuovku7YgLSDlr7zoiKrliLDmnIvlj4vlnIhcbiAgICAkKCcjd2VjaGF0LW9wdGlvbnMtYnRuJykub24oJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgdGhpcy5hcHBDb250cm9sbGVyLm5hdmlnYXRlVG8oJ21vbWVudHMnKTtcbiAgICB9KTtcblxuICAgICQoJyNkZWxldGUtbW9kZS10cmlnZ2VyJykub24oJ2NsaWNrJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3Qgd2VjaGF0VmlldyA9ICQoJyN3ZWNoYXQtdmlldycpO1xuICAgICAgd2VjaGF0Vmlldz8udG9nZ2xlQ2xhc3MoJ2RlbGV0ZS1tb2RlJyk7XG4gICAgICBpZiAod2VjaGF0Vmlldz8uaGFzQ2xhc3MoJ2RlbGV0ZS1tb2RlJykpIHtcbiAgICAgICAgYXdhaXQgdGhpcy5kaWFsb2dNYW5hZ2VyLmFsZXJ0KFxuICAgICAgICAgICflt7Lov5vlhaXliKDpmaTmqKHlvI/jgILngrnlh7vku7vmhI/mtojmga/miJbml7bpl7TmiLPlj6/lsIblhbbliKDpmaTjgILlho3mrKHngrnlh7vlt6bkuIrop5Llj6/pgIDlh7rjgIInLFxuICAgICAgICAgICfliKDpmaTmqKHlvI8nLFxuICAgICAgICApO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgYXdhaXQgdGhpcy5kaWFsb2dNYW5hZ2VyLmFsZXJ0KCflt7LpgIDlh7rliKDpmaTmqKHlvI/jgIInLCAn5Yig6Zmk5qih5byPJyk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICAkKCcjcG9zdC1tb21lbnQtYnRuJykub24oJ2NsaWNrJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgY3VycmVudERhdGUgPSB3aW5kb3cuY3VycmVudEdhbWVEYXRlIHx8IG5ldyBEYXRlKCk7XG4gICAgICBjb25zdCB0aW1lU3RyaW5nID0gYCR7Y3VycmVudERhdGUuZ2V0RnVsbFllYXIoKX0tJHsoY3VycmVudERhdGUuZ2V0TW9udGgoKSArIDEpXG4gICAgICAgIC50b1N0cmluZygpXG4gICAgICAgIC5wYWRTdGFydCgyLCAnMCcpfS0ke2N1cnJlbnREYXRlLmdldERhdGUoKS50b1N0cmluZygpLnBhZFN0YXJ0KDIsICcwJyl9ICR7Y3VycmVudERhdGVcbiAgICAgICAgLmdldEhvdXJzKClcbiAgICAgICAgLnRvU3RyaW5nKClcbiAgICAgICAgLnBhZFN0YXJ0KDIsICcwJyl9OiR7Y3VycmVudERhdGUuZ2V0TWludXRlcygpLnRvU3RyaW5nKCkucGFkU3RhcnQoMiwgJzAnKX1gO1xuXG4gICAgICAvLyDkvb/nlKjnu7zlkIjlr7nor53moYbojrflj5bmiYDmnInmnIvlj4vlnIjkv6Hmga9cbiAgICAgIGNvbnN0IG1vbWVudERhdGEgPSBhd2FpdCB0aGlzLmRpYWxvZ01hbmFnZXIuc2hvd01vbWVudERpYWxvZyh0aW1lU3RyaW5nKTtcbiAgICAgIGlmICghbW9tZW50RGF0YSkgcmV0dXJuOyAvLyDnlKjmiLflj5bmtojkuoblj5HluINcblxuICAgICAgLy8g5Li65pyL5Y+L5ZyI55Sf5oiQ5ZSv5LiASURcbiAgICAgIGNvbnN0IG1vbWVudElkID0gYG1vbWVudC0ke0RhdGUubm93KCl9LSR7TWF0aC5yYW5kb20oKS50b1N0cmluZygzNikuc3Vic3RyaW5nKDIsIDEwKX1gO1xuICAgICAgY29uc3QgbW9tZW50RW50cnkgPSB7XG4gICAgICAgIGtleTogJ1VTRVJfTU9NRU5UJyxcbiAgICAgICAgaWQ6IG1vbWVudElkLFxuICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgdGV4dDogbW9tZW50RGF0YS50ZXh0LFxuICAgICAgICAgIGltYWdlOiBtb21lbnREYXRhLmltYWdlLFxuICAgICAgICAgIGltYWdlX3R5cGU6IG1vbWVudERhdGEuaW1hZ2VfdHlwZSxcbiAgICAgICAgICBpbWFnZV9kZXNjOiBtb21lbnREYXRhLmltYWdlX2Rlc2MsXG4gICAgICAgICAgZGF0ZTogbW9tZW50RGF0YS5kYXRlLFxuICAgICAgICAgIHRpbWU6IG1vbWVudERhdGEudGltZSxcbiAgICAgICAgfSxcbiAgICAgIH0gYXMgaW1wb3J0KCcuL3NjcmlwdCcpLk1vbWVudEVudHJ5O1xuXG4gICAgICAvLyDmt7vliqDliLDml6Xlv5dcbiAgICAgIHRoaXMuYmxteE1hbmFnZXIuYWRkRW50cnkobW9tZW50RW50cnkpO1xuICAgICAgLy8gY29uc29sZS5sb2coYFtCTE1YXSDlj5HluIPmnIvlj4vlnIjvvIxJRDogJHttb21lbnRJZH0sIOWGheWuuTogJHttb21lbnREYXRhLnRleHR9LCDlm77niYfnsbvlnos6ICR7bW9tZW50RGF0YS5pbWFnZV90eXBlfWApO1xuXG4gICAgICAvLyDmo4Dmn6XmmK/lkKbpnIDopoHmjqjov5vml7bpl7RcbiAgICAgIGNvbnN0IG1vbWVudERhdGVUaW1lID0gYCR7bW9tZW50RGF0YS5kYXRlfSAke21vbWVudERhdGEudGltZX1gO1xuICAgICAgY29uc3QgbW9tZW50RGF0ZSA9IG5ldyBEYXRlKG1vbWVudERhdGVUaW1lLnJlcGxhY2UoJyAnLCAnVCcpKTtcbiAgICAgIGNvbnN0IGN1cnJlbnRHYW1lRGF0ZSA9IHdpbmRvdy5jdXJyZW50R2FtZURhdGUgfHwgbmV3IERhdGUoKTtcblxuICAgICAgLy8g5aaC5p6c5pyL5Y+L5ZyI5pe26Ze05pma5LqO5b2T5YmN5ri45oiP5pe26Ze077yM5bu26L+f6K+i6Zeu55So5oi35piv5ZCm6KaB5o6o6L+b5pe26Ze077yI6YG/5YWN5a+56K+d5qGG5Yay56qB77yJXG4gICAgICBpZiAobW9tZW50RGF0ZSA+IGN1cnJlbnRHYW1lRGF0ZSkge1xuICAgICAgICAvLyDlu7bov58zMDBtc+mBv+WFjeS4juaci+WPi+WciOWPkeW4g+WvueivneahhuWGsueqgVxuICAgICAgICBzZXRUaW1lb3V0KGFzeW5jICgpID0+IHtcbiAgICAgICAgICBjb25zdCBzaG91bGRBZHZhbmNlVGltZSA9IGF3YWl0IHRoaXMuZGlhbG9nTWFuYWdlci5jb25maXJtKFxuICAgICAgICAgICAgYOaci+WPi+WciOWPkeW4g+aXtumXtO+8iCR7bW9tZW50RGF0YS5kYXRlfSAke21vbWVudERhdGEudGltZX3vvInmmZrkuo7lvZPliY3muLjmiI/ml7bpl7TjgIJcXG7mmK/lkKbopoHlsIbmuLjmiI/ml7bpl7Tmjqjov5vliLDmnIvlj4vlnIjlj5HluIPml7bpl7TvvJ9gLFxuICAgICAgICAgICAgJ+aXtumXtOaOqOi/m+ehruiupCcsXG4gICAgICAgICAgKTtcblxuICAgICAgICAgIGlmIChzaG91bGRBZHZhbmNlVGltZSkge1xuICAgICAgICAgICAgLy8g5o6o6L+b5pe26Ze05Yiw5pyL5Y+L5ZyI5Y+R5biD5pe26Ze0XG4gICAgICAgICAgICBjb25zdCBwYXJzZWREYXRlID0gbmV3IERhdGUobW9tZW50RGF0ZVRpbWUucmVwbGFjZSgnICcsICdUJykpO1xuICAgICAgICAgICAgaWYgKCFpc05hTihwYXJzZWREYXRlLmdldFRpbWUoKSkpIHtcbiAgICAgICAgICAgICAgLy8g5pu05paw57O757uf5b2T5YmN5pel5pyfXG4gICAgICAgICAgICAgIHdpbmRvdy5jdXJyZW50R2FtZURhdGUgPSBwYXJzZWREYXRlO1xuXG4gICAgICAgICAgICAgIC8vIOabtOaWsOeKtuaAgeagj+aXtumXtFxuICAgICAgICAgICAgICBjb25zdCAkdGltZUVsZW1lbnQgPSAkKCcjY3VycmVudC10aW1lJyk7XG4gICAgICAgICAgICAgIGlmICgkdGltZUVsZW1lbnQubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZm9ybWF0dGVkVGltZSA9IGAke3dpbmRvdy5jdXJyZW50R2FtZURhdGVcbiAgICAgICAgICAgICAgICAgIC5nZXRIb3VycygpXG4gICAgICAgICAgICAgICAgICAudG9TdHJpbmcoKVxuICAgICAgICAgICAgICAgICAgLnBhZFN0YXJ0KDIsICcwJyl9OiR7d2luZG93LmN1cnJlbnRHYW1lRGF0ZS5nZXRNaW51dGVzKCkudG9TdHJpbmcoKS5wYWRTdGFydCgyLCAnMCcpfWA7XG4gICAgICAgICAgICAgICAgJHRpbWVFbGVtZW50LnRleHQoZm9ybWF0dGVkVGltZSk7XG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAvLyDliLfmlrDmiYDmnInml7bpl7TmiLPnmoTmmL7npLpcbiAgICAgICAgICAgICAgaWYgKHRoaXMudWlSZW5kZXJlcikge1xuICAgICAgICAgICAgICAgIHRoaXMudWlSZW5kZXJlci5yZWZyZXNoQWxsVGltZXN0YW1wcygpO1xuICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgLy8g5Yib5bu65pe26Ze05o6o6L+b5LqL5Lu26K6w5b2VXG4gICAgICAgICAgICAgIGNvbnN0IHRpbWVBZHZhbmNlRXZlbnQ6IGltcG9ydCgnLi9zY3JpcHQnKS5FdmVudExvZ0VudHJ5ID0ge1xuICAgICAgICAgICAgICAgIHR5cGU6ICdldmVudCcsXG4gICAgICAgICAgICAgICAgY29udGVudDoge1xuICAgICAgICAgICAgICAgICAgZGF0ZTogbW9tZW50RGF0YS5kYXRlLFxuICAgICAgICAgICAgICAgICAgdGltZTogbW9tZW50RGF0YS50aW1lLFxuICAgICAgICAgICAgICAgICAgZGVzY3JpcHRpb246IGDpgJrov4flj5HluIPmnIvlj4vlnIjmjqjov5vml7bpl7TliLAgJHttb21lbnREYXRhLmRhdGV9ICR7bW9tZW50RGF0YS50aW1lfWAsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgdGhpcy5ibG14TWFuYWdlci5hZGRFbnRyeSh0aW1lQWR2YW5jZUV2ZW50KTtcblxuICAgICAgICAgICAgICAvLyDph43mlrDmuLLmn5PmnIvlj4vlnIjku6Xlj43mmKDml7bpl7Tlj5jljJZcbiAgICAgICAgICAgICAgdGhpcy5vcHRpb25zLnJlbmRlck1vbWVudHNGZWVkKCk7XG5cbiAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coYFtCTE1YXSDpgJrov4fmnIvlj4vlnIjmjqjov5vml7bpl7TliLA6ICR7bW9tZW50RGF0YS5kYXRlfSAke21vbWVudERhdGEudGltZX1gKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH0sIDMwMCk7XG4gICAgICB9XG5cbiAgICAgIC8vIOWFs+mUruS/ruaUue+8muWFiOa4suafk+aci+WPi+WciO+8jOWGjeW8guatpeaMgeS5heWMluaVsOaNrlxuICAgICAgdGhpcy5vcHRpb25zLnJlbmRlck1vbWVudHNGZWVkKCk7XG5cbiAgICAgIC8vIOiuvue9rumAmuefpeeKtuaAgVxuICAgICAgdGhpcy5zZXRIYXNQZW5kaW5nTm90aWZpY2F0aW9ucyh0cnVlKTtcbiAgICAgIHRoaXMub3B0aW9ucy51cGRhdGVGb290ZXJCdXR0b25zU3RhdGUoKTtcblxuICAgICAgLy8g5Zyo5ZCO5Y+w6L+b6KGM5pWw5o2u5oyB5LmF5YyW77yM5LiN6Zi75aGeVUnmm7TmlrBcbiAgICAgIHRoaXMuYmxteE1hbmFnZXIucGVyc2lzdExvZ1RvU3RvcmFnZSgpLnRoZW4oKCkgPT4ge1xuICAgICAgICAvLyBjb25zb2xlLmxvZygnW0JMTVhdIOaci+WPi+WciOaVsOaNruW3suaMgeS5heWMlicpO1xuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBjb25zdCBtb21lbnRzRmVlZExpc3QgPSAkKCcjbW9tZW50cy1mZWVkLWxpc3QnKTtcbiAgICBtb21lbnRzRmVlZExpc3Q/Lm9uKCdjbGljaycsIGFzeW5jIGUgPT4ge1xuICAgICAgY29uc3QgdGFyZ2V0ID0gJChlLnRhcmdldClbMF0gYXMgSFRNTEVsZW1lbnQ7XG4gICAgICBjb25zdCBwb3N0RWwgPSB0YXJnZXQuY2xvc2VzdCgnLm1vbWVudC1wb3N0JykgYXMgSFRNTEVsZW1lbnQ7XG4gICAgICBpZiAoIXBvc3RFbCkgcmV0dXJuO1xuXG4gICAgICAvLyDojrflj5bmnIvlj4vlnIjnmoTllK/kuIBJRFxuICAgICAgY29uc3QgbW9tZW50SWQgPSBwb3N0RWwuZGF0YXNldC5tb21lbnRJZDtcbiAgICAgIGlmICghbW9tZW50SWQpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignW0JMTVhdIOaXoOazleiOt+WPluaci+WPi+WciElE77yMZGF0YS1tb21lbnQtaWTlsZ7mgKfnvLrlpLEnKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgY29uc29sZS5sb2coYFtCTE1YXSDmnIvlj4vlnIjmk43kvZzvvIxJRDogJHttb21lbnRJZH1gKTtcblxuICAgICAgaWYgKHRhcmdldC5jbG9zZXN0KCcuZGVsZXRlLW1vbWVudC1idG4nKSkge1xuICAgICAgICBjb25zdCBjb25maXJtZWQgPSBhd2FpdCB0aGlzLmRpYWxvZ01hbmFnZXIuY29uZmlybShcbiAgICAgICAgICAn56Gu5a6a6KaB5Yig6Zmk6L+Z5p2h5pyL5Y+L5ZyI5ZCX77yfXFxu5q2k5pON5L2c5Lmf5Lya5Yig6Zmk55u45YWz55qE54K56LWe5ZKM6K+E6K6644CCJyxcbiAgICAgICAgICAn5Yig6Zmk5pyL5Y+L5ZyIJyxcbiAgICAgICAgKTtcbiAgICAgICAgaWYgKGNvbmZpcm1lZCkge1xuICAgICAgICAgIC8vIG1vbWVudElk5piv5bqP5YiXSUTvvIzpnIDopoHmib7liLDlr7nlupTnmoTlrp7pmYXmnIvlj4vlnIjmnaHnm65cbiAgICAgICAgICBjb25zdCBtb21lbnRQb3N0TG9nSW5kaWNlczogbnVtYmVyW10gPSBbXTtcbiAgICAgICAgICB0aGlzLmJsbXhNYW5hZ2VyLmxvZ0VudHJpZXMuZm9yRWFjaCgoZW50cnksIGluZGV4KSA9PiB7XG4gICAgICAgICAgICBpZiAoJ2tleScgaW4gZW50cnkgJiYgZW50cnkua2V5LmluY2x1ZGVzKCdfTU9NRU5UJykpIHtcbiAgICAgICAgICAgICAgbW9tZW50UG9zdExvZ0luZGljZXMucHVzaChpbmRleCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG5cbiAgICAgICAgICBjb25zdCBtb21lbnRTZXF1ZW5jZUlkID0gcGFyc2VJbnQobW9tZW50SWQsIDEwKTtcbiAgICAgICAgICBjb25zdCBhY3R1YWxNb21lbnRJbmRleCA9IG1vbWVudFBvc3RMb2dJbmRpY2VzW21vbWVudFNlcXVlbmNlSWRdO1xuXG4gICAgICAgICAgY29uc29sZS5sb2coXG4gICAgICAgICAgICBgW0JMTVhdIOWIoOmZpOaci+WPi+WciCAtIOW6j+WIl0lEOiAke21vbWVudFNlcXVlbmNlSWR9LCDlrp7pmYXntKLlvJU6ICR7YWN0dWFsTW9tZW50SW5kZXh9LCDmnIvlj4vlnIjntKLlvJXliJfooag6YCxcbiAgICAgICAgICAgIG1vbWVudFBvc3RMb2dJbmRpY2VzLFxuICAgICAgICAgICk7XG5cbiAgICAgICAgICBpZiAoYWN0dWFsTW9tZW50SW5kZXggIT09IHVuZGVmaW5lZCAmJiBhY3R1YWxNb21lbnRJbmRleCA+PSAwKSB7XG4gICAgICAgICAgICAvLyDlhYjmlLbpm4bmiYDmnInpnIDopoHliKDpmaTnmoTmnaHnm67ntKLlvJXvvIjku47lkI7lvoDliY3liKDpmaTpgb/lhY3ntKLlvJXlj5jljJbvvIlcbiAgICAgICAgICAgIGNvbnN0IGluZGljZXNUb0RlbGV0ZTogbnVtYmVyW10gPSBbYWN0dWFsTW9tZW50SW5kZXhdO1xuXG4gICAgICAgICAgICAvLyDmib7liLDnm7jlhbPnmoTngrnotZ7lkozor4TorrrntKLlvJVcbiAgICAgICAgICAgIHRoaXMuYmxteE1hbmFnZXIubG9nRW50cmllcy5mb3JFYWNoKChlbnRyeSwgaW5kZXgpID0+IHtcbiAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICdrZXknIGluIGVudHJ5ICYmXG4gICAgICAgICAgICAgICAgKGVudHJ5LmtleSA9PT0gJ1VTRVJfTElLRScgfHwgZW50cnkua2V5ID09PSAnVVNFUl9DT01NRU5UJykgJiZcbiAgICAgICAgICAgICAgICAnZGF0YScgaW4gZW50cnkgJiZcbiAgICAgICAgICAgICAgICAndGFyZ2V0X3Bvc3RfaWQnIGluIGVudHJ5LmRhdGEgJiZcbiAgICAgICAgICAgICAgICBlbnRyeS5kYXRhLnRhcmdldF9wb3N0X2lkID09PSBtb21lbnRTZXF1ZW5jZUlkXG4gICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgIGluZGljZXNUb0RlbGV0ZS5wdXNoKGluZGV4KTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIC8vIOaMiee0ouW8leS7juWkp+WIsOWwj+aOkuW6j++8jOS7juWQjuW+gOWJjeWIoOmZpFxuICAgICAgICAgICAgaW5kaWNlc1RvRGVsZXRlLnNvcnQoKGEsIGIpID0+IGIgLSBhKTtcbiAgICAgICAgICAgIGZvciAoY29uc3QgaW5kZXggb2YgaW5kaWNlc1RvRGVsZXRlKSB7XG4gICAgICAgICAgICAgIHRoaXMuYmxteE1hbmFnZXIubG9nRW50cmllcy5zcGxpY2UoaW5kZXgsIDEpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyDkv53lrZjmm7TmlrDlkI7nmoTml6Xlv5dcbiAgICAgICAgICAgIHRoaXMuYmxteE1hbmFnZXIucGVyc2lzdExvZ1RvU3RvcmFnZSgpLnRoZW4oKCkgPT4ge1xuICAgICAgICAgICAgICAvLyDph43nu5jmnIvlj4vlnIjnlYzpnaJcbiAgICAgICAgICAgICAgdGhpcy5vcHRpb25zLnJlbmRlck1vbWVudHNGZWVkKCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAodGFyZ2V0LmNsb3Nlc3QoJy5jb21tZW50LWJ1dHRvbicpKSB7XG4gICAgICAgIC8vIOWkhOeQhuivhOiuui/ngrnotZ7mjInpkq5cbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgdGhpcy5kaWFsb2dNYW5hZ2VyLnNob3dDb21tZW50RGlhbG9nKCk7XG4gICAgICAgIGlmIChyZXN1bHQpIHtcbiAgICAgICAgICBpZiAocmVzdWx0LnR5cGUgPT09ICdsaWtlJykge1xuICAgICAgICAgICAgLy8g5re75Yqg54K56LWeXG4gICAgICAgICAgICBjb25zdCBsaWtlSWQgPSBgbGlrZS0ke0RhdGUubm93KCl9LSR7TWF0aC5yYW5kb20oKS50b1N0cmluZygzNikuc3Vic3RyaW5nKDIsIDEwKX1gO1xuICAgICAgICAgICAgY29uc3QgbGlrZUVudHJ5ID0ge1xuICAgICAgICAgICAgICBrZXk6ICdVU0VSX0xJS0UnLFxuICAgICAgICAgICAgICBpZDogbGlrZUlkLFxuICAgICAgICAgICAgICBkYXRhOiB7IHRhcmdldF9wb3N0X2lkOiBwYXJzZUludChtb21lbnRJZCwgMTApIH0sXG4gICAgICAgICAgICB9IGFzIGltcG9ydCgnLi9zY3JpcHQnKS5MaWtlRW50cnk7XG5cbiAgICAgICAgICAgIHRoaXMuYmxteE1hbmFnZXIuYWRkRW50cnkobGlrZUVudHJ5KTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGBbQkxNWF0g55So5oi354K56LWe5pyL5Y+L5ZyI77yMSUQ6ICR7bW9tZW50SWR9YCk7XG4gICAgICAgICAgfSBlbHNlIGlmIChyZXN1bHQudHlwZSA9PT0gJ2NvbW1lbnQnICYmIHJlc3VsdC5jb250ZW50KSB7XG4gICAgICAgICAgICAvLyDmt7vliqDor4TorrpcbiAgICAgICAgICAgIGNvbnN0IGNvbW1lbnRJZCA9IGBjb21tZW50LSR7RGF0ZS5ub3coKX0tJHtNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDM2KS5zdWJzdHJpbmcoMiwgMTApfWA7XG4gICAgICAgICAgICBjb25zdCBjb21tZW50RW50cnkgPSB7XG4gICAgICAgICAgICAgIGtleTogJ1VTRVJfQ09NTUVOVCcsXG4gICAgICAgICAgICAgIGlkOiBjb21tZW50SWQsXG4gICAgICAgICAgICAgIGRhdGE6IHsgdGV4dDogcmVzdWx0LmNvbnRlbnQsIHRhcmdldF9wb3N0X2lkOiBwYXJzZUludChtb21lbnRJZCwgMTApIH0sXG4gICAgICAgICAgICB9IGFzIGltcG9ydCgnLi9zY3JpcHQnKS5Db21tZW50RW50cnk7XG5cbiAgICAgICAgICAgIHRoaXMuYmxteE1hbmFnZXIuYWRkRW50cnkoY29tbWVudEVudHJ5KTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGBbQkxNWF0g55So5oi36K+E6K665pyL5Y+L5ZyI77yMSUQ6ICR7bW9tZW50SWR9LCDlhoXlrrk6ICR7cmVzdWx0LmNvbnRlbnR9YCk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgLy8g5pu05paw55WM6Z2i5ZKM54q25oCBXG4gICAgICAgICAgdGhpcy5vcHRpb25zLnJlbmRlck1vbWVudHNGZWVkKCk7XG4gICAgICAgICAgdGhpcy5zZXRIYXNQZW5kaW5nTm90aWZpY2F0aW9ucyh0cnVlKTtcbiAgICAgICAgICB0aGlzLm9wdGlvbnMudXBkYXRlRm9vdGVyQnV0dG9uc1N0YXRlKCk7XG5cbiAgICAgICAgICAvLyDmjIHkuYXljJbmlbDmja5cbiAgICAgICAgICB0aGlzLmJsbXhNYW5hZ2VyLnBlcnNpc3RMb2dUb1N0b3JhZ2UoKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pO1xuXG4gICAgJChkb2N1bWVudC5ib2R5KS5vbignY2xpY2snLCBlID0+IHtcbiAgICAgIGNvbnN0IHRhcmdldCA9ICQoZS50YXJnZXQpWzBdIGFzIEhUTUxFbGVtZW50O1xuICAgICAgaWYgKHRhcmdldC5tYXRjaGVzKCcubWVzc2FnZS1hdmF0YXInKSkge1xuICAgICAgICBjb25zdCByb3cgPSB0YXJnZXQuY2xvc2VzdCgnLm1lc3NhZ2Utcm93Jyk7XG4gICAgICAgIGlmIChyb3cpIHtcbiAgICAgICAgICBjb25zdCBhdmF0YXJUeXBlID0gcm93LmNsYXNzTGlzdC5jb250YWlucygnbWUnKSA/ICd1c2VyJyA6ICdjaGFyJztcbiAgICAgICAgICB0aGlzLmFwcENvbnRyb2xsZXIudXBkYXRlQXZhdGFyKGF2YXRhclR5cGUpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICAkKCcjY29udGFjdC1uYW1lLWhlYWRlcicpLm9uKCdjbGljaycsICgpID0+IHtcbiAgICAgIHRoaXMuYXBwQ29udHJvbGxlci51cGRhdGVDaGFyUmVtYXJrKCk7XG4gICAgfSk7XG4gICAgJCgnI21vbWVudHMtdXNlci1uYW1lJykub24oJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgdGhpcy5hcHBDb250cm9sbGVyLnVwZGF0ZVVzZXJOYW1lKCk7XG4gICAgfSk7XG4gICAgJCgnI21vbWVudHMtdXNlci1hdmF0YXInKS5vbignY2xpY2snLCAoKSA9PiB7XG4gICAgICB0aGlzLmFwcENvbnRyb2xsZXIudXBkYXRlU2lnbmF0dXJlKCk7XG4gICAgfSk7XG4gICAgJCgnI21vbWVudHMtY292ZXItcGhvdG8nKS5vbignY2xpY2snLCAoKSA9PiB7XG4gICAgICB0aGlzLmFwcENvbnRyb2xsZXIudXBkYXRlQ292ZXJQaG90bygpO1xuICAgIH0pO1xuXG4gICAgY29uc3QgJHdlY2hhdEJvZHkgPSAkKCcud2VjaGF0LWJvZHknKTtcbiAgICAvLyDkvb/nlKhqUXVlcnnnmoRvbuaWueazle+8jOS4jeS9v+eUqGNhcHR1cmXlj4LmlbBcbiAgICAkd2VjaGF0Qm9keS5vbignY2xpY2snLCBhc3luYyAoZTogSlF1ZXJ5LkNsaWNrRXZlbnQpID0+IHtcbiAgICAgIGNvbnN0ICR3ZWNoYXRWaWV3ID0gJCgnI3dlY2hhdC12aWV3Jyk7XG4gICAgICBpZiAoISR3ZWNoYXRWaWV3Lmhhc0NsYXNzKCdkZWxldGUtbW9kZScpKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgLy8g6aaW5YWI5qOA5p+l5piv5ZCm5pyJZGF0YS1sb2ctaW5kZXjlsZ7mgKdcbiAgICAgIGNvbnN0ICR0YXJnZXRSb3cgPSAkKGUudGFyZ2V0KS5jbG9zZXN0KCdbZGF0YS1sb2ctaW5kZXhdJyk7XG4gICAgICBpZiAoJHRhcmdldFJvdy5sZW5ndGgpIHtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuXG4gICAgICAgIGNvbnN0IGluZGV4VG9EZWxldGUgPSBwYXJzZUludCgkdGFyZ2V0Um93LmRhdGEoJ2xvZ0luZGV4JyksIDEwKTtcbiAgICAgICAgY29uc3QgcHJldmlld1RleHQgPSAkdGFyZ2V0Um93LnRleHQoKS50cmltKCkucmVwbGFjZSgvXFxzKy9nLCAnICcpLnN1YnN0cmluZygwLCA1MCk7XG5cbiAgICAgICAgY29uc3QgY29uZmlybWVkID0gYXdhaXQgdGhpcy5kaWFsb2dNYW5hZ2VyLmNvbmZpcm0oXG4gICAgICAgICAgYOehruWumuimgeWIoOmZpOi/meadoeiusOW9leWQl++8n1xcblxcbumihOiniDogXCIke3ByZXZpZXdUZXh0fS4uLlwiYCxcbiAgICAgICAgICAn5Yig6Zmk6K6w5b2VJyxcbiAgICAgICAgKTtcbiAgICAgICAgaWYgKGNvbmZpcm1lZCkge1xuICAgICAgICAgIHRoaXMuYmxteE1hbmFnZXIubG9nRW50cmllcy5zcGxpY2UoaW5kZXhUb0RlbGV0ZSwgMSk7XG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuYmxteE1hbmFnZXIucGVyc2lzdExvZ1RvU3RvcmFnZSgpO1xuICAgICAgICAgICAgdGhpcy5vcHRpb25zLnJlbmRlckNoYXRIaXN0b3J5KCk7XG4gICAgICAgICAgICB0aGlzLm9wdGlvbnMucmVuZGVyTW9tZW50c0ZlZWQoKTtcbiAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcignW0JMTVhdIOWIoOmZpOiusOW9leaXtuS/neWtmOWksei0pTonLCBlcnJvcik7XG4gICAgICAgICAgICAvLyDmmL7npLrnlKjmiLflj4vlpb3nmoTplJnor6/kv6Hmga9cbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgIGNvbnN0IGRpYWxvZ01hbmFnZXIgPSBEaWFsb2dNYW5hZ2VyLmdldEluc3RhbmNlKCk7XG4gICAgICAgICAgICAgIGF3YWl0IGRpYWxvZ01hbmFnZXIuYWxlcnQoJ+WIoOmZpOWksei0pe+8jOivt+mHjeivlScsICfmk43kvZzlpLHotKUnKTtcbiAgICAgICAgICAgIH0gY2F0Y2gge1xuICAgICAgICAgICAgICAvLyDlpoLmnpzoh6rlrprkuYnlr7nor53moYbkuZ/lpLHotKXvvIzkvb/nlKhjb25zb2xlLmVycm9y6ICM5LiN5pivYWxlcnRcbiAgICAgICAgICAgICAgY29uc29sZS5lcnJvcign5Yig6Zmk5aSx6LSl77yM6K+36YeN6K+VJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgLy8g5aaC5p6c5rKh5pyJZGF0YS1sb2ctaW5kZXjlsZ7mgKfvvIzmo4Dmn6XmmK/lkKbmnIlkYXRhLW1lc3NhZ2UtaWTlsZ7mgKdcbiAgICAgIGNvbnN0ICRtZXNzYWdlUm93ID0gJChlLnRhcmdldCkuY2xvc2VzdCgnW2RhdGEtbWVzc2FnZS1pZF0nKTtcbiAgICAgIGlmICgkbWVzc2FnZVJvdy5sZW5ndGgpIHtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuXG4gICAgICAgIGNvbnN0IG1lc3NhZ2VJZCA9ICRtZXNzYWdlUm93LmRhdGEoJ21lc3NhZ2VJZCcpO1xuICAgICAgICBjb25zdCBwcmV2aWV3VGV4dCA9ICRtZXNzYWdlUm93LnRleHQoKS50cmltKCkucmVwbGFjZSgvXFxzKy9nLCAnICcpLnN1YnN0cmluZygwLCA1MCk7XG5cbiAgICAgICAgY29uc3QgY29uZmlybWVkID0gYXdhaXQgdGhpcy5kaWFsb2dNYW5hZ2VyLmNvbmZpcm0oXG4gICAgICAgICAgYOehruWumuimgeWIoOmZpOi/meadoea2iOaBr+WQl++8n1xcblxcbumihOiniDogXCIke3ByZXZpZXdUZXh0fS4uLlwiYCxcbiAgICAgICAgICAn5Yig6Zmk5raI5oGvJyxcbiAgICAgICAgKTtcbiAgICAgICAgaWYgKGNvbmZpcm1lZCkge1xuICAgICAgICAgIC8vIOmAmui/h21lc3NhZ2VJZOafpeaJvuWvueW6lOeahOaXpeW/l+adoeebrue0ouW8lVxuICAgICAgICAgIGNvbnN0IGluZGV4VG9EZWxldGUgPSB0aGlzLmJsbXhNYW5hZ2VyLmxvZ0VudHJpZXMuZmluZEluZGV4KGVudHJ5ID0+ICdpZCcgaW4gZW50cnkgJiYgZW50cnkuaWQgPT09IG1lc3NhZ2VJZCk7XG5cbiAgICAgICAgICBpZiAoaW5kZXhUb0RlbGV0ZSAhPT0gLTEpIHtcbiAgICAgICAgICAgIHRoaXMuYmxteE1hbmFnZXIubG9nRW50cmllcy5zcGxpY2UoaW5kZXhUb0RlbGV0ZSwgMSk7XG4gICAgICAgICAgICB0aGlzLmJsbXhNYW5hZ2VyLnBlcnNpc3RMb2dUb1N0b3JhZ2UoKS50aGVuKCgpID0+IHtcbiAgICAgICAgICAgICAgdGhpcy5vcHRpb25zLnJlbmRlckNoYXRIaXN0b3J5KCk7XG4gICAgICAgICAgICAgIHRoaXMub3B0aW9ucy5yZW5kZXJNb21lbnRzRmVlZCgpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vIOWmguaenOaJvuS4jeWIsOWvueW6lOeahOaXpeW/l+adoeebru+8jOebtOaOpeS7jkRPTeS4reenu+mZpOivpeWFg+e0oFxuICAgICAgICAgICAgJG1lc3NhZ2VSb3cucmVtb3ZlKCk7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLmRpYWxvZ01hbmFnZXIuYWxlcnQoJ+aXoOazleaJvuWIsOWvueW6lOeahOaXpeW/l+adoeebru+8jOW3suS7jueVjOmdouenu+mZpOivpea2iOaBrycsICfplJnor68nKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KTtcblxuICAgICQoJyNjaGFuZ2UtY2hhdC13YWxscGFwZXItYnRuJykub24oJ2NsaWNrJywgZSA9PiB7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICB0aGlzLmFwcENvbnRyb2xsZXIuY2hhbmdlV2FsbHBhcGVyKCdjaGF0Jyk7XG4gICAgfSk7XG4gICAgJCgnI2NoYW5nZS1ob21lLXdhbGxwYXBlci1idG4nKS5vbignY2xpY2snLCBlID0+IHtcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgIHRoaXMuYXBwQ29udHJvbGxlci5jaGFuZ2VXYWxscGFwZXIoJ2hvbWUnKTtcbiAgICB9KTtcbiAgICAkKCcjY2hhbmdlLXNldHRpbmdzLXdhbGxwYXBlci1idG4nKS5vbignY2xpY2snLCBlID0+IHtcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgIHRoaXMuYXBwQ29udHJvbGxlci5jaGFuZ2VXYWxscGFwZXIoJ3NldHRpbmdzJyk7XG4gICAgfSk7XG5cbiAgICAkKCcjc2hvdy1sYXN0LWFpLXJlc3BvbnNlLWJ0bicpLm9uKCdjbGljaycsIGFzeW5jIGUgPT4ge1xuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgY29uc3QgcmVzcG9uc2UgPSB0aGlzLmFwcENvbnRyb2xsZXIuZ2V0TGF0ZXN0QWlSYXdSZXNwb25zZSgpO1xuICAgICAgYXdhaXQgdGhpcy5kaWFsb2dNYW5hZ2VyLnNob3dTY3JvbGxhYmxlVGV4dChyZXNwb25zZSB8fCAn5pqC5pegQUnlm57lpI3lhoXlrrknLCAnQUnljp/lp4vlm57lpI0nLCAn5YWz6ZetJyk7XG4gICAgfSk7XG5cbiAgICAkKCcjc2hvdy1sYXN0LXNlbnQtcHJvbXB0LWJ0bicpLm9uKCdjbGljaycsIGFzeW5jIGUgPT4ge1xuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgY29uc3QgcHJvbXB0ID0gdGhpcy5hcHBDb250cm9sbGVyLmdldExhdGVzdFNlbnRQcm9tcHQoKTtcbiAgICAgIGF3YWl0IHRoaXMuZGlhbG9nTWFuYWdlci5zaG93U2Nyb2xsYWJsZVRleHQocHJvbXB0IHx8ICfmmoLml6Dlj5HpgIHnmoTmj5DnpLrlhoXlrrknLCAn5Y+R6YCB55qE5o+Q56S6JywgJ+WFs+mXrScpO1xuICAgIH0pO1xuXG4gICAgLy8g54G15Yqo5bKb5YWo5bGP5Yqf6IO9XG4gICAgJCgnLmR5bmFtaWMtaXNsYW5kJykub24oJ2NsaWNrJywgYXN5bmMgKCkgPT4ge1xuICAgICAgdHJ5IHtcbiAgICAgICAgaWYgKCFkb2N1bWVudC5mdWxsc2NyZWVuRWxlbWVudCkge1xuICAgICAgICAgIC8vIOi/m+WFpeWFqOWxj1xuICAgICAgICAgIGF3YWl0IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5yZXF1ZXN0RnVsbHNjcmVlbigpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIOmAgOWHuuWFqOWxj1xuICAgICAgICAgIGF3YWl0IGRvY3VtZW50LmV4aXRGdWxsc2NyZWVuKCk7XG4gICAgICAgIH1cbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUud2FybignW0JMTVhdIOWFqOWxj+WKn+iDveS4jeaUr+aMgeaIluiiq+mYu+atojonLCBlcnJvcik7XG4gICAgICAgIGF3YWl0IHRoaXMuZGlhbG9nTWFuYWdlci5hbGVydCgn5oKo55qE5rWP6KeI5Zmo5LiN5pSv5oyB5YWo5bGP5Yqf6IO95oiW6KKr6Zi75q2iJywgJ+WFqOWxj+WKn+iDvScpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgcHJpdmF0ZSByZW5kZXJQbHVzRmVhdHVyZXMoKTogdm9pZCB7XG4gICAgY29uc3QgJHBsdXNHcmlkID0gJCgnI3BsdXMtZ3JpZCcpO1xuICAgIGlmICghJHBsdXNHcmlkLmxlbmd0aCkgcmV0dXJuO1xuXG4gICAgY29uc3QgUExVU19GRUFUVVJFUyA9IFtcbiAgICAgIHtcbiAgICAgICAgbGFiZWw6ICfnm7jlhownLFxuICAgICAgICBpY29uOiAnZmFzIGZhLWltYWdlcycsXG4gICAgICAgIGFjdGlvbjogYXN5bmMgKCkgPT4ge1xuICAgICAgICAgIGNvbnN0IGRlc2MgPSBhd2FpdCB0aGlzLmRpYWxvZ01hbmFnZXIucHJvbXB0KCfor7fovpPlhaXlm77niYfmj4/ov7A6JywgJycsICfmt7vliqDlm77niYcnKTtcbiAgICAgICAgICBpZiAoZGVzYykge1xuICAgICAgICAgICAgdGhpcy5vcHRpb25zLnN0YWdlQW5kRGlzcGxheUVudHJ5KHtcbiAgICAgICAgICAgICAgdHlwZTogJ2ltYWdlJyxcbiAgICAgICAgICAgICAgc2VuZGVyOiAnbWUnLFxuICAgICAgICAgICAgICBjb250ZW50OiB7IHR5cGU6ICdkZXNjJywgdmFsdWU6IGRlc2MgfSxcbiAgICAgICAgICAgICAgaWQ6IGBtc2ctJHtEYXRlLm5vdygpfWAsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHRoaXMub3B0aW9ucy50b2dnbGVQYW5lbChudWxsKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICB9LFxuICAgICAge1xuICAgICAgICBsYWJlbDogJ+aLjeaRhCcsXG4gICAgICAgIGljb246ICdmYXMgZmEtY2FtZXJhJyxcbiAgICAgICAgYWN0aW9uOiBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgY29uc3QgY3VycmVudERhdGUgPSB3aW5kb3cuY3VycmVudEdhbWVEYXRlIHx8IG5ldyBEYXRlKCk7XG4gICAgICAgICAgY29uc3QgZGF0ZVN0cmluZyA9IGAke2N1cnJlbnREYXRlLmdldEZ1bGxZZWFyKCl9LSR7KGN1cnJlbnREYXRlLmdldE1vbnRoKCkgKyAxKVxuICAgICAgICAgICAgLnRvU3RyaW5nKClcbiAgICAgICAgICAgIC5wYWRTdGFydCgyLCAnMCcpfS0ke2N1cnJlbnREYXRlLmdldERhdGUoKS50b1N0cmluZygpLnBhZFN0YXJ0KDIsICcwJyl9YDtcbiAgICAgICAgICBjb25zdCB0aW1lU3RyaW5nID0gYCR7Y3VycmVudERhdGUuZ2V0SG91cnMoKS50b1N0cmluZygpLnBhZFN0YXJ0KDIsICcwJyl9OiR7Y3VycmVudERhdGVcbiAgICAgICAgICAgIC5nZXRNaW51dGVzKClcbiAgICAgICAgICAgIC50b1N0cmluZygpXG4gICAgICAgICAgICAucGFkU3RhcnQoMiwgJzAnKX1gO1xuXG4gICAgICAgICAgLy8g5L2/55So57u85ZCI5pe26Ze06Lez6LeD5a+56K+d5qGGXG4gICAgICAgICAgY29uc3QgdGltZUp1bXBEYXRhID0gYXdhaXQgdGhpcy5kaWFsb2dNYW5hZ2VyLnNob3dUaW1lSnVtcERpYWxvZyhgJHtkYXRlU3RyaW5nfSAke3RpbWVTdHJpbmd9YCk7XG4gICAgICAgICAgaWYgKCF0aW1lSnVtcERhdGEpIHJldHVybjtcblxuICAgICAgICAgIGNvbnN0IGV2ZW50RGF0YSA9IHtcbiAgICAgICAgICAgIGRhdGU6IHRpbWVKdW1wRGF0YS5kYXRlLFxuICAgICAgICAgICAgdGltZTogdGltZUp1bXBEYXRhLnRpbWUsXG4gICAgICAgICAgICBkZXNjcmlwdGlvbjogdGltZUp1bXBEYXRhLmRlc2NyaXB0aW9uLFxuICAgICAgICAgIH07XG4gICAgICAgICAgdGhpcy5vcHRpb25zLnN0YWdlQW5kRGlzcGxheUVudHJ5KHtcbiAgICAgICAgICAgIHR5cGU6ICdldmVudCcsXG4gICAgICAgICAgICBzZW5kZXI6ICdtZScsXG4gICAgICAgICAgICBjb250ZW50OiBldmVudERhdGEsXG4gICAgICAgICAgICBpZDogYGV2ZW50LSR7RGF0ZS5ub3coKX1gLFxuICAgICAgICAgIH0gYXMgaW1wb3J0KCcuL3NjcmlwdCcpLkNoYXRFbnRyeSAmIHsgdHlwZTogJ2V2ZW50JyB9KTtcbiAgICAgICAgICB0aGlzLm9wdGlvbnMudG9nZ2xlUGFuZWwobnVsbCk7XG4gICAgICAgIH0sXG4gICAgICB9LFxuICAgICAge1xuICAgICAgICBsYWJlbDogJ+inhumikemAmuivnScsXG4gICAgICAgIGljb246ICdmYXMgZmEtdmlkZW8nLFxuICAgICAgICBhY3Rpb246IGFzeW5jICgpID0+XG4gICAgICAgICAgYXdhaXQgdGhpcy5kaWFsb2dNYW5hZ2VyLmFsZXJ0KFxuICAgICAgICAgICAgJ+acrOWQjOWxguaJi+acuuWPquOAkOWFjei0ueWPkeW4g+S6jmRpc2NvcmTnmoTlsL7lt7TplYfnpL7ljLrlkozml4XnqIvnpL7ljLrvvIzkvZzogIXmmrTlipvnvo7lrabvvIzngrnlh7vpk77mjqXljbPlj6/lhY3otLnojrflj5ZodHRwczovL2Rpc2NvcmQuY29tL2NoYW5uZWxzLzEzNzkzMDQwMDgxNTc0OTk0MjMvMTM4ODE4MDk3Njg3Mzc2Njk3M+OAgmh0dHBzOi8vZGlzY29yZC5jb20vY2hhbm5lbHMvMTI5MTkyNTUzNTMyNDExMDg3OS8xMzg4MTgyMTU1NzA3ODE0MDA5JyxcbiAgICAgICAgICAgICflhbPkuo7kvZzogIUnLFxuICAgICAgICAgICksXG4gICAgICB9LFxuICAgICAge1xuICAgICAgICBsYWJlbDogJ+S9jee9ricsXG4gICAgICAgIGljb246ICdmYXMgZmEtbWFwLW1hcmtlci1hbHQnLFxuICAgICAgICBhY3Rpb246IGFzeW5jICgpID0+IHtcbiAgICAgICAgICBjb25zdCBsb2MgPSBhd2FpdCB0aGlzLmRpYWxvZ01hbmFnZXIucHJvbXB0KCfor7fovpPlhaXkvY3nva46JywgJycsICflj5HpgIHkvY3nva4nKTtcbiAgICAgICAgICBpZiAobG9jKVxuICAgICAgICAgICAgdGhpcy5vcHRpb25zLnN0YWdlQW5kRGlzcGxheUVudHJ5KHtcbiAgICAgICAgICAgICAgdHlwZTogJ2xvY2F0aW9uJyxcbiAgICAgICAgICAgICAgc2VuZGVyOiAnbWUnLFxuICAgICAgICAgICAgICBjb250ZW50OiBsb2MsXG4gICAgICAgICAgICAgIGlkOiBgbXNnLSR7RGF0ZS5ub3coKX1gLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgdGhpcy5vcHRpb25zLnRvZ2dsZVBhbmVsKG51bGwpO1xuICAgICAgICB9LFxuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAgbGFiZWw6ICfnuqLljIUnLFxuICAgICAgICBpY29uOiAnZmFzIGZhLWVudmVsb3BlJyxcbiAgICAgICAgYWN0aW9uOiBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgdGhpcy5kaWFsb2dNYW5hZ2VyLnNob3dSZWRQYWNrZXREaWFsb2coKTtcbiAgICAgICAgICBpZiAocmVzdWx0KSB7XG4gICAgICAgICAgICBjb25zdCBnaWZ0RGF0YSA9IHtcbiAgICAgICAgICAgICAgbmFtZTogJ+e6ouWMhScsXG4gICAgICAgICAgICAgIHByaWNlOiByZXN1bHQuYW1vdW50LFxuICAgICAgICAgICAgICBub3RlOiByZXN1bHQubm90ZSxcbiAgICAgICAgICAgICAgc3RhdHVzOiAnc2VudCcgYXMgY29uc3QsXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdGhpcy5vcHRpb25zLnN0YWdlQW5kRGlzcGxheUVudHJ5KHtcbiAgICAgICAgICAgICAgdHlwZTogJ2dpZnQnLFxuICAgICAgICAgICAgICBzZW5kZXI6ICdtZScsXG4gICAgICAgICAgICAgIGNvbnRlbnQ6IHNhZmVKc29uU3RyaW5naWZ5KGdpZnREYXRhKSxcbiAgICAgICAgICAgICAgZGF0YTogZ2lmdERhdGEsXG4gICAgICAgICAgICAgIGlkOiBgbXNnLSR7RGF0ZS5ub3coKX1gLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0aGlzLm9wdGlvbnMudG9nZ2xlUGFuZWwobnVsbCk7XG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAgbGFiZWw6ICfovazotKYnLFxuICAgICAgICBpY29uOiAnZmFzIGZhLW1vbmV5LWJpbGwtd2F2ZScsXG4gICAgICAgIGFjdGlvbjogYXN5bmMgKCkgPT4ge1xuICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHRoaXMuZGlhbG9nTWFuYWdlci5zaG93VHJhbnNmZXJEaWFsb2coKTtcbiAgICAgICAgICBpZiAocmVzdWx0KSB7XG4gICAgICAgICAgICBjb25zdCB0cmFuc2ZlckRhdGEgPSB7XG4gICAgICAgICAgICAgIGFtb3VudDogcmVzdWx0LmFtb3VudCxcbiAgICAgICAgICAgICAgbm90ZTogcmVzdWx0Lm5vdGUgfHwgJyAnLFxuICAgICAgICAgICAgICBzdGF0dXM6ICdzZW50JyBhcyBjb25zdCxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB0aGlzLm9wdGlvbnMuc3RhZ2VBbmREaXNwbGF5RW50cnkoe1xuICAgICAgICAgICAgICB0eXBlOiAndHJhbnNmZXInLFxuICAgICAgICAgICAgICBzZW5kZXI6ICdtZScsXG4gICAgICAgICAgICAgIGNvbnRlbnQ6IHNhZmVKc29uU3RyaW5naWZ5KHRyYW5zZmVyRGF0YSksXG4gICAgICAgICAgICAgIGRhdGE6IHRyYW5zZmVyRGF0YSxcbiAgICAgICAgICAgICAgaWQ6IGBtc2ctJHtEYXRlLm5vdygpfWAsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHRoaXMub3B0aW9ucy50b2dnbGVQYW5lbChudWxsKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICB9LFxuICAgICAge1xuICAgICAgICBsYWJlbDogJ+aWh+S7ticsXG4gICAgICAgIGljb246ICdmYXMgZmEtZmlsZS1hbHQnLFxuICAgICAgICBhY3Rpb246IGFzeW5jICgpID0+IHtcbiAgICAgICAgICBjb25zdCBmaWxlTmFtZSA9IGF3YWl0IHRoaXMuZGlhbG9nTWFuYWdlci5wcm9tcHQoJ+ivt+i+k+WFpeaWh+S7tuWQjTonLCAnJywgJ+WPkemAgeaWh+S7ticpO1xuICAgICAgICAgIGlmIChmaWxlTmFtZSlcbiAgICAgICAgICAgIHRoaXMub3B0aW9ucy5zdGFnZUFuZERpc3BsYXlFbnRyeSh7XG4gICAgICAgICAgICAgIHR5cGU6ICdmaWxlJyxcbiAgICAgICAgICAgICAgc2VuZGVyOiAnbWUnLFxuICAgICAgICAgICAgICBjb250ZW50OiBmaWxlTmFtZSxcbiAgICAgICAgICAgICAgaWQ6IGBtc2ctJHtEYXRlLm5vdygpfWAsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB0aGlzLm9wdGlvbnMudG9nZ2xlUGFuZWwobnVsbCk7XG4gICAgICAgIH0sXG4gICAgICB9LFxuICAgICAge1xuICAgICAgICBsYWJlbDogJ+ekvOeJqScsXG4gICAgICAgIGljb246ICdmYXMgZmEtZ2lmdCcsXG4gICAgICAgIGFjdGlvbjogYXN5bmMgKCkgPT4ge1xuICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHRoaXMuZGlhbG9nTWFuYWdlci5zaG93R2lmdERpYWxvZygpO1xuICAgICAgICAgIGlmIChyZXN1bHQpIHtcbiAgICAgICAgICAgIGNvbnN0IGdpZnREYXRhID0ge1xuICAgICAgICAgICAgICBuYW1lOiByZXN1bHQubmFtZSxcbiAgICAgICAgICAgICAgcHJpY2U6IHJlc3VsdC5wcmljZSxcbiAgICAgICAgICAgICAgc3RhdHVzOiAnc2VudCcgYXMgY29uc3QsXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdGhpcy5vcHRpb25zLnN0YWdlQW5kRGlzcGxheUVudHJ5KHtcbiAgICAgICAgICAgICAgdHlwZTogJ2dpZnQnLFxuICAgICAgICAgICAgICBzZW5kZXI6ICdtZScsXG4gICAgICAgICAgICAgIGNvbnRlbnQ6IHNhZmVKc29uU3RyaW5naWZ5KGdpZnREYXRhKSxcbiAgICAgICAgICAgICAgZGF0YTogZ2lmdERhdGEsXG4gICAgICAgICAgICAgIGlkOiBgbXNnLSR7RGF0ZS5ub3coKX1gLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0aGlzLm9wdGlvbnMudG9nZ2xlUGFuZWwobnVsbCk7XG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgfSxcbiAgICBdO1xuXG4gICAgLy8g56Gu5L+ddWlSZW5kZXJlcuWtmOWcqOS4lOW3sue7j+WIneWni+WMllxuICAgIGlmICh0aGlzLnVpUmVuZGVyZXIpIHtcbiAgICAgIC8vIOebtOaOpeS9v+eUqERPTeWFg+e0oOiAjOS4jeaYr2pRdWVyeeWvueixoVxuICAgICAgdGhpcy51aVJlbmRlcmVyLnJlbmRlckZlYXR1cmVHcmlkKCRwbHVzR3JpZFswXSwgUExVU19GRUFUVVJFUywge1xuICAgICAgICBvblRvZ2dsZURlbGV0ZU1vZGU6ICgpID0+IHt9LFxuICAgICAgICBvbkFkZFN0aWNrZXJzOiAoKSA9PiB7fSxcbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdbQkxNWF0gVUlSZW5kZXJlciBpcyBub3QgaW5pdGlhbGl6ZWQnKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIHJlbmRlclN0aWNrZXJGZWF0dXJlcygpOiB2b2lkIHtcbiAgICBjb25zdCAkc3RpY2tlckdyaWQgPSAkKCcjc3RpY2tlci1ncmlkJyk7XG4gICAgaWYgKCEkc3RpY2tlckdyaWQubGVuZ3RoKSByZXR1cm47XG5cbiAgICAvLyDlrprkuYnpu5jorqTooajmg4XljIVcbiAgICBjb25zdCBkZWZhdWx0R2xvYmFsU3RpY2tlcnMgPSBbeyBsYWJlbDogJ+WlveeahCcsIHVybDogJ2h0dHBzOi8vZmlsZXMuY2F0Ym94Lm1vZS8zajB0cGMuanBlZycgfV07XG5cbiAgICAvLyDor7vlj5blhajlsYDooajmg4XljIVcbiAgICBjb25zdCBHTE9CQUxfU1RJQ0tFUl9TVE9SQUdFX0tFWSA9ICdibG14X3dlY2hhdF9zdGlja2Vyc19nbG9iYWwnO1xuICAgIGNvbnN0IGN1c3RvbVN0aWNrZXJzID0gU2FmZVN0b3JhZ2UuZ2V0SXRlbShHTE9CQUxfU1RJQ0tFUl9TVE9SQUdFX0tFWSwgW10pIHx8IFtdO1xuICAgIGNvbnN0IGFsbFN0aWNrZXJzID0gWy4uLmRlZmF1bHRHbG9iYWxTdGlja2VycywgLi4uY3VzdG9tU3RpY2tlcnNdO1xuXG4gICAgLy8g5Yib5bu66KGo5oOF5YyF5Yqf6IO9XG4gICAgY29uc3QgZmVhdHVyZXMgPSBhbGxTdGlja2Vycy5tYXAocyA9PiAoe1xuICAgICAgbGFiZWw6IHMubGFiZWwsXG4gICAgICBpY29uOiBzLnVybCxcbiAgICAgIGlzRGVmYXVsdDogZGVmYXVsdEdsb2JhbFN0aWNrZXJzLnNvbWUoZHMgPT4gZHMubGFiZWwgPT09IHMubGFiZWwpLFxuICAgICAgYWN0aW9uOiAoKSA9PiB7XG4gICAgICAgIHRoaXMub3B0aW9ucy5zdGFnZUFuZERpc3BsYXlFbnRyeSh7XG4gICAgICAgICAgdHlwZTogJ3N0aWNrZXInLFxuICAgICAgICAgIHNlbmRlcjogJ21lJyxcbiAgICAgICAgICBjb250ZW50OiBzLmxhYmVsLFxuICAgICAgICAgIGlkOiBgbXNnLSR7RGF0ZS5ub3coKX1gLFxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5vcHRpb25zLnRvZ2dsZVBhbmVsKG51bGwpO1xuICAgICAgfSxcbiAgICB9KSk7XG5cbiAgICAvLyDmt7vliqBcIuihqOaDheeuoeeQhlwi5oyJ6ZKuXG4gICAgZmVhdHVyZXMudW5zaGlmdCh7XG4gICAgICBsYWJlbDogJ+ihqOaDheeuoeeQhicsXG4gICAgICBpY29uOiAnZmFzIGZhLWNvZycsIC8vIOWwhuWbvuagh+aUueS4uum9v+i9ruWbvuagh1xuICAgICAgaXNBZGRCdG46IHRydWUsXG4gICAgICBpc0RlZmF1bHQ6IGZhbHNlLCAvLyDmt7vliqBpc0RlZmF1bHTlsZ7mgKdcbiAgICAgIGFjdGlvbjogKCkgPT4ge1xuICAgICAgICB0aGlzLnNob3dTdGlja2VyTWFuYWdlcigpO1xuICAgICAgfSxcbiAgICB9IGFzIHtcbiAgICAgIGxhYmVsOiBzdHJpbmc7XG4gICAgICBpY29uOiBzdHJpbmc7XG4gICAgICBpc0FkZEJ0bjogYm9vbGVhbjtcbiAgICAgIGlzRGVmYXVsdDogYm9vbGVhbjtcbiAgICAgIGFjdGlvbjogKCkgPT4gdm9pZDtcbiAgICB9KTtcblxuICAgIC8vIOehruS/nXVpUmVuZGVyZXLlrZjlnKjkuJTlt7Lnu4/liJ3lp4vljJZcbiAgICBpZiAodGhpcy51aVJlbmRlcmVyKSB7XG4gICAgICAvLyDnm7TmjqXkvb/nlKhET03lhYPntKDogIzkuI3mmK9qUXVlcnnlr7nosaFcbiAgICAgIHRoaXMudWlSZW5kZXJlci5yZW5kZXJGZWF0dXJlR3JpZCgkc3RpY2tlckdyaWRbMF0sIGZlYXR1cmVzLCB7XG4gICAgICAgIG9uVG9nZ2xlRGVsZXRlTW9kZTogKCkgPT4gdGhpcy5zaG93U3RpY2tlck1hbmFnZXIoKSxcbiAgICAgICAgb25BZGRTdGlja2VyczogKCkgPT4gdGhpcy5zaG93U3RpY2tlck1hbmFnZXIoKSxcbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdbQkxNWF0gVUlSZW5kZXJlciBpcyBub3QgaW5pdGlhbGl6ZWQnKTtcbiAgICB9XG4gIH1cblxuICAvLyDooajmg4XljIXnrqHnkIbnlYzpnaJcbiAgcHJpdmF0ZSBzaG93U3RpY2tlck1hbmFnZXIoKTogdm9pZCB7XG4gICAgLy8g5Yib5bu65qih5oCB5qGGXG4gICAgY29uc3QgbW9kYWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICBtb2RhbC5jbGFzc05hbWUgPSAnc3RpY2tlci1tYW5hZ2VyLW1vZGFsJztcblxuICAgIC8vIOWIm+W7uuWGheWuueWuueWZqFxuICAgIGNvbnN0IGNvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIGNvbnRhaW5lci5jbGFzc05hbWUgPSAnc3RpY2tlci1tYW5hZ2VyLWNvbnRhaW5lcic7XG5cbiAgICAvLyDkvb/nlKhpbm5lckhUTUzliJvlu7rlrozmlbTnu5PmnoTvvIzljIXlkKvlpJrmoIfnrb7pobVcbiAgICBjb250YWluZXIuaW5uZXJIVE1MID0gYFxuICAgICAgPGgyPuihqOaDheWMheeuoeeQhjwvaDI+XG4gICAgICA8ZGl2IGNsYXNzPVwic3RpY2tlci1tYW5hZ2VyLXRhYnNcIj5cbiAgICAgICAgPGRpdiBjbGFzcz1cInRhYi1idXR0b24gYWN0aXZlXCIgZGF0YS10YWI9XCJhZGQtc3RpY2tlclwiPua3u+WKoOihqOaDhTwvZGl2PlxuICAgICAgICA8ZGl2IGNsYXNzPVwidGFiLWJ1dHRvblwiIGRhdGEtdGFiPVwiYmF0Y2gtYWRkXCI+5om56YeP5re75YqgPC9kaXY+XG4gICAgICAgIDxkaXYgY2xhc3M9XCJ0YWItYnV0dG9uXCIgZGF0YS10YWI9XCJkZWxldGUtbWFuYWdlXCI+5Yig6Zmk566h55CGPC9kaXY+XG4gICAgICA8L2Rpdj5cbiAgICAgIDxkaXYgY2xhc3M9XCJzdGlja2VyLW1hbmFnZXItY29udGVudFwiPlxuICAgICAgICA8IS0tIOa3u+WKoOWNleS4quihqOaDheagh+etvumhtSAtLT5cbiAgICAgICAgPGRpdiBjbGFzcz1cInRhYi1jb250ZW50IGFjdGl2ZVwiIGRhdGEtdGFiPVwiYWRkLXN0aWNrZXJcIj5cbiAgICAgICAgICA8ZGl2IGNsYXNzPVwiYWRkLXN0aWNrZXItc2VjdGlvblwiPlxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cImFkZC1zdGlja2VyLWZvcm1cIj5cbiAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImZvcm0tZ3JvdXBcIj5cbiAgICAgICAgICAgICAgICA8bGFiZWwgZm9yPVwic3RpY2tlci1sYWJlbFwiPuihqOaDheWMheWQjeensDwvbGFiZWw+XG4gICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9XCJ0ZXh0XCIgaWQ9XCJzdGlja2VyLWxhYmVsXCIgcGxhY2Vob2xkZXI9XCLooajmg4Xmj4/ov7Av5ZCN56ewXCI+XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZm9ybS1ncm91cFwiPlxuICAgICAgICAgICAgICAgIDxsYWJlbCBmb3I9XCJzdGlja2VyLXVybFwiPuihqOaDheWMhVVSTDwvbGFiZWw+XG4gICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9XCJ1cmxcIiBpZD1cInN0aWNrZXItdXJsXCIgcGxhY2Vob2xkZXI9XCLooajmg4Xlm77niYdVUkzpk77mjqVcIj5cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJwcmV2aWV3LWNvbnRhaW5lclwiPlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJwcmV2aWV3LWxhYmVsXCI+6aKE6KeIPC9kaXY+XG4gICAgICAgICAgICAgICAgPGltZyBpZD1cInByZXZpZXctaW1nXCIgY2xhc3M9XCJwcmV2aWV3LWltZ1wiIHN0eWxlPVwiZGlzcGxheTogbm9uZTtcIj5cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9XCJhZGQtc3RpY2tlci1idG5cIj7mt7vliqDooajmg4XljIU8L2J1dHRvbj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cblxuICAgICAgICA8IS0tIOaJuemHj+a3u+WKoOagh+etvumhtSAtLT5cbiAgICAgICAgPGRpdiBjbGFzcz1cInRhYi1jb250ZW50XCIgZGF0YS10YWI9XCJiYXRjaC1hZGRcIj5cbiAgICAgICAgICA8ZGl2IGNsYXNzPVwiYmF0Y2gtYWRkLXNlY3Rpb25cIj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJiYXRjaC1pbnN0cnVjdGlvbnNcIj5cbiAgICAgICAgICAgICAgPHA+5om56YeP5re75Yqg5qC85byP6K+05piO77yaPC9wPlxuICAgICAgICAgICAgICA8dWw+XG4gICAgICAgICAgICAgICAgPGxpPuavj+S4quihqOaDheWMheagvOW8j++8mjxzdHJvbmc+6KGo5oOF5ZCN56ewaHR0cDovL+WbvueJh+mTvuaOpTwvc3Ryb25nPjwvbGk+XG4gICAgICAgICAgICAgICAgPGxpPuWkmuS4quihqOaDheWMheeUqDxzdHJvbmc+6Iux5paH6YCX5Y+3PC9zdHJvbmc+5YiG6ZqUPC9saT5cbiAgICAgICAgICAgICAgICA8bGk+5Lmf5pSv5oyBIDxzdHJvbmc+6KGo5oOF5ZCN56ewPWh0dHA6Ly/lm77niYfpk77mjqU8L3N0cm9uZz4g5qC85byPPC9saT5cbiAgICAgICAgICAgICAgICA8bGk+56S65L6L77yaPGNvZGU+56yR6IS4aHR0cHM6Ly9leGFtcGxlLmNvbS9zbWlsZS5qcGcs5ZOt6IS4aHR0cHM6Ly9leGFtcGxlLmNvbS9jcnkuanBnPC9jb2RlPjwvbGk+XG4gICAgICAgICAgICAgIDwvdWw+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJmb3JtLWdyb3VwXCI+XG4gICAgICAgICAgICAgIDxsYWJlbCBmb3I9XCJiYXRjaC10ZXh0YXJlYVwiPuaJuemHj+ihqOaDheWMheaVsOaNrjwvbGFiZWw+XG4gICAgICAgICAgICAgIDx0ZXh0YXJlYSBpZD1cImJhdGNoLXRleHRhcmVhXCIgcGxhY2Vob2xkZXI9XCLor7fmjInnhafkuIrov7DmoLzlvI/ovpPlhaXlpJrkuKrooajmg4XljIUuLi5cIj48L3RleHRhcmVhPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8YnV0dG9uIGNsYXNzPVwiYmF0Y2gtYWRkLWJ0blwiPuaJuemHj+a3u+WKoOihqOaDheWMhTwvYnV0dG9uPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cblxuICAgICAgICA8IS0tIOWIoOmZpOeuoeeQhuagh+etvumhtSAtLT5cbiAgICAgICAgPGRpdiBjbGFzcz1cInRhYi1jb250ZW50XCIgZGF0YS10YWI9XCJkZWxldGUtbWFuYWdlXCI+XG4gICAgICAgICAgPGRpdiBjbGFzcz1cImRlbGV0ZS1tYW5hZ2Utc2VjdGlvblwiPlxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cImNvbnRyb2wtYmFyXCI+XG4gICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJzZWxlY3Rpb24tY29udHJvbHNcIj5cbiAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzPVwic2VsZWN0LWFsbC1idG5cIj7lhajpgIk8L2J1dHRvbj5cbiAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzPVwiZGVzZWxlY3QtYWxsLWJ0blwiPuWPlua2iOmAieaLqTwvYnV0dG9uPlxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz1cImRlbGV0ZS1zZWxlY3RlZC1idG5cIj7liKDpmaTpgInkuK08L2J1dHRvbj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cInN0aWNrZXItbGlzdC1jb250YWluZXJcIj5cbiAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cInN0aWNrZXItZ3JpZFwiIGlkPVwiZGVsZXRlLXN0aWNrZXItZ3JpZFwiPlxuICAgICAgICAgICAgICAgIDwhLS0g6KGo5oOF5YyF5YiX6KGo5bCG5Zyo6L+Z6YeM5Yqo5oCB55Sf5oiQIC0tPlxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvZGl2PlxuICAgICAgPGRpdiBjbGFzcz1cInN0aWNrZXItbWFuYWdlci1mb290ZXJcIj5cbiAgICAgICAgPGJ1dHRvbiBjbGFzcz1cImRpYWxvZy1idXR0b25cIj7lhbPpl608L2J1dHRvbj5cbiAgICAgIDwvZGl2PlxuICAgIGA7XG5cbiAgICAvLyDojrflj5ZET03lhYPntKBcbiAgICBjb25zdCB0YWJCdXR0b25zID0gY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3JBbGwoJy50YWItYnV0dG9uJykgYXMgTm9kZUxpc3RPZjxIVE1MRWxlbWVudD47XG4gICAgY29uc3QgdGFiQ29udGVudHMgPSBjb250YWluZXIucXVlcnlTZWxlY3RvckFsbCgnLnRhYi1jb250ZW50JykgYXMgTm9kZUxpc3RPZjxIVE1MRWxlbWVudD47XG4gICAgY29uc3QgY2xvc2VCdG4gPSBjb250YWluZXIucXVlcnlTZWxlY3RvcignLmRpYWxvZy1idXR0b24nKSBhcyBIVE1MQnV0dG9uRWxlbWVudDtcblxuICAgIC8vIOa3u+WKoOihqOaDheebuOWFs+WFg+e0oFxuICAgIGNvbnN0IGxhYmVsSW5wdXQgPSBjb250YWluZXIucXVlcnlTZWxlY3RvcignI3N0aWNrZXItbGFiZWwnKSBhcyBIVE1MSW5wdXRFbGVtZW50O1xuICAgIGNvbnN0IHVybElucHV0ID0gY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJyNzdGlja2VyLXVybCcpIGFzIEhUTUxJbnB1dEVsZW1lbnQ7XG4gICAgY29uc3QgcHJldmlld0ltZyA9IGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcjcHJldmlldy1pbWcnKSBhcyBIVE1MSW1hZ2VFbGVtZW50O1xuICAgIGNvbnN0IGFkZFN0aWNrZXJCdG4gPSBjb250YWluZXIucXVlcnlTZWxlY3RvcignLmFkZC1zdGlja2VyLWJ0bicpIGFzIEhUTUxCdXR0b25FbGVtZW50O1xuXG4gICAgLy8g5om56YeP5re75Yqg55u45YWz5YWD57SgXG4gICAgY29uc3QgYmF0Y2hUZXh0YXJlYSA9IGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcjYmF0Y2gtdGV4dGFyZWEnKSBhcyBIVE1MVGV4dEFyZWFFbGVtZW50O1xuICAgIGNvbnN0IGJhdGNoQWRkQnRuID0gY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy5iYXRjaC1hZGQtYnRuJykgYXMgSFRNTEJ1dHRvbkVsZW1lbnQ7XG5cbiAgICAvLyDliKDpmaTnrqHnkIbnm7jlhbPlhYPntKBcbiAgICBjb25zdCBzZWxlY3RBbGxCdG4gPSBjb250YWluZXIucXVlcnlTZWxlY3RvcignLnNlbGVjdC1hbGwtYnRuJykgYXMgSFRNTEJ1dHRvbkVsZW1lbnQ7XG4gICAgY29uc3QgZGVzZWxlY3RBbGxCdG4gPSBjb250YWluZXIucXVlcnlTZWxlY3RvcignLmRlc2VsZWN0LWFsbC1idG4nKSBhcyBIVE1MQnV0dG9uRWxlbWVudDtcbiAgICBjb25zdCBkZWxldGVTZWxlY3RlZEJ0biA9IGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcuZGVsZXRlLXNlbGVjdGVkLWJ0bicpIGFzIEhUTUxCdXR0b25FbGVtZW50O1xuICAgIGNvbnN0IGRlbGV0ZVN0aWNrZXJHcmlkID0gY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJyNkZWxldGUtc3RpY2tlci1ncmlkJykgYXMgSFRNTEVsZW1lbnQ7XG5cbiAgICAvLyDmoIfnrb7pobXliIfmjaLlip/og71cbiAgICB0YWJCdXR0b25zLmZvckVhY2goYnV0dG9uID0+IHtcbiAgICAgIGJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgY29uc3QgdGFyZ2V0VGFiID0gYnV0dG9uLmRhdGFzZXQudGFiO1xuXG4gICAgICAgIC8vIOenu+mZpOaJgOaciea0u+WKqOeKtuaAgVxuICAgICAgICB0YWJCdXR0b25zLmZvckVhY2goYnRuID0+IGJ0bi5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKSk7XG4gICAgICAgIHRhYkNvbnRlbnRzLmZvckVhY2goY29udGVudCA9PiBjb250ZW50LmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpKTtcblxuICAgICAgICAvLyDorr7nva7lvZPliY3moIfnrb7kuLrmtLvliqjnirbmgIFcbiAgICAgICAgYnV0dG9uLmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZScpO1xuICAgICAgICBjb25zdCB0YXJnZXRDb250ZW50ID0gY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoYC50YWItY29udGVudFtkYXRhLXRhYj1cIiR7dGFyZ2V0VGFifVwiXWApO1xuICAgICAgICBpZiAodGFyZ2V0Q29udGVudCkge1xuICAgICAgICAgIHRhcmdldENvbnRlbnQuY2xhc3NMaXN0LmFkZCgnYWN0aXZlJyk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyDlpoLmnpzliIfmjaLliLDliKDpmaTnrqHnkIbmoIfnrb7pobXvvIzmuLLmn5Pooajmg4XljIXliJfooahcbiAgICAgICAgaWYgKHRhcmdldFRhYiA9PT0gJ2RlbGV0ZS1tYW5hZ2UnKSB7XG4gICAgICAgICAgcmVuZGVyRGVsZXRlU3RpY2tlckxpc3QoKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICAvLyBVUkzovpPlhaXpooTop4jlip/og71cbiAgICB1cmxJbnB1dC5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsICgpID0+IHtcbiAgICAgIGlmICh1cmxJbnB1dC52YWx1ZS50cmltKCkpIHtcbiAgICAgICAgcHJldmlld0ltZy5zcmMgPSB1cmxJbnB1dC52YWx1ZS50cmltKCk7XG4gICAgICAgIHByZXZpZXdJbWcuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBwcmV2aWV3SW1nLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICAvLyDmt7vliqDljZXkuKrooajmg4XljIVcbiAgICBhZGRTdGlja2VyQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgY29uc3QgbGFiZWwgPSBsYWJlbElucHV0LnZhbHVlLnRyaW0oKTtcbiAgICAgIGNvbnN0IHVybCA9IHVybElucHV0LnZhbHVlLnRyaW0oKTtcblxuICAgICAgaWYgKCFsYWJlbCB8fCAhdXJsKSB7XG4gICAgICAgIGFsZXJ0KCfor7fovpPlhaXooajmg4XlkI3np7DlkoxVUkwnKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBHTE9CQUxfU1RJQ0tFUl9TVE9SQUdFX0tFWSA9ICdibG14X3dlY2hhdF9zdGlja2Vyc19nbG9iYWwnO1xuICAgICAgY29uc3QgZXhpc3RpbmdTdGlja2VycyA9IFNhZmVTdG9yYWdlLmdldEl0ZW08YW55W10+KEdMT0JBTF9TVElDS0VSX1NUT1JBR0VfS0VZLCBbXSkgfHwgW107XG5cbiAgICAgIGNvbnN0IG5ld1N0aWNrZXIgPSB7IGxhYmVsLCB1cmwgfTtcbiAgICAgIGV4aXN0aW5nU3RpY2tlcnMucHVzaChuZXdTdGlja2VyKTtcblxuICAgICAgU2FmZVN0b3JhZ2Uuc2V0SXRlbShHTE9CQUxfU1RJQ0tFUl9TVE9SQUdFX0tFWSwgZXhpc3RpbmdTdGlja2Vycyk7XG4gICAgICBhbGVydCgn6KGo5oOF5YyF5re75Yqg5oiQ5Yqf77yBJyk7XG5cbiAgICAgIC8vIOa4heepuui+k+WFpeahhlxuICAgICAgbGFiZWxJbnB1dC52YWx1ZSA9ICcnO1xuICAgICAgdXJsSW5wdXQudmFsdWUgPSAnJztcbiAgICAgIHByZXZpZXdJbWcuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICB9KTtcblxuICAgIC8vIOaJuemHj+a3u+WKoOihqOaDheWMhVxuICAgIGJhdGNoQWRkQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgY29uc3QgaW5wdXQgPSBiYXRjaFRleHRhcmVhLnZhbHVlLnRyaW0oKTtcbiAgICAgIGlmICghaW5wdXQpIHtcbiAgICAgICAgYWxlcnQoJ+ivt+i+k+WFpeihqOaDheWMheaVsOaNricpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IEdMT0JBTF9TVElDS0VSX1NUT1JBR0VfS0VZID0gJ2JsbXhfd2VjaGF0X3N0aWNrZXJzX2dsb2JhbCc7XG4gICAgICBjb25zdCBwYWlycyA9IGlucHV0LnNwbGl0KCcsJyk7XG4gICAgICBjb25zdCBuZXdTdGlja2VycyA9IFtdO1xuXG4gICAgICBmb3IgKGNvbnN0IHBhaXIgb2YgcGFpcnMpIHtcbiAgICAgICAgLy8g5p+l5om+VVJM6YOo5YiG55qE6LW35aeL5L2N572uIC0g6YCa5bi45pivaHR0cOaIlmh0dHBz5byA5aS0XG4gICAgICAgIGNvbnN0IHVybFN0YXJ0SW5kZXggPSBwYWlyLmluZGV4T2YoJ2h0dHAnKTtcblxuICAgICAgICBpZiAodXJsU3RhcnRJbmRleCA+IDApIHtcbiAgICAgICAgICBjb25zdCBsYWJlbCA9IHBhaXIuc3Vic3RyaW5nKDAsIHVybFN0YXJ0SW5kZXgpLnRyaW0oKTtcbiAgICAgICAgICBjb25zdCB1cmwgPSBwYWlyLnN1YnN0cmluZyh1cmxTdGFydEluZGV4KS50cmltKCk7XG5cbiAgICAgICAgICBpZiAobGFiZWwgJiYgdXJsKSB7XG4gICAgICAgICAgICBuZXdTdGlja2Vycy5wdXNoKHsgbGFiZWwsIHVybCB9KTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZiAocGFpci5pbmNsdWRlcygnPScpKSB7XG4gICAgICAgICAgLy8g5pSv5oyBbGFiZWw9dXJs5qC85byPXG4gICAgICAgICAgY29uc3QgW2xhYmVsLCB1cmxdID0gcGFpci5zcGxpdCgnPScpLm1hcChwYXJ0ID0+IHBhcnQudHJpbSgpKTtcbiAgICAgICAgICBpZiAobGFiZWwgJiYgdXJsKSB7XG4gICAgICAgICAgICBuZXdTdGlja2Vycy5wdXNoKHsgbGFiZWwsIHVybCB9KTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKG5ld1N0aWNrZXJzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgY29uc3QgZXhpc3RpbmdTdGlja2VycyA9IFNhZmVTdG9yYWdlLmdldEl0ZW08YW55W10+KEdMT0JBTF9TVElDS0VSX1NUT1JBR0VfS0VZLCBbXSkgfHwgW107XG4gICAgICAgIGNvbnN0IHVwZGF0ZWRTdGlja2VycyA9IFsuLi5leGlzdGluZ1N0aWNrZXJzLCAuLi5uZXdTdGlja2Vyc107XG4gICAgICAgIFNhZmVTdG9yYWdlLnNldEl0ZW0oR0xPQkFMX1NUSUNLRVJfU1RPUkFHRV9LRVksIHVwZGF0ZWRTdGlja2Vycyk7XG4gICAgICAgIGFsZXJ0KGAke25ld1N0aWNrZXJzLmxlbmd0aH0g5Liq6KGo5oOF5YyF5bey5re75Yqg77yBYCk7XG4gICAgICAgIGJhdGNoVGV4dGFyZWEudmFsdWUgPSAnJztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGFsZXJ0KCfmnKrmib7liLDmnInmlYjnmoTooajmg4XljIXmoLzlvI/jgILor7fmjInnhafkuIrmlrnnmoTmoLzlvI/or7TmmI7ovpPlhaXjgIInKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIC8vIOa4suafk+WIoOmZpOeuoeeQhueahOihqOaDheWMheWIl+ihqFxuICAgIGNvbnN0IHJlbmRlckRlbGV0ZVN0aWNrZXJMaXN0ID0gKCkgPT4ge1xuICAgICAgY29uc3QgR0xPQkFMX1NUSUNLRVJfU1RPUkFHRV9LRVkgPSAnYmxteF93ZWNoYXRfc3RpY2tlcnNfZ2xvYmFsJztcbiAgICAgIGNvbnN0IHN0aWNrZXJzID0gU2FmZVN0b3JhZ2UuZ2V0SXRlbTxhbnlbXT4oR0xPQkFMX1NUSUNLRVJfU1RPUkFHRV9LRVksIFtdKSB8fCBbXTtcblxuICAgICAgZGVsZXRlU3RpY2tlckdyaWQuaW5uZXJIVE1MID0gJyc7XG5cbiAgICAgIGlmIChzdGlja2Vycy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgY29uc3Qgbm9TdGlja2Vyc01zZyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICBub1N0aWNrZXJzTXNnLnRleHRDb250ZW50ID0gJ+ayoeacieihqOaDheWMhe+8jOivt+eCueWHu1wi5re75Yqg6KGo5oOFXCLmoIfnrb7mt7vliqDjgIInO1xuICAgICAgICBub1N0aWNrZXJzTXNnLmNsYXNzTmFtZSA9ICduby1zdGlja2Vycy1tc2cnO1xuICAgICAgICBkZWxldGVTdGlja2VyR3JpZC5hcHBlbmRDaGlsZChub1N0aWNrZXJzTXNnKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBzdGlja2Vycy5mb3JFYWNoKChzdGlja2VyOiBhbnksIGluZGV4OiBudW1iZXIpID0+IHtcbiAgICAgICAgY29uc3Qgc3RpY2tlckl0ZW0gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgc3RpY2tlckl0ZW0uY2xhc3NOYW1lID0gJ3N0aWNrZXItaXRlbSc7XG5cbiAgICAgICAgLy8g5Yib5bu66ZqQ6JeP55qE5Y6f55SfY2hlY2tib3hcbiAgICAgICAgY29uc3QgY2hlY2tib3ggPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbnB1dCcpO1xuICAgICAgICBjaGVja2JveC50eXBlID0gJ2NoZWNrYm94JztcbiAgICAgICAgY2hlY2tib3guY2xhc3NOYW1lID0gJ3N0aWNrZXItY2hlY2tib3gnO1xuICAgICAgICBjaGVja2JveC5kYXRhc2V0LmluZGV4ID0gaW5kZXgudG9TdHJpbmcoKTtcblxuICAgICAgICAvLyDliJvlu7rlj6/op4HnmoRjaGVja2JveOaMiemSrlxuICAgICAgICBjb25zdCBjaGVja2JveEJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICBjaGVja2JveEJ1dHRvbi5jbGFzc05hbWUgPSAnc3RpY2tlci1jaGVja2JveC1idXR0b24nO1xuXG4gICAgICAgIC8vIOWIm+W7uuWFtuS7luWFg+e0oFxuICAgICAgICBjb25zdCBzdGlja2VySW1nID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW1nJyk7XG4gICAgICAgIHN0aWNrZXJJbWcuc3JjID0gc3RpY2tlci51cmw7XG4gICAgICAgIHN0aWNrZXJJbWcuYWx0ID0gc3RpY2tlci5sYWJlbDtcbiAgICAgICAgc3RpY2tlckltZy5jbGFzc05hbWUgPSAnc3RpY2tlci1wcmV2aWV3JztcblxuICAgICAgICBjb25zdCBzdGlja2VyTGFiZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgc3RpY2tlckxhYmVsLmNsYXNzTmFtZSA9ICdzdGlja2VyLWxhYmVsJztcbiAgICAgICAgc3RpY2tlckxhYmVsLnRleHRDb250ZW50ID0gc3RpY2tlci5sYWJlbDtcblxuICAgICAgICAvLyDmm7TmlrBjaGVja2JveOaMiemSrueKtuaAgVxuICAgICAgICBjb25zdCB1cGRhdGVDaGVja2JveFN0YXRlID0gKGNoZWNrZWQ6IGJvb2xlYW4pID0+IHtcbiAgICAgICAgICBpZiAoY2hlY2tlZCkge1xuICAgICAgICAgICAgY2hlY2tib3hCdXR0b24uY2xhc3NMaXN0LmFkZCgnY2hlY2tlZCcpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjaGVja2JveEJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKCdjaGVja2VkJyk7XG4gICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgIC8vIOeCueWHu+S6i+S7tlxuICAgICAgICBjb25zdCBoYW5kbGVDbGljayA9IChlOiBFdmVudCkgPT4ge1xuICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICAgIGNoZWNrYm94LmNoZWNrZWQgPSAhY2hlY2tib3guY2hlY2tlZDtcbiAgICAgICAgICB1cGRhdGVDaGVja2JveFN0YXRlKGNoZWNrYm94LmNoZWNrZWQpO1xuICAgICAgICB9O1xuXG4gICAgICAgIHN0aWNrZXJJdGVtLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgaGFuZGxlQ2xpY2spO1xuICAgICAgICBjaGVja2JveEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGhhbmRsZUNsaWNrKTtcblxuICAgICAgICAvLyDnu4Too4XlhYPntKBcbiAgICAgICAgc3RpY2tlckl0ZW0uYXBwZW5kQ2hpbGQoY2hlY2tib3gpO1xuICAgICAgICBzdGlja2VySXRlbS5hcHBlbmRDaGlsZChjaGVja2JveEJ1dHRvbik7XG4gICAgICAgIHN0aWNrZXJJdGVtLmFwcGVuZENoaWxkKHN0aWNrZXJJbWcpO1xuICAgICAgICBzdGlja2VySXRlbS5hcHBlbmRDaGlsZChzdGlja2VyTGFiZWwpO1xuXG4gICAgICAgIGRlbGV0ZVN0aWNrZXJHcmlkLmFwcGVuZENoaWxkKHN0aWNrZXJJdGVtKTtcblxuICAgICAgICAvLyDorr7nva7liJ3lp4vnirbmgIFcbiAgICAgICAgdXBkYXRlQ2hlY2tib3hTdGF0ZShjaGVja2JveC5jaGVja2VkKTtcbiAgICAgIH0pO1xuICAgIH07XG5cbiAgICAvLyDlhajpgInlip/og71cbiAgICBzZWxlY3RBbGxCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICBjb25zdCBjaGVja2JveGVzID0gZGVsZXRlU3RpY2tlckdyaWQucXVlcnlTZWxlY3RvckFsbCgnLnN0aWNrZXItY2hlY2tib3gnKSBhcyBOb2RlTGlzdE9mPEhUTUxJbnB1dEVsZW1lbnQ+O1xuICAgICAgY29uc3QgY2hlY2tib3hCdXR0b25zID0gZGVsZXRlU3RpY2tlckdyaWQucXVlcnlTZWxlY3RvckFsbCgnLnN0aWNrZXItY2hlY2tib3gtYnV0dG9uJyk7XG5cbiAgICAgIGNoZWNrYm94ZXMuZm9yRWFjaCgoY2hlY2tib3gsIGluZGV4KSA9PiB7XG4gICAgICAgIGNoZWNrYm94LmNoZWNrZWQgPSB0cnVlO1xuICAgICAgICBjaGVja2JveEJ1dHRvbnNbaW5kZXhdPy5jbGFzc0xpc3QuYWRkKCdjaGVja2VkJyk7XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIC8vIOWPlua2iOmAieaLqeWKn+iDvVxuICAgIGRlc2VsZWN0QWxsQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgY29uc3QgY2hlY2tib3hlcyA9IGRlbGV0ZVN0aWNrZXJHcmlkLnF1ZXJ5U2VsZWN0b3JBbGwoJy5zdGlja2VyLWNoZWNrYm94JykgYXMgTm9kZUxpc3RPZjxIVE1MSW5wdXRFbGVtZW50PjtcbiAgICAgIGNvbnN0IGNoZWNrYm94QnV0dG9ucyA9IGRlbGV0ZVN0aWNrZXJHcmlkLnF1ZXJ5U2VsZWN0b3JBbGwoJy5zdGlja2VyLWNoZWNrYm94LWJ1dHRvbicpO1xuXG4gICAgICBjaGVja2JveGVzLmZvckVhY2goKGNoZWNrYm94LCBpbmRleCkgPT4ge1xuICAgICAgICBjaGVja2JveC5jaGVja2VkID0gZmFsc2U7XG4gICAgICAgIGNoZWNrYm94QnV0dG9uc1tpbmRleF0/LmNsYXNzTGlzdC5yZW1vdmUoJ2NoZWNrZWQnKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgLy8g5Yig6Zmk6YCJ5Lit5Yqf6IO9XG4gICAgZGVsZXRlU2VsZWN0ZWRCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICBjb25zdCBjaGVja2JveGVzID0gZGVsZXRlU3RpY2tlckdyaWQucXVlcnlTZWxlY3RvckFsbChcbiAgICAgICAgJy5zdGlja2VyLWNoZWNrYm94OmNoZWNrZWQnLFxuICAgICAgKSBhcyBOb2RlTGlzdE9mPEhUTUxJbnB1dEVsZW1lbnQ+O1xuXG4gICAgICBpZiAoY2hlY2tib3hlcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgYWxlcnQoJ+ivt+mAieaLqeimgeWIoOmZpOeahOihqOaDheWMhScpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIGlmIChjb25maXJtKGDnoa7lrpropoHliKDpmaTpgInkuK3nmoQgJHtjaGVja2JveGVzLmxlbmd0aH0g5Liq6KGo5oOF5YyF5ZCX77yfYCkpIHtcbiAgICAgICAgY29uc3QgR0xPQkFMX1NUSUNLRVJfU1RPUkFHRV9LRVkgPSAnYmxteF93ZWNoYXRfc3RpY2tlcnNfZ2xvYmFsJztcbiAgICAgICAgY29uc3Qgc3RpY2tlcnMgPSBTYWZlU3RvcmFnZS5nZXRJdGVtPGFueVtdPihHTE9CQUxfU1RJQ0tFUl9TVE9SQUdFX0tFWSwgW10pIHx8IFtdO1xuXG4gICAgICAgIC8vIOiOt+WPluimgeWIoOmZpOeahOe0ouW8le+8iOS7juWkp+WIsOWwj+aOkuW6j++8jOmBv+WFjeWIoOmZpOaXtue0ouW8leWPmOWMlu+8iVxuICAgICAgICBjb25zdCBpbmRpY2VzVG9EZWxldGUgPSAod2luZG93IGFzIGFueSkuXy5jaGFpbihjaGVja2JveGVzKVxuICAgICAgICAgIC5tYXAoKGNoZWNrYm94OiBIVE1MSW5wdXRFbGVtZW50KSA9PiBwYXJzZUludChjaGVja2JveC5kYXRhc2V0LmluZGV4ISkpXG4gICAgICAgICAgLnNvcnRCeSgpXG4gICAgICAgICAgLnJldmVyc2UoKVxuICAgICAgICAgIC52YWx1ZSgpO1xuXG4gICAgICAgIC8vIOWIoOmZpOmAieS4reeahOihqOaDheWMhVxuICAgICAgICBpbmRpY2VzVG9EZWxldGUuZm9yRWFjaCgoaW5kZXg6IG51bWJlcikgPT4ge1xuICAgICAgICAgIHN0aWNrZXJzLnNwbGljZShpbmRleCwgMSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIFNhZmVTdG9yYWdlLnNldEl0ZW0oR0xPQkFMX1NUSUNLRVJfU1RPUkFHRV9LRVksIHN0aWNrZXJzKTtcbiAgICAgICAgYWxlcnQoYOW3suWIoOmZpCAke2NoZWNrYm94ZXMubGVuZ3RofSDkuKrooajmg4XljIVgKTtcblxuICAgICAgICAvLyDph43mlrDmuLLmn5PliJfooahcbiAgICAgICAgcmVuZGVyRGVsZXRlU3RpY2tlckxpc3QoKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIC8vIOWFs+mXreaMiemSruS6i+S7tlxuICAgIGNsb3NlQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZChtb2RhbCk7XG4gICAgfSk7XG5cbiAgICAvLyDngrnlh7vpga7nvanlsYLlhbPpl61cbiAgICBtb2RhbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGUgPT4ge1xuICAgICAgaWYgKGUudGFyZ2V0ID09PSBtb2RhbCkge1xuICAgICAgICBkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKG1vZGFsKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIG1vZGFsLmFwcGVuZENoaWxkKGNvbnRhaW5lcik7XG4gICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChtb2RhbCk7XG4gIH1cbn1cbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/同层手机/event-handler.ts\n")},"./src/同层手机/event-manager.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   EventManager: () => (/* binding */ EventManager),\n/* harmony export */   globalEventManager: () => (/* binding */ globalEventManager)\n/* harmony export */ });\n/**\n * 事件管理器\n * 统一管理全局事件监听器和定时器，防止内存泄漏\n */\nclass EventManager {\n    listeners = [];\n    timers = new Set();\n    intervals = new Set();\n    isDestroyed = false;\n    /**\n     * 添加全局事件监听器\n     * @param event 事件名称\n     * @param handler 事件处理函数\n     * @returns 清理函数\n     */\n    addGlobalListener(event, handler) {\n        if (this.isDestroyed) {\n            console.warn('[EventManager] 尝试在已销毁的管理器上添加监听器');\n            return () => { };\n        }\n        const cleanup = window.eventOn(event, handler);\n        if (cleanup && typeof cleanup === 'function') {\n            this.listeners.push(cleanup);\n            return cleanup;\n        }\n        else {\n            console.warn(`[EventManager] 无法为事件 ${event} 创建清理函数`);\n            return () => { };\n        }\n    }\n    /**\n     * 添加DOM事件监听器\n     * @param element DOM元素\n     * @param event 事件类型\n     * @param handler 事件处理函数\n     * @param options 事件选项\n     */\n    addDOMListener(element, event, handler, options) {\n        if (this.isDestroyed) {\n            console.warn('[EventManager] 尝试在已销毁的管理器上添加DOM监听器');\n            return;\n        }\n        element.addEventListener(event, handler, options);\n        // 创建清理函数\n        const cleanup = () => {\n            element.removeEventListener(event, handler, options);\n        };\n        this.listeners.push(cleanup);\n    }\n    /**\n     * 安全的setTimeout\n     * @param callback 回调函数\n     * @param delay 延迟时间\n     * @returns 定时器ID\n     */\n    setTimeout(callback, delay) {\n        if (this.isDestroyed) {\n            console.warn('[EventManager] 尝试在已销毁的管理器上创建定时器');\n            return -1;\n        }\n        const timerId = window.setTimeout(() => {\n            this.timers.delete(timerId);\n            try {\n                callback();\n            }\n            catch (error) {\n                console.error('[EventManager] 定时器回调执行错误:', error);\n            }\n        }, delay);\n        this.timers.add(timerId);\n        return timerId;\n    }\n    /**\n     * 安全的setInterval\n     * @param callback 回调函数\n     * @param interval 间隔时间\n     * @returns 定时器ID\n     */\n    setInterval(callback, interval) {\n        if (this.isDestroyed) {\n            console.warn('[EventManager] 尝试在已销毁的管理器上创建间隔定时器');\n            return -1;\n        }\n        const intervalId = window.setInterval(() => {\n            try {\n                callback();\n            }\n            catch (error) {\n                console.error('[EventManager] 间隔定时器回调执行错误:', error);\n            }\n        }, interval);\n        this.intervals.add(intervalId);\n        return intervalId;\n    }\n    /**\n     * 清除指定的定时器\n     * @param timerId 定时器ID\n     */\n    clearTimeout(timerId) {\n        if (this.timers.has(timerId)) {\n            window.clearTimeout(timerId);\n            this.timers.delete(timerId);\n        }\n    }\n    /**\n     * 清除指定的间隔定时器\n     * @param intervalId 间隔定时器ID\n     */\n    clearInterval(intervalId) {\n        if (this.intervals.has(intervalId)) {\n            window.clearInterval(intervalId);\n            this.intervals.delete(intervalId);\n        }\n    }\n    /**\n     * 清理所有监听器和定时器\n     */\n    cleanup() {\n        if (this.isDestroyed) {\n            return;\n        }\n        // 清理事件监听器\n        this.listeners.forEach(cleanup => {\n            try {\n                cleanup();\n            }\n            catch (error) {\n                console.error('[EventManager] 清理监听器时出错:', error);\n            }\n        });\n        this.listeners = [];\n        // 清理定时器\n        this.timers.forEach(timerId => {\n            window.clearTimeout(timerId);\n        });\n        this.timers.clear();\n        // 清理间隔定时器\n        this.intervals.forEach(intervalId => {\n            window.clearInterval(intervalId);\n        });\n        this.intervals.clear();\n        this.isDestroyed = true;\n        console.log('[EventManager] 所有资源已清理');\n    }\n    /**\n     * 获取当前状态信息\n     */\n    getStatus() {\n        return {\n            listenersCount: this.listeners.length,\n            timersCount: this.timers.size,\n            intervalsCount: this.intervals.size,\n            isDestroyed: this.isDestroyed,\n        };\n    }\n    /**\n     * 检查是否已销毁\n     */\n    isDestroyed_() {\n        return this.isDestroyed;\n    }\n}\n/**\n * 全局事件管理器实例\n * 用于管理应用级别的事件监听器\n */\nconst globalEventManager = new EventManager();\n/**\n * 在页面卸载时自动清理全局事件管理器\n */\nif (typeof window !== 'undefined') {\n    window.addEventListener('beforeunload', () => {\n        globalEventManager.cleanup();\n    });\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LElBQUksT0FBTyxNQUFNLEtBQUssV0FBVyxFQUFFLENBQUM7SUFDbEMsTUFBTSxDQUFDLGdCQUFnQixDQUFDLGNBQWMsRUFBRSxHQUFHLEVBQUU7UUFDM0Msa0JBQWtCLENBQUMsT0FBTyxFQUFFLENBQUM7SUFDL0IsQ0FBQyxDQUFDLENBQUM7QUFDTCxDQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdGF2ZXJuX2hlbHBlcl90ZW1wbGF0ZS8uL3NyYy/lkIzlsYLmiYvmnLovZXZlbnQtbWFuYWdlci50cz8iXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiDkuovku7bnrqHnkIblmahcbiAqIOe7n+S4gOeuoeeQhuWFqOWxgOS6i+S7tuebkeWQrOWZqOWSjOWumuaXtuWZqO+8jOmYsuatouWGheWtmOazhOa8j1xuICovXG5cbmV4cG9ydCBjbGFzcyBFdmVudE1hbmFnZXIge1xuICBwcml2YXRlIGxpc3RlbmVyczogQXJyYXk8KCkgPT4gdm9pZD4gPSBbXTtcbiAgcHJpdmF0ZSB0aW1lcnM6IFNldDxudW1iZXI+ID0gbmV3IFNldCgpO1xuICBwcml2YXRlIGludGVydmFsczogU2V0PG51bWJlcj4gPSBuZXcgU2V0KCk7XG4gIHByaXZhdGUgaXNEZXN0cm95ZWQ6IGJvb2xlYW4gPSBmYWxzZTtcblxuICAvKipcbiAgICog5re75Yqg5YWo5bGA5LqL5Lu255uR5ZCs5ZmoXG4gICAqIEBwYXJhbSBldmVudCDkuovku7blkI3np7BcbiAgICogQHBhcmFtIGhhbmRsZXIg5LqL5Lu25aSE55CG5Ye95pWwXG4gICAqIEByZXR1cm5zIOa4heeQhuWHveaVsFxuICAgKi9cbiAgYWRkR2xvYmFsTGlzdGVuZXIoZXZlbnQ6IHN0cmluZywgaGFuZGxlcjogRnVuY3Rpb24pOiAoKSA9PiB2b2lkIHtcbiAgICBpZiAodGhpcy5pc0Rlc3Ryb3llZCkge1xuICAgICAgY29uc29sZS53YXJuKCdbRXZlbnRNYW5hZ2VyXSDlsJ3or5XlnKjlt7LplIDmr4HnmoTnrqHnkIblmajkuIrmt7vliqDnm5HlkKzlmagnKTtcbiAgICAgIHJldHVybiAoKSA9PiB7fTtcbiAgICB9XG5cbiAgICBjb25zdCBjbGVhbnVwID0gKHdpbmRvdyBhcyBhbnkpLmV2ZW50T24oZXZlbnQsIGhhbmRsZXIpO1xuICAgIGlmIChjbGVhbnVwICYmIHR5cGVvZiBjbGVhbnVwID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICB0aGlzLmxpc3RlbmVycy5wdXNoKGNsZWFudXApO1xuICAgICAgcmV0dXJuIGNsZWFudXA7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnNvbGUud2FybihgW0V2ZW50TWFuYWdlcl0g5peg5rOV5Li65LqL5Lu2ICR7ZXZlbnR9IOWIm+W7uua4heeQhuWHveaVsGApO1xuICAgICAgcmV0dXJuICgpID0+IHt9O1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiDmt7vliqBET03kuovku7bnm5HlkKzlmahcbiAgICogQHBhcmFtIGVsZW1lbnQgRE9N5YWD57SgXG4gICAqIEBwYXJhbSBldmVudCDkuovku7bnsbvlnotcbiAgICogQHBhcmFtIGhhbmRsZXIg5LqL5Lu25aSE55CG5Ye95pWwXG4gICAqIEBwYXJhbSBvcHRpb25zIOS6i+S7tumAiemhuVxuICAgKi9cbiAgYWRkRE9NTGlzdGVuZXIoXG4gICAgZWxlbWVudDogRWxlbWVudCB8IFdpbmRvdyB8IERvY3VtZW50LFxuICAgIGV2ZW50OiBzdHJpbmcsXG4gICAgaGFuZGxlcjogRXZlbnRMaXN0ZW5lcixcbiAgICBvcHRpb25zPzogYm9vbGVhbiB8IEFkZEV2ZW50TGlzdGVuZXJPcHRpb25zXG4gICk6IHZvaWQge1xuICAgIGlmICh0aGlzLmlzRGVzdHJveWVkKSB7XG4gICAgICBjb25zb2xlLndhcm4oJ1tFdmVudE1hbmFnZXJdIOWwneivleWcqOW3sumUgOavgeeahOeuoeeQhuWZqOS4iua3u+WKoERPTeebkeWQrOWZqCcpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihldmVudCwgaGFuZGxlciwgb3B0aW9ucyk7XG4gICAgXG4gICAgLy8g5Yib5bu65riF55CG5Ye95pWwXG4gICAgY29uc3QgY2xlYW51cCA9ICgpID0+IHtcbiAgICAgIGVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihldmVudCwgaGFuZGxlciwgb3B0aW9ucyk7XG4gICAgfTtcbiAgICBcbiAgICB0aGlzLmxpc3RlbmVycy5wdXNoKGNsZWFudXApO1xuICB9XG5cbiAgLyoqXG4gICAqIOWuieWFqOeahHNldFRpbWVvdXRcbiAgICogQHBhcmFtIGNhbGxiYWNrIOWbnuiwg+WHveaVsFxuICAgKiBAcGFyYW0gZGVsYXkg5bu26L+f5pe26Ze0XG4gICAqIEByZXR1cm5zIOWumuaXtuWZqElEXG4gICAqL1xuICBzZXRUaW1lb3V0KGNhbGxiYWNrOiBGdW5jdGlvbiwgZGVsYXk6IG51bWJlcik6IG51bWJlciB7XG4gICAgaWYgKHRoaXMuaXNEZXN0cm95ZWQpIHtcbiAgICAgIGNvbnNvbGUud2FybignW0V2ZW50TWFuYWdlcl0g5bCd6K+V5Zyo5bey6ZSA5q+B55qE566h55CG5Zmo5LiK5Yib5bu65a6a5pe25ZmoJyk7XG4gICAgICByZXR1cm4gLTE7XG4gICAgfVxuXG4gICAgY29uc3QgdGltZXJJZCA9IHdpbmRvdy5zZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIHRoaXMudGltZXJzLmRlbGV0ZSh0aW1lcklkKTtcbiAgICAgIHRyeSB7XG4gICAgICAgIGNhbGxiYWNrKCk7XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdbRXZlbnRNYW5hZ2VyXSDlrprml7blmajlm57osIPmiafooYzplJnor686JywgZXJyb3IpO1xuICAgICAgfVxuICAgIH0sIGRlbGF5KTtcblxuICAgIHRoaXMudGltZXJzLmFkZCh0aW1lcklkKTtcbiAgICByZXR1cm4gdGltZXJJZDtcbiAgfVxuXG4gIC8qKlxuICAgKiDlronlhajnmoRzZXRJbnRlcnZhbFxuICAgKiBAcGFyYW0gY2FsbGJhY2sg5Zue6LCD5Ye95pWwXG4gICAqIEBwYXJhbSBpbnRlcnZhbCDpl7TpmpTml7bpl7RcbiAgICogQHJldHVybnMg5a6a5pe25ZmoSURcbiAgICovXG4gIHNldEludGVydmFsKGNhbGxiYWNrOiBGdW5jdGlvbiwgaW50ZXJ2YWw6IG51bWJlcik6IG51bWJlciB7XG4gICAgaWYgKHRoaXMuaXNEZXN0cm95ZWQpIHtcbiAgICAgIGNvbnNvbGUud2FybignW0V2ZW50TWFuYWdlcl0g5bCd6K+V5Zyo5bey6ZSA5q+B55qE566h55CG5Zmo5LiK5Yib5bu66Ze06ZqU5a6a5pe25ZmoJyk7XG4gICAgICByZXR1cm4gLTE7XG4gICAgfVxuXG4gICAgY29uc3QgaW50ZXJ2YWxJZCA9IHdpbmRvdy5zZXRJbnRlcnZhbCgoKSA9PiB7XG4gICAgICB0cnkge1xuICAgICAgICBjYWxsYmFjaygpO1xuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignW0V2ZW50TWFuYWdlcl0g6Ze06ZqU5a6a5pe25Zmo5Zue6LCD5omn6KGM6ZSZ6K+vOicsIGVycm9yKTtcbiAgICAgIH1cbiAgICB9LCBpbnRlcnZhbCk7XG5cbiAgICB0aGlzLmludGVydmFscy5hZGQoaW50ZXJ2YWxJZCk7XG4gICAgcmV0dXJuIGludGVydmFsSWQ7XG4gIH1cblxuICAvKipcbiAgICog5riF6Zmk5oyH5a6a55qE5a6a5pe25ZmoXG4gICAqIEBwYXJhbSB0aW1lcklkIOWumuaXtuWZqElEXG4gICAqL1xuICBjbGVhclRpbWVvdXQodGltZXJJZDogbnVtYmVyKTogdm9pZCB7XG4gICAgaWYgKHRoaXMudGltZXJzLmhhcyh0aW1lcklkKSkge1xuICAgICAgd2luZG93LmNsZWFyVGltZW91dCh0aW1lcklkKTtcbiAgICAgIHRoaXMudGltZXJzLmRlbGV0ZSh0aW1lcklkKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICog5riF6Zmk5oyH5a6a55qE6Ze06ZqU5a6a5pe25ZmoXG4gICAqIEBwYXJhbSBpbnRlcnZhbElkIOmXtOmalOWumuaXtuWZqElEXG4gICAqL1xuICBjbGVhckludGVydmFsKGludGVydmFsSWQ6IG51bWJlcik6IHZvaWQge1xuICAgIGlmICh0aGlzLmludGVydmFscy5oYXMoaW50ZXJ2YWxJZCkpIHtcbiAgICAgIHdpbmRvdy5jbGVhckludGVydmFsKGludGVydmFsSWQpO1xuICAgICAgdGhpcy5pbnRlcnZhbHMuZGVsZXRlKGludGVydmFsSWQpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiDmuIXnkIbmiYDmnInnm5HlkKzlmajlkozlrprml7blmahcbiAgICovXG4gIGNsZWFudXAoKTogdm9pZCB7XG4gICAgaWYgKHRoaXMuaXNEZXN0cm95ZWQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyDmuIXnkIbkuovku7bnm5HlkKzlmahcbiAgICB0aGlzLmxpc3RlbmVycy5mb3JFYWNoKGNsZWFudXAgPT4ge1xuICAgICAgdHJ5IHtcbiAgICAgICAgY2xlYW51cCgpO1xuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignW0V2ZW50TWFuYWdlcl0g5riF55CG55uR5ZCs5Zmo5pe25Ye66ZSZOicsIGVycm9yKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICB0aGlzLmxpc3RlbmVycyA9IFtdO1xuXG4gICAgLy8g5riF55CG5a6a5pe25ZmoXG4gICAgdGhpcy50aW1lcnMuZm9yRWFjaCh0aW1lcklkID0+IHtcbiAgICAgIHdpbmRvdy5jbGVhclRpbWVvdXQodGltZXJJZCk7XG4gICAgfSk7XG4gICAgdGhpcy50aW1lcnMuY2xlYXIoKTtcblxuICAgIC8vIOa4heeQhumXtOmalOWumuaXtuWZqFxuICAgIHRoaXMuaW50ZXJ2YWxzLmZvckVhY2goaW50ZXJ2YWxJZCA9PiB7XG4gICAgICB3aW5kb3cuY2xlYXJJbnRlcnZhbChpbnRlcnZhbElkKTtcbiAgICB9KTtcbiAgICB0aGlzLmludGVydmFscy5jbGVhcigpO1xuXG4gICAgdGhpcy5pc0Rlc3Ryb3llZCA9IHRydWU7XG4gICAgY29uc29sZS5sb2coJ1tFdmVudE1hbmFnZXJdIOaJgOaciei1hOa6kOW3sua4heeQhicpO1xuICB9XG5cbiAgLyoqXG4gICAqIOiOt+WPluW9k+WJjeeKtuaAgeS/oeaBr1xuICAgKi9cbiAgZ2V0U3RhdHVzKCk6IHtcbiAgICBsaXN0ZW5lcnNDb3VudDogbnVtYmVyO1xuICAgIHRpbWVyc0NvdW50OiBudW1iZXI7XG4gICAgaW50ZXJ2YWxzQ291bnQ6IG51bWJlcjtcbiAgICBpc0Rlc3Ryb3llZDogYm9vbGVhbjtcbiAgfSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGxpc3RlbmVyc0NvdW50OiB0aGlzLmxpc3RlbmVycy5sZW5ndGgsXG4gICAgICB0aW1lcnNDb3VudDogdGhpcy50aW1lcnMuc2l6ZSxcbiAgICAgIGludGVydmFsc0NvdW50OiB0aGlzLmludGVydmFscy5zaXplLFxuICAgICAgaXNEZXN0cm95ZWQ6IHRoaXMuaXNEZXN0cm95ZWQsXG4gICAgfTtcbiAgfVxuXG4gIC8qKlxuICAgKiDmo4Dmn6XmmK/lkKblt7LplIDmr4FcbiAgICovXG4gIGlzRGVzdHJveWVkXygpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy5pc0Rlc3Ryb3llZDtcbiAgfVxufVxuXG4vKipcbiAqIOWFqOWxgOS6i+S7tueuoeeQhuWZqOWunuS+i1xuICog55So5LqO566h55CG5bqU55So57qn5Yir55qE5LqL5Lu255uR5ZCs5ZmoXG4gKi9cbmV4cG9ydCBjb25zdCBnbG9iYWxFdmVudE1hbmFnZXIgPSBuZXcgRXZlbnRNYW5hZ2VyKCk7XG5cbi8qKlxuICog5Zyo6aG16Z2i5Y246L295pe26Ieq5Yqo5riF55CG5YWo5bGA5LqL5Lu2566h55CG5ZmoXG4gKi9cbmlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJykge1xuICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignYmVmb3JldW5sb2FkJywgKCkgPT4ge1xuICAgIGdsb2JhbEV2ZW50TWFuYWdlci5jbGVhbnVwKCk7XG4gIH0pO1xufVxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/同层手机/event-manager.ts\n")},"./src/同层手机/index.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _app_controller__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./app-controller */ \"./src/同层手机/app-controller.ts\");\n/* harmony import */ var _dialog_manager__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./dialog-manager */ \"./src/同层手机/dialog-manager.ts\");\n/* harmony import */ var _event_handler__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./event-handler */ \"./src/同层手机/event-handler.ts\");\n/* harmony import */ var _style_manager__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./style-manager */ \"./src/同层手机/style-manager.ts\");\n\n\n\n\n// 开发模式标志 - 发布前将此值设置为false\n// 使用window全局变量存储，避免循环依赖\nwindow.BLMX_DEV_MODE = false;\n// 解决循环依赖问题，将EventHandler类存储在全局变量中\nwindow.EventHandlerClass = _event_handler__WEBPACK_IMPORTED_MODULE_2__.EventHandler;\n// 添加全局标志来防止重复处理AI响应\nwindow.BLMX_PROCESSING_AI_RESPONSE = false;\n// 使用jQuery的$(async () => {})语法\n$(async () => {\n    try {\n        console.log('[BLMX] 初始化微信模拟器...');\n        // 重置全局标志，确保页面刷新时不会保留旧的状态\n        window.BLMX_PROCESSING_AI_RESPONSE = false;\n        // 创建并初始化应用控制器\n        const appController = new _app_controller__WEBPACK_IMPORTED_MODULE_0__.AppController();\n        await appController.initialize();\n        // 将控制器实例存储在全局变量中，以便调试\n        window.blmxApp = appController;\n        window.blmxStyleManager = _style_manager__WEBPACK_IMPORTED_MODULE_3__.styleManager;\n        window.dialogManager = _dialog_manager__WEBPACK_IMPORTED_MODULE_1__.DialogManager.getInstance();\n        if (window.BLMX_DEV_MODE) {\n            console.log('[BLMX] 开发模式已启用，已加载测试数据');\n            console.log('[BLMX] 可用的调试命令:');\n            console.log('  window.blmxApp.showTestEntryTypes() - 显示可用的测试数据类型');\n            console.log('  window.blmxApp.addTestEntry(类型) - 添加指定类型的测试数据');\n            console.log('  window.blmxApp.clearDebugData() - 清除所有数据');\n        }\n        console.log('[BLMX] 微信模拟器初始化完成！');\n    }\n    catch (error) {\n        console.error('[BLMX] 初始化失败:', error);\n        // 使用自定义对话框替代alert\n        // 确保手机屏幕元素已经存在\n        setTimeout(() => {\n            const dialogManager = _dialog_manager__WEBPACK_IMPORTED_MODULE_1__.DialogManager.getInstance();\n            dialogManager.alert('初始化失败，请查看控制台获取详细信息。', '错误');\n        }, 500); // 延迟显示对话框，确保DOM已经加载\n    }\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMv5ZCM5bGC5omL5py6L2luZGV4LnRzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQWlEO0FBQ0E7QUFDRjtBQUNBO0FBRS9DLDBCQUEwQjtBQUMxQix3QkFBd0I7QUFDdkIsTUFBYyxDQUFDLGFBQWEsR0FBRyxLQUFLLENBQUM7QUFFdEMsa0NBQWtDO0FBQ2pDLE1BQWMsQ0FBQyxpQkFBaUIsR0FBRyx3REFBWSxDQUFDO0FBRWpELG9CQUFvQjtBQUNuQixNQUFjLENBQUMsMkJBQTJCLEdBQUcsS0FBSyxDQUFDO0FBRXBELCtCQUErQjtBQUMvQixDQUFDLENBQUMsS0FBSyxJQUFJLEVBQUU7SUFDWCxJQUFJLENBQUM7UUFDSCxPQUFPLENBQUMsR0FBRyxDQUFDLG9CQUFvQixDQUFDLENBQUM7UUFFbEMseUJBQXlCO1FBQ3hCLE1BQWMsQ0FBQywyQkFBMkIsR0FBRyxLQUFLLENBQUM7UUFFcEQsY0FBYztRQUNkLE1BQU0sYUFBYSxHQUFHLElBQUksMERBQWEsRUFBRSxDQUFDO1FBQzFDLE1BQU0sYUFBYSxDQUFDLFVBQVUsRUFBRSxDQUFDO1FBRWpDLHNCQUFzQjtRQUNyQixNQUFjLENBQUMsT0FBTyxHQUFHLGFBQWEsQ0FBQztRQUN2QyxNQUFjLENBQUMsZ0JBQWdCLEdBQUcsd0RBQVksQ0FBQztRQUMvQyxNQUFjLENBQUMsYUFBYSxHQUFHLDBEQUFhLENBQUMsV0FBVyxFQUFFLENBQUM7UUFFNUQsSUFBSyxNQUFjLENBQUMsYUFBYSxFQUFFLENBQUM7WUFDbEMsT0FBTyxDQUFDLEdBQUcsQ0FBQyx3QkFBd0IsQ0FBQyxDQUFDO1lBQ3RDLE9BQU8sQ0FBQyxHQUFHLENBQUMsaUJBQWlCLENBQUMsQ0FBQztZQUMvQixPQUFPLENBQUMsR0FBRyxDQUFDLHFEQUFxRCxDQUFDLENBQUM7WUFDbkUsT0FBTyxDQUFDLEdBQUcsQ0FBQyxpREFBaUQsQ0FBQyxDQUFDO1lBQy9ELE9BQU8sQ0FBQyxHQUFHLENBQUMsNENBQTRDLENBQUMsQ0FBQztRQUM1RCxDQUFDO1FBRUQsT0FBTyxDQUFDLEdBQUcsQ0FBQyxvQkFBb0IsQ0FBQyxDQUFDO0lBQ3BDLENBQUM7SUFBQyxPQUFPLEtBQUssRUFBRSxDQUFDO1FBQ2YsT0FBTyxDQUFDLEtBQUssQ0FBQyxlQUFlLEVBQUUsS0FBSyxDQUFDLENBQUM7UUFFdEMsa0JBQWtCO1FBQ2xCLGVBQWU7UUFDZixVQUFVLENBQUMsR0FBRyxFQUFFO1lBQ2QsTUFBTSxhQUFhLEdBQUcsMERBQWEsQ0FBQyxXQUFXLEVBQUUsQ0FBQztZQUNsRCxhQUFhLENBQUMsS0FBSyxDQUFDLHFCQUFxQixFQUFFLElBQUksQ0FBQyxDQUFDO1FBQ25ELENBQUMsRUFBRSxHQUFHLENBQUMsQ0FBQyxDQUFDLG9CQUFvQjtJQUMvQixDQUFDO0FBQ0gsQ0FBQyxDQUFDLENBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly90YXZlcm5faGVscGVyX3RlbXBsYXRlLy4vc3JjL+WQjOWxguaJi+acui9pbmRleC50cz8iXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQXBwQ29udHJvbGxlciB9IGZyb20gJy4vYXBwLWNvbnRyb2xsZXInO1xuaW1wb3J0IHsgRGlhbG9nTWFuYWdlciB9IGZyb20gJy4vZGlhbG9nLW1hbmFnZXInO1xuaW1wb3J0IHsgRXZlbnRIYW5kbGVyIH0gZnJvbSAnLi9ldmVudC1oYW5kbGVyJztcbmltcG9ydCB7IHN0eWxlTWFuYWdlciB9IGZyb20gJy4vc3R5bGUtbWFuYWdlcic7XG5cbi8vIOW8gOWPkeaooeW8j+agh+W/lyAtIOWPkeW4g+WJjeWwhuatpOWAvOiuvue9ruS4umZhbHNlXG4vLyDkvb/nlKh3aW5kb3flhajlsYDlj5jph4/lrZjlgqjvvIzpgb/lhY3lvqrnjq/kvp3otZZcbih3aW5kb3cgYXMgYW55KS5CTE1YX0RFVl9NT0RFID0gZmFsc2U7XG5cbi8vIOino+WGs+W+queOr+S+nei1lumXrumimO+8jOWwhkV2ZW50SGFuZGxlcuexu+WtmOWCqOWcqOWFqOWxgOWPmOmHj+S4rVxuKHdpbmRvdyBhcyBhbnkpLkV2ZW50SGFuZGxlckNsYXNzID0gRXZlbnRIYW5kbGVyO1xuXG4vLyDmt7vliqDlhajlsYDmoIflv5fmnaXpmLLmraLph43lpI3lpITnkIZBSeWTjeW6lFxuKHdpbmRvdyBhcyBhbnkpLkJMTVhfUFJPQ0VTU0lOR19BSV9SRVNQT05TRSA9IGZhbHNlO1xuXG4vLyDkvb/nlKhqUXVlcnnnmoQkKGFzeW5jICgpID0+IHt9KeivreazlVxuJChhc3luYyAoKSA9PiB7XG4gIHRyeSB7XG4gICAgY29uc29sZS5sb2coJ1tCTE1YXSDliJ3lp4vljJblvq7kv6HmqKHmi5/lmaguLi4nKTtcblxuICAgIC8vIOmHjee9ruWFqOWxgOagh+W/l++8jOehruS/nemhtemdouWIt+aWsOaXtuS4jeS8muS/neeVmeaXp+eahOeKtuaAgVxuICAgICh3aW5kb3cgYXMgYW55KS5CTE1YX1BST0NFU1NJTkdfQUlfUkVTUE9OU0UgPSBmYWxzZTtcblxuICAgIC8vIOWIm+W7uuW5tuWIneWni+WMluW6lOeUqOaOp+WItuWZqFxuICAgIGNvbnN0IGFwcENvbnRyb2xsZXIgPSBuZXcgQXBwQ29udHJvbGxlcigpO1xuICAgIGF3YWl0IGFwcENvbnRyb2xsZXIuaW5pdGlhbGl6ZSgpO1xuXG4gICAgLy8g5bCG5o6n5Yi25Zmo5a6e5L6L5a2Y5YKo5Zyo5YWo5bGA5Y+Y6YeP5Lit77yM5Lul5L6/6LCD6K+VXG4gICAgKHdpbmRvdyBhcyBhbnkpLmJsbXhBcHAgPSBhcHBDb250cm9sbGVyO1xuICAgICh3aW5kb3cgYXMgYW55KS5ibG14U3R5bGVNYW5hZ2VyID0gc3R5bGVNYW5hZ2VyO1xuICAgICh3aW5kb3cgYXMgYW55KS5kaWFsb2dNYW5hZ2VyID0gRGlhbG9nTWFuYWdlci5nZXRJbnN0YW5jZSgpO1xuXG4gICAgaWYgKCh3aW5kb3cgYXMgYW55KS5CTE1YX0RFVl9NT0RFKSB7XG4gICAgICBjb25zb2xlLmxvZygnW0JMTVhdIOW8gOWPkeaooeW8j+W3suWQr+eUqO+8jOW3suWKoOi9vea1i+ivleaVsOaNricpO1xuICAgICAgY29uc29sZS5sb2coJ1tCTE1YXSDlj6/nlKjnmoTosIPor5Xlkb3ku6Q6Jyk7XG4gICAgICBjb25zb2xlLmxvZygnICB3aW5kb3cuYmxteEFwcC5zaG93VGVzdEVudHJ5VHlwZXMoKSAtIOaYvuekuuWPr+eUqOeahOa1i+ivleaVsOaNruexu+WeiycpO1xuICAgICAgY29uc29sZS5sb2coJyAgd2luZG93LmJsbXhBcHAuYWRkVGVzdEVudHJ5KOexu+WeiykgLSDmt7vliqDmjIflrprnsbvlnovnmoTmtYvor5XmlbDmja4nKTtcbiAgICAgIGNvbnNvbGUubG9nKCcgIHdpbmRvdy5ibG14QXBwLmNsZWFyRGVidWdEYXRhKCkgLSDmuIXpmaTmiYDmnInmlbDmja4nKTtcbiAgICB9XG5cbiAgICBjb25zb2xlLmxvZygnW0JMTVhdIOW+ruS/oeaooeaLn+WZqOWIneWni+WMluWujOaIkO+8gScpO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ1tCTE1YXSDliJ3lp4vljJblpLHotKU6JywgZXJyb3IpO1xuXG4gICAgLy8g5L2/55So6Ieq5a6a5LmJ5a+56K+d5qGG5pu/5LujYWxlcnRcbiAgICAvLyDnoa7kv53miYvmnLrlsY/luZXlhYPntKDlt7Lnu4/lrZjlnKhcbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIGNvbnN0IGRpYWxvZ01hbmFnZXIgPSBEaWFsb2dNYW5hZ2VyLmdldEluc3RhbmNlKCk7XG4gICAgICBkaWFsb2dNYW5hZ2VyLmFsZXJ0KCfliJ3lp4vljJblpLHotKXvvIzor7fmn6XnnIvmjqfliLblj7Dojrflj5bor6bnu4bkv6Hmga/jgIInLCAn6ZSZ6K+vJyk7XG4gICAgfSwgNTAwKTsgLy8g5bu26L+f5pi+56S65a+56K+d5qGG77yM56Gu5L+dRE9N5bey57uP5Yqg6L29XG4gIH1cbn0pO1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/同层手机/index.ts\n")},"./src/同层手机/input-handler.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   InputHandler: () => (/* binding */ InputHandler)\n/* harmony export */ });\n/* harmony import */ var _dialog_manager__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./dialog-manager */ \"./src/同层手机/dialog-manager.ts\");\n// 输入处理模块\n// 负责消息发送、文件上传、语音录制、表情包选择等功能\n\nclass InputHandler {\n    configManager;\n    onStageAndDisplayEntry;\n    onUpdateFooterButtonsState;\n    dialogManager;\n    constructor(configManager, onStageAndDisplayEntry, onUpdateFooterButtonsState) {\n        this.configManager = configManager;\n        this.onStageAndDisplayEntry = onStageAndDisplayEntry;\n        this.onUpdateFooterButtonsState = onUpdateFooterButtonsState;\n        this.dialogManager = _dialog_manager__WEBPACK_IMPORTED_MODULE_0__.DialogManager.getInstance();\n    }\n    // 处理转账接受\n    async handleTransferAccept(data) {\n        const result = await this.dialogManager.showReceiveDialog('transfer', data);\n        if (result === 'accept') {\n            const acceptData = { ...data, status: 'accepted' };\n            this.onStageAndDisplayEntry({\n                type: 'transfer',\n                sender: 'me',\n                content: JSON.stringify(acceptData),\n                data: acceptData,\n                id: `transfer-${Date.now()}`,\n            });\n        }\n        else if (result === 'reject') {\n            const rejectData = { ...data, status: 'rejected' };\n            this.onStageAndDisplayEntry({\n                type: 'transfer',\n                sender: 'me',\n                content: JSON.stringify(rejectData),\n                data: rejectData,\n                id: `transfer-${Date.now()}`,\n            });\n        }\n    }\n    // 处理礼物动作\n    async handleGiftAction(data) {\n        const result = await this.dialogManager.showReceiveDialog('gift', data);\n        if (result === 'accept') {\n            const receiptData = { name: data.name, status: 'accepted' };\n            this.onStageAndDisplayEntry({\n                type: 'gift',\n                sender: 'me',\n                content: JSON.stringify(receiptData),\n                data: receiptData,\n                id: `gift-${Date.now()}`,\n            });\n        }\n        else if (result === 'reject') {\n            const receiptData = { name: data.name, status: 'rejected' };\n            this.onStageAndDisplayEntry({\n                type: 'gift',\n                sender: 'me',\n                content: JSON.stringify(receiptData),\n                data: receiptData,\n                id: `gift-${Date.now()}`,\n            });\n        }\n        // 通知有待处理的通知\n        this.onUpdateFooterButtonsState();\n    }\n    // 发送文本消息\n    sendTextMessage(text) {\n        if (!text.trim())\n            return;\n        const messageEntry = {\n            type: 'message',\n            sender: 'me',\n            content: text.trim(),\n            id: `msg-${Date.now()}-${Math.random()}`,\n            timestamp: Date.now(),\n        };\n        this.onStageAndDisplayEntry(messageEntry);\n        this.onUpdateFooterButtonsState();\n    }\n    // 发送表情包\n    sendSticker(stickerName) {\n        const stickerUrl = this.configManager.findStickerUrlByName(stickerName);\n        if (!stickerUrl) {\n            console.error(`[BLMX] 未找到表情包: ${stickerName}`);\n            return;\n        }\n        const stickerEntry = {\n            type: 'sticker',\n            sender: 'me',\n            content: stickerName, // 表情包内容是名称，不是对象\n            id: `sticker-${Date.now()}-${Math.random()}`,\n            timestamp: Date.now(),\n        };\n        this.onStageAndDisplayEntry(stickerEntry);\n        this.onUpdateFooterButtonsState();\n    }\n    // 发送图片\n    sendImage(imageData) {\n        const imageEntry = {\n            type: 'image',\n            sender: 'me',\n            content: imageData,\n            id: `image-${Date.now()}-${Math.random()}`,\n            timestamp: Date.now(),\n        };\n        this.onStageAndDisplayEntry(imageEntry);\n        this.onUpdateFooterButtonsState();\n    }\n    // 发送语音消息\n    sendVoiceMessage(voiceData) {\n        const voiceEntry = {\n            type: 'voice',\n            sender: 'me',\n            content: voiceData,\n            id: `voice-${Date.now()}-${Math.random()}`,\n            timestamp: Date.now(),\n        };\n        this.onStageAndDisplayEntry(voiceEntry);\n        this.onUpdateFooterButtonsState();\n    }\n    // 发送位置信息\n    sendLocation(locationData) {\n        const locationEntry = {\n            type: 'location',\n            sender: 'me',\n            content: locationData,\n            id: `location-${Date.now()}-${Math.random()}`,\n            timestamp: Date.now(),\n        };\n        this.onStageAndDisplayEntry(locationEntry);\n        this.onUpdateFooterButtonsState();\n    }\n    // 发送文件\n    sendFile(fileData) {\n        const fileEntry = {\n            type: 'file',\n            sender: 'me',\n            content: fileData,\n            id: `file-${Date.now()}-${Math.random()}`,\n            timestamp: Date.now(),\n        };\n        this.onStageAndDisplayEntry(fileEntry);\n        this.onUpdateFooterButtonsState();\n    }\n    // 发送转账\n    sendTransfer(transferData) {\n        const transferEntry = {\n            type: 'transfer',\n            sender: 'me',\n            content: transferData,\n            id: `transfer-${Date.now()}-${Math.random()}`,\n            timestamp: Date.now(),\n        };\n        this.onStageAndDisplayEntry(transferEntry);\n        this.onUpdateFooterButtonsState();\n    }\n    // 发送礼物\n    sendGift(giftData) {\n        const giftEntry = {\n            type: 'gift',\n            sender: 'me',\n            content: giftData,\n            id: `gift-${Date.now()}-${Math.random()}`,\n            timestamp: Date.now(),\n        };\n        this.onStageAndDisplayEntry(giftEntry);\n        this.onUpdateFooterButtonsState();\n    }\n    // 处理文件上传\n    async handleFileUpload(file) {\n        try {\n            if (file.type.startsWith('image/')) {\n                // 处理图片文件\n                const reader = new FileReader();\n                reader.onload = e => {\n                    const result = e.target?.result;\n                    this.sendImage({\n                        type: 'file',\n                        value: result,\n                        name: file.name,\n                    });\n                };\n                reader.readAsDataURL(file);\n            }\n            else {\n                // 处理其他文件类型\n                this.sendFile({\n                    name: file.name,\n                    size: file.size,\n                    type: file.type,\n                });\n            }\n        }\n        catch (error) {\n            console.error('[BLMX] 文件上传失败:', error);\n            const dialogManager = _dialog_manager__WEBPACK_IMPORTED_MODULE_0__.DialogManager.getInstance();\n            await dialogManager.alert('文件上传失败，请重试。', '上传失败');\n        }\n    }\n    // 处理图片URL输入\n    async handleImageUrl(url) {\n        if (!url.trim())\n            return;\n        // 验证URL格式\n        try {\n            new URL(url);\n            this.sendImage({\n                type: 'url',\n                value: url.trim(),\n            });\n        }\n        catch (error) {\n            const dialogManager = _dialog_manager__WEBPACK_IMPORTED_MODULE_0__.DialogManager.getInstance();\n            await dialogManager.alert('请输入有效的图片URL', 'URL格式错误');\n        }\n    }\n    // 处理语音录制\n    async handleVoiceRecording() {\n        try {\n            const dialogManager = _dialog_manager__WEBPACK_IMPORTED_MODULE_0__.DialogManager.getInstance();\n            // 检查浏览器是否支持语音录制\n            if (!navigator.mediaDevices || !navigator.mediaDevices.getUserMedia) {\n                await dialogManager.alert('您的浏览器不支持语音录制功能', '不支持语音录制');\n                return;\n            }\n            // 请求麦克风权限\n            const stream = await navigator.mediaDevices.getUserMedia({ audio: true });\n            // 这里可以集成语音录制库，如 MediaRecorder API\n            // 为了简化，这里只是模拟语音录制\n            const text = await dialogManager.prompt('请输入语音内容（模拟语音转文字）:', '', '语音录制');\n            if (text) {\n                this.sendVoiceMessage({\n                    text: text.trim(),\n                    duration: Math.floor(Math.random() * 30) + 5, // 模拟5-35秒的语音\n                });\n            }\n            // 停止录制\n            stream.getTracks().forEach(track => track.stop());\n        }\n        catch (error) {\n            console.error('[BLMX] 语音录制失败:', error);\n            const dialogManager = _dialog_manager__WEBPACK_IMPORTED_MODULE_0__.DialogManager.getInstance();\n            await dialogManager.alert('语音录制失败，请检查麦克风权限。', '录制失败');\n        }\n    }\n    // 处理位置分享\n    handleLocationShare() {\n        // 检查浏览器是否支持地理位置\n        if (!navigator.geolocation) {\n            alert('您的浏览器不支持地理位置功能');\n            return;\n        }\n        navigator.geolocation.getCurrentPosition(position => {\n            const { latitude, longitude } = position.coords;\n            const locationName = prompt('请输入位置名称:') || '我的位置';\n            const address = prompt('请输入详细地址:') || `纬度: ${latitude.toFixed(6)}, 经度: ${longitude.toFixed(6)}`;\n            this.sendLocation({\n                name: locationName,\n                address: address,\n                latitude: latitude,\n                longitude: longitude,\n            });\n        }, error => {\n            console.error('[BLMX] 获取位置失败:', error);\n            // 允许用户手动输入位置信息\n            const locationName = prompt('无法获取当前位置，请手动输入位置名称:');\n            const address = prompt('请输入详细地址:');\n            if (locationName && address) {\n                this.sendLocation({\n                    name: locationName,\n                    address: address,\n                });\n            }\n        });\n    }\n    // 处理转账发送\n    handleTransferSend() {\n        const amountStr = prompt('请输入转账金额:');\n        if (!amountStr)\n            return;\n        const amount = parseFloat(amountStr);\n        if (isNaN(amount) || amount <= 0) {\n            alert('请输入有效的金额');\n            return;\n        }\n        const note = prompt('请输入转账备注（可选）:') || '';\n        this.sendTransfer({\n            amount: amount,\n            note: note,\n        });\n    }\n    // 处理礼物发送\n    handleGiftSend() {\n        const giftName = prompt('请输入礼物名称:');\n        if (!giftName)\n            return;\n        const giftImage = prompt('请输入礼物图片URL（可选）:') || '';\n        const description = prompt('请输入礼物描述（可选）:') || '';\n        this.sendGift({\n            name: giftName,\n            image: giftImage,\n            description: description,\n        });\n    }\n    // 获取表情包列表\n    getStickerList() {\n        // 从localStorage获取表情包\n        const globalStickers = JSON.parse(localStorage.getItem('blmx_wechat_stickers_global') || '[]');\n        const charStickers = JSON.parse(localStorage.getItem(`blmx_char_stickers_${this.configManager.getConfig().currentCharId}`) || '[]');\n        return [...globalStickers, ...charStickers];\n    }\n    // 搜索表情包\n    searchStickers(query) {\n        const stickers = this.getStickerList();\n        if (!query.trim())\n            return stickers;\n        const searchTerm = query.toLowerCase();\n        return stickers.filter(sticker => sticker.label.toLowerCase().includes(searchTerm));\n    }\n    // 清空输入框\n    clearInput() {\n        const inputElement = document.getElementById('wechat-input-field');\n        if (inputElement) {\n            inputElement.value = '';\n            this.onUpdateFooterButtonsState();\n        }\n    }\n    // 设置输入框焦点\n    focusInput() {\n        const inputElement = document.getElementById('wechat-input-field');\n        if (inputElement) {\n            inputElement.focus();\n        }\n    }\n    // 获取输入框内容\n    getInputText() {\n        const inputElement = document.getElementById('wechat-input-field');\n        return inputElement ? inputElement.value : '';\n    }\n    // 设置输入框内容\n    setInputText(text) {\n        const inputElement = document.getElementById('wechat-input-field');\n        if (inputElement) {\n            inputElement.value = text;\n            this.onUpdateFooterButtonsState();\n        }\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Q0FBQztZQUNqQixZQUFZLENBQUMsS0FBSyxHQUFHLElBQUksQ0FBQztZQUMxQixJQUFJLENBQUMsMEJBQTBCLEVBQUUsQ0FBQztRQUNwQyxDQUFDO0lBQ0gsQ0FBQztDQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdGF2ZXJuX2hlbHBlcl90ZW1wbGF0ZS8uL3NyYy/lkIzlsYLmiYvmnLovaW5wdXQtaGFuZGxlci50cz8iXSwic291cmNlc0NvbnRlbnQiOlsiLy8g6L6T5YWl5aSE55CG5qih5Z2XXG4vLyDotJ/otKPmtojmga/lj5HpgIHjgIHmlofku7bkuIrkvKDjgIHor63pn7PlvZXliLbjgIHooajmg4XljIXpgInmi6nnrYnlip/og71cblxuaW1wb3J0IHsgQ29uZmlnTWFuYWdlciwgU3RpY2tlciB9IGZyb20gJy4vY29uZmlnLW1hbmFnZXInO1xuaW1wb3J0IHsgRGlhbG9nTWFuYWdlciB9IGZyb20gJy4vZGlhbG9nLW1hbmFnZXInO1xuaW1wb3J0IHsgTG9nRW50cnkgfSBmcm9tICcuL3NjcmlwdCc7XG5cbmV4cG9ydCBjbGFzcyBJbnB1dEhhbmRsZXIge1xuICBwcml2YXRlIGNvbmZpZ01hbmFnZXI6IENvbmZpZ01hbmFnZXI7XG4gIHByaXZhdGUgb25TdGFnZUFuZERpc3BsYXlFbnRyeTogKGVudHJ5OiBMb2dFbnRyeSkgPT4gdm9pZDtcbiAgcHJpdmF0ZSBvblVwZGF0ZUZvb3RlckJ1dHRvbnNTdGF0ZTogKCkgPT4gdm9pZDtcbiAgcHJpdmF0ZSBkaWFsb2dNYW5hZ2VyOiBEaWFsb2dNYW5hZ2VyO1xuXG4gIGNvbnN0cnVjdG9yKFxuICAgIGNvbmZpZ01hbmFnZXI6IENvbmZpZ01hbmFnZXIsXG4gICAgb25TdGFnZUFuZERpc3BsYXlFbnRyeTogKGVudHJ5OiBMb2dFbnRyeSkgPT4gdm9pZCxcbiAgICBvblVwZGF0ZUZvb3RlckJ1dHRvbnNTdGF0ZTogKCkgPT4gdm9pZCxcbiAgKSB7XG4gICAgdGhpcy5jb25maWdNYW5hZ2VyID0gY29uZmlnTWFuYWdlcjtcbiAgICB0aGlzLm9uU3RhZ2VBbmREaXNwbGF5RW50cnkgPSBvblN0YWdlQW5kRGlzcGxheUVudHJ5O1xuICAgIHRoaXMub25VcGRhdGVGb290ZXJCdXR0b25zU3RhdGUgPSBvblVwZGF0ZUZvb3RlckJ1dHRvbnNTdGF0ZTtcbiAgICB0aGlzLmRpYWxvZ01hbmFnZXIgPSBEaWFsb2dNYW5hZ2VyLmdldEluc3RhbmNlKCk7XG4gIH1cblxuICAvLyDlpITnkIbovazotKbmjqXlj5dcbiAgYXN5bmMgaGFuZGxlVHJhbnNmZXJBY2NlcHQoZGF0YTogYW55KTogUHJvbWlzZTx2b2lkPiB7XG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgdGhpcy5kaWFsb2dNYW5hZ2VyLnNob3dSZWNlaXZlRGlhbG9nKCd0cmFuc2ZlcicsIGRhdGEpO1xuICAgIGlmIChyZXN1bHQgPT09ICdhY2NlcHQnKSB7XG4gICAgICBjb25zdCBhY2NlcHREYXRhID0geyAuLi5kYXRhLCBzdGF0dXM6ICdhY2NlcHRlZCcgfTtcbiAgICAgIHRoaXMub25TdGFnZUFuZERpc3BsYXlFbnRyeSh7XG4gICAgICAgIHR5cGU6ICd0cmFuc2ZlcicsXG4gICAgICAgIHNlbmRlcjogJ21lJyxcbiAgICAgICAgY29udGVudDogSlNPTi5zdHJpbmdpZnkoYWNjZXB0RGF0YSksXG4gICAgICAgIGRhdGE6IGFjY2VwdERhdGEsXG4gICAgICAgIGlkOiBgdHJhbnNmZXItJHtEYXRlLm5vdygpfWAsXG4gICAgICB9IGFzIGFueSk7XG4gICAgfSBlbHNlIGlmIChyZXN1bHQgPT09ICdyZWplY3QnKSB7XG4gICAgICBjb25zdCByZWplY3REYXRhID0geyAuLi5kYXRhLCBzdGF0dXM6ICdyZWplY3RlZCcgfTtcbiAgICAgIHRoaXMub25TdGFnZUFuZERpc3BsYXlFbnRyeSh7XG4gICAgICAgIHR5cGU6ICd0cmFuc2ZlcicsXG4gICAgICAgIHNlbmRlcjogJ21lJyxcbiAgICAgICAgY29udGVudDogSlNPTi5zdHJpbmdpZnkocmVqZWN0RGF0YSksXG4gICAgICAgIGRhdGE6IHJlamVjdERhdGEsXG4gICAgICAgIGlkOiBgdHJhbnNmZXItJHtEYXRlLm5vdygpfWAsXG4gICAgICB9IGFzIGFueSk7XG4gICAgfVxuICB9XG5cbiAgLy8g5aSE55CG56S854mp5Yqo5L2cXG4gIGFzeW5jIGhhbmRsZUdpZnRBY3Rpb24oZGF0YTogYW55KTogUHJvbWlzZTx2b2lkPiB7XG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgdGhpcy5kaWFsb2dNYW5hZ2VyLnNob3dSZWNlaXZlRGlhbG9nKCdnaWZ0JywgZGF0YSk7XG4gICAgaWYgKHJlc3VsdCA9PT0gJ2FjY2VwdCcpIHtcbiAgICAgIGNvbnN0IHJlY2VpcHREYXRhID0geyBuYW1lOiBkYXRhLm5hbWUsIHN0YXR1czogJ2FjY2VwdGVkJyB9O1xuICAgICAgdGhpcy5vblN0YWdlQW5kRGlzcGxheUVudHJ5KHtcbiAgICAgICAgdHlwZTogJ2dpZnQnLFxuICAgICAgICBzZW5kZXI6ICdtZScsXG4gICAgICAgIGNvbnRlbnQ6IEpTT04uc3RyaW5naWZ5KHJlY2VpcHREYXRhKSxcbiAgICAgICAgZGF0YTogcmVjZWlwdERhdGEsXG4gICAgICAgIGlkOiBgZ2lmdC0ke0RhdGUubm93KCl9YCxcbiAgICAgIH0gYXMgYW55KTtcbiAgICB9IGVsc2UgaWYgKHJlc3VsdCA9PT0gJ3JlamVjdCcpIHtcbiAgICAgIGNvbnN0IHJlY2VpcHREYXRhID0geyBuYW1lOiBkYXRhLm5hbWUsIHN0YXR1czogJ3JlamVjdGVkJyB9O1xuICAgICAgdGhpcy5vblN0YWdlQW5kRGlzcGxheUVudHJ5KHtcbiAgICAgICAgdHlwZTogJ2dpZnQnLFxuICAgICAgICBzZW5kZXI6ICdtZScsXG4gICAgICAgIGNvbnRlbnQ6IEpTT04uc3RyaW5naWZ5KHJlY2VpcHREYXRhKSxcbiAgICAgICAgZGF0YTogcmVjZWlwdERhdGEsXG4gICAgICAgIGlkOiBgZ2lmdC0ke0RhdGUubm93KCl9YCxcbiAgICAgIH0gYXMgYW55KTtcbiAgICB9XG4gICAgLy8g6YCa55+l5pyJ5b6F5aSE55CG55qE6YCa55+lXG4gICAgdGhpcy5vblVwZGF0ZUZvb3RlckJ1dHRvbnNTdGF0ZSgpO1xuICB9XG5cbiAgLy8g5Y+R6YCB5paH5pys5raI5oGvXG4gIHNlbmRUZXh0TWVzc2FnZSh0ZXh0OiBzdHJpbmcpOiB2b2lkIHtcbiAgICBpZiAoIXRleHQudHJpbSgpKSByZXR1cm47XG5cbiAgICBjb25zdCBtZXNzYWdlRW50cnk6IExvZ0VudHJ5ID0ge1xuICAgICAgdHlwZTogJ21lc3NhZ2UnLFxuICAgICAgc2VuZGVyOiAnbWUnLFxuICAgICAgY29udGVudDogdGV4dC50cmltKCksXG4gICAgICBpZDogYG1zZy0ke0RhdGUubm93KCl9LSR7TWF0aC5yYW5kb20oKX1gLFxuICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpLFxuICAgIH0gYXMgYW55O1xuXG4gICAgdGhpcy5vblN0YWdlQW5kRGlzcGxheUVudHJ5KG1lc3NhZ2VFbnRyeSk7XG4gICAgdGhpcy5vblVwZGF0ZUZvb3RlckJ1dHRvbnNTdGF0ZSgpO1xuICB9XG5cbiAgLy8g5Y+R6YCB6KGo5oOF5YyFXG4gIHNlbmRTdGlja2VyKHN0aWNrZXJOYW1lOiBzdHJpbmcpOiB2b2lkIHtcbiAgICBjb25zdCBzdGlja2VyVXJsID0gdGhpcy5jb25maWdNYW5hZ2VyLmZpbmRTdGlja2VyVXJsQnlOYW1lKHN0aWNrZXJOYW1lKTtcbiAgICBpZiAoIXN0aWNrZXJVcmwpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoYFtCTE1YXSDmnKrmib7liLDooajmg4XljIU6ICR7c3RpY2tlck5hbWV9YCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3Qgc3RpY2tlckVudHJ5OiBMb2dFbnRyeSA9IHtcbiAgICAgIHR5cGU6ICdzdGlja2VyJyxcbiAgICAgIHNlbmRlcjogJ21lJyxcbiAgICAgIGNvbnRlbnQ6IHN0aWNrZXJOYW1lLCAvLyDooajmg4XljIXlhoXlrrnmmK/lkI3np7DvvIzkuI3mmK/lr7nosaFcbiAgICAgIGlkOiBgc3RpY2tlci0ke0RhdGUubm93KCl9LSR7TWF0aC5yYW5kb20oKX1gLFxuICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpLFxuICAgIH0gYXMgYW55O1xuXG4gICAgdGhpcy5vblN0YWdlQW5kRGlzcGxheUVudHJ5KHN0aWNrZXJFbnRyeSk7XG4gICAgdGhpcy5vblVwZGF0ZUZvb3RlckJ1dHRvbnNTdGF0ZSgpO1xuICB9XG5cbiAgLy8g5Y+R6YCB5Zu+54mHXG4gIHNlbmRJbWFnZShpbWFnZURhdGE6IHsgdHlwZTogJ3VybCcgfCAnZmlsZSc7IHZhbHVlOiBzdHJpbmc7IG5hbWU/OiBzdHJpbmcgfSk6IHZvaWQge1xuICAgIGNvbnN0IGltYWdlRW50cnk6IExvZ0VudHJ5ID0ge1xuICAgICAgdHlwZTogJ2ltYWdlJyxcbiAgICAgIHNlbmRlcjogJ21lJyxcbiAgICAgIGNvbnRlbnQ6IGltYWdlRGF0YSxcbiAgICAgIGlkOiBgaW1hZ2UtJHtEYXRlLm5vdygpfS0ke01hdGgucmFuZG9tKCl9YCxcbiAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKSxcbiAgICB9IGFzIGFueTtcblxuICAgIHRoaXMub25TdGFnZUFuZERpc3BsYXlFbnRyeShpbWFnZUVudHJ5KTtcbiAgICB0aGlzLm9uVXBkYXRlRm9vdGVyQnV0dG9uc1N0YXRlKCk7XG4gIH1cblxuICAvLyDlj5HpgIHor63pn7Pmtojmga9cbiAgc2VuZFZvaWNlTWVzc2FnZSh2b2ljZURhdGE6IHsgdGV4dDogc3RyaW5nOyBkdXJhdGlvbj86IG51bWJlciB9KTogdm9pZCB7XG4gICAgY29uc3Qgdm9pY2VFbnRyeTogTG9nRW50cnkgPSB7XG4gICAgICB0eXBlOiAndm9pY2UnLFxuICAgICAgc2VuZGVyOiAnbWUnLFxuICAgICAgY29udGVudDogdm9pY2VEYXRhLFxuICAgICAgaWQ6IGB2b2ljZS0ke0RhdGUubm93KCl9LSR7TWF0aC5yYW5kb20oKX1gLFxuICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpLFxuICAgIH0gYXMgYW55O1xuXG4gICAgdGhpcy5vblN0YWdlQW5kRGlzcGxheUVudHJ5KHZvaWNlRW50cnkpO1xuICAgIHRoaXMub25VcGRhdGVGb290ZXJCdXR0b25zU3RhdGUoKTtcbiAgfVxuXG4gIC8vIOWPkemAgeS9jee9ruS/oeaBr1xuICBzZW5kTG9jYXRpb24obG9jYXRpb25EYXRhOiB7IG5hbWU6IHN0cmluZzsgYWRkcmVzczogc3RyaW5nOyBsYXRpdHVkZT86IG51bWJlcjsgbG9uZ2l0dWRlPzogbnVtYmVyIH0pOiB2b2lkIHtcbiAgICBjb25zdCBsb2NhdGlvbkVudHJ5OiBMb2dFbnRyeSA9IHtcbiAgICAgIHR5cGU6ICdsb2NhdGlvbicsXG4gICAgICBzZW5kZXI6ICdtZScsXG4gICAgICBjb250ZW50OiBsb2NhdGlvbkRhdGEsXG4gICAgICBpZDogYGxvY2F0aW9uLSR7RGF0ZS5ub3coKX0tJHtNYXRoLnJhbmRvbSgpfWAsXG4gICAgICB0aW1lc3RhbXA6IERhdGUubm93KCksXG4gICAgfSBhcyBhbnk7XG5cbiAgICB0aGlzLm9uU3RhZ2VBbmREaXNwbGF5RW50cnkobG9jYXRpb25FbnRyeSk7XG4gICAgdGhpcy5vblVwZGF0ZUZvb3RlckJ1dHRvbnNTdGF0ZSgpO1xuICB9XG5cbiAgLy8g5Y+R6YCB5paH5Lu2XG4gIHNlbmRGaWxlKGZpbGVEYXRhOiB7IG5hbWU6IHN0cmluZzsgc2l6ZTogbnVtYmVyOyB0eXBlOiBzdHJpbmc7IHVybD86IHN0cmluZyB9KTogdm9pZCB7XG4gICAgY29uc3QgZmlsZUVudHJ5OiBMb2dFbnRyeSA9IHtcbiAgICAgIHR5cGU6ICdmaWxlJyxcbiAgICAgIHNlbmRlcjogJ21lJyxcbiAgICAgIGNvbnRlbnQ6IGZpbGVEYXRhLFxuICAgICAgaWQ6IGBmaWxlLSR7RGF0ZS5ub3coKX0tJHtNYXRoLnJhbmRvbSgpfWAsXG4gICAgICB0aW1lc3RhbXA6IERhdGUubm93KCksXG4gICAgfSBhcyBhbnk7XG5cbiAgICB0aGlzLm9uU3RhZ2VBbmREaXNwbGF5RW50cnkoZmlsZUVudHJ5KTtcbiAgICB0aGlzLm9uVXBkYXRlRm9vdGVyQnV0dG9uc1N0YXRlKCk7XG4gIH1cblxuICAvLyDlj5HpgIHovazotKZcbiAgc2VuZFRyYW5zZmVyKHRyYW5zZmVyRGF0YTogeyBhbW91bnQ6IG51bWJlcjsgbm90ZT86IHN0cmluZyB9KTogdm9pZCB7XG4gICAgY29uc3QgdHJhbnNmZXJFbnRyeTogTG9nRW50cnkgPSB7XG4gICAgICB0eXBlOiAndHJhbnNmZXInLFxuICAgICAgc2VuZGVyOiAnbWUnLFxuICAgICAgY29udGVudDogdHJhbnNmZXJEYXRhLFxuICAgICAgaWQ6IGB0cmFuc2Zlci0ke0RhdGUubm93KCl9LSR7TWF0aC5yYW5kb20oKX1gLFxuICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpLFxuICAgIH0gYXMgYW55O1xuXG4gICAgdGhpcy5vblN0YWdlQW5kRGlzcGxheUVudHJ5KHRyYW5zZmVyRW50cnkpO1xuICAgIHRoaXMub25VcGRhdGVGb290ZXJCdXR0b25zU3RhdGUoKTtcbiAgfVxuXG4gIC8vIOWPkemAgeekvOeJqVxuICBzZW5kR2lmdChnaWZ0RGF0YTogeyBuYW1lOiBzdHJpbmc7IGltYWdlPzogc3RyaW5nOyBkZXNjcmlwdGlvbj86IHN0cmluZyB9KTogdm9pZCB7XG4gICAgY29uc3QgZ2lmdEVudHJ5OiBMb2dFbnRyeSA9IHtcbiAgICAgIHR5cGU6ICdnaWZ0JyxcbiAgICAgIHNlbmRlcjogJ21lJyxcbiAgICAgIGNvbnRlbnQ6IGdpZnREYXRhLFxuICAgICAgaWQ6IGBnaWZ0LSR7RGF0ZS5ub3coKX0tJHtNYXRoLnJhbmRvbSgpfWAsXG4gICAgICB0aW1lc3RhbXA6IERhdGUubm93KCksXG4gICAgfSBhcyBhbnk7XG5cbiAgICB0aGlzLm9uU3RhZ2VBbmREaXNwbGF5RW50cnkoZ2lmdEVudHJ5KTtcbiAgICB0aGlzLm9uVXBkYXRlRm9vdGVyQnV0dG9uc1N0YXRlKCk7XG4gIH1cblxuICAvLyDlpITnkIbmlofku7bkuIrkvKBcbiAgYXN5bmMgaGFuZGxlRmlsZVVwbG9hZChmaWxlOiBGaWxlKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgdHJ5IHtcbiAgICAgIGlmIChmaWxlLnR5cGUuc3RhcnRzV2l0aCgnaW1hZ2UvJykpIHtcbiAgICAgICAgLy8g5aSE55CG5Zu+54mH5paH5Lu2XG4gICAgICAgIGNvbnN0IHJlYWRlciA9IG5ldyBGaWxlUmVhZGVyKCk7XG4gICAgICAgIHJlYWRlci5vbmxvYWQgPSBlID0+IHtcbiAgICAgICAgICBjb25zdCByZXN1bHQgPSBlLnRhcmdldD8ucmVzdWx0IGFzIHN0cmluZztcbiAgICAgICAgICB0aGlzLnNlbmRJbWFnZSh7XG4gICAgICAgICAgICB0eXBlOiAnZmlsZScsXG4gICAgICAgICAgICB2YWx1ZTogcmVzdWx0LFxuICAgICAgICAgICAgbmFtZTogZmlsZS5uYW1lLFxuICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuICAgICAgICByZWFkZXIucmVhZEFzRGF0YVVSTChmaWxlKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIOWkhOeQhuWFtuS7luaWh+S7tuexu+Wei1xuICAgICAgICB0aGlzLnNlbmRGaWxlKHtcbiAgICAgICAgICBuYW1lOiBmaWxlLm5hbWUsXG4gICAgICAgICAgc2l6ZTogZmlsZS5zaXplLFxuICAgICAgICAgIHR5cGU6IGZpbGUudHlwZSxcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ1tCTE1YXSDmlofku7bkuIrkvKDlpLHotKU6JywgZXJyb3IpO1xuICAgICAgY29uc3QgZGlhbG9nTWFuYWdlciA9IERpYWxvZ01hbmFnZXIuZ2V0SW5zdGFuY2UoKTtcbiAgICAgIGF3YWl0IGRpYWxvZ01hbmFnZXIuYWxlcnQoJ+aWh+S7tuS4iuS8oOWksei0pe+8jOivt+mHjeivleOAgicsICfkuIrkvKDlpLHotKUnKTtcbiAgICB9XG4gIH1cblxuICAvLyDlpITnkIblm77niYdVUkzovpPlhaVcbiAgYXN5bmMgaGFuZGxlSW1hZ2VVcmwodXJsOiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICBpZiAoIXVybC50cmltKCkpIHJldHVybjtcblxuICAgIC8vIOmqjOivgVVSTOagvOW8j1xuICAgIHRyeSB7XG4gICAgICBuZXcgVVJMKHVybCk7XG4gICAgICB0aGlzLnNlbmRJbWFnZSh7XG4gICAgICAgIHR5cGU6ICd1cmwnLFxuICAgICAgICB2YWx1ZTogdXJsLnRyaW0oKSxcbiAgICAgIH0pO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zdCBkaWFsb2dNYW5hZ2VyID0gRGlhbG9nTWFuYWdlci5nZXRJbnN0YW5jZSgpO1xuICAgICAgYXdhaXQgZGlhbG9nTWFuYWdlci5hbGVydCgn6K+36L6T5YWl5pyJ5pWI55qE5Zu+54mHVVJMJywgJ1VSTOagvOW8j+mUmeivrycpO1xuICAgIH1cbiAgfVxuXG4gIC8vIOWkhOeQhuivremfs+W9leWItlxuICBhc3luYyBoYW5kbGVWb2ljZVJlY29yZGluZygpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgZGlhbG9nTWFuYWdlciA9IERpYWxvZ01hbmFnZXIuZ2V0SW5zdGFuY2UoKTtcblxuICAgICAgLy8g5qOA5p+l5rWP6KeI5Zmo5piv5ZCm5pSv5oyB6K+t6Z+z5b2V5Yi2XG4gICAgICBpZiAoIW5hdmlnYXRvci5tZWRpYURldmljZXMgfHwgIW5hdmlnYXRvci5tZWRpYURldmljZXMuZ2V0VXNlck1lZGlhKSB7XG4gICAgICAgIGF3YWl0IGRpYWxvZ01hbmFnZXIuYWxlcnQoJ+aCqOeahOa1j+iniOWZqOS4jeaUr+aMgeivremfs+W9leWItuWKn+iDvScsICfkuI3mlK/mjIHor63pn7PlvZXliLYnKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICAvLyDor7fmsYLpuqblhYvpo47mnYPpmZBcbiAgICAgIGNvbnN0IHN0cmVhbSA9IGF3YWl0IG5hdmlnYXRvci5tZWRpYURldmljZXMuZ2V0VXNlck1lZGlhKHsgYXVkaW86IHRydWUgfSk7XG5cbiAgICAgIC8vIOi/memHjOWPr+S7pembhuaIkOivremfs+W9leWItuW6k++8jOWmgiBNZWRpYVJlY29yZGVyIEFQSVxuICAgICAgLy8g5Li65LqG566A5YyW77yM6L+Z6YeM5Y+q5piv5qih5ouf6K+t6Z+z5b2V5Yi2XG4gICAgICBjb25zdCB0ZXh0ID0gYXdhaXQgZGlhbG9nTWFuYWdlci5wcm9tcHQoJ+ivt+i+k+WFpeivremfs+WGheWuue+8iOaooeaLn+ivremfs+i9rOaWh+Wtl++8iTonLCAnJywgJ+ivremfs+W9leWIticpO1xuICAgICAgaWYgKHRleHQpIHtcbiAgICAgICAgdGhpcy5zZW5kVm9pY2VNZXNzYWdlKHtcbiAgICAgICAgICB0ZXh0OiB0ZXh0LnRyaW0oKSxcbiAgICAgICAgICBkdXJhdGlvbjogTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMzApICsgNSwgLy8g5qih5oufNS0zNeenkueahOivremfs1xuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgLy8g5YGc5q2i5b2V5Yi2XG4gICAgICBzdHJlYW0uZ2V0VHJhY2tzKCkuZm9yRWFjaCh0cmFjayA9PiB0cmFjay5zdG9wKCkpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdbQkxNWF0g6K+t6Z+z5b2V5Yi25aSx6LSlOicsIGVycm9yKTtcbiAgICAgIGNvbnN0IGRpYWxvZ01hbmFnZXIgPSBEaWFsb2dNYW5hZ2VyLmdldEluc3RhbmNlKCk7XG4gICAgICBhd2FpdCBkaWFsb2dNYW5hZ2VyLmFsZXJ0KCfor63pn7PlvZXliLblpLHotKXvvIzor7fmo4Dmn6XpuqblhYvpo47mnYPpmZDjgIInLCAn5b2V5Yi25aSx6LSlJyk7XG4gICAgfVxuICB9XG5cbiAgLy8g5aSE55CG5L2N572u5YiG5LqrXG4gIGhhbmRsZUxvY2F0aW9uU2hhcmUoKTogdm9pZCB7XG4gICAgLy8g5qOA5p+l5rWP6KeI5Zmo5piv5ZCm5pSv5oyB5Zyw55CG5L2N572uXG4gICAgaWYgKCFuYXZpZ2F0b3IuZ2VvbG9jYXRpb24pIHtcbiAgICAgIGFsZXJ0KCfmgqjnmoTmtY/op4jlmajkuI3mlK/mjIHlnLDnkIbkvY3nva7lip/og70nKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBuYXZpZ2F0b3IuZ2VvbG9jYXRpb24uZ2V0Q3VycmVudFBvc2l0aW9uKFxuICAgICAgcG9zaXRpb24gPT4ge1xuICAgICAgICBjb25zdCB7IGxhdGl0dWRlLCBsb25naXR1ZGUgfSA9IHBvc2l0aW9uLmNvb3JkcztcbiAgICAgICAgY29uc3QgbG9jYXRpb25OYW1lID0gcHJvbXB0KCfor7fovpPlhaXkvY3nva7lkI3np7A6JykgfHwgJ+aIkeeahOS9jee9ric7XG4gICAgICAgIGNvbnN0IGFkZHJlc3MgPSBwcm9tcHQoJ+ivt+i+k+WFpeivpue7huWcsOWdgDonKSB8fCBg57qs5bqmOiAke2xhdGl0dWRlLnRvRml4ZWQoNil9LCDnu4/luqY6ICR7bG9uZ2l0dWRlLnRvRml4ZWQoNil9YDtcblxuICAgICAgICB0aGlzLnNlbmRMb2NhdGlvbih7XG4gICAgICAgICAgbmFtZTogbG9jYXRpb25OYW1lLFxuICAgICAgICAgIGFkZHJlc3M6IGFkZHJlc3MsXG4gICAgICAgICAgbGF0aXR1ZGU6IGxhdGl0dWRlLFxuICAgICAgICAgIGxvbmdpdHVkZTogbG9uZ2l0dWRlLFxuICAgICAgICB9KTtcbiAgICAgIH0sXG4gICAgICBlcnJvciA9PiB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ1tCTE1YXSDojrflj5bkvY3nva7lpLHotKU6JywgZXJyb3IpO1xuICAgICAgICAvLyDlhYHorrjnlKjmiLfmiYvliqjovpPlhaXkvY3nva7kv6Hmga9cbiAgICAgICAgY29uc3QgbG9jYXRpb25OYW1lID0gcHJvbXB0KCfml6Dms5Xojrflj5blvZPliY3kvY3nva7vvIzor7fmiYvliqjovpPlhaXkvY3nva7lkI3np7A6Jyk7XG4gICAgICAgIGNvbnN0IGFkZHJlc3MgPSBwcm9tcHQoJ+ivt+i+k+WFpeivpue7huWcsOWdgDonKTtcblxuICAgICAgICBpZiAobG9jYXRpb25OYW1lICYmIGFkZHJlc3MpIHtcbiAgICAgICAgICB0aGlzLnNlbmRMb2NhdGlvbih7XG4gICAgICAgICAgICBuYW1lOiBsb2NhdGlvbk5hbWUsXG4gICAgICAgICAgICBhZGRyZXNzOiBhZGRyZXNzLFxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9LFxuICAgICk7XG4gIH1cblxuICAvLyDlpITnkIbovazotKblj5HpgIFcbiAgaGFuZGxlVHJhbnNmZXJTZW5kKCk6IHZvaWQge1xuICAgIGNvbnN0IGFtb3VudFN0ciA9IHByb21wdCgn6K+36L6T5YWl6L2s6LSm6YeR6aKdOicpO1xuICAgIGlmICghYW1vdW50U3RyKSByZXR1cm47XG5cbiAgICBjb25zdCBhbW91bnQgPSBwYXJzZUZsb2F0KGFtb3VudFN0cik7XG4gICAgaWYgKGlzTmFOKGFtb3VudCkgfHwgYW1vdW50IDw9IDApIHtcbiAgICAgIGFsZXJ0KCfor7fovpPlhaXmnInmlYjnmoTph5Hpop0nKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCBub3RlID0gcHJvbXB0KCfor7fovpPlhaXovazotKblpIfms6jvvIjlj6/pgInvvIk6JykgfHwgJyc7XG5cbiAgICB0aGlzLnNlbmRUcmFuc2Zlcih7XG4gICAgICBhbW91bnQ6IGFtb3VudCxcbiAgICAgIG5vdGU6IG5vdGUsXG4gICAgfSk7XG4gIH1cblxuICAvLyDlpITnkIbnpLznianlj5HpgIFcbiAgaGFuZGxlR2lmdFNlbmQoKTogdm9pZCB7XG4gICAgY29uc3QgZ2lmdE5hbWUgPSBwcm9tcHQoJ+ivt+i+k+WFpeekvOeJqeWQjeensDonKTtcbiAgICBpZiAoIWdpZnROYW1lKSByZXR1cm47XG5cbiAgICBjb25zdCBnaWZ0SW1hZ2UgPSBwcm9tcHQoJ+ivt+i+k+WFpeekvOeJqeWbvueJh1VSTO+8iOWPr+mAie+8iTonKSB8fCAnJztcbiAgICBjb25zdCBkZXNjcmlwdGlvbiA9IHByb21wdCgn6K+36L6T5YWl56S854mp5o+P6L+w77yI5Y+v6YCJ77yJOicpIHx8ICcnO1xuXG4gICAgdGhpcy5zZW5kR2lmdCh7XG4gICAgICBuYW1lOiBnaWZ0TmFtZSxcbiAgICAgIGltYWdlOiBnaWZ0SW1hZ2UsXG4gICAgICBkZXNjcmlwdGlvbjogZGVzY3JpcHRpb24sXG4gICAgfSk7XG4gIH1cblxuICAvLyDojrflj5booajmg4XljIXliJfooahcbiAgZ2V0U3RpY2tlckxpc3QoKTogU3RpY2tlcltdIHtcbiAgICAvLyDku45sb2NhbFN0b3JhZ2Xojrflj5booajmg4XljIVcbiAgICBjb25zdCBnbG9iYWxTdGlja2VycyA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2JsbXhfd2VjaGF0X3N0aWNrZXJzX2dsb2JhbCcpIHx8ICdbXScpO1xuICAgIGNvbnN0IGNoYXJTdGlja2VycyA9IEpTT04ucGFyc2UoXG4gICAgICBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShgYmxteF9jaGFyX3N0aWNrZXJzXyR7dGhpcy5jb25maWdNYW5hZ2VyLmdldENvbmZpZygpLmN1cnJlbnRDaGFySWR9YCkgfHwgJ1tdJyxcbiAgICApO1xuICAgIHJldHVybiBbLi4uZ2xvYmFsU3RpY2tlcnMsIC4uLmNoYXJTdGlja2Vyc107XG4gIH1cblxuICAvLyDmkJzntKLooajmg4XljIVcbiAgc2VhcmNoU3RpY2tlcnMocXVlcnk6IHN0cmluZyk6IFN0aWNrZXJbXSB7XG4gICAgY29uc3Qgc3RpY2tlcnMgPSB0aGlzLmdldFN0aWNrZXJMaXN0KCk7XG4gICAgaWYgKCFxdWVyeS50cmltKCkpIHJldHVybiBzdGlja2VycztcblxuICAgIGNvbnN0IHNlYXJjaFRlcm0gPSBxdWVyeS50b0xvd2VyQ2FzZSgpO1xuICAgIHJldHVybiBzdGlja2Vycy5maWx0ZXIoc3RpY2tlciA9PiBzdGlja2VyLmxhYmVsLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoc2VhcmNoVGVybSkpO1xuICB9XG5cbiAgLy8g5riF56m66L6T5YWl5qGGXG4gIGNsZWFySW5wdXQoKTogdm9pZCB7XG4gICAgY29uc3QgaW5wdXRFbGVtZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3dlY2hhdC1pbnB1dC1maWVsZCcpIGFzIEhUTUxJbnB1dEVsZW1lbnQ7XG4gICAgaWYgKGlucHV0RWxlbWVudCkge1xuICAgICAgaW5wdXRFbGVtZW50LnZhbHVlID0gJyc7XG4gICAgICB0aGlzLm9uVXBkYXRlRm9vdGVyQnV0dG9uc1N0YXRlKCk7XG4gICAgfVxuICB9XG5cbiAgLy8g6K6+572u6L6T5YWl5qGG54Sm54K5XG4gIGZvY3VzSW5wdXQoKTogdm9pZCB7XG4gICAgY29uc3QgaW5wdXRFbGVtZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3dlY2hhdC1pbnB1dC1maWVsZCcpIGFzIEhUTUxJbnB1dEVsZW1lbnQ7XG4gICAgaWYgKGlucHV0RWxlbWVudCkge1xuICAgICAgaW5wdXRFbGVtZW50LmZvY3VzKCk7XG4gICAgfVxuICB9XG5cbiAgLy8g6I635Y+W6L6T5YWl5qGG5YaF5a65XG4gIGdldElucHV0VGV4dCgpOiBzdHJpbmcge1xuICAgIGNvbnN0IGlucHV0RWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd3ZWNoYXQtaW5wdXQtZmllbGQnKSBhcyBIVE1MSW5wdXRFbGVtZW50O1xuICAgIHJldHVybiBpbnB1dEVsZW1lbnQgPyBpbnB1dEVsZW1lbnQudmFsdWUgOiAnJztcbiAgfVxuXG4gIC8vIOiuvue9rui+k+WFpeahhuWGheWuuVxuICBzZXRJbnB1dFRleHQodGV4dDogc3RyaW5nKTogdm9pZCB7XG4gICAgY29uc3QgaW5wdXRFbGVtZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3dlY2hhdC1pbnB1dC1maWVsZCcpIGFzIEhUTUxJbnB1dEVsZW1lbnQ7XG4gICAgaWYgKGlucHV0RWxlbWVudCkge1xuICAgICAgaW5wdXRFbGVtZW50LnZhbHVlID0gdGV4dDtcbiAgICAgIHRoaXMub25VcGRhdGVGb290ZXJCdXR0b25zU3RhdGUoKTtcbiAgICB9XG4gIH1cbn1cbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/同层手机/input-handler.ts\n")},"./src/同层手机/moments-manager.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   MomentsManager: () => (/* binding */ MomentsManager)\n/* harmony export */ });\n// 朋友圈管理模块\n// 负责朋友圈渲染、通知管理、时间格式化等功能\nclass MomentsManager {\n    blmxManager;\n    configManager;\n    uiRenderer;\n    hasMomentNotification = false;\n    constructor(blmxManager, configManager, uiRenderer) {\n        this.blmxManager = blmxManager;\n        this.configManager = configManager;\n        this.uiRenderer = uiRenderer;\n        // 初始化通知状态\n        this.hasMomentNotification = this.configManager.getMomentNotificationState();\n    }\n    // 渲染朋友圈\n    renderMomentsFeed() {\n        if (!this.blmxManager || !this.uiRenderer)\n            return;\n        const logEntries = this.blmxManager.logEntries;\n        const avatars = this.configManager.getConfig().avatars;\n        // 使用jQuery选择器\n        const $momentsFeedList = $('#moments-feed-list');\n        if (!$momentsFeedList.length)\n            return;\n        // 检查用户是否在朋友圈界面，如果是则更新最后查看时间戳\n        const isCurrentlyInMomentsView = this.isInMomentsView();\n        if (isCurrentlyInMomentsView) {\n            this.setLastMomentViewTimestamp();\n            // 清除朋友圈通知，因为用户正在查看朋友圈\n            this.setMomentNotification(false);\n        }\n        $momentsFeedList.empty();\n        // 使用lodash进行数据处理\n        const posts = {};\n        const momentPostLogIndices = _.reduce(logEntries, (result, entry, index) => {\n            if ('key' in entry && entry.key.includes('_MOMENT')) {\n                result.push(index);\n            }\n            return result;\n        }, []);\n        // 收集所有帖子\n        _.forEach(momentPostLogIndices, (logIndex) => {\n            const entry = logEntries[logIndex];\n            posts[logIndex] = { ...entry, likes: [], comments: [], id: logIndex };\n        });\n        // 检查是否有CHAR发表的新朋友圈或评论\n        let hasNewCharMoments = false;\n        const lastViewTimestamp = this.getLastMomentViewTimestamp();\n        const userInMomentsView = this.isInMomentsView();\n        // 处理点赞和评论\n        _.forEach(logEntries, (entry, index) => {\n            if ('key' in entry && (entry.key.includes('_LIKE') || entry.key.includes('_COMMENT'))) {\n                // 修复target_post_id的处理逻辑，使用与原版相同的方式\n                const targetPostAbsoluteIndex = momentPostLogIndices[parseInt(entry.data.target_post_id, 10)];\n                const targetPost = posts[targetPostAbsoluteIndex];\n                if (targetPost) {\n                    if (entry.key.includes('_LIKE')) {\n                        const likerName = entry.key.startsWith('USER') ? this.getDisplayName('user') : this.getDisplayName('char');\n                        if (!_.some(targetPost.likes, (l) => l.name === likerName)) {\n                            targetPost.likes.push({ key: entry.key, name: likerName, originalLogIndex: index });\n                            // 如果是CHAR点赞，且用户不在朋友圈界面，检查是否是新活动\n                            if (entry.key.startsWith('CHAR') && !userInMomentsView) {\n                                // 使用索引位置来判断是否是新活动：\n                                // 如果这个点赞在日志中的索引大于最后查看朋友圈时保存的日志长度，说明这是新活动\n                                const isNewActivity = index > lastViewTimestamp;\n                                if (isNewActivity) {\n                                    hasNewCharMoments = true;\n                                }\n                            }\n                        }\n                    }\n                    else {\n                        targetPost.comments.push({ ...entry, originalLogIndex: index });\n                        // 如果是CHAR评论，且用户不在朋友圈界面，检查是否是新活动\n                        if (entry.key.startsWith('CHAR') && !userInMomentsView) {\n                            // 使用索引位置来判断是否是新活动\n                            const isNewActivity = index > lastViewTimestamp;\n                            if (isNewActivity) {\n                                hasNewCharMoments = true;\n                            }\n                        }\n                    }\n                }\n                else {\n                    console.warn(`[BLMX] Could not find target post for interaction. target_post_id: ${entry.data.target_post_id}, available posts: ${Object.keys(posts).join(', ')}`, entry);\n                }\n            }\n            // 检查CHAR发表的朋友圈\n            if ('key' in entry && entry.key === 'CHAR_MOMENT') {\n                // 使用索引位置判断是否是新朋友圈\n                const isNewMoment = index > lastViewTimestamp;\n                // 只有当是新朋友圈且用户不在朋友圈界面时才显示通知\n                if (isNewMoment && !userInMomentsView) {\n                    hasNewCharMoments = true;\n                }\n            }\n        });\n        // 更新朋友圈通知状态 - 只有当有新活动且用户不在朋友圈界面时才设置通知\n        if (!userInMomentsView) {\n            this.setMomentNotification(hasNewCharMoments);\n            // console.log('[BLMX] 朋友圈通知状态:', {\n            //   hasNewCharMoments,\n            //   lastViewIndex: this.getLastMomentViewTimestamp(),\n            //   currentLogLength: this.blmxManager.logEntries.length,\n            //   userInMomentsView,\n            // });\n        }\n        // 反转帖子顺序并渲染\n        _.chain(posts)\n            .values()\n            .reverse()\n            .forEach((post) => {\n            const fromUser = post.key.startsWith('USER');\n            const authorName = fromUser ? this.getDisplayName('user') : this.getDisplayName('char');\n            const authorAvatar = fromUser ? avatars.user : avatars.char;\n            const $li = $('<li>').addClass('moment-post').attr('data-post-id', post.id);\n            const momentSequenceId = momentPostLogIndices.indexOf(post.id);\n            $li.attr('data-moment-sequence-id', String(momentSequenceId));\n            // 设置moment-id属性，使用momentSequenceId作为朋友圈的唯一标识符\n            // 这样可以确保点赞和评论正确关联到对应的朋友圈\n            $li.attr('data-moment-id', String(momentSequenceId));\n            // 构建媒体HTML\n            let mediaHtml = '';\n            if (post.data.image_type === 'url' && post.data.image) {\n                mediaHtml = `<img src=\"${post.data.image}\" class=\"post-media-image\" />`;\n            }\n            else if (post.data.image_type === 'desc' && post.data.image) {\n                mediaHtml = `<div class=\"image-desc-content\"><div class=\"text-wrapper\">${post.data.image}</div></div>`;\n            }\n            // 构建互动区域HTML\n            let interactionsHtml = '';\n            if (post.likes.length > 0 || post.comments.length > 0) {\n                const likersHtml = post.likes.length > 0\n                    ? `<div class=\"likes-section\"><i class=\"fas fa-heart\"></i> ${_.map(post.likes, (l) => `<span class=\"liker-name\">${l.name}</span>`).join(', ')}</div>`\n                    : '';\n                const commentsHtml = post.comments.length > 0\n                    ? `<ul class=\"comments-section\">${_.map(post.comments, (c) => `<li><span class=\"comment-author\">${c.key.startsWith('USER') ? this.getDisplayName('user') : this.getDisplayName('char')}</span>: ${c.data.text}</li>`).join('')}</ul>`\n                    : '';\n                interactionsHtml = `<div class=\"post-interactions\">${likersHtml}${commentsHtml}</div>`;\n            }\n            // 使用自定义格式化时间函数\n            const displayTime = this.formatMomentTime(post.data.date, post.data.time);\n            const deleteBtnHtml = `<span class=\"delete-moment-btn\" title=\"删除\">删除</span>`;\n            $li.html(`<img src=\"${authorAvatar}\" class=\"post-author-avatar\" />\n                 <div class=\"post-details\">\n                     <span class=\"post-author-name\">${authorName}</span>\n                     <p class=\"post-content\">${post.data.text || ''}</p>\n                     <div class=\"post-media\">${mediaHtml}</div>\n                     <div class=\"post-meta\">\n                         <div class=\"post-meta-left\">\n                             <span class=\"timestamp\">${displayTime}</span>\n                             ${deleteBtnHtml}\n                         </div>\n                         <div class=\"post-actions\">\n                             <span class=\"comment-button\" title=\"评论/点赞\"><i class=\"fas fa-comment-dots\"></i></span>\n                         </div>\n                     </div>\n                     ${interactionsHtml}\n                 </div>`);\n            $momentsFeedList.append($li);\n        })\n            .value();\n        // 确保加载最新的封面图片\n        const savedCoverPhoto = this.configManager.getSavedCoverPhoto();\n        if (savedCoverPhoto) {\n            $('#moments-cover-photo').attr('src', savedCoverPhoto);\n        }\n    }\n    // 格式化朋友圈时间显示\n    formatMomentTime(dateString, timeString) {\n        try {\n            // 使用游戏内时间而非现实时间\n            const now = window.currentGameDate ? new Date(window.currentGameDate) : new Date();\n            const date = new Date(`${dateString} ${timeString}`);\n            const diffMs = now.getTime() - date.getTime();\n            const diffMins = Math.floor(diffMs / 60000);\n            const diffHours = Math.floor(diffMins / 60);\n            const diffDays = Math.floor(diffHours / 24);\n            if (diffMins < 1) {\n                return '刚刚';\n            }\n            else if (diffMins < 60) {\n                return `${diffMins}分钟前`;\n            }\n            else if (diffHours < 24) {\n                return `${diffHours}小时前`;\n            }\n            else if (diffDays === 1) {\n                return '昨天';\n            }\n            else if (diffDays === 2) {\n                return '前天';\n            }\n            else if (diffDays < 7) {\n                return `${diffDays}天前`;\n            }\n            else {\n                // 超过一周显示具体日期\n                const month = date.getMonth() + 1;\n                const day = date.getDate();\n                return `${month}月${day}日`;\n            }\n        }\n        catch (error) {\n            console.error('时间格式化错误:', error);\n            return `${dateString} ${timeString}`;\n        }\n    }\n    // 获取显示名称\n    getDisplayName(type) {\n        return this.configManager.getDisplayName(type);\n    }\n    // 检查用户是否在朋友圈界面\n    isInMomentsView() {\n        return $('#moments-view').hasClass('active');\n    }\n    // 获取朋友圈通知状态\n    hasMomentNotifications() {\n        return this.configManager.getMomentNotificationState();\n    }\n    // 设置朋友圈通知状态\n    setMomentNotification(value) {\n        this.hasMomentNotification = value;\n        this.configManager.setMomentNotificationState(value);\n        // 更新UI中的通知指示器\n        this.updateMomentNotificationIndicator();\n    }\n    // 更新朋友圈通知指示器\n    updateMomentNotificationIndicator() {\n        const $optionsBtn = $('#wechat-options-btn');\n        if (this.hasMomentNotification) {\n            if (!$optionsBtn.find('.notification-dot').length) {\n                $optionsBtn.append('<span class=\"notification-dot\"></span>');\n            }\n        }\n        else {\n            $optionsBtn.find('.notification-dot').remove();\n        }\n    }\n    // 获取最后查看朋友圈时的时间戳\n    getLastMomentViewTimestamp() {\n        return this.configManager.getLastMomentViewTimestamp();\n    }\n    // 设置最后查看朋友圈时的时间戳\n    setLastMomentViewTimestamp() {\n        // 保存当前日志长度作为最后查看时间点\n        const currentLogLength = this.blmxManager.logEntries.length;\n        this.configManager.setLastMomentViewTimestamp(currentLogLength);\n    }\n    // 进入朋友圈视图时的处理\n    onEnterMomentsView() {\n        // console.log('[BLMX] 进入朋友圈视图，清除通知并更新最后查看时间');\n        // 使用jQuery更新封面图片\n        const savedCoverPhoto = this.configManager.getSavedCoverPhoto();\n        if (savedCoverPhoto) {\n            $('#moments-cover-photo').attr('src', savedCoverPhoto);\n        }\n        // 使用jQuery更新个性签名\n        const savedSignature = this.configManager.getSavedSignature();\n        $('#user-signature-display').text(savedSignature);\n        // 清除朋友圈通知\n        this.setMomentNotification(false);\n        // 更新最后查看朋友圈的时间戳\n        this.setLastMomentViewTimestamp();\n        // 记录当前日志长度用于调试\n        // console.log('[BLMX] 更新朋友圈最后查看索引为:', this.blmxManager.logEntries.length);\n    }\n    // 创建用户朋友圈动态\n    createUserMoment(text, image = '', imageType = 'none') {\n        // 获取当前日期时间\n        const now = window.currentGameDate || new Date();\n        const dateStr = `${now.getFullYear()}-${String(now.getMonth() + 1).padStart(2, '0')}-${String(now.getDate()).padStart(2, '0')}`;\n        const timeStr = `${String(now.getHours()).padStart(2, '0')}:${String(now.getMinutes()).padStart(2, '0')}`;\n        return {\n            key: 'USER_MOMENT',\n            data: {\n                text,\n                image,\n                image_type: imageType,\n                date: dateStr,\n                time: timeStr,\n            },\n        };\n    }\n    // 发送朋友圈动态通知（用于用户名、签名等变更）\n    notifyMomentChange(type, _oldValue, newValue) {\n        let text = '';\n        switch (type) {\n            case 'name':\n                text = `我改名字啦，新名字是\"${newValue}\"`;\n                break;\n            case 'signature':\n                text = `我的个性签名已更改为：\"${newValue}\"`;\n                break;\n        }\n        const momentEntry = this.createUserMoment(text);\n        // 添加到聊天记录\n        this.blmxManager.addEntry(momentEntry);\n        this.renderMomentsFeed();\n    }\n    // 处理消息撤回的朋友圈通知\n    notifyRecallViaMoments(sender, targetText) {\n        // 获取当前日期时间\n        const now = window.currentGameDate || new Date();\n        const timeStr = `${String(now.getHours()).padStart(2, '0')}:${String(now.getMinutes()).padStart(2, '0')}`;\n        // 创建撤回通知条目\n        const recallEntry = {\n            key: 'RECALL',\n            data: {\n                sender: sender,\n                target_text: targetText,\n                timestamp: `${timeStr}`,\n            },\n        };\n        // 添加到聊天记录\n        this.blmxManager.addEntry(recallEntry);\n        return recallEntry;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LENBQUM7Z0JBQ2pDLE1BQU07WUFDUixLQUFLLFdBQVc7Z0JBQ2QsSUFBSSxHQUFHLGVBQWUsUUFBUSxHQUFHLENBQUM7Z0JBQ2xDLE1BQU07UUFDVixDQUFDO1FBRUQsTUFBTSxXQUFXLEdBQUcsSUFBSSxDQUFDLGdCQUFnQixDQUFDLElBQUksQ0FBQyxDQUFDO1FBRWhELFVBQVU7UUFDVixJQUFJLENBQUMsV0FBVyxDQUFDLFFBQVEsQ0FBQyxXQUFXLENBQUMsQ0FBQztRQUN2QyxJQUFJLENBQUMsaUJBQWlCLEVBQUUsQ0FBQztJQUMzQixDQUFDO0lBRUQsZUFBZTtJQUNmLHNCQUFzQixDQUFDLE1BQXVCLEVBQUUsVUFBa0I7UUFDaEUsV0FBVztRQUNYLE1BQU0sR0FBRyxHQUFHLE1BQU0sQ0FBQyxlQUFlLElBQUksSUFBSSxJQUFJLEVBQUUsQ0FBQztRQUNqRCxNQUFNLE9BQU8sR0FBRyxHQUFHLE1BQU0sQ0FBQyxHQUFHLENBQUMsUUFBUSxFQUFFLENBQUMsQ0FBQyxRQUFRLENBQUMsQ0FBQyxFQUFFLEdBQUcsQ0FBQyxJQUFJLE1BQU0sQ0FBQyxHQUFHLENBQUMsVUFBVSxFQUFFLENBQUMsQ0FBQyxRQUFRLENBQUMsQ0FBQyxFQUFFLEdBQUcsQ0FBQyxFQUFFLENBQUM7UUFFMUcsV0FBVztRQUNYLE1BQU0sV0FBVyxHQUFHO1lBQ2xCLEdBQUcsRUFBRSxRQUFRO1lBQ2IsSUFBSSxFQUFFO2dCQUNKLE1BQU0sRUFBRSxNQUFNO2dCQUNkLFdBQVcsRUFBRSxVQUFVO2dCQUN2QixTQUFTLEVBQUUsR0FBRyxPQUFPLEVBQUU7YUFDeEI7U0FDRixDQUFDO1FBRUYsVUFBVTtRQUNWLElBQUksQ0FBQyxXQUFXLENBQUMsUUFBUSxDQUFDLFdBQWtCLENBQUMsQ0FBQztRQUU5QyxPQUFPLFdBQVcsQ0FBQztJQUNyQixDQUFDO0NBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly90YXZlcm5faGVscGVyX3RlbXBsYXRlLy4vc3JjL+WQjOWxguaJi+acui9tb21lbnRzLW1hbmFnZXIudHM/Il0sInNvdXJjZXNDb250ZW50IjpbIi8vIOaci+WPi+WciOeuoeeQhuaooeWdl1xuLy8g6LSf6LSj5pyL5Y+L5ZyI5riy5p+T44CB6YCa55+l566h55CG44CB5pe26Ze05qC85byP5YyW562J5Yqf6IO9XG5cbmltcG9ydCB7IENvbmZpZ01hbmFnZXIgfSBmcm9tICcuL2NvbmZpZy1tYW5hZ2VyJztcbmltcG9ydCB7IEJMTVhfUHJvdG9jb2wsIExvZ0VudHJ5LCBNb21lbnRFbnRyeSB9IGZyb20gJy4vc2NyaXB0JztcbmltcG9ydCB7IFVJUmVuZGVyZXIgfSBmcm9tICcuL3VpLXJlbmRlcmVyJztcblxuLy8gQWxsb3cgdXNlIG9mIGxvZGFzaCBhcyBnbG9iYWxcbi8vIEB0cy1pZ25vcmVcbmRlY2xhcmUgY29uc3QgXzogYW55O1xuXG5leHBvcnQgY2xhc3MgTW9tZW50c01hbmFnZXIge1xuICBwcml2YXRlIGJsbXhNYW5hZ2VyOiBCTE1YX1Byb3RvY29sO1xuICBwcml2YXRlIGNvbmZpZ01hbmFnZXI6IENvbmZpZ01hbmFnZXI7XG4gIHByaXZhdGUgdWlSZW5kZXJlcjogVUlSZW5kZXJlcjtcbiAgcHJpdmF0ZSBoYXNNb21lbnROb3RpZmljYXRpb246IGJvb2xlYW4gPSBmYWxzZTtcblxuICBjb25zdHJ1Y3RvcihibG14TWFuYWdlcjogQkxNWF9Qcm90b2NvbCwgY29uZmlnTWFuYWdlcjogQ29uZmlnTWFuYWdlciwgdWlSZW5kZXJlcjogVUlSZW5kZXJlcikge1xuICAgIHRoaXMuYmxteE1hbmFnZXIgPSBibG14TWFuYWdlcjtcbiAgICB0aGlzLmNvbmZpZ01hbmFnZXIgPSBjb25maWdNYW5hZ2VyO1xuICAgIHRoaXMudWlSZW5kZXJlciA9IHVpUmVuZGVyZXI7XG5cbiAgICAvLyDliJ3lp4vljJbpgJrnn6XnirbmgIFcbiAgICB0aGlzLmhhc01vbWVudE5vdGlmaWNhdGlvbiA9IHRoaXMuY29uZmlnTWFuYWdlci5nZXRNb21lbnROb3RpZmljYXRpb25TdGF0ZSgpO1xuICB9XG5cbiAgLy8g5riy5p+T5pyL5Y+L5ZyIXG4gIHJlbmRlck1vbWVudHNGZWVkKCk6IHZvaWQge1xuICAgIGlmICghdGhpcy5ibG14TWFuYWdlciB8fCAhdGhpcy51aVJlbmRlcmVyKSByZXR1cm47XG5cbiAgICBjb25zdCBsb2dFbnRyaWVzID0gdGhpcy5ibG14TWFuYWdlci5sb2dFbnRyaWVzO1xuICAgIGNvbnN0IGF2YXRhcnMgPSB0aGlzLmNvbmZpZ01hbmFnZXIuZ2V0Q29uZmlnKCkuYXZhdGFycztcblxuICAgIC8vIOS9v+eUqGpRdWVyeemAieaLqeWZqFxuICAgIGNvbnN0ICRtb21lbnRzRmVlZExpc3QgPSAkKCcjbW9tZW50cy1mZWVkLWxpc3QnKTtcbiAgICBpZiAoISRtb21lbnRzRmVlZExpc3QubGVuZ3RoKSByZXR1cm47XG5cbiAgICAvLyDmo4Dmn6XnlKjmiLfmmK/lkKblnKjmnIvlj4vlnIjnlYzpnaLvvIzlpoLmnpzmmK/liJnmm7TmlrDmnIDlkI7mn6XnnIvml7bpl7TmiLNcbiAgICBjb25zdCBpc0N1cnJlbnRseUluTW9tZW50c1ZpZXcgPSB0aGlzLmlzSW5Nb21lbnRzVmlldygpO1xuICAgIGlmIChpc0N1cnJlbnRseUluTW9tZW50c1ZpZXcpIHtcbiAgICAgIHRoaXMuc2V0TGFzdE1vbWVudFZpZXdUaW1lc3RhbXAoKTtcbiAgICAgIC8vIOa4hemZpOaci+WPi+WciOmAmuefpe+8jOWboOS4uueUqOaIt+ato+WcqOafpeeci+aci+WPi+WciFxuICAgICAgdGhpcy5zZXRNb21lbnROb3RpZmljYXRpb24oZmFsc2UpO1xuICAgIH1cblxuICAgICRtb21lbnRzRmVlZExpc3QuZW1wdHkoKTtcblxuICAgIC8vIOS9v+eUqGxvZGFzaOi/m+ihjOaVsOaNruWkhOeQhlxuICAgIGNvbnN0IHBvc3RzOiBSZWNvcmQ8bnVtYmVyLCBhbnk+ID0ge307XG4gICAgY29uc3QgbW9tZW50UG9zdExvZ0luZGljZXMgPSBfLnJlZHVjZShcbiAgICAgIGxvZ0VudHJpZXMsXG4gICAgICAocmVzdWx0OiBudW1iZXJbXSwgZW50cnk6IExvZ0VudHJ5LCBpbmRleDogbnVtYmVyKSA9PiB7XG4gICAgICAgIGlmICgna2V5JyBpbiBlbnRyeSAmJiBlbnRyeS5rZXkuaW5jbHVkZXMoJ19NT01FTlQnKSkge1xuICAgICAgICAgIHJlc3VsdC5wdXNoKGluZGV4KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgfSxcbiAgICAgIFtdLFxuICAgICk7XG5cbiAgICAvLyDmlLbpm4bmiYDmnInluJblrZBcbiAgICBfLmZvckVhY2gobW9tZW50UG9zdExvZ0luZGljZXMsIChsb2dJbmRleDogbnVtYmVyKSA9PiB7XG4gICAgICBjb25zdCBlbnRyeSA9IGxvZ0VudHJpZXNbbG9nSW5kZXhdO1xuICAgICAgcG9zdHNbbG9nSW5kZXhdID0geyAuLi5lbnRyeSwgbGlrZXM6IFtdLCBjb21tZW50czogW10sIGlkOiBsb2dJbmRleCB9O1xuICAgIH0pO1xuXG4gICAgLy8g5qOA5p+l5piv5ZCm5pyJQ0hBUuWPkeihqOeahOaWsOaci+WPi+WciOaIluivhOiuulxuICAgIGxldCBoYXNOZXdDaGFyTW9tZW50cyA9IGZhbHNlO1xuICAgIGNvbnN0IGxhc3RWaWV3VGltZXN0YW1wID0gdGhpcy5nZXRMYXN0TW9tZW50Vmlld1RpbWVzdGFtcCgpO1xuICAgIGNvbnN0IHVzZXJJbk1vbWVudHNWaWV3ID0gdGhpcy5pc0luTW9tZW50c1ZpZXcoKTtcblxuICAgIC8vIOWkhOeQhueCuei1nuWSjOivhOiuulxuICAgIF8uZm9yRWFjaChsb2dFbnRyaWVzLCAoZW50cnk6IExvZ0VudHJ5LCBpbmRleDogbnVtYmVyKSA9PiB7XG4gICAgICBpZiAoJ2tleScgaW4gZW50cnkgJiYgKGVudHJ5LmtleS5pbmNsdWRlcygnX0xJS0UnKSB8fCBlbnRyeS5rZXkuaW5jbHVkZXMoJ19DT01NRU5UJykpKSB7XG4gICAgICAgIC8vIOS/ruWkjXRhcmdldF9wb3N0X2lk55qE5aSE55CG6YC76L6R77yM5L2/55So5LiO5Y6f54mI55u45ZCM55qE5pa55byPXG4gICAgICAgIGNvbnN0IHRhcmdldFBvc3RBYnNvbHV0ZUluZGV4ID0gbW9tZW50UG9zdExvZ0luZGljZXNbcGFyc2VJbnQoKGVudHJ5IGFzIGFueSkuZGF0YS50YXJnZXRfcG9zdF9pZCwgMTApXTtcbiAgICAgICAgY29uc3QgdGFyZ2V0UG9zdCA9IHBvc3RzW3RhcmdldFBvc3RBYnNvbHV0ZUluZGV4XTtcblxuICAgICAgICBpZiAodGFyZ2V0UG9zdCkge1xuICAgICAgICAgIGlmIChlbnRyeS5rZXkuaW5jbHVkZXMoJ19MSUtFJykpIHtcbiAgICAgICAgICAgIGNvbnN0IGxpa2VyTmFtZSA9IGVudHJ5LmtleS5zdGFydHNXaXRoKCdVU0VSJykgPyB0aGlzLmdldERpc3BsYXlOYW1lKCd1c2VyJykgOiB0aGlzLmdldERpc3BsYXlOYW1lKCdjaGFyJyk7XG4gICAgICAgICAgICBpZiAoIV8uc29tZSh0YXJnZXRQb3N0Lmxpa2VzLCAobDogYW55KSA9PiBsLm5hbWUgPT09IGxpa2VyTmFtZSkpIHtcbiAgICAgICAgICAgICAgdGFyZ2V0UG9zdC5saWtlcy5wdXNoKHsga2V5OiBlbnRyeS5rZXksIG5hbWU6IGxpa2VyTmFtZSwgb3JpZ2luYWxMb2dJbmRleDogaW5kZXggfSk7XG5cbiAgICAgICAgICAgICAgLy8g5aaC5p6c5pivQ0hBUueCuei1nu+8jOS4lOeUqOaIt+S4jeWcqOaci+WPi+WciOeVjOmdou+8jOajgOafpeaYr+WQpuaYr+aWsOa0u+WKqFxuICAgICAgICAgICAgICBpZiAoZW50cnkua2V5LnN0YXJ0c1dpdGgoJ0NIQVInKSAmJiAhdXNlckluTW9tZW50c1ZpZXcpIHtcbiAgICAgICAgICAgICAgICAvLyDkvb/nlKjntKLlvJXkvY3nva7mnaXliKTmlq3mmK/lkKbmmK/mlrDmtLvliqjvvJpcbiAgICAgICAgICAgICAgICAvLyDlpoLmnpzov5nkuKrngrnotZ7lnKjml6Xlv5fkuK3nmoTntKLlvJXlpKfkuo7mnIDlkI7mn6XnnIvmnIvlj4vlnIjml7bkv53lrZjnmoTml6Xlv5fplb/luqbvvIzor7TmmI7ov5nmmK/mlrDmtLvliqhcbiAgICAgICAgICAgICAgICBjb25zdCBpc05ld0FjdGl2aXR5ID0gaW5kZXggPiBsYXN0Vmlld1RpbWVzdGFtcDtcbiAgICAgICAgICAgICAgICBpZiAoaXNOZXdBY3Rpdml0eSkge1xuICAgICAgICAgICAgICAgICAgaGFzTmV3Q2hhck1vbWVudHMgPSB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0YXJnZXRQb3N0LmNvbW1lbnRzLnB1c2goeyAuLi5lbnRyeSwgb3JpZ2luYWxMb2dJbmRleDogaW5kZXggfSk7XG5cbiAgICAgICAgICAgIC8vIOWmguaenOaYr0NIQVLor4TorrrvvIzkuJTnlKjmiLfkuI3lnKjmnIvlj4vlnIjnlYzpnaLvvIzmo4Dmn6XmmK/lkKbmmK/mlrDmtLvliqhcbiAgICAgICAgICAgIGlmIChlbnRyeS5rZXkuc3RhcnRzV2l0aCgnQ0hBUicpICYmICF1c2VySW5Nb21lbnRzVmlldykge1xuICAgICAgICAgICAgICAvLyDkvb/nlKjntKLlvJXkvY3nva7mnaXliKTmlq3mmK/lkKbmmK/mlrDmtLvliqhcbiAgICAgICAgICAgICAgY29uc3QgaXNOZXdBY3Rpdml0eSA9IGluZGV4ID4gbGFzdFZpZXdUaW1lc3RhbXA7XG4gICAgICAgICAgICAgIGlmIChpc05ld0FjdGl2aXR5KSB7XG4gICAgICAgICAgICAgICAgaGFzTmV3Q2hhck1vbWVudHMgPSB0cnVlO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNvbnNvbGUud2FybihcbiAgICAgICAgICAgIGBbQkxNWF0gQ291bGQgbm90IGZpbmQgdGFyZ2V0IHBvc3QgZm9yIGludGVyYWN0aW9uLiB0YXJnZXRfcG9zdF9pZDogJHtcbiAgICAgICAgICAgICAgKGVudHJ5IGFzIGFueSkuZGF0YS50YXJnZXRfcG9zdF9pZFxuICAgICAgICAgICAgfSwgYXZhaWxhYmxlIHBvc3RzOiAke09iamVjdC5rZXlzKHBvc3RzKS5qb2luKCcsICcpfWAsXG4gICAgICAgICAgICBlbnRyeSxcbiAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vIOajgOafpUNIQVLlj5HooajnmoTmnIvlj4vlnIhcbiAgICAgIGlmICgna2V5JyBpbiBlbnRyeSAmJiBlbnRyeS5rZXkgPT09ICdDSEFSX01PTUVOVCcpIHtcbiAgICAgICAgLy8g5L2/55So57Si5byV5L2N572u5Yik5pat5piv5ZCm5piv5paw5pyL5Y+L5ZyIXG4gICAgICAgIGNvbnN0IGlzTmV3TW9tZW50ID0gaW5kZXggPiBsYXN0Vmlld1RpbWVzdGFtcDtcblxuICAgICAgICAvLyDlj6rmnInlvZPmmK/mlrDmnIvlj4vlnIjkuJTnlKjmiLfkuI3lnKjmnIvlj4vlnIjnlYzpnaLml7bmiY3mmL7npLrpgJrnn6VcbiAgICAgICAgaWYgKGlzTmV3TW9tZW50ICYmICF1c2VySW5Nb21lbnRzVmlldykge1xuICAgICAgICAgIGhhc05ld0NoYXJNb21lbnRzID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pO1xuXG4gICAgLy8g5pu05paw5pyL5Y+L5ZyI6YCa55+l54q25oCBIC0g5Y+q5pyJ5b2T5pyJ5paw5rS75Yqo5LiU55So5oi35LiN5Zyo5pyL5Y+L5ZyI55WM6Z2i5pe25omN6K6+572u6YCa55+lXG4gICAgaWYgKCF1c2VySW5Nb21lbnRzVmlldykge1xuICAgICAgdGhpcy5zZXRNb21lbnROb3RpZmljYXRpb24oaGFzTmV3Q2hhck1vbWVudHMpO1xuICAgICAgLy8gY29uc29sZS5sb2coJ1tCTE1YXSDmnIvlj4vlnIjpgJrnn6XnirbmgIE6Jywge1xuICAgICAgLy8gICBoYXNOZXdDaGFyTW9tZW50cyxcbiAgICAgIC8vICAgbGFzdFZpZXdJbmRleDogdGhpcy5nZXRMYXN0TW9tZW50Vmlld1RpbWVzdGFtcCgpLFxuICAgICAgLy8gICBjdXJyZW50TG9nTGVuZ3RoOiB0aGlzLmJsbXhNYW5hZ2VyLmxvZ0VudHJpZXMubGVuZ3RoLFxuICAgICAgLy8gICB1c2VySW5Nb21lbnRzVmlldyxcbiAgICAgIC8vIH0pO1xuICAgIH1cblxuICAgIC8vIOWPjei9rOW4luWtkOmhuuW6j+W5tua4suafk1xuICAgIF8uY2hhaW4ocG9zdHMpXG4gICAgICAudmFsdWVzKClcbiAgICAgIC5yZXZlcnNlKClcbiAgICAgIC5mb3JFYWNoKChwb3N0OiBhbnkpID0+IHtcbiAgICAgICAgY29uc3QgZnJvbVVzZXIgPSBwb3N0LmtleS5zdGFydHNXaXRoKCdVU0VSJyk7XG4gICAgICAgIGNvbnN0IGF1dGhvck5hbWUgPSBmcm9tVXNlciA/IHRoaXMuZ2V0RGlzcGxheU5hbWUoJ3VzZXInKSA6IHRoaXMuZ2V0RGlzcGxheU5hbWUoJ2NoYXInKTtcbiAgICAgICAgY29uc3QgYXV0aG9yQXZhdGFyID0gZnJvbVVzZXIgPyBhdmF0YXJzLnVzZXIgOiBhdmF0YXJzLmNoYXI7XG5cbiAgICAgICAgY29uc3QgJGxpID0gJCgnPGxpPicpLmFkZENsYXNzKCdtb21lbnQtcG9zdCcpLmF0dHIoJ2RhdGEtcG9zdC1pZCcsIHBvc3QuaWQpO1xuXG4gICAgICAgIGNvbnN0IG1vbWVudFNlcXVlbmNlSWQgPSBtb21lbnRQb3N0TG9nSW5kaWNlcy5pbmRleE9mKHBvc3QuaWQpO1xuICAgICAgICAkbGkuYXR0cignZGF0YS1tb21lbnQtc2VxdWVuY2UtaWQnLCBTdHJpbmcobW9tZW50U2VxdWVuY2VJZCkpO1xuXG4gICAgICAgIC8vIOiuvue9rm1vbWVudC1pZOWxnuaAp++8jOS9v+eUqG1vbWVudFNlcXVlbmNlSWTkvZzkuLrmnIvlj4vlnIjnmoTllK/kuIDmoIfor4bnrKZcbiAgICAgICAgLy8g6L+Z5qC35Y+v5Lul56Gu5L+d54K56LWe5ZKM6K+E6K665q2j56Gu5YWz6IGU5Yiw5a+55bqU55qE5pyL5Y+L5ZyIXG4gICAgICAgICRsaS5hdHRyKCdkYXRhLW1vbWVudC1pZCcsIFN0cmluZyhtb21lbnRTZXF1ZW5jZUlkKSk7XG5cbiAgICAgICAgLy8g5p6E5bu65aqS5L2TSFRNTFxuICAgICAgICBsZXQgbWVkaWFIdG1sID0gJyc7XG4gICAgICAgIGlmIChwb3N0LmRhdGEuaW1hZ2VfdHlwZSA9PT0gJ3VybCcgJiYgcG9zdC5kYXRhLmltYWdlKSB7XG4gICAgICAgICAgbWVkaWFIdG1sID0gYDxpbWcgc3JjPVwiJHtwb3N0LmRhdGEuaW1hZ2V9XCIgY2xhc3M9XCJwb3N0LW1lZGlhLWltYWdlXCIgLz5gO1xuICAgICAgICB9IGVsc2UgaWYgKHBvc3QuZGF0YS5pbWFnZV90eXBlID09PSAnZGVzYycgJiYgcG9zdC5kYXRhLmltYWdlKSB7XG4gICAgICAgICAgbWVkaWFIdG1sID0gYDxkaXYgY2xhc3M9XCJpbWFnZS1kZXNjLWNvbnRlbnRcIj48ZGl2IGNsYXNzPVwidGV4dC13cmFwcGVyXCI+JHtwb3N0LmRhdGEuaW1hZ2V9PC9kaXY+PC9kaXY+YDtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIOaehOW7uuS6kuWKqOWMuuWfn0hUTUxcbiAgICAgICAgbGV0IGludGVyYWN0aW9uc0h0bWwgPSAnJztcbiAgICAgICAgaWYgKHBvc3QubGlrZXMubGVuZ3RoID4gMCB8fCBwb3N0LmNvbW1lbnRzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICBjb25zdCBsaWtlcnNIdG1sID1cbiAgICAgICAgICAgIHBvc3QubGlrZXMubGVuZ3RoID4gMFxuICAgICAgICAgICAgICA/IGA8ZGl2IGNsYXNzPVwibGlrZXMtc2VjdGlvblwiPjxpIGNsYXNzPVwiZmFzIGZhLWhlYXJ0XCI+PC9pPiAke18ubWFwKFxuICAgICAgICAgICAgICAgICAgcG9zdC5saWtlcyxcbiAgICAgICAgICAgICAgICAgIChsOiBhbnkpID0+IGA8c3BhbiBjbGFzcz1cImxpa2VyLW5hbWVcIj4ke2wubmFtZX08L3NwYW4+YCxcbiAgICAgICAgICAgICAgICApLmpvaW4oJywgJyl9PC9kaXY+YFxuICAgICAgICAgICAgICA6ICcnO1xuXG4gICAgICAgICAgY29uc3QgY29tbWVudHNIdG1sID1cbiAgICAgICAgICAgIHBvc3QuY29tbWVudHMubGVuZ3RoID4gMFxuICAgICAgICAgICAgICA/IGA8dWwgY2xhc3M9XCJjb21tZW50cy1zZWN0aW9uXCI+JHtfLm1hcChcbiAgICAgICAgICAgICAgICAgIHBvc3QuY29tbWVudHMsXG4gICAgICAgICAgICAgICAgICAoYzogYW55KSA9PlxuICAgICAgICAgICAgICAgICAgICBgPGxpPjxzcGFuIGNsYXNzPVwiY29tbWVudC1hdXRob3JcIj4ke1xuICAgICAgICAgICAgICAgICAgICAgIGMua2V5LnN0YXJ0c1dpdGgoJ1VTRVInKSA/IHRoaXMuZ2V0RGlzcGxheU5hbWUoJ3VzZXInKSA6IHRoaXMuZ2V0RGlzcGxheU5hbWUoJ2NoYXInKVxuICAgICAgICAgICAgICAgICAgICB9PC9zcGFuPjogJHtjLmRhdGEudGV4dH08L2xpPmAsXG4gICAgICAgICAgICAgICAgKS5qb2luKCcnKX08L3VsPmBcbiAgICAgICAgICAgICAgOiAnJztcblxuICAgICAgICAgIGludGVyYWN0aW9uc0h0bWwgPSBgPGRpdiBjbGFzcz1cInBvc3QtaW50ZXJhY3Rpb25zXCI+JHtsaWtlcnNIdG1sfSR7Y29tbWVudHNIdG1sfTwvZGl2PmA7XG4gICAgICAgIH1cblxuICAgICAgICAvLyDkvb/nlKjoh6rlrprkuYnmoLzlvI/ljJbml7bpl7Tlh73mlbBcbiAgICAgICAgY29uc3QgZGlzcGxheVRpbWUgPSB0aGlzLmZvcm1hdE1vbWVudFRpbWUocG9zdC5kYXRhLmRhdGUsIHBvc3QuZGF0YS50aW1lKTtcbiAgICAgICAgY29uc3QgZGVsZXRlQnRuSHRtbCA9IGA8c3BhbiBjbGFzcz1cImRlbGV0ZS1tb21lbnQtYnRuXCIgdGl0bGU9XCLliKDpmaRcIj7liKDpmaQ8L3NwYW4+YDtcblxuICAgICAgICAkbGkuaHRtbChgPGltZyBzcmM9XCIke2F1dGhvckF2YXRhcn1cIiBjbGFzcz1cInBvc3QtYXV0aG9yLWF2YXRhclwiIC8+XG4gICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJwb3N0LWRldGFpbHNcIj5cbiAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwicG9zdC1hdXRob3ItbmFtZVwiPiR7YXV0aG9yTmFtZX08L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgICA8cCBjbGFzcz1cInBvc3QtY29udGVudFwiPiR7cG9zdC5kYXRhLnRleHQgfHwgJyd9PC9wPlxuICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cInBvc3QtbWVkaWFcIj4ke21lZGlhSHRtbH08L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJwb3N0LW1ldGFcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwicG9zdC1tZXRhLWxlZnRcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJ0aW1lc3RhbXBcIj4ke2Rpc3BsYXlUaW1lfTwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHtkZWxldGVCdG5IdG1sfVxuICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJwb3N0LWFjdGlvbnNcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJjb21tZW50LWJ1dHRvblwiIHRpdGxlPVwi6K+E6K66L+eCuei1nlwiPjxpIGNsYXNzPVwiZmFzIGZhLWNvbW1lbnQtZG90c1wiPjwvaT48L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICR7aW50ZXJhY3Rpb25zSHRtbH1cbiAgICAgICAgICAgICAgICAgPC9kaXY+YCk7XG5cbiAgICAgICAgJG1vbWVudHNGZWVkTGlzdC5hcHBlbmQoJGxpKTtcbiAgICAgIH0pXG4gICAgICAudmFsdWUoKTtcblxuICAgIC8vIOehruS/neWKoOi9veacgOaWsOeahOWwgemdouWbvueJh1xuICAgIGNvbnN0IHNhdmVkQ292ZXJQaG90byA9IHRoaXMuY29uZmlnTWFuYWdlci5nZXRTYXZlZENvdmVyUGhvdG8oKTtcbiAgICBpZiAoc2F2ZWRDb3ZlclBob3RvKSB7XG4gICAgICAkKCcjbW9tZW50cy1jb3Zlci1waG90bycpLmF0dHIoJ3NyYycsIHNhdmVkQ292ZXJQaG90byk7XG4gICAgfVxuICB9XG5cbiAgLy8g5qC85byP5YyW5pyL5Y+L5ZyI5pe26Ze05pi+56S6XG4gIHByaXZhdGUgZm9ybWF0TW9tZW50VGltZShkYXRlU3RyaW5nOiBzdHJpbmcsIHRpbWVTdHJpbmc6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgdHJ5IHtcbiAgICAgIC8vIOS9v+eUqOa4uOaIj+WGheaXtumXtOiAjOmdnueOsOWunuaXtumXtFxuICAgICAgY29uc3Qgbm93ID0gd2luZG93LmN1cnJlbnRHYW1lRGF0ZSA/IG5ldyBEYXRlKHdpbmRvdy5jdXJyZW50R2FtZURhdGUpIDogbmV3IERhdGUoKTtcbiAgICAgIGNvbnN0IGRhdGUgPSBuZXcgRGF0ZShgJHtkYXRlU3RyaW5nfSAke3RpbWVTdHJpbmd9YCk7XG5cbiAgICAgIGNvbnN0IGRpZmZNcyA9IG5vdy5nZXRUaW1lKCkgLSBkYXRlLmdldFRpbWUoKTtcbiAgICAgIGNvbnN0IGRpZmZNaW5zID0gTWF0aC5mbG9vcihkaWZmTXMgLyA2MDAwMCk7XG4gICAgICBjb25zdCBkaWZmSG91cnMgPSBNYXRoLmZsb29yKGRpZmZNaW5zIC8gNjApO1xuICAgICAgY29uc3QgZGlmZkRheXMgPSBNYXRoLmZsb29yKGRpZmZIb3VycyAvIDI0KTtcblxuICAgICAgaWYgKGRpZmZNaW5zIDwgMSkge1xuICAgICAgICByZXR1cm4gJ+WImuWImic7XG4gICAgICB9IGVsc2UgaWYgKGRpZmZNaW5zIDwgNjApIHtcbiAgICAgICAgcmV0dXJuIGAke2RpZmZNaW5zfeWIhumSn+WJjWA7XG4gICAgICB9IGVsc2UgaWYgKGRpZmZIb3VycyA8IDI0KSB7XG4gICAgICAgIHJldHVybiBgJHtkaWZmSG91cnN95bCP5pe25YmNYDtcbiAgICAgIH0gZWxzZSBpZiAoZGlmZkRheXMgPT09IDEpIHtcbiAgICAgICAgcmV0dXJuICfmmKjlpKknO1xuICAgICAgfSBlbHNlIGlmIChkaWZmRGF5cyA9PT0gMikge1xuICAgICAgICByZXR1cm4gJ+WJjeWkqSc7XG4gICAgICB9IGVsc2UgaWYgKGRpZmZEYXlzIDwgNykge1xuICAgICAgICByZXR1cm4gYCR7ZGlmZkRheXN95aSp5YmNYDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIOi2hei/h+S4gOWRqOaYvuekuuWFt+S9k+aXpeacn1xuICAgICAgICBjb25zdCBtb250aCA9IGRhdGUuZ2V0TW9udGgoKSArIDE7XG4gICAgICAgIGNvbnN0IGRheSA9IGRhdGUuZ2V0RGF0ZSgpO1xuICAgICAgICByZXR1cm4gYCR7bW9udGh95pyIJHtkYXl95pelYDtcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcign5pe26Ze05qC85byP5YyW6ZSZ6K+vOicsIGVycm9yKTtcbiAgICAgIHJldHVybiBgJHtkYXRlU3RyaW5nfSAke3RpbWVTdHJpbmd9YDtcbiAgICB9XG4gIH1cblxuICAvLyDojrflj5bmmL7npLrlkI3np7BcbiAgcHJpdmF0ZSBnZXREaXNwbGF5TmFtZSh0eXBlOiAndXNlcicgfCAnY2hhcicpOiBzdHJpbmcge1xuICAgIHJldHVybiB0aGlzLmNvbmZpZ01hbmFnZXIuZ2V0RGlzcGxheU5hbWUodHlwZSk7XG4gIH1cblxuICAvLyDmo4Dmn6XnlKjmiLfmmK/lkKblnKjmnIvlj4vlnIjnlYzpnaJcbiAgcHJpdmF0ZSBpc0luTW9tZW50c1ZpZXcoKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuICQoJyNtb21lbnRzLXZpZXcnKS5oYXNDbGFzcygnYWN0aXZlJyk7XG4gIH1cblxuICAvLyDojrflj5bmnIvlj4vlnIjpgJrnn6XnirbmgIFcbiAgaGFzTW9tZW50Tm90aWZpY2F0aW9ucygpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy5jb25maWdNYW5hZ2VyLmdldE1vbWVudE5vdGlmaWNhdGlvblN0YXRlKCk7XG4gIH1cblxuICAvLyDorr7nva7mnIvlj4vlnIjpgJrnn6XnirbmgIFcbiAgc2V0TW9tZW50Tm90aWZpY2F0aW9uKHZhbHVlOiBib29sZWFuKTogdm9pZCB7XG4gICAgdGhpcy5oYXNNb21lbnROb3RpZmljYXRpb24gPSB2YWx1ZTtcbiAgICB0aGlzLmNvbmZpZ01hbmFnZXIuc2V0TW9tZW50Tm90aWZpY2F0aW9uU3RhdGUodmFsdWUpO1xuICAgIC8vIOabtOaWsFVJ5Lit55qE6YCa55+l5oyH56S65ZmoXG4gICAgdGhpcy51cGRhdGVNb21lbnROb3RpZmljYXRpb25JbmRpY2F0b3IoKTtcbiAgfVxuXG4gIC8vIOabtOaWsOaci+WPi+WciOmAmuefpeaMh+ekuuWZqFxuICBwcml2YXRlIHVwZGF0ZU1vbWVudE5vdGlmaWNhdGlvbkluZGljYXRvcigpOiB2b2lkIHtcbiAgICBjb25zdCAkb3B0aW9uc0J0biA9ICQoJyN3ZWNoYXQtb3B0aW9ucy1idG4nKTtcbiAgICBpZiAodGhpcy5oYXNNb21lbnROb3RpZmljYXRpb24pIHtcbiAgICAgIGlmICghJG9wdGlvbnNCdG4uZmluZCgnLm5vdGlmaWNhdGlvbi1kb3QnKS5sZW5ndGgpIHtcbiAgICAgICAgJG9wdGlvbnNCdG4uYXBwZW5kKCc8c3BhbiBjbGFzcz1cIm5vdGlmaWNhdGlvbi1kb3RcIj48L3NwYW4+Jyk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgICRvcHRpb25zQnRuLmZpbmQoJy5ub3RpZmljYXRpb24tZG90JykucmVtb3ZlKCk7XG4gICAgfVxuICB9XG5cbiAgLy8g6I635Y+W5pyA5ZCO5p+l55yL5pyL5Y+L5ZyI5pe255qE5pe26Ze05oizXG4gIHByaXZhdGUgZ2V0TGFzdE1vbWVudFZpZXdUaW1lc3RhbXAoKTogbnVtYmVyIHtcbiAgICByZXR1cm4gdGhpcy5jb25maWdNYW5hZ2VyLmdldExhc3RNb21lbnRWaWV3VGltZXN0YW1wKCk7XG4gIH1cblxuICAvLyDorr7nva7mnIDlkI7mn6XnnIvmnIvlj4vlnIjml7bnmoTml7bpl7TmiLNcbiAgc2V0TGFzdE1vbWVudFZpZXdUaW1lc3RhbXAoKTogdm9pZCB7XG4gICAgLy8g5L+d5a2Y5b2T5YmN5pel5b+X6ZW/5bqm5L2c5Li65pyA5ZCO5p+l55yL5pe26Ze054K5XG4gICAgY29uc3QgY3VycmVudExvZ0xlbmd0aCA9IHRoaXMuYmxteE1hbmFnZXIubG9nRW50cmllcy5sZW5ndGg7XG4gICAgdGhpcy5jb25maWdNYW5hZ2VyLnNldExhc3RNb21lbnRWaWV3VGltZXN0YW1wKGN1cnJlbnRMb2dMZW5ndGgpO1xuICB9XG5cbiAgLy8g6L+b5YWl5pyL5Y+L5ZyI6KeG5Zu+5pe255qE5aSE55CGXG4gIG9uRW50ZXJNb21lbnRzVmlldygpOiB2b2lkIHtcbiAgICAvLyBjb25zb2xlLmxvZygnW0JMTVhdIOi/m+WFpeaci+WPi+WciOinhuWbvu+8jOa4hemZpOmAmuefpeW5tuabtOaWsOacgOWQjuafpeeci+aXtumXtCcpO1xuXG4gICAgLy8g5L2/55SoalF1ZXJ55pu05paw5bCB6Z2i5Zu+54mHXG4gICAgY29uc3Qgc2F2ZWRDb3ZlclBob3RvID0gdGhpcy5jb25maWdNYW5hZ2VyLmdldFNhdmVkQ292ZXJQaG90bygpO1xuICAgIGlmIChzYXZlZENvdmVyUGhvdG8pIHtcbiAgICAgICQoJyNtb21lbnRzLWNvdmVyLXBob3RvJykuYXR0cignc3JjJywgc2F2ZWRDb3ZlclBob3RvKTtcbiAgICB9XG5cbiAgICAvLyDkvb/nlKhqUXVlcnnmm7TmlrDkuKrmgKfnrb7lkI1cbiAgICBjb25zdCBzYXZlZFNpZ25hdHVyZSA9IHRoaXMuY29uZmlnTWFuYWdlci5nZXRTYXZlZFNpZ25hdHVyZSgpO1xuICAgICQoJyN1c2VyLXNpZ25hdHVyZS1kaXNwbGF5JykudGV4dChzYXZlZFNpZ25hdHVyZSk7XG5cbiAgICAvLyDmuIXpmaTmnIvlj4vlnIjpgJrnn6VcbiAgICB0aGlzLnNldE1vbWVudE5vdGlmaWNhdGlvbihmYWxzZSk7XG5cbiAgICAvLyDmm7TmlrDmnIDlkI7mn6XnnIvmnIvlj4vlnIjnmoTml7bpl7TmiLNcbiAgICB0aGlzLnNldExhc3RNb21lbnRWaWV3VGltZXN0YW1wKCk7XG5cbiAgICAvLyDorrDlvZXlvZPliY3ml6Xlv5fplb/luqbnlKjkuo7osIPor5VcbiAgICAvLyBjb25zb2xlLmxvZygnW0JMTVhdIOabtOaWsOaci+WPi+WciOacgOWQjuafpeeci+e0ouW8leS4ujonLCB0aGlzLmJsbXhNYW5hZ2VyLmxvZ0VudHJpZXMubGVuZ3RoKTtcbiAgfVxuXG4gIC8vIOWIm+W7uueUqOaIt+aci+WPi+WciOWKqOaAgVxuICBjcmVhdGVVc2VyTW9tZW50KHRleHQ6IHN0cmluZywgaW1hZ2U6IHN0cmluZyA9ICcnLCBpbWFnZVR5cGU6IHN0cmluZyA9ICdub25lJyk6IE1vbWVudEVudHJ5IHtcbiAgICAvLyDojrflj5blvZPliY3ml6XmnJ/ml7bpl7RcbiAgICBjb25zdCBub3cgPSB3aW5kb3cuY3VycmVudEdhbWVEYXRlIHx8IG5ldyBEYXRlKCk7XG4gICAgY29uc3QgZGF0ZVN0ciA9IGAke25vdy5nZXRGdWxsWWVhcigpfS0ke1N0cmluZyhub3cuZ2V0TW9udGgoKSArIDEpLnBhZFN0YXJ0KDIsICcwJyl9LSR7U3RyaW5nKFxuICAgICAgbm93LmdldERhdGUoKSxcbiAgICApLnBhZFN0YXJ0KDIsICcwJyl9YDtcbiAgICBjb25zdCB0aW1lU3RyID0gYCR7U3RyaW5nKG5vdy5nZXRIb3VycygpKS5wYWRTdGFydCgyLCAnMCcpfToke1N0cmluZyhub3cuZ2V0TWludXRlcygpKS5wYWRTdGFydCgyLCAnMCcpfWA7XG5cbiAgICByZXR1cm4ge1xuICAgICAga2V5OiAnVVNFUl9NT01FTlQnLFxuICAgICAgZGF0YToge1xuICAgICAgICB0ZXh0LFxuICAgICAgICBpbWFnZSxcbiAgICAgICAgaW1hZ2VfdHlwZTogaW1hZ2VUeXBlIGFzICd1cmwnIHwgJ2Rlc2MnIHwgJ25vbmUnLFxuICAgICAgICBkYXRlOiBkYXRlU3RyLFxuICAgICAgICB0aW1lOiB0aW1lU3RyLFxuICAgICAgfSxcbiAgICB9O1xuICB9XG5cbiAgLy8g5Y+R6YCB5pyL5Y+L5ZyI5Yqo5oCB6YCa55+l77yI55So5LqO55So5oi35ZCN44CB562+5ZCN562J5Y+Y5pu077yJXG4gIG5vdGlmeU1vbWVudENoYW5nZSh0eXBlOiAnbmFtZScgfCAnc2lnbmF0dXJlJywgX29sZFZhbHVlOiBzdHJpbmcsIG5ld1ZhbHVlOiBzdHJpbmcpOiB2b2lkIHtcbiAgICBsZXQgdGV4dCA9ICcnO1xuICAgIHN3aXRjaCAodHlwZSkge1xuICAgICAgY2FzZSAnbmFtZSc6XG4gICAgICAgIHRleHQgPSBg5oiR5pS55ZCN5a2X5ZWm77yM5paw5ZCN5a2X5pivXCIke25ld1ZhbHVlfVwiYDtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICdzaWduYXR1cmUnOlxuICAgICAgICB0ZXh0ID0gYOaIkeeahOS4quaAp+etvuWQjeW3suabtOaUueS4uu+8mlwiJHtuZXdWYWx1ZX1cImA7XG4gICAgICAgIGJyZWFrO1xuICAgIH1cblxuICAgIGNvbnN0IG1vbWVudEVudHJ5ID0gdGhpcy5jcmVhdGVVc2VyTW9tZW50KHRleHQpO1xuXG4gICAgLy8g5re75Yqg5Yiw6IGK5aSp6K6w5b2VXG4gICAgdGhpcy5ibG14TWFuYWdlci5hZGRFbnRyeShtb21lbnRFbnRyeSk7XG4gICAgdGhpcy5yZW5kZXJNb21lbnRzRmVlZCgpO1xuICB9XG5cbiAgLy8g5aSE55CG5raI5oGv5pKk5Zue55qE5pyL5Y+L5ZyI6YCa55+lXG4gIG5vdGlmeVJlY2FsbFZpYU1vbWVudHMoc2VuZGVyOiAnVVNFUicgfCAnQ0hBUicsIHRhcmdldFRleHQ6IHN0cmluZyk6IGFueSB7XG4gICAgLy8g6I635Y+W5b2T5YmN5pel5pyf5pe26Ze0XG4gICAgY29uc3Qgbm93ID0gd2luZG93LmN1cnJlbnRHYW1lRGF0ZSB8fCBuZXcgRGF0ZSgpO1xuICAgIGNvbnN0IHRpbWVTdHIgPSBgJHtTdHJpbmcobm93LmdldEhvdXJzKCkpLnBhZFN0YXJ0KDIsICcwJyl9OiR7U3RyaW5nKG5vdy5nZXRNaW51dGVzKCkpLnBhZFN0YXJ0KDIsICcwJyl9YDtcblxuICAgIC8vIOWIm+W7uuaSpOWbnumAmuefpeadoeebrlxuICAgIGNvbnN0IHJlY2FsbEVudHJ5ID0ge1xuICAgICAga2V5OiAnUkVDQUxMJyxcbiAgICAgIGRhdGE6IHtcbiAgICAgICAgc2VuZGVyOiBzZW5kZXIsXG4gICAgICAgIHRhcmdldF90ZXh0OiB0YXJnZXRUZXh0LFxuICAgICAgICB0aW1lc3RhbXA6IGAke3RpbWVTdHJ9YCxcbiAgICAgIH0sXG4gICAgfTtcblxuICAgIC8vIOa3u+WKoOWIsOiBiuWkqeiusOW9lVxuICAgIHRoaXMuYmxteE1hbmFnZXIuYWRkRW50cnkocmVjYWxsRW50cnkgYXMgYW55KTtcblxuICAgIHJldHVybiByZWNhbGxFbnRyeTtcbiAgfVxufVxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/同层手机/moments-manager.ts\n")},"./src/同层手机/script.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   BLMX_Protocol: () => (/* binding */ BLMX_Protocol),\n/* harmony export */   getTavernHelper: () => (/* binding */ getTavernHelper)\n/* harmony export */ });\n// 为TavernHelper创建一个访问器函数\nfunction getTavernHelper() {\n    return window.parent.TavernHelper;\n}\nclass BLMX_Protocol {\n    logEntries = [];\n    messageId = null;\n    charId;\n    LOG_START_TAG = '===BLMX_LOG_BEGIN===';\n    LOG_END_TAG = '===BLMX_LOG_END===';\n    constructor(charId) {\n        this.charId = charId;\n    }\n    // 获取角色ID\n    getCharId() {\n        return this.charId;\n    }\n    async initialize() {\n        // console.log('[BLMX] Initializing and scanning for chat history...');\n        const lastMessageId = await getTavernHelper().getLastMessageId();\n        if (lastMessageId === null) {\n            // console.warn('[BLMX] No messages found. Starting fresh at message ID 0.');\n            this.messageId = 0;\n            this.logEntries = [];\n            await this.persistLogToStorage();\n            return true;\n        }\n        let latestUiMessage = null;\n        const previousUiMessages = [];\n        for (let i = lastMessageId; i >= 0; i--) {\n            try {\n                const msg = (await getTavernHelper().getChatMessages(i))[0];\n                if (msg && msg.message && msg.message.includes(this.LOG_START_TAG)) {\n                    if (!latestUiMessage) {\n                        latestUiMessage = { id: i, content: msg.message };\n                    }\n                    else {\n                        previousUiMessages.push({ id: i, content: msg.message });\n                    }\n                }\n            }\n            catch (error) {\n                // Ignore errors, likely message not found\n            }\n        }\n        if (!latestUiMessage) {\n            // console.log('[BLMX] No UI log found. Creating a new one in the latest message.');\n            this.messageId = lastMessageId;\n            this.logEntries = [];\n            await this.persistLogToStorage();\n            return true;\n        }\n        // console.log(`[BLMX] Found latest UI log in message ${latestUiMessage.id}. Consolidating...`);\n        this.messageId = latestUiMessage.id;\n        const consolidatedLogParts = [];\n        const latestLogStartIndex = latestUiMessage.content.indexOf(this.LOG_START_TAG);\n        const latestLogEndIndex = latestUiMessage.content.indexOf(this.LOG_END_TAG);\n        if (latestLogStartIndex !== -1 && latestLogEndIndex !== -1) {\n            const logPart = latestUiMessage.content\n                .slice(latestLogStartIndex + this.LOG_START_TAG.length, latestLogEndIndex)\n                .trim();\n            if (logPart)\n                consolidatedLogParts.push(logPart);\n        }\n        for (const prevMsg of previousUiMessages) {\n            const prevLogStartIndex = prevMsg.content.indexOf(this.LOG_START_TAG);\n            const prevLogEndIndex = prevMsg.content.indexOf(this.LOG_END_TAG);\n            if (prevLogStartIndex !== -1 && prevLogEndIndex !== -1) {\n                const logPart = prevMsg.content.slice(prevLogStartIndex + this.LOG_START_TAG.length, prevLogEndIndex).trim();\n                if (logPart)\n                    consolidatedLogParts.unshift(logPart);\n                const cleanedContent = prevMsg.content.substring(0, prevLogStartIndex) +\n                    prevMsg.content.substring(prevLogEndIndex + this.LOG_END_TAG.length);\n                await getTavernHelper().setChatMessage(cleanedContent.trim(), prevMsg.id, { refresh: 'none' });\n                // console.log(`[BLMX] Cleaned and moved UI log from message ${prevMsg.id}.`);\n            }\n        }\n        const finalLogString = consolidatedLogParts.join('\\n');\n        this._parseLogFromString(finalLogString);\n        await this.persistLogToStorage();\n        // console.log(`[BLMX] Consolidated log saved to message ${this.messageId}.`);\n        return true;\n    }\n    async persistLogToStorage() {\n        if (this.messageId === null) {\n            console.warn('[BLMX] Cannot save log, message_id not initialized.'); // 保留重要警告\n            return;\n        }\n        try {\n            const logString = this._renderLogToString();\n            const existingMessage = (await getTavernHelper().getChatMessages(this.messageId))[0];\n            const existingContent = existingMessage ? existingMessage.message : '';\n            const logStartIndex = existingContent.indexOf(this.LOG_START_TAG);\n            const logEndIndex = existingContent.indexOf(this.LOG_END_TAG);\n            const newLogBlock = `${this.LOG_START_TAG}\\n${logString}\\n${this.LOG_END_TAG}`;\n            let fullText;\n            if (logStartIndex !== -1 && logEndIndex !== -1) {\n                fullText =\n                    existingContent.substring(0, logStartIndex) +\n                        newLogBlock +\n                        existingContent.substring(logEndIndex + this.LOG_END_TAG.length);\n            }\n            else {\n                fullText = existingContent + '\\n' + newLogBlock;\n            }\n            await getTavernHelper().setChatMessage(fullText.trim(), this.messageId, { refresh: 'none' });\n        }\n        catch (error) {\n            console.error('[BLMX] Failed to save narrative log to text box:', error); // 保留重要错误\n        }\n    }\n    _parseLogFromString(logString) {\n        this.logEntries = [];\n        const lines = logString.split('\\n').filter(line => line.trim() !== '');\n        lines.forEach(line => {\n            const separatorIndex = line.indexOf(':');\n            if (separatorIndex === -1)\n                return;\n            const key = line.substring(0, separatorIndex).trim();\n            const value = line.substring(separatorIndex + 1).trim();\n            try {\n                switch (key) {\n                    case 'USER_MOMENT':\n                    case 'CHAR_MOMENT':\n                    case 'USER_COMMENT':\n                    case 'CHAR_COMMENT':\n                    case 'USER_LIKE':\n                    case 'CHAR_LIKE':\n                        try {\n                            const data = JSON.parse(value);\n                            this.logEntries.push({ key, data });\n                        }\n                        catch (error) {\n                            console.warn('[BLMX] 解析朋友圈数据失败:', value, error);\n                        }\n                        break;\n                    case 'TIME':\n                    case 'EVENT_LOG':\n                        if (value) {\n                            try {\n                                const data = JSON.parse(value);\n                                // console.log(`[BLMX] 解析${key}数据:`, data);\n                                // 验证必要字段\n                                if (!data.date || !data.time) {\n                                    console.warn(`[BLMX] ${key}缺少必要字段:`, data);\n                                    // 尝试补充缺失字段\n                                    if (!data.date || !data.time) {\n                                        const now = new Date();\n                                        if (!data.date) {\n                                            data.date = `${now.getFullYear()}-${String(now.getMonth() + 1).padStart(2, '0')}-${String(now.getDate()).padStart(2, '0')}`;\n                                            // console.log(`[BLMX] 为${key}补充日期:`, data.date);\n                                        }\n                                        if (!data.time) {\n                                            data.time = `${String(now.getHours()).padStart(2, '0')}:${String(now.getMinutes()).padStart(2, '0')}`;\n                                            // console.log(`[BLMX] 为${key}补充时间:`, data.time);\n                                        }\n                                    }\n                                }\n                                const entryType = key === 'TIME' ? 'time' : 'event';\n                                const newEntry = { type: entryType, content: data };\n                                this.logEntries.push(newEntry);\n                                // console.log(`[BLMX] 添加${key}条目:`, newEntry);\n                                const timeDate = new Date(`${data.date} ${data.time}`);\n                                if (!isNaN(timeDate.getTime())) {\n                                    window.currentGameDate = timeDate;\n                                    const timeElement = document.getElementById('current-time');\n                                    if (timeElement) {\n                                        const timeString = `${window.currentGameDate\n                                            .getHours()\n                                            .toString()\n                                            .padStart(2, '0')}:${window.currentGameDate.getMinutes().toString().padStart(2, '0')}`;\n                                        timeElement.textContent = timeString;\n                                    }\n                                }\n                            }\n                            catch (error) {\n                                console.error(`[BLMX] 解析${key}失败:`, value, error);\n                            }\n                        }\n                        else {\n                            // console.warn(`[BLMX] ${key}值为空`);\n                        }\n                        break;\n                    case 'RECALL': {\n                        // console.log('[BLMX] 从存储中加载RECALL数据:', value);\n                        try {\n                            const recallData = JSON.parse(value);\n                            const senderToFind = recallData.sender === 'USER' ? 'me' : 'them';\n                            // 获取target_text，支持多种可能的属性名\n                            const targetText = recallData.target_text || recallData['target text'] || recallData.text || '';\n                            if (!targetText) {\n                                console.warn('[BLMX] RECALL数据缺少目标文本:', recallData);\n                                break;\n                            }\n                            // 使用更灵活的查找方法\n                            const entryToRecall = this.logEntries\n                                .slice()\n                                .reverse()\n                                .find(e => {\n                                // 必须是有sender和content的消息\n                                if (!('sender' in e) || e.sender !== senderToFind || !('content' in e)) {\n                                    return false;\n                                }\n                                // 精确匹配\n                                if (e.content === targetText) {\n                                    return true;\n                                }\n                                // 模糊匹配（去除标点符号和空格后比较）\n                                const normalizeText = (text) => typeof text === 'string' ? text.replace(/[^\\w\\u4e00-\\u9fa5]/g, '').toLowerCase() : '';\n                                if (typeof e.content === 'string') {\n                                    // 模糊匹配文本\n                                    if (normalizeText(e.content) === normalizeText(targetText)) {\n                                        return true;\n                                    }\n                                    // 包含匹配\n                                    if (e.content.includes(targetText) || targetText.includes(e.content)) {\n                                        return true;\n                                    }\n                                }\n                                // 对于复杂内容对象的匹配\n                                if (typeof e.content === 'object' && e.content !== null) {\n                                    try {\n                                        // 比较序列化后的JSON\n                                        if (JSON.stringify(e.content) === targetText) {\n                                            return true;\n                                        }\n                                        // 如果是语音消息，比较text字段\n                                        if ('text' in e.content) {\n                                            const voiceText = e.content.text;\n                                            if (voiceText === targetText || normalizeText(voiceText) === normalizeText(targetText)) {\n                                                return true;\n                                            }\n                                        }\n                                    }\n                                    catch (err) {\n                                        console.warn('[BLMX] 比较复杂内容失败:', err);\n                                    }\n                                }\n                                return false;\n                            });\n                            if (entryToRecall) {\n                                // console.log('[BLMX] 找到并标记要撤回的消息:', entryToRecall);\n                                entryToRecall.recalled = true;\n                                entryToRecall.recalled_content = entryToRecall.content;\n                                entryToRecall.recalled_timestamp = recallData.timestamp || new Date().toISOString();\n                            }\n                            else {\n                                console.warn('[BLMX] 未找到要撤回的消息:', {\n                                    sender: senderToFind,\n                                    target_text: targetText,\n                                    recall_data: recallData,\n                                });\n                            }\n                        }\n                        catch (error) {\n                            console.error('[BLMX] 处理RECALL数据失败:', error);\n                        }\n                        break;\n                    }\n                    case 'USER':\n                    case 'CHAR': {\n                        const sender = key === 'USER' ? 'me' : 'them';\n                        const id = `msg-${Date.now()}${Math.random()}-${sender}`;\n                        const voiceMatch = value.match(/^\\[语音:\\s*({.*})\\]/);\n                        if (voiceMatch) {\n                            try {\n                                const voiceData = JSON.parse(voiceMatch[1]);\n                                this.logEntries.push({ id, type: 'voice', sender, content: voiceData });\n                                return;\n                            }\n                            catch (e) {\n                                console.error('Failed to parse voice data:', voiceMatch[1], e);\n                                // 添加默认语音数据\n                                this.logEntries.push({ id, type: 'voice', sender, content: { text: '', duration: 0 } });\n                                return;\n                            }\n                        }\n                        const stickerMatch = value.match(/^\\[表情:\\s*(.*)\\]/);\n                        if (stickerMatch) {\n                            this.logEntries.push({ id, type: 'sticker', sender, content: stickerMatch[1] });\n                            return;\n                        }\n                        const imageMatch = value.match(/^\\[图片:\\s*(.*)\\]/);\n                        if (imageMatch) {\n                            try {\n                                const imgData = JSON.parse(imageMatch[1]);\n                                this.logEntries.push({ id, type: 'image', sender, content: imgData });\n                            }\n                            catch (e) {\n                                this.logEntries.push({\n                                    id,\n                                    type: 'image',\n                                    sender,\n                                    content: { type: 'desc', value: imageMatch[1] },\n                                });\n                            }\n                            return;\n                        }\n                        const locationMatch = value.match(/^\\[位置:\\s*(.*)\\]/);\n                        if (locationMatch) {\n                            this.logEntries.push({ id, type: 'location', sender, content: locationMatch[1] });\n                            return;\n                        }\n                        const transferMatch = value.match(/^\\[转账:\\s*(.*)\\]/);\n                        if (transferMatch) {\n                            this.logEntries.push({\n                                id,\n                                type: 'transfer',\n                                sender,\n                                content: transferMatch[1],\n                                data: (() => {\n                                    try {\n                                        return JSON.parse(transferMatch[1]);\n                                    }\n                                    catch (e) {\n                                        console.error('Failed to parse transfer data:', transferMatch[1], e);\n                                        return { amount: 0, message: '' };\n                                    }\n                                })(),\n                            });\n                            return;\n                        }\n                        const fileMatch = value.match(/^\\[文件:\\s*(.*)\\]/);\n                        if (fileMatch) {\n                            this.logEntries.push({ id, type: 'file', sender, content: fileMatch[1] });\n                            return;\n                        }\n                        const giftMatch = value.match(/^\\[礼物:\\s*(.*)\\]/);\n                        if (giftMatch) {\n                            this.logEntries.push({\n                                id,\n                                type: 'gift',\n                                sender,\n                                content: giftMatch[1],\n                                data: (() => {\n                                    try {\n                                        return JSON.parse(giftMatch[1]);\n                                    }\n                                    catch (e) {\n                                        console.error('Failed to parse gift data:', giftMatch[1], e);\n                                        return { name: '', value: 0 };\n                                    }\n                                })(),\n                            });\n                            return;\n                        }\n                        this.logEntries.push({ id, type: 'message', sender, content: value });\n                        break;\n                    }\n                }\n            }\n            catch (e) {\n                console.error('Failed to parse log line:', line, e);\n            }\n        });\n    }\n    _renderLogToString() {\n        const recallCommands = [];\n        const allEntriesString = this.logEntries\n            .map(e => {\n            if (e.recalled) {\n                const recallData = {\n                    sender: 'sender' in e && e.sender === 'me' ? 'USER' : 'CHAR',\n                    target_text: typeof e.recalled_content === 'object' && e.recalled_content !== null\n                        ? e.recalled_content.text\n                        : e.recalled_content,\n                    timestamp: e.recalled_timestamp,\n                };\n                if (recallData.target_text) {\n                    recallCommands.push(`RECALL: ${JSON.stringify(recallData)}`);\n                }\n            }\n            if ('key' in e) {\n                return `${e.key}: ${JSON.stringify(e.data)}`;\n            }\n            if ('type' in e) {\n                if (e.type === 'time' || e.type === 'event') {\n                    const key = e.type === 'time' ? 'TIME' : 'EVENT_LOG';\n                    // console.log(`[BLMX] 序列化${key}条目:`, e);\n                    return `${key}: ${JSON.stringify(e.content)}`;\n                }\n                const prefix = e.sender === 'me' ? 'USER' : 'CHAR';\n                let content = e.content;\n                switch (e.type) {\n                    case 'sticker':\n                        content = `[表情: ${e.content}]`;\n                        break;\n                    case 'voice':\n                        content = `[语音: ${JSON.stringify(e.content)}]`;\n                        break;\n                    case 'image':\n                        content = `[图片: ${JSON.stringify(e.content)}]`;\n                        break;\n                    case 'location':\n                        content = `[位置: ${e.content}]`;\n                        break;\n                    case 'file':\n                        content = `[文件: ${e.content}]`;\n                        break;\n                    case 'gift':\n                        content = `[礼物: ${e.content}]`;\n                        break;\n                    case 'transfer':\n                        content = `[转账: ${e.content}]`;\n                        break;\n                }\n                return `${prefix}: ${content}`;\n            }\n            return ''; // Should not happen for valid entries\n        })\n            .join('\\n');\n        return [allEntriesString, ...recallCommands].filter(Boolean).join('\\n');\n    }\n    // 修改addEntry方法\n    addEntry(entry) {\n        if (entry) {\n            // 检查是否已存在相同的条目\n            const isDuplicate = this.logEntries.some(existingEntry => {\n                // 检查朋友圈相关条目\n                if ('key' in entry && 'key' in existingEntry) {\n                    if (entry.key === existingEntry.key) {\n                        // 对于朋友圈动态，比较文本和时间\n                        if (entry.key.includes('_MOMENT')) {\n                            const entryData = entry.data;\n                            const existingData = existingEntry.data;\n                            return (existingData.text === entryData.text &&\n                                existingData.date === entryData.date &&\n                                existingData.time === entryData.time);\n                        }\n                        // 对于评论，比较文本和目标帖子ID\n                        else if (entry.key.includes('_COMMENT')) {\n                            const entryData = entry.data;\n                            const existingData = existingEntry.data;\n                            return existingData.text === entryData.text && existingData.target_post_id === entryData.target_post_id;\n                        }\n                        // 对于点赞，比较目标帖子ID\n                        else if (entry.key.includes('_LIKE')) {\n                            const entryData = entry.data;\n                            const existingData = existingEntry.data;\n                            return existingData.target_post_id === entryData.target_post_id;\n                        }\n                    }\n                }\n                // 检查消息类型条目\n                if ('type' in entry && 'type' in existingEntry) {\n                    // 如果两个条目类型相同\n                    if (entry.type === existingEntry.type) {\n                        // 对于有ID的条目，比较ID\n                        if ('id' in entry && 'id' in existingEntry && entry.id === existingEntry.id) {\n                            return true;\n                        }\n                        // 对于消息类型条目，比较发送者和内容\n                        if ((entry.type === 'message' ||\n                            entry.type === 'sticker' ||\n                            entry.type === 'location' ||\n                            entry.type === 'file') &&\n                            'sender' in entry &&\n                            'sender' in existingEntry &&\n                            'content' in entry &&\n                            'content' in existingEntry) {\n                            return (entry.sender === existingEntry.sender && window._.isEqual(entry.content, existingEntry.content));\n                        }\n                        // 对于时间和事件日志，比较内容\n                        if ((entry.type === 'time' || entry.type === 'event') && 'content' in entry && 'content' in existingEntry) {\n                            return window._.isEqual(entry.content, existingEntry.content);\n                        }\n                        // 对于其他复杂类型（如image, voice, transfer, gift），比较内容\n                        if ('content' in entry &&\n                            'content' in existingEntry &&\n                            (entry.type === 'image' || entry.type === 'voice' || entry.type === 'transfer' || entry.type === 'gift')) {\n                            return window._.isEqual(entry.content, existingEntry.content);\n                        }\n                    }\n                }\n                return false;\n            });\n            if (isDuplicate) {\n                // console.log(`[BLMX] 跳过添加重复条目:`, entry);\n                return; // 如果是重复条目，直接返回，不添加\n            }\n            this.logEntries.push(entry);\n            // 添加时间更新逻辑\n            if ('type' in entry && (entry.type === 'time' || entry.type === 'event')) {\n                const data = entry.content;\n                const timeDate = new Date(`${data.date} ${data.time}`);\n                if (!isNaN(timeDate.getTime())) {\n                    window.currentGameDate = timeDate;\n                    const timeElement = document.getElementById('current-time');\n                    if (timeElement) {\n                        const timeString = `${window.currentGameDate\n                            .getHours()\n                            .toString()\n                            .padStart(2, '0')}:${window.currentGameDate.getMinutes().toString().padStart(2, '0')}`;\n                        timeElement.textContent = timeString;\n                    }\n                }\n            }\n        }\n    }\n    getContextForAI() {\n        return this._renderLogToString();\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LENBQUMsQ0FBQyxFQUFFLEdBQUcsQ0FBQyxFQUFFLENBQUM7d0JBQ3pGLFdBQVcsQ0FBQyxXQUFXLEdBQUcsVUFBVSxDQUFDO29CQUN2QyxDQUFDO2dCQUNILENBQUM7WUFDSCxDQUFDO1FBQ0gsQ0FBQztJQUNILENBQUM7SUFFRCxlQUFlO1FBQ2IsT0FBTyxJQUFJLENBQUMsa0JBQWtCLEVBQUUsQ0FBQztJQUNuQyxDQUFDO0NBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly90YXZlcm5faGVscGVyX3RlbXBsYXRlLy4vc3JjL+WQjOWxguaJi+acui9zY3JpcHQudHM/Il0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBpbnRlcmZhY2UgVGF2ZXJuSGVscGVyQnJpZGdlIHtcbiAgZ2V0Q2hhckRhdGEoKTogUHJvbWlzZTx7IG5hbWU6IHN0cmluZyB9PjtcbiAgZ2V0Q2hhckF2YXRhclBhdGgoKTogUHJvbWlzZTxzdHJpbmc+O1xuICBnZXRMYXN0TWVzc2FnZUlkKCk6IFByb21pc2U8bnVtYmVyIHwgbnVsbD47XG4gIGdldENoYXRNZXNzYWdlcyhpZDogbnVtYmVyKTogUHJvbWlzZTxBcnJheTx7IG1lc3NhZ2U6IHN0cmluZyB9Pj47XG4gIHNldENoYXRNZXNzYWdlKGNvbnRlbnQ6IHN0cmluZywgaWQ6IG51bWJlciwgb3B0aW9uczogeyByZWZyZXNoOiAnbm9uZScgfSk6IFByb21pc2U8dm9pZD47XG4gIGdlbmVyYXRlKG9wdGlvbnM6IHsgdXNlcl9pbnB1dDogc3RyaW5nOyBzaG91bGRfc3RyZWFtOiBib29sZWFuIH0pOiBQcm9taXNlPEFzeW5jR2VuZXJhdG9yPHN0cmluZywgdm9pZCwgdW5rbm93bj4+O1xufVxuXG4vLyDkvb/nlKjnsbvlnovmlq3oqIDmnaXlpITnkIblhajlsYDlr7nosaFcbmRlY2xhcmUgZ2xvYmFsIHtcbiAgaW50ZXJmYWNlIFdpbmRvdyB7XG4gICAgY3VycmVudEdhbWVEYXRlOiBEYXRlO1xuICB9XG59XG5cbi8vIOS4ulRhdmVybkhlbHBlcuWIm+W7uuS4gOS4quiuv+mXruWZqOWHveaVsFxuZXhwb3J0IGZ1bmN0aW9uIGdldFRhdmVybkhlbHBlcigpOiBUYXZlcm5IZWxwZXJCcmlkZ2Uge1xuICByZXR1cm4gKHdpbmRvdy5wYXJlbnQgYXMgYW55KS5UYXZlcm5IZWxwZXI7XG59XG5cbmV4cG9ydCB0eXBlIFNlbmRlciA9ICdtZScgfCAndGhlbSc7XG5cbmV4cG9ydCBpbnRlcmZhY2UgQmFzZUxvZ0VudHJ5IHtcbiAgcmVjYWxsZWQ/OiBib29sZWFuO1xuICByZWNhbGxlZF9jb250ZW50PzogYW55O1xuICByZWNhbGxlZF90aW1lc3RhbXA/OiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQmFzZUNoYXRNZXNzYWdlIGV4dGVuZHMgQmFzZUxvZ0VudHJ5IHtcbiAgaWQ6IHN0cmluZztcbiAgc2VuZGVyOiBTZW5kZXI7XG59XG5cbi8vIOaWh+acrOa2iOaBr1xuZXhwb3J0IGludGVyZmFjZSBUZXh0TWVzc2FnZSBleHRlbmRzIEJhc2VDaGF0TWVzc2FnZSB7XG4gIHR5cGU6ICdtZXNzYWdlJztcbiAgY29udGVudDogc3RyaW5nO1xuICBpc1N5c3RlbU1lc3NhZ2U/OiBib29sZWFuOyAvLyDmt7vliqDns7vnu5/mtojmga/moIflv5dcbn1cblxuZXhwb3J0IGludGVyZmFjZSBWb2ljZU1lc3NhZ2UgZXh0ZW5kcyBCYXNlQ2hhdE1lc3NhZ2Uge1xuICB0eXBlOiAndm9pY2UnO1xuICBjb250ZW50OiB7IHRleHQ6IHN0cmluZzsgZHVyYXRpb246IG51bWJlciB9O1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFN0aWNrZXJNZXNzYWdlIGV4dGVuZHMgQmFzZUNoYXRNZXNzYWdlIHtcbiAgdHlwZTogJ3N0aWNrZXInO1xuICBjb250ZW50OiBzdHJpbmc7IC8vIHN0aWNrZXIgbmFtZS9sYWJlbFxuICBzaXplPzogJ3NtYWxsJyB8ICdtZWRpdW0nIHwgJ2xhcmdlJzsgLy8gQWRkIHNpemUgb3B0aW9uIGZvciBzdGlja2Vyc1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEltYWdlTWVzc2FnZSBleHRlbmRzIEJhc2VDaGF0TWVzc2FnZSB7XG4gIHR5cGU6ICdpbWFnZSc7XG4gIGNvbnRlbnQ6IHsgdHlwZTogJ3VybCcgfCAnZGVzYyc7IHZhbHVlOiBzdHJpbmcgfTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBMb2NhdGlvbk1lc3NhZ2UgZXh0ZW5kcyBCYXNlQ2hhdE1lc3NhZ2Uge1xuICB0eXBlOiAnbG9jYXRpb24nO1xuICBjb250ZW50OiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgVHJhbnNmZXJNZXNzYWdlIGV4dGVuZHMgQmFzZUNoYXRNZXNzYWdlIHtcbiAgdHlwZTogJ3RyYW5zZmVyJztcbiAgY29udGVudDogc3RyaW5nOyAvLyBKU09OIHN0cmluZ1xuICBkYXRhOiB7XG4gICAgYW1vdW50OiBzdHJpbmc7XG4gICAgbm90ZT86IHN0cmluZztcbiAgICBzdGF0dXM6ICdzZW50JyB8ICdhY2NlcHRlZCcgfCAncmVqZWN0ZWQnO1xuICB9O1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEZpbGVNZXNzYWdlIGV4dGVuZHMgQmFzZUNoYXRNZXNzYWdlIHtcbiAgdHlwZTogJ2ZpbGUnO1xuICBjb250ZW50OiBzdHJpbmc7IC8vIGZpbGVuYW1lXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgR2lmdE1lc3NhZ2UgZXh0ZW5kcyBCYXNlQ2hhdE1lc3NhZ2Uge1xuICB0eXBlOiAnZ2lmdCc7XG4gIGNvbnRlbnQ6IHN0cmluZzsgLy8gSlNPTiBzdHJpbmdcbiAgZGF0YToge1xuICAgIG5hbWU6IHN0cmluZztcbiAgICBwcmljZT86IHN0cmluZztcbiAgICBzdGF0dXM6ICdzZW50JyB8ICdhY2NlcHRlZCcgfCAncmVqZWN0ZWQnO1xuICB9O1xufVxuXG5leHBvcnQgdHlwZSBDaGF0RW50cnkgPVxuICB8IFRleHRNZXNzYWdlXG4gIHwgVm9pY2VNZXNzYWdlXG4gIHwgU3RpY2tlck1lc3NhZ2VcbiAgfCBJbWFnZU1lc3NhZ2VcbiAgfCBMb2NhdGlvbk1lc3NhZ2VcbiAgfCBUcmFuc2Zlck1lc3NhZ2VcbiAgfCBGaWxlTWVzc2FnZVxuICB8IEdpZnRNZXNzYWdlO1xuXG5leHBvcnQgaW50ZXJmYWNlIFRpbWVMb2dFbnRyeSBleHRlbmRzIEJhc2VMb2dFbnRyeSB7XG4gIHR5cGU6ICd0aW1lJztcbiAgY29udGVudDogeyBkYXRlOiBzdHJpbmc7IHRpbWU6IHN0cmluZyB9O1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEV2ZW50TG9nRW50cnkgZXh0ZW5kcyBCYXNlTG9nRW50cnkge1xuICB0eXBlOiAnZXZlbnQnO1xuICBjb250ZW50OiB7IGRhdGU6IHN0cmluZzsgdGltZTogc3RyaW5nOyBkZXNjcmlwdGlvbj86IHN0cmluZyB9O1xufVxuXG5leHBvcnQgdHlwZSBTeXN0ZW1FbnRyeSA9IFRpbWVMb2dFbnRyeSB8IEV2ZW50TG9nRW50cnk7XG5cbmV4cG9ydCBpbnRlcmZhY2UgTW9tZW50RW50cnkgZXh0ZW5kcyBCYXNlTG9nRW50cnkge1xuICBrZXk6ICdVU0VSX01PTUVOVCcgfCAnQ0hBUl9NT01FTlQnO1xuICBkYXRhOiB7XG4gICAgdGV4dDogc3RyaW5nO1xuICAgIGltYWdlOiBzdHJpbmc7XG4gICAgaW1hZ2VfdHlwZTogJ3VybCcgfCAnZGVzYycgfCAnbm9uZSc7XG4gICAgaW1hZ2VfZGVzYz86IHN0cmluZztcbiAgICBkYXRlOiBzdHJpbmc7XG4gICAgdGltZTogc3RyaW5nO1xuICB9O1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIENvbW1lbnRFbnRyeSBleHRlbmRzIEJhc2VMb2dFbnRyeSB7XG4gIGtleTogJ1VTRVJfQ09NTUVOVCcgfCAnQ0hBUl9DT01NRU5UJztcbiAgZGF0YToge1xuICAgIHRleHQ6IHN0cmluZztcbiAgICB0YXJnZXRfcG9zdF9pZDogbnVtYmVyO1xuICB9O1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIExpa2VFbnRyeSBleHRlbmRzIEJhc2VMb2dFbnRyeSB7XG4gIGtleTogJ1VTRVJfTElLRScgfCAnQ0hBUl9MSUtFJztcbiAgZGF0YToge1xuICAgIHRhcmdldF9wb3N0X2lkOiBudW1iZXI7XG4gIH07XG59XG5cbmV4cG9ydCB0eXBlIE1vbWVudFJlbGF0ZWRFbnRyeSA9IE1vbWVudEVudHJ5IHwgQ29tbWVudEVudHJ5IHwgTGlrZUVudHJ5O1xuXG5leHBvcnQgdHlwZSBMb2dFbnRyeSA9IENoYXRFbnRyeSB8IFN5c3RlbUVudHJ5IHwgTW9tZW50UmVsYXRlZEVudHJ5O1xuXG5leHBvcnQgY2xhc3MgQkxNWF9Qcm90b2NvbCB7XG4gIHB1YmxpYyBsb2dFbnRyaWVzOiBMb2dFbnRyeVtdID0gW107XG4gIHByaXZhdGUgbWVzc2FnZUlkOiBudW1iZXIgfCBudWxsID0gbnVsbDtcbiAgcHJpdmF0ZSByZWFkb25seSBjaGFySWQ6IHN0cmluZztcbiAgcHJpdmF0ZSByZWFkb25seSBMT0dfU1RBUlRfVEFHID0gJz09PUJMTVhfTE9HX0JFR0lOPT09JztcbiAgcHJpdmF0ZSByZWFkb25seSBMT0dfRU5EX1RBRyA9ICc9PT1CTE1YX0xPR19FTkQ9PT0nO1xuXG4gIGNvbnN0cnVjdG9yKGNoYXJJZDogc3RyaW5nKSB7XG4gICAgdGhpcy5jaGFySWQgPSBjaGFySWQ7XG4gIH1cblxuICAvLyDojrflj5bop5LoibJJRFxuICBnZXRDaGFySWQoKTogc3RyaW5nIHtcbiAgICByZXR1cm4gdGhpcy5jaGFySWQ7XG4gIH1cblxuICBhc3luYyBpbml0aWFsaXplKCk6IFByb21pc2U8Ym9vbGVhbj4ge1xuICAgIC8vIGNvbnNvbGUubG9nKCdbQkxNWF0gSW5pdGlhbGl6aW5nIGFuZCBzY2FubmluZyBmb3IgY2hhdCBoaXN0b3J5Li4uJyk7XG4gICAgY29uc3QgbGFzdE1lc3NhZ2VJZCA9IGF3YWl0IGdldFRhdmVybkhlbHBlcigpLmdldExhc3RNZXNzYWdlSWQoKTtcblxuICAgIGlmIChsYXN0TWVzc2FnZUlkID09PSBudWxsKSB7XG4gICAgICAvLyBjb25zb2xlLndhcm4oJ1tCTE1YXSBObyBtZXNzYWdlcyBmb3VuZC4gU3RhcnRpbmcgZnJlc2ggYXQgbWVzc2FnZSBJRCAwLicpO1xuICAgICAgdGhpcy5tZXNzYWdlSWQgPSAwO1xuICAgICAgdGhpcy5sb2dFbnRyaWVzID0gW107XG4gICAgICBhd2FpdCB0aGlzLnBlcnNpc3RMb2dUb1N0b3JhZ2UoKTtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIGxldCBsYXRlc3RVaU1lc3NhZ2U6IHsgaWQ6IG51bWJlcjsgY29udGVudDogc3RyaW5nIH0gfCBudWxsID0gbnVsbDtcbiAgICBjb25zdCBwcmV2aW91c1VpTWVzc2FnZXM6IHsgaWQ6IG51bWJlcjsgY29udGVudDogc3RyaW5nIH1bXSA9IFtdO1xuXG4gICAgZm9yIChsZXQgaSA9IGxhc3RNZXNzYWdlSWQ7IGkgPj0gMDsgaS0tKSB7XG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCBtc2cgPSAoYXdhaXQgZ2V0VGF2ZXJuSGVscGVyKCkuZ2V0Q2hhdE1lc3NhZ2VzKGkpKVswXTtcbiAgICAgICAgaWYgKG1zZyAmJiBtc2cubWVzc2FnZSAmJiBtc2cubWVzc2FnZS5pbmNsdWRlcyh0aGlzLkxPR19TVEFSVF9UQUcpKSB7XG4gICAgICAgICAgaWYgKCFsYXRlc3RVaU1lc3NhZ2UpIHtcbiAgICAgICAgICAgIGxhdGVzdFVpTWVzc2FnZSA9IHsgaWQ6IGksIGNvbnRlbnQ6IG1zZy5tZXNzYWdlIH07XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHByZXZpb3VzVWlNZXNzYWdlcy5wdXNoKHsgaWQ6IGksIGNvbnRlbnQ6IG1zZy5tZXNzYWdlIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgLy8gSWdub3JlIGVycm9ycywgbGlrZWx5IG1lc3NhZ2Ugbm90IGZvdW5kXG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKCFsYXRlc3RVaU1lc3NhZ2UpIHtcbiAgICAgIC8vIGNvbnNvbGUubG9nKCdbQkxNWF0gTm8gVUkgbG9nIGZvdW5kLiBDcmVhdGluZyBhIG5ldyBvbmUgaW4gdGhlIGxhdGVzdCBtZXNzYWdlLicpO1xuICAgICAgdGhpcy5tZXNzYWdlSWQgPSBsYXN0TWVzc2FnZUlkO1xuICAgICAgdGhpcy5sb2dFbnRyaWVzID0gW107XG4gICAgICBhd2FpdCB0aGlzLnBlcnNpc3RMb2dUb1N0b3JhZ2UoKTtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIC8vIGNvbnNvbGUubG9nKGBbQkxNWF0gRm91bmQgbGF0ZXN0IFVJIGxvZyBpbiBtZXNzYWdlICR7bGF0ZXN0VWlNZXNzYWdlLmlkfS4gQ29uc29saWRhdGluZy4uLmApO1xuICAgIHRoaXMubWVzc2FnZUlkID0gbGF0ZXN0VWlNZXNzYWdlLmlkO1xuICAgIGNvbnN0IGNvbnNvbGlkYXRlZExvZ1BhcnRzOiBzdHJpbmdbXSA9IFtdO1xuXG4gICAgY29uc3QgbGF0ZXN0TG9nU3RhcnRJbmRleCA9IGxhdGVzdFVpTWVzc2FnZS5jb250ZW50LmluZGV4T2YodGhpcy5MT0dfU1RBUlRfVEFHKTtcbiAgICBjb25zdCBsYXRlc3RMb2dFbmRJbmRleCA9IGxhdGVzdFVpTWVzc2FnZS5jb250ZW50LmluZGV4T2YodGhpcy5MT0dfRU5EX1RBRyk7XG4gICAgaWYgKGxhdGVzdExvZ1N0YXJ0SW5kZXggIT09IC0xICYmIGxhdGVzdExvZ0VuZEluZGV4ICE9PSAtMSkge1xuICAgICAgY29uc3QgbG9nUGFydCA9IGxhdGVzdFVpTWVzc2FnZS5jb250ZW50XG4gICAgICAgIC5zbGljZShsYXRlc3RMb2dTdGFydEluZGV4ICsgdGhpcy5MT0dfU1RBUlRfVEFHLmxlbmd0aCwgbGF0ZXN0TG9nRW5kSW5kZXgpXG4gICAgICAgIC50cmltKCk7XG4gICAgICBpZiAobG9nUGFydCkgY29uc29saWRhdGVkTG9nUGFydHMucHVzaChsb2dQYXJ0KTtcbiAgICB9XG5cbiAgICBmb3IgKGNvbnN0IHByZXZNc2cgb2YgcHJldmlvdXNVaU1lc3NhZ2VzKSB7XG4gICAgICBjb25zdCBwcmV2TG9nU3RhcnRJbmRleCA9IHByZXZNc2cuY29udGVudC5pbmRleE9mKHRoaXMuTE9HX1NUQVJUX1RBRyk7XG4gICAgICBjb25zdCBwcmV2TG9nRW5kSW5kZXggPSBwcmV2TXNnLmNvbnRlbnQuaW5kZXhPZih0aGlzLkxPR19FTkRfVEFHKTtcbiAgICAgIGlmIChwcmV2TG9nU3RhcnRJbmRleCAhPT0gLTEgJiYgcHJldkxvZ0VuZEluZGV4ICE9PSAtMSkge1xuICAgICAgICBjb25zdCBsb2dQYXJ0ID0gcHJldk1zZy5jb250ZW50LnNsaWNlKHByZXZMb2dTdGFydEluZGV4ICsgdGhpcy5MT0dfU1RBUlRfVEFHLmxlbmd0aCwgcHJldkxvZ0VuZEluZGV4KS50cmltKCk7XG4gICAgICAgIGlmIChsb2dQYXJ0KSBjb25zb2xpZGF0ZWRMb2dQYXJ0cy51bnNoaWZ0KGxvZ1BhcnQpO1xuXG4gICAgICAgIGNvbnN0IGNsZWFuZWRDb250ZW50ID1cbiAgICAgICAgICBwcmV2TXNnLmNvbnRlbnQuc3Vic3RyaW5nKDAsIHByZXZMb2dTdGFydEluZGV4KSArXG4gICAgICAgICAgcHJldk1zZy5jb250ZW50LnN1YnN0cmluZyhwcmV2TG9nRW5kSW5kZXggKyB0aGlzLkxPR19FTkRfVEFHLmxlbmd0aCk7XG4gICAgICAgIGF3YWl0IGdldFRhdmVybkhlbHBlcigpLnNldENoYXRNZXNzYWdlKGNsZWFuZWRDb250ZW50LnRyaW0oKSwgcHJldk1zZy5pZCwgeyByZWZyZXNoOiAnbm9uZScgfSk7XG4gICAgICAgIC8vIGNvbnNvbGUubG9nKGBbQkxNWF0gQ2xlYW5lZCBhbmQgbW92ZWQgVUkgbG9nIGZyb20gbWVzc2FnZSAke3ByZXZNc2cuaWR9LmApO1xuICAgICAgfVxuICAgIH1cblxuICAgIGNvbnN0IGZpbmFsTG9nU3RyaW5nID0gY29uc29saWRhdGVkTG9nUGFydHMuam9pbignXFxuJyk7XG4gICAgdGhpcy5fcGFyc2VMb2dGcm9tU3RyaW5nKGZpbmFsTG9nU3RyaW5nKTtcblxuICAgIGF3YWl0IHRoaXMucGVyc2lzdExvZ1RvU3RvcmFnZSgpO1xuICAgIC8vIGNvbnNvbGUubG9nKGBbQkxNWF0gQ29uc29saWRhdGVkIGxvZyBzYXZlZCB0byBtZXNzYWdlICR7dGhpcy5tZXNzYWdlSWR9LmApO1xuXG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICBhc3luYyBwZXJzaXN0TG9nVG9TdG9yYWdlKCk6IFByb21pc2U8dm9pZD4ge1xuICAgIGlmICh0aGlzLm1lc3NhZ2VJZCA9PT0gbnVsbCkge1xuICAgICAgY29uc29sZS53YXJuKCdbQkxNWF0gQ2Fubm90IHNhdmUgbG9nLCBtZXNzYWdlX2lkIG5vdCBpbml0aWFsaXplZC4nKTsgLy8g5L+d55WZ6YeN6KaB6K2m5ZGKXG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHRyeSB7XG4gICAgICBjb25zdCBsb2dTdHJpbmcgPSB0aGlzLl9yZW5kZXJMb2dUb1N0cmluZygpO1xuICAgICAgY29uc3QgZXhpc3RpbmdNZXNzYWdlID0gKGF3YWl0IGdldFRhdmVybkhlbHBlcigpLmdldENoYXRNZXNzYWdlcyh0aGlzLm1lc3NhZ2VJZCkpWzBdO1xuICAgICAgY29uc3QgZXhpc3RpbmdDb250ZW50ID0gZXhpc3RpbmdNZXNzYWdlID8gZXhpc3RpbmdNZXNzYWdlLm1lc3NhZ2UgOiAnJztcblxuICAgICAgY29uc3QgbG9nU3RhcnRJbmRleCA9IGV4aXN0aW5nQ29udGVudC5pbmRleE9mKHRoaXMuTE9HX1NUQVJUX1RBRyk7XG4gICAgICBjb25zdCBsb2dFbmRJbmRleCA9IGV4aXN0aW5nQ29udGVudC5pbmRleE9mKHRoaXMuTE9HX0VORF9UQUcpO1xuXG4gICAgICBjb25zdCBuZXdMb2dCbG9jayA9IGAke3RoaXMuTE9HX1NUQVJUX1RBR31cXG4ke2xvZ1N0cmluZ31cXG4ke3RoaXMuTE9HX0VORF9UQUd9YDtcbiAgICAgIGxldCBmdWxsVGV4dDogc3RyaW5nO1xuXG4gICAgICBpZiAobG9nU3RhcnRJbmRleCAhPT0gLTEgJiYgbG9nRW5kSW5kZXggIT09IC0xKSB7XG4gICAgICAgIGZ1bGxUZXh0ID1cbiAgICAgICAgICBleGlzdGluZ0NvbnRlbnQuc3Vic3RyaW5nKDAsIGxvZ1N0YXJ0SW5kZXgpICtcbiAgICAgICAgICBuZXdMb2dCbG9jayArXG4gICAgICAgICAgZXhpc3RpbmdDb250ZW50LnN1YnN0cmluZyhsb2dFbmRJbmRleCArIHRoaXMuTE9HX0VORF9UQUcubGVuZ3RoKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGZ1bGxUZXh0ID0gZXhpc3RpbmdDb250ZW50ICsgJ1xcbicgKyBuZXdMb2dCbG9jaztcbiAgICAgIH1cblxuICAgICAgYXdhaXQgZ2V0VGF2ZXJuSGVscGVyKCkuc2V0Q2hhdE1lc3NhZ2UoZnVsbFRleHQudHJpbSgpLCB0aGlzLm1lc3NhZ2VJZCwgeyByZWZyZXNoOiAnbm9uZScgfSk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ1tCTE1YXSBGYWlsZWQgdG8gc2F2ZSBuYXJyYXRpdmUgbG9nIHRvIHRleHQgYm94OicsIGVycm9yKTsgLy8g5L+d55WZ6YeN6KaB6ZSZ6K+vXG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBfcGFyc2VMb2dGcm9tU3RyaW5nKGxvZ1N0cmluZzogc3RyaW5nKTogdm9pZCB7XG4gICAgdGhpcy5sb2dFbnRyaWVzID0gW107XG4gICAgY29uc3QgbGluZXMgPSBsb2dTdHJpbmcuc3BsaXQoJ1xcbicpLmZpbHRlcihsaW5lID0+IGxpbmUudHJpbSgpICE9PSAnJyk7XG5cbiAgICBsaW5lcy5mb3JFYWNoKGxpbmUgPT4ge1xuICAgICAgY29uc3Qgc2VwYXJhdG9ySW5kZXggPSBsaW5lLmluZGV4T2YoJzonKTtcbiAgICAgIGlmIChzZXBhcmF0b3JJbmRleCA9PT0gLTEpIHJldHVybjtcblxuICAgICAgY29uc3Qga2V5ID0gbGluZS5zdWJzdHJpbmcoMCwgc2VwYXJhdG9ySW5kZXgpLnRyaW0oKTtcbiAgICAgIGNvbnN0IHZhbHVlID0gbGluZS5zdWJzdHJpbmcoc2VwYXJhdG9ySW5kZXggKyAxKS50cmltKCk7XG4gICAgICB0cnkge1xuICAgICAgICBzd2l0Y2ggKGtleSkge1xuICAgICAgICAgIGNhc2UgJ1VTRVJfTU9NRU5UJzpcbiAgICAgICAgICBjYXNlICdDSEFSX01PTUVOVCc6XG4gICAgICAgICAgY2FzZSAnVVNFUl9DT01NRU5UJzpcbiAgICAgICAgICBjYXNlICdDSEFSX0NPTU1FTlQnOlxuICAgICAgICAgIGNhc2UgJ1VTRVJfTElLRSc6XG4gICAgICAgICAgY2FzZSAnQ0hBUl9MSUtFJzpcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgIGNvbnN0IGRhdGEgPSBKU09OLnBhcnNlKHZhbHVlKTtcbiAgICAgICAgICAgICAgdGhpcy5sb2dFbnRyaWVzLnB1c2goeyBrZXksIGRhdGEgfSBhcyBNb21lbnRSZWxhdGVkRW50cnkpO1xuICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgY29uc29sZS53YXJuKCdbQkxNWF0g6Kej5p6Q5pyL5Y+L5ZyI5pWw5o2u5aSx6LSlOicsIHZhbHVlLCBlcnJvcik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICBjYXNlICdUSU1FJzpcbiAgICAgICAgICBjYXNlICdFVkVOVF9MT0cnOlxuICAgICAgICAgICAgaWYgKHZhbHVlKSB7XG4gICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZGF0YSA9IEpTT04ucGFyc2UodmFsdWUpO1xuICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKGBbQkxNWF0g6Kej5p6QJHtrZXl95pWw5o2uOmAsIGRhdGEpO1xuXG4gICAgICAgICAgICAgICAgLy8g6aqM6K+B5b+F6KaB5a2X5q61XG4gICAgICAgICAgICAgICAgaWYgKCFkYXRhLmRhdGUgfHwgIWRhdGEudGltZSkge1xuICAgICAgICAgICAgICAgICAgY29uc29sZS53YXJuKGBbQkxNWF0gJHtrZXl957y65bCR5b+F6KaB5a2X5q61OmAsIGRhdGEpO1xuICAgICAgICAgICAgICAgICAgLy8g5bCd6K+V6KGl5YWF57y65aSx5a2X5q61XG4gICAgICAgICAgICAgICAgICBpZiAoIWRhdGEuZGF0ZSB8fCAhZGF0YS50aW1lKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG5vdyA9IG5ldyBEYXRlKCk7XG4gICAgICAgICAgICAgICAgICAgIGlmICghZGF0YS5kYXRlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgZGF0YS5kYXRlID0gYCR7bm93LmdldEZ1bGxZZWFyKCl9LSR7U3RyaW5nKG5vdy5nZXRNb250aCgpICsgMSkucGFkU3RhcnQoMiwgJzAnKX0tJHtTdHJpbmcoXG4gICAgICAgICAgICAgICAgICAgICAgICBub3cuZ2V0RGF0ZSgpLFxuICAgICAgICAgICAgICAgICAgICAgICkucGFkU3RhcnQoMiwgJzAnKX1gO1xuICAgICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKGBbQkxNWF0g5Li6JHtrZXl96KGl5YWF5pel5pyfOmAsIGRhdGEuZGF0ZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKCFkYXRhLnRpbWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICBkYXRhLnRpbWUgPSBgJHtTdHJpbmcobm93LmdldEhvdXJzKCkpLnBhZFN0YXJ0KDIsICcwJyl9OiR7U3RyaW5nKG5vdy5nZXRNaW51dGVzKCkpLnBhZFN0YXJ0KFxuICAgICAgICAgICAgICAgICAgICAgICAgMixcbiAgICAgICAgICAgICAgICAgICAgICAgICcwJyxcbiAgICAgICAgICAgICAgICAgICAgICApfWA7XG4gICAgICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coYFtCTE1YXSDkuLoke2tleX3ooaXlhYXml7bpl7Q6YCwgZGF0YS50aW1lKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGNvbnN0IGVudHJ5VHlwZSA9IGtleSA9PT0gJ1RJTUUnID8gJ3RpbWUnIDogJ2V2ZW50JztcbiAgICAgICAgICAgICAgICBjb25zdCBuZXdFbnRyeSA9IHsgdHlwZTogZW50cnlUeXBlLCBjb250ZW50OiBkYXRhIH0gYXMgU3lzdGVtRW50cnk7XG4gICAgICAgICAgICAgICAgdGhpcy5sb2dFbnRyaWVzLnB1c2gobmV3RW50cnkpO1xuICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKGBbQkxNWF0g5re75YqgJHtrZXl95p2h55uuOmAsIG5ld0VudHJ5KTtcblxuICAgICAgICAgICAgICAgIGNvbnN0IHRpbWVEYXRlID0gbmV3IERhdGUoYCR7ZGF0YS5kYXRlfSAke2RhdGEudGltZX1gKTtcbiAgICAgICAgICAgICAgICBpZiAoIWlzTmFOKHRpbWVEYXRlLmdldFRpbWUoKSkpIHtcbiAgICAgICAgICAgICAgICAgIHdpbmRvdy5jdXJyZW50R2FtZURhdGUgPSB0aW1lRGF0ZTtcbiAgICAgICAgICAgICAgICAgIGNvbnN0IHRpbWVFbGVtZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2N1cnJlbnQtdGltZScpO1xuICAgICAgICAgICAgICAgICAgaWYgKHRpbWVFbGVtZW50KSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHRpbWVTdHJpbmcgPSBgJHt3aW5kb3cuY3VycmVudEdhbWVEYXRlXG4gICAgICAgICAgICAgICAgICAgICAgLmdldEhvdXJzKClcbiAgICAgICAgICAgICAgICAgICAgICAudG9TdHJpbmcoKVxuICAgICAgICAgICAgICAgICAgICAgIC5wYWRTdGFydCgyLCAnMCcpfToke3dpbmRvdy5jdXJyZW50R2FtZURhdGUuZ2V0TWludXRlcygpLnRvU3RyaW5nKCkucGFkU3RhcnQoMiwgJzAnKX1gO1xuICAgICAgICAgICAgICAgICAgICB0aW1lRWxlbWVudC50ZXh0Q29udGVudCA9IHRpbWVTdHJpbmc7XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoYFtCTE1YXSDop6PmnpAke2tleX3lpLHotKU6YCwgdmFsdWUsIGVycm9yKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgLy8gY29uc29sZS53YXJuKGBbQkxNWF0gJHtrZXl95YC85Li656m6YCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICBjYXNlICdSRUNBTEwnOiB7XG4gICAgICAgICAgICAvLyBjb25zb2xlLmxvZygnW0JMTVhdIOS7juWtmOWCqOS4reWKoOi9vVJFQ0FMTOaVsOaNrjonLCB2YWx1ZSk7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICBjb25zdCByZWNhbGxEYXRhID0gSlNPTi5wYXJzZSh2YWx1ZSk7XG4gICAgICAgICAgICAgIGNvbnN0IHNlbmRlclRvRmluZDogU2VuZGVyID0gcmVjYWxsRGF0YS5zZW5kZXIgPT09ICdVU0VSJyA/ICdtZScgOiAndGhlbSc7XG5cbiAgICAgICAgICAgICAgLy8g6I635Y+WdGFyZ2V0X3RleHTvvIzmlK/mjIHlpJrnp43lj6/og73nmoTlsZ7mgKflkI1cbiAgICAgICAgICAgICAgY29uc3QgdGFyZ2V0VGV4dCA9IHJlY2FsbERhdGEudGFyZ2V0X3RleHQgfHwgcmVjYWxsRGF0YVsndGFyZ2V0IHRleHQnXSB8fCByZWNhbGxEYXRhLnRleHQgfHwgJyc7XG5cbiAgICAgICAgICAgICAgaWYgKCF0YXJnZXRUZXh0KSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS53YXJuKCdbQkxNWF0gUkVDQUxM5pWw5o2u57y65bCR55uu5qCH5paH5pysOicsIHJlY2FsbERhdGEpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgLy8g5L2/55So5pu054G15rS755qE5p+l5om+5pa55rOVXG4gICAgICAgICAgICAgIGNvbnN0IGVudHJ5VG9SZWNhbGwgPSB0aGlzLmxvZ0VudHJpZXNcbiAgICAgICAgICAgICAgICAuc2xpY2UoKVxuICAgICAgICAgICAgICAgIC5yZXZlcnNlKClcbiAgICAgICAgICAgICAgICAuZmluZChlID0+IHtcbiAgICAgICAgICAgICAgICAgIC8vIOW/hemhu+aYr+aciXNlbmRlcuWSjGNvbnRlbnTnmoTmtojmga9cbiAgICAgICAgICAgICAgICAgIGlmICghKCdzZW5kZXInIGluIGUpIHx8IGUuc2VuZGVyICE9PSBzZW5kZXJUb0ZpbmQgfHwgISgnY29udGVudCcgaW4gZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAvLyDnsr7noa7ljLnphY1cbiAgICAgICAgICAgICAgICAgIGlmIChlLmNvbnRlbnQgPT09IHRhcmdldFRleHQpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgIC8vIOaooeeziuWMuemFje+8iOWOu+mZpOagh+eCueespuWPt+WSjOepuuagvOWQjuavlOi+g++8iVxuICAgICAgICAgICAgICAgICAgY29uc3Qgbm9ybWFsaXplVGV4dCA9ICh0ZXh0OiBzdHJpbmcpID0+XG4gICAgICAgICAgICAgICAgICAgIHR5cGVvZiB0ZXh0ID09PSAnc3RyaW5nJyA/IHRleHQucmVwbGFjZSgvW15cXHdcXHU0ZTAwLVxcdTlmYTVdL2csICcnKS50b0xvd2VyQ2FzZSgpIDogJyc7XG5cbiAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgZS5jb250ZW50ID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICAgICAgICAvLyDmqKHns4rljLnphY3mlofmnKxcbiAgICAgICAgICAgICAgICAgICAgaWYgKG5vcm1hbGl6ZVRleHQoZS5jb250ZW50KSA9PT0gbm9ybWFsaXplVGV4dCh0YXJnZXRUZXh0KSkge1xuICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIC8vIOWMheWQq+WMuemFjVxuICAgICAgICAgICAgICAgICAgICBpZiAoZS5jb250ZW50LmluY2x1ZGVzKHRhcmdldFRleHQpIHx8IHRhcmdldFRleHQuaW5jbHVkZXMoZS5jb250ZW50KSkge1xuICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgIC8vIOWvueS6juWkjeadguWGheWuueWvueixoeeahOWMuemFjVxuICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBlLmNvbnRlbnQgPT09ICdvYmplY3QnICYmIGUuY29udGVudCAhPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgIC8vIOavlOi+g+W6j+WIl+WMluWQjueahEpTT05cbiAgICAgICAgICAgICAgICAgICAgICBpZiAoSlNPTi5zdHJpbmdpZnkoZS5jb250ZW50KSA9PT0gdGFyZ2V0VGV4dCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgLy8g5aaC5p6c5piv6K+t6Z+z5raI5oGv77yM5q+U6L6DdGV4dOWtl+autVxuICAgICAgICAgICAgICAgICAgICAgIGlmICgndGV4dCcgaW4gZS5jb250ZW50KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB2b2ljZVRleHQgPSAoZS5jb250ZW50IGFzIGFueSkudGV4dDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2b2ljZVRleHQgPT09IHRhcmdldFRleHQgfHwgbm9ybWFsaXplVGV4dCh2b2ljZVRleHQpID09PSBub3JtYWxpemVUZXh0KHRhcmdldFRleHQpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgY29uc29sZS53YXJuKCdbQkxNWF0g5q+U6L6D5aSN5p2C5YaF5a655aSx6LSlOicsIGVycik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgIH0pIGFzIENoYXRFbnRyeTtcblxuICAgICAgICAgICAgICBpZiAoZW50cnlUb1JlY2FsbCkge1xuICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCdbQkxNWF0g5om+5Yiw5bm25qCH6K6w6KaB5pKk5Zue55qE5raI5oGvOicsIGVudHJ5VG9SZWNhbGwpO1xuICAgICAgICAgICAgICAgIGVudHJ5VG9SZWNhbGwucmVjYWxsZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIGVudHJ5VG9SZWNhbGwucmVjYWxsZWRfY29udGVudCA9IGVudHJ5VG9SZWNhbGwuY29udGVudDtcbiAgICAgICAgICAgICAgICBlbnRyeVRvUmVjYWxsLnJlY2FsbGVkX3RpbWVzdGFtcCA9IHJlY2FsbERhdGEudGltZXN0YW1wIHx8IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKTtcbiAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oJ1tCTE1YXSDmnKrmib7liLDopoHmkqTlm57nmoTmtojmga86Jywge1xuICAgICAgICAgICAgICAgICAgc2VuZGVyOiBzZW5kZXJUb0ZpbmQsXG4gICAgICAgICAgICAgICAgICB0YXJnZXRfdGV4dDogdGFyZ2V0VGV4dCxcbiAgICAgICAgICAgICAgICAgIHJlY2FsbF9kYXRhOiByZWNhbGxEYXRhLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdbQkxNWF0g5aSE55CGUkVDQUxM5pWw5o2u5aSx6LSlOicsIGVycm9yKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgICBjYXNlICdVU0VSJzpcbiAgICAgICAgICBjYXNlICdDSEFSJzoge1xuICAgICAgICAgICAgY29uc3Qgc2VuZGVyOiBTZW5kZXIgPSBrZXkgPT09ICdVU0VSJyA/ICdtZScgOiAndGhlbSc7XG4gICAgICAgICAgICBjb25zdCBpZCA9IGBtc2ctJHtEYXRlLm5vdygpfSR7TWF0aC5yYW5kb20oKX0tJHtzZW5kZXJ9YDtcblxuICAgICAgICAgICAgY29uc3Qgdm9pY2VNYXRjaCA9IHZhbHVlLm1hdGNoKC9eXFxb6K+t6Z+zOlxccyooey4qfSlcXF0vKTtcbiAgICAgICAgICAgIGlmICh2b2ljZU1hdGNoKSB7XG4gICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgY29uc3Qgdm9pY2VEYXRhID0gSlNPTi5wYXJzZSh2b2ljZU1hdGNoWzFdKTtcbiAgICAgICAgICAgICAgICB0aGlzLmxvZ0VudHJpZXMucHVzaCh7IGlkLCB0eXBlOiAndm9pY2UnLCBzZW5kZXIsIGNvbnRlbnQ6IHZvaWNlRGF0YSB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdGYWlsZWQgdG8gcGFyc2Ugdm9pY2UgZGF0YTonLCB2b2ljZU1hdGNoWzFdLCBlKTtcbiAgICAgICAgICAgICAgICAvLyDmt7vliqDpu5jorqTor63pn7PmlbDmja5cbiAgICAgICAgICAgICAgICB0aGlzLmxvZ0VudHJpZXMucHVzaCh7IGlkLCB0eXBlOiAndm9pY2UnLCBzZW5kZXIsIGNvbnRlbnQ6IHsgdGV4dDogJycsIGR1cmF0aW9uOiAwIH0gfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGNvbnN0IHN0aWNrZXJNYXRjaCA9IHZhbHVlLm1hdGNoKC9eXFxb6KGo5oOFOlxccyooLiopXFxdLyk7XG4gICAgICAgICAgICBpZiAoc3RpY2tlck1hdGNoKSB7XG4gICAgICAgICAgICAgIHRoaXMubG9nRW50cmllcy5wdXNoKHsgaWQsIHR5cGU6ICdzdGlja2VyJywgc2VuZGVyLCBjb250ZW50OiBzdGlja2VyTWF0Y2hbMV0gfSk7XG4gICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgY29uc3QgaW1hZ2VNYXRjaCA9IHZhbHVlLm1hdGNoKC9eXFxb5Zu+54mHOlxccyooLiopXFxdLyk7XG4gICAgICAgICAgICBpZiAoaW1hZ2VNYXRjaCkge1xuICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGltZ0RhdGEgPSBKU09OLnBhcnNlKGltYWdlTWF0Y2hbMV0pO1xuICAgICAgICAgICAgICAgIHRoaXMubG9nRW50cmllcy5wdXNoKHsgaWQsIHR5cGU6ICdpbWFnZScsIHNlbmRlciwgY29udGVudDogaW1nRGF0YSB9KTtcbiAgICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgIHRoaXMubG9nRW50cmllcy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgIGlkLFxuICAgICAgICAgICAgICAgICAgdHlwZTogJ2ltYWdlJyxcbiAgICAgICAgICAgICAgICAgIHNlbmRlcixcbiAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6IHsgdHlwZTogJ2Rlc2MnLCB2YWx1ZTogaW1hZ2VNYXRjaFsxXSB9LFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgY29uc3QgbG9jYXRpb25NYXRjaCA9IHZhbHVlLm1hdGNoKC9eXFxb5L2N572uOlxccyooLiopXFxdLyk7XG4gICAgICAgICAgICBpZiAobG9jYXRpb25NYXRjaCkge1xuICAgICAgICAgICAgICB0aGlzLmxvZ0VudHJpZXMucHVzaCh7IGlkLCB0eXBlOiAnbG9jYXRpb24nLCBzZW5kZXIsIGNvbnRlbnQ6IGxvY2F0aW9uTWF0Y2hbMV0gfSk7XG4gICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgY29uc3QgdHJhbnNmZXJNYXRjaCA9IHZhbHVlLm1hdGNoKC9eXFxb6L2s6LSmOlxccyooLiopXFxdLyk7XG4gICAgICAgICAgICBpZiAodHJhbnNmZXJNYXRjaCkge1xuICAgICAgICAgICAgICB0aGlzLmxvZ0VudHJpZXMucHVzaCh7XG4gICAgICAgICAgICAgICAgaWQsXG4gICAgICAgICAgICAgICAgdHlwZTogJ3RyYW5zZmVyJyxcbiAgICAgICAgICAgICAgICBzZW5kZXIsXG4gICAgICAgICAgICAgICAgY29udGVudDogdHJhbnNmZXJNYXRjaFsxXSxcbiAgICAgICAgICAgICAgICBkYXRhOiAoKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIEpTT04ucGFyc2UodHJhbnNmZXJNYXRjaFsxXSk7XG4gICAgICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0ZhaWxlZCB0byBwYXJzZSB0cmFuc2ZlciBkYXRhOicsIHRyYW5zZmVyTWF0Y2hbMV0sIGUpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4geyBhbW91bnQ6IDAsIG1lc3NhZ2U6ICcnIH07XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSkoKSxcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgY29uc3QgZmlsZU1hdGNoID0gdmFsdWUubWF0Y2goL15cXFvmlofku7Y6XFxzKiguKilcXF0vKTtcbiAgICAgICAgICAgIGlmIChmaWxlTWF0Y2gpIHtcbiAgICAgICAgICAgICAgdGhpcy5sb2dFbnRyaWVzLnB1c2goeyBpZCwgdHlwZTogJ2ZpbGUnLCBzZW5kZXIsIGNvbnRlbnQ6IGZpbGVNYXRjaFsxXSB9KTtcbiAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjb25zdCBnaWZ0TWF0Y2ggPSB2YWx1ZS5tYXRjaCgvXlxcW+ekvOeJqTpcXHMqKC4qKVxcXS8pO1xuICAgICAgICAgICAgaWYgKGdpZnRNYXRjaCkge1xuICAgICAgICAgICAgICB0aGlzLmxvZ0VudHJpZXMucHVzaCh7XG4gICAgICAgICAgICAgICAgaWQsXG4gICAgICAgICAgICAgICAgdHlwZTogJ2dpZnQnLFxuICAgICAgICAgICAgICAgIHNlbmRlcixcbiAgICAgICAgICAgICAgICBjb250ZW50OiBnaWZ0TWF0Y2hbMV0sXG4gICAgICAgICAgICAgICAgZGF0YTogKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBKU09OLnBhcnNlKGdpZnRNYXRjaFsxXSk7XG4gICAgICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0ZhaWxlZCB0byBwYXJzZSBnaWZ0IGRhdGE6JywgZ2lmdE1hdGNoWzFdLCBlKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsgbmFtZTogJycsIHZhbHVlOiAwIH07XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSkoKSxcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdGhpcy5sb2dFbnRyaWVzLnB1c2goeyBpZCwgdHlwZTogJ21lc3NhZ2UnLCBzZW5kZXIsIGNvbnRlbnQ6IHZhbHVlIH0pO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0ZhaWxlZCB0byBwYXJzZSBsb2cgbGluZTonLCBsaW5lLCBlKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIHByaXZhdGUgX3JlbmRlckxvZ1RvU3RyaW5nKCk6IHN0cmluZyB7XG4gICAgY29uc3QgcmVjYWxsQ29tbWFuZHM6IHN0cmluZ1tdID0gW107XG4gICAgY29uc3QgYWxsRW50cmllc1N0cmluZyA9IHRoaXMubG9nRW50cmllc1xuICAgICAgLm1hcChlID0+IHtcbiAgICAgICAgaWYgKGUucmVjYWxsZWQpIHtcbiAgICAgICAgICBjb25zdCByZWNhbGxEYXRhID0ge1xuICAgICAgICAgICAgc2VuZGVyOiAnc2VuZGVyJyBpbiBlICYmIGUuc2VuZGVyID09PSAnbWUnID8gJ1VTRVInIDogJ0NIQVInLFxuICAgICAgICAgICAgdGFyZ2V0X3RleHQ6XG4gICAgICAgICAgICAgIHR5cGVvZiBlLnJlY2FsbGVkX2NvbnRlbnQgPT09ICdvYmplY3QnICYmIGUucmVjYWxsZWRfY29udGVudCAhPT0gbnVsbFxuICAgICAgICAgICAgICAgID8gZS5yZWNhbGxlZF9jb250ZW50LnRleHRcbiAgICAgICAgICAgICAgICA6IGUucmVjYWxsZWRfY29udGVudCxcbiAgICAgICAgICAgIHRpbWVzdGFtcDogZS5yZWNhbGxlZF90aW1lc3RhbXAsXG4gICAgICAgICAgfTtcbiAgICAgICAgICBpZiAocmVjYWxsRGF0YS50YXJnZXRfdGV4dCkge1xuICAgICAgICAgICAgcmVjYWxsQ29tbWFuZHMucHVzaChgUkVDQUxMOiAke0pTT04uc3RyaW5naWZ5KHJlY2FsbERhdGEpfWApO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGlmICgna2V5JyBpbiBlKSB7XG4gICAgICAgICAgcmV0dXJuIGAke2Uua2V5fTogJHtKU09OLnN0cmluZ2lmeShlLmRhdGEpfWA7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoJ3R5cGUnIGluIGUpIHtcbiAgICAgICAgICBpZiAoZS50eXBlID09PSAndGltZScgfHwgZS50eXBlID09PSAnZXZlbnQnKSB7XG4gICAgICAgICAgICBjb25zdCBrZXkgPSBlLnR5cGUgPT09ICd0aW1lJyA/ICdUSU1FJyA6ICdFVkVOVF9MT0cnO1xuICAgICAgICAgICAgLy8gY29uc29sZS5sb2coYFtCTE1YXSDluo/liJfljJYke2tleX3mnaHnm646YCwgZSk7XG4gICAgICAgICAgICByZXR1cm4gYCR7a2V5fTogJHtKU09OLnN0cmluZ2lmeShlLmNvbnRlbnQpfWA7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgY29uc3QgcHJlZml4ID0gZS5zZW5kZXIgPT09ICdtZScgPyAnVVNFUicgOiAnQ0hBUic7XG4gICAgICAgICAgbGV0IGNvbnRlbnQ6IHN0cmluZyB8IG9iamVjdCA9IGUuY29udGVudDtcbiAgICAgICAgICBzd2l0Y2ggKGUudHlwZSkge1xuICAgICAgICAgICAgY2FzZSAnc3RpY2tlcic6XG4gICAgICAgICAgICAgIGNvbnRlbnQgPSBgW+ihqOaDhTogJHtlLmNvbnRlbnR9XWA7XG4gICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAndm9pY2UnOlxuICAgICAgICAgICAgICBjb250ZW50ID0gYFvor63pn7M6ICR7SlNPTi5zdHJpbmdpZnkoZS5jb250ZW50KX1dYDtcbiAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlICdpbWFnZSc6XG4gICAgICAgICAgICAgIGNvbnRlbnQgPSBgW+WbvueJhzogJHtKU09OLnN0cmluZ2lmeShlLmNvbnRlbnQpfV1gO1xuICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgJ2xvY2F0aW9uJzpcbiAgICAgICAgICAgICAgY29udGVudCA9IGBb5L2N572uOiAke2UuY29udGVudH1dYDtcbiAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlICdmaWxlJzpcbiAgICAgICAgICAgICAgY29udGVudCA9IGBb5paH5Lu2OiAke2UuY29udGVudH1dYDtcbiAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlICdnaWZ0JzpcbiAgICAgICAgICAgICAgY29udGVudCA9IGBb56S854mpOiAke2UuY29udGVudH1dYDtcbiAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlICd0cmFuc2Zlcic6XG4gICAgICAgICAgICAgIGNvbnRlbnQgPSBgW+i9rOi0pjogJHtlLmNvbnRlbnR9XWA7XG4gICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4gYCR7cHJlZml4fTogJHtjb250ZW50fWA7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuICcnOyAvLyBTaG91bGQgbm90IGhhcHBlbiBmb3IgdmFsaWQgZW50cmllc1xuICAgICAgfSlcbiAgICAgIC5qb2luKCdcXG4nKTtcblxuICAgIHJldHVybiBbYWxsRW50cmllc1N0cmluZywgLi4ucmVjYWxsQ29tbWFuZHNdLmZpbHRlcihCb29sZWFuKS5qb2luKCdcXG4nKTtcbiAgfVxuXG4gIC8vIOS/ruaUuWFkZEVudHJ55pa55rOVXG4gIGFkZEVudHJ5KGVudHJ5OiBMb2dFbnRyeSB8IG51bGwpOiB2b2lkIHtcbiAgICBpZiAoZW50cnkpIHtcbiAgICAgIC8vIOajgOafpeaYr+WQpuW3suWtmOWcqOebuOWQjOeahOadoeebrlxuICAgICAgY29uc3QgaXNEdXBsaWNhdGUgPSB0aGlzLmxvZ0VudHJpZXMuc29tZShleGlzdGluZ0VudHJ5ID0+IHtcbiAgICAgICAgLy8g5qOA5p+l5pyL5Y+L5ZyI55u45YWz5p2h55uuXG4gICAgICAgIGlmICgna2V5JyBpbiBlbnRyeSAmJiAna2V5JyBpbiBleGlzdGluZ0VudHJ5KSB7XG4gICAgICAgICAgaWYgKGVudHJ5LmtleSA9PT0gZXhpc3RpbmdFbnRyeS5rZXkpIHtcbiAgICAgICAgICAgIC8vIOWvueS6juaci+WPi+WciOWKqOaAge+8jOavlOi+g+aWh+acrOWSjOaXtumXtFxuICAgICAgICAgICAgaWYgKGVudHJ5LmtleS5pbmNsdWRlcygnX01PTUVOVCcpKSB7XG4gICAgICAgICAgICAgIGNvbnN0IGVudHJ5RGF0YSA9IChlbnRyeSBhcyBNb21lbnRFbnRyeSkuZGF0YTtcbiAgICAgICAgICAgICAgY29uc3QgZXhpc3RpbmdEYXRhID0gKGV4aXN0aW5nRW50cnkgYXMgTW9tZW50RW50cnkpLmRhdGE7XG4gICAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgZXhpc3RpbmdEYXRhLnRleHQgPT09IGVudHJ5RGF0YS50ZXh0ICYmXG4gICAgICAgICAgICAgICAgZXhpc3RpbmdEYXRhLmRhdGUgPT09IGVudHJ5RGF0YS5kYXRlICYmXG4gICAgICAgICAgICAgICAgZXhpc3RpbmdEYXRhLnRpbWUgPT09IGVudHJ5RGF0YS50aW1lXG4gICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyDlr7nkuo7or4TorrrvvIzmr5TovoPmlofmnKzlkoznm67moIfluJblrZBJRFxuICAgICAgICAgICAgZWxzZSBpZiAoZW50cnkua2V5LmluY2x1ZGVzKCdfQ09NTUVOVCcpKSB7XG4gICAgICAgICAgICAgIGNvbnN0IGVudHJ5RGF0YSA9IChlbnRyeSBhcyBDb21tZW50RW50cnkpLmRhdGE7XG4gICAgICAgICAgICAgIGNvbnN0IGV4aXN0aW5nRGF0YSA9IChleGlzdGluZ0VudHJ5IGFzIENvbW1lbnRFbnRyeSkuZGF0YTtcbiAgICAgICAgICAgICAgcmV0dXJuIGV4aXN0aW5nRGF0YS50ZXh0ID09PSBlbnRyeURhdGEudGV4dCAmJiBleGlzdGluZ0RhdGEudGFyZ2V0X3Bvc3RfaWQgPT09IGVudHJ5RGF0YS50YXJnZXRfcG9zdF9pZDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIOWvueS6jueCuei1nu+8jOavlOi+g+ebruagh+W4luWtkElEXG4gICAgICAgICAgICBlbHNlIGlmIChlbnRyeS5rZXkuaW5jbHVkZXMoJ19MSUtFJykpIHtcbiAgICAgICAgICAgICAgY29uc3QgZW50cnlEYXRhID0gKGVudHJ5IGFzIExpa2VFbnRyeSkuZGF0YTtcbiAgICAgICAgICAgICAgY29uc3QgZXhpc3RpbmdEYXRhID0gKGV4aXN0aW5nRW50cnkgYXMgTGlrZUVudHJ5KS5kYXRhO1xuICAgICAgICAgICAgICByZXR1cm4gZXhpc3RpbmdEYXRhLnRhcmdldF9wb3N0X2lkID09PSBlbnRyeURhdGEudGFyZ2V0X3Bvc3RfaWQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLy8g5qOA5p+l5raI5oGv57G75Z6L5p2h55uuXG4gICAgICAgIGlmICgndHlwZScgaW4gZW50cnkgJiYgJ3R5cGUnIGluIGV4aXN0aW5nRW50cnkpIHtcbiAgICAgICAgICAvLyDlpoLmnpzkuKTkuKrmnaHnm67nsbvlnovnm7jlkIxcbiAgICAgICAgICBpZiAoZW50cnkudHlwZSA9PT0gZXhpc3RpbmdFbnRyeS50eXBlKSB7XG4gICAgICAgICAgICAvLyDlr7nkuo7mnIlJROeahOadoeebru+8jOavlOi+g0lEXG4gICAgICAgICAgICBpZiAoJ2lkJyBpbiBlbnRyeSAmJiAnaWQnIGluIGV4aXN0aW5nRW50cnkgJiYgZW50cnkuaWQgPT09IGV4aXN0aW5nRW50cnkuaWQpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIOWvueS6jua2iOaBr+exu+Wei+adoeebru+8jOavlOi+g+WPkemAgeiAheWSjOWGheWuuVxuICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAoZW50cnkudHlwZSA9PT0gJ21lc3NhZ2UnIHx8XG4gICAgICAgICAgICAgICAgZW50cnkudHlwZSA9PT0gJ3N0aWNrZXInIHx8XG4gICAgICAgICAgICAgICAgZW50cnkudHlwZSA9PT0gJ2xvY2F0aW9uJyB8fFxuICAgICAgICAgICAgICAgIGVudHJ5LnR5cGUgPT09ICdmaWxlJykgJiZcbiAgICAgICAgICAgICAgJ3NlbmRlcicgaW4gZW50cnkgJiZcbiAgICAgICAgICAgICAgJ3NlbmRlcicgaW4gZXhpc3RpbmdFbnRyeSAmJlxuICAgICAgICAgICAgICAnY29udGVudCcgaW4gZW50cnkgJiZcbiAgICAgICAgICAgICAgJ2NvbnRlbnQnIGluIGV4aXN0aW5nRW50cnlcbiAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgIGVudHJ5LnNlbmRlciA9PT0gZXhpc3RpbmdFbnRyeS5zZW5kZXIgJiYgKHdpbmRvdyBhcyBhbnkpLl8uaXNFcXVhbChlbnRyeS5jb250ZW50LCBleGlzdGluZ0VudHJ5LmNvbnRlbnQpXG4gICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIOWvueS6juaXtumXtOWSjOS6i+S7tuaXpeW/l++8jOavlOi+g+WGheWuuVxuICAgICAgICAgICAgaWYgKChlbnRyeS50eXBlID09PSAndGltZScgfHwgZW50cnkudHlwZSA9PT0gJ2V2ZW50JykgJiYgJ2NvbnRlbnQnIGluIGVudHJ5ICYmICdjb250ZW50JyBpbiBleGlzdGluZ0VudHJ5KSB7XG4gICAgICAgICAgICAgIHJldHVybiAod2luZG93IGFzIGFueSkuXy5pc0VxdWFsKGVudHJ5LmNvbnRlbnQsIGV4aXN0aW5nRW50cnkuY29udGVudCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIOWvueS6juWFtuS7luWkjeadguexu+Wei++8iOWmgmltYWdlLCB2b2ljZSwgdHJhbnNmZXIsIGdpZnTvvInvvIzmr5TovoPlhoXlrrlcbiAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgJ2NvbnRlbnQnIGluIGVudHJ5ICYmXG4gICAgICAgICAgICAgICdjb250ZW50JyBpbiBleGlzdGluZ0VudHJ5ICYmXG4gICAgICAgICAgICAgIChlbnRyeS50eXBlID09PSAnaW1hZ2UnIHx8IGVudHJ5LnR5cGUgPT09ICd2b2ljZScgfHwgZW50cnkudHlwZSA9PT0gJ3RyYW5zZmVyJyB8fCBlbnRyeS50eXBlID09PSAnZ2lmdCcpXG4gICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgcmV0dXJuICh3aW5kb3cgYXMgYW55KS5fLmlzRXF1YWwoZW50cnkuY29udGVudCwgZXhpc3RpbmdFbnRyeS5jb250ZW50KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9KTtcblxuICAgICAgaWYgKGlzRHVwbGljYXRlKSB7XG4gICAgICAgIC8vIGNvbnNvbGUubG9nKGBbQkxNWF0g6Lez6L+H5re75Yqg6YeN5aSN5p2h55uuOmAsIGVudHJ5KTtcbiAgICAgICAgcmV0dXJuOyAvLyDlpoLmnpzmmK/ph43lpI3mnaHnm67vvIznm7TmjqXov5Tlm57vvIzkuI3mt7vliqBcbiAgICAgIH1cblxuICAgICAgdGhpcy5sb2dFbnRyaWVzLnB1c2goZW50cnkpO1xuXG4gICAgICAvLyDmt7vliqDml7bpl7Tmm7TmlrDpgLvovpFcbiAgICAgIGlmICgndHlwZScgaW4gZW50cnkgJiYgKGVudHJ5LnR5cGUgPT09ICd0aW1lJyB8fCBlbnRyeS50eXBlID09PSAnZXZlbnQnKSkge1xuICAgICAgICBjb25zdCBkYXRhID0gZW50cnkuY29udGVudDtcbiAgICAgICAgY29uc3QgdGltZURhdGUgPSBuZXcgRGF0ZShgJHtkYXRhLmRhdGV9ICR7ZGF0YS50aW1lfWApO1xuICAgICAgICBpZiAoIWlzTmFOKHRpbWVEYXRlLmdldFRpbWUoKSkpIHtcbiAgICAgICAgICB3aW5kb3cuY3VycmVudEdhbWVEYXRlID0gdGltZURhdGU7XG4gICAgICAgICAgY29uc3QgdGltZUVsZW1lbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY3VycmVudC10aW1lJyk7XG4gICAgICAgICAgaWYgKHRpbWVFbGVtZW50KSB7XG4gICAgICAgICAgICBjb25zdCB0aW1lU3RyaW5nID0gYCR7d2luZG93LmN1cnJlbnRHYW1lRGF0ZVxuICAgICAgICAgICAgICAuZ2V0SG91cnMoKVxuICAgICAgICAgICAgICAudG9TdHJpbmcoKVxuICAgICAgICAgICAgICAucGFkU3RhcnQoMiwgJzAnKX06JHt3aW5kb3cuY3VycmVudEdhbWVEYXRlLmdldE1pbnV0ZXMoKS50b1N0cmluZygpLnBhZFN0YXJ0KDIsICcwJyl9YDtcbiAgICAgICAgICAgIHRpbWVFbGVtZW50LnRleHRDb250ZW50ID0gdGltZVN0cmluZztcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBnZXRDb250ZXh0Rm9yQUkoKTogc3RyaW5nIHtcbiAgICByZXR1cm4gdGhpcy5fcmVuZGVyTG9nVG9TdHJpbmcoKTtcbiAgfVxufVxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/同层手机/script.ts\n")},"./src/同层手机/style-manager.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   StyleManager: () => (/* binding */ StyleManager),\n/* harmony export */   styleManager: () => (/* binding */ styleManager)\n/* harmony export */ });\n/* harmony import */ var _styles_main_scss__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./styles/main.scss */ \"./src/同层手机/styles/main.scss\");\n/**\n * 样式管理器\n * 负责导入和管理所有SCSS样式文件\n */\n// 导入主样式文件\n\n/**\n * 样式管理器类\n * 提供样式相关的工具方法和管理功能\n */\nclass StyleManager {\n    static instance;\n    loadedStyles = new Set();\n    constructor() {\n        this.initializeStyles();\n    }\n    /**\n     * 获取样式管理器单例实例\n     */\n    static getInstance() {\n        if (!StyleManager.instance) {\n            StyleManager.instance = new StyleManager();\n        }\n        return StyleManager.instance;\n    }\n    /**\n     * 初始化样式\n     */\n    initializeStyles() {\n        console.log('[StyleManager] 正在加载样式文件...');\n        // 标记主样式已加载\n        this.loadedStyles.add('main');\n        // 添加样式加载完成的标记到body\n        document.body.classList.add('styles-loaded');\n        console.log('[StyleManager] 样式文件加载完成');\n    }\n    /**\n     * 检查样式是否已加载\n     */\n    isStyleLoaded(styleName) {\n        return this.loadedStyles.has(styleName);\n    }\n    /**\n     * 动态切换主题\n     */\n    toggleTheme(theme) {\n        const body = document.body;\n        if (theme === 'dark') {\n            body.classList.add('dark-mode');\n        }\n        else {\n            body.classList.remove('dark-mode');\n        }\n        console.log(`[StyleManager] 主题已切换到: ${theme}`);\n    }\n    /**\n     * 获取当前主题\n     */\n    getCurrentTheme() {\n        return document.body.classList.contains('dark-mode') ? 'dark' : 'light';\n    }\n    /**\n     * 动态设置CSS变量\n     */\n    setCSSVariable(name, value) {\n        document.documentElement.style.setProperty(name, value);\n    }\n    /**\n     * 获取CSS变量值\n     */\n    getCSSVariable(name) {\n        return getComputedStyle(document.documentElement).getPropertyValue(name).trim();\n    }\n    /**\n     * 批量设置CSS变量\n     */\n    setCSSVariables(variables) {\n        Object.entries(variables).forEach(([name, value]) => {\n            this.setCSSVariable(name, value);\n        });\n    }\n    /**\n     * 重置所有自定义CSS变量\n     */\n    resetCSSVariables() {\n        // 移除所有自定义设置的CSS变量\n        const style = document.documentElement.style;\n        const propertiesToRemove = [];\n        for (let i = 0; i < style.length; i++) {\n            const property = style[i];\n            if (property.startsWith('--')) {\n                propertiesToRemove.push(property);\n            }\n        }\n        propertiesToRemove.forEach(property => {\n            style.removeProperty(property);\n        });\n        console.log('[StyleManager] CSS变量已重置');\n    }\n    /**\n     * 添加自定义样式类\n     */\n    addStyleClass(element, className) {\n        element.classList.add(className);\n    }\n    /**\n     * 移除样式类\n     */\n    removeStyleClass(element, className) {\n        element.classList.remove(className);\n    }\n    /**\n     * 切换样式类\n     */\n    toggleStyleClass(element, className) {\n        return element.classList.toggle(className);\n    }\n    /**\n     * 检查元素是否包含指定样式类\n     */\n    hasStyleClass(element, className) {\n        return element.classList.contains(className);\n    }\n    /**\n     * 获取样式管理器状态信息\n     */\n    getStatus() {\n        return {\n            loadedStyles: Array.from(this.loadedStyles),\n            currentTheme: this.getCurrentTheme(),\n            stylesLoaded: document.body.classList.contains('styles-loaded')\n        };\n    }\n}\n// 导出单例实例\nconst styleManager = StyleManager.getInstance();\n// 在模块加载时自动初始化\nconsole.log('[StyleManager] 样式管理器已初始化');\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Q0FBQyxZQUFZLENBQUM7WUFDM0MsWUFBWSxFQUFFLElBQUksQ0FBQyxlQUFlLEVBQUU7WUFDcEMsWUFBWSxFQUFFLFFBQVEsQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLFFBQVEsQ0FBQyxlQUFlLENBQUM7U0FDaEUsQ0FBQztJQUNKLENBQUM7Q0FDRjtBQUVELFNBQVM7QUFDRixNQUFNLFlBQVksR0FBRyxZQUFZLENBQUMsV0FBVyxFQUFFLENBQUM7QUFFdkQsY0FBYztBQUNkLE9BQU8sQ0FBQyxHQUFHLENBQUMsMEJBQTBCLENBQUMsQ0FBQyIsInNvdXJjZXMiOlsid2VicGFjazovL3RhdmVybl9oZWxwZXJfdGVtcGxhdGUvLi9zcmMv5ZCM5bGC5omL5py6L3N0eWxlLW1hbmFnZXIudHM/Il0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICog5qC35byP566h55CG5ZmoXG4gKiDotJ/otKPlr7zlhaXlkoznrqHnkIbmiYDmnIlTQ1NT5qC35byP5paH5Lu2XG4gKi9cblxuLy8g5a+85YWl5Li75qC35byP5paH5Lu2XG5pbXBvcnQgJy4vc3R5bGVzL21haW4uc2Nzcyc7XG5cbi8qKlxuICog5qC35byP566h55CG5Zmo57G7XG4gKiDmj5DkvpvmoLflvI/nm7jlhbPnmoTlt6Xlhbfmlrnms5XlkoznrqHnkIblip/og71cbiAqL1xuZXhwb3J0IGNsYXNzIFN0eWxlTWFuYWdlciB7XG4gIHByaXZhdGUgc3RhdGljIGluc3RhbmNlOiBTdHlsZU1hbmFnZXI7XG4gIHByaXZhdGUgbG9hZGVkU3R5bGVzOiBTZXQ8c3RyaW5nPiA9IG5ldyBTZXQoKTtcblxuICBwcml2YXRlIGNvbnN0cnVjdG9yKCkge1xuICAgIHRoaXMuaW5pdGlhbGl6ZVN0eWxlcygpO1xuICB9XG5cbiAgLyoqXG4gICAqIOiOt+WPluagt+W8j+euoeeQhuWZqOWNleS+i+WunuS+i1xuICAgKi9cbiAgcHVibGljIHN0YXRpYyBnZXRJbnN0YW5jZSgpOiBTdHlsZU1hbmFnZXIge1xuICAgIGlmICghU3R5bGVNYW5hZ2VyLmluc3RhbmNlKSB7XG4gICAgICBTdHlsZU1hbmFnZXIuaW5zdGFuY2UgPSBuZXcgU3R5bGVNYW5hZ2VyKCk7XG4gICAgfVxuICAgIHJldHVybiBTdHlsZU1hbmFnZXIuaW5zdGFuY2U7XG4gIH1cblxuICAvKipcbiAgICog5Yid5aeL5YyW5qC35byPXG4gICAqL1xuICBwcml2YXRlIGluaXRpYWxpemVTdHlsZXMoKTogdm9pZCB7XG4gICAgY29uc29sZS5sb2coJ1tTdHlsZU1hbmFnZXJdIOato+WcqOWKoOi9veagt+W8j+aWh+S7ti4uLicpO1xuICAgIFxuICAgIC8vIOagh+iusOS4u+agt+W8j+W3suWKoOi9vVxuICAgIHRoaXMubG9hZGVkU3R5bGVzLmFkZCgnbWFpbicpO1xuICAgIFxuICAgIC8vIOa3u+WKoOagt+W8j+WKoOi9veWujOaIkOeahOagh+iusOWIsGJvZHlcbiAgICBkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC5hZGQoJ3N0eWxlcy1sb2FkZWQnKTtcbiAgICBcbiAgICBjb25zb2xlLmxvZygnW1N0eWxlTWFuYWdlcl0g5qC35byP5paH5Lu25Yqg6L295a6M5oiQJyk7XG4gIH1cblxuICAvKipcbiAgICog5qOA5p+l5qC35byP5piv5ZCm5bey5Yqg6L29XG4gICAqL1xuICBwdWJsaWMgaXNTdHlsZUxvYWRlZChzdHlsZU5hbWU6IHN0cmluZyk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLmxvYWRlZFN0eWxlcy5oYXMoc3R5bGVOYW1lKTtcbiAgfVxuXG4gIC8qKlxuICAgKiDliqjmgIHliIfmjaLkuLvpophcbiAgICovXG4gIHB1YmxpYyB0b2dnbGVUaGVtZSh0aGVtZTogJ2xpZ2h0JyB8ICdkYXJrJyk6IHZvaWQge1xuICAgIGNvbnN0IGJvZHkgPSBkb2N1bWVudC5ib2R5O1xuICAgIFxuICAgIGlmICh0aGVtZSA9PT0gJ2RhcmsnKSB7XG4gICAgICBib2R5LmNsYXNzTGlzdC5hZGQoJ2RhcmstbW9kZScpO1xuICAgIH0gZWxzZSB7XG4gICAgICBib2R5LmNsYXNzTGlzdC5yZW1vdmUoJ2RhcmstbW9kZScpO1xuICAgIH1cbiAgICBcbiAgICBjb25zb2xlLmxvZyhgW1N0eWxlTWFuYWdlcl0g5Li76aKY5bey5YiH5o2i5YiwOiAke3RoZW1lfWApO1xuICB9XG5cbiAgLyoqXG4gICAqIOiOt+WPluW9k+WJjeS4u+mimFxuICAgKi9cbiAgcHVibGljIGdldEN1cnJlbnRUaGVtZSgpOiAnbGlnaHQnIHwgJ2RhcmsnIHtcbiAgICByZXR1cm4gZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QuY29udGFpbnMoJ2RhcmstbW9kZScpID8gJ2RhcmsnIDogJ2xpZ2h0JztcbiAgfVxuXG4gIC8qKlxuICAgKiDliqjmgIHorr7nva5DU1Plj5jph49cbiAgICovXG4gIHB1YmxpYyBzZXRDU1NWYXJpYWJsZShuYW1lOiBzdHJpbmcsIHZhbHVlOiBzdHJpbmcpOiB2b2lkIHtcbiAgICBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc3R5bGUuc2V0UHJvcGVydHkobmFtZSwgdmFsdWUpO1xuICB9XG5cbiAgLyoqXG4gICAqIOiOt+WPlkNTU+WPmOmHj+WAvFxuICAgKi9cbiAgcHVibGljIGdldENTU1ZhcmlhYmxlKG5hbWU6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgcmV0dXJuIGdldENvbXB1dGVkU3R5bGUoZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50KS5nZXRQcm9wZXJ0eVZhbHVlKG5hbWUpLnRyaW0oKTtcbiAgfVxuXG4gIC8qKlxuICAgKiDmibnph4/orr7nva5DU1Plj5jph49cbiAgICovXG4gIHB1YmxpYyBzZXRDU1NWYXJpYWJsZXModmFyaWFibGVzOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+KTogdm9pZCB7XG4gICAgT2JqZWN0LmVudHJpZXModmFyaWFibGVzKS5mb3JFYWNoKChbbmFtZSwgdmFsdWVdKSA9PiB7XG4gICAgICB0aGlzLnNldENTU1ZhcmlhYmxlKG5hbWUsIHZhbHVlKTtcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiDph43nva7miYDmnInoh6rlrprkuYlDU1Plj5jph49cbiAgICovXG4gIHB1YmxpYyByZXNldENTU1ZhcmlhYmxlcygpOiB2b2lkIHtcbiAgICAvLyDnp7vpmaTmiYDmnInoh6rlrprkuYnorr7nva7nmoRDU1Plj5jph49cbiAgICBjb25zdCBzdHlsZSA9IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zdHlsZTtcbiAgICBjb25zdCBwcm9wZXJ0aWVzVG9SZW1vdmU6IHN0cmluZ1tdID0gW107XG4gICAgXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzdHlsZS5sZW5ndGg7IGkrKykge1xuICAgICAgY29uc3QgcHJvcGVydHkgPSBzdHlsZVtpXTtcbiAgICAgIGlmIChwcm9wZXJ0eS5zdGFydHNXaXRoKCctLScpKSB7XG4gICAgICAgIHByb3BlcnRpZXNUb1JlbW92ZS5wdXNoKHByb3BlcnR5KTtcbiAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgcHJvcGVydGllc1RvUmVtb3ZlLmZvckVhY2gocHJvcGVydHkgPT4ge1xuICAgICAgc3R5bGUucmVtb3ZlUHJvcGVydHkocHJvcGVydHkpO1xuICAgIH0pO1xuICAgIFxuICAgIGNvbnNvbGUubG9nKCdbU3R5bGVNYW5hZ2VyXSBDU1Plj5jph4/lt7Lph43nva4nKTtcbiAgfVxuXG4gIC8qKlxuICAgKiDmt7vliqDoh6rlrprkuYnmoLflvI/nsbtcbiAgICovXG4gIHB1YmxpYyBhZGRTdHlsZUNsYXNzKGVsZW1lbnQ6IEhUTUxFbGVtZW50LCBjbGFzc05hbWU6IHN0cmluZyk6IHZvaWQge1xuICAgIGVsZW1lbnQuY2xhc3NMaXN0LmFkZChjbGFzc05hbWUpO1xuICB9XG5cbiAgLyoqXG4gICAqIOenu+mZpOagt+W8j+exu1xuICAgKi9cbiAgcHVibGljIHJlbW92ZVN0eWxlQ2xhc3MoZWxlbWVudDogSFRNTEVsZW1lbnQsIGNsYXNzTmFtZTogc3RyaW5nKTogdm9pZCB7XG4gICAgZWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKGNsYXNzTmFtZSk7XG4gIH1cblxuICAvKipcbiAgICog5YiH5o2i5qC35byP57G7XG4gICAqL1xuICBwdWJsaWMgdG9nZ2xlU3R5bGVDbGFzcyhlbGVtZW50OiBIVE1MRWxlbWVudCwgY2xhc3NOYW1lOiBzdHJpbmcpOiBib29sZWFuIHtcbiAgICByZXR1cm4gZWxlbWVudC5jbGFzc0xpc3QudG9nZ2xlKGNsYXNzTmFtZSk7XG4gIH1cblxuICAvKipcbiAgICog5qOA5p+l5YWD57Sg5piv5ZCm5YyF5ZCr5oyH5a6a5qC35byP57G7XG4gICAqL1xuICBwdWJsaWMgaGFzU3R5bGVDbGFzcyhlbGVtZW50OiBIVE1MRWxlbWVudCwgY2xhc3NOYW1lOiBzdHJpbmcpOiBib29sZWFuIHtcbiAgICByZXR1cm4gZWxlbWVudC5jbGFzc0xpc3QuY29udGFpbnMoY2xhc3NOYW1lKTtcbiAgfVxuXG4gIC8qKlxuICAgKiDojrflj5bmoLflvI/nrqHnkIblmajnirbmgIHkv6Hmga9cbiAgICovXG4gIHB1YmxpYyBnZXRTdGF0dXMoKToge1xuICAgIGxvYWRlZFN0eWxlczogc3RyaW5nW107XG4gICAgY3VycmVudFRoZW1lOiBzdHJpbmc7XG4gICAgc3R5bGVzTG9hZGVkOiBib29sZWFuO1xuICB9IHtcbiAgICByZXR1cm4ge1xuICAgICAgbG9hZGVkU3R5bGVzOiBBcnJheS5mcm9tKHRoaXMubG9hZGVkU3R5bGVzKSxcbiAgICAgIGN1cnJlbnRUaGVtZTogdGhpcy5nZXRDdXJyZW50VGhlbWUoKSxcbiAgICAgIHN0eWxlc0xvYWRlZDogZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QuY29udGFpbnMoJ3N0eWxlcy1sb2FkZWQnKVxuICAgIH07XG4gIH1cbn1cblxuLy8g5a+85Ye65Y2V5L6L5a6e5L6LXG5leHBvcnQgY29uc3Qgc3R5bGVNYW5hZ2VyID0gU3R5bGVNYW5hZ2VyLmdldEluc3RhbmNlKCk7XG5cbi8vIOWcqOaooeWdl+WKoOi9veaXtuiHquWKqOWIneWni+WMllxuY29uc29sZS5sb2coJ1tTdHlsZU1hbmFnZXJdIOagt+W8j+euoeeQhuWZqOW3suWIneWni+WMlicpO1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/同层手机/style-manager.ts\n")},"./src/同层手机/styles/main.scss":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{eval("__webpack_require__.r(__webpack_exports__);\n// extracted by mini-css-extract-plugin\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMv5ZCM5bGC5omL5py6L3N0eWxlcy9tYWluLnNjc3MiLCJtYXBwaW5ncyI6IjtBQUFBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdGF2ZXJuX2hlbHBlcl90ZW1wbGF0ZS8uL3NyYy/lkIzlsYLmiYvmnLovc3R5bGVzL21haW4uc2Nzcz8iXSwic291cmNlc0NvbnRlbnQiOlsiLy8gZXh0cmFjdGVkIGJ5IG1pbmktY3NzLWV4dHJhY3QtcGx1Z2luXG5leHBvcnQge307Il0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/同层手机/styles/main.scss\n")},"./src/同层手机/theme-editor.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ThemeEditor: () => (/* binding */ ThemeEditor)\n/* harmony export */ });\n// 主题编辑器模块\n// 负责主题编辑器、主题保存、颜色处理等功能\nclass ThemeEditor {\n    themeManager;\n    onThemeChanged;\n    constructor(themeManager, onThemeChanged) {\n        this.themeManager = themeManager;\n        this.onThemeChanged = onThemeChanged;\n    }\n    // 设置主题选择器\n    setupThemeSelector() {\n        const themeOptionsContainer = document.querySelector('.theme-options');\n        if (!themeOptionsContainer)\n            return;\n        // 清空现有内容\n        themeOptionsContainer.innerHTML = '';\n        // 获取所有默认主题\n        const themes = this.themeManager.getThemes();\n        // 为每个主题创建选择按钮\n        Object.values(themes).forEach(theme => {\n            const themeButton = document.createElement('div');\n            themeButton.className = 'theme-option';\n            themeButton.style.cssText = `\n        width: calc(50% - 0.5rem);\n        aspect-ratio: 1/1;\n        border-radius: 8px;\n        background-color: ${theme.colors.primary};\n        display: flex;\n        flex-direction: column;\n        align-items: center;\n        justify-content: center;\n        cursor: pointer;\n        position: relative;\n        overflow: hidden;\n        box-shadow: 0 2px 8px rgba(0,0,0,0.1);\n      `;\n            // 添加主题预览\n            const previewEl = document.createElement('div');\n            previewEl.style.cssText = `\n        position: absolute;\n        top: 0;\n        left: 0;\n        width: 100%;\n        height: 100%;\n        background: linear-gradient(135deg, ${theme.colors.gradientStart}, ${theme.colors.gradientEnd});\n      `;\n            // 添加气泡预览\n            const bubblePreview = document.createElement('div');\n            bubblePreview.style.cssText = `\n        position: relative;\n        width: 70%;\n        height: 60%;\n        display: flex;\n        flex-direction: column;\n        justify-content: space-between;\n        z-index: 1;\n      `;\n            const themBubble = document.createElement('div');\n            themBubble.style.cssText = `\n        align-self: flex-start;\n        width: 60%;\n        height: 40%;\n        background-color: ${theme.colors.bubbleThemBg};\n        border-radius: 8px;\n      `;\n            const meBubble = document.createElement('div');\n            meBubble.style.cssText = `\n        align-self: flex-end;\n        width: 60%;\n        height: 40%;\n        background-color: ${theme.colors.bubbleMeBg};\n        border-radius: 8px;\n      `;\n            bubblePreview.appendChild(themBubble);\n            bubblePreview.appendChild(meBubble);\n            // 添加主题名称\n            const nameEl = document.createElement('div');\n            nameEl.textContent = theme.displayName;\n            nameEl.style.cssText = `\n        position: relative;\n        color: white;\n        font-size: 0.8rem;\n        font-weight: 500;\n        margin-top: 5px;\n        text-shadow: 0 1px 2px rgba(0,0,0,0.3);\n        z-index: 1;\n      `;\n            themeButton.appendChild(previewEl);\n            themeButton.appendChild(bubblePreview);\n            themeButton.appendChild(nameEl);\n            // 添加点击事件\n            themeButton.addEventListener('click', () => {\n                this.themeManager.switchTheme(theme.name);\n                // 通知主题已更改\n                if (this.onThemeChanged) {\n                    this.onThemeChanged();\n                }\n            });\n            themeOptionsContainer.appendChild(themeButton);\n        });\n        // 添加自定义主题按钮\n        this.addCustomThemeButton(themeOptionsContainer);\n    }\n    // 添加自定义主题按钮\n    addCustomThemeButton(container) {\n        const customButton = document.createElement('div');\n        customButton.className = 'theme-option custom-theme-option';\n        customButton.style.cssText = `\n      width: calc(50% - 0.5rem);\n      aspect-ratio: 1/1;\n      border-radius: 8px;\n      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n      display: flex;\n      flex-direction: column;\n      align-items: center;\n      justify-content: center;\n      cursor: pointer;\n      position: relative;\n      overflow: hidden;\n      box-shadow: 0 2px 8px rgba(0,0,0,0.1);\n    `;\n        const iconEl = document.createElement('div');\n        iconEl.innerHTML = '✨';\n        iconEl.style.cssText = `\n      font-size: 2rem;\n      margin-bottom: 5px;\n    `;\n        const nameEl = document.createElement('div');\n        nameEl.textContent = '自定义主题';\n        nameEl.style.cssText = `\n      color: white;\n      font-size: 0.8rem;\n      font-weight: 500;\n      text-shadow: 0 1px 2px rgba(0,0,0,0.3);\n    `;\n        customButton.appendChild(iconEl);\n        customButton.appendChild(nameEl);\n        customButton.addEventListener('click', () => {\n            this.openThemeEditor();\n        });\n        container.appendChild(customButton);\n    }\n    // 打开主题编辑器\n    openThemeEditor() {\n        const modal = document.getElementById('theme-editor-modal');\n        if (!modal)\n            return;\n        // 获取当前主题并填充编辑器\n        const currentTheme = this.themeManager.getCurrentTheme();\n        this.fillThemeEditor(currentTheme);\n        // 显示模态框\n        modal.style.display = 'block';\n    }\n    // 关闭主题编辑器\n    closeThemeEditor() {\n        const modal = document.getElementById('theme-editor-modal');\n        if (modal) {\n            modal.style.display = 'none';\n        }\n    }\n    // 填充主题编辑器\n    fillThemeEditor(theme) {\n        // 获取所有输入元素\n        const nameInput = document.getElementById('theme-name-input');\n        const phoneFrameColor = document.getElementById('phone-frame-color');\n        const primaryColor = document.getElementById('primary-color');\n        const lightColor = document.getElementById('light-color');\n        const ultraLightColor = document.getElementById('ultra-light-color');\n        const deepColor = document.getElementById('deep-color');\n        const textPrimaryColor = document.getElementById('text-primary-color');\n        const textSecondaryColor = document.getElementById('text-secondary-color');\n        const meBubbleBackgroundColor = document.getElementById('bubble-me-color');\n        const meBubbleTextColor = document.getElementById('bubble-me-text-color');\n        const themBubbleBackgroundColor = document.getElementById('bubble-them-color');\n        const themBubbleTextColor = document.getElementById('bubble-them-text-color');\n        const backgroundPrimaryColor = document.getElementById('ultra-light-color');\n        const backgroundSecondaryColor = document.getElementById('deep-color');\n        const borderColor = document.getElementById('border-color');\n        const shadowColor = document.getElementById('shadow-color');\n        const statusBarColor = document.getElementById('status-bar-color');\n        const dynamicIslandColor = document.getElementById('dynamic-island-color');\n        const darkModeToggle = document.getElementById('dark-mode-toggle');\n        const singleColorIconsToggle = document.getElementById('single-color-icons-toggle');\n        // 填充基本颜色\n        if (nameInput)\n            nameInput.value = theme.name === 'custom' ? '我的自定义主题' : `自定义 ${theme.displayName}`;\n        if (phoneFrameColor)\n            phoneFrameColor.value = theme.colors.phoneFrame;\n        if (primaryColor)\n            primaryColor.value = theme.colors.primary;\n        if (lightColor)\n            lightColor.value = theme.colors.light;\n        if (ultraLightColor)\n            ultraLightColor.value = theme.colors.ultraLight;\n        if (deepColor)\n            deepColor.value = theme.colors.deep;\n        if (textPrimaryColor)\n            textPrimaryColor.value = theme.colors.textPrimary;\n        if (textSecondaryColor)\n            textSecondaryColor.value = theme.colors.textSecondary;\n        // 填充气泡颜色\n        if (meBubbleBackgroundColor)\n            meBubbleBackgroundColor.value = theme.colors.bubbleMeBg;\n        if (meBubbleTextColor)\n            meBubbleTextColor.value = theme.colors.bubbleMeText;\n        if (themBubbleBackgroundColor)\n            themBubbleBackgroundColor.value = theme.colors.bubbleThemBg;\n        if (themBubbleTextColor)\n            themBubbleTextColor.value = theme.colors.bubbleThemText;\n        // 填充背景颜色 - 使用已有的颜色控件\n        // 应用背景色和卡片背景色已经在基本颜色中设置了\n        // 填充新增颜色控件\n        if (statusBarColor)\n            statusBarColor.value = theme.colors.statusBarColor;\n        if (dynamicIslandColor)\n            dynamicIslandColor.value = theme.colors.dynamicIslandColor;\n        if (borderColor)\n            borderColor.value = theme.colors.borderColor;\n        if (shadowColor)\n            shadowColor.value = theme.colors.shadowColor;\n        if (darkModeToggle)\n            darkModeToggle.checked = theme.colors.isDarkMode;\n        // 填充单一颜色图标选项\n        if (singleColorIconsToggle)\n            singleColorIconsToggle.checked = theme.colors.useSingleColorIcons || false;\n    }\n    // 重置主题编辑器\n    resetThemeEditor() {\n        // 使用蓝色主题重置编辑器\n        const blueTheme = this.themeManager.getThemes().blue;\n        this.fillThemeEditor(blueTheme);\n    }\n    // 保存自定义主题\n    saveCustomTheme() {\n        const nameInput = document.getElementById('theme-name-input');\n        const phoneFrameColor = document.getElementById('phone-frame-color');\n        const primaryColor = document.getElementById('primary-color');\n        const lightColor = document.getElementById('light-color');\n        const ultraLightColor = document.getElementById('ultra-light-color');\n        const deepColor = document.getElementById('deep-color');\n        const textPrimaryColor = document.getElementById('text-primary-color');\n        const textSecondaryColor = document.getElementById('text-secondary-color');\n        const meBubbleBackgroundColor = document.getElementById('bubble-me-color');\n        const meBubbleTextColor = document.getElementById('bubble-me-text-color');\n        const themBubbleBackgroundColor = document.getElementById('bubble-them-color');\n        const themBubbleTextColor = document.getElementById('bubble-them-text-color');\n        const statusBarColor = document.getElementById('status-bar-color');\n        const dynamicIslandColor = document.getElementById('dynamic-island-color');\n        const borderColor = document.getElementById('border-color');\n        const shadowColor = document.getElementById('shadow-color');\n        const darkModeToggle = document.getElementById('dark-mode-toggle');\n        const singleColorIconsToggle = document.getElementById('single-color-icons-toggle');\n        // 提取颜色值\n        const phoneFrame = phoneFrameColor?.value || '#000000';\n        const primary = primaryColor?.value || '#007AFF';\n        const light = lightColor?.value || '#E3F2FD';\n        const ultraLight = ultraLightColor?.value || '#F8FBFF';\n        const deep = deepColor?.value || '#0056CC';\n        const textPrimary = textPrimaryColor?.value || '#000000';\n        const textSecondary = textSecondaryColor?.value || '#666666';\n        const bubbleMeBg = meBubbleBackgroundColor?.value || '#007AFF';\n        const bubbleMeText = meBubbleTextColor?.value || '#FFFFFF';\n        const bubbleThemBg = themBubbleBackgroundColor?.value || '#F0F0F0';\n        const bubbleThemText = themBubbleTextColor?.value || '#000000';\n        const appBgColor = ultraLight;\n        const settingsBgColor = ultraLight;\n        const settingsCardBgColor = '#FFFFFF';\n        const statusBar = statusBarColor?.value || '#000000';\n        const dynamicIsland = dynamicIslandColor?.value || '#000000';\n        const border = borderColor?.value || '#E0E0E0';\n        const shadow = shadowColor?.value || '#000000';\n        const isDarkMode = darkModeToggle?.checked || false;\n        const useSingleColorIcons = singleColorIconsToggle?.checked || false;\n        // 创建自定义主题\n        const customTheme = this.createCustomTheme({\n            name: nameInput?.value || '自定义主题',\n            phoneFrame,\n            primary,\n            light,\n            ultraLight,\n            deep,\n            textPrimary,\n            textSecondary,\n            bubbleMeBg,\n            bubbleMeText,\n            bubbleThemBg,\n            bubbleThemText,\n            appBgColor,\n            settingsBgColor,\n            settingsCardBgColor,\n            statusBar,\n            dynamicIsland,\n            border,\n            shadow,\n            isDarkMode,\n            useSingleColorIcons,\n        });\n        // 保存并应用主题\n        this.themeManager.saveCustomTheme(customTheme);\n        this.themeManager.switchTheme('custom');\n        // 关闭编辑器\n        this.closeThemeEditor();\n        // 通知主题已更改\n        if (this.onThemeChanged) {\n            this.onThemeChanged();\n        }\n    }\n    // 创建自定义主题\n    createCustomTheme(params) {\n        const { name, phoneFrame, primary, light, ultraLight, deep, textPrimary, textSecondary, bubbleMeBg, bubbleMeText, bubbleThemBg, bubbleThemText, appBgColor, settingsBgColor, settingsCardBgColor, statusBar, dynamicIsland, border, shadow, isDarkMode, useSingleColorIcons, } = params;\n        // 提取阴影颜色的RGB分量\n        const r = parseInt(shadow.slice(1, 3), 16);\n        const g = parseInt(shadow.slice(3, 5), 16);\n        const b = parseInt(shadow.slice(5, 7), 16);\n        const shadowColorRgba = isDarkMode ? 'rgba(0, 0, 0, 0.5)' : `rgba(${r}, ${g}, ${b}, 0.3)`;\n        const bubbleShadow = `0 2px 8px rgba(${r}, ${g}, ${b}, 0.15)`;\n        // 渐变色\n        const gradientStart = this.lightenDarkenColor(primary, 20);\n        const gradientEnd = this.lightenDarkenColor(primary, -10);\n        // 添加缺少的属性\n        const soft = this.lightenDarkenColor(light, -10);\n        const textColor = '#ffffff';\n        const headerBg = isDarkMode\n            ? 'linear-gradient(315deg, #333333 0%, #444444 100%)'\n            : `linear-gradient(315deg, ${this.lightenDarkenColor(ultraLight, -5)} 0%, ${ultraLight} 100%)`;\n        // 创建自定义主题\n        const customTheme = {\n            name: 'custom',\n            displayName: name,\n            colors: {\n                phoneFrame: phoneFrame,\n                phoneFrameGradient: [\n                    this.lightenDarkenColor(phoneFrame, -40),\n                    phoneFrame,\n                    this.lightenDarkenColor(phoneFrame, 20),\n                    this.lightenDarkenColor(phoneFrame, -40),\n                ],\n                primary: primary,\n                light: light,\n                ultraLight: ultraLight,\n                soft: soft,\n                deep: deep,\n                textPrimary: textPrimary,\n                textSecondary: textSecondary,\n                textColor: textColor,\n                bubbleMeBg,\n                bubbleMeText,\n                bubbleThemBg,\n                bubbleThemText,\n                headerBg,\n                appBgColor,\n                settingsBgColor,\n                settingsCardBgColor,\n                gradientStart,\n                gradientEnd,\n                statusBarColor: statusBar,\n                dynamicIslandColor: dynamicIsland,\n                borderColor: border,\n                shadowColor: shadow,\n                shadowColorRgba,\n                bubbleShadow,\n                isDarkMode,\n                defaultWallpapers: {\n                    chat: isDarkMode\n                        ? 'https://gitgud.io/lolodesu/lolobabytutorial/-/raw/master/lologame/素材/wallpaper/深色星星_1.jpg'\n                        : 'https://gitgud.io/lolodesu/lolobabytutorial/-/raw/master/lologame/素材/wallpaper/蓝色_3.jpg',\n                    home: isDarkMode\n                        ? 'https://gitgud.io/lolodesu/lolobabytutorial/-/raw/master/lologame/素材/wallpaper/深色星星_1.jpg'\n                        : 'https://gitgud.io/lolodesu/lolobabytutorial/-/raw/master/lologame/素材/wallpaper/蓝色_2.jpg',\n                    settings: isDarkMode ? '#1a1a1a' : '#f2f7fd',\n                },\n                useSingleColorIcons,\n            },\n        };\n        return customTheme;\n    }\n    // 颜色处理工具：调亮或调暗颜色\n    lightenDarkenColor(col, amt) {\n        let usePound = false;\n        if (col[0] === '#') {\n            col = col.slice(1);\n            usePound = true;\n        }\n        const num = parseInt(col, 16);\n        let r = (num >> 16) + amt;\n        if (r > 255)\n            r = 255;\n        else if (r < 0)\n            r = 0;\n        let b = ((num >> 8) & 0x00ff) + amt;\n        if (b > 255)\n            b = 255;\n        else if (b < 0)\n            b = 0;\n        let g = (num & 0x0000ff) + amt;\n        if (g > 255)\n            g = 255;\n        else if (g < 0)\n            g = 0;\n        return (usePound ? '#' : '') + (g | (b << 8) | (r << 16)).toString(16);\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LENBQUMsQ0FBQyxJQUFJLEVBQUUsQ0FBQyxDQUFDLENBQUMsUUFBUSxDQUFDLEVBQUUsQ0FBQyxDQUFDO0lBQ3pFLENBQUM7Q0FDRiIsInNvdXJjZXMiOlsid2VicGFjazovL3RhdmVybl9oZWxwZXJfdGVtcGxhdGUvLi9zcmMv5ZCM5bGC5omL5py6L3RoZW1lLWVkaXRvci50cz8iXSwic291cmNlc0NvbnRlbnQiOlsiLy8g5Li76aKY57yW6L6R5Zmo5qih5Z2XXG4vLyDotJ/otKPkuLvpopjnvJbovpHlmajjgIHkuLvpopjkv53lrZjjgIHpopzoibLlpITnkIbnrYnlip/og71cblxuaW1wb3J0IHsgVGhlbWUsIFRoZW1lTWFuYWdlciB9IGZyb20gJy4vdGhlbWUtbWFuYWdlcic7XG5cbmV4cG9ydCBjbGFzcyBUaGVtZUVkaXRvciB7XG4gIHByaXZhdGUgdGhlbWVNYW5hZ2VyOiBUaGVtZU1hbmFnZXI7XG4gIHByaXZhdGUgb25UaGVtZUNoYW5nZWQ/OiAoKSA9PiB2b2lkO1xuXG4gIGNvbnN0cnVjdG9yKHRoZW1lTWFuYWdlcjogVGhlbWVNYW5hZ2VyLCBvblRoZW1lQ2hhbmdlZD86ICgpID0+IHZvaWQpIHtcbiAgICB0aGlzLnRoZW1lTWFuYWdlciA9IHRoZW1lTWFuYWdlcjtcbiAgICB0aGlzLm9uVGhlbWVDaGFuZ2VkID0gb25UaGVtZUNoYW5nZWQ7XG4gIH1cblxuICAvLyDorr7nva7kuLvpopjpgInmi6nlmahcbiAgc2V0dXBUaGVtZVNlbGVjdG9yKCk6IHZvaWQge1xuICAgIGNvbnN0IHRoZW1lT3B0aW9uc0NvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy50aGVtZS1vcHRpb25zJykgYXMgSFRNTEVsZW1lbnQ7XG4gICAgaWYgKCF0aGVtZU9wdGlvbnNDb250YWluZXIpIHJldHVybjtcblxuICAgIC8vIOa4heepuueOsOacieWGheWuuVxuICAgIHRoZW1lT3B0aW9uc0NvbnRhaW5lci5pbm5lckhUTUwgPSAnJztcblxuICAgIC8vIOiOt+WPluaJgOaciem7mOiupOS4u+mimFxuICAgIGNvbnN0IHRoZW1lcyA9IHRoaXMudGhlbWVNYW5hZ2VyLmdldFRoZW1lcygpO1xuXG4gICAgLy8g5Li65q+P5Liq5Li76aKY5Yib5bu66YCJ5oup5oyJ6ZKuXG4gICAgT2JqZWN0LnZhbHVlcyh0aGVtZXMpLmZvckVhY2godGhlbWUgPT4ge1xuICAgICAgY29uc3QgdGhlbWVCdXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgIHRoZW1lQnV0dG9uLmNsYXNzTmFtZSA9ICd0aGVtZS1vcHRpb24nO1xuICAgICAgdGhlbWVCdXR0b24uc3R5bGUuY3NzVGV4dCA9IGBcbiAgICAgICAgd2lkdGg6IGNhbGMoNTAlIC0gMC41cmVtKTtcbiAgICAgICAgYXNwZWN0LXJhdGlvOiAxLzE7XG4gICAgICAgIGJvcmRlci1yYWRpdXM6IDhweDtcbiAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogJHt0aGVtZS5jb2xvcnMucHJpbWFyeX07XG4gICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAgICAgIGp1c3RpZnktY29udGVudDogY2VudGVyO1xuICAgICAgICBjdXJzb3I6IHBvaW50ZXI7XG4gICAgICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgICAgICAgb3ZlcmZsb3c6IGhpZGRlbjtcbiAgICAgICAgYm94LXNoYWRvdzogMCAycHggOHB4IHJnYmEoMCwwLDAsMC4xKTtcbiAgICAgIGA7XG5cbiAgICAgIC8vIOa3u+WKoOS4u+mimOmihOiniFxuICAgICAgY29uc3QgcHJldmlld0VsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICBwcmV2aWV3RWwuc3R5bGUuY3NzVGV4dCA9IGBcbiAgICAgICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgICAgICB0b3A6IDA7XG4gICAgICAgIGxlZnQ6IDA7XG4gICAgICAgIHdpZHRoOiAxMDAlO1xuICAgICAgICBoZWlnaHQ6IDEwMCU7XG4gICAgICAgIGJhY2tncm91bmQ6IGxpbmVhci1ncmFkaWVudCgxMzVkZWcsICR7dGhlbWUuY29sb3JzLmdyYWRpZW50U3RhcnR9LCAke3RoZW1lLmNvbG9ycy5ncmFkaWVudEVuZH0pO1xuICAgICAgYDtcblxuICAgICAgLy8g5re75Yqg5rCU5rOh6aKE6KeIXG4gICAgICBjb25zdCBidWJibGVQcmV2aWV3ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICBidWJibGVQcmV2aWV3LnN0eWxlLmNzc1RleHQgPSBgXG4gICAgICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgICAgICAgd2lkdGg6IDcwJTtcbiAgICAgICAgaGVpZ2h0OiA2MCU7XG4gICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gICAgICAgIGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjtcbiAgICAgICAgei1pbmRleDogMTtcbiAgICAgIGA7XG5cbiAgICAgIGNvbnN0IHRoZW1CdWJibGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgIHRoZW1CdWJibGUuc3R5bGUuY3NzVGV4dCA9IGBcbiAgICAgICAgYWxpZ24tc2VsZjogZmxleC1zdGFydDtcbiAgICAgICAgd2lkdGg6IDYwJTtcbiAgICAgICAgaGVpZ2h0OiA0MCU7XG4gICAgICAgIGJhY2tncm91bmQtY29sb3I6ICR7dGhlbWUuY29sb3JzLmJ1YmJsZVRoZW1CZ307XG4gICAgICAgIGJvcmRlci1yYWRpdXM6IDhweDtcbiAgICAgIGA7XG5cbiAgICAgIGNvbnN0IG1lQnViYmxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICBtZUJ1YmJsZS5zdHlsZS5jc3NUZXh0ID0gYFxuICAgICAgICBhbGlnbi1zZWxmOiBmbGV4LWVuZDtcbiAgICAgICAgd2lkdGg6IDYwJTtcbiAgICAgICAgaGVpZ2h0OiA0MCU7XG4gICAgICAgIGJhY2tncm91bmQtY29sb3I6ICR7dGhlbWUuY29sb3JzLmJ1YmJsZU1lQmd9O1xuICAgICAgICBib3JkZXItcmFkaXVzOiA4cHg7XG4gICAgICBgO1xuXG4gICAgICBidWJibGVQcmV2aWV3LmFwcGVuZENoaWxkKHRoZW1CdWJibGUpO1xuICAgICAgYnViYmxlUHJldmlldy5hcHBlbmRDaGlsZChtZUJ1YmJsZSk7XG5cbiAgICAgIC8vIOa3u+WKoOS4u+mimOWQjeensFxuICAgICAgY29uc3QgbmFtZUVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICBuYW1lRWwudGV4dENvbnRlbnQgPSB0aGVtZS5kaXNwbGF5TmFtZTtcbiAgICAgIG5hbWVFbC5zdHlsZS5jc3NUZXh0ID0gYFxuICAgICAgICBwb3NpdGlvbjogcmVsYXRpdmU7XG4gICAgICAgIGNvbG9yOiB3aGl0ZTtcbiAgICAgICAgZm9udC1zaXplOiAwLjhyZW07XG4gICAgICAgIGZvbnQtd2VpZ2h0OiA1MDA7XG4gICAgICAgIG1hcmdpbi10b3A6IDVweDtcbiAgICAgICAgdGV4dC1zaGFkb3c6IDAgMXB4IDJweCByZ2JhKDAsMCwwLDAuMyk7XG4gICAgICAgIHotaW5kZXg6IDE7XG4gICAgICBgO1xuXG4gICAgICB0aGVtZUJ1dHRvbi5hcHBlbmRDaGlsZChwcmV2aWV3RWwpO1xuICAgICAgdGhlbWVCdXR0b24uYXBwZW5kQ2hpbGQoYnViYmxlUHJldmlldyk7XG4gICAgICB0aGVtZUJ1dHRvbi5hcHBlbmRDaGlsZChuYW1lRWwpO1xuXG4gICAgICAvLyDmt7vliqDngrnlh7vkuovku7ZcbiAgICAgIHRoZW1lQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICB0aGlzLnRoZW1lTWFuYWdlci5zd2l0Y2hUaGVtZSh0aGVtZS5uYW1lKTtcbiAgICAgICAgLy8g6YCa55+l5Li76aKY5bey5pu05pS5XG4gICAgICAgIGlmICh0aGlzLm9uVGhlbWVDaGFuZ2VkKSB7XG4gICAgICAgICAgdGhpcy5vblRoZW1lQ2hhbmdlZCgpO1xuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgdGhlbWVPcHRpb25zQ29udGFpbmVyLmFwcGVuZENoaWxkKHRoZW1lQnV0dG9uKTtcbiAgICB9KTtcblxuICAgIC8vIOa3u+WKoOiHquWumuS5ieS4u+mimOaMiemSrlxuICAgIHRoaXMuYWRkQ3VzdG9tVGhlbWVCdXR0b24odGhlbWVPcHRpb25zQ29udGFpbmVyKTtcbiAgfVxuXG4gIC8vIOa3u+WKoOiHquWumuS5ieS4u+mimOaMiemSrlxuICBwcml2YXRlIGFkZEN1c3RvbVRoZW1lQnV0dG9uKGNvbnRhaW5lcjogSFRNTEVsZW1lbnQpOiB2b2lkIHtcbiAgICBjb25zdCBjdXN0b21CdXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICBjdXN0b21CdXR0b24uY2xhc3NOYW1lID0gJ3RoZW1lLW9wdGlvbiBjdXN0b20tdGhlbWUtb3B0aW9uJztcbiAgICBjdXN0b21CdXR0b24uc3R5bGUuY3NzVGV4dCA9IGBcbiAgICAgIHdpZHRoOiBjYWxjKDUwJSAtIDAuNXJlbSk7XG4gICAgICBhc3BlY3QtcmF0aW86IDEvMTtcbiAgICAgIGJvcmRlci1yYWRpdXM6IDhweDtcbiAgICAgIGJhY2tncm91bmQ6IGxpbmVhci1ncmFkaWVudCgxMzVkZWcsICM2NjdlZWEgMCUsICM3NjRiYTIgMTAwJSk7XG4gICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcbiAgICAgIGN1cnNvcjogcG9pbnRlcjtcbiAgICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgICAgIG92ZXJmbG93OiBoaWRkZW47XG4gICAgICBib3gtc2hhZG93OiAwIDJweCA4cHggcmdiYSgwLDAsMCwwLjEpO1xuICAgIGA7XG5cbiAgICBjb25zdCBpY29uRWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICBpY29uRWwuaW5uZXJIVE1MID0gJ+KcqCc7XG4gICAgaWNvbkVsLnN0eWxlLmNzc1RleHQgPSBgXG4gICAgICBmb250LXNpemU6IDJyZW07XG4gICAgICBtYXJnaW4tYm90dG9tOiA1cHg7XG4gICAgYDtcblxuICAgIGNvbnN0IG5hbWVFbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIG5hbWVFbC50ZXh0Q29udGVudCA9ICfoh6rlrprkuYnkuLvpopgnO1xuICAgIG5hbWVFbC5zdHlsZS5jc3NUZXh0ID0gYFxuICAgICAgY29sb3I6IHdoaXRlO1xuICAgICAgZm9udC1zaXplOiAwLjhyZW07XG4gICAgICBmb250LXdlaWdodDogNTAwO1xuICAgICAgdGV4dC1zaGFkb3c6IDAgMXB4IDJweCByZ2JhKDAsMCwwLDAuMyk7XG4gICAgYDtcblxuICAgIGN1c3RvbUJ1dHRvbi5hcHBlbmRDaGlsZChpY29uRWwpO1xuICAgIGN1c3RvbUJ1dHRvbi5hcHBlbmRDaGlsZChuYW1lRWwpO1xuXG4gICAgY3VzdG9tQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgdGhpcy5vcGVuVGhlbWVFZGl0b3IoKTtcbiAgICB9KTtcblxuICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZChjdXN0b21CdXR0b24pO1xuICB9XG5cbiAgLy8g5omT5byA5Li76aKY57yW6L6R5ZmoXG4gIG9wZW5UaGVtZUVkaXRvcigpOiB2b2lkIHtcbiAgICBjb25zdCBtb2RhbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0aGVtZS1lZGl0b3ItbW9kYWwnKSBhcyBIVE1MRWxlbWVudDtcbiAgICBpZiAoIW1vZGFsKSByZXR1cm47XG5cbiAgICAvLyDojrflj5blvZPliY3kuLvpopjlubbloavlhYXnvJbovpHlmahcbiAgICBjb25zdCBjdXJyZW50VGhlbWUgPSB0aGlzLnRoZW1lTWFuYWdlci5nZXRDdXJyZW50VGhlbWUoKTtcbiAgICB0aGlzLmZpbGxUaGVtZUVkaXRvcihjdXJyZW50VGhlbWUpO1xuXG4gICAgLy8g5pi+56S65qih5oCB5qGGXG4gICAgbW9kYWwuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XG4gIH1cblxuICAvLyDlhbPpl63kuLvpopjnvJbovpHlmahcbiAgY2xvc2VUaGVtZUVkaXRvcigpOiB2b2lkIHtcbiAgICBjb25zdCBtb2RhbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0aGVtZS1lZGl0b3ItbW9kYWwnKSBhcyBIVE1MRWxlbWVudDtcbiAgICBpZiAobW9kYWwpIHtcbiAgICAgIG1vZGFsLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgfVxuICB9XG5cbiAgLy8g5aGr5YWF5Li76aKY57yW6L6R5ZmoXG4gIHByaXZhdGUgZmlsbFRoZW1lRWRpdG9yKHRoZW1lOiBUaGVtZSk6IHZvaWQge1xuICAgIC8vIOiOt+WPluaJgOaciei+k+WFpeWFg+e0oFxuICAgIGNvbnN0IG5hbWVJbnB1dCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0aGVtZS1uYW1lLWlucHV0JykgYXMgSFRNTElucHV0RWxlbWVudDtcbiAgICBjb25zdCBwaG9uZUZyYW1lQ29sb3IgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncGhvbmUtZnJhbWUtY29sb3InKSBhcyBIVE1MSW5wdXRFbGVtZW50O1xuICAgIGNvbnN0IHByaW1hcnlDb2xvciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwcmltYXJ5LWNvbG9yJykgYXMgSFRNTElucHV0RWxlbWVudDtcbiAgICBjb25zdCBsaWdodENvbG9yID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xpZ2h0LWNvbG9yJykgYXMgSFRNTElucHV0RWxlbWVudDtcbiAgICBjb25zdCB1bHRyYUxpZ2h0Q29sb3IgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndWx0cmEtbGlnaHQtY29sb3InKSBhcyBIVE1MSW5wdXRFbGVtZW50O1xuICAgIGNvbnN0IGRlZXBDb2xvciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkZWVwLWNvbG9yJykgYXMgSFRNTElucHV0RWxlbWVudDtcbiAgICBjb25zdCB0ZXh0UHJpbWFyeUNvbG9yID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3RleHQtcHJpbWFyeS1jb2xvcicpIGFzIEhUTUxJbnB1dEVsZW1lbnQ7XG4gICAgY29uc3QgdGV4dFNlY29uZGFyeUNvbG9yID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3RleHQtc2Vjb25kYXJ5LWNvbG9yJykgYXMgSFRNTElucHV0RWxlbWVudDtcbiAgICBjb25zdCBtZUJ1YmJsZUJhY2tncm91bmRDb2xvciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdidWJibGUtbWUtY29sb3InKSBhcyBIVE1MSW5wdXRFbGVtZW50O1xuICAgIGNvbnN0IG1lQnViYmxlVGV4dENvbG9yID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2J1YmJsZS1tZS10ZXh0LWNvbG9yJykgYXMgSFRNTElucHV0RWxlbWVudDtcbiAgICBjb25zdCB0aGVtQnViYmxlQmFja2dyb3VuZENvbG9yID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2J1YmJsZS10aGVtLWNvbG9yJykgYXMgSFRNTElucHV0RWxlbWVudDtcbiAgICBjb25zdCB0aGVtQnViYmxlVGV4dENvbG9yID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2J1YmJsZS10aGVtLXRleHQtY29sb3InKSBhcyBIVE1MSW5wdXRFbGVtZW50O1xuICAgIGNvbnN0IGJhY2tncm91bmRQcmltYXJ5Q29sb3IgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndWx0cmEtbGlnaHQtY29sb3InKSBhcyBIVE1MSW5wdXRFbGVtZW50O1xuICAgIGNvbnN0IGJhY2tncm91bmRTZWNvbmRhcnlDb2xvciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkZWVwLWNvbG9yJykgYXMgSFRNTElucHV0RWxlbWVudDtcbiAgICBjb25zdCBib3JkZXJDb2xvciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdib3JkZXItY29sb3InKSBhcyBIVE1MSW5wdXRFbGVtZW50O1xuICAgIGNvbnN0IHNoYWRvd0NvbG9yID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NoYWRvdy1jb2xvcicpIGFzIEhUTUxJbnB1dEVsZW1lbnQ7XG4gICAgY29uc3Qgc3RhdHVzQmFyQ29sb3IgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc3RhdHVzLWJhci1jb2xvcicpIGFzIEhUTUxJbnB1dEVsZW1lbnQ7XG4gICAgY29uc3QgZHluYW1pY0lzbGFuZENvbG9yID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2R5bmFtaWMtaXNsYW5kLWNvbG9yJykgYXMgSFRNTElucHV0RWxlbWVudDtcbiAgICBjb25zdCBkYXJrTW9kZVRvZ2dsZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkYXJrLW1vZGUtdG9nZ2xlJykgYXMgSFRNTElucHV0RWxlbWVudDtcbiAgICBjb25zdCBzaW5nbGVDb2xvckljb25zVG9nZ2xlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NpbmdsZS1jb2xvci1pY29ucy10b2dnbGUnKSBhcyBIVE1MSW5wdXRFbGVtZW50O1xuXG4gICAgLy8g5aGr5YWF5Z+65pys6aKc6ImyXG4gICAgaWYgKG5hbWVJbnB1dCkgbmFtZUlucHV0LnZhbHVlID0gdGhlbWUubmFtZSA9PT0gJ2N1c3RvbScgPyAn5oiR55qE6Ieq5a6a5LmJ5Li76aKYJyA6IGDoh6rlrprkuYkgJHt0aGVtZS5kaXNwbGF5TmFtZX1gO1xuICAgIGlmIChwaG9uZUZyYW1lQ29sb3IpIHBob25lRnJhbWVDb2xvci52YWx1ZSA9IHRoZW1lLmNvbG9ycy5waG9uZUZyYW1lO1xuICAgIGlmIChwcmltYXJ5Q29sb3IpIHByaW1hcnlDb2xvci52YWx1ZSA9IHRoZW1lLmNvbG9ycy5wcmltYXJ5O1xuICAgIGlmIChsaWdodENvbG9yKSBsaWdodENvbG9yLnZhbHVlID0gdGhlbWUuY29sb3JzLmxpZ2h0O1xuICAgIGlmICh1bHRyYUxpZ2h0Q29sb3IpIHVsdHJhTGlnaHRDb2xvci52YWx1ZSA9IHRoZW1lLmNvbG9ycy51bHRyYUxpZ2h0O1xuICAgIGlmIChkZWVwQ29sb3IpIGRlZXBDb2xvci52YWx1ZSA9IHRoZW1lLmNvbG9ycy5kZWVwO1xuICAgIGlmICh0ZXh0UHJpbWFyeUNvbG9yKSB0ZXh0UHJpbWFyeUNvbG9yLnZhbHVlID0gdGhlbWUuY29sb3JzLnRleHRQcmltYXJ5O1xuICAgIGlmICh0ZXh0U2Vjb25kYXJ5Q29sb3IpIHRleHRTZWNvbmRhcnlDb2xvci52YWx1ZSA9IHRoZW1lLmNvbG9ycy50ZXh0U2Vjb25kYXJ5O1xuXG4gICAgLy8g5aGr5YWF5rCU5rOh6aKc6ImyXG4gICAgaWYgKG1lQnViYmxlQmFja2dyb3VuZENvbG9yKSBtZUJ1YmJsZUJhY2tncm91bmRDb2xvci52YWx1ZSA9IHRoZW1lLmNvbG9ycy5idWJibGVNZUJnO1xuICAgIGlmIChtZUJ1YmJsZVRleHRDb2xvcikgbWVCdWJibGVUZXh0Q29sb3IudmFsdWUgPSB0aGVtZS5jb2xvcnMuYnViYmxlTWVUZXh0O1xuICAgIGlmICh0aGVtQnViYmxlQmFja2dyb3VuZENvbG9yKSB0aGVtQnViYmxlQmFja2dyb3VuZENvbG9yLnZhbHVlID0gdGhlbWUuY29sb3JzLmJ1YmJsZVRoZW1CZztcbiAgICBpZiAodGhlbUJ1YmJsZVRleHRDb2xvcikgdGhlbUJ1YmJsZVRleHRDb2xvci52YWx1ZSA9IHRoZW1lLmNvbG9ycy5idWJibGVUaGVtVGV4dDtcblxuICAgIC8vIOWhq+WFheiDjOaZr+minOiJsiAtIOS9v+eUqOW3suacieeahOminOiJsuaOp+S7tlxuICAgIC8vIOW6lOeUqOiDjOaZr+iJsuWSjOWNoeeJh+iDjOaZr+iJsuW3sue7j+WcqOWfuuacrOminOiJsuS4reiuvue9ruS6hlxuXG4gICAgLy8g5aGr5YWF5paw5aKe6aKc6Imy5o6n5Lu2XG4gICAgaWYgKHN0YXR1c0JhckNvbG9yKSBzdGF0dXNCYXJDb2xvci52YWx1ZSA9IHRoZW1lLmNvbG9ycy5zdGF0dXNCYXJDb2xvcjtcbiAgICBpZiAoZHluYW1pY0lzbGFuZENvbG9yKSBkeW5hbWljSXNsYW5kQ29sb3IudmFsdWUgPSB0aGVtZS5jb2xvcnMuZHluYW1pY0lzbGFuZENvbG9yO1xuICAgIGlmIChib3JkZXJDb2xvcikgYm9yZGVyQ29sb3IudmFsdWUgPSB0aGVtZS5jb2xvcnMuYm9yZGVyQ29sb3I7XG4gICAgaWYgKHNoYWRvd0NvbG9yKSBzaGFkb3dDb2xvci52YWx1ZSA9IHRoZW1lLmNvbG9ycy5zaGFkb3dDb2xvcjtcblxuICAgIGlmIChkYXJrTW9kZVRvZ2dsZSkgZGFya01vZGVUb2dnbGUuY2hlY2tlZCA9IHRoZW1lLmNvbG9ycy5pc0RhcmtNb2RlO1xuXG4gICAgLy8g5aGr5YWF5Y2V5LiA6aKc6Imy5Zu+5qCH6YCJ6aG5XG4gICAgaWYgKHNpbmdsZUNvbG9ySWNvbnNUb2dnbGUpIHNpbmdsZUNvbG9ySWNvbnNUb2dnbGUuY2hlY2tlZCA9IHRoZW1lLmNvbG9ycy51c2VTaW5nbGVDb2xvckljb25zIHx8IGZhbHNlO1xuICB9XG5cbiAgLy8g6YeN572u5Li76aKY57yW6L6R5ZmoXG4gIHJlc2V0VGhlbWVFZGl0b3IoKTogdm9pZCB7XG4gICAgLy8g5L2/55So6JOd6Imy5Li76aKY6YeN572u57yW6L6R5ZmoXG4gICAgY29uc3QgYmx1ZVRoZW1lID0gdGhpcy50aGVtZU1hbmFnZXIuZ2V0VGhlbWVzKCkuYmx1ZTtcbiAgICB0aGlzLmZpbGxUaGVtZUVkaXRvcihibHVlVGhlbWUpO1xuICB9XG5cbiAgLy8g5L+d5a2Y6Ieq5a6a5LmJ5Li76aKYXG4gIHNhdmVDdXN0b21UaGVtZSgpOiB2b2lkIHtcbiAgICBjb25zdCBuYW1lSW5wdXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndGhlbWUtbmFtZS1pbnB1dCcpIGFzIEhUTUxJbnB1dEVsZW1lbnQ7XG4gICAgY29uc3QgcGhvbmVGcmFtZUNvbG9yID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Bob25lLWZyYW1lLWNvbG9yJykgYXMgSFRNTElucHV0RWxlbWVudDtcbiAgICBjb25zdCBwcmltYXJ5Q29sb3IgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncHJpbWFyeS1jb2xvcicpIGFzIEhUTUxJbnB1dEVsZW1lbnQ7XG4gICAgY29uc3QgbGlnaHRDb2xvciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsaWdodC1jb2xvcicpIGFzIEhUTUxJbnB1dEVsZW1lbnQ7XG4gICAgY29uc3QgdWx0cmFMaWdodENvbG9yID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3VsdHJhLWxpZ2h0LWNvbG9yJykgYXMgSFRNTElucHV0RWxlbWVudDtcbiAgICBjb25zdCBkZWVwQ29sb3IgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZGVlcC1jb2xvcicpIGFzIEhUTUxJbnB1dEVsZW1lbnQ7XG4gICAgY29uc3QgdGV4dFByaW1hcnlDb2xvciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0ZXh0LXByaW1hcnktY29sb3InKSBhcyBIVE1MSW5wdXRFbGVtZW50O1xuICAgIGNvbnN0IHRleHRTZWNvbmRhcnlDb2xvciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0ZXh0LXNlY29uZGFyeS1jb2xvcicpIGFzIEhUTUxJbnB1dEVsZW1lbnQ7XG4gICAgY29uc3QgbWVCdWJibGVCYWNrZ3JvdW5kQ29sb3IgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYnViYmxlLW1lLWNvbG9yJykgYXMgSFRNTElucHV0RWxlbWVudDtcbiAgICBjb25zdCBtZUJ1YmJsZVRleHRDb2xvciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdidWJibGUtbWUtdGV4dC1jb2xvcicpIGFzIEhUTUxJbnB1dEVsZW1lbnQ7XG4gICAgY29uc3QgdGhlbUJ1YmJsZUJhY2tncm91bmRDb2xvciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdidWJibGUtdGhlbS1jb2xvcicpIGFzIEhUTUxJbnB1dEVsZW1lbnQ7XG4gICAgY29uc3QgdGhlbUJ1YmJsZVRleHRDb2xvciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdidWJibGUtdGhlbS10ZXh0LWNvbG9yJykgYXMgSFRNTElucHV0RWxlbWVudDtcbiAgICBjb25zdCBzdGF0dXNCYXJDb2xvciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzdGF0dXMtYmFyLWNvbG9yJykgYXMgSFRNTElucHV0RWxlbWVudDtcbiAgICBjb25zdCBkeW5hbWljSXNsYW5kQ29sb3IgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZHluYW1pYy1pc2xhbmQtY29sb3InKSBhcyBIVE1MSW5wdXRFbGVtZW50O1xuICAgIGNvbnN0IGJvcmRlckNvbG9yID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2JvcmRlci1jb2xvcicpIGFzIEhUTUxJbnB1dEVsZW1lbnQ7XG4gICAgY29uc3Qgc2hhZG93Q29sb3IgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2hhZG93LWNvbG9yJykgYXMgSFRNTElucHV0RWxlbWVudDtcbiAgICBjb25zdCBkYXJrTW9kZVRvZ2dsZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkYXJrLW1vZGUtdG9nZ2xlJykgYXMgSFRNTElucHV0RWxlbWVudDtcbiAgICBjb25zdCBzaW5nbGVDb2xvckljb25zVG9nZ2xlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NpbmdsZS1jb2xvci1pY29ucy10b2dnbGUnKSBhcyBIVE1MSW5wdXRFbGVtZW50O1xuXG4gICAgLy8g5o+Q5Y+W6aKc6Imy5YC8XG4gICAgY29uc3QgcGhvbmVGcmFtZSA9IHBob25lRnJhbWVDb2xvcj8udmFsdWUgfHwgJyMwMDAwMDAnO1xuICAgIGNvbnN0IHByaW1hcnkgPSBwcmltYXJ5Q29sb3I/LnZhbHVlIHx8ICcjMDA3QUZGJztcbiAgICBjb25zdCBsaWdodCA9IGxpZ2h0Q29sb3I/LnZhbHVlIHx8ICcjRTNGMkZEJztcbiAgICBjb25zdCB1bHRyYUxpZ2h0ID0gdWx0cmFMaWdodENvbG9yPy52YWx1ZSB8fCAnI0Y4RkJGRic7XG4gICAgY29uc3QgZGVlcCA9IGRlZXBDb2xvcj8udmFsdWUgfHwgJyMwMDU2Q0MnO1xuICAgIGNvbnN0IHRleHRQcmltYXJ5ID0gdGV4dFByaW1hcnlDb2xvcj8udmFsdWUgfHwgJyMwMDAwMDAnO1xuICAgIGNvbnN0IHRleHRTZWNvbmRhcnkgPSB0ZXh0U2Vjb25kYXJ5Q29sb3I/LnZhbHVlIHx8ICcjNjY2NjY2JztcbiAgICBjb25zdCBidWJibGVNZUJnID0gbWVCdWJibGVCYWNrZ3JvdW5kQ29sb3I/LnZhbHVlIHx8ICcjMDA3QUZGJztcbiAgICBjb25zdCBidWJibGVNZVRleHQgPSBtZUJ1YmJsZVRleHRDb2xvcj8udmFsdWUgfHwgJyNGRkZGRkYnO1xuICAgIGNvbnN0IGJ1YmJsZVRoZW1CZyA9IHRoZW1CdWJibGVCYWNrZ3JvdW5kQ29sb3I/LnZhbHVlIHx8ICcjRjBGMEYwJztcbiAgICBjb25zdCBidWJibGVUaGVtVGV4dCA9IHRoZW1CdWJibGVUZXh0Q29sb3I/LnZhbHVlIHx8ICcjMDAwMDAwJztcbiAgICBjb25zdCBhcHBCZ0NvbG9yID0gdWx0cmFMaWdodDtcbiAgICBjb25zdCBzZXR0aW5nc0JnQ29sb3IgPSB1bHRyYUxpZ2h0O1xuICAgIGNvbnN0IHNldHRpbmdzQ2FyZEJnQ29sb3IgPSAnI0ZGRkZGRic7XG4gICAgY29uc3Qgc3RhdHVzQmFyID0gc3RhdHVzQmFyQ29sb3I/LnZhbHVlIHx8ICcjMDAwMDAwJztcbiAgICBjb25zdCBkeW5hbWljSXNsYW5kID0gZHluYW1pY0lzbGFuZENvbG9yPy52YWx1ZSB8fCAnIzAwMDAwMCc7XG4gICAgY29uc3QgYm9yZGVyID0gYm9yZGVyQ29sb3I/LnZhbHVlIHx8ICcjRTBFMEUwJztcbiAgICBjb25zdCBzaGFkb3cgPSBzaGFkb3dDb2xvcj8udmFsdWUgfHwgJyMwMDAwMDAnO1xuICAgIGNvbnN0IGlzRGFya01vZGUgPSBkYXJrTW9kZVRvZ2dsZT8uY2hlY2tlZCB8fCBmYWxzZTtcbiAgICBjb25zdCB1c2VTaW5nbGVDb2xvckljb25zID0gc2luZ2xlQ29sb3JJY29uc1RvZ2dsZT8uY2hlY2tlZCB8fCBmYWxzZTtcblxuICAgIC8vIOWIm+W7uuiHquWumuS5ieS4u+mimFxuICAgIGNvbnN0IGN1c3RvbVRoZW1lID0gdGhpcy5jcmVhdGVDdXN0b21UaGVtZSh7XG4gICAgICBuYW1lOiBuYW1lSW5wdXQ/LnZhbHVlIHx8ICfoh6rlrprkuYnkuLvpopgnLFxuICAgICAgcGhvbmVGcmFtZSxcbiAgICAgIHByaW1hcnksXG4gICAgICBsaWdodCxcbiAgICAgIHVsdHJhTGlnaHQsXG4gICAgICBkZWVwLFxuICAgICAgdGV4dFByaW1hcnksXG4gICAgICB0ZXh0U2Vjb25kYXJ5LFxuICAgICAgYnViYmxlTWVCZyxcbiAgICAgIGJ1YmJsZU1lVGV4dCxcbiAgICAgIGJ1YmJsZVRoZW1CZyxcbiAgICAgIGJ1YmJsZVRoZW1UZXh0LFxuICAgICAgYXBwQmdDb2xvcixcbiAgICAgIHNldHRpbmdzQmdDb2xvcixcbiAgICAgIHNldHRpbmdzQ2FyZEJnQ29sb3IsXG4gICAgICBzdGF0dXNCYXIsXG4gICAgICBkeW5hbWljSXNsYW5kLFxuICAgICAgYm9yZGVyLFxuICAgICAgc2hhZG93LFxuICAgICAgaXNEYXJrTW9kZSxcbiAgICAgIHVzZVNpbmdsZUNvbG9ySWNvbnMsXG4gICAgfSk7XG5cbiAgICAvLyDkv53lrZjlubblupTnlKjkuLvpophcbiAgICB0aGlzLnRoZW1lTWFuYWdlci5zYXZlQ3VzdG9tVGhlbWUoY3VzdG9tVGhlbWUpO1xuICAgIHRoaXMudGhlbWVNYW5hZ2VyLnN3aXRjaFRoZW1lKCdjdXN0b20nKTtcblxuICAgIC8vIOWFs+mXree8lui+keWZqFxuICAgIHRoaXMuY2xvc2VUaGVtZUVkaXRvcigpO1xuXG4gICAgLy8g6YCa55+l5Li76aKY5bey5pu05pS5XG4gICAgaWYgKHRoaXMub25UaGVtZUNoYW5nZWQpIHtcbiAgICAgIHRoaXMub25UaGVtZUNoYW5nZWQoKTtcbiAgICB9XG4gIH1cblxuICAvLyDliJvlu7roh6rlrprkuYnkuLvpophcbiAgcHJpdmF0ZSBjcmVhdGVDdXN0b21UaGVtZShwYXJhbXM6IHtcbiAgICBuYW1lOiBzdHJpbmc7XG4gICAgcGhvbmVGcmFtZTogc3RyaW5nO1xuICAgIHByaW1hcnk6IHN0cmluZztcbiAgICBsaWdodDogc3RyaW5nO1xuICAgIHVsdHJhTGlnaHQ6IHN0cmluZztcbiAgICBkZWVwOiBzdHJpbmc7XG4gICAgdGV4dFByaW1hcnk6IHN0cmluZztcbiAgICB0ZXh0U2Vjb25kYXJ5OiBzdHJpbmc7XG4gICAgYnViYmxlTWVCZzogc3RyaW5nO1xuICAgIGJ1YmJsZU1lVGV4dDogc3RyaW5nO1xuICAgIGJ1YmJsZVRoZW1CZzogc3RyaW5nO1xuICAgIGJ1YmJsZVRoZW1UZXh0OiBzdHJpbmc7XG4gICAgYXBwQmdDb2xvcjogc3RyaW5nO1xuICAgIHNldHRpbmdzQmdDb2xvcjogc3RyaW5nO1xuICAgIHNldHRpbmdzQ2FyZEJnQ29sb3I6IHN0cmluZztcbiAgICBzdGF0dXNCYXI6IHN0cmluZztcbiAgICBkeW5hbWljSXNsYW5kOiBzdHJpbmc7XG4gICAgYm9yZGVyOiBzdHJpbmc7XG4gICAgc2hhZG93OiBzdHJpbmc7XG4gICAgaXNEYXJrTW9kZTogYm9vbGVhbjtcbiAgICB1c2VTaW5nbGVDb2xvckljb25zOiBib29sZWFuO1xuICB9KTogVGhlbWUge1xuICAgIGNvbnN0IHtcbiAgICAgIG5hbWUsXG4gICAgICBwaG9uZUZyYW1lLFxuICAgICAgcHJpbWFyeSxcbiAgICAgIGxpZ2h0LFxuICAgICAgdWx0cmFMaWdodCxcbiAgICAgIGRlZXAsXG4gICAgICB0ZXh0UHJpbWFyeSxcbiAgICAgIHRleHRTZWNvbmRhcnksXG4gICAgICBidWJibGVNZUJnLFxuICAgICAgYnViYmxlTWVUZXh0LFxuICAgICAgYnViYmxlVGhlbUJnLFxuICAgICAgYnViYmxlVGhlbVRleHQsXG4gICAgICBhcHBCZ0NvbG9yLFxuICAgICAgc2V0dGluZ3NCZ0NvbG9yLFxuICAgICAgc2V0dGluZ3NDYXJkQmdDb2xvcixcbiAgICAgIHN0YXR1c0JhcixcbiAgICAgIGR5bmFtaWNJc2xhbmQsXG4gICAgICBib3JkZXIsXG4gICAgICBzaGFkb3csXG4gICAgICBpc0RhcmtNb2RlLFxuICAgICAgdXNlU2luZ2xlQ29sb3JJY29ucyxcbiAgICB9ID0gcGFyYW1zO1xuXG4gICAgLy8g5o+Q5Y+W6Zi05b2x6aKc6Imy55qEUkdC5YiG6YePXG4gICAgY29uc3QgciA9IHBhcnNlSW50KHNoYWRvdy5zbGljZSgxLCAzKSwgMTYpO1xuICAgIGNvbnN0IGcgPSBwYXJzZUludChzaGFkb3cuc2xpY2UoMywgNSksIDE2KTtcbiAgICBjb25zdCBiID0gcGFyc2VJbnQoc2hhZG93LnNsaWNlKDUsIDcpLCAxNik7XG4gICAgY29uc3Qgc2hhZG93Q29sb3JSZ2JhID0gaXNEYXJrTW9kZSA/ICdyZ2JhKDAsIDAsIDAsIDAuNSknIDogYHJnYmEoJHtyfSwgJHtnfSwgJHtifSwgMC4zKWA7XG4gICAgY29uc3QgYnViYmxlU2hhZG93ID0gYDAgMnB4IDhweCByZ2JhKCR7cn0sICR7Z30sICR7Yn0sIDAuMTUpYDtcblxuICAgIC8vIOa4kOWPmOiJslxuICAgIGNvbnN0IGdyYWRpZW50U3RhcnQgPSB0aGlzLmxpZ2h0ZW5EYXJrZW5Db2xvcihwcmltYXJ5LCAyMCk7XG4gICAgY29uc3QgZ3JhZGllbnRFbmQgPSB0aGlzLmxpZ2h0ZW5EYXJrZW5Db2xvcihwcmltYXJ5LCAtMTApO1xuXG4gICAgLy8g5re75Yqg57y65bCR55qE5bGe5oCnXG4gICAgY29uc3Qgc29mdCA9IHRoaXMubGlnaHRlbkRhcmtlbkNvbG9yKGxpZ2h0LCAtMTApO1xuICAgIGNvbnN0IHRleHRDb2xvciA9ICcjZmZmZmZmJztcbiAgICBjb25zdCBoZWFkZXJCZyA9IGlzRGFya01vZGVcbiAgICAgID8gJ2xpbmVhci1ncmFkaWVudCgzMTVkZWcsICMzMzMzMzMgMCUsICM0NDQ0NDQgMTAwJSknXG4gICAgICA6IGBsaW5lYXItZ3JhZGllbnQoMzE1ZGVnLCAke3RoaXMubGlnaHRlbkRhcmtlbkNvbG9yKHVsdHJhTGlnaHQsIC01KX0gMCUsICR7dWx0cmFMaWdodH0gMTAwJSlgO1xuXG4gICAgLy8g5Yib5bu66Ieq5a6a5LmJ5Li76aKYXG4gICAgY29uc3QgY3VzdG9tVGhlbWU6IFRoZW1lID0ge1xuICAgICAgbmFtZTogJ2N1c3RvbScsXG4gICAgICBkaXNwbGF5TmFtZTogbmFtZSxcbiAgICAgIGNvbG9yczoge1xuICAgICAgICBwaG9uZUZyYW1lOiBwaG9uZUZyYW1lLFxuICAgICAgICBwaG9uZUZyYW1lR3JhZGllbnQ6IFtcbiAgICAgICAgICB0aGlzLmxpZ2h0ZW5EYXJrZW5Db2xvcihwaG9uZUZyYW1lLCAtNDApLFxuICAgICAgICAgIHBob25lRnJhbWUsXG4gICAgICAgICAgdGhpcy5saWdodGVuRGFya2VuQ29sb3IocGhvbmVGcmFtZSwgMjApLFxuICAgICAgICAgIHRoaXMubGlnaHRlbkRhcmtlbkNvbG9yKHBob25lRnJhbWUsIC00MCksXG4gICAgICAgIF0sXG4gICAgICAgIHByaW1hcnk6IHByaW1hcnksXG4gICAgICAgIGxpZ2h0OiBsaWdodCxcbiAgICAgICAgdWx0cmFMaWdodDogdWx0cmFMaWdodCxcbiAgICAgICAgc29mdDogc29mdCxcbiAgICAgICAgZGVlcDogZGVlcCxcbiAgICAgICAgdGV4dFByaW1hcnk6IHRleHRQcmltYXJ5LFxuICAgICAgICB0ZXh0U2Vjb25kYXJ5OiB0ZXh0U2Vjb25kYXJ5LFxuICAgICAgICB0ZXh0Q29sb3I6IHRleHRDb2xvcixcbiAgICAgICAgYnViYmxlTWVCZyxcbiAgICAgICAgYnViYmxlTWVUZXh0LFxuICAgICAgICBidWJibGVUaGVtQmcsXG4gICAgICAgIGJ1YmJsZVRoZW1UZXh0LFxuICAgICAgICBoZWFkZXJCZyxcbiAgICAgICAgYXBwQmdDb2xvcixcbiAgICAgICAgc2V0dGluZ3NCZ0NvbG9yLFxuICAgICAgICBzZXR0aW5nc0NhcmRCZ0NvbG9yLFxuICAgICAgICBncmFkaWVudFN0YXJ0LFxuICAgICAgICBncmFkaWVudEVuZCxcbiAgICAgICAgc3RhdHVzQmFyQ29sb3I6IHN0YXR1c0JhcixcbiAgICAgICAgZHluYW1pY0lzbGFuZENvbG9yOiBkeW5hbWljSXNsYW5kLFxuICAgICAgICBib3JkZXJDb2xvcjogYm9yZGVyLFxuICAgICAgICBzaGFkb3dDb2xvcjogc2hhZG93LFxuICAgICAgICBzaGFkb3dDb2xvclJnYmEsXG4gICAgICAgIGJ1YmJsZVNoYWRvdyxcbiAgICAgICAgaXNEYXJrTW9kZSxcbiAgICAgICAgZGVmYXVsdFdhbGxwYXBlcnM6IHtcbiAgICAgICAgICBjaGF0OiBpc0RhcmtNb2RlXG4gICAgICAgICAgICA/ICdodHRwczovL2dpdGd1ZC5pby9sb2xvZGVzdS9sb2xvYmFieXR1dG9yaWFsLy0vcmF3L21hc3Rlci9sb2xvZ2FtZS/ntKDmnZAvd2FsbHBhcGVyL+a3seiJsuaYn+aYn18xLmpwZydcbiAgICAgICAgICAgIDogJ2h0dHBzOi8vZ2l0Z3VkLmlvL2xvbG9kZXN1L2xvbG9iYWJ5dHV0b3JpYWwvLS9yYXcvbWFzdGVyL2xvbG9nYW1lL+e0oOadkC93YWxscGFwZXIv6JOd6ImyXzMuanBnJyxcbiAgICAgICAgICBob21lOiBpc0RhcmtNb2RlXG4gICAgICAgICAgICA/ICdodHRwczovL2dpdGd1ZC5pby9sb2xvZGVzdS9sb2xvYmFieXR1dG9yaWFsLy0vcmF3L21hc3Rlci9sb2xvZ2FtZS/ntKDmnZAvd2FsbHBhcGVyL+a3seiJsuaYn+aYn18xLmpwZydcbiAgICAgICAgICAgIDogJ2h0dHBzOi8vZ2l0Z3VkLmlvL2xvbG9kZXN1L2xvbG9iYWJ5dHV0b3JpYWwvLS9yYXcvbWFzdGVyL2xvbG9nYW1lL+e0oOadkC93YWxscGFwZXIv6JOd6ImyXzIuanBnJyxcbiAgICAgICAgICBzZXR0aW5nczogaXNEYXJrTW9kZSA/ICcjMWExYTFhJyA6ICcjZjJmN2ZkJyxcbiAgICAgICAgfSxcbiAgICAgICAgdXNlU2luZ2xlQ29sb3JJY29ucyxcbiAgICAgIH0sXG4gICAgfTtcblxuICAgIHJldHVybiBjdXN0b21UaGVtZTtcbiAgfVxuXG4gIC8vIOminOiJsuWkhOeQhuW3peWFt++8muiwg+S6ruaIluiwg+aal+minOiJslxuICBwcml2YXRlIGxpZ2h0ZW5EYXJrZW5Db2xvcihjb2w6IHN0cmluZywgYW10OiBudW1iZXIpOiBzdHJpbmcge1xuICAgIGxldCB1c2VQb3VuZCA9IGZhbHNlO1xuXG4gICAgaWYgKGNvbFswXSA9PT0gJyMnKSB7XG4gICAgICBjb2wgPSBjb2wuc2xpY2UoMSk7XG4gICAgICB1c2VQb3VuZCA9IHRydWU7XG4gICAgfVxuXG4gICAgY29uc3QgbnVtID0gcGFyc2VJbnQoY29sLCAxNik7XG5cbiAgICBsZXQgciA9IChudW0gPj4gMTYpICsgYW10O1xuICAgIGlmIChyID4gMjU1KSByID0gMjU1O1xuICAgIGVsc2UgaWYgKHIgPCAwKSByID0gMDtcblxuICAgIGxldCBiID0gKChudW0gPj4gOCkgJiAweDAwZmYpICsgYW10O1xuICAgIGlmIChiID4gMjU1KSBiID0gMjU1O1xuICAgIGVsc2UgaWYgKGIgPCAwKSBiID0gMDtcblxuICAgIGxldCBnID0gKG51bSAmIDB4MDAwMGZmKSArIGFtdDtcbiAgICBpZiAoZyA+IDI1NSkgZyA9IDI1NTtcbiAgICBlbHNlIGlmIChnIDwgMCkgZyA9IDA7XG5cbiAgICByZXR1cm4gKHVzZVBvdW5kID8gJyMnIDogJycpICsgKGcgfCAoYiA8PCA4KSB8IChyIDw8IDE2KSkudG9TdHJpbmcoMTYpO1xuICB9XG59XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/同层手机/theme-editor.ts\n")},"./src/同层手机/theme-manager.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   APP_VERSION: () => (/* binding */ APP_VERSION),\n/* harmony export */   THEMES: () => (/* binding */ THEMES),\n/* harmony export */   ThemeManager: () => (/* binding */ ThemeManager),\n/* harmony export */   WallpaperManager: () => (/* binding */ WallpaperManager)\n/* harmony export */ });\n// 当前应用版本\nconst APP_VERSION = '1.1.0';\n// 默认主题配置\nconst THEMES = {\n    blue: {\n        name: 'blue',\n        displayName: '蓝色主题',\n        colors: {\n            // 手机边框\n            phoneFrame: '#b4d0fa',\n            phoneFrameGradient: ['#4a95ed', '#98c2f5', '#accef2', '#4a95ed'],\n            // 主要颜色\n            primary: '#72adf3',\n            light: '#a8cbeb',\n            ultraLight: '#e8f4fd',\n            soft: '#b8d4f0',\n            deep: '#2c5282',\n            // 渐变色\n            gradientStart: '#98c2f5',\n            gradientEnd: '#accef2',\n            // 文字颜色\n            textColor: '#ffffff',\n            textPrimary: 'rgb(139, 162, 186)',\n            textSecondary: '#64748b',\n            // 边框和阴影\n            borderColor: '#cbd5e1',\n            bubbleShadow: '0 2px 8px rgba(74, 144, 226, 0.15)',\n            // 气泡背景\n            bubbleThemBg: '#ffffff',\n            bubbleMeBg: '#a8cbeb',\n            // 气泡文字颜色\n            bubbleThemText: '#72adf3',\n            bubbleMeText: '#ffffff',\n            // 头部背景\n            headerBg: 'linear-gradient(315deg, #eef4ff 0%, #f8faff 100%)',\n            // 新增：状态栏颜色\n            statusBarColor: '#428af2',\n            // 新增：灵动岛颜色\n            dynamicIslandColor: '#a0c4f4',\n            // 新增：应用背景色\n            appBgColor: '#ffffff',\n            // 新增：设置页面背景色\n            settingsBgColor: '#f2f2f7',\n            // 新增：设置卡片背景色\n            settingsCardBgColor: '#ffffff',\n            // 新增：阴影颜色\n            shadowColor: '#4a90e2',\n            shadowColorRgba: 'rgba(74, 144, 226, 0.3)',\n            // 新增：是否是暗色主题\n            isDarkMode: false,\n            // 新增：默认壁纸\n            defaultWallpapers: {\n                chat: 'https://gitgud.io/lolodesu/lolobabytutorial/-/raw/master/lologame/素材/wallpaper/蓝色_3.jpg', // 更新为指定的蓝色主题壁纸\n                home: 'https://gitgud.io/lolodesu/lolobabytutorial/-/raw/master/lologame/素材/wallpaper/蓝色_2.jpg', // 更新为指定的蓝色主题壁纸\n                settings: '#f2f7fd',\n            },\n            // 新增：是否使用单一颜色图标\n            useSingleColorIcons: true,\n        },\n    },\n    pink: {\n        name: 'pink',\n        displayName: '粉色主题',\n        colors: {\n            // 手机边框\n            phoneFrame: '#fad0e8',\n            phoneFrameGradient: ['#ed4a9e', '#f598c8', '#f2acce', '#ed4a9e'],\n            // 主要颜色\n            primary: '#f372ad',\n            light: '#eba8cb',\n            ultraLight: '#fde8f4',\n            soft: '#f0b8d4',\n            deep: '#822c5c',\n            // 渐变色\n            gradientStart: '#f598c8',\n            gradientEnd: '#f2acce',\n            // 文字颜色\n            textColor: '#ffffff',\n            textPrimary: 'rgb(186, 139, 162)',\n            textSecondary: '#8b647a',\n            // 边框和阴影\n            borderColor: '#e1cbd5',\n            bubbleShadow: '0 2px 8px rgba(226, 74, 144, 0.15)',\n            // 气泡背景\n            bubbleThemBg: '#ffffff',\n            bubbleMeBg: '#eba8cb',\n            // 气泡文字颜色\n            bubbleThemText: '#f372ad',\n            bubbleMeText: '#ffffff',\n            // 头部背景\n            headerBg: 'linear-gradient(315deg, #ffeeef 0%, #fff8fa 100%)',\n            // 新增：状态栏颜色\n            statusBarColor: '#ed72ad',\n            // 新增：灵动岛颜色\n            dynamicIslandColor: '#f4a0c4',\n            // 新增：应用背景色\n            appBgColor: '#ffffff',\n            // 新增：设置页面背景色\n            settingsBgColor: '#fff2f7',\n            // 新增：设置卡片背景色\n            settingsCardBgColor: '#ffffff',\n            // 新增：阴影颜色\n            shadowColor: '#e24a90',\n            shadowColorRgba: 'rgba(226, 74, 144, 0.3)',\n            // 新增：是否是暗色主题\n            isDarkMode: false,\n            // 新增：默认壁纸\n            defaultWallpapers: {\n                chat: 'https://gitgud.io/lolodesu/lolobabytutorial/-/raw/master/lologame/素材/wallpaper/粉色星星_1.jpg', // 更新为指定的粉色主题壁纸\n                home: 'https://gitgud.io/lolodesu/lolobabytutorial/-/raw/master/lologame/素材/wallpaper/粉色格子_3.jpg', // 更新为指定的粉色主题壁纸\n                settings: '#fdf2f7',\n            },\n            // 新增：是否使用单一颜色图标\n            useSingleColorIcons: true,\n        },\n    },\n    white: {\n        name: 'white',\n        displayName: '微信主题',\n        colors: {\n            // 手机边框\n            phoneFrame: '#000000',\n            phoneFrameGradient: ['#000000', '#222222', '#333333', '#000000'],\n            // 主要颜色 - 微信绿只用于特定元素\n            primary: '#999999', // 大多数按钮和图标用灰色\n            light: '#cccccc',\n            ultraLight: '#f8f8f8',\n            soft: '#e0e0e0',\n            deep: '#666666',\n            // 渐变色\n            gradientStart: '#cccccc',\n            gradientEnd: '#dddddd',\n            // 文字颜色\n            textColor: '#ffffff',\n            textPrimary: '#333333',\n            textSecondary: '#909090',\n            // 边框和阴影\n            borderColor: '#e0e0e0',\n            bubbleShadow: '0 2px 8px rgba(0, 0, 0, 0.08)',\n            // 气泡背景\n            bubbleThemBg: '#ffffff',\n            bubbleMeBg: '#A0E75A', // 更浅的微信气泡绿色\n            // 气泡文字颜色\n            bubbleThemText: '#333333',\n            bubbleMeText: '#333333',\n            // 头部背景\n            headerBg: 'linear-gradient(315deg, #f5f5f5 0%, #ffffff 100%)',\n            // 新增：状态栏颜色\n            statusBarColor: '#000000',\n            // 新增：灵动岛颜色\n            dynamicIslandColor: '#000000',\n            // 新增：应用背景色\n            appBgColor: '#ffffff',\n            // 新增：设置页面背景色\n            settingsBgColor: '#f5f5f5',\n            // 新增：设置卡片背景色\n            settingsCardBgColor: '#ffffff',\n            // 新增：阴影颜色\n            shadowColor: '#999999',\n            shadowColorRgba: 'rgba(0, 0, 0, 0.1)',\n            // 新增：是否是暗色主题\n            isDarkMode: false,\n            // 新增：默认壁纸\n            defaultWallpapers: {\n                chat: '#EDEDED', // 微信聊天背景灰色\n                home: 'https://gitgud.io/lolodesu/lolobabytutorial/-/raw/master/lologame/素材/wallpaper/白色_1.jpg', // 默认图片壁纸\n                settings: '#f5f5f5',\n            },\n            // 新增：是否使用单一颜色图标\n            useSingleColorIcons: false,\n        },\n    },\n    dark: {\n        name: 'dark',\n        displayName: '夜间模式',\n        colors: {\n            // 手机边框\n            phoneFrame: '#2c2c2c',\n            phoneFrameGradient: ['#1a1a1a', '#2c2c2c', '#3c3c3c', '#1a1a1a'],\n            // 主要颜色\n            primary: '#505050',\n            light: '#3c3c3c',\n            ultraLight: '#1a1a1a',\n            soft: '#2c2c2c',\n            deep: '#c0c0c0',\n            // 渐变色\n            gradientStart: '#3c3c3c',\n            gradientEnd: '#2c2c2c',\n            // 文字颜色\n            textColor: '#e0e0e0',\n            textPrimary: '#c0c0c0',\n            textSecondary: '#a0a0a0',\n            // 边框和阴影\n            borderColor: '#3c3c3c',\n            bubbleShadow: '0 2px 8px rgba(0, 0, 0, 0.3)',\n            // 气泡背景\n            bubbleThemBg: '#2a2a2a',\n            bubbleMeBg: '#505050',\n            // 气泡文字颜色\n            bubbleThemText: '#e0e0e0',\n            bubbleMeText: '#c0c0c0',\n            // 头部背景\n            headerBg: 'linear-gradient(315deg, #2c2c2c 0%, #1a1a1a 100%)',\n            // 新增：状态栏颜色\n            statusBarColor: '#888888',\n            // 新增：灵动岛颜色\n            dynamicIslandColor: '#3c3c3c',\n            // 新增：应用背景色\n            appBgColor: '#1a1a1a',\n            // 新增：设置页面背景色\n            settingsBgColor: '#1a1a1a',\n            // 新增：设置卡片背景色\n            settingsCardBgColor: '#2c2c2c',\n            // 新增：阴影颜色\n            shadowColor: '#000000',\n            shadowColorRgba: 'rgba(0, 0, 0, 0.5)',\n            // 新增：是否是暗色主题\n            isDarkMode: true,\n            // 新增：默认壁纸\n            defaultWallpapers: {\n                chat: 'https://gitgud.io/lolodesu/lolobabytutorial/-/raw/master/lologame/素材/wallpaper/深色星星_1.jpg', // 夜间模式壁纸\n                home: 'https://gitgud.io/lolodesu/lolobabytutorial/-/raw/master/lologame/素材/wallpaper/深色星星_1.jpg', // 夜间模式壁纸\n                settings: '#1a1a1a',\n            },\n            // 新增：是否使用单一颜色图标\n            useSingleColorIcons: false,\n        },\n    },\n};\n// 主题管理器类\nclass ThemeManager {\n    static THEME_STORAGE_KEY = 'blmx_theme';\n    static CUSTOM_THEME_STORAGE_KEY = 'blmx_custom_theme';\n    static VERSION_STORAGE_KEY = 'blmx_app_version';\n    currentTheme;\n    wallpaperManager;\n    constructor() {\n        // 检查版本并在需要时清理缓存\n        this.checkVersion();\n        // 从本地存储加载主题或使用默认微信主题\n        const savedThemeName = localStorage.getItem(ThemeManager.THEME_STORAGE_KEY) || 'white';\n        if (savedThemeName === 'custom') {\n            try {\n                const customThemeJson = localStorage.getItem(ThemeManager.CUSTOM_THEME_STORAGE_KEY);\n                if (customThemeJson) {\n                    this.currentTheme = JSON.parse(customThemeJson);\n                }\n                else {\n                    this.currentTheme = THEMES.white;\n                }\n            }\n            catch (e) {\n                console.error('Failed to load custom theme:', e);\n                this.currentTheme = THEMES.white;\n            }\n        }\n        else {\n            this.currentTheme = THEMES[savedThemeName] || THEMES.white;\n        }\n        // 初始化壁纸管理器\n        this.wallpaperManager = new WallpaperManager();\n        // 应用当前主题\n        this.applyTheme(this.currentTheme);\n    }\n    // 检查版本并清理过时数据\n    checkVersion() {\n        const savedVersion = localStorage.getItem(ThemeManager.VERSION_STORAGE_KEY);\n        // 如果没有版本记录或版本不匹配，执行清理\n        if (!savedVersion || savedVersion !== APP_VERSION) {\n            console.log(`版本更新: ${savedVersion || '初次安装'} -> ${APP_VERSION}, 清理过时数据...`);\n            this.cleanOutdatedData();\n            // 保存新版本号\n            localStorage.setItem(ThemeManager.VERSION_STORAGE_KEY, APP_VERSION);\n        }\n    }\n    // 清理过时数据\n    cleanOutdatedData() {\n        // 保留用户的个人设置数据，但清理可能导致问题的主题和壁纸数据\n        const keysToPreserve = [];\n        // 查找所有需要保留的个人设置键\n        for (let i = 0; i < localStorage.length; i++) {\n            const key = localStorage.key(i);\n            if (key &&\n                (key.startsWith('blmx_user_name_') ||\n                    key.startsWith('blmx_user_avatar_') ||\n                    key.startsWith('blmx_char_avatar_') ||\n                    key.startsWith('blmx_remark_') ||\n                    key.startsWith('blmx_signature_') ||\n                    key.startsWith('blmx_cover_photo_') ||\n                    key.startsWith('blmx_input_placeholder_'))) {\n                keysToPreserve.push(key);\n            }\n        }\n        // 临时保存需要保留的数据\n        const preservedData = {};\n        keysToPreserve.forEach(key => {\n            const value = localStorage.getItem(key);\n            if (value)\n                preservedData[key] = value;\n        });\n        // 清除所有 blmx_ 开头的数据\n        for (let i = localStorage.length - 1; i >= 0; i--) {\n            const key = localStorage.key(i);\n            if (key && key.startsWith('blmx_')) {\n                localStorage.removeItem(key);\n            }\n        }\n        // 恢复需要保留的数据\n        Object.entries(preservedData).forEach(([key, value]) => {\n            localStorage.setItem(key, value);\n        });\n        console.log('数据清理完成，保留了用户个人设置');\n    }\n    // 获取当前主题\n    getCurrentTheme() {\n        return this.currentTheme;\n    }\n    // 获取所有默认主题\n    getThemes() {\n        return THEMES;\n    }\n    // 获取壁纸管理器\n    getWallpaperManager() {\n        return this.wallpaperManager;\n    }\n    // 切换到指定主题\n    switchTheme(themeName) {\n        if (themeName === 'custom') {\n            try {\n                const customThemeJson = localStorage.getItem(ThemeManager.CUSTOM_THEME_STORAGE_KEY);\n                if (customThemeJson) {\n                    this.currentTheme = JSON.parse(customThemeJson);\n                    localStorage.setItem(ThemeManager.THEME_STORAGE_KEY, 'custom');\n                    // 更新壁纸管理器中的当前主题名称\n                    this.wallpaperManager.setCurrentThemeName('custom');\n                    this.applyTheme(this.currentTheme);\n                    // 应用主题默认壁纸\n                    this.wallpaperManager.applyThemeDefaultWallpapers(this.currentTheme);\n                }\n            }\n            catch (e) {\n                console.error('Failed to load custom theme:', e);\n            }\n        }\n        else if (THEMES[themeName]) {\n            this.currentTheme = THEMES[themeName];\n            localStorage.setItem(ThemeManager.THEME_STORAGE_KEY, themeName);\n            // 更新壁纸管理器中的当前主题名称\n            this.wallpaperManager.setCurrentThemeName(themeName);\n            this.applyTheme(this.currentTheme);\n            // 应用主题默认壁纸\n            this.wallpaperManager.applyThemeDefaultWallpapers(this.currentTheme);\n        }\n    }\n    // 保存自定义主题\n    saveCustomTheme(theme) {\n        this.currentTheme = theme;\n        localStorage.setItem(ThemeManager.CUSTOM_THEME_STORAGE_KEY, JSON.stringify(theme));\n        localStorage.setItem(ThemeManager.THEME_STORAGE_KEY, 'custom');\n        // 更新壁纸管理器中的当前主题名称\n        this.wallpaperManager.setCurrentThemeName('custom');\n        this.applyTheme(theme);\n        // 应用主题默认壁纸\n        this.wallpaperManager.applyThemeDefaultWallpapers(theme);\n    }\n    // 应用主题到DOM\n    applyTheme(theme) {\n        const colors = theme.colors;\n        const root = document.documentElement;\n        // 设置CSS变量\n        root.style.setProperty('--phoneFrame', colors.phoneFrame);\n        root.style.setProperty('--primary-blue', colors.primary);\n        root.style.setProperty('--light-blue', colors.light);\n        root.style.setProperty('--ultra-light-blue', colors.ultraLight);\n        root.style.setProperty('--blue-gradient-start', colors.gradientStart);\n        root.style.setProperty('--blue-gradient-end', colors.gradientEnd);\n        root.style.setProperty('--soft-blue', colors.soft);\n        root.style.setProperty('--deep-blue', colors.deep);\n        // 根据useSingleColorIcons属性设置图标颜色\n        if (colors.useSingleColorIcons) {\n            // 使用主题色作为图标颜色\n            document.body.classList.add('single-color-icon');\n            // 计算渐变色：比主色更亮和更暗的变体\n            const lighterColor = this.lightenDarkenColor(colors.primary, 20);\n            const darkerColor = this.lightenDarkenColor(colors.primary, -20);\n            // 设置渐变色变量\n            root.style.setProperty('--primary-gradient-light', lighterColor);\n            root.style.setProperty('--primary-gradient-dark', darkerColor);\n        }\n        else {\n            // 使用默认的绿色和灰色图标\n            document.body.classList.remove('single-color-icon');\n            root.style.setProperty('--wechat-green-icon', theme.name === 'white' ? '#07C160' : '#07C160');\n            root.style.setProperty('--settings-icon-color', theme.name === 'white' ? '#8a8a8a' : '#8a8a8a');\n        }\n        root.style.setProperty('--wechat-green-bubble', colors.light);\n        root.style.setProperty('--wechat-bg', colors.ultraLight);\n        root.style.setProperty('--link-color', colors.primary);\n        root.style.setProperty('--text-color', colors.textColor);\n        root.style.setProperty('--text-primary', colors.textPrimary);\n        root.style.setProperty('--text-secondary', colors.textSecondary);\n        root.style.setProperty('--border-color', colors.borderColor);\n        root.style.setProperty('--header-bg', colors.headerBg);\n        root.style.setProperty('--bubble-shadow', colors.bubbleShadow);\n        root.style.setProperty('--wechat-bubble-them-bg', colors.bubbleThemBg);\n        root.style.setProperty('--wechat-bubble-me-bg', colors.bubbleMeBg);\n        // 设置气泡文字颜色\n        root.style.setProperty('--wechat-bubble-them-text', colors.bubbleThemText || colors.primary);\n        root.style.setProperty('--wechat-bubble-me-text', colors.bubbleMeText || '#ffffff');\n        // 设置状态栏颜色\n        root.style.setProperty('--status-bar-color', colors.statusBarColor);\n        // 设置灵动岛颜色\n        root.style.setProperty('--dynamic-island-color', colors.dynamicIslandColor);\n        // 设置应用背景色\n        root.style.setProperty('--app-bg-color', colors.appBgColor);\n        // 设置设置页面背景色\n        root.style.setProperty('--settings-bg-color', colors.settingsBgColor);\n        // 设置设置卡片背景色\n        root.style.setProperty('--settings-card-bg-color', colors.settingsCardBgColor);\n        // 设置阴影颜色\n        root.style.setProperty('--shadow-color', colors.shadowColor);\n        root.style.setProperty('--shadow-color-rgba', colors.shadowColorRgba);\n        // 提取阴影颜色的RGB分量，用于其他计算\n        const shadowRGB = this.extractRgbComponents(colors.shadowColor);\n        root.style.setProperty('--shadow-r', shadowRGB.r.toString());\n        root.style.setProperty('--shadow-g', shadowRGB.g.toString());\n        root.style.setProperty('--shadow-b', shadowRGB.b.toString());\n        // 设置暗色模式类\n        if (colors.isDarkMode) {\n            document.body.classList.add('dark-mode');\n        }\n        else {\n            document.body.classList.remove('dark-mode');\n        }\n        // 手机边框样式\n        const phoneFrame = document.querySelector('.phone-frame');\n        if (phoneFrame) {\n            phoneFrame.style.background = colors.phoneFrame;\n            // 更新手机边框渐变\n            const gradientColors = colors.phoneFrameGradient.join(', ');\n            const phoneFrameBefore = document.createElement('style');\n            phoneFrameBefore.textContent = `\n        .phone-frame::before {\n          background: linear-gradient(45deg, ${gradientColors});\n          background-size: 400% 400%;\n        }\n      `;\n            // 移除旧样式并添加新样式\n            const oldStyle = document.getElementById('phone-frame-style');\n            if (oldStyle) {\n                oldStyle.remove();\n            }\n            phoneFrameBefore.id = 'phone-frame-style';\n            document.head.appendChild(phoneFrameBefore);\n        }\n        // 更新动态岛颜色\n        const dynamicIsland = document.querySelector('.dynamic-island');\n        if (dynamicIsland) {\n            dynamicIsland.style.background = colors.dynamicIslandColor;\n        }\n        // 更新状态栏颜色\n        const statusLeft = document.querySelector('.status-left');\n        const statusRight = document.querySelector('.status-right');\n        if (statusLeft && statusRight) {\n            statusLeft.style.color = colors.statusBarColor;\n            statusRight.style.color = colors.statusBarColor;\n        }\n        // 更新设置页面背景色\n        const settingsView = document.getElementById('settings-view');\n        if (settingsView) {\n            settingsView.style.backgroundColor = colors.settingsBgColor;\n        }\n        // 更新设置卡片背景色\n        const settingsCards = document.querySelectorAll('.settings-card');\n        settingsCards.forEach((card) => {\n            card.style.backgroundColor = colors.settingsCardBgColor;\n        });\n        // 更新手机阴影\n        if (phoneFrame) {\n            phoneFrame.style.boxShadow = `\n        0 15px 20px ${this.hexToRgba(colors.shadowColor, 0.25)},\n        0 8px 20px ${this.hexToRgba(colors.shadowColor, 0.15)},\n        0 3px 8px rgba(0, 0, 0, 0.1),\n        inset 0 1px 0 rgba(255, 255, 255, 0.5),\n        inset 0 -1px 0 rgba(255, 255, 255, 0.2),\n        0 5px ${this.hexToRgba(colors.shadowColor, 0.08)}\n      `;\n        }\n        // 更新气泡阴影和颜色\n        const style = document.createElement('style');\n        style.id = 'theme-dynamic-styles';\n        // 检查是否是自定义主题（使用纯色背景）还是默认主题（保留渐变）\n        // 注释掉未使用的变量\n        // const isCustomBubbleColors = theme.name === 'custom';\n        style.textContent = `\n      /* 微信主题下的气泡样式 - 直接应用绿色 */\n      .message-row.me .message-bubble {\n        background-color: ${colors.bubbleMeBg} !important;\n        background: ${colors.bubbleMeBg} !important;\n        color: ${colors.bubbleMeText || '#ffffff'} !important;\n        box-shadow: 0 4px 12px ${this.hexToRgba(colors.shadowColor, 0.3)};\n      }\n      \n      /* 对方气泡样式 */\n      .message-row.them .message-bubble {\n        background-color: ${colors.bubbleThemBg} !important;\n        background: ${colors.bubbleThemBg} !important;\n        color: ${colors.bubbleThemText || colors.primary} !important;\n      }\n      \n      /* 确保语音气泡也使用正确的颜色 */\n      .message-row.me .message-bubble.voice-bubble {\n        background: ${colors.bubbleMeBg} !important;\n        background-color: ${colors.bubbleMeBg} !important;\n        background-image: none !important;\n        color: ${colors.bubbleMeText || '#ffffff'} !important;\n      }\n      \n      .message-row.them .message-bubble.voice-bubble {\n        background: ${colors.bubbleThemBg} !important;\n        color: ${colors.bubbleThemText || colors.primary} !important;\n      }\n      \n      /* 朋友圈文字描述图片样式 */\n      .post-media .image-desc-content {\n        background-color: ${this.hexToRgba(colors.primary, 0.1)} !important;\n        border: 1px solid ${this.hexToRgba(colors.primary, 0.1)} !important;\n      }\n      \n      /* 发送按钮样式 */\n      .wechat-footer .send-btn {\n        box-shadow: 0 4px 12px ${this.hexToRgba(colors.shadowColor, 0.3)};\n      }\n      \n      .wechat-footer .send-btn:hover {\n        box-shadow: 0 6px 16px ${this.hexToRgba(colors.shadowColor, 0.4)};\n      }\n      \n      /* 夜间模式特殊处理 */\n      ${colors.isDarkMode\n            ? `\n        .settings-card p, \n        .settings-card a,\n        .settings-card li a,\n        .post-content,\n        .post-meta,\n        .theme-editor-modal .modal-content {\n          color: #e0e0e0 !important;\n        }\n        \n        .settings-card,\n        .theme-editor-modal .modal-content {\n          background-color: #2a2a2a !important;\n        }\n        \n        /* 修改夜间模式下正在输入指示器样式 */\n        .typing-indicator .message-bubble {\n          background-color: ${colors.bubbleThemBg} !important;\n          background: ${colors.bubbleThemBg} !important;\n          color: #ffffff !important;\n          border: none !important;\n        }\n        \n        .typing-dot {\n          background-color: rgba(255, 255, 255, 0.6) !important;\n        }\n        \n        .settings-card li {\n          border-bottom-color: #3c3c3c !important;\n        }\n        \n        .settings-card li a {\n          color: #a0a0a0 !important;\n        }\n        \n        #show-last-ai-response-btn,\n        #show-last-sent-prompt-btn {\n          background-color: #2c2c2c !important;\n          color: #a0a0a0 !important;\n        }\n\n        /* 朋友圈暗色模式 */\n        #moments-view {\n          background: linear-gradient(180deg, #1a1a1a 0%, #252525 100%) !important;\n        }\n        \n        .moments-body {\n          background-color: #1a1a1a !important;\n        }\n        \n        .moment-post {\n          border-bottom-color: #2c2c2c !important;\n        }\n        \n        .post-interactions {\n          background: #2a2a2a !important;\n          border-color: #3c3c3c !important;\n        }\n        \n        .post-interactions::before {\n          border-bottom-color: #2a2a2a !important;\n        }\n        \n        .likes-section {\n          background: rgba(42, 42, 42, 0.8) !important;\n        }\n        \n        .comments-section {\n          border-top-color: #3c3c3c !important;\n        }\n        \n        .post-meta .comment-button {\n          background: #2c2c2c !important;\n        }\n\n        /* 朋友圈文字描述图片样式 - 夜间模式 */\n        .post-media .image-desc-content {\n          background-color: rgba(42, 42, 42, 0.8) !important;\n          border: 1px solid rgba(60, 60, 60, 0.4) !important;\n          color: #e0e0e0 !important;\n        }\n\n        /* 更多夜间模式样式 */\n        .post-author-name, \n        .liker-name, \n        .comment-author {\n          color: #a0c0e0 !important;\n        }\n        \n        .moments-header,\n        .wechat-header {\n          background: linear-gradient(315deg, #252525 0%, #1a1a1a 100%) !important;\n          border-bottom-color: #3c3c3c !important;\n        }\n        \n        .wechat-footer {\n          background: linear-gradient(315deg, #252525 0%, #1a1a1a 100%) !important;\n          border-top-color: #3c3c3c !important;\n        }\n        \n        .wechat-footer .text-input {\n          background-color: #2a2a2a !important;\n          border-color: #3c3c3c !important;\n          color: #e0e0e0 !important;\n        }\n        \n        .wechat-footer .text-input::placeholder {\n          color: #808080 !important;\n        }\n        \n        .timestamp-text,\n        .event-time-text {\n          background: linear-gradient(315deg, #505050 0%, #3c3c3c 100%) !important;\n        }\n        \n        .recall-notice-text {\n          background: linear-gradient(315deg, #505050 0%, #3c3c3c 100%) !important;\n        }\n        \n        .message-row.them .voice-bubble .voice-icon {\n          color: #a0c0e0 !important;\n        }\n        \n        .voice-text-content {\n          background-color: #2a2a2a !important;\n          border-color: #3c3c3c !important;\n          color: #e0e0e0 !important;\n        }\n        \n        .location-card,\n        .file-card {\n          background-color: #2a2a2a !important;\n        }\n        \n        .location-content .location-title {\n          color: #e0e0e0 !important;\n        }\n        \n        .file-details .file-name {\n          color: #e0e0e0 !important;\n        }\n        \n        .file-footer {\n          background-color: #252525 !important;\n          border-top-color: #3c3c3c !important;\n        }\n        \n        .panel-container {\n          background-color: #1a1a1a !important;\n        }\n        \n        .feature-icon {\n          background-color: #2a2a2a !important;\n          border-color: #3c3c3c !important;\n        }\n        \n        .feature-label {\n          color: #a0a0a0 !important;\n        }\n        \n        /* Theme-colored icons in dark mode */\n        .feature-icon .theme-icon {\n          color: var(--primary-blue) !important;\n        }\n        \n        /* 壁纸选择器暗色模式 */\n        .wallpaper-container {\n          background-color: #2a2a2a !important;\n          color: #e0e0e0 !important;\n        }\n        \n        .wallpaper-container h2,\n        .wallpaper-container h3,\n        .wallpaper-container p {\n          color: #e0e0e0 !important;\n        }\n        \n        .wallpaper-container input[type=\"text\"],\n        .wallpaper-container input[type=\"file\"] {\n          background-color: #1a1a1a !important;\n          border-color: #3c3c3c !important;\n          color: #e0e0e0 !important;\n        }\n        \n        .wallpaper-item .name {\n          background-color: rgba(42, 42, 42, 0.9) !important;\n          color: #e0e0e0 !important;\n        }\n      `\n            : ''}\n    `;\n        const oldDynamicStyles = document.getElementById('theme-dynamic-styles');\n        if (oldDynamicStyles) {\n            oldDynamicStyles.remove();\n        }\n        document.head.appendChild(style);\n    }\n    // 辅助方法：HEX转RGBA\n    hexToRgba(hex, alpha) {\n        const r = parseInt(hex.slice(1, 3), 16);\n        const g = parseInt(hex.slice(3, 5), 16);\n        const b = parseInt(hex.slice(5, 7), 16);\n        return `rgba(${r}, ${g}, ${b}, ${alpha})`;\n    }\n    // 辅助方法：提取RGB分量\n    extractRgbComponents(hex) {\n        const r = parseInt(hex.slice(1, 3), 16);\n        const g = parseInt(hex.slice(3, 5), 16);\n        const b = parseInt(hex.slice(5, 7), 16);\n        return { r, g, b };\n    }\n    // 辅助方法：调整颜色亮度\n    lightenDarkenColor(color, amount) {\n        let hex = color.replace('#', '');\n        if (hex.length === 3) {\n            hex = hex[0] + hex[0] + hex[1] + hex[1] + hex[2] + hex[2];\n        }\n        const num = parseInt(hex, 16);\n        let r = (num >> 16) + amount;\n        let g = ((num >> 8) & 0x00ff) + amount;\n        let b = (num & 0x0000ff) + amount;\n        r = Math.max(0, Math.min(255, r));\n        g = Math.max(0, Math.min(255, g));\n        b = Math.max(0, Math.min(255, b));\n        const rHex = r.toString(16).padStart(2, '0');\n        const gHex = g.toString(16).padStart(2, '0');\n        const bHex = b.toString(16).padStart(2, '0');\n        return `#${rHex}${gHex}${bHex}`;\n    }\n}\n// 壁纸管理器类\nclass WallpaperManager {\n    static WALLPAPER_STORAGE_KEY_PREFIX = 'blmx_wallpaper_';\n    static CUSTOM_WALLPAPERS_KEY = 'blmx_custom_wallpapers';\n    static THEME_WALLPAPER_KEY_PREFIX = 'blmx_theme_wallpaper_';\n    currentThemeName = 'white'; // 默认主题名称\n    // 内置壁纸\n    builtInWallpapers = [\n        { id: 'blue_solid', type: 'color', value: '#e8f4fd', name: '蓝色纯色' },\n        { id: 'pink_solid', type: 'color', value: '#fde8f4', name: '粉色纯色' },\n        { id: 'white_solid', type: 'color', value: '#f8f8f8', name: '白色纯色' },\n        { id: 'dark_solid', type: 'color', value: '#1a1a1a', name: '黑色纯色' },\n        {\n            id: 'default_image',\n            type: 'image',\n            value: 'https://gitgud.io/lolodesu/lolobabytutorial/-/raw/master/lologame/素材/wallpaper/白色_1.jpg',\n            name: '白色壁纸',\n        },\n        {\n            id: 'dark_image',\n            type: 'image',\n            value: 'https://gitgud.io/lolodesu/lolobabytutorial/-/raw/master/lologame/素材/wallpaper/深色星星_1.jpg',\n            name: '深色星星壁纸',\n        },\n        {\n            id: 'blue_theme',\n            type: 'image',\n            value: 'https://gitgud.io/lolodesu/lolobabytutorial/-/raw/master/lologame/素材/wallpaper/蓝色星星_1.jpg',\n            name: '蓝色星星壁纸',\n        },\n        {\n            id: 'pink_theme',\n            type: 'image',\n            value: 'https://gitgud.io/lolodesu/lolobabytutorial/-/raw/master/lologame/素材/wallpaper/粉色星星_1.jpg',\n            name: '粉色星星壁纸',\n        },\n        {\n            id: 'kitty_theme',\n            type: 'image',\n            value: 'https://gitgud.io/lolodesu/lolobabytutorial/-/raw/master/lologame/素材/wallpaper/粉色小猫_1.jpg',\n            name: '粉色小猫壁纸',\n        },\n        {\n            id: 'deep_stars_2',\n            type: 'image',\n            value: 'https://gitgud.io/lolodesu/lolobabytutorial/-/raw/master/lologame/素材/wallpaper/深色星星_2.jpg',\n            name: '深色星星壁纸2',\n        },\n        {\n            id: 'deep_stars_3',\n            type: 'image',\n            value: 'https://gitgud.io/lolodesu/lolobabytutorial/-/raw/master/lologame/素材/wallpaper/深色星星_3.jpg',\n            name: '深色星星壁纸3',\n        },\n        {\n            id: 'white_stars',\n            type: 'image',\n            value: 'https://gitgud.io/lolodesu/lolobabytutorial/-/raw/master/lologame/素材/wallpaper/白色星星_1.jpg',\n            name: '白色星星壁纸',\n        },\n        {\n            id: 'pink_stars_2',\n            type: 'image',\n            value: 'https://gitgud.io/lolodesu/lolobabytutorial/-/raw/master/lologame/素材/wallpaper/粉色星星_2.jpg',\n            name: '粉色星星壁纸2',\n        },\n        {\n            id: 'pink_grid_2',\n            type: 'image',\n            value: 'https://gitgud.io/lolodesu/lolobabytutorial/-/raw/master/lologame/素材/wallpaper/粉色格子_2.jpg',\n            name: '粉色格子壁纸2',\n        },\n        {\n            id: 'pink_grid_4',\n            type: 'image',\n            value: 'https://gitgud.io/lolodesu/lolobabytutorial/-/raw/master/lologame/素材/wallpaper/粉色格子_4.jpg',\n            name: '粉色格子壁纸4',\n        },\n        {\n            id: 'blue_1',\n            type: 'image',\n            value: 'https://gitgud.io/lolodesu/lolobabytutorial/-/raw/master/lologame/素材/wallpaper/蓝色_1.jpg',\n            name: '蓝色壁纸1',\n        },\n    ];\n    // 自定义壁纸\n    customWallpapers = [];\n    constructor() {\n        this.loadCustomWallpapers();\n        // 从localStorage加载当前主题名称\n        const savedThemeName = localStorage.getItem('blmx_theme');\n        if (savedThemeName) {\n            this.currentThemeName = savedThemeName;\n        }\n        // 迁移旧的壁纸设置到新的主题关联格式\n        this.migrateOldWallpaperSettings();\n    }\n    // 设置当前主题名称\n    setCurrentThemeName(themeName) {\n        this.currentThemeName = themeName;\n    }\n    // 获取所有壁纸（内置+自定义）\n    getAllWallpapers() {\n        return [...this.builtInWallpapers, ...this.customWallpapers];\n    }\n    // 获取内置壁纸\n    getBuiltInWallpapers() {\n        return this.builtInWallpapers;\n    }\n    // 获取自定义壁纸\n    getCustomWallpapers() {\n        return this.customWallpapers;\n    }\n    // 添加自定义壁纸\n    addCustomWallpaper(wallpaper) {\n        const id = `custom_${Date.now()}`;\n        const newWallpaper = { ...wallpaper, id };\n        this.customWallpapers.push(newWallpaper);\n        this.saveCustomWallpapers();\n        return newWallpaper;\n    }\n    // 删除自定义壁纸\n    deleteCustomWallpaper(id) {\n        const initialLength = this.customWallpapers.length;\n        this.customWallpapers = this.customWallpapers.filter(w => w.id !== id);\n        if (this.customWallpapers.length !== initialLength) {\n            this.saveCustomWallpapers();\n            return true;\n        }\n        return false;\n    }\n    // 设置壁纸（与主题关联）\n    setWallpaper(viewType, wallpaper) {\n        // 使用主题名称作为存储键的一部分\n        const storageKey = `${WallpaperManager.THEME_WALLPAPER_KEY_PREFIX}${this.currentThemeName}_${viewType}`;\n        if (wallpaper) {\n            localStorage.setItem(storageKey, JSON.stringify(wallpaper));\n        }\n        else {\n            localStorage.removeItem(storageKey);\n        }\n    }\n    // 获取当前壁纸（与主题关联）\n    getCurrentWallpaper(viewType) {\n        // 首先尝试获取与当前主题关联的壁纸\n        const themeStorageKey = `${WallpaperManager.THEME_WALLPAPER_KEY_PREFIX}${this.currentThemeName}_${viewType}`;\n        const savedThemeWallpaper = localStorage.getItem(themeStorageKey);\n        if (savedThemeWallpaper) {\n            try {\n                return JSON.parse(savedThemeWallpaper);\n            }\n            catch (e) {\n                console.error('Failed to parse theme wallpaper:', e);\n            }\n        }\n        // 如果没有与主题关联的壁纸，则尝试获取旧格式的壁纸设置（兼容性）\n        const oldStorageKey = `${WallpaperManager.WALLPAPER_STORAGE_KEY_PREFIX}${viewType}`;\n        const savedOldWallpaper = localStorage.getItem(oldStorageKey);\n        if (savedOldWallpaper) {\n            try {\n                return JSON.parse(savedOldWallpaper);\n            }\n            catch (e) {\n                console.error('Failed to parse old wallpaper:', e);\n            }\n        }\n        return null;\n    }\n    // 迁移旧的壁纸设置到新的主题关联格式\n    migrateOldWallpaperSettings() {\n        const viewTypes = ['chat', 'home', 'settings'];\n        viewTypes.forEach(viewType => {\n            const oldStorageKey = `${WallpaperManager.WALLPAPER_STORAGE_KEY_PREFIX}${viewType}`;\n            const savedOldWallpaper = localStorage.getItem(oldStorageKey);\n            if (savedOldWallpaper) {\n                try {\n                    // 解析但不存储未使用的变量\n                    JSON.parse(savedOldWallpaper);\n                    // 将旧设置迁移到当前主题下\n                    const themeStorageKey = `${WallpaperManager.THEME_WALLPAPER_KEY_PREFIX}${this.currentThemeName}_${viewType}`;\n                    // 只有在当前主题下没有设置时才迁移\n                    if (!localStorage.getItem(themeStorageKey)) {\n                        localStorage.setItem(themeStorageKey, savedOldWallpaper);\n                    }\n                    // 迁移后删除旧设置\n                    localStorage.removeItem(oldStorageKey);\n                }\n                catch (e) {\n                    console.error('Failed to migrate old wallpaper setting:', e);\n                }\n            }\n        });\n    }\n    // 应用主题默认壁纸\n    applyThemeDefaultWallpapers(theme) {\n        // 更新当前主题名称\n        this.setCurrentThemeName(theme.name);\n        const viewTypes = ['chat', 'home', 'settings'];\n        viewTypes.forEach(viewType => {\n            // 检查是否已经有与当前主题关联的壁纸设置\n            const themeStorageKey = `${WallpaperManager.THEME_WALLPAPER_KEY_PREFIX}${theme.name}_${viewType}`;\n            const existingWallpaper = localStorage.getItem(themeStorageKey);\n            if (existingWallpaper) {\n                // 已有壁纸设置，保留现有设置\n                return;\n            }\n            const defaultValue = theme.colors.defaultWallpapers[viewType];\n            // 检查是否是颜色值\n            const isColor = defaultValue.startsWith('#');\n            const wallpaper = {\n                id: `theme_default_${viewType}`,\n                type: isColor ? 'color' : 'image',\n                value: defaultValue,\n                name: `${theme.displayName}默认${viewType === 'chat' ? '聊天' : viewType === 'home' ? '主屏幕' : '设置'}壁纸`,\n            };\n            // 保存为与主题关联的壁纸\n            localStorage.setItem(themeStorageKey, JSON.stringify(wallpaper));\n        });\n    }\n    // 应用壁纸到DOM\n    applyWallpaperToElement(element, wallpaper, defaultThemeWallpaper) {\n        if (!element)\n            return;\n        // 重置样式\n        element.style.backgroundImage = 'none';\n        element.style.backgroundColor = '';\n        element.style.backgroundSize = '';\n        element.style.backgroundPosition = '';\n        element.style.backgroundRepeat = '';\n        if (wallpaper) {\n            if (wallpaper.type === 'color') {\n                // 纯色壁纸 - 确保清除背景图并设置背景色\n                element.style.backgroundImage = 'none';\n                element.style.backgroundColor = wallpaper.value;\n            }\n            else {\n                // 图片壁纸\n                element.style.backgroundImage = `url(\"${wallpaper.value}\")`;\n                element.style.backgroundSize = 'cover';\n                element.style.backgroundPosition = 'center';\n                element.style.backgroundRepeat = 'no-repeat';\n            }\n        }\n        else if (defaultThemeWallpaper) {\n            // 使用主题默认壁纸\n            if (defaultThemeWallpaper.startsWith('#')) {\n                // 如果是颜色值，设置背景色\n                element.style.backgroundImage = 'none';\n                element.style.backgroundColor = defaultThemeWallpaper;\n            }\n            else {\n                // 如果是图片URL，设置背景图\n                element.style.backgroundImage = `url(\"${defaultThemeWallpaper}\")`;\n                element.style.backgroundSize = 'cover';\n                element.style.backgroundPosition = 'center';\n                element.style.backgroundRepeat = 'no-repeat';\n            }\n        }\n    }\n    // 从URL创建壁纸\n    async createWallpaperFromUrl(url, name) {\n        try {\n            // 验证URL\n            new URL(url);\n            return this.addCustomWallpaper({\n                type: 'url',\n                value: url,\n                name: name || `URL壁纸 ${new Date().toLocaleString()}`,\n            });\n        }\n        catch (e) {\n            console.error('Invalid URL:', e);\n            return null;\n        }\n    }\n    // 从File对象创建壁纸\n    async createWallpaperFromFile(file) {\n        return new Promise(resolve => {\n            if (!file.type.startsWith('image/')) {\n                resolve(null);\n                return;\n            }\n            const reader = new FileReader();\n            reader.onload = e => {\n                if (e.target?.result) {\n                    const wallpaper = this.addCustomWallpaper({\n                        type: 'image',\n                        value: e.target.result,\n                        name: file.name || `上传的壁纸 ${new Date().toLocaleString()}`,\n                    });\n                    resolve(wallpaper);\n                }\n                else {\n                    resolve(null);\n                }\n            };\n            reader.onerror = () => resolve(null);\n            reader.readAsDataURL(file);\n        });\n    }\n    // 创建纯色壁纸\n    createSolidColorWallpaper(color, name) {\n        // 验证颜色格式，支持3位和6位十六进制颜色\n        if (!color.match(/^#([0-9A-Fa-f]{3}){1,2}$/)) {\n            console.error('Invalid color format:', color);\n            return null;\n        }\n        // 确保颜色格式统一为6位十六进制\n        let normalizedColor = color;\n        if (color.length === 4) {\n            // #RGB 格式\n            const r = color[1];\n            const g = color[2];\n            const b = color[3];\n            normalizedColor = `#${r}${r}${g}${g}${b}${b}`;\n        }\n        return this.addCustomWallpaper({\n            type: 'color',\n            value: normalizedColor,\n            name: name || `纯色壁纸 ${normalizedColor}`,\n        });\n    }\n    // 加载自定义壁纸\n    loadCustomWallpapers() {\n        const savedWallpapers = localStorage.getItem(WallpaperManager.CUSTOM_WALLPAPERS_KEY);\n        if (savedWallpapers) {\n            try {\n                this.customWallpapers = JSON.parse(savedWallpapers);\n            }\n            catch (e) {\n                console.error('Failed to load custom wallpapers:', e);\n                this.customWallpapers = [];\n            }\n        }\n    }\n    // 保存自定义壁纸\n    saveCustomWallpapers() {\n        localStorage.setItem(WallpaperManager.CUSTOM_WALLPAPERS_KEY, JSON.stringify(this.customWallpapers));\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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O1FBQ0gsQ0FBQztJQUNILENBQUM7SUFFRCxVQUFVO0lBQ0Ysb0JBQW9CO1FBQzFCLFlBQVksQ0FBQyxPQUFPLENBQUMsZ0JBQWdCLENBQUMscUJBQXFCLEVBQUUsSUFBSSxDQUFDLFNBQVMsQ0FBQyxJQUFJLENBQUMsZ0JBQWdCLENBQUMsQ0FBQyxDQUFDO0lBQ3RHLENBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly90YXZlcm5faGVscGVyX3RlbXBsYXRlLy4vc3JjL+WQjOWxguaJi+acui90aGVtZS1tYW5hZ2VyLnRzPyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyDkuLvpopjnsbvlnovlrprkuYlcbmV4cG9ydCBpbnRlcmZhY2UgVGhlbWUge1xuICBuYW1lOiBzdHJpbmc7XG4gIGRpc3BsYXlOYW1lOiBzdHJpbmc7XG4gIGNvbG9yczoge1xuICAgIC8vIOaJi+acuui+ueahhlxuICAgIHBob25lRnJhbWU6IHN0cmluZztcbiAgICBwaG9uZUZyYW1lR3JhZGllbnQ6IHN0cmluZ1tdO1xuXG4gICAgLy8g5Li76KaB6aKc6ImyXG4gICAgcHJpbWFyeTogc3RyaW5nO1xuICAgIGxpZ2h0OiBzdHJpbmc7XG4gICAgdWx0cmFMaWdodDogc3RyaW5nO1xuICAgIHNvZnQ6IHN0cmluZztcbiAgICBkZWVwOiBzdHJpbmc7XG5cbiAgICAvLyDmuJDlj5joibJcbiAgICBncmFkaWVudFN0YXJ0OiBzdHJpbmc7XG4gICAgZ3JhZGllbnRFbmQ6IHN0cmluZztcblxuICAgIC8vIOaWh+Wtl+minOiJslxuICAgIHRleHRDb2xvcjogc3RyaW5nO1xuICAgIHRleHRQcmltYXJ5OiBzdHJpbmc7XG4gICAgdGV4dFNlY29uZGFyeTogc3RyaW5nO1xuXG4gICAgLy8g6L655qGG5ZKM6Zi05b2xXG4gICAgYm9yZGVyQ29sb3I6IHN0cmluZztcbiAgICBidWJibGVTaGFkb3c6IHN0cmluZztcblxuICAgIC8vIOawlOazoeiDjOaZr1xuICAgIGJ1YmJsZVRoZW1CZzogc3RyaW5nO1xuICAgIGJ1YmJsZU1lQmc6IHN0cmluZztcblxuICAgIC8vIOawlOazoeaWh+Wtl+minOiJslxuICAgIGJ1YmJsZVRoZW1UZXh0OiBzdHJpbmc7XG4gICAgYnViYmxlTWVUZXh0OiBzdHJpbmc7XG5cbiAgICAvLyDlpLTpg6jog4zmma9cbiAgICBoZWFkZXJCZzogc3RyaW5nO1xuXG4gICAgLy8g5paw5aKe77ya54q25oCB5qCP6aKc6ImyXG4gICAgc3RhdHVzQmFyQ29sb3I6IHN0cmluZztcblxuICAgIC8vIOaWsOWinu+8mueBteWKqOWym+minOiJslxuICAgIGR5bmFtaWNJc2xhbmRDb2xvcjogc3RyaW5nO1xuXG4gICAgLy8g5paw5aKe77ya5bqU55So6IOM5pmv6ImyXG4gICAgYXBwQmdDb2xvcjogc3RyaW5nO1xuXG4gICAgLy8g5paw5aKe77ya6K6+572u6aG16Z2i6IOM5pmv6ImyXG4gICAgc2V0dGluZ3NCZ0NvbG9yOiBzdHJpbmc7XG5cbiAgICAvLyDmlrDlop7vvJrorr7nva7ljaHniYfog4zmma/oibJcbiAgICBzZXR0aW5nc0NhcmRCZ0NvbG9yOiBzdHJpbmc7XG5cbiAgICAvLyDmlrDlop7vvJrpmLTlvbHpopzoibJcbiAgICBzaGFkb3dDb2xvcjogc3RyaW5nO1xuICAgIHNoYWRvd0NvbG9yUmdiYTogc3RyaW5nO1xuXG4gICAgLy8g5paw5aKe77ya5piv5ZCm5piv5pqX6Imy5Li76aKYXG4gICAgaXNEYXJrTW9kZTogYm9vbGVhbjtcblxuICAgIC8vIOaWsOWinu+8mum7mOiupOWjgee6uFxuICAgIGRlZmF1bHRXYWxscGFwZXJzOiB7XG4gICAgICBjaGF0OiBzdHJpbmc7IC8vIOWPr+S7peaYr+minOiJsuWAvOaIluWbvueJh1VSTFxuICAgICAgaG9tZTogc3RyaW5nO1xuICAgICAgc2V0dGluZ3M6IHN0cmluZztcbiAgICB9O1xuXG4gICAgLy8g5paw5aKe77ya5piv5ZCm5L2/55So5Y2V5LiA6aKc6Imy5Zu+5qCHXG4gICAgdXNlU2luZ2xlQ29sb3JJY29ucz86IGJvb2xlYW47XG4gIH07XG59XG5cbi8vIOW9k+WJjeW6lOeUqOeJiOacrFxuZXhwb3J0IGNvbnN0IEFQUF9WRVJTSU9OID0gJzEuMS4wJztcblxuLy8g6buY6K6k5Li76aKY6YWN572uXG5leHBvcnQgY29uc3QgVEhFTUVTOiBSZWNvcmQ8c3RyaW5nLCBUaGVtZT4gPSB7XG4gIGJsdWU6IHtcbiAgICBuYW1lOiAnYmx1ZScsXG4gICAgZGlzcGxheU5hbWU6ICfok53oibLkuLvpopgnLFxuICAgIGNvbG9yczoge1xuICAgICAgLy8g5omL5py66L655qGGXG4gICAgICBwaG9uZUZyYW1lOiAnI2I0ZDBmYScsXG4gICAgICBwaG9uZUZyYW1lR3JhZGllbnQ6IFsnIzRhOTVlZCcsICcjOThjMmY1JywgJyNhY2NlZjInLCAnIzRhOTVlZCddLFxuXG4gICAgICAvLyDkuLvopoHpopzoibJcbiAgICAgIHByaW1hcnk6ICcjNzJhZGYzJyxcbiAgICAgIGxpZ2h0OiAnI2E4Y2JlYicsXG4gICAgICB1bHRyYUxpZ2h0OiAnI2U4ZjRmZCcsXG4gICAgICBzb2Z0OiAnI2I4ZDRmMCcsXG4gICAgICBkZWVwOiAnIzJjNTI4MicsXG5cbiAgICAgIC8vIOa4kOWPmOiJslxuICAgICAgZ3JhZGllbnRTdGFydDogJyM5OGMyZjUnLFxuICAgICAgZ3JhZGllbnRFbmQ6ICcjYWNjZWYyJyxcblxuICAgICAgLy8g5paH5a2X6aKc6ImyXG4gICAgICB0ZXh0Q29sb3I6ICcjZmZmZmZmJyxcbiAgICAgIHRleHRQcmltYXJ5OiAncmdiKDEzOSwgMTYyLCAxODYpJyxcbiAgICAgIHRleHRTZWNvbmRhcnk6ICcjNjQ3NDhiJyxcblxuICAgICAgLy8g6L655qGG5ZKM6Zi05b2xXG4gICAgICBib3JkZXJDb2xvcjogJyNjYmQ1ZTEnLFxuICAgICAgYnViYmxlU2hhZG93OiAnMCAycHggOHB4IHJnYmEoNzQsIDE0NCwgMjI2LCAwLjE1KScsXG5cbiAgICAgIC8vIOawlOazoeiDjOaZr1xuICAgICAgYnViYmxlVGhlbUJnOiAnI2ZmZmZmZicsXG4gICAgICBidWJibGVNZUJnOiAnI2E4Y2JlYicsXG5cbiAgICAgIC8vIOawlOazoeaWh+Wtl+minOiJslxuICAgICAgYnViYmxlVGhlbVRleHQ6ICcjNzJhZGYzJyxcbiAgICAgIGJ1YmJsZU1lVGV4dDogJyNmZmZmZmYnLFxuXG4gICAgICAvLyDlpLTpg6jog4zmma9cbiAgICAgIGhlYWRlckJnOiAnbGluZWFyLWdyYWRpZW50KDMxNWRlZywgI2VlZjRmZiAwJSwgI2Y4ZmFmZiAxMDAlKScsXG5cbiAgICAgIC8vIOaWsOWinu+8mueKtuaAgeagj+minOiJslxuICAgICAgc3RhdHVzQmFyQ29sb3I6ICcjNDI4YWYyJyxcblxuICAgICAgLy8g5paw5aKe77ya54G15Yqo5bKb6aKc6ImyXG4gICAgICBkeW5hbWljSXNsYW5kQ29sb3I6ICcjYTBjNGY0JyxcblxuICAgICAgLy8g5paw5aKe77ya5bqU55So6IOM5pmv6ImyXG4gICAgICBhcHBCZ0NvbG9yOiAnI2ZmZmZmZicsXG5cbiAgICAgIC8vIOaWsOWinu+8muiuvue9rumhtemdouiDjOaZr+iJslxuICAgICAgc2V0dGluZ3NCZ0NvbG9yOiAnI2YyZjJmNycsXG5cbiAgICAgIC8vIOaWsOWinu+8muiuvue9ruWNoeeJh+iDjOaZr+iJslxuICAgICAgc2V0dGluZ3NDYXJkQmdDb2xvcjogJyNmZmZmZmYnLFxuXG4gICAgICAvLyDmlrDlop7vvJrpmLTlvbHpopzoibJcbiAgICAgIHNoYWRvd0NvbG9yOiAnIzRhOTBlMicsXG4gICAgICBzaGFkb3dDb2xvclJnYmE6ICdyZ2JhKDc0LCAxNDQsIDIyNiwgMC4zKScsXG5cbiAgICAgIC8vIOaWsOWinu+8muaYr+WQpuaYr+aal+iJsuS4u+mimFxuICAgICAgaXNEYXJrTW9kZTogZmFsc2UsXG5cbiAgICAgIC8vIOaWsOWinu+8mum7mOiupOWjgee6uFxuICAgICAgZGVmYXVsdFdhbGxwYXBlcnM6IHtcbiAgICAgICAgY2hhdDogJ2h0dHBzOi8vZ2l0Z3VkLmlvL2xvbG9kZXN1L2xvbG9iYWJ5dHV0b3JpYWwvLS9yYXcvbWFzdGVyL2xvbG9nYW1lL+e0oOadkC93YWxscGFwZXIv6JOd6ImyXzMuanBnJywgLy8g5pu05paw5Li65oyH5a6a55qE6JOd6Imy5Li76aKY5aOB57q4XG4gICAgICAgIGhvbWU6ICdodHRwczovL2dpdGd1ZC5pby9sb2xvZGVzdS9sb2xvYmFieXR1dG9yaWFsLy0vcmF3L21hc3Rlci9sb2xvZ2FtZS/ntKDmnZAvd2FsbHBhcGVyL+iTneiJsl8yLmpwZycsIC8vIOabtOaWsOS4uuaMh+WumueahOiTneiJsuS4u+mimOWjgee6uFxuICAgICAgICBzZXR0aW5nczogJyNmMmY3ZmQnLFxuICAgICAgfSxcblxuICAgICAgLy8g5paw5aKe77ya5piv5ZCm5L2/55So5Y2V5LiA6aKc6Imy5Zu+5qCHXG4gICAgICB1c2VTaW5nbGVDb2xvckljb25zOiB0cnVlLFxuICAgIH0sXG4gIH0sXG5cbiAgcGluazoge1xuICAgIG5hbWU6ICdwaW5rJyxcbiAgICBkaXNwbGF5TmFtZTogJ+eyieiJsuS4u+mimCcsXG4gICAgY29sb3JzOiB7XG4gICAgICAvLyDmiYvmnLrovrnmoYZcbiAgICAgIHBob25lRnJhbWU6ICcjZmFkMGU4JyxcbiAgICAgIHBob25lRnJhbWVHcmFkaWVudDogWycjZWQ0YTllJywgJyNmNTk4YzgnLCAnI2YyYWNjZScsICcjZWQ0YTllJ10sXG5cbiAgICAgIC8vIOS4u+imgeminOiJslxuICAgICAgcHJpbWFyeTogJyNmMzcyYWQnLFxuICAgICAgbGlnaHQ6ICcjZWJhOGNiJyxcbiAgICAgIHVsdHJhTGlnaHQ6ICcjZmRlOGY0JyxcbiAgICAgIHNvZnQ6ICcjZjBiOGQ0JyxcbiAgICAgIGRlZXA6ICcjODIyYzVjJyxcblxuICAgICAgLy8g5riQ5Y+Y6ImyXG4gICAgICBncmFkaWVudFN0YXJ0OiAnI2Y1OThjOCcsXG4gICAgICBncmFkaWVudEVuZDogJyNmMmFjY2UnLFxuXG4gICAgICAvLyDmloflrZfpopzoibJcbiAgICAgIHRleHRDb2xvcjogJyNmZmZmZmYnLFxuICAgICAgdGV4dFByaW1hcnk6ICdyZ2IoMTg2LCAxMzksIDE2MiknLFxuICAgICAgdGV4dFNlY29uZGFyeTogJyM4YjY0N2EnLFxuXG4gICAgICAvLyDovrnmoYblkozpmLTlvbFcbiAgICAgIGJvcmRlckNvbG9yOiAnI2UxY2JkNScsXG4gICAgICBidWJibGVTaGFkb3c6ICcwIDJweCA4cHggcmdiYSgyMjYsIDc0LCAxNDQsIDAuMTUpJyxcblxuICAgICAgLy8g5rCU5rOh6IOM5pmvXG4gICAgICBidWJibGVUaGVtQmc6ICcjZmZmZmZmJyxcbiAgICAgIGJ1YmJsZU1lQmc6ICcjZWJhOGNiJyxcblxuICAgICAgLy8g5rCU5rOh5paH5a2X6aKc6ImyXG4gICAgICBidWJibGVUaGVtVGV4dDogJyNmMzcyYWQnLFxuICAgICAgYnViYmxlTWVUZXh0OiAnI2ZmZmZmZicsXG5cbiAgICAgIC8vIOWktOmDqOiDjOaZr1xuICAgICAgaGVhZGVyQmc6ICdsaW5lYXItZ3JhZGllbnQoMzE1ZGVnLCAjZmZlZWVmIDAlLCAjZmZmOGZhIDEwMCUpJyxcblxuICAgICAgLy8g5paw5aKe77ya54q25oCB5qCP6aKc6ImyXG4gICAgICBzdGF0dXNCYXJDb2xvcjogJyNlZDcyYWQnLFxuXG4gICAgICAvLyDmlrDlop7vvJrngbXliqjlspvpopzoibJcbiAgICAgIGR5bmFtaWNJc2xhbmRDb2xvcjogJyNmNGEwYzQnLFxuXG4gICAgICAvLyDmlrDlop7vvJrlupTnlKjog4zmma/oibJcbiAgICAgIGFwcEJnQ29sb3I6ICcjZmZmZmZmJyxcblxuICAgICAgLy8g5paw5aKe77ya6K6+572u6aG16Z2i6IOM5pmv6ImyXG4gICAgICBzZXR0aW5nc0JnQ29sb3I6ICcjZmZmMmY3JyxcblxuICAgICAgLy8g5paw5aKe77ya6K6+572u5Y2h54mH6IOM5pmv6ImyXG4gICAgICBzZXR0aW5nc0NhcmRCZ0NvbG9yOiAnI2ZmZmZmZicsXG5cbiAgICAgIC8vIOaWsOWinu+8mumYtOW9seminOiJslxuICAgICAgc2hhZG93Q29sb3I6ICcjZTI0YTkwJyxcbiAgICAgIHNoYWRvd0NvbG9yUmdiYTogJ3JnYmEoMjI2LCA3NCwgMTQ0LCAwLjMpJyxcblxuICAgICAgLy8g5paw5aKe77ya5piv5ZCm5piv5pqX6Imy5Li76aKYXG4gICAgICBpc0RhcmtNb2RlOiBmYWxzZSxcblxuICAgICAgLy8g5paw5aKe77ya6buY6K6k5aOB57q4XG4gICAgICBkZWZhdWx0V2FsbHBhcGVyczoge1xuICAgICAgICBjaGF0OiAnaHR0cHM6Ly9naXRndWQuaW8vbG9sb2Rlc3UvbG9sb2JhYnl0dXRvcmlhbC8tL3Jhdy9tYXN0ZXIvbG9sb2dhbWUv57Sg5p2QL3dhbGxwYXBlci/nsonoibLmmJ/mmJ9fMS5qcGcnLCAvLyDmm7TmlrDkuLrmjIflrprnmoTnsonoibLkuLvpopjlo4HnurhcbiAgICAgICAgaG9tZTogJ2h0dHBzOi8vZ2l0Z3VkLmlvL2xvbG9kZXN1L2xvbG9iYWJ5dHV0b3JpYWwvLS9yYXcvbWFzdGVyL2xvbG9nYW1lL+e0oOadkC93YWxscGFwZXIv57KJ6Imy5qC85a2QXzMuanBnJywgLy8g5pu05paw5Li65oyH5a6a55qE57KJ6Imy5Li76aKY5aOB57q4XG4gICAgICAgIHNldHRpbmdzOiAnI2ZkZjJmNycsXG4gICAgICB9LFxuXG4gICAgICAvLyDmlrDlop7vvJrmmK/lkKbkvb/nlKjljZXkuIDpopzoibLlm77moIdcbiAgICAgIHVzZVNpbmdsZUNvbG9ySWNvbnM6IHRydWUsXG4gICAgfSxcbiAgfSxcblxuICB3aGl0ZToge1xuICAgIG5hbWU6ICd3aGl0ZScsXG4gICAgZGlzcGxheU5hbWU6ICflvq7kv6HkuLvpopgnLFxuICAgIGNvbG9yczoge1xuICAgICAgLy8g5omL5py66L655qGGXG4gICAgICBwaG9uZUZyYW1lOiAnIzAwMDAwMCcsXG4gICAgICBwaG9uZUZyYW1lR3JhZGllbnQ6IFsnIzAwMDAwMCcsICcjMjIyMjIyJywgJyMzMzMzMzMnLCAnIzAwMDAwMCddLFxuXG4gICAgICAvLyDkuLvopoHpopzoibIgLSDlvq7kv6Hnu7/lj6rnlKjkuo7nibnlrprlhYPntKBcbiAgICAgIHByaW1hcnk6ICcjOTk5OTk5JywgLy8g5aSn5aSa5pWw5oyJ6ZKu5ZKM5Zu+5qCH55So54Gw6ImyXG4gICAgICBsaWdodDogJyNjY2NjY2MnLFxuICAgICAgdWx0cmFMaWdodDogJyNmOGY4ZjgnLFxuICAgICAgc29mdDogJyNlMGUwZTAnLFxuICAgICAgZGVlcDogJyM2NjY2NjYnLFxuXG4gICAgICAvLyDmuJDlj5joibJcbiAgICAgIGdyYWRpZW50U3RhcnQ6ICcjY2NjY2NjJyxcbiAgICAgIGdyYWRpZW50RW5kOiAnI2RkZGRkZCcsXG5cbiAgICAgIC8vIOaWh+Wtl+minOiJslxuICAgICAgdGV4dENvbG9yOiAnI2ZmZmZmZicsXG4gICAgICB0ZXh0UHJpbWFyeTogJyMzMzMzMzMnLFxuICAgICAgdGV4dFNlY29uZGFyeTogJyM5MDkwOTAnLFxuXG4gICAgICAvLyDovrnmoYblkozpmLTlvbFcbiAgICAgIGJvcmRlckNvbG9yOiAnI2UwZTBlMCcsXG4gICAgICBidWJibGVTaGFkb3c6ICcwIDJweCA4cHggcmdiYSgwLCAwLCAwLCAwLjA4KScsXG5cbiAgICAgIC8vIOawlOazoeiDjOaZr1xuICAgICAgYnViYmxlVGhlbUJnOiAnI2ZmZmZmZicsXG4gICAgICBidWJibGVNZUJnOiAnI0EwRTc1QScsIC8vIOabtOa1heeahOW+ruS/oeawlOazoee7v+iJslxuXG4gICAgICAvLyDmsJTms6HmloflrZfpopzoibJcbiAgICAgIGJ1YmJsZVRoZW1UZXh0OiAnIzMzMzMzMycsXG4gICAgICBidWJibGVNZVRleHQ6ICcjMzMzMzMzJyxcblxuICAgICAgLy8g5aS06YOo6IOM5pmvXG4gICAgICBoZWFkZXJCZzogJ2xpbmVhci1ncmFkaWVudCgzMTVkZWcsICNmNWY1ZjUgMCUsICNmZmZmZmYgMTAwJSknLFxuXG4gICAgICAvLyDmlrDlop7vvJrnirbmgIHmoI/popzoibJcbiAgICAgIHN0YXR1c0JhckNvbG9yOiAnIzAwMDAwMCcsXG5cbiAgICAgIC8vIOaWsOWinu+8mueBteWKqOWym+minOiJslxuICAgICAgZHluYW1pY0lzbGFuZENvbG9yOiAnIzAwMDAwMCcsXG5cbiAgICAgIC8vIOaWsOWinu+8muW6lOeUqOiDjOaZr+iJslxuICAgICAgYXBwQmdDb2xvcjogJyNmZmZmZmYnLFxuXG4gICAgICAvLyDmlrDlop7vvJrorr7nva7pobXpnaLog4zmma/oibJcbiAgICAgIHNldHRpbmdzQmdDb2xvcjogJyNmNWY1ZjUnLFxuXG4gICAgICAvLyDmlrDlop7vvJrorr7nva7ljaHniYfog4zmma/oibJcbiAgICAgIHNldHRpbmdzQ2FyZEJnQ29sb3I6ICcjZmZmZmZmJyxcblxuICAgICAgLy8g5paw5aKe77ya6Zi05b2x6aKc6ImyXG4gICAgICBzaGFkb3dDb2xvcjogJyM5OTk5OTknLFxuICAgICAgc2hhZG93Q29sb3JSZ2JhOiAncmdiYSgwLCAwLCAwLCAwLjEpJyxcblxuICAgICAgLy8g5paw5aKe77ya5piv5ZCm5piv5pqX6Imy5Li76aKYXG4gICAgICBpc0RhcmtNb2RlOiBmYWxzZSxcblxuICAgICAgLy8g5paw5aKe77ya6buY6K6k5aOB57q4XG4gICAgICBkZWZhdWx0V2FsbHBhcGVyczoge1xuICAgICAgICBjaGF0OiAnI0VERURFRCcsIC8vIOW+ruS/oeiBiuWkqeiDjOaZr+eBsOiJslxuICAgICAgICBob21lOiAnaHR0cHM6Ly9naXRndWQuaW8vbG9sb2Rlc3UvbG9sb2JhYnl0dXRvcmlhbC8tL3Jhdy9tYXN0ZXIvbG9sb2dhbWUv57Sg5p2QL3dhbGxwYXBlci/nmb3oibJfMS5qcGcnLCAvLyDpu5jorqTlm77niYflo4HnurhcbiAgICAgICAgc2V0dGluZ3M6ICcjZjVmNWY1JyxcbiAgICAgIH0sXG5cbiAgICAgIC8vIOaWsOWinu+8muaYr+WQpuS9v+eUqOWNleS4gOminOiJsuWbvuagh1xuICAgICAgdXNlU2luZ2xlQ29sb3JJY29uczogZmFsc2UsXG4gICAgfSxcbiAgfSxcblxuICBkYXJrOiB7XG4gICAgbmFtZTogJ2RhcmsnLFxuICAgIGRpc3BsYXlOYW1lOiAn5aSc6Ze05qih5byPJyxcbiAgICBjb2xvcnM6IHtcbiAgICAgIC8vIOaJi+acuui+ueahhlxuICAgICAgcGhvbmVGcmFtZTogJyMyYzJjMmMnLFxuICAgICAgcGhvbmVGcmFtZUdyYWRpZW50OiBbJyMxYTFhMWEnLCAnIzJjMmMyYycsICcjM2MzYzNjJywgJyMxYTFhMWEnXSxcblxuICAgICAgLy8g5Li76KaB6aKc6ImyXG4gICAgICBwcmltYXJ5OiAnIzUwNTA1MCcsXG4gICAgICBsaWdodDogJyMzYzNjM2MnLFxuICAgICAgdWx0cmFMaWdodDogJyMxYTFhMWEnLFxuICAgICAgc29mdDogJyMyYzJjMmMnLFxuICAgICAgZGVlcDogJyNjMGMwYzAnLFxuXG4gICAgICAvLyDmuJDlj5joibJcbiAgICAgIGdyYWRpZW50U3RhcnQ6ICcjM2MzYzNjJyxcbiAgICAgIGdyYWRpZW50RW5kOiAnIzJjMmMyYycsXG5cbiAgICAgIC8vIOaWh+Wtl+minOiJslxuICAgICAgdGV4dENvbG9yOiAnI2UwZTBlMCcsXG4gICAgICB0ZXh0UHJpbWFyeTogJyNjMGMwYzAnLFxuICAgICAgdGV4dFNlY29uZGFyeTogJyNhMGEwYTAnLFxuXG4gICAgICAvLyDovrnmoYblkozpmLTlvbFcbiAgICAgIGJvcmRlckNvbG9yOiAnIzNjM2MzYycsXG4gICAgICBidWJibGVTaGFkb3c6ICcwIDJweCA4cHggcmdiYSgwLCAwLCAwLCAwLjMpJyxcblxuICAgICAgLy8g5rCU5rOh6IOM5pmvXG4gICAgICBidWJibGVUaGVtQmc6ICcjMmEyYTJhJyxcbiAgICAgIGJ1YmJsZU1lQmc6ICcjNTA1MDUwJyxcblxuICAgICAgLy8g5rCU5rOh5paH5a2X6aKc6ImyXG4gICAgICBidWJibGVUaGVtVGV4dDogJyNlMGUwZTAnLFxuICAgICAgYnViYmxlTWVUZXh0OiAnI2MwYzBjMCcsXG5cbiAgICAgIC8vIOWktOmDqOiDjOaZr1xuICAgICAgaGVhZGVyQmc6ICdsaW5lYXItZ3JhZGllbnQoMzE1ZGVnLCAjMmMyYzJjIDAlLCAjMWExYTFhIDEwMCUpJyxcblxuICAgICAgLy8g5paw5aKe77ya54q25oCB5qCP6aKc6ImyXG4gICAgICBzdGF0dXNCYXJDb2xvcjogJyM4ODg4ODgnLFxuXG4gICAgICAvLyDmlrDlop7vvJrngbXliqjlspvpopzoibJcbiAgICAgIGR5bmFtaWNJc2xhbmRDb2xvcjogJyMzYzNjM2MnLFxuXG4gICAgICAvLyDmlrDlop7vvJrlupTnlKjog4zmma/oibJcbiAgICAgIGFwcEJnQ29sb3I6ICcjMWExYTFhJyxcblxuICAgICAgLy8g5paw5aKe77ya6K6+572u6aG16Z2i6IOM5pmv6ImyXG4gICAgICBzZXR0aW5nc0JnQ29sb3I6ICcjMWExYTFhJyxcblxuICAgICAgLy8g5paw5aKe77ya6K6+572u5Y2h54mH6IOM5pmv6ImyXG4gICAgICBzZXR0aW5nc0NhcmRCZ0NvbG9yOiAnIzJjMmMyYycsXG5cbiAgICAgIC8vIOaWsOWinu+8mumYtOW9seminOiJslxuICAgICAgc2hhZG93Q29sb3I6ICcjMDAwMDAwJyxcbiAgICAgIHNoYWRvd0NvbG9yUmdiYTogJ3JnYmEoMCwgMCwgMCwgMC41KScsXG5cbiAgICAgIC8vIOaWsOWinu+8muaYr+WQpuaYr+aal+iJsuS4u+mimFxuICAgICAgaXNEYXJrTW9kZTogdHJ1ZSxcblxuICAgICAgLy8g5paw5aKe77ya6buY6K6k5aOB57q4XG4gICAgICBkZWZhdWx0V2FsbHBhcGVyczoge1xuICAgICAgICBjaGF0OiAnaHR0cHM6Ly9naXRndWQuaW8vbG9sb2Rlc3UvbG9sb2JhYnl0dXRvcmlhbC8tL3Jhdy9tYXN0ZXIvbG9sb2dhbWUv57Sg5p2QL3dhbGxwYXBlci/mt7HoibLmmJ/mmJ9fMS5qcGcnLCAvLyDlpJzpl7TmqKHlvI/lo4HnurhcbiAgICAgICAgaG9tZTogJ2h0dHBzOi8vZ2l0Z3VkLmlvL2xvbG9kZXN1L2xvbG9iYWJ5dHV0b3JpYWwvLS9yYXcvbWFzdGVyL2xvbG9nYW1lL+e0oOadkC93YWxscGFwZXIv5rex6Imy5pif5pifXzEuanBnJywgLy8g5aSc6Ze05qih5byP5aOB57q4XG4gICAgICAgIHNldHRpbmdzOiAnIzFhMWExYScsXG4gICAgICB9LFxuXG4gICAgICAvLyDmlrDlop7vvJrmmK/lkKbkvb/nlKjljZXkuIDpopzoibLlm77moIdcbiAgICAgIHVzZVNpbmdsZUNvbG9ySWNvbnM6IGZhbHNlLFxuICAgIH0sXG4gIH0sXG59O1xuXG4vLyDkuLvpopjnrqHnkIblmajnsbtcbmV4cG9ydCBjbGFzcyBUaGVtZU1hbmFnZXIge1xuICBwcml2YXRlIHN0YXRpYyBUSEVNRV9TVE9SQUdFX0tFWSA9ICdibG14X3RoZW1lJztcbiAgcHJpdmF0ZSBzdGF0aWMgQ1VTVE9NX1RIRU1FX1NUT1JBR0VfS0VZID0gJ2JsbXhfY3VzdG9tX3RoZW1lJztcbiAgcHJpdmF0ZSBzdGF0aWMgVkVSU0lPTl9TVE9SQUdFX0tFWSA9ICdibG14X2FwcF92ZXJzaW9uJztcbiAgcHJpdmF0ZSBjdXJyZW50VGhlbWU6IFRoZW1lO1xuICBwcml2YXRlIHdhbGxwYXBlck1hbmFnZXI6IFdhbGxwYXBlck1hbmFnZXI7XG5cbiAgY29uc3RydWN0b3IoKSB7XG4gICAgLy8g5qOA5p+l54mI5pys5bm25Zyo6ZyA6KaB5pe25riF55CG57yT5a2YXG4gICAgdGhpcy5jaGVja1ZlcnNpb24oKTtcblxuICAgIC8vIOS7juacrOWcsOWtmOWCqOWKoOi9veS4u+mimOaIluS9v+eUqOm7mOiupOW+ruS/oeS4u+mimFxuICAgIGNvbnN0IHNhdmVkVGhlbWVOYW1lID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oVGhlbWVNYW5hZ2VyLlRIRU1FX1NUT1JBR0VfS0VZKSB8fCAnd2hpdGUnO1xuXG4gICAgaWYgKHNhdmVkVGhlbWVOYW1lID09PSAnY3VzdG9tJykge1xuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgY3VzdG9tVGhlbWVKc29uID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oVGhlbWVNYW5hZ2VyLkNVU1RPTV9USEVNRV9TVE9SQUdFX0tFWSk7XG4gICAgICAgIGlmIChjdXN0b21UaGVtZUpzb24pIHtcbiAgICAgICAgICB0aGlzLmN1cnJlbnRUaGVtZSA9IEpTT04ucGFyc2UoY3VzdG9tVGhlbWVKc29uKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aGlzLmN1cnJlbnRUaGVtZSA9IFRIRU1FUy53aGl0ZTtcbiAgICAgICAgfVxuICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdGYWlsZWQgdG8gbG9hZCBjdXN0b20gdGhlbWU6JywgZSk7XG4gICAgICAgIHRoaXMuY3VycmVudFRoZW1lID0gVEhFTUVTLndoaXRlO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmN1cnJlbnRUaGVtZSA9IFRIRU1FU1tzYXZlZFRoZW1lTmFtZV0gfHwgVEhFTUVTLndoaXRlO1xuICAgIH1cblxuICAgIC8vIOWIneWni+WMluWjgee6uOeuoeeQhuWZqFxuICAgIHRoaXMud2FsbHBhcGVyTWFuYWdlciA9IG5ldyBXYWxscGFwZXJNYW5hZ2VyKCk7XG5cbiAgICAvLyDlupTnlKjlvZPliY3kuLvpophcbiAgICB0aGlzLmFwcGx5VGhlbWUodGhpcy5jdXJyZW50VGhlbWUpO1xuICB9XG5cbiAgLy8g5qOA5p+l54mI5pys5bm25riF55CG6L+H5pe25pWw5o2uXG4gIHByaXZhdGUgY2hlY2tWZXJzaW9uKCk6IHZvaWQge1xuICAgIGNvbnN0IHNhdmVkVmVyc2lvbiA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKFRoZW1lTWFuYWdlci5WRVJTSU9OX1NUT1JBR0VfS0VZKTtcblxuICAgIC8vIOWmguaenOayoeacieeJiOacrOiusOW9leaIlueJiOacrOS4jeWMuemFje+8jOaJp+ihjOa4heeQhlxuICAgIGlmICghc2F2ZWRWZXJzaW9uIHx8IHNhdmVkVmVyc2lvbiAhPT0gQVBQX1ZFUlNJT04pIHtcbiAgICAgIGNvbnNvbGUubG9nKGDniYjmnKzmm7TmlrA6ICR7c2F2ZWRWZXJzaW9uIHx8ICfliJ3mrKHlronoo4UnfSAtPiAke0FQUF9WRVJTSU9OfSwg5riF55CG6L+H5pe25pWw5o2uLi4uYCk7XG4gICAgICB0aGlzLmNsZWFuT3V0ZGF0ZWREYXRhKCk7XG5cbiAgICAgIC8vIOS/neWtmOaWsOeJiOacrOWPt1xuICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oVGhlbWVNYW5hZ2VyLlZFUlNJT05fU1RPUkFHRV9LRVksIEFQUF9WRVJTSU9OKTtcbiAgICB9XG4gIH1cblxuICAvLyDmuIXnkIbov4fml7bmlbDmja5cbiAgcHJpdmF0ZSBjbGVhbk91dGRhdGVkRGF0YSgpOiB2b2lkIHtcbiAgICAvLyDkv53nlZnnlKjmiLfnmoTkuKrkurrorr7nva7mlbDmja7vvIzkvYbmuIXnkIblj6/og73lr7zoh7Tpl67popjnmoTkuLvpopjlkozlo4HnurjmlbDmja5cbiAgICBjb25zdCBrZXlzVG9QcmVzZXJ2ZTogc3RyaW5nW10gPSBbXTtcblxuICAgIC8vIOafpeaJvuaJgOaciemcgOimgeS/neeVmeeahOS4quS6uuiuvue9rumUrlxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbG9jYWxTdG9yYWdlLmxlbmd0aDsgaSsrKSB7XG4gICAgICBjb25zdCBrZXkgPSBsb2NhbFN0b3JhZ2Uua2V5KGkpO1xuICAgICAgaWYgKFxuICAgICAgICBrZXkgJiZcbiAgICAgICAgKGtleS5zdGFydHNXaXRoKCdibG14X3VzZXJfbmFtZV8nKSB8fFxuICAgICAgICAgIGtleS5zdGFydHNXaXRoKCdibG14X3VzZXJfYXZhdGFyXycpIHx8XG4gICAgICAgICAga2V5LnN0YXJ0c1dpdGgoJ2JsbXhfY2hhcl9hdmF0YXJfJykgfHxcbiAgICAgICAgICBrZXkuc3RhcnRzV2l0aCgnYmxteF9yZW1hcmtfJykgfHxcbiAgICAgICAgICBrZXkuc3RhcnRzV2l0aCgnYmxteF9zaWduYXR1cmVfJykgfHxcbiAgICAgICAgICBrZXkuc3RhcnRzV2l0aCgnYmxteF9jb3Zlcl9waG90b18nKSB8fFxuICAgICAgICAgIGtleS5zdGFydHNXaXRoKCdibG14X2lucHV0X3BsYWNlaG9sZGVyXycpKVxuICAgICAgKSB7XG4gICAgICAgIGtleXNUb1ByZXNlcnZlLnB1c2goa2V5KTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyDkuLTml7bkv53lrZjpnIDopoHkv53nlZnnmoTmlbDmja5cbiAgICBjb25zdCBwcmVzZXJ2ZWREYXRhOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+ID0ge307XG4gICAga2V5c1RvUHJlc2VydmUuZm9yRWFjaChrZXkgPT4ge1xuICAgICAgY29uc3QgdmFsdWUgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShrZXkpO1xuICAgICAgaWYgKHZhbHVlKSBwcmVzZXJ2ZWREYXRhW2tleV0gPSB2YWx1ZTtcbiAgICB9KTtcblxuICAgIC8vIOa4hemZpOaJgOaciSBibG14XyDlvIDlpLTnmoTmlbDmja5cbiAgICBmb3IgKGxldCBpID0gbG9jYWxTdG9yYWdlLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XG4gICAgICBjb25zdCBrZXkgPSBsb2NhbFN0b3JhZ2Uua2V5KGkpO1xuICAgICAgaWYgKGtleSAmJiBrZXkuc3RhcnRzV2l0aCgnYmxteF8nKSkge1xuICAgICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbShrZXkpO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIOaBouWkjemcgOimgeS/neeVmeeahOaVsOaNrlxuICAgIE9iamVjdC5lbnRyaWVzKHByZXNlcnZlZERhdGEpLmZvckVhY2goKFtrZXksIHZhbHVlXSkgPT4ge1xuICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oa2V5LCB2YWx1ZSk7XG4gICAgfSk7XG5cbiAgICBjb25zb2xlLmxvZygn5pWw5o2u5riF55CG5a6M5oiQ77yM5L+d55WZ5LqG55So5oi35Liq5Lq66K6+572uJyk7XG4gIH1cblxuICAvLyDojrflj5blvZPliY3kuLvpophcbiAgZ2V0Q3VycmVudFRoZW1lKCk6IFRoZW1lIHtcbiAgICByZXR1cm4gdGhpcy5jdXJyZW50VGhlbWU7XG4gIH1cblxuICAvLyDojrflj5bmiYDmnInpu5jorqTkuLvpophcbiAgZ2V0VGhlbWVzKCk6IFJlY29yZDxzdHJpbmcsIFRoZW1lPiB7XG4gICAgcmV0dXJuIFRIRU1FUztcbiAgfVxuXG4gIC8vIOiOt+WPluWjgee6uOeuoeeQhuWZqFxuICBnZXRXYWxscGFwZXJNYW5hZ2VyKCk6IFdhbGxwYXBlck1hbmFnZXIge1xuICAgIHJldHVybiB0aGlzLndhbGxwYXBlck1hbmFnZXI7XG4gIH1cblxuICAvLyDliIfmjaLliLDmjIflrprkuLvpophcbiAgc3dpdGNoVGhlbWUodGhlbWVOYW1lOiBzdHJpbmcpOiB2b2lkIHtcbiAgICBpZiAodGhlbWVOYW1lID09PSAnY3VzdG9tJykge1xuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgY3VzdG9tVGhlbWVKc29uID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oVGhlbWVNYW5hZ2VyLkNVU1RPTV9USEVNRV9TVE9SQUdFX0tFWSk7XG4gICAgICAgIGlmIChjdXN0b21UaGVtZUpzb24pIHtcbiAgICAgICAgICB0aGlzLmN1cnJlbnRUaGVtZSA9IEpTT04ucGFyc2UoY3VzdG9tVGhlbWVKc29uKTtcbiAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShUaGVtZU1hbmFnZXIuVEhFTUVfU1RPUkFHRV9LRVksICdjdXN0b20nKTtcblxuICAgICAgICAgIC8vIOabtOaWsOWjgee6uOeuoeeQhuWZqOS4reeahOW9k+WJjeS4u+mimOWQjeensFxuICAgICAgICAgIHRoaXMud2FsbHBhcGVyTWFuYWdlci5zZXRDdXJyZW50VGhlbWVOYW1lKCdjdXN0b20nKTtcblxuICAgICAgICAgIHRoaXMuYXBwbHlUaGVtZSh0aGlzLmN1cnJlbnRUaGVtZSk7XG5cbiAgICAgICAgICAvLyDlupTnlKjkuLvpopjpu5jorqTlo4HnurhcbiAgICAgICAgICB0aGlzLndhbGxwYXBlck1hbmFnZXIuYXBwbHlUaGVtZURlZmF1bHRXYWxscGFwZXJzKHRoaXMuY3VycmVudFRoZW1lKTtcbiAgICAgICAgfVxuICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdGYWlsZWQgdG8gbG9hZCBjdXN0b20gdGhlbWU6JywgZSk7XG4gICAgICB9XG4gICAgfSBlbHNlIGlmIChUSEVNRVNbdGhlbWVOYW1lXSkge1xuICAgICAgdGhpcy5jdXJyZW50VGhlbWUgPSBUSEVNRVNbdGhlbWVOYW1lXTtcbiAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKFRoZW1lTWFuYWdlci5USEVNRV9TVE9SQUdFX0tFWSwgdGhlbWVOYW1lKTtcblxuICAgICAgLy8g5pu05paw5aOB57q4566h55CG5Zmo5Lit55qE5b2T5YmN5Li76aKY5ZCN56ewXG4gICAgICB0aGlzLndhbGxwYXBlck1hbmFnZXIuc2V0Q3VycmVudFRoZW1lTmFtZSh0aGVtZU5hbWUpO1xuXG4gICAgICB0aGlzLmFwcGx5VGhlbWUodGhpcy5jdXJyZW50VGhlbWUpO1xuXG4gICAgICAvLyDlupTnlKjkuLvpopjpu5jorqTlo4HnurhcbiAgICAgIHRoaXMud2FsbHBhcGVyTWFuYWdlci5hcHBseVRoZW1lRGVmYXVsdFdhbGxwYXBlcnModGhpcy5jdXJyZW50VGhlbWUpO1xuICAgIH1cbiAgfVxuXG4gIC8vIOS/neWtmOiHquWumuS5ieS4u+mimFxuICBzYXZlQ3VzdG9tVGhlbWUodGhlbWU6IFRoZW1lKTogdm9pZCB7XG4gICAgdGhpcy5jdXJyZW50VGhlbWUgPSB0aGVtZTtcbiAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShUaGVtZU1hbmFnZXIuQ1VTVE9NX1RIRU1FX1NUT1JBR0VfS0VZLCBKU09OLnN0cmluZ2lmeSh0aGVtZSkpO1xuICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKFRoZW1lTWFuYWdlci5USEVNRV9TVE9SQUdFX0tFWSwgJ2N1c3RvbScpO1xuXG4gICAgLy8g5pu05paw5aOB57q4566h55CG5Zmo5Lit55qE5b2T5YmN5Li76aKY5ZCN56ewXG4gICAgdGhpcy53YWxscGFwZXJNYW5hZ2VyLnNldEN1cnJlbnRUaGVtZU5hbWUoJ2N1c3RvbScpO1xuXG4gICAgdGhpcy5hcHBseVRoZW1lKHRoZW1lKTtcblxuICAgIC8vIOW6lOeUqOS4u+mimOm7mOiupOWjgee6uFxuICAgIHRoaXMud2FsbHBhcGVyTWFuYWdlci5hcHBseVRoZW1lRGVmYXVsdFdhbGxwYXBlcnModGhlbWUpO1xuICB9XG5cbiAgLy8g5bqU55So5Li76aKY5YiwRE9NXG4gIHByaXZhdGUgYXBwbHlUaGVtZSh0aGVtZTogVGhlbWUpOiB2b2lkIHtcbiAgICBjb25zdCBjb2xvcnMgPSB0aGVtZS5jb2xvcnM7XG4gICAgY29uc3Qgcm9vdCA9IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudDtcblxuICAgIC8vIOiuvue9rkNTU+WPmOmHj1xuICAgIHJvb3Quc3R5bGUuc2V0UHJvcGVydHkoJy0tcGhvbmVGcmFtZScsIGNvbG9ycy5waG9uZUZyYW1lKTtcbiAgICByb290LnN0eWxlLnNldFByb3BlcnR5KCctLXByaW1hcnktYmx1ZScsIGNvbG9ycy5wcmltYXJ5KTtcbiAgICByb290LnN0eWxlLnNldFByb3BlcnR5KCctLWxpZ2h0LWJsdWUnLCBjb2xvcnMubGlnaHQpO1xuICAgIHJvb3Quc3R5bGUuc2V0UHJvcGVydHkoJy0tdWx0cmEtbGlnaHQtYmx1ZScsIGNvbG9ycy51bHRyYUxpZ2h0KTtcbiAgICByb290LnN0eWxlLnNldFByb3BlcnR5KCctLWJsdWUtZ3JhZGllbnQtc3RhcnQnLCBjb2xvcnMuZ3JhZGllbnRTdGFydCk7XG4gICAgcm9vdC5zdHlsZS5zZXRQcm9wZXJ0eSgnLS1ibHVlLWdyYWRpZW50LWVuZCcsIGNvbG9ycy5ncmFkaWVudEVuZCk7XG4gICAgcm9vdC5zdHlsZS5zZXRQcm9wZXJ0eSgnLS1zb2Z0LWJsdWUnLCBjb2xvcnMuc29mdCk7XG4gICAgcm9vdC5zdHlsZS5zZXRQcm9wZXJ0eSgnLS1kZWVwLWJsdWUnLCBjb2xvcnMuZGVlcCk7XG5cbiAgICAvLyDmoLnmja51c2VTaW5nbGVDb2xvckljb25z5bGe5oCn6K6+572u5Zu+5qCH6aKc6ImyXG4gICAgaWYgKGNvbG9ycy51c2VTaW5nbGVDb2xvckljb25zKSB7XG4gICAgICAvLyDkvb/nlKjkuLvpopjoibLkvZzkuLrlm77moIfpopzoibJcbiAgICAgIGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LmFkZCgnc2luZ2xlLWNvbG9yLWljb24nKTtcblxuICAgICAgLy8g6K6h566X5riQ5Y+Y6Imy77ya5q+U5Li76Imy5pu05Lqu5ZKM5pu05pqX55qE5Y+Y5L2TXG4gICAgICBjb25zdCBsaWdodGVyQ29sb3IgPSB0aGlzLmxpZ2h0ZW5EYXJrZW5Db2xvcihjb2xvcnMucHJpbWFyeSwgMjApO1xuICAgICAgY29uc3QgZGFya2VyQ29sb3IgPSB0aGlzLmxpZ2h0ZW5EYXJrZW5Db2xvcihjb2xvcnMucHJpbWFyeSwgLTIwKTtcblxuICAgICAgLy8g6K6+572u5riQ5Y+Y6Imy5Y+Y6YePXG4gICAgICByb290LnN0eWxlLnNldFByb3BlcnR5KCctLXByaW1hcnktZ3JhZGllbnQtbGlnaHQnLCBsaWdodGVyQ29sb3IpO1xuICAgICAgcm9vdC5zdHlsZS5zZXRQcm9wZXJ0eSgnLS1wcmltYXJ5LWdyYWRpZW50LWRhcmsnLCBkYXJrZXJDb2xvcik7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIOS9v+eUqOm7mOiupOeahOe7v+iJsuWSjOeBsOiJsuWbvuagh1xuICAgICAgZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QucmVtb3ZlKCdzaW5nbGUtY29sb3ItaWNvbicpO1xuICAgICAgcm9vdC5zdHlsZS5zZXRQcm9wZXJ0eSgnLS13ZWNoYXQtZ3JlZW4taWNvbicsIHRoZW1lLm5hbWUgPT09ICd3aGl0ZScgPyAnIzA3QzE2MCcgOiAnIzA3QzE2MCcpO1xuICAgICAgcm9vdC5zdHlsZS5zZXRQcm9wZXJ0eSgnLS1zZXR0aW5ncy1pY29uLWNvbG9yJywgdGhlbWUubmFtZSA9PT0gJ3doaXRlJyA/ICcjOGE4YThhJyA6ICcjOGE4YThhJyk7XG4gICAgfVxuXG4gICAgcm9vdC5zdHlsZS5zZXRQcm9wZXJ0eSgnLS13ZWNoYXQtZ3JlZW4tYnViYmxlJywgY29sb3JzLmxpZ2h0KTtcbiAgICByb290LnN0eWxlLnNldFByb3BlcnR5KCctLXdlY2hhdC1iZycsIGNvbG9ycy51bHRyYUxpZ2h0KTtcbiAgICByb290LnN0eWxlLnNldFByb3BlcnR5KCctLWxpbmstY29sb3InLCBjb2xvcnMucHJpbWFyeSk7XG4gICAgcm9vdC5zdHlsZS5zZXRQcm9wZXJ0eSgnLS10ZXh0LWNvbG9yJywgY29sb3JzLnRleHRDb2xvcik7XG4gICAgcm9vdC5zdHlsZS5zZXRQcm9wZXJ0eSgnLS10ZXh0LXByaW1hcnknLCBjb2xvcnMudGV4dFByaW1hcnkpO1xuICAgIHJvb3Quc3R5bGUuc2V0UHJvcGVydHkoJy0tdGV4dC1zZWNvbmRhcnknLCBjb2xvcnMudGV4dFNlY29uZGFyeSk7XG4gICAgcm9vdC5zdHlsZS5zZXRQcm9wZXJ0eSgnLS1ib3JkZXItY29sb3InLCBjb2xvcnMuYm9yZGVyQ29sb3IpO1xuICAgIHJvb3Quc3R5bGUuc2V0UHJvcGVydHkoJy0taGVhZGVyLWJnJywgY29sb3JzLmhlYWRlckJnKTtcbiAgICByb290LnN0eWxlLnNldFByb3BlcnR5KCctLWJ1YmJsZS1zaGFkb3cnLCBjb2xvcnMuYnViYmxlU2hhZG93KTtcbiAgICByb290LnN0eWxlLnNldFByb3BlcnR5KCctLXdlY2hhdC1idWJibGUtdGhlbS1iZycsIGNvbG9ycy5idWJibGVUaGVtQmcpO1xuICAgIHJvb3Quc3R5bGUuc2V0UHJvcGVydHkoJy0td2VjaGF0LWJ1YmJsZS1tZS1iZycsIGNvbG9ycy5idWJibGVNZUJnKTtcblxuICAgIC8vIOiuvue9ruawlOazoeaWh+Wtl+minOiJslxuICAgIHJvb3Quc3R5bGUuc2V0UHJvcGVydHkoJy0td2VjaGF0LWJ1YmJsZS10aGVtLXRleHQnLCBjb2xvcnMuYnViYmxlVGhlbVRleHQgfHwgY29sb3JzLnByaW1hcnkpO1xuICAgIHJvb3Quc3R5bGUuc2V0UHJvcGVydHkoJy0td2VjaGF0LWJ1YmJsZS1tZS10ZXh0JywgY29sb3JzLmJ1YmJsZU1lVGV4dCB8fCAnI2ZmZmZmZicpO1xuXG4gICAgLy8g6K6+572u54q25oCB5qCP6aKc6ImyXG4gICAgcm9vdC5zdHlsZS5zZXRQcm9wZXJ0eSgnLS1zdGF0dXMtYmFyLWNvbG9yJywgY29sb3JzLnN0YXR1c0JhckNvbG9yKTtcblxuICAgIC8vIOiuvue9rueBteWKqOWym+minOiJslxuICAgIHJvb3Quc3R5bGUuc2V0UHJvcGVydHkoJy0tZHluYW1pYy1pc2xhbmQtY29sb3InLCBjb2xvcnMuZHluYW1pY0lzbGFuZENvbG9yKTtcblxuICAgIC8vIOiuvue9ruW6lOeUqOiDjOaZr+iJslxuICAgIHJvb3Quc3R5bGUuc2V0UHJvcGVydHkoJy0tYXBwLWJnLWNvbG9yJywgY29sb3JzLmFwcEJnQ29sb3IpO1xuXG4gICAgLy8g6K6+572u6K6+572u6aG16Z2i6IOM5pmv6ImyXG4gICAgcm9vdC5zdHlsZS5zZXRQcm9wZXJ0eSgnLS1zZXR0aW5ncy1iZy1jb2xvcicsIGNvbG9ycy5zZXR0aW5nc0JnQ29sb3IpO1xuXG4gICAgLy8g6K6+572u6K6+572u5Y2h54mH6IOM5pmv6ImyXG4gICAgcm9vdC5zdHlsZS5zZXRQcm9wZXJ0eSgnLS1zZXR0aW5ncy1jYXJkLWJnLWNvbG9yJywgY29sb3JzLnNldHRpbmdzQ2FyZEJnQ29sb3IpO1xuXG4gICAgLy8g6K6+572u6Zi05b2x6aKc6ImyXG4gICAgcm9vdC5zdHlsZS5zZXRQcm9wZXJ0eSgnLS1zaGFkb3ctY29sb3InLCBjb2xvcnMuc2hhZG93Q29sb3IpO1xuICAgIHJvb3Quc3R5bGUuc2V0UHJvcGVydHkoJy0tc2hhZG93LWNvbG9yLXJnYmEnLCBjb2xvcnMuc2hhZG93Q29sb3JSZ2JhKTtcblxuICAgIC8vIOaPkOWPlumYtOW9seminOiJsueahFJHQuWIhumHj++8jOeUqOS6juWFtuS7luiuoeeul1xuICAgIGNvbnN0IHNoYWRvd1JHQiA9IHRoaXMuZXh0cmFjdFJnYkNvbXBvbmVudHMoY29sb3JzLnNoYWRvd0NvbG9yKTtcbiAgICByb290LnN0eWxlLnNldFByb3BlcnR5KCctLXNoYWRvdy1yJywgc2hhZG93UkdCLnIudG9TdHJpbmcoKSk7XG4gICAgcm9vdC5zdHlsZS5zZXRQcm9wZXJ0eSgnLS1zaGFkb3ctZycsIHNoYWRvd1JHQi5nLnRvU3RyaW5nKCkpO1xuICAgIHJvb3Quc3R5bGUuc2V0UHJvcGVydHkoJy0tc2hhZG93LWInLCBzaGFkb3dSR0IuYi50b1N0cmluZygpKTtcblxuICAgIC8vIOiuvue9ruaal+iJsuaooeW8j+exu1xuICAgIGlmIChjb2xvcnMuaXNEYXJrTW9kZSkge1xuICAgICAgZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QuYWRkKCdkYXJrLW1vZGUnKTtcbiAgICB9IGVsc2Uge1xuICAgICAgZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QucmVtb3ZlKCdkYXJrLW1vZGUnKTtcbiAgICB9XG5cbiAgICAvLyDmiYvmnLrovrnmoYbmoLflvI9cbiAgICBjb25zdCBwaG9uZUZyYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBob25lLWZyYW1lJykgYXMgSFRNTEVsZW1lbnQ7XG4gICAgaWYgKHBob25lRnJhbWUpIHtcbiAgICAgIHBob25lRnJhbWUuc3R5bGUuYmFja2dyb3VuZCA9IGNvbG9ycy5waG9uZUZyYW1lO1xuXG4gICAgICAvLyDmm7TmlrDmiYvmnLrovrnmoYbmuJDlj5hcbiAgICAgIGNvbnN0IGdyYWRpZW50Q29sb3JzID0gY29sb3JzLnBob25lRnJhbWVHcmFkaWVudC5qb2luKCcsICcpO1xuICAgICAgY29uc3QgcGhvbmVGcmFtZUJlZm9yZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3N0eWxlJyk7XG4gICAgICBwaG9uZUZyYW1lQmVmb3JlLnRleHRDb250ZW50ID0gYFxuICAgICAgICAucGhvbmUtZnJhbWU6OmJlZm9yZSB7XG4gICAgICAgICAgYmFja2dyb3VuZDogbGluZWFyLWdyYWRpZW50KDQ1ZGVnLCAke2dyYWRpZW50Q29sb3JzfSk7XG4gICAgICAgICAgYmFja2dyb3VuZC1zaXplOiA0MDAlIDQwMCU7XG4gICAgICAgIH1cbiAgICAgIGA7XG5cbiAgICAgIC8vIOenu+mZpOaXp+agt+W8j+W5tua3u+WKoOaWsOagt+W8j1xuICAgICAgY29uc3Qgb2xkU3R5bGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncGhvbmUtZnJhbWUtc3R5bGUnKTtcbiAgICAgIGlmIChvbGRTdHlsZSkge1xuICAgICAgICBvbGRTdHlsZS5yZW1vdmUoKTtcbiAgICAgIH1cblxuICAgICAgcGhvbmVGcmFtZUJlZm9yZS5pZCA9ICdwaG9uZS1mcmFtZS1zdHlsZSc7XG4gICAgICBkb2N1bWVudC5oZWFkLmFwcGVuZENoaWxkKHBob25lRnJhbWVCZWZvcmUpO1xuICAgIH1cblxuICAgIC8vIOabtOaWsOWKqOaAgeWym+minOiJslxuICAgIGNvbnN0IGR5bmFtaWNJc2xhbmQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZHluYW1pYy1pc2xhbmQnKSBhcyBIVE1MRWxlbWVudDtcbiAgICBpZiAoZHluYW1pY0lzbGFuZCkge1xuICAgICAgZHluYW1pY0lzbGFuZC5zdHlsZS5iYWNrZ3JvdW5kID0gY29sb3JzLmR5bmFtaWNJc2xhbmRDb2xvcjtcbiAgICB9XG5cbiAgICAvLyDmm7TmlrDnirbmgIHmoI/popzoibJcbiAgICBjb25zdCBzdGF0dXNMZWZ0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnN0YXR1cy1sZWZ0JykgYXMgSFRNTEVsZW1lbnQ7XG4gICAgY29uc3Qgc3RhdHVzUmlnaHQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuc3RhdHVzLXJpZ2h0JykgYXMgSFRNTEVsZW1lbnQ7XG4gICAgaWYgKHN0YXR1c0xlZnQgJiYgc3RhdHVzUmlnaHQpIHtcbiAgICAgIHN0YXR1c0xlZnQuc3R5bGUuY29sb3IgPSBjb2xvcnMuc3RhdHVzQmFyQ29sb3I7XG4gICAgICBzdGF0dXNSaWdodC5zdHlsZS5jb2xvciA9IGNvbG9ycy5zdGF0dXNCYXJDb2xvcjtcbiAgICB9XG5cbiAgICAvLyDmm7TmlrDorr7nva7pobXpnaLog4zmma/oibJcbiAgICBjb25zdCBzZXR0aW5nc1ZpZXcgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2V0dGluZ3MtdmlldycpO1xuICAgIGlmIChzZXR0aW5nc1ZpZXcpIHtcbiAgICAgIHNldHRpbmdzVmlldy5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBjb2xvcnMuc2V0dGluZ3NCZ0NvbG9yO1xuICAgIH1cblxuICAgIC8vIOabtOaWsOiuvue9ruWNoeeJh+iDjOaZr+iJslxuICAgIGNvbnN0IHNldHRpbmdzQ2FyZHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuc2V0dGluZ3MtY2FyZCcpO1xuICAgIHNldHRpbmdzQ2FyZHMuZm9yRWFjaCgoY2FyZDogRWxlbWVudCkgPT4ge1xuICAgICAgKGNhcmQgYXMgSFRNTEVsZW1lbnQpLnN0eWxlLmJhY2tncm91bmRDb2xvciA9IGNvbG9ycy5zZXR0aW5nc0NhcmRCZ0NvbG9yO1xuICAgIH0pO1xuXG4gICAgLy8g5pu05paw5omL5py66Zi05b2xXG4gICAgaWYgKHBob25lRnJhbWUpIHtcbiAgICAgIHBob25lRnJhbWUuc3R5bGUuYm94U2hhZG93ID0gYFxuICAgICAgICAwIDE1cHggMjBweCAke3RoaXMuaGV4VG9SZ2JhKGNvbG9ycy5zaGFkb3dDb2xvciwgMC4yNSl9LFxuICAgICAgICAwIDhweCAyMHB4ICR7dGhpcy5oZXhUb1JnYmEoY29sb3JzLnNoYWRvd0NvbG9yLCAwLjE1KX0sXG4gICAgICAgIDAgM3B4IDhweCByZ2JhKDAsIDAsIDAsIDAuMSksXG4gICAgICAgIGluc2V0IDAgMXB4IDAgcmdiYSgyNTUsIDI1NSwgMjU1LCAwLjUpLFxuICAgICAgICBpbnNldCAwIC0xcHggMCByZ2JhKDI1NSwgMjU1LCAyNTUsIDAuMiksXG4gICAgICAgIDAgNXB4ICR7dGhpcy5oZXhUb1JnYmEoY29sb3JzLnNoYWRvd0NvbG9yLCAwLjA4KX1cbiAgICAgIGA7XG4gICAgfVxuXG4gICAgLy8g5pu05paw5rCU5rOh6Zi05b2x5ZKM6aKc6ImyXG4gICAgY29uc3Qgc3R5bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzdHlsZScpO1xuICAgIHN0eWxlLmlkID0gJ3RoZW1lLWR5bmFtaWMtc3R5bGVzJztcblxuICAgIC8vIOajgOafpeaYr+WQpuaYr+iHquWumuS5ieS4u+mimO+8iOS9v+eUqOe6r+iJsuiDjOaZr++8iei/mOaYr+m7mOiupOS4u+mimO+8iOS/neeVmea4kOWPmO+8iVxuICAgIC8vIOazqOmHiuaOieacquS9v+eUqOeahOWPmOmHj1xuICAgIC8vIGNvbnN0IGlzQ3VzdG9tQnViYmxlQ29sb3JzID0gdGhlbWUubmFtZSA9PT0gJ2N1c3RvbSc7XG5cbiAgICBzdHlsZS50ZXh0Q29udGVudCA9IGBcbiAgICAgIC8qIOW+ruS/oeS4u+mimOS4i+eahOawlOazoeagt+W8jyAtIOebtOaOpeW6lOeUqOe7v+iJsiAqL1xuICAgICAgLm1lc3NhZ2Utcm93Lm1lIC5tZXNzYWdlLWJ1YmJsZSB7XG4gICAgICAgIGJhY2tncm91bmQtY29sb3I6ICR7Y29sb3JzLmJ1YmJsZU1lQmd9ICFpbXBvcnRhbnQ7XG4gICAgICAgIGJhY2tncm91bmQ6ICR7Y29sb3JzLmJ1YmJsZU1lQmd9ICFpbXBvcnRhbnQ7XG4gICAgICAgIGNvbG9yOiAke2NvbG9ycy5idWJibGVNZVRleHQgfHwgJyNmZmZmZmYnfSAhaW1wb3J0YW50O1xuICAgICAgICBib3gtc2hhZG93OiAwIDRweCAxMnB4ICR7dGhpcy5oZXhUb1JnYmEoY29sb3JzLnNoYWRvd0NvbG9yLCAwLjMpfTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgLyog5a+55pa55rCU5rOh5qC35byPICovXG4gICAgICAubWVzc2FnZS1yb3cudGhlbSAubWVzc2FnZS1idWJibGUge1xuICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAke2NvbG9ycy5idWJibGVUaGVtQmd9ICFpbXBvcnRhbnQ7XG4gICAgICAgIGJhY2tncm91bmQ6ICR7Y29sb3JzLmJ1YmJsZVRoZW1CZ30gIWltcG9ydGFudDtcbiAgICAgICAgY29sb3I6ICR7Y29sb3JzLmJ1YmJsZVRoZW1UZXh0IHx8IGNvbG9ycy5wcmltYXJ5fSAhaW1wb3J0YW50O1xuICAgICAgfVxuICAgICAgXG4gICAgICAvKiDnoa7kv53or63pn7PmsJTms6HkuZ/kvb/nlKjmraPnoa7nmoTpopzoibIgKi9cbiAgICAgIC5tZXNzYWdlLXJvdy5tZSAubWVzc2FnZS1idWJibGUudm9pY2UtYnViYmxlIHtcbiAgICAgICAgYmFja2dyb3VuZDogJHtjb2xvcnMuYnViYmxlTWVCZ30gIWltcG9ydGFudDtcbiAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogJHtjb2xvcnMuYnViYmxlTWVCZ30gIWltcG9ydGFudDtcbiAgICAgICAgYmFja2dyb3VuZC1pbWFnZTogbm9uZSAhaW1wb3J0YW50O1xuICAgICAgICBjb2xvcjogJHtjb2xvcnMuYnViYmxlTWVUZXh0IHx8ICcjZmZmZmZmJ30gIWltcG9ydGFudDtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgLm1lc3NhZ2Utcm93LnRoZW0gLm1lc3NhZ2UtYnViYmxlLnZvaWNlLWJ1YmJsZSB7XG4gICAgICAgIGJhY2tncm91bmQ6ICR7Y29sb3JzLmJ1YmJsZVRoZW1CZ30gIWltcG9ydGFudDtcbiAgICAgICAgY29sb3I6ICR7Y29sb3JzLmJ1YmJsZVRoZW1UZXh0IHx8IGNvbG9ycy5wcmltYXJ5fSAhaW1wb3J0YW50O1xuICAgICAgfVxuICAgICAgXG4gICAgICAvKiDmnIvlj4vlnIjmloflrZfmj4/ov7Dlm77niYfmoLflvI8gKi9cbiAgICAgIC5wb3N0LW1lZGlhIC5pbWFnZS1kZXNjLWNvbnRlbnQge1xuICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAke3RoaXMuaGV4VG9SZ2JhKGNvbG9ycy5wcmltYXJ5LCAwLjEpfSAhaW1wb3J0YW50O1xuICAgICAgICBib3JkZXI6IDFweCBzb2xpZCAke3RoaXMuaGV4VG9SZ2JhKGNvbG9ycy5wcmltYXJ5LCAwLjEpfSAhaW1wb3J0YW50O1xuICAgICAgfVxuICAgICAgXG4gICAgICAvKiDlj5HpgIHmjInpkq7moLflvI8gKi9cbiAgICAgIC53ZWNoYXQtZm9vdGVyIC5zZW5kLWJ0biB7XG4gICAgICAgIGJveC1zaGFkb3c6IDAgNHB4IDEycHggJHt0aGlzLmhleFRvUmdiYShjb2xvcnMuc2hhZG93Q29sb3IsIDAuMyl9O1xuICAgICAgfVxuICAgICAgXG4gICAgICAud2VjaGF0LWZvb3RlciAuc2VuZC1idG46aG92ZXIge1xuICAgICAgICBib3gtc2hhZG93OiAwIDZweCAxNnB4ICR7dGhpcy5oZXhUb1JnYmEoY29sb3JzLnNoYWRvd0NvbG9yLCAwLjQpfTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgLyog5aSc6Ze05qih5byP54m55q6K5aSE55CGICovXG4gICAgICAke1xuICAgICAgICBjb2xvcnMuaXNEYXJrTW9kZVxuICAgICAgICAgID8gYFxuICAgICAgICAuc2V0dGluZ3MtY2FyZCBwLCBcbiAgICAgICAgLnNldHRpbmdzLWNhcmQgYSxcbiAgICAgICAgLnNldHRpbmdzLWNhcmQgbGkgYSxcbiAgICAgICAgLnBvc3QtY29udGVudCxcbiAgICAgICAgLnBvc3QtbWV0YSxcbiAgICAgICAgLnRoZW1lLWVkaXRvci1tb2RhbCAubW9kYWwtY29udGVudCB7XG4gICAgICAgICAgY29sb3I6ICNlMGUwZTAgIWltcG9ydGFudDtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLnNldHRpbmdzLWNhcmQsXG4gICAgICAgIC50aGVtZS1lZGl0b3ItbW9kYWwgLm1vZGFsLWNvbnRlbnQge1xuICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6ICMyYTJhMmEgIWltcG9ydGFudDtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLyog5L+u5pS55aSc6Ze05qih5byP5LiL5q2j5Zyo6L6T5YWl5oyH56S65Zmo5qC35byPICovXG4gICAgICAgIC50eXBpbmctaW5kaWNhdG9yIC5tZXNzYWdlLWJ1YmJsZSB7XG4gICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogJHtjb2xvcnMuYnViYmxlVGhlbUJnfSAhaW1wb3J0YW50O1xuICAgICAgICAgIGJhY2tncm91bmQ6ICR7Y29sb3JzLmJ1YmJsZVRoZW1CZ30gIWltcG9ydGFudDtcbiAgICAgICAgICBjb2xvcjogI2ZmZmZmZiAhaW1wb3J0YW50O1xuICAgICAgICAgIGJvcmRlcjogbm9uZSAhaW1wb3J0YW50O1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAudHlwaW5nLWRvdCB7XG4gICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogcmdiYSgyNTUsIDI1NSwgMjU1LCAwLjYpICFpbXBvcnRhbnQ7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC5zZXR0aW5ncy1jYXJkIGxpIHtcbiAgICAgICAgICBib3JkZXItYm90dG9tLWNvbG9yOiAjM2MzYzNjICFpbXBvcnRhbnQ7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC5zZXR0aW5ncy1jYXJkIGxpIGEge1xuICAgICAgICAgIGNvbG9yOiAjYTBhMGEwICFpbXBvcnRhbnQ7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgICNzaG93LWxhc3QtYWktcmVzcG9uc2UtYnRuLFxuICAgICAgICAjc2hvdy1sYXN0LXNlbnQtcHJvbXB0LWJ0biB7XG4gICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogIzJjMmMyYyAhaW1wb3J0YW50O1xuICAgICAgICAgIGNvbG9yOiAjYTBhMGEwICFpbXBvcnRhbnQ7XG4gICAgICAgIH1cblxuICAgICAgICAvKiDmnIvlj4vlnIjmmpfoibLmqKHlvI8gKi9cbiAgICAgICAgI21vbWVudHMtdmlldyB7XG4gICAgICAgICAgYmFja2dyb3VuZDogbGluZWFyLWdyYWRpZW50KDE4MGRlZywgIzFhMWExYSAwJSwgIzI1MjUyNSAxMDAlKSAhaW1wb3J0YW50O1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAubW9tZW50cy1ib2R5IHtcbiAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjMWExYTFhICFpbXBvcnRhbnQ7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC5tb21lbnQtcG9zdCB7XG4gICAgICAgICAgYm9yZGVyLWJvdHRvbS1jb2xvcjogIzJjMmMyYyAhaW1wb3J0YW50O1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAucG9zdC1pbnRlcmFjdGlvbnMge1xuICAgICAgICAgIGJhY2tncm91bmQ6ICMyYTJhMmEgIWltcG9ydGFudDtcbiAgICAgICAgICBib3JkZXItY29sb3I6ICMzYzNjM2MgIWltcG9ydGFudDtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLnBvc3QtaW50ZXJhY3Rpb25zOjpiZWZvcmUge1xuICAgICAgICAgIGJvcmRlci1ib3R0b20tY29sb3I6ICMyYTJhMmEgIWltcG9ydGFudDtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLmxpa2VzLXNlY3Rpb24ge1xuICAgICAgICAgIGJhY2tncm91bmQ6IHJnYmEoNDIsIDQyLCA0MiwgMC44KSAhaW1wb3J0YW50O1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAuY29tbWVudHMtc2VjdGlvbiB7XG4gICAgICAgICAgYm9yZGVyLXRvcC1jb2xvcjogIzNjM2MzYyAhaW1wb3J0YW50O1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAucG9zdC1tZXRhIC5jb21tZW50LWJ1dHRvbiB7XG4gICAgICAgICAgYmFja2dyb3VuZDogIzJjMmMyYyAhaW1wb3J0YW50O1xuICAgICAgICB9XG5cbiAgICAgICAgLyog5pyL5Y+L5ZyI5paH5a2X5o+P6L+w5Zu+54mH5qC35byPIC0g5aSc6Ze05qih5byPICovXG4gICAgICAgIC5wb3N0LW1lZGlhIC5pbWFnZS1kZXNjLWNvbnRlbnQge1xuICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6IHJnYmEoNDIsIDQyLCA0MiwgMC44KSAhaW1wb3J0YW50O1xuICAgICAgICAgIGJvcmRlcjogMXB4IHNvbGlkIHJnYmEoNjAsIDYwLCA2MCwgMC40KSAhaW1wb3J0YW50O1xuICAgICAgICAgIGNvbG9yOiAjZTBlMGUwICFpbXBvcnRhbnQ7XG4gICAgICAgIH1cblxuICAgICAgICAvKiDmm7TlpJrlpJzpl7TmqKHlvI/moLflvI8gKi9cbiAgICAgICAgLnBvc3QtYXV0aG9yLW5hbWUsIFxuICAgICAgICAubGlrZXItbmFtZSwgXG4gICAgICAgIC5jb21tZW50LWF1dGhvciB7XG4gICAgICAgICAgY29sb3I6ICNhMGMwZTAgIWltcG9ydGFudDtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLm1vbWVudHMtaGVhZGVyLFxuICAgICAgICAud2VjaGF0LWhlYWRlciB7XG4gICAgICAgICAgYmFja2dyb3VuZDogbGluZWFyLWdyYWRpZW50KDMxNWRlZywgIzI1MjUyNSAwJSwgIzFhMWExYSAxMDAlKSAhaW1wb3J0YW50O1xuICAgICAgICAgIGJvcmRlci1ib3R0b20tY29sb3I6ICMzYzNjM2MgIWltcG9ydGFudDtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLndlY2hhdC1mb290ZXIge1xuICAgICAgICAgIGJhY2tncm91bmQ6IGxpbmVhci1ncmFkaWVudCgzMTVkZWcsICMyNTI1MjUgMCUsICMxYTFhMWEgMTAwJSkgIWltcG9ydGFudDtcbiAgICAgICAgICBib3JkZXItdG9wLWNvbG9yOiAjM2MzYzNjICFpbXBvcnRhbnQ7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC53ZWNoYXQtZm9vdGVyIC50ZXh0LWlucHV0IHtcbiAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjMmEyYTJhICFpbXBvcnRhbnQ7XG4gICAgICAgICAgYm9yZGVyLWNvbG9yOiAjM2MzYzNjICFpbXBvcnRhbnQ7XG4gICAgICAgICAgY29sb3I6ICNlMGUwZTAgIWltcG9ydGFudDtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLndlY2hhdC1mb290ZXIgLnRleHQtaW5wdXQ6OnBsYWNlaG9sZGVyIHtcbiAgICAgICAgICBjb2xvcjogIzgwODA4MCAhaW1wb3J0YW50O1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAudGltZXN0YW1wLXRleHQsXG4gICAgICAgIC5ldmVudC10aW1lLXRleHQge1xuICAgICAgICAgIGJhY2tncm91bmQ6IGxpbmVhci1ncmFkaWVudCgzMTVkZWcsICM1MDUwNTAgMCUsICMzYzNjM2MgMTAwJSkgIWltcG9ydGFudDtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLnJlY2FsbC1ub3RpY2UtdGV4dCB7XG4gICAgICAgICAgYmFja2dyb3VuZDogbGluZWFyLWdyYWRpZW50KDMxNWRlZywgIzUwNTA1MCAwJSwgIzNjM2MzYyAxMDAlKSAhaW1wb3J0YW50O1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAubWVzc2FnZS1yb3cudGhlbSAudm9pY2UtYnViYmxlIC52b2ljZS1pY29uIHtcbiAgICAgICAgICBjb2xvcjogI2EwYzBlMCAhaW1wb3J0YW50O1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAudm9pY2UtdGV4dC1jb250ZW50IHtcbiAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjMmEyYTJhICFpbXBvcnRhbnQ7XG4gICAgICAgICAgYm9yZGVyLWNvbG9yOiAjM2MzYzNjICFpbXBvcnRhbnQ7XG4gICAgICAgICAgY29sb3I6ICNlMGUwZTAgIWltcG9ydGFudDtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLmxvY2F0aW9uLWNhcmQsXG4gICAgICAgIC5maWxlLWNhcmQge1xuICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6ICMyYTJhMmEgIWltcG9ydGFudDtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLmxvY2F0aW9uLWNvbnRlbnQgLmxvY2F0aW9uLXRpdGxlIHtcbiAgICAgICAgICBjb2xvcjogI2UwZTBlMCAhaW1wb3J0YW50O1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAuZmlsZS1kZXRhaWxzIC5maWxlLW5hbWUge1xuICAgICAgICAgIGNvbG9yOiAjZTBlMGUwICFpbXBvcnRhbnQ7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC5maWxlLWZvb3RlciB7XG4gICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogIzI1MjUyNSAhaW1wb3J0YW50O1xuICAgICAgICAgIGJvcmRlci10b3AtY29sb3I6ICMzYzNjM2MgIWltcG9ydGFudDtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLnBhbmVsLWNvbnRhaW5lciB7XG4gICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogIzFhMWExYSAhaW1wb3J0YW50O1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAuZmVhdHVyZS1pY29uIHtcbiAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjMmEyYTJhICFpbXBvcnRhbnQ7XG4gICAgICAgICAgYm9yZGVyLWNvbG9yOiAjM2MzYzNjICFpbXBvcnRhbnQ7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC5mZWF0dXJlLWxhYmVsIHtcbiAgICAgICAgICBjb2xvcjogI2EwYTBhMCAhaW1wb3J0YW50O1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAvKiBUaGVtZS1jb2xvcmVkIGljb25zIGluIGRhcmsgbW9kZSAqL1xuICAgICAgICAuZmVhdHVyZS1pY29uIC50aGVtZS1pY29uIHtcbiAgICAgICAgICBjb2xvcjogdmFyKC0tcHJpbWFyeS1ibHVlKSAhaW1wb3J0YW50O1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAvKiDlo4HnurjpgInmi6nlmajmmpfoibLmqKHlvI8gKi9cbiAgICAgICAgLndhbGxwYXBlci1jb250YWluZXIge1xuICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6ICMyYTJhMmEgIWltcG9ydGFudDtcbiAgICAgICAgICBjb2xvcjogI2UwZTBlMCAhaW1wb3J0YW50O1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAud2FsbHBhcGVyLWNvbnRhaW5lciBoMixcbiAgICAgICAgLndhbGxwYXBlci1jb250YWluZXIgaDMsXG4gICAgICAgIC53YWxscGFwZXItY29udGFpbmVyIHAge1xuICAgICAgICAgIGNvbG9yOiAjZTBlMGUwICFpbXBvcnRhbnQ7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC53YWxscGFwZXItY29udGFpbmVyIGlucHV0W3R5cGU9XCJ0ZXh0XCJdLFxuICAgICAgICAud2FsbHBhcGVyLWNvbnRhaW5lciBpbnB1dFt0eXBlPVwiZmlsZVwiXSB7XG4gICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogIzFhMWExYSAhaW1wb3J0YW50O1xuICAgICAgICAgIGJvcmRlci1jb2xvcjogIzNjM2MzYyAhaW1wb3J0YW50O1xuICAgICAgICAgIGNvbG9yOiAjZTBlMGUwICFpbXBvcnRhbnQ7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC53YWxscGFwZXItaXRlbSAubmFtZSB7XG4gICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogcmdiYSg0MiwgNDIsIDQyLCAwLjkpICFpbXBvcnRhbnQ7XG4gICAgICAgICAgY29sb3I6ICNlMGUwZTAgIWltcG9ydGFudDtcbiAgICAgICAgfVxuICAgICAgYFxuICAgICAgICAgIDogJydcbiAgICAgIH1cbiAgICBgO1xuXG4gICAgY29uc3Qgb2xkRHluYW1pY1N0eWxlcyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0aGVtZS1keW5hbWljLXN0eWxlcycpO1xuICAgIGlmIChvbGREeW5hbWljU3R5bGVzKSB7XG4gICAgICBvbGREeW5hbWljU3R5bGVzLnJlbW92ZSgpO1xuICAgIH1cbiAgICBkb2N1bWVudC5oZWFkLmFwcGVuZENoaWxkKHN0eWxlKTtcbiAgfVxuXG4gIC8vIOi+heWKqeaWueazle+8mkhFWOi9rFJHQkFcbiAgcHJpdmF0ZSBoZXhUb1JnYmEoaGV4OiBzdHJpbmcsIGFscGhhOiBudW1iZXIpOiBzdHJpbmcge1xuICAgIGNvbnN0IHIgPSBwYXJzZUludChoZXguc2xpY2UoMSwgMyksIDE2KTtcbiAgICBjb25zdCBnID0gcGFyc2VJbnQoaGV4LnNsaWNlKDMsIDUpLCAxNik7XG4gICAgY29uc3QgYiA9IHBhcnNlSW50KGhleC5zbGljZSg1LCA3KSwgMTYpO1xuXG4gICAgcmV0dXJuIGByZ2JhKCR7cn0sICR7Z30sICR7Yn0sICR7YWxwaGF9KWA7XG4gIH1cblxuICAvLyDovoXliqnmlrnms5XvvJrmj5Dlj5ZSR0LliIbph49cbiAgcHJpdmF0ZSBleHRyYWN0UmdiQ29tcG9uZW50cyhoZXg6IHN0cmluZyk6IHsgcjogbnVtYmVyOyBnOiBudW1iZXI7IGI6IG51bWJlciB9IHtcbiAgICBjb25zdCByID0gcGFyc2VJbnQoaGV4LnNsaWNlKDEsIDMpLCAxNik7XG4gICAgY29uc3QgZyA9IHBhcnNlSW50KGhleC5zbGljZSgzLCA1KSwgMTYpO1xuICAgIGNvbnN0IGIgPSBwYXJzZUludChoZXguc2xpY2UoNSwgNyksIDE2KTtcblxuICAgIHJldHVybiB7IHIsIGcsIGIgfTtcbiAgfVxuXG4gIC8vIOi+heWKqeaWueazle+8muiwg+aVtOminOiJsuS6ruW6plxuICBwcml2YXRlIGxpZ2h0ZW5EYXJrZW5Db2xvcihjb2xvcjogc3RyaW5nLCBhbW91bnQ6IG51bWJlcik6IHN0cmluZyB7XG4gICAgbGV0IGhleCA9IGNvbG9yLnJlcGxhY2UoJyMnLCAnJyk7XG4gICAgaWYgKGhleC5sZW5ndGggPT09IDMpIHtcbiAgICAgIGhleCA9IGhleFswXSArIGhleFswXSArIGhleFsxXSArIGhleFsxXSArIGhleFsyXSArIGhleFsyXTtcbiAgICB9XG4gICAgY29uc3QgbnVtID0gcGFyc2VJbnQoaGV4LCAxNik7XG4gICAgbGV0IHIgPSAobnVtID4+IDE2KSArIGFtb3VudDtcbiAgICBsZXQgZyA9ICgobnVtID4+IDgpICYgMHgwMGZmKSArIGFtb3VudDtcbiAgICBsZXQgYiA9IChudW0gJiAweDAwMDBmZikgKyBhbW91bnQ7XG5cbiAgICByID0gTWF0aC5tYXgoMCwgTWF0aC5taW4oMjU1LCByKSk7XG4gICAgZyA9IE1hdGgubWF4KDAsIE1hdGgubWluKDI1NSwgZykpO1xuICAgIGIgPSBNYXRoLm1heCgwLCBNYXRoLm1pbigyNTUsIGIpKTtcblxuICAgIGNvbnN0IHJIZXggPSByLnRvU3RyaW5nKDE2KS5wYWRTdGFydCgyLCAnMCcpO1xuICAgIGNvbnN0IGdIZXggPSBnLnRvU3RyaW5nKDE2KS5wYWRTdGFydCgyLCAnMCcpO1xuICAgIGNvbnN0IGJIZXggPSBiLnRvU3RyaW5nKDE2KS5wYWRTdGFydCgyLCAnMCcpO1xuXG4gICAgcmV0dXJuIGAjJHtySGV4fSR7Z0hleH0ke2JIZXh9YDtcbiAgfVxufVxuXG4vLyDlo4HnurjnsbvlnovlrprkuYlcbmV4cG9ydCBpbnRlcmZhY2UgV2FsbHBhcGVyIHtcbiAgaWQ6IHN0cmluZztcbiAgdHlwZTogJ2NvbG9yJyB8ICdpbWFnZScgfCAndXJsJztcbiAgdmFsdWU6IHN0cmluZzsgLy8g6aKc6Imy5Luj56CB5oiW5Zu+54mHVVJMXG4gIG5hbWU6IHN0cmluZztcbiAgdGh1bWJuYWlsPzogc3RyaW5nOyAvLyDnvKnnlaXlm75VUkzvvIzlpoLmnpzmmK/lm77niYfnsbvlnotcbn1cblxuLy8g5aOB57q4566h55CG5Zmo57G7XG5leHBvcnQgY2xhc3MgV2FsbHBhcGVyTWFuYWdlciB7XG4gIHByaXZhdGUgc3RhdGljIFdBTExQQVBFUl9TVE9SQUdFX0tFWV9QUkVGSVggPSAnYmxteF93YWxscGFwZXJfJztcbiAgcHJpdmF0ZSBzdGF0aWMgQ1VTVE9NX1dBTExQQVBFUlNfS0VZID0gJ2JsbXhfY3VzdG9tX3dhbGxwYXBlcnMnO1xuICBwcml2YXRlIHN0YXRpYyBUSEVNRV9XQUxMUEFQRVJfS0VZX1BSRUZJWCA9ICdibG14X3RoZW1lX3dhbGxwYXBlcl8nO1xuICBwcml2YXRlIGN1cnJlbnRUaGVtZU5hbWU6IHN0cmluZyA9ICd3aGl0ZSc7IC8vIOm7mOiupOS4u+mimOWQjeensFxuXG4gIC8vIOWGhee9ruWjgee6uFxuICBwcml2YXRlIGJ1aWx0SW5XYWxscGFwZXJzOiBXYWxscGFwZXJbXSA9IFtcbiAgICB7IGlkOiAnYmx1ZV9zb2xpZCcsIHR5cGU6ICdjb2xvcicsIHZhbHVlOiAnI2U4ZjRmZCcsIG5hbWU6ICfok53oibLnuq/oibInIH0sXG4gICAgeyBpZDogJ3Bpbmtfc29saWQnLCB0eXBlOiAnY29sb3InLCB2YWx1ZTogJyNmZGU4ZjQnLCBuYW1lOiAn57KJ6Imy57qv6ImyJyB9LFxuICAgIHsgaWQ6ICd3aGl0ZV9zb2xpZCcsIHR5cGU6ICdjb2xvcicsIHZhbHVlOiAnI2Y4ZjhmOCcsIG5hbWU6ICfnmb3oibLnuq/oibInIH0sXG4gICAgeyBpZDogJ2Rhcmtfc29saWQnLCB0eXBlOiAnY29sb3InLCB2YWx1ZTogJyMxYTFhMWEnLCBuYW1lOiAn6buR6Imy57qv6ImyJyB9LFxuICAgIHtcbiAgICAgIGlkOiAnZGVmYXVsdF9pbWFnZScsXG4gICAgICB0eXBlOiAnaW1hZ2UnLFxuICAgICAgdmFsdWU6ICdodHRwczovL2dpdGd1ZC5pby9sb2xvZGVzdS9sb2xvYmFieXR1dG9yaWFsLy0vcmF3L21hc3Rlci9sb2xvZ2FtZS/ntKDmnZAvd2FsbHBhcGVyL+eZveiJsl8xLmpwZycsXG4gICAgICBuYW1lOiAn55m96Imy5aOB57q4JyxcbiAgICB9LFxuICAgIHtcbiAgICAgIGlkOiAnZGFya19pbWFnZScsXG4gICAgICB0eXBlOiAnaW1hZ2UnLFxuICAgICAgdmFsdWU6ICdodHRwczovL2dpdGd1ZC5pby9sb2xvZGVzdS9sb2xvYmFieXR1dG9yaWFsLy0vcmF3L21hc3Rlci9sb2xvZ2FtZS/ntKDmnZAvd2FsbHBhcGVyL+a3seiJsuaYn+aYn18xLmpwZycsXG4gICAgICBuYW1lOiAn5rex6Imy5pif5pif5aOB57q4JyxcbiAgICB9LFxuICAgIHtcbiAgICAgIGlkOiAnYmx1ZV90aGVtZScsXG4gICAgICB0eXBlOiAnaW1hZ2UnLFxuICAgICAgdmFsdWU6ICdodHRwczovL2dpdGd1ZC5pby9sb2xvZGVzdS9sb2xvYmFieXR1dG9yaWFsLy0vcmF3L21hc3Rlci9sb2xvZ2FtZS/ntKDmnZAvd2FsbHBhcGVyL+iTneiJsuaYn+aYn18xLmpwZycsXG4gICAgICBuYW1lOiAn6JOd6Imy5pif5pif5aOB57q4JyxcbiAgICB9LFxuICAgIHtcbiAgICAgIGlkOiAncGlua190aGVtZScsXG4gICAgICB0eXBlOiAnaW1hZ2UnLFxuICAgICAgdmFsdWU6ICdodHRwczovL2dpdGd1ZC5pby9sb2xvZGVzdS9sb2xvYmFieXR1dG9yaWFsLy0vcmF3L21hc3Rlci9sb2xvZ2FtZS/ntKDmnZAvd2FsbHBhcGVyL+eyieiJsuaYn+aYn18xLmpwZycsXG4gICAgICBuYW1lOiAn57KJ6Imy5pif5pif5aOB57q4JyxcbiAgICB9LFxuICAgIHtcbiAgICAgIGlkOiAna2l0dHlfdGhlbWUnLFxuICAgICAgdHlwZTogJ2ltYWdlJyxcbiAgICAgIHZhbHVlOiAnaHR0cHM6Ly9naXRndWQuaW8vbG9sb2Rlc3UvbG9sb2JhYnl0dXRvcmlhbC8tL3Jhdy9tYXN0ZXIvbG9sb2dhbWUv57Sg5p2QL3dhbGxwYXBlci/nsonoibLlsI/njKtfMS5qcGcnLFxuICAgICAgbmFtZTogJ+eyieiJsuWwj+eMq+Wjgee6uCcsXG4gICAgfSxcbiAgICB7XG4gICAgICBpZDogJ2RlZXBfc3RhcnNfMicsXG4gICAgICB0eXBlOiAnaW1hZ2UnLFxuICAgICAgdmFsdWU6ICdodHRwczovL2dpdGd1ZC5pby9sb2xvZGVzdS9sb2xvYmFieXR1dG9yaWFsLy0vcmF3L21hc3Rlci9sb2xvZ2FtZS/ntKDmnZAvd2FsbHBhcGVyL+a3seiJsuaYn+aYn18yLmpwZycsXG4gICAgICBuYW1lOiAn5rex6Imy5pif5pif5aOB57q4MicsXG4gICAgfSxcbiAgICB7XG4gICAgICBpZDogJ2RlZXBfc3RhcnNfMycsXG4gICAgICB0eXBlOiAnaW1hZ2UnLFxuICAgICAgdmFsdWU6ICdodHRwczovL2dpdGd1ZC5pby9sb2xvZGVzdS9sb2xvYmFieXR1dG9yaWFsLy0vcmF3L21hc3Rlci9sb2xvZ2FtZS/ntKDmnZAvd2FsbHBhcGVyL+a3seiJsuaYn+aYn18zLmpwZycsXG4gICAgICBuYW1lOiAn5rex6Imy5pif5pif5aOB57q4MycsXG4gICAgfSxcbiAgICB7XG4gICAgICBpZDogJ3doaXRlX3N0YXJzJyxcbiAgICAgIHR5cGU6ICdpbWFnZScsXG4gICAgICB2YWx1ZTogJ2h0dHBzOi8vZ2l0Z3VkLmlvL2xvbG9kZXN1L2xvbG9iYWJ5dHV0b3JpYWwvLS9yYXcvbWFzdGVyL2xvbG9nYW1lL+e0oOadkC93YWxscGFwZXIv55m96Imy5pif5pifXzEuanBnJyxcbiAgICAgIG5hbWU6ICfnmb3oibLmmJ/mmJ/lo4HnurgnLFxuICAgIH0sXG4gICAge1xuICAgICAgaWQ6ICdwaW5rX3N0YXJzXzInLFxuICAgICAgdHlwZTogJ2ltYWdlJyxcbiAgICAgIHZhbHVlOiAnaHR0cHM6Ly9naXRndWQuaW8vbG9sb2Rlc3UvbG9sb2JhYnl0dXRvcmlhbC8tL3Jhdy9tYXN0ZXIvbG9sb2dhbWUv57Sg5p2QL3dhbGxwYXBlci/nsonoibLmmJ/mmJ9fMi5qcGcnLFxuICAgICAgbmFtZTogJ+eyieiJsuaYn+aYn+Wjgee6uDInLFxuICAgIH0sXG4gICAge1xuICAgICAgaWQ6ICdwaW5rX2dyaWRfMicsXG4gICAgICB0eXBlOiAnaW1hZ2UnLFxuICAgICAgdmFsdWU6ICdodHRwczovL2dpdGd1ZC5pby9sb2xvZGVzdS9sb2xvYmFieXR1dG9yaWFsLy0vcmF3L21hc3Rlci9sb2xvZ2FtZS/ntKDmnZAvd2FsbHBhcGVyL+eyieiJsuagvOWtkF8yLmpwZycsXG4gICAgICBuYW1lOiAn57KJ6Imy5qC85a2Q5aOB57q4MicsXG4gICAgfSxcbiAgICB7XG4gICAgICBpZDogJ3BpbmtfZ3JpZF80JyxcbiAgICAgIHR5cGU6ICdpbWFnZScsXG4gICAgICB2YWx1ZTogJ2h0dHBzOi8vZ2l0Z3VkLmlvL2xvbG9kZXN1L2xvbG9iYWJ5dHV0b3JpYWwvLS9yYXcvbWFzdGVyL2xvbG9nYW1lL+e0oOadkC93YWxscGFwZXIv57KJ6Imy5qC85a2QXzQuanBnJyxcbiAgICAgIG5hbWU6ICfnsonoibLmoLzlrZDlo4Hnurg0JyxcbiAgICB9LFxuICAgIHtcbiAgICAgIGlkOiAnYmx1ZV8xJyxcbiAgICAgIHR5cGU6ICdpbWFnZScsXG4gICAgICB2YWx1ZTogJ2h0dHBzOi8vZ2l0Z3VkLmlvL2xvbG9kZXN1L2xvbG9iYWJ5dHV0b3JpYWwvLS9yYXcvbWFzdGVyL2xvbG9nYW1lL+e0oOadkC93YWxscGFwZXIv6JOd6ImyXzEuanBnJyxcbiAgICAgIG5hbWU6ICfok53oibLlo4HnurgxJyxcbiAgICB9LFxuICBdO1xuXG4gIC8vIOiHquWumuS5ieWjgee6uFxuICBwcml2YXRlIGN1c3RvbVdhbGxwYXBlcnM6IFdhbGxwYXBlcltdID0gW107XG5cbiAgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy5sb2FkQ3VzdG9tV2FsbHBhcGVycygpO1xuICAgIC8vIOS7jmxvY2FsU3RvcmFnZeWKoOi9veW9k+WJjeS4u+mimOWQjeensFxuICAgIGNvbnN0IHNhdmVkVGhlbWVOYW1lID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2JsbXhfdGhlbWUnKTtcbiAgICBpZiAoc2F2ZWRUaGVtZU5hbWUpIHtcbiAgICAgIHRoaXMuY3VycmVudFRoZW1lTmFtZSA9IHNhdmVkVGhlbWVOYW1lO1xuICAgIH1cblxuICAgIC8vIOi/geenu+aXp+eahOWjgee6uOiuvue9ruWIsOaWsOeahOS4u+mimOWFs+iBlOagvOW8j1xuICAgIHRoaXMubWlncmF0ZU9sZFdhbGxwYXBlclNldHRpbmdzKCk7XG4gIH1cblxuICAvLyDorr7nva7lvZPliY3kuLvpopjlkI3np7BcbiAgc2V0Q3VycmVudFRoZW1lTmFtZSh0aGVtZU5hbWU6IHN0cmluZyk6IHZvaWQge1xuICAgIHRoaXMuY3VycmVudFRoZW1lTmFtZSA9IHRoZW1lTmFtZTtcbiAgfVxuXG4gIC8vIOiOt+WPluaJgOacieWjgee6uO+8iOWGhee9rivoh6rlrprkuYnvvIlcbiAgZ2V0QWxsV2FsbHBhcGVycygpOiBXYWxscGFwZXJbXSB7XG4gICAgcmV0dXJuIFsuLi50aGlzLmJ1aWx0SW5XYWxscGFwZXJzLCAuLi50aGlzLmN1c3RvbVdhbGxwYXBlcnNdO1xuICB9XG5cbiAgLy8g6I635Y+W5YaF572u5aOB57q4XG4gIGdldEJ1aWx0SW5XYWxscGFwZXJzKCk6IFdhbGxwYXBlcltdIHtcbiAgICByZXR1cm4gdGhpcy5idWlsdEluV2FsbHBhcGVycztcbiAgfVxuXG4gIC8vIOiOt+WPluiHquWumuS5ieWjgee6uFxuICBnZXRDdXN0b21XYWxscGFwZXJzKCk6IFdhbGxwYXBlcltdIHtcbiAgICByZXR1cm4gdGhpcy5jdXN0b21XYWxscGFwZXJzO1xuICB9XG5cbiAgLy8g5re75Yqg6Ieq5a6a5LmJ5aOB57q4XG4gIGFkZEN1c3RvbVdhbGxwYXBlcih3YWxscGFwZXI6IE9taXQ8V2FsbHBhcGVyLCAnaWQnPik6IFdhbGxwYXBlciB7XG4gICAgY29uc3QgaWQgPSBgY3VzdG9tXyR7RGF0ZS5ub3coKX1gO1xuICAgIGNvbnN0IG5ld1dhbGxwYXBlcjogV2FsbHBhcGVyID0geyAuLi53YWxscGFwZXIsIGlkIH07XG5cbiAgICB0aGlzLmN1c3RvbVdhbGxwYXBlcnMucHVzaChuZXdXYWxscGFwZXIpO1xuICAgIHRoaXMuc2F2ZUN1c3RvbVdhbGxwYXBlcnMoKTtcblxuICAgIHJldHVybiBuZXdXYWxscGFwZXI7XG4gIH1cblxuICAvLyDliKDpmaToh6rlrprkuYnlo4HnurhcbiAgZGVsZXRlQ3VzdG9tV2FsbHBhcGVyKGlkOiBzdHJpbmcpOiBib29sZWFuIHtcbiAgICBjb25zdCBpbml0aWFsTGVuZ3RoID0gdGhpcy5jdXN0b21XYWxscGFwZXJzLmxlbmd0aDtcbiAgICB0aGlzLmN1c3RvbVdhbGxwYXBlcnMgPSB0aGlzLmN1c3RvbVdhbGxwYXBlcnMuZmlsdGVyKHcgPT4gdy5pZCAhPT0gaWQpO1xuXG4gICAgaWYgKHRoaXMuY3VzdG9tV2FsbHBhcGVycy5sZW5ndGggIT09IGluaXRpYWxMZW5ndGgpIHtcbiAgICAgIHRoaXMuc2F2ZUN1c3RvbVdhbGxwYXBlcnMoKTtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIC8vIOiuvue9ruWjgee6uO+8iOS4juS4u+mimOWFs+iBlO+8iVxuICBzZXRXYWxscGFwZXIodmlld1R5cGU6ICdjaGF0JyB8ICdob21lJyB8ICdzZXR0aW5ncycsIHdhbGxwYXBlcjogV2FsbHBhcGVyIHwgbnVsbCk6IHZvaWQge1xuICAgIC8vIOS9v+eUqOS4u+mimOWQjeensOS9nOS4uuWtmOWCqOmUrueahOS4gOmDqOWIhlxuICAgIGNvbnN0IHN0b3JhZ2VLZXkgPSBgJHtXYWxscGFwZXJNYW5hZ2VyLlRIRU1FX1dBTExQQVBFUl9LRVlfUFJFRklYfSR7dGhpcy5jdXJyZW50VGhlbWVOYW1lfV8ke3ZpZXdUeXBlfWA7XG5cbiAgICBpZiAod2FsbHBhcGVyKSB7XG4gICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShzdG9yYWdlS2V5LCBKU09OLnN0cmluZ2lmeSh3YWxscGFwZXIpKTtcbiAgICB9IGVsc2Uge1xuICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oc3RvcmFnZUtleSk7XG4gICAgfVxuICB9XG5cbiAgLy8g6I635Y+W5b2T5YmN5aOB57q477yI5LiO5Li76aKY5YWz6IGU77yJXG4gIGdldEN1cnJlbnRXYWxscGFwZXIodmlld1R5cGU6ICdjaGF0JyB8ICdob21lJyB8ICdzZXR0aW5ncycpOiBXYWxscGFwZXIgfCBudWxsIHtcbiAgICAvLyDpppblhYjlsJ3or5Xojrflj5bkuI7lvZPliY3kuLvpopjlhbPogZTnmoTlo4HnurhcbiAgICBjb25zdCB0aGVtZVN0b3JhZ2VLZXkgPSBgJHtXYWxscGFwZXJNYW5hZ2VyLlRIRU1FX1dBTExQQVBFUl9LRVlfUFJFRklYfSR7dGhpcy5jdXJyZW50VGhlbWVOYW1lfV8ke3ZpZXdUeXBlfWA7XG4gICAgY29uc3Qgc2F2ZWRUaGVtZVdhbGxwYXBlciA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKHRoZW1lU3RvcmFnZUtleSk7XG5cbiAgICBpZiAoc2F2ZWRUaGVtZVdhbGxwYXBlcikge1xuICAgICAgdHJ5IHtcbiAgICAgICAgcmV0dXJuIEpTT04ucGFyc2Uoc2F2ZWRUaGVtZVdhbGxwYXBlcik7XG4gICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0ZhaWxlZCB0byBwYXJzZSB0aGVtZSB3YWxscGFwZXI6JywgZSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8g5aaC5p6c5rKh5pyJ5LiO5Li76aKY5YWz6IGU55qE5aOB57q477yM5YiZ5bCd6K+V6I635Y+W5pen5qC85byP55qE5aOB57q46K6+572u77yI5YW85a655oCn77yJXG4gICAgY29uc3Qgb2xkU3RvcmFnZUtleSA9IGAke1dhbGxwYXBlck1hbmFnZXIuV0FMTFBBUEVSX1NUT1JBR0VfS0VZX1BSRUZJWH0ke3ZpZXdUeXBlfWA7XG4gICAgY29uc3Qgc2F2ZWRPbGRXYWxscGFwZXIgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShvbGRTdG9yYWdlS2V5KTtcblxuICAgIGlmIChzYXZlZE9sZFdhbGxwYXBlcikge1xuICAgICAgdHJ5IHtcbiAgICAgICAgcmV0dXJuIEpTT04ucGFyc2Uoc2F2ZWRPbGRXYWxscGFwZXIpO1xuICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdGYWlsZWQgdG8gcGFyc2Ugb2xkIHdhbGxwYXBlcjonLCBlKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIC8vIOi/geenu+aXp+eahOWjgee6uOiuvue9ruWIsOaWsOeahOS4u+mimOWFs+iBlOagvOW8j1xuICBwcml2YXRlIG1pZ3JhdGVPbGRXYWxscGFwZXJTZXR0aW5ncygpOiB2b2lkIHtcbiAgICBjb25zdCB2aWV3VHlwZXM6IEFycmF5PCdjaGF0JyB8ICdob21lJyB8ICdzZXR0aW5ncyc+ID0gWydjaGF0JywgJ2hvbWUnLCAnc2V0dGluZ3MnXTtcblxuICAgIHZpZXdUeXBlcy5mb3JFYWNoKHZpZXdUeXBlID0+IHtcbiAgICAgIGNvbnN0IG9sZFN0b3JhZ2VLZXkgPSBgJHtXYWxscGFwZXJNYW5hZ2VyLldBTExQQVBFUl9TVE9SQUdFX0tFWV9QUkVGSVh9JHt2aWV3VHlwZX1gO1xuICAgICAgY29uc3Qgc2F2ZWRPbGRXYWxscGFwZXIgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShvbGRTdG9yYWdlS2V5KTtcblxuICAgICAgaWYgKHNhdmVkT2xkV2FsbHBhcGVyKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgLy8g6Kej5p6Q5L2G5LiN5a2Y5YKo5pyq5L2/55So55qE5Y+Y6YePXG4gICAgICAgICAgSlNPTi5wYXJzZShzYXZlZE9sZFdhbGxwYXBlcik7XG4gICAgICAgICAgLy8g5bCG5pen6K6+572u6L+B56e75Yiw5b2T5YmN5Li76aKY5LiLXG4gICAgICAgICAgY29uc3QgdGhlbWVTdG9yYWdlS2V5ID0gYCR7V2FsbHBhcGVyTWFuYWdlci5USEVNRV9XQUxMUEFQRVJfS0VZX1BSRUZJWH0ke3RoaXMuY3VycmVudFRoZW1lTmFtZX1fJHt2aWV3VHlwZX1gO1xuXG4gICAgICAgICAgLy8g5Y+q5pyJ5Zyo5b2T5YmN5Li76aKY5LiL5rKh5pyJ6K6+572u5pe25omN6L+B56e7XG4gICAgICAgICAgaWYgKCFsb2NhbFN0b3JhZ2UuZ2V0SXRlbSh0aGVtZVN0b3JhZ2VLZXkpKSB7XG4gICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSh0aGVtZVN0b3JhZ2VLZXksIHNhdmVkT2xkV2FsbHBhcGVyKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICAvLyDov4Hnp7vlkI7liKDpmaTml6forr7nva5cbiAgICAgICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbShvbGRTdG9yYWdlS2V5KTtcbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0ZhaWxlZCB0byBtaWdyYXRlIG9sZCB3YWxscGFwZXIgc2V0dGluZzonLCBlKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgLy8g5bqU55So5Li76aKY6buY6K6k5aOB57q4XG4gIGFwcGx5VGhlbWVEZWZhdWx0V2FsbHBhcGVycyh0aGVtZTogVGhlbWUpOiB2b2lkIHtcbiAgICAvLyDmm7TmlrDlvZPliY3kuLvpopjlkI3np7BcbiAgICB0aGlzLnNldEN1cnJlbnRUaGVtZU5hbWUodGhlbWUubmFtZSk7XG5cbiAgICBjb25zdCB2aWV3VHlwZXM6IEFycmF5PCdjaGF0JyB8ICdob21lJyB8ICdzZXR0aW5ncyc+ID0gWydjaGF0JywgJ2hvbWUnLCAnc2V0dGluZ3MnXTtcblxuICAgIHZpZXdUeXBlcy5mb3JFYWNoKHZpZXdUeXBlID0+IHtcbiAgICAgIC8vIOajgOafpeaYr+WQpuW3sue7j+acieS4juW9k+WJjeS4u+mimOWFs+iBlOeahOWjgee6uOiuvue9rlxuICAgICAgY29uc3QgdGhlbWVTdG9yYWdlS2V5ID0gYCR7V2FsbHBhcGVyTWFuYWdlci5USEVNRV9XQUxMUEFQRVJfS0VZX1BSRUZJWH0ke3RoZW1lLm5hbWV9XyR7dmlld1R5cGV9YDtcbiAgICAgIGNvbnN0IGV4aXN0aW5nV2FsbHBhcGVyID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0odGhlbWVTdG9yYWdlS2V5KTtcblxuICAgICAgaWYgKGV4aXN0aW5nV2FsbHBhcGVyKSB7XG4gICAgICAgIC8vIOW3suacieWjgee6uOiuvue9ru+8jOS/neeVmeeOsOacieiuvue9rlxuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGRlZmF1bHRWYWx1ZSA9IHRoZW1lLmNvbG9ycy5kZWZhdWx0V2FsbHBhcGVyc1t2aWV3VHlwZV07XG5cbiAgICAgIC8vIOajgOafpeaYr+WQpuaYr+minOiJsuWAvFxuICAgICAgY29uc3QgaXNDb2xvciA9IGRlZmF1bHRWYWx1ZS5zdGFydHNXaXRoKCcjJyk7XG5cbiAgICAgIGNvbnN0IHdhbGxwYXBlcjogV2FsbHBhcGVyID0ge1xuICAgICAgICBpZDogYHRoZW1lX2RlZmF1bHRfJHt2aWV3VHlwZX1gLFxuICAgICAgICB0eXBlOiBpc0NvbG9yID8gJ2NvbG9yJyA6ICdpbWFnZScsXG4gICAgICAgIHZhbHVlOiBkZWZhdWx0VmFsdWUsXG4gICAgICAgIG5hbWU6IGAke3RoZW1lLmRpc3BsYXlOYW1lfem7mOiupCR7dmlld1R5cGUgPT09ICdjaGF0JyA/ICfogYrlpKknIDogdmlld1R5cGUgPT09ICdob21lJyA/ICfkuLvlsY/luZUnIDogJ+iuvue9rid95aOB57q4YCxcbiAgICAgIH07XG5cbiAgICAgIC8vIOS/neWtmOS4uuS4juS4u+mimOWFs+iBlOeahOWjgee6uFxuICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0odGhlbWVTdG9yYWdlS2V5LCBKU09OLnN0cmluZ2lmeSh3YWxscGFwZXIpKTtcbiAgICB9KTtcbiAgfVxuXG4gIC8vIOW6lOeUqOWjgee6uOWIsERPTVxuICBhcHBseVdhbGxwYXBlclRvRWxlbWVudChlbGVtZW50OiBIVE1MRWxlbWVudCwgd2FsbHBhcGVyOiBXYWxscGFwZXIgfCBudWxsLCBkZWZhdWx0VGhlbWVXYWxscGFwZXI/OiBzdHJpbmcpOiB2b2lkIHtcbiAgICBpZiAoIWVsZW1lbnQpIHJldHVybjtcblxuICAgIC8vIOmHjee9ruagt+W8j1xuICAgIGVsZW1lbnQuc3R5bGUuYmFja2dyb3VuZEltYWdlID0gJ25vbmUnO1xuICAgIGVsZW1lbnQuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gJyc7XG4gICAgZWxlbWVudC5zdHlsZS5iYWNrZ3JvdW5kU2l6ZSA9ICcnO1xuICAgIGVsZW1lbnQuc3R5bGUuYmFja2dyb3VuZFBvc2l0aW9uID0gJyc7XG4gICAgZWxlbWVudC5zdHlsZS5iYWNrZ3JvdW5kUmVwZWF0ID0gJyc7XG5cbiAgICBpZiAod2FsbHBhcGVyKSB7XG4gICAgICBpZiAod2FsbHBhcGVyLnR5cGUgPT09ICdjb2xvcicpIHtcbiAgICAgICAgLy8g57qv6Imy5aOB57q4IC0g56Gu5L+d5riF6Zmk6IOM5pmv5Zu+5bm26K6+572u6IOM5pmv6ImyXG4gICAgICAgIGVsZW1lbnQuc3R5bGUuYmFja2dyb3VuZEltYWdlID0gJ25vbmUnO1xuICAgICAgICBlbGVtZW50LnN0eWxlLmJhY2tncm91bmRDb2xvciA9IHdhbGxwYXBlci52YWx1ZTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIOWbvueJh+Wjgee6uFxuICAgICAgICBlbGVtZW50LnN0eWxlLmJhY2tncm91bmRJbWFnZSA9IGB1cmwoXCIke3dhbGxwYXBlci52YWx1ZX1cIilgO1xuICAgICAgICBlbGVtZW50LnN0eWxlLmJhY2tncm91bmRTaXplID0gJ2NvdmVyJztcbiAgICAgICAgZWxlbWVudC5zdHlsZS5iYWNrZ3JvdW5kUG9zaXRpb24gPSAnY2VudGVyJztcbiAgICAgICAgZWxlbWVudC5zdHlsZS5iYWNrZ3JvdW5kUmVwZWF0ID0gJ25vLXJlcGVhdCc7XG4gICAgICB9XG4gICAgfSBlbHNlIGlmIChkZWZhdWx0VGhlbWVXYWxscGFwZXIpIHtcbiAgICAgIC8vIOS9v+eUqOS4u+mimOm7mOiupOWjgee6uFxuICAgICAgaWYgKGRlZmF1bHRUaGVtZVdhbGxwYXBlci5zdGFydHNXaXRoKCcjJykpIHtcbiAgICAgICAgLy8g5aaC5p6c5piv6aKc6Imy5YC877yM6K6+572u6IOM5pmv6ImyXG4gICAgICAgIGVsZW1lbnQuc3R5bGUuYmFja2dyb3VuZEltYWdlID0gJ25vbmUnO1xuICAgICAgICBlbGVtZW50LnN0eWxlLmJhY2tncm91bmRDb2xvciA9IGRlZmF1bHRUaGVtZVdhbGxwYXBlcjtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIOWmguaenOaYr+WbvueJh1VSTO+8jOiuvue9ruiDjOaZr+WbvlxuICAgICAgICBlbGVtZW50LnN0eWxlLmJhY2tncm91bmRJbWFnZSA9IGB1cmwoXCIke2RlZmF1bHRUaGVtZVdhbGxwYXBlcn1cIilgO1xuICAgICAgICBlbGVtZW50LnN0eWxlLmJhY2tncm91bmRTaXplID0gJ2NvdmVyJztcbiAgICAgICAgZWxlbWVudC5zdHlsZS5iYWNrZ3JvdW5kUG9zaXRpb24gPSAnY2VudGVyJztcbiAgICAgICAgZWxlbWVudC5zdHlsZS5iYWNrZ3JvdW5kUmVwZWF0ID0gJ25vLXJlcGVhdCc7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLy8g5LuOVVJM5Yib5bu65aOB57q4XG4gIGFzeW5jIGNyZWF0ZVdhbGxwYXBlckZyb21VcmwodXJsOiBzdHJpbmcsIG5hbWU6IHN0cmluZyk6IFByb21pc2U8V2FsbHBhcGVyIHwgbnVsbD4ge1xuICAgIHRyeSB7XG4gICAgICAvLyDpqozor4FVUkxcbiAgICAgIG5ldyBVUkwodXJsKTtcblxuICAgICAgcmV0dXJuIHRoaXMuYWRkQ3VzdG9tV2FsbHBhcGVyKHtcbiAgICAgICAgdHlwZTogJ3VybCcsXG4gICAgICAgIHZhbHVlOiB1cmwsXG4gICAgICAgIG5hbWU6IG5hbWUgfHwgYFVSTOWjgee6uCAke25ldyBEYXRlKCkudG9Mb2NhbGVTdHJpbmcoKX1gLFxuICAgICAgfSk7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgY29uc29sZS5lcnJvcignSW52YWxpZCBVUkw6JywgZSk7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gIH1cblxuICAvLyDku45GaWxl5a+56LGh5Yib5bu65aOB57q4XG4gIGFzeW5jIGNyZWF0ZVdhbGxwYXBlckZyb21GaWxlKGZpbGU6IEZpbGUpOiBQcm9taXNlPFdhbGxwYXBlciB8IG51bGw+IHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UocmVzb2x2ZSA9PiB7XG4gICAgICBpZiAoIWZpbGUudHlwZS5zdGFydHNXaXRoKCdpbWFnZS8nKSkge1xuICAgICAgICByZXNvbHZlKG51bGwpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHJlYWRlciA9IG5ldyBGaWxlUmVhZGVyKCk7XG4gICAgICByZWFkZXIub25sb2FkID0gZSA9PiB7XG4gICAgICAgIGlmIChlLnRhcmdldD8ucmVzdWx0KSB7XG4gICAgICAgICAgY29uc3Qgd2FsbHBhcGVyID0gdGhpcy5hZGRDdXN0b21XYWxscGFwZXIoe1xuICAgICAgICAgICAgdHlwZTogJ2ltYWdlJyxcbiAgICAgICAgICAgIHZhbHVlOiBlLnRhcmdldC5yZXN1bHQgYXMgc3RyaW5nLFxuICAgICAgICAgICAgbmFtZTogZmlsZS5uYW1lIHx8IGDkuIrkvKDnmoTlo4HnurggJHtuZXcgRGF0ZSgpLnRvTG9jYWxlU3RyaW5nKCl9YCxcbiAgICAgICAgICB9KTtcbiAgICAgICAgICByZXNvbHZlKHdhbGxwYXBlcik7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmVzb2x2ZShudWxsKTtcbiAgICAgICAgfVxuICAgICAgfTtcblxuICAgICAgcmVhZGVyLm9uZXJyb3IgPSAoKSA9PiByZXNvbHZlKG51bGwpO1xuICAgICAgcmVhZGVyLnJlYWRBc0RhdGFVUkwoZmlsZSk7XG4gICAgfSk7XG4gIH1cblxuICAvLyDliJvlu7rnuq/oibLlo4HnurhcbiAgY3JlYXRlU29saWRDb2xvcldhbGxwYXBlcihjb2xvcjogc3RyaW5nLCBuYW1lPzogc3RyaW5nKTogV2FsbHBhcGVyIHwgbnVsbCB7XG4gICAgLy8g6aqM6K+B6aKc6Imy5qC85byP77yM5pSv5oyBM+S9jeWSjDbkvY3ljYHlha3ov5vliLbpopzoibJcbiAgICBpZiAoIWNvbG9yLm1hdGNoKC9eIyhbMC05QS1GYS1mXXszfSl7MSwyfSQvKSkge1xuICAgICAgY29uc29sZS5lcnJvcignSW52YWxpZCBjb2xvciBmb3JtYXQ6JywgY29sb3IpO1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgLy8g56Gu5L+d6aKc6Imy5qC85byP57uf5LiA5Li6NuS9jeWNgeWFrei/m+WItlxuICAgIGxldCBub3JtYWxpemVkQ29sb3IgPSBjb2xvcjtcbiAgICBpZiAoY29sb3IubGVuZ3RoID09PSA0KSB7XG4gICAgICAvLyAjUkdCIOagvOW8j1xuICAgICAgY29uc3QgciA9IGNvbG9yWzFdO1xuICAgICAgY29uc3QgZyA9IGNvbG9yWzJdO1xuICAgICAgY29uc3QgYiA9IGNvbG9yWzNdO1xuICAgICAgbm9ybWFsaXplZENvbG9yID0gYCMke3J9JHtyfSR7Z30ke2d9JHtifSR7Yn1gO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzLmFkZEN1c3RvbVdhbGxwYXBlcih7XG4gICAgICB0eXBlOiAnY29sb3InLFxuICAgICAgdmFsdWU6IG5vcm1hbGl6ZWRDb2xvcixcbiAgICAgIG5hbWU6IG5hbWUgfHwgYOe6r+iJsuWjgee6uCAke25vcm1hbGl6ZWRDb2xvcn1gLFxuICAgIH0pO1xuICB9XG5cbiAgLy8g5Yqg6L296Ieq5a6a5LmJ5aOB57q4XG4gIHByaXZhdGUgbG9hZEN1c3RvbVdhbGxwYXBlcnMoKTogdm9pZCB7XG4gICAgY29uc3Qgc2F2ZWRXYWxscGFwZXJzID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oV2FsbHBhcGVyTWFuYWdlci5DVVNUT01fV0FMTFBBUEVSU19LRVkpO1xuXG4gICAgaWYgKHNhdmVkV2FsbHBhcGVycykge1xuICAgICAgdHJ5IHtcbiAgICAgICAgdGhpcy5jdXN0b21XYWxscGFwZXJzID0gSlNPTi5wYXJzZShzYXZlZFdhbGxwYXBlcnMpO1xuICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdGYWlsZWQgdG8gbG9hZCBjdXN0b20gd2FsbHBhcGVyczonLCBlKTtcbiAgICAgICAgdGhpcy5jdXN0b21XYWxscGFwZXJzID0gW107XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLy8g5L+d5a2Y6Ieq5a6a5LmJ5aOB57q4XG4gIHByaXZhdGUgc2F2ZUN1c3RvbVdhbGxwYXBlcnMoKTogdm9pZCB7XG4gICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oV2FsbHBhcGVyTWFuYWdlci5DVVNUT01fV0FMTFBBUEVSU19LRVksIEpTT04uc3RyaW5naWZ5KHRoaXMuY3VzdG9tV2FsbHBhcGVycykpO1xuICB9XG59XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/同层手机/theme-manager.ts\n")},"./src/同层手机/ui-manager.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   UIManager: () => (/* binding */ UIManager)\n/* harmony export */ });\n/* harmony import */ var _config_manager__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./config-manager */ \"./src/同层手机/config-manager.ts\");\n/* harmony import */ var _theme_manager__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./theme-manager */ \"./src/同层手机/theme-manager.ts\");\n// 用户界面管理模块\n// 负责导航、面板切换、尺寸调整、版本显示等UI相关功能\n\n\nclass UIManager {\n    configManager;\n    onAddEntry;\n    onRenderEntry;\n    constructor(configManager, onAddEntry, onRenderEntry) {\n        this.configManager = configManager;\n        this.onAddEntry = onAddEntry;\n        this.onRenderEntry = onRenderEntry;\n    }\n    // 显示应用版本\n    displayAppVersion() {\n        $('#app-version-display').text(`v${_theme_manager__WEBPACK_IMPORTED_MODULE_1__.APP_VERSION}`);\n    }\n    // 检查是否显示版本更新通知\n    checkVersionUpdateNotification() {\n        const lastNotifiedVersion = this.configManager.getLastNotifiedVersion();\n        // 如果没有通知过当前版本，显示通知\n        if (lastNotifiedVersion !== _theme_manager__WEBPACK_IMPORTED_MODULE_1__.APP_VERSION) {\n            this.showVersionUpdateNotification();\n            this.configManager.setLastNotifiedVersion(_theme_manager__WEBPACK_IMPORTED_MODULE_1__.APP_VERSION);\n        }\n    }\n    // 显示版本更新通知\n    showVersionUpdateNotification() {\n        // 创建系统消息\n        const updateEntry = {\n            type: 'message',\n            sender: 'them',\n            content: `系统消息：应用已更新到 v${_theme_manager__WEBPACK_IMPORTED_MODULE_1__.APP_VERSION}，已自动清理过时数据以确保功能正常运行。您无需手动清除浏览器缓存。`,\n            id: `system-${Date.now()}`,\n            isSystemMessage: true,\n        };\n        // 添加到聊天记录\n        if (this.onAddEntry) {\n            this.onAddEntry(updateEntry);\n        }\n        // 渲染消息\n        if (this.onRenderEntry) {\n            this.onRenderEntry(updateEntry, undefined, true);\n        }\n    }\n    // 更新底部按钮状态\n    updateFooterButtonsState(hasNotifications) {\n        const $wechatInput = $('#wechat-input-field');\n        const $sendBtn = $('#send-btn');\n        const $plusBtn = $('#plus-btn');\n        const hasText = $wechatInput.val()?.toString().trim() !== '';\n        const shouldShowSendBtn = hasText || hasNotifications;\n        // 使用jQuery方法更新显示状态\n        $sendBtn.css('display', shouldShowSendBtn ? 'flex' : 'none');\n        $plusBtn.css('display', hasText ? 'none' : 'inline-block');\n        // 调试信息\n        console.log('[BLMX] 更新按钮状态:', {\n            hasText,\n            hasPendingNotifications: hasNotifications,\n            shouldShowSendBtn,\n        });\n    }\n    // 切换面板\n    togglePanel(panelToShow) {\n        const $panelContainer = $('#panel-container');\n        const $currentActivePanel = $('.panel-view.active');\n        const isActive = $panelContainer.hasClass('active');\n        if (isActive && $currentActivePanel.length && $currentActivePanel.attr('id')?.startsWith(panelToShow || '')) {\n            $panelContainer.removeClass('active');\n            $currentActivePanel.removeClass('active');\n        }\n        else if (panelToShow) {\n            if ($currentActivePanel.length)\n                $currentActivePanel.removeClass('active');\n            $(`#${panelToShow}-panel`).addClass('active');\n            if (!isActive)\n                $panelContainer.addClass('active');\n        }\n        else {\n            if (isActive)\n                $panelContainer.removeClass('active');\n            if ($currentActivePanel.length)\n                $currentActivePanel.removeClass('active');\n        }\n    }\n    // 导航到指定视图\n    navigateTo(viewName, onEnterMomentsView) {\n        const views = {\n            home: '#app-homescreen',\n            wechat: '#wechat-view',\n            moments: '#moments-view',\n            settings: '#settings-view',\n        };\n        // 使用jQuery隐藏所有视图并显示目标视图\n        $('.app-view').removeClass('active');\n        $(views[viewName]).addClass('active');\n        // 当导航到朋友圈视图时，执行回调\n        if (viewName === 'moments' && onEnterMomentsView) {\n            onEnterMomentsView();\n        }\n    }\n    // 设置输入框提示文字\n    setupInputPlaceholder(charDisplayName) {\n        const savedPlaceholder = this.configManager.getSavedInputPlaceholder();\n        const $inputElement = $('#wechat-input-field');\n        $inputElement.attr('placeholder', savedPlaceholder || `与 ${charDisplayName} 对话...`);\n        $inputElement.prop('disabled', false);\n    }\n    // 设置手机尺寸调整\n    setupPhoneSizeAdjustment() {\n        const defaultBtn = document.getElementById('phone-size-default');\n        const mediumBtn = document.getElementById('phone-size-medium');\n        const smallBtn = document.getElementById('phone-size-small');\n        const phoneScreen = document.querySelector('.phone-screen');\n        if (!defaultBtn || !mediumBtn || !smallBtn || !phoneScreen) {\n            console.error('[BLMX] Phone size adjustment elements not found');\n            return;\n        }\n        // 应用保存的尺寸设置\n        const savedSize = this.configManager.getPhoneSize();\n        this.applyPhoneSize(savedSize, phoneScreen, [defaultBtn, mediumBtn, smallBtn]);\n        // 设置按钮点击事件\n        defaultBtn.addEventListener('click', () => {\n            this.applyPhoneSize('default', phoneScreen, [defaultBtn, mediumBtn, smallBtn]);\n        });\n        mediumBtn.addEventListener('click', () => {\n            this.applyPhoneSize('medium', phoneScreen, [defaultBtn, mediumBtn, smallBtn]);\n        });\n        smallBtn.addEventListener('click', () => {\n            this.applyPhoneSize('small', phoneScreen, [defaultBtn, mediumBtn, smallBtn]);\n        });\n    }\n    // 设置表情包尺寸控制\n    setupStickerSizeControl() {\n        const sizeSlider = document.getElementById('sticker-size-slider');\n        const sizeInput = document.getElementById('sticker-size-input');\n        const smallSizeBtn = document.getElementById('sticker-size-small');\n        const mediumSizeBtn = document.getElementById('sticker-size-medium');\n        if (!sizeSlider || !sizeInput || !smallSizeBtn || !mediumSizeBtn) {\n            console.error('[BLMX] Sticker size control elements not found');\n            return;\n        }\n        // 获取保存的尺寸设置\n        const savedSize = this.configManager.getStickerSize();\n        // 初始化控件值\n        sizeSlider.value = savedSize.toString();\n        sizeInput.value = savedSize.toString();\n        // 设置初始按钮状态\n        if (savedSize === 80) {\n            smallSizeBtn.classList.add('phone-size-active');\n            mediumSizeBtn.classList.remove('phone-size-active');\n        }\n        else if (savedSize === 120) {\n            smallSizeBtn.classList.remove('phone-size-active');\n            mediumSizeBtn.classList.add('phone-size-active');\n        }\n        else {\n            smallSizeBtn.classList.remove('phone-size-active');\n            mediumSizeBtn.classList.remove('phone-size-active');\n        }\n        // 设置CSS变量\n        this.applyStickerSize(savedSize);\n        // 滑块事件\n        sizeSlider.addEventListener('input', () => {\n            const newSize = parseInt(sizeSlider.value);\n            sizeInput.value = newSize.toString();\n            this.configManager.setStickerSize(newSize);\n            this.applyStickerSize(newSize);\n            // 更新按钮状态\n            this.updateStickerSizeButtonState(newSize, smallSizeBtn, mediumSizeBtn);\n        });\n        // 数字输入框事件\n        sizeInput.addEventListener('change', () => {\n            let newSize = parseInt(sizeInput.value);\n            // 限制范围\n            if (newSize < 40)\n                newSize = 40;\n            if (newSize > 200)\n                newSize = 200;\n            const newSizeStr = newSize.toString();\n            sizeInput.value = newSizeStr;\n            sizeSlider.value = newSizeStr;\n            this.configManager.setStickerSize(newSize);\n            this.applyStickerSize(newSize);\n            // 更新按钮状态\n            this.updateStickerSizeButtonState(newSize, smallSizeBtn, mediumSizeBtn);\n        });\n        // 小尺寸按钮事件\n        smallSizeBtn.addEventListener('click', () => {\n            this.setStickerSize(80, sizeSlider, sizeInput, smallSizeBtn, mediumSizeBtn);\n        });\n        // 中尺寸按钮事件\n        mediumSizeBtn.addEventListener('click', () => {\n            this.setStickerSize(120, sizeSlider, sizeInput, smallSizeBtn, mediumSizeBtn);\n        });\n    }\n    // 应用手机尺寸设置\n    applyPhoneSize(size, phoneScreen, buttons) {\n        // 设置屏幕高度\n        phoneScreen.style.height = _config_manager__WEBPACK_IMPORTED_MODULE_0__.PHONE_SIZES[size];\n        // 保存设置\n        this.configManager.setPhoneSize(size);\n        // 更新按钮样式\n        buttons.forEach(btn => btn.classList.remove('phone-size-active'));\n        // 根据选择的尺寸激活对应按钮\n        if (size === 'default') {\n            buttons[0].classList.add('phone-size-active');\n        }\n        else if (size === 'medium') {\n            buttons[1].classList.add('phone-size-active');\n        }\n        else if (size === 'small') {\n            buttons[2].classList.add('phone-size-active');\n        }\n    }\n    // 应用表情包尺寸\n    applyStickerSize(size) {\n        document.documentElement.style.setProperty('--sticker-size', `${size}px`);\n    }\n    // 设置表情包尺寸\n    setStickerSize(size, sizeSlider, sizeInput, smallSizeBtn, mediumSizeBtn) {\n        sizeSlider.value = size.toString();\n        sizeInput.value = size.toString();\n        this.configManager.setStickerSize(size);\n        this.applyStickerSize(size);\n        this.updateStickerSizeButtonState(size, smallSizeBtn, mediumSizeBtn);\n    }\n    // 更新表情包尺寸按钮状态\n    updateStickerSizeButtonState(size, smallSizeBtn, mediumSizeBtn) {\n        if (size === 80) {\n            smallSizeBtn.classList.add('phone-size-active');\n            mediumSizeBtn.classList.remove('phone-size-active');\n        }\n        else if (size === 120) {\n            smallSizeBtn.classList.remove('phone-size-active');\n            mediumSizeBtn.classList.add('phone-size-active');\n        }\n        else {\n            smallSizeBtn.classList.remove('phone-size-active');\n            mediumSizeBtn.classList.remove('phone-size-active');\n        }\n    }\n    // 滚动到聊天底部\n    scrollToBottom() {\n        setTimeout(() => {\n            const wechatBody = document.querySelector('.wechat-body');\n            if (wechatBody) {\n                wechatBody.scrollTop = wechatBody.scrollHeight;\n            }\n        }, 300);\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFDLFNBQVMsQ0FBQyxNQUFNLENBQUMsbUJBQW1CLENBQUMsQ0FBQztRQUN0RCxDQUFDO0lBQ0gsQ0FBQztJQUVELFVBQVU7SUFDVixjQUFjO1FBQ1osVUFBVSxDQUFDLEdBQUcsRUFBRTtZQUNkLE1BQU0sVUFBVSxHQUFHLFFBQVEsQ0FBQyxhQUFhLENBQUMsY0FBYyxDQUFnQixDQUFDO1lBQ3pFLElBQUksVUFBVSxFQUFFLENBQUM7Z0JBQ2YsVUFBVSxDQUFDLFNBQVMsR0FBRyxVQUFVLENBQUMsWUFBWSxDQUFDO1lBQ2pELENBQUM7UUFDSCxDQUFDLEVBQUUsR0FBRyxDQUFDLENBQUM7SUFDVixDQUFDO0NBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly90YXZlcm5faGVscGVyX3RlbXBsYXRlLy4vc3JjL+WQjOWxguaJi+acui91aS1tYW5hZ2VyLnRzPyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyDnlKjmiLfnlYzpnaLnrqHnkIbmqKHlnZdcbi8vIOi0n+i0o+WvvOiIquOAgemdouadv+WIh+aNouOAgeWwuuWvuOiwg+aVtOOAgeeJiOacrOaYvuekuuetiVVJ55u45YWz5Yqf6IO9XG5cbmltcG9ydCB7IENvbmZpZ01hbmFnZXIsIFBIT05FX1NJWkVTIH0gZnJvbSAnLi9jb25maWctbWFuYWdlcic7XG5pbXBvcnQgeyBMb2dFbnRyeSB9IGZyb20gJy4vc2NyaXB0JztcbmltcG9ydCB7IEFQUF9WRVJTSU9OIH0gZnJvbSAnLi90aGVtZS1tYW5hZ2VyJztcblxuZXhwb3J0IGNsYXNzIFVJTWFuYWdlciB7XG4gIHByaXZhdGUgY29uZmlnTWFuYWdlcjogQ29uZmlnTWFuYWdlcjtcbiAgcHJpdmF0ZSBvbkFkZEVudHJ5PzogKGVudHJ5OiBMb2dFbnRyeSkgPT4gdm9pZDtcbiAgcHJpdmF0ZSBvblJlbmRlckVudHJ5PzogKGVudHJ5OiBMb2dFbnRyeSwgaW5kZXg/OiBudW1iZXIsIGFuaW1hdGU/OiBib29sZWFuKSA9PiB2b2lkO1xuXG4gIGNvbnN0cnVjdG9yKFxuICAgIGNvbmZpZ01hbmFnZXI6IENvbmZpZ01hbmFnZXIsXG4gICAgb25BZGRFbnRyeT86IChlbnRyeTogTG9nRW50cnkpID0+IHZvaWQsXG4gICAgb25SZW5kZXJFbnRyeT86IChlbnRyeTogTG9nRW50cnksIGluZGV4PzogbnVtYmVyLCBhbmltYXRlPzogYm9vbGVhbikgPT4gdm9pZCxcbiAgKSB7XG4gICAgdGhpcy5jb25maWdNYW5hZ2VyID0gY29uZmlnTWFuYWdlcjtcbiAgICB0aGlzLm9uQWRkRW50cnkgPSBvbkFkZEVudHJ5O1xuICAgIHRoaXMub25SZW5kZXJFbnRyeSA9IG9uUmVuZGVyRW50cnk7XG4gIH1cblxuICAvLyDmmL7npLrlupTnlKjniYjmnKxcbiAgZGlzcGxheUFwcFZlcnNpb24oKTogdm9pZCB7XG4gICAgJCgnI2FwcC12ZXJzaW9uLWRpc3BsYXknKS50ZXh0KGB2JHtBUFBfVkVSU0lPTn1gKTtcbiAgfVxuXG4gIC8vIOajgOafpeaYr+WQpuaYvuekuueJiOacrOabtOaWsOmAmuefpVxuICBjaGVja1ZlcnNpb25VcGRhdGVOb3RpZmljYXRpb24oKTogdm9pZCB7XG4gICAgY29uc3QgbGFzdE5vdGlmaWVkVmVyc2lvbiA9IHRoaXMuY29uZmlnTWFuYWdlci5nZXRMYXN0Tm90aWZpZWRWZXJzaW9uKCk7XG5cbiAgICAvLyDlpoLmnpzmsqHmnInpgJrnn6Xov4flvZPliY3niYjmnKzvvIzmmL7npLrpgJrnn6VcbiAgICBpZiAobGFzdE5vdGlmaWVkVmVyc2lvbiAhPT0gQVBQX1ZFUlNJT04pIHtcbiAgICAgIHRoaXMuc2hvd1ZlcnNpb25VcGRhdGVOb3RpZmljYXRpb24oKTtcbiAgICAgIHRoaXMuY29uZmlnTWFuYWdlci5zZXRMYXN0Tm90aWZpZWRWZXJzaW9uKEFQUF9WRVJTSU9OKTtcbiAgICB9XG4gIH1cblxuICAvLyDmmL7npLrniYjmnKzmm7TmlrDpgJrnn6VcbiAgcHJpdmF0ZSBzaG93VmVyc2lvblVwZGF0ZU5vdGlmaWNhdGlvbigpOiB2b2lkIHtcbiAgICAvLyDliJvlu7rns7vnu5/mtojmga9cbiAgICBjb25zdCB1cGRhdGVFbnRyeTogTG9nRW50cnkgPSB7XG4gICAgICB0eXBlOiAnbWVzc2FnZScsXG4gICAgICBzZW5kZXI6ICd0aGVtJyxcbiAgICAgIGNvbnRlbnQ6IGDns7vnu5/mtojmga/vvJrlupTnlKjlt7Lmm7TmlrDliLAgdiR7QVBQX1ZFUlNJT05977yM5bey6Ieq5Yqo5riF55CG6L+H5pe25pWw5o2u5Lul56Gu5L+d5Yqf6IO95q2j5bi46L+Q6KGM44CC5oKo5peg6ZyA5omL5Yqo5riF6Zmk5rWP6KeI5Zmo57yT5a2Y44CCYCxcbiAgICAgIGlkOiBgc3lzdGVtLSR7RGF0ZS5ub3coKX1gLFxuICAgICAgaXNTeXN0ZW1NZXNzYWdlOiB0cnVlLFxuICAgIH07XG5cbiAgICAvLyDmt7vliqDliLDogYrlpKnorrDlvZVcbiAgICBpZiAodGhpcy5vbkFkZEVudHJ5KSB7XG4gICAgICB0aGlzLm9uQWRkRW50cnkodXBkYXRlRW50cnkpO1xuICAgIH1cblxuICAgIC8vIOa4suafk+a2iOaBr1xuICAgIGlmICh0aGlzLm9uUmVuZGVyRW50cnkpIHtcbiAgICAgIHRoaXMub25SZW5kZXJFbnRyeSh1cGRhdGVFbnRyeSwgdW5kZWZpbmVkLCB0cnVlKTtcbiAgICB9XG4gIH1cblxuICAvLyDmm7TmlrDlupXpg6jmjInpkq7nirbmgIFcbiAgdXBkYXRlRm9vdGVyQnV0dG9uc1N0YXRlKGhhc05vdGlmaWNhdGlvbnM6IGJvb2xlYW4pOiB2b2lkIHtcbiAgICBjb25zdCAkd2VjaGF0SW5wdXQgPSAkKCcjd2VjaGF0LWlucHV0LWZpZWxkJyk7XG4gICAgY29uc3QgJHNlbmRCdG4gPSAkKCcjc2VuZC1idG4nKTtcbiAgICBjb25zdCAkcGx1c0J0biA9ICQoJyNwbHVzLWJ0bicpO1xuXG4gICAgY29uc3QgaGFzVGV4dCA9ICR3ZWNoYXRJbnB1dC52YWwoKT8udG9TdHJpbmcoKS50cmltKCkgIT09ICcnO1xuICAgIGNvbnN0IHNob3VsZFNob3dTZW5kQnRuID0gaGFzVGV4dCB8fCBoYXNOb3RpZmljYXRpb25zO1xuXG4gICAgLy8g5L2/55SoalF1ZXJ55pa55rOV5pu05paw5pi+56S654q25oCBXG4gICAgJHNlbmRCdG4uY3NzKCdkaXNwbGF5Jywgc2hvdWxkU2hvd1NlbmRCdG4gPyAnZmxleCcgOiAnbm9uZScpO1xuICAgICRwbHVzQnRuLmNzcygnZGlzcGxheScsIGhhc1RleHQgPyAnbm9uZScgOiAnaW5saW5lLWJsb2NrJyk7XG5cbiAgICAvLyDosIPor5Xkv6Hmga9cbiAgICBjb25zb2xlLmxvZygnW0JMTVhdIOabtOaWsOaMiemSrueKtuaAgTonLCB7XG4gICAgICBoYXNUZXh0LFxuICAgICAgaGFzUGVuZGluZ05vdGlmaWNhdGlvbnM6IGhhc05vdGlmaWNhdGlvbnMsXG4gICAgICBzaG91bGRTaG93U2VuZEJ0bixcbiAgICB9KTtcbiAgfVxuXG4gIC8vIOWIh+aNoumdouadv1xuICB0b2dnbGVQYW5lbChwYW5lbFRvU2hvdzogc3RyaW5nIHwgbnVsbCk6IHZvaWQge1xuICAgIGNvbnN0ICRwYW5lbENvbnRhaW5lciA9ICQoJyNwYW5lbC1jb250YWluZXInKTtcbiAgICBjb25zdCAkY3VycmVudEFjdGl2ZVBhbmVsID0gJCgnLnBhbmVsLXZpZXcuYWN0aXZlJyk7XG4gICAgY29uc3QgaXNBY3RpdmUgPSAkcGFuZWxDb250YWluZXIuaGFzQ2xhc3MoJ2FjdGl2ZScpO1xuXG4gICAgaWYgKGlzQWN0aXZlICYmICRjdXJyZW50QWN0aXZlUGFuZWwubGVuZ3RoICYmICRjdXJyZW50QWN0aXZlUGFuZWwuYXR0cignaWQnKT8uc3RhcnRzV2l0aChwYW5lbFRvU2hvdyB8fCAnJykpIHtcbiAgICAgICRwYW5lbENvbnRhaW5lci5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XG4gICAgICAkY3VycmVudEFjdGl2ZVBhbmVsLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcbiAgICB9IGVsc2UgaWYgKHBhbmVsVG9TaG93KSB7XG4gICAgICBpZiAoJGN1cnJlbnRBY3RpdmVQYW5lbC5sZW5ndGgpICRjdXJyZW50QWN0aXZlUGFuZWwucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xuICAgICAgJChgIyR7cGFuZWxUb1Nob3d9LXBhbmVsYCkuYWRkQ2xhc3MoJ2FjdGl2ZScpO1xuICAgICAgaWYgKCFpc0FjdGl2ZSkgJHBhbmVsQ29udGFpbmVyLmFkZENsYXNzKCdhY3RpdmUnKTtcbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKGlzQWN0aXZlKSAkcGFuZWxDb250YWluZXIucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xuICAgICAgaWYgKCRjdXJyZW50QWN0aXZlUGFuZWwubGVuZ3RoKSAkY3VycmVudEFjdGl2ZVBhbmVsLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcbiAgICB9XG4gIH1cblxuICAvLyDlr7zoiKrliLDmjIflrprop4blm75cbiAgbmF2aWdhdGVUbyh2aWV3TmFtZTogJ2hvbWUnIHwgJ3dlY2hhdCcgfCAnbW9tZW50cycgfCAnc2V0dGluZ3MnLCBvbkVudGVyTW9tZW50c1ZpZXc/OiAoKSA9PiB2b2lkKTogdm9pZCB7XG4gICAgY29uc3Qgdmlld3MgPSB7XG4gICAgICBob21lOiAnI2FwcC1ob21lc2NyZWVuJyxcbiAgICAgIHdlY2hhdDogJyN3ZWNoYXQtdmlldycsXG4gICAgICBtb21lbnRzOiAnI21vbWVudHMtdmlldycsXG4gICAgICBzZXR0aW5nczogJyNzZXR0aW5ncy12aWV3JyxcbiAgICB9O1xuXG4gICAgLy8g5L2/55SoalF1ZXJ56ZqQ6JeP5omA5pyJ6KeG5Zu+5bm25pi+56S655uu5qCH6KeG5Zu+XG4gICAgJCgnLmFwcC12aWV3JykucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xuICAgICQodmlld3Nbdmlld05hbWVdKS5hZGRDbGFzcygnYWN0aXZlJyk7XG5cbiAgICAvLyDlvZPlr7zoiKrliLDmnIvlj4vlnIjop4blm77ml7bvvIzmiafooYzlm57osINcbiAgICBpZiAodmlld05hbWUgPT09ICdtb21lbnRzJyAmJiBvbkVudGVyTW9tZW50c1ZpZXcpIHtcbiAgICAgIG9uRW50ZXJNb21lbnRzVmlldygpO1xuICAgIH1cbiAgfVxuXG4gIC8vIOiuvue9rui+k+WFpeahhuaPkOekuuaWh+Wtl1xuICBzZXR1cElucHV0UGxhY2Vob2xkZXIoY2hhckRpc3BsYXlOYW1lOiBzdHJpbmcpOiB2b2lkIHtcbiAgICBjb25zdCBzYXZlZFBsYWNlaG9sZGVyID0gdGhpcy5jb25maWdNYW5hZ2VyLmdldFNhdmVkSW5wdXRQbGFjZWhvbGRlcigpO1xuICAgIGNvbnN0ICRpbnB1dEVsZW1lbnQgPSAkKCcjd2VjaGF0LWlucHV0LWZpZWxkJyk7XG4gICAgJGlucHV0RWxlbWVudC5hdHRyKCdwbGFjZWhvbGRlcicsIHNhdmVkUGxhY2Vob2xkZXIgfHwgYOS4jiAke2NoYXJEaXNwbGF5TmFtZX0g5a+56K+dLi4uYCk7XG4gICAgJGlucHV0RWxlbWVudC5wcm9wKCdkaXNhYmxlZCcsIGZhbHNlKTtcbiAgfVxuXG4gIC8vIOiuvue9ruaJi+acuuWwuuWvuOiwg+aVtFxuICBzZXR1cFBob25lU2l6ZUFkanVzdG1lbnQoKTogdm9pZCB7XG4gICAgY29uc3QgZGVmYXVsdEJ0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwaG9uZS1zaXplLWRlZmF1bHQnKTtcbiAgICBjb25zdCBtZWRpdW1CdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncGhvbmUtc2l6ZS1tZWRpdW0nKTtcbiAgICBjb25zdCBzbWFsbEJ0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwaG9uZS1zaXplLXNtYWxsJyk7XG4gICAgY29uc3QgcGhvbmVTY3JlZW4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucGhvbmUtc2NyZWVuJykgYXMgSFRNTEVsZW1lbnQ7XG5cbiAgICBpZiAoIWRlZmF1bHRCdG4gfHwgIW1lZGl1bUJ0biB8fCAhc21hbGxCdG4gfHwgIXBob25lU2NyZWVuKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdbQkxNWF0gUGhvbmUgc2l6ZSBhZGp1c3RtZW50IGVsZW1lbnRzIG5vdCBmb3VuZCcpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIOW6lOeUqOS/neWtmOeahOWwuuWvuOiuvue9rlxuICAgIGNvbnN0IHNhdmVkU2l6ZSA9IHRoaXMuY29uZmlnTWFuYWdlci5nZXRQaG9uZVNpemUoKTtcbiAgICB0aGlzLmFwcGx5UGhvbmVTaXplKHNhdmVkU2l6ZSwgcGhvbmVTY3JlZW4sIFtkZWZhdWx0QnRuLCBtZWRpdW1CdG4sIHNtYWxsQnRuXSk7XG5cbiAgICAvLyDorr7nva7mjInpkq7ngrnlh7vkuovku7ZcbiAgICBkZWZhdWx0QnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgdGhpcy5hcHBseVBob25lU2l6ZSgnZGVmYXVsdCcsIHBob25lU2NyZWVuLCBbZGVmYXVsdEJ0biwgbWVkaXVtQnRuLCBzbWFsbEJ0bl0pO1xuICAgIH0pO1xuXG4gICAgbWVkaXVtQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgdGhpcy5hcHBseVBob25lU2l6ZSgnbWVkaXVtJywgcGhvbmVTY3JlZW4sIFtkZWZhdWx0QnRuLCBtZWRpdW1CdG4sIHNtYWxsQnRuXSk7XG4gICAgfSk7XG5cbiAgICBzbWFsbEJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgIHRoaXMuYXBwbHlQaG9uZVNpemUoJ3NtYWxsJywgcGhvbmVTY3JlZW4sIFtkZWZhdWx0QnRuLCBtZWRpdW1CdG4sIHNtYWxsQnRuXSk7XG4gICAgfSk7XG4gIH1cblxuICAvLyDorr7nva7ooajmg4XljIXlsLrlr7jmjqfliLZcbiAgc2V0dXBTdGlja2VyU2l6ZUNvbnRyb2woKTogdm9pZCB7XG4gICAgY29uc3Qgc2l6ZVNsaWRlciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzdGlja2VyLXNpemUtc2xpZGVyJykgYXMgSFRNTElucHV0RWxlbWVudDtcbiAgICBjb25zdCBzaXplSW5wdXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc3RpY2tlci1zaXplLWlucHV0JykgYXMgSFRNTElucHV0RWxlbWVudDtcbiAgICBjb25zdCBzbWFsbFNpemVCdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc3RpY2tlci1zaXplLXNtYWxsJyk7XG4gICAgY29uc3QgbWVkaXVtU2l6ZUJ0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzdGlja2VyLXNpemUtbWVkaXVtJyk7XG5cbiAgICBpZiAoIXNpemVTbGlkZXIgfHwgIXNpemVJbnB1dCB8fCAhc21hbGxTaXplQnRuIHx8ICFtZWRpdW1TaXplQnRuKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdbQkxNWF0gU3RpY2tlciBzaXplIGNvbnRyb2wgZWxlbWVudHMgbm90IGZvdW5kJyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8g6I635Y+W5L+d5a2Y55qE5bC65a+46K6+572uXG4gICAgY29uc3Qgc2F2ZWRTaXplID0gdGhpcy5jb25maWdNYW5hZ2VyLmdldFN0aWNrZXJTaXplKCk7XG5cbiAgICAvLyDliJ3lp4vljJbmjqfku7blgLxcbiAgICBzaXplU2xpZGVyLnZhbHVlID0gc2F2ZWRTaXplLnRvU3RyaW5nKCk7XG4gICAgc2l6ZUlucHV0LnZhbHVlID0gc2F2ZWRTaXplLnRvU3RyaW5nKCk7XG5cbiAgICAvLyDorr7nva7liJ3lp4vmjInpkq7nirbmgIFcbiAgICBpZiAoc2F2ZWRTaXplID09PSA4MCkge1xuICAgICAgc21hbGxTaXplQnRuLmNsYXNzTGlzdC5hZGQoJ3Bob25lLXNpemUtYWN0aXZlJyk7XG4gICAgICBtZWRpdW1TaXplQnRuLmNsYXNzTGlzdC5yZW1vdmUoJ3Bob25lLXNpemUtYWN0aXZlJyk7XG4gICAgfSBlbHNlIGlmIChzYXZlZFNpemUgPT09IDEyMCkge1xuICAgICAgc21hbGxTaXplQnRuLmNsYXNzTGlzdC5yZW1vdmUoJ3Bob25lLXNpemUtYWN0aXZlJyk7XG4gICAgICBtZWRpdW1TaXplQnRuLmNsYXNzTGlzdC5hZGQoJ3Bob25lLXNpemUtYWN0aXZlJyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHNtYWxsU2l6ZUJ0bi5jbGFzc0xpc3QucmVtb3ZlKCdwaG9uZS1zaXplLWFjdGl2ZScpO1xuICAgICAgbWVkaXVtU2l6ZUJ0bi5jbGFzc0xpc3QucmVtb3ZlKCdwaG9uZS1zaXplLWFjdGl2ZScpO1xuICAgIH1cblxuICAgIC8vIOiuvue9rkNTU+WPmOmHj1xuICAgIHRoaXMuYXBwbHlTdGlja2VyU2l6ZShzYXZlZFNpemUpO1xuXG4gICAgLy8g5ruR5Z2X5LqL5Lu2XG4gICAgc2l6ZVNsaWRlci5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsICgpID0+IHtcbiAgICAgIGNvbnN0IG5ld1NpemUgPSBwYXJzZUludChzaXplU2xpZGVyLnZhbHVlKTtcbiAgICAgIHNpemVJbnB1dC52YWx1ZSA9IG5ld1NpemUudG9TdHJpbmcoKTtcbiAgICAgIHRoaXMuY29uZmlnTWFuYWdlci5zZXRTdGlja2VyU2l6ZShuZXdTaXplKTtcbiAgICAgIHRoaXMuYXBwbHlTdGlja2VyU2l6ZShuZXdTaXplKTtcblxuICAgICAgLy8g5pu05paw5oyJ6ZKu54q25oCBXG4gICAgICB0aGlzLnVwZGF0ZVN0aWNrZXJTaXplQnV0dG9uU3RhdGUobmV3U2l6ZSwgc21hbGxTaXplQnRuLCBtZWRpdW1TaXplQnRuKTtcbiAgICB9KTtcblxuICAgIC8vIOaVsOWtl+i+k+WFpeahhuS6i+S7tlxuICAgIHNpemVJbnB1dC5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCAoKSA9PiB7XG4gICAgICBsZXQgbmV3U2l6ZSA9IHBhcnNlSW50KHNpemVJbnB1dC52YWx1ZSk7XG4gICAgICAvLyDpmZDliLbojIPlm7RcbiAgICAgIGlmIChuZXdTaXplIDwgNDApIG5ld1NpemUgPSA0MDtcbiAgICAgIGlmIChuZXdTaXplID4gMjAwKSBuZXdTaXplID0gMjAwO1xuXG4gICAgICBjb25zdCBuZXdTaXplU3RyID0gbmV3U2l6ZS50b1N0cmluZygpO1xuICAgICAgc2l6ZUlucHV0LnZhbHVlID0gbmV3U2l6ZVN0cjtcbiAgICAgIHNpemVTbGlkZXIudmFsdWUgPSBuZXdTaXplU3RyO1xuICAgICAgdGhpcy5jb25maWdNYW5hZ2VyLnNldFN0aWNrZXJTaXplKG5ld1NpemUpO1xuICAgICAgdGhpcy5hcHBseVN0aWNrZXJTaXplKG5ld1NpemUpO1xuXG4gICAgICAvLyDmm7TmlrDmjInpkq7nirbmgIFcbiAgICAgIHRoaXMudXBkYXRlU3RpY2tlclNpemVCdXR0b25TdGF0ZShuZXdTaXplLCBzbWFsbFNpemVCdG4sIG1lZGl1bVNpemVCdG4pO1xuICAgIH0pO1xuXG4gICAgLy8g5bCP5bC65a+45oyJ6ZKu5LqL5Lu2XG4gICAgc21hbGxTaXplQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgdGhpcy5zZXRTdGlja2VyU2l6ZSg4MCwgc2l6ZVNsaWRlciwgc2l6ZUlucHV0LCBzbWFsbFNpemVCdG4sIG1lZGl1bVNpemVCdG4pO1xuICAgIH0pO1xuXG4gICAgLy8g5Lit5bC65a+45oyJ6ZKu5LqL5Lu2XG4gICAgbWVkaXVtU2l6ZUJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgIHRoaXMuc2V0U3RpY2tlclNpemUoMTIwLCBzaXplU2xpZGVyLCBzaXplSW5wdXQsIHNtYWxsU2l6ZUJ0biwgbWVkaXVtU2l6ZUJ0bik7XG4gICAgfSk7XG4gIH1cblxuICAvLyDlupTnlKjmiYvmnLrlsLrlr7jorr7nva5cbiAgcHJpdmF0ZSBhcHBseVBob25lU2l6ZShzaXplOiAnZGVmYXVsdCcgfCAnbWVkaXVtJyB8ICdzbWFsbCcsIHBob25lU2NyZWVuOiBIVE1MRWxlbWVudCwgYnV0dG9uczogSFRNTEVsZW1lbnRbXSk6IHZvaWQge1xuICAgIC8vIOiuvue9ruWxj+W5lemrmOW6plxuICAgIHBob25lU2NyZWVuLnN0eWxlLmhlaWdodCA9IFBIT05FX1NJWkVTW3NpemVdO1xuXG4gICAgLy8g5L+d5a2Y6K6+572uXG4gICAgdGhpcy5jb25maWdNYW5hZ2VyLnNldFBob25lU2l6ZShzaXplKTtcblxuICAgIC8vIOabtOaWsOaMiemSruagt+W8j1xuICAgIGJ1dHRvbnMuZm9yRWFjaChidG4gPT4gYnRuLmNsYXNzTGlzdC5yZW1vdmUoJ3Bob25lLXNpemUtYWN0aXZlJykpO1xuXG4gICAgLy8g5qC55o2u6YCJ5oup55qE5bC65a+45r+A5rS75a+55bqU5oyJ6ZKuXG4gICAgaWYgKHNpemUgPT09ICdkZWZhdWx0Jykge1xuICAgICAgYnV0dG9uc1swXS5jbGFzc0xpc3QuYWRkKCdwaG9uZS1zaXplLWFjdGl2ZScpO1xuICAgIH0gZWxzZSBpZiAoc2l6ZSA9PT0gJ21lZGl1bScpIHtcbiAgICAgIGJ1dHRvbnNbMV0uY2xhc3NMaXN0LmFkZCgncGhvbmUtc2l6ZS1hY3RpdmUnKTtcbiAgICB9IGVsc2UgaWYgKHNpemUgPT09ICdzbWFsbCcpIHtcbiAgICAgIGJ1dHRvbnNbMl0uY2xhc3NMaXN0LmFkZCgncGhvbmUtc2l6ZS1hY3RpdmUnKTtcbiAgICB9XG4gIH1cblxuICAvLyDlupTnlKjooajmg4XljIXlsLrlr7hcbiAgcHJpdmF0ZSBhcHBseVN0aWNrZXJTaXplKHNpemU6IG51bWJlcik6IHZvaWQge1xuICAgIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zdHlsZS5zZXRQcm9wZXJ0eSgnLS1zdGlja2VyLXNpemUnLCBgJHtzaXplfXB4YCk7XG4gIH1cblxuICAvLyDorr7nva7ooajmg4XljIXlsLrlr7hcbiAgcHJpdmF0ZSBzZXRTdGlja2VyU2l6ZShcbiAgICBzaXplOiBudW1iZXIsXG4gICAgc2l6ZVNsaWRlcjogSFRNTElucHV0RWxlbWVudCxcbiAgICBzaXplSW5wdXQ6IEhUTUxJbnB1dEVsZW1lbnQsXG4gICAgc21hbGxTaXplQnRuOiBIVE1MRWxlbWVudCxcbiAgICBtZWRpdW1TaXplQnRuOiBIVE1MRWxlbWVudCxcbiAgKTogdm9pZCB7XG4gICAgc2l6ZVNsaWRlci52YWx1ZSA9IHNpemUudG9TdHJpbmcoKTtcbiAgICBzaXplSW5wdXQudmFsdWUgPSBzaXplLnRvU3RyaW5nKCk7XG4gICAgdGhpcy5jb25maWdNYW5hZ2VyLnNldFN0aWNrZXJTaXplKHNpemUpO1xuICAgIHRoaXMuYXBwbHlTdGlja2VyU2l6ZShzaXplKTtcblxuICAgIHRoaXMudXBkYXRlU3RpY2tlclNpemVCdXR0b25TdGF0ZShzaXplLCBzbWFsbFNpemVCdG4sIG1lZGl1bVNpemVCdG4pO1xuICB9XG5cbiAgLy8g5pu05paw6KGo5oOF5YyF5bC65a+45oyJ6ZKu54q25oCBXG4gIHByaXZhdGUgdXBkYXRlU3RpY2tlclNpemVCdXR0b25TdGF0ZShzaXplOiBudW1iZXIsIHNtYWxsU2l6ZUJ0bjogSFRNTEVsZW1lbnQsIG1lZGl1bVNpemVCdG46IEhUTUxFbGVtZW50KTogdm9pZCB7XG4gICAgaWYgKHNpemUgPT09IDgwKSB7XG4gICAgICBzbWFsbFNpemVCdG4uY2xhc3NMaXN0LmFkZCgncGhvbmUtc2l6ZS1hY3RpdmUnKTtcbiAgICAgIG1lZGl1bVNpemVCdG4uY2xhc3NMaXN0LnJlbW92ZSgncGhvbmUtc2l6ZS1hY3RpdmUnKTtcbiAgICB9IGVsc2UgaWYgKHNpemUgPT09IDEyMCkge1xuICAgICAgc21hbGxTaXplQnRuLmNsYXNzTGlzdC5yZW1vdmUoJ3Bob25lLXNpemUtYWN0aXZlJyk7XG4gICAgICBtZWRpdW1TaXplQnRuLmNsYXNzTGlzdC5hZGQoJ3Bob25lLXNpemUtYWN0aXZlJyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHNtYWxsU2l6ZUJ0bi5jbGFzc0xpc3QucmVtb3ZlKCdwaG9uZS1zaXplLWFjdGl2ZScpO1xuICAgICAgbWVkaXVtU2l6ZUJ0bi5jbGFzc0xpc3QucmVtb3ZlKCdwaG9uZS1zaXplLWFjdGl2ZScpO1xuICAgIH1cbiAgfVxuXG4gIC8vIOa7muWKqOWIsOiBiuWkqeW6lemDqFxuICBzY3JvbGxUb0JvdHRvbSgpOiB2b2lkIHtcbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIGNvbnN0IHdlY2hhdEJvZHkgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcud2VjaGF0LWJvZHknKSBhcyBIVE1MRWxlbWVudDtcbiAgICAgIGlmICh3ZWNoYXRCb2R5KSB7XG4gICAgICAgIHdlY2hhdEJvZHkuc2Nyb2xsVG9wID0gd2VjaGF0Qm9keS5zY3JvbGxIZWlnaHQ7XG4gICAgICB9XG4gICAgfSwgMzAwKTtcbiAgfVxufVxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/同层手机/ui-manager.ts\n")},"./src/同层手机/ui-renderer.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   UIRenderer: () => (/* binding */ UIRenderer)\n/* harmony export */ });\n/* harmony import */ var _event_manager__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./event-manager */ \"./src/同层手机/event-manager.ts\");\n\n// UI渲染器类\nclass UIRenderer {\n    wechatBody;\n    lastDisplayedTimeInMinutes = -Infinity;\n    options;\n    avatars;\n    eventManager;\n    constructor(wechatBodySelector, avatars, options) {\n        const $wechatBody = $(wechatBodySelector);\n        if (!$wechatBody.length) {\n            throw new Error(`Element with selector \"${wechatBodySelector}\" not found`);\n        }\n        this.wechatBody = $wechatBody[0];\n        this.avatars = avatars;\n        this.options = options;\n        this.eventManager = new _event_manager__WEBPACK_IMPORTED_MODULE_0__.EventManager();\n    }\n    // 清除聊天界面\n    clearChat() {\n        this.wechatBody.innerHTML = '';\n        this.lastDisplayedTimeInMinutes = -Infinity;\n    }\n    // 渲染单个条目到UI\n    renderEntry(entry, index, animate = false) {\n        if (!entry)\n            return;\n        if ('type' in entry) {\n            switch (entry.type) {\n                case 'message':\n                    if (entry.isSystemMessage) {\n                        this.renderSystemMessage(entry, animate, index);\n                    }\n                    else {\n                        this.addMessageToWeChat(entry, index, animate);\n                    }\n                    break;\n                case 'time':\n                    this.addTimestampToWeChat(entry.content.date, entry.content.time, true, index);\n                    break;\n                case 'event':\n                    // console.log('[BLMX] 渲染EVENT_LOG到UI:', entry.content, 'index:', index);\n                    this.addEventLogToWeChat(entry.content, index);\n                    break;\n                default:\n                    this.addMessageToWeChat(entry, index, animate);\n            }\n        }\n    }\n    // 渲染撤回通知\n    renderRecallNotice(entry, elementToReplace = null, index) {\n        const who = this.options.getDisplayName('sender' in entry && entry.sender === 'me' ? 'user' : 'char');\n        const noticeRow = document.createElement('div');\n        noticeRow.className = 'timestamp-row';\n        // 确保添加data-log-index属性，这样在删除模式下可以显示删除按钮\n        if (index !== undefined) {\n            noticeRow.dataset.logIndex = index.toString();\n        }\n        // 如果有id，添加message-id属性\n        if ('id' in entry) {\n            noticeRow.dataset.messageId = entry.id;\n        }\n        const recalledText = typeof entry.recalled_content === 'object' && entry.recalled_content !== null\n            ? entry.recalled_content.text\n            : entry.recalled_content;\n        noticeRow.innerHTML = `\n      <div class=\"recall-notice-container\">\n        <div class=\"recall-notice-text\">\"${who}\" 撤回了一条消息</div>\n        <div class=\"recall-content\">${recalledText || ('content' in entry ? entry.content : '')}</div>\n      </div>\n    `;\n        const noticeTextEl = noticeRow.querySelector('.recall-notice-text');\n        const contentEl = noticeRow.querySelector('.recall-content');\n        if (noticeTextEl && contentEl) {\n            noticeTextEl.addEventListener('click', () => {\n                contentEl.classList.toggle('expanded');\n            });\n        }\n        if (elementToReplace) {\n            elementToReplace.replaceWith(noticeRow);\n        }\n        else {\n            this.wechatBody.appendChild(noticeRow);\n        }\n        this.scrollToBottom();\n    }\n    renderMomentsFeed(logEntries, getDisplayName, avatars) {\n        const momentsFeedList = document.getElementById('moments-feed-list');\n        if (!momentsFeedList)\n            return;\n        momentsFeedList.innerHTML = '';\n        const posts = {};\n        const momentPostLogIndices = [];\n        logEntries.forEach((entry, index) => {\n            if ('key' in entry && entry.key.includes('_MOMENT')) {\n                momentPostLogIndices.push(index);\n            }\n        });\n        momentPostLogIndices.forEach(logIndex => {\n            const entry = logEntries[logIndex];\n            posts[logIndex] = { ...entry, likes: [], comments: [], id: logIndex };\n        });\n        logEntries.forEach((entry, index) => {\n            if ('key' in entry && (entry.key.includes('_LIKE') || entry.key.includes('_COMMENT'))) {\n                const targetPostAbsoluteIndex = momentPostLogIndices[parseInt(entry.data.target_post_id, 10)];\n                const targetPost = posts[targetPostAbsoluteIndex];\n                if (targetPost) {\n                    if (entry.key.includes('_LIKE')) {\n                        const likerName = entry.key.startsWith('USER') ? getDisplayName('user') : getDisplayName('char');\n                        if (!targetPost.likes.some((l) => l.name === likerName)) {\n                            targetPost.likes.push({ key: entry.key, name: likerName, originalLogIndex: index });\n                        }\n                    }\n                    else {\n                        targetPost.comments.push({ ...entry, originalLogIndex: index });\n                    }\n                }\n                else {\n                    console.warn(`[BLMX] Could not find target post for interaction. target_post_id: ${entry.data.target_post_id}`, entry);\n                }\n            }\n        });\n        Object.values(posts)\n            .reverse()\n            .forEach(post => {\n            const fromUser = post.key.startsWith('USER');\n            const authorName = fromUser ? getDisplayName('user') : getDisplayName('char');\n            const authorAvatar = fromUser ? avatars.user : avatars.char;\n            const li = document.createElement('li');\n            li.className = 'moment-post';\n            li.dataset.postId = post.id;\n            const momentSequenceId = momentPostLogIndices.indexOf(post.id);\n            li.dataset.momentSequenceId = String(momentSequenceId);\n            // 设置moment-id属性，用于删除功能\n            li.dataset.momentId = String(momentSequenceId);\n            let mediaHtml = '';\n            if (post.data.image_type === 'url' && post.data.image) {\n                mediaHtml = `<img src=\"${post.data.image}\" class=\"post-media-image\" />`;\n            }\n            else if (post.data.image_type === 'desc' && post.data.image) {\n                mediaHtml = `<div class=\"image-desc-content\"><div class=\"text-wrapper\">${post.data.image}</div></div>`;\n            }\n            let interactionsHtml = '';\n            if (post.likes.length > 0 || post.comments.length > 0) {\n                const likersHtml = post.likes.length > 0\n                    ? `<div class=\"likes-section\"><i class=\"fas fa-heart\"></i> ${post.likes\n                        .map((l) => `<span class=\"liker-name\">${l.name}</span>`)\n                        .join(', ')}</div>`\n                    : '';\n                const commentsHtml = post.comments.length > 0\n                    ? `<ul class=\"comments-section\">${post.comments\n                        .map((c) => `<li><span class=\"comment-author\">${c.key.startsWith('USER') ? getDisplayName('user') : getDisplayName('char')}</span>: ${c.data.text}</li>`)\n                        .join('')}</ul>`\n                    : '';\n                interactionsHtml = `<div class=\"post-interactions\">${likersHtml}${commentsHtml}</div>`;\n            }\n            const displayTime = this.formatMomentTimestamp(post.data.date, post.data.time);\n            const deleteBtnHtml = fromUser ? `<span class=\"delete-moment-btn\" title=\"删除\">删除</span>` : '';\n            li.innerHTML = `<img src=\"${authorAvatar}\" class=\"post-author-avatar\" />\n                         <div class=\"post-details\">\n                             <span class=\"post-author-name\">${authorName}</span>\n                             <p class=\"post-content\">${post.data.text || ''}</p>\n                             <div class=\"post-media\">${mediaHtml}</div>\n                             <div class=\"post-meta\">\n                                 <div class=\"post-meta-left\">\n                                     <span class=\"timestamp\">${displayTime}</span>\n                                     ${deleteBtnHtml}\n                                 </div>\n                                 <div class=\"post-actions\">\n                                     <span class=\"comment-button\" title=\"评论/点赞\"><i class=\"fas fa-comment-dots\"></i></span>\n                                 </div>\n                             </div>\n                             ${interactionsHtml}\n                         </div>`;\n            momentsFeedList.appendChild(li);\n        });\n    }\n    // 显示\"正在输入\"指示器\n    showTypingIndicator() {\n        this.hideTypingIndicator(); // 确保只有一个\n        const indicator = document.createElement('div');\n        indicator.className = 'typing-indicator';\n        indicator.id = 'typing-indicator-id';\n        const avatarSrc = this.avatars.char;\n        indicator.innerHTML = `\n      <img src=\"${avatarSrc}\" class=\"message-avatar\" />\n      <div class=\"message-bubble\">\n        <span class=\"typing-dot\"></span>\n        <span class=\"typing-dot\"></span>\n        <span class=\"typing-dot\"></span>\n      </div>\n    `;\n        this.wechatBody.appendChild(indicator);\n        this.scrollToBottom();\n    }\n    // 隐藏\"正在输入\"指示器\n    hideTypingIndicator() {\n        $('#typing-indicator-id').remove();\n    }\n    // 显示AI生成内容的加载动画（在灵动岛上）\n    showGeneratingIndicator() {\n        this.hideGeneratingIndicator(); // 确保只有一个\n        // 获取灵动岛元素\n        const dynamicIsland = document.querySelector('.dynamic-island');\n        if (!dynamicIsland)\n            return;\n        // 创建加载动画容器\n        const loadingContainer = document.createElement('div');\n        loadingContainer.className = 'generating-indicator';\n        loadingContainer.id = 'generating-indicator-id';\n        // 创建加载动画点\n        loadingContainer.innerHTML = `\n      <span class=\"generating-dot\"></span>\n      <span class=\"generating-dot\"></span>\n      <span class=\"generating-dot\"></span>\n    `;\n        // 添加到灵动岛\n        dynamicIsland.appendChild(loadingContainer);\n        // 添加活跃类\n        dynamicIsland.classList.add('generating-active');\n    }\n    // 隐藏AI生成内容的加载动画\n    hideGeneratingIndicator() {\n        $('#generating-indicator-id').remove();\n        $('.dynamic-island').removeClass('generating-active');\n    }\n    // 计算打字延迟时间\n    calculateTypingDelay(messageContent) {\n        // 对于非文本消息（如表情、图片等），使用一个较短的固定延迟\n        if (typeof messageContent !== 'string' || messageContent.trim() === '') {\n            return 800 + Math.random() * 700; // 0.8s to 1.5s\n        }\n        const textLength = messageContent.length;\n        const baseDelay = 500; // 基础延迟 0.5s\n        const perCharDelay = 40; // 每个字符增加 40ms\n        const randomComponent = Math.random() * 800; // 增加 0-0.8s 的随机性\n        const totalDelay = baseDelay + textLength * perCharDelay + randomComponent;\n        // 确保总延迟不超过3秒 (3000ms)\n        return Math.min(totalDelay, 3000);\n    }\n    // 添加消息到微信界面\n    addMessageToWeChat(entry, index, isNewMessage = false) {\n        const { id, sender, type } = entry;\n        const messageRow = document.createElement('div');\n        messageRow.className = 'message-row';\n        if (index !== undefined)\n            messageRow.dataset.logIndex = index.toString();\n        messageRow.dataset.messageId = id;\n        const senderClass = sender;\n        messageRow.classList.add(senderClass);\n        const avatarSrc = sender === 'me' ? this.avatars.user : this.avatars.char;\n        const avatarImgHtml = `<img src=\"${avatarSrc}\" class=\"message-avatar\" />`;\n        if (type === 'voice') {\n            this.renderVoiceMessage(messageRow, entry, avatarImgHtml);\n        }\n        else {\n            let bubbleContent = '';\n            switch (type) {\n                case 'sticker':\n                    bubbleContent = this.renderStickerContent(entry);\n                    break;\n                case 'image':\n                    bubbleContent = this.renderImageContent(entry);\n                    break;\n                case 'location':\n                    bubbleContent = this.renderLocationContent(entry);\n                    break;\n                case 'transfer':\n                    bubbleContent = this.renderTransferContent(entry);\n                    break;\n                case 'file':\n                    bubbleContent = this.renderFileContent(entry);\n                    break;\n                case 'gift':\n                    {\n                        // 判断是红包还是礼物\n                        const giftEntry = entry;\n                        const isRedEnvelope = giftEntry.data.name.includes('红包') ||\n                            giftEntry.data.name.includes('压岁钱') ||\n                            giftEntry.data.name.includes('红利');\n                        if (isRedEnvelope) {\n                            bubbleContent = this.renderRedEnvelopeContent(giftEntry);\n                        }\n                        else {\n                            bubbleContent = this.renderGiftContent(giftEntry);\n                        }\n                    }\n                    break;\n                default:\n                    bubbleContent = entry.content.replace(/</g, '&lt;').replace(/>/g, '&gt;');\n                    break;\n            }\n            // 根据消息类型添加特殊的气泡类\n            let bubbleClass = 'message-bubble';\n            if (type === 'sticker') {\n                bubbleClass += ' sticker-bubble';\n            }\n            else if (type === 'image') {\n                bubbleClass += ' image-desc-bubble';\n            }\n            else if (type === 'location') {\n                bubbleClass += ' location-bubble';\n            }\n            else if (type === 'transfer') {\n                bubbleClass += ' transfer-bubble';\n            }\n            else if (type === 'file') {\n                bubbleClass += ' file-bubble';\n            }\n            else if (type === 'gift') {\n                bubbleClass += ' gift-bubble';\n            }\n            messageRow.innerHTML =\n                sender === 'me'\n                    ? `<div class=\"${bubbleClass}\">${bubbleContent}</div>${avatarImgHtml}`\n                    : `${avatarImgHtml}<div class=\"${bubbleClass}\">${bubbleContent}</div>`;\n            const bubble = messageRow.querySelector('.message-bubble');\n            if (bubble) {\n                this.applyBubbleStyles(bubble, type, entry);\n                this.setupBubbleInteractions(bubble, type, entry);\n            }\n        }\n        if (isNewMessage) {\n            messageRow.classList.add('new-message');\n        }\n        // 为USER文字消息添加长按撤回功能\n        if (sender === 'me' && entry.type === 'message') {\n            this.setupUserMessageLongPress(messageRow, entry);\n        }\n        this.wechatBody.appendChild(messageRow);\n        this.scrollToBottom();\n    }\n    // 渲染语音消息\n    renderVoiceMessage(messageRow, entry, avatarImgHtml) {\n        const contentContainer = document.createElement('div');\n        contentContainer.className = 'message-content-container';\n        const bubble = document.createElement('div');\n        bubble.className = 'message-bubble voice-bubble';\n        bubble.innerHTML = `<span class=\"duration\">${entry.content.duration}\"</span><i class=\"fas fa-wifi voice-icon\"></i>`;\n        const textRevealBox = document.createElement('div');\n        textRevealBox.className = 'voice-text-content';\n        textRevealBox.textContent = entry.content.text;\n        contentContainer.appendChild(bubble);\n        contentContainer.appendChild(textRevealBox);\n        if (entry.sender === 'me') {\n            messageRow.appendChild(contentContainer);\n            messageRow.insertAdjacentHTML('beforeend', avatarImgHtml);\n        }\n        else {\n            messageRow.insertAdjacentHTML('afterbegin', avatarImgHtml);\n            messageRow.appendChild(contentContainer);\n        }\n        let longPressFired = false;\n        const timerDuration = 500;\n        let pressTimer;\n        bubble.addEventListener('pointerdown', e => {\n            if (e.pointerType === 'mouse' && e.button !== 0)\n                return;\n            longPressFired = false;\n            pressTimer = window.setTimeout(() => {\n                messageRow.classList.add('voice-text-visible');\n                longPressFired = true;\n            }, timerDuration);\n        });\n        bubble.addEventListener('pointerup', () => {\n            clearTimeout(pressTimer);\n            if (!longPressFired) {\n                if (messageRow.classList.contains('voice-text-visible')) {\n                    messageRow.classList.remove('voice-text-visible');\n                }\n            }\n        });\n        bubble.addEventListener('pointerleave', () => clearTimeout(pressTimer));\n        bubble.addEventListener('contextmenu', e => e.preventDefault());\n    }\n    // 渲染表情包内容\n    renderStickerContent(entry) {\n        const stickerUrl = this.options.findStickerUrlByName(entry.content);\n        if (stickerUrl) {\n            // 使用纯HTML创建表情包容器和图片\n            return `<div class=\"sticker-container\"><img src=\"${stickerUrl}\" class=\"sticker-img\" /></div>`;\n        }\n        else {\n            return `<div class=\"sticker-placeholder\">[表情]</div>`;\n        }\n    }\n    // 渲染图片内容\n    renderImageContent(entry) {\n        if (entry.content.type === 'url') {\n            let imageUrl = entry.content.value;\n            if (imageUrl.startsWith('blmx-img-')) {\n                const storedImage = sessionStorage.getItem(imageUrl);\n                if (storedImage) {\n                    imageUrl = storedImage;\n                }\n                else {\n                    return `<div class=\"image-desc-content\"><div class=\"text-wrapper\">[图片已过期]</div></div>`;\n                }\n            }\n            return `<img src=\"${imageUrl}\" class=\"chat-image\" />`;\n        }\n        else {\n            const descText = entry.content.value;\n            return `<div class=\"image-desc-content\"><div class=\"text-wrapper\">${String(descText)\n                .replace(/</g, '&lt;')\n                .replace(/>/g, '&gt;')}</div></div>`;\n        }\n    }\n    // 渲染位置内容\n    renderLocationContent(entry) {\n        return `<div class=\"location-card\">\n      <div class=\"location-content\">\n        <div class=\"location-title\">${entry.content}</div>\n        <div class=\"location-subtitle\">共享实时位置</div>\n      </div>\n      <div class=\"location-map-placeholder\"></div>\n    </div>`;\n    }\n    // 渲染转账内容\n    renderTransferContent(entry) {\n        const isReceipt = entry.data.status !== 'sent';\n        const detailsHtml = isReceipt\n            ? `<div class=\"status-text\">${entry.data.status === 'accepted' ? '已接收' : '已退还'}</div>`\n            : `<div class=\"note\">${entry.data.note || ' '}</div>`;\n        const cardClass = isReceipt ? 'transfer-receipt' : 'transfer-initial';\n        return `<div class=\"transfer-card ${cardClass}\">\n      <div class=\"transfer-content\">\n        <img src=\"https://gitgud.io/lolodesu/lolobabytutorial/-/raw/master/lologame/%E7%B4%A0%E6%9D%90/arrows.png\" class=\"transfer-icon-image\">\n        <div class=\"transfer-details\">\n          <div class=\"amount\">¥${entry.data.amount}</div>\n          ${detailsHtml}\n        </div>\n      </div>\n      <div class=\"transfer-footer\">转账</div>\n    </div>`;\n    }\n    // 渲染文件内容\n    renderFileContent(entry) {\n        return `<div class=\"file-card\">\n      <div class=\"file-content\">\n        <i class=\"fas fa-file-alt file-icon\"></i>\n        <div class=\"file-details\">\n          <div class=\"file-name\">${entry.content.replace(/</g, '&lt;').replace(/>/g, '&gt;')}</div>\n        </div>\n      </div>\n      <div class=\"file-footer\">文件</div>\n    </div>`;\n    }\n    // 渲染礼物内容\n    renderGiftContent(entry) {\n        let detailsClass = '';\n        let detailsContent = '';\n        const isReceipt = entry.data.status !== 'sent';\n        const cardClass = isReceipt ? 'gift-receipt' : 'gift-initial';\n        if (entry.data.status === 'sent') {\n            if (entry.data.price) {\n                detailsClass = 'gift-price';\n                detailsContent = `¥ ${entry.data.price}`;\n            }\n        }\n        else {\n            detailsClass = 'gift-status-text';\n            detailsContent = entry.data.status === 'accepted' ? '已收下' : '已拒收';\n        }\n        return `<div class=\"gift-card ${cardClass}\">\n      <div class=\"gift-content\">\n        <span class=\"gift-icon-emoji\">🎁</span>\n        <div class=\"gift-details\">\n          <div class=\"gift-name\">${entry.data.name}</div>\n          ${detailsContent ? `<div class=\"${detailsClass}\">${detailsContent}</div>` : ''}\n        </div>\n      </div>\n      <div class=\"gift-footer\">礼物</div>\n    </div>`;\n    }\n    // 渲染红包内容\n    renderRedEnvelopeContent(entry) {\n        let detailsClass = '';\n        let detailsContent = '';\n        const isReceipt = entry.data.status !== 'sent';\n        const cardClass = isReceipt ? 'gift-receipt' : 'gift-initial';\n        if (entry.data.status === 'sent') {\n            if (entry.data.price) {\n                detailsClass = 'gift-price';\n                detailsContent = `¥ ${entry.data.price}`;\n            }\n        }\n        else {\n            detailsClass = 'gift-status-text';\n            detailsContent = entry.data.status === 'accepted' ? '已领取' : '已拒收';\n        }\n        return `<div class=\"gift-card ${cardClass}\">\n      <div class=\"gift-content\">\n        <img src=\"https://gitgud.io/lolodesu/lolobabytutorial/-/raw/master/lologame/%E7%B4%A0%E6%9D%90/red-envelope.png\" class=\"gift-icon-image\">\n        <div class=\"gift-details\">\n          <div class=\"gift-name\">${entry.data.name}</div>\n          ${detailsContent ? `<div class=\"${detailsClass}\">${detailsContent}</div>` : ''}\n        </div>\n      </div>\n      <div class=\"gift-footer\">红包</div>\n    </div>`;\n    }\n    // 应用气泡样式\n    applyBubbleStyles(bubble, type, entry) {\n        if (type === 'image') {\n            if (entry.content.type === 'url') {\n                bubble.classList.add('image-url-bubble');\n            }\n            else {\n                bubble.classList.add('image-desc-bubble');\n            }\n        }\n        else {\n            const bubbleTypeMap = {\n                sticker: 'sticker-bubble',\n                location: 'location-bubble',\n                transfer: 'transfer-bubble',\n                file: 'file-bubble',\n                gift: 'gift-bubble',\n            };\n            if (bubbleTypeMap[type]) {\n                bubble.classList.add(bubbleTypeMap[type]);\n            }\n        }\n    }\n    // 设置气泡交互\n    setupBubbleInteractions(bubble, type, entry) {\n        if (type === 'transfer') {\n            const transferCard = bubble.querySelector('.transfer-card');\n            if (!transferCard)\n                return;\n            const transferEntry = entry;\n            const isReceipt = transferEntry.data.status !== 'sent';\n            if (!isReceipt && entry.sender === 'them') {\n                transferCard.classList.add('them');\n                transferCard.addEventListener('click', () => {\n                    // 直接接收转账，因为转账功能本身已经有自定义对话框\n                    if (this.options.onTransferAccept) {\n                        this.options.onTransferAccept({\n                            ...transferEntry.data,\n                            status: 'accepted',\n                        });\n                    }\n                }, { once: true });\n            }\n        }\n        if (type === 'gift') {\n            const giftBubble = bubble;\n            const giftCard = bubble.querySelector('.gift-card');\n            const giftEntry = entry;\n            const isReceipt = giftEntry.data.status !== 'sent';\n            if (isReceipt) {\n                // 已经接收或拒收的礼物，不需要添加点击事件\n                return;\n            }\n            // 为所有未处理的礼物添加点击事件，无论是用户还是AI发送的\n            if (giftCard)\n                giftCard.classList.add(entry.sender === 'them' ? 'them' : 'me');\n            giftBubble.classList.add('gift-clickable');\n            giftBubble.addEventListener('click', async () => {\n                if (this.options.onGiftAction) {\n                    await this.options.onGiftAction(giftEntry.data);\n                }\n                giftBubble.classList.remove('gift-clickable');\n            }, { once: true });\n        }\n    }\n    // 添加时间戳到微信界面\n    addTimestampToWeChat(date, time, isSystemTime, index) {\n        const timeText = this.formatMomentTimestamp(date, time);\n        // 检查是否需要显示时间戳\n        // 如果是系统时间（而不是用户手动插入的时间）\n        if (isSystemTime) {\n            // 只有纯时间（今天的消息）才需要进行10分钟过滤\n            const isOnlyTime = timeText === time;\n            if (isOnlyTime) {\n                // 对于今天的消息，检查是否与上一条时间戳太接近\n                const timeInMinutes = this.parseTimeToMinutes(timeText);\n                if (timeInMinutes !== null && timeInMinutes - this.lastDisplayedTimeInMinutes < 10) {\n                    return; // 跳过显示这个时间戳\n                }\n                // 更新最后显示的时间\n                if (timeInMinutes !== null) {\n                    this.lastDisplayedTimeInMinutes = timeInMinutes;\n                }\n            }\n            else {\n                // 对于昨天或更早的消息，总是显示并重置时间计数器\n                this.lastDisplayedTimeInMinutes = -Infinity;\n            }\n        }\n        // 创建并添加时间戳元素\n        const t = document.createElement('div');\n        t.className = 'timestamp-row';\n        if (index !== undefined)\n            t.dataset.logIndex = index.toString();\n        // 存储原始日期和时间用于刷新\n        t.dataset.originalDate = date;\n        t.dataset.originalTime = time;\n        t.innerHTML = `<span class=\"timestamp-text\">${timeText}</span>`;\n        this.wechatBody.appendChild(t);\n        this.scrollToBottom();\n    }\n    // 添加事件日志到微信界面\n    addEventLogToWeChat(eventData, index) {\n        // console.log('[BLMX] addEventLogToWeChat被调用:', eventData, 'index:', index);\n        // 确保eventData具有必要的字段\n        if (!eventData || !eventData.date || !eventData.time) {\n            console.error('[BLMX] 事件日志数据不完整:', eventData);\n            return;\n        }\n        // 获取格式化后的时间文本，包含日期信息\n        const timeText = this.formatMomentTimestamp(eventData.date, eventData.time);\n        // 创建事件日志行\n        const row = document.createElement('div');\n        row.className = 'event-log-row';\n        if (index !== undefined)\n            row.dataset.logIndex = index.toString();\n        // 存储原始日期和时间用于刷新\n        row.dataset.originalDate = eventData.date;\n        row.dataset.originalTime = eventData.time;\n        // 如果没有描述，只显示时间；如果有描述，显示时间和描述\n        if (eventData.description) {\n            row.innerHTML = `\n        <div class=\"event-log-container\">\n          <div class=\"event-time-text has-desc clickable\">${timeText}</div>\n          <div class=\"event-description\">${eventData.description}</div>\n        </div>\n      `;\n        }\n        else {\n            row.innerHTML = `\n        <div class=\"event-log-container\">\n          <div class=\"event-time-text\">${timeText}</div>\n        </div>\n      `;\n        }\n        // 为带有描述的事件添加点击展开功能\n        if (eventData.description) {\n            const timeEl = row.querySelector('.event-time-text');\n            const descEl = row.querySelector('.event-description');\n            if (timeEl && descEl) {\n                timeEl.addEventListener('click', () => {\n                    // 简单切换显示/隐藏状态，不使用动画\n                    const isExpanded = descEl.classList.toggle('expanded');\n                    const descHtmlEl = descEl;\n                    if (isExpanded) {\n                        // 显示描述\n                        descHtmlEl.style.display = 'block';\n                    }\n                    else {\n                        // 直接隐藏，不使用动画\n                        descHtmlEl.style.display = 'none';\n                    }\n                });\n            }\n        }\n        // 添加到聊天界面并滚动到底部\n        this.wechatBody.appendChild(row);\n        this.scrollToBottom();\n    }\n    // 渲染系统消息\n    renderSystemMessage(entry, animate = false, index) {\n        const chatContainer = this.wechatBody;\n        if (!chatContainer)\n            return;\n        const systemRow = document.createElement('div');\n        systemRow.className = 'event-log-row';\n        if (animate)\n            systemRow.classList.add('new-message');\n        if (entry.id) {\n            systemRow.dataset.messageId = entry.id;\n        }\n        if (index !== undefined) {\n            systemRow.dataset.logIndex = index.toString();\n        }\n        const systemContainer = document.createElement('div');\n        systemContainer.className = 'event-log-container';\n        const systemText = document.createElement('div');\n        systemText.className = 'event-time-text system-message';\n        systemText.textContent = entry.content;\n        systemContainer.appendChild(systemText);\n        systemRow.appendChild(systemContainer);\n        chatContainer.appendChild(systemRow);\n        this.scrollToBottom();\n    }\n    // 解析时间为分钟数\n    parseTimeToMinutes(timeString) {\n        const match = timeString.match(/(\\d{1,2}):(\\d{2})/);\n        return match ? 60 * parseInt(match[1], 10) + parseInt(match[2], 10) : null;\n    }\n    // 格式化时间戳\n    formatMomentTimestamp(dateString, timeString) {\n        if (!dateString || !timeString)\n            return ' ';\n        try {\n            // 解析日期和当前日期\n            const postDate = new Date(dateString);\n            // 确保我们使用游戏时间而非现实时间\n            const currentDate = window.currentGameDate ? new Date(window.currentGameDate) : new Date();\n            // 提取年月日\n            const postYear = postDate.getFullYear();\n            const postMonth = postDate.getMonth();\n            const postDay = postDate.getDate();\n            const nowYear = currentDate.getFullYear();\n            const nowMonth = currentDate.getMonth();\n            const nowDay = currentDate.getDate();\n            // 判断是否是今天的消息\n            if (postYear === nowYear && postMonth === nowMonth && postDay === nowDay) {\n                return timeString;\n            }\n            // 创建昨天的日期对象\n            const yesterday = new Date(currentDate);\n            yesterday.setDate(currentDate.getDate() - 1);\n            const yesterdayYear = yesterday.getFullYear();\n            const yesterdayMonth = yesterday.getMonth();\n            const yesterdayDay = yesterday.getDate();\n            // 判断是否是昨天的消息\n            if (postYear === yesterdayYear && postMonth === yesterdayMonth && postDay === yesterdayDay) {\n                return `昨天 ${timeString}`;\n            }\n            // 判断是否是今年的消息\n            if (postYear === nowYear) {\n                return `${postMonth + 1}月${postDay}日 ${timeString}`;\n            }\n            // 其他情况显示完整日期\n            return `${postYear}年${postMonth + 1}月${postDay}日 ${timeString}`;\n        }\n        catch (error) {\n            console.error('Error formatting timestamp:', error);\n            return timeString; // 出错时至少返回时间\n        }\n    }\n    // 刷新所有时间戳显示\n    refreshAllTimestamps() {\n        // 刷新所有时间戳\n        const timestampRows = $('.timestamp-row', this.wechatBody);\n        const eventLogRows = $('.event-log-row', this.wechatBody);\n        // 刷新时间戳行\n        timestampRows.each((_, row) => {\n            const $row = $(row);\n            const $timestampText = $row.find('.timestamp-text');\n            if ($timestampText.length) {\n                const originalDate = $row.data('originalDate');\n                const originalTime = $row.data('originalTime');\n                if (originalDate && originalTime) {\n                    $timestampText.text(this.formatMomentTimestamp(originalDate, originalTime));\n                }\n            }\n        });\n        // 刷新事件日志行\n        eventLogRows.each((_, row) => {\n            const $row = $(row);\n            const $eventTimeText = $row.find('.event-time-text');\n            if ($eventTimeText.length) {\n                const originalDate = $row.data('originalDate');\n                const originalTime = $row.data('originalTime');\n                if (originalDate && originalTime) {\n                    // 更新文本内容\n                    $eventTimeText.text(this.formatMomentTimestamp(originalDate, originalTime));\n                }\n            }\n        });\n    }\n    renderFeatureGrid(gridElement, features, callbacks) {\n        if (!gridElement) {\n            console.error('[BLMX] Grid element not found for renderFeatureGrid');\n            return;\n        }\n        gridElement.innerHTML = '';\n        const isDeleteMode = gridElement.classList.contains('sticker-delete-mode');\n        features.forEach(feature => {\n            const item = document.createElement('div');\n            item.className = 'feature-item';\n            let iconHtml = '';\n            if (feature.isAddBtn) {\n                // 如果是表情管理按钮，使用齿轮图标\n                if (feature.label === '表情管理') {\n                    iconHtml = `<div class=\"feature-icon\"><i class=\"fas fa-cog\"></i></div>`;\n                }\n                else {\n                    iconHtml = `<div class=\"feature-icon\"><i class=\"fas fa-${feature.label === '添加' ? 'plus' : 'trash-alt'}\"></i></div>`;\n                }\n            }\n            else if (feature.icon && feature.icon.startsWith('http')) {\n                // 处理图片URL (表情包)\n                iconHtml = `<div class=\"feature-icon\"><img src=\"${feature.icon}\" alt=\"${feature.label}\" class=\"feature-icon-img\"></div>`;\n            }\n            else if (feature.icon &&\n                (feature.icon.startsWith('fas ') || feature.icon.startsWith('far ') || feature.icon.startsWith('fab '))) {\n                // 处理带空格的Font Awesome图标\n                iconHtml = `<div class=\"feature-icon\"><i class=\"${feature.icon} theme-icon\"></i></div>`;\n            }\n            else if (feature.icon && feature.icon.startsWith('fa')) {\n                // 处理不带空格的Font Awesome图标\n                iconHtml = `<div class=\"feature-icon\"><i class=\"${feature.icon} theme-icon\"></i></div>`;\n            }\n            else {\n                // 处理其他图标类型\n                iconHtml = `<div class=\"feature-icon\"><i class=\"${feature.icon || 'fas fa-question'}\"></i></div>`;\n            }\n            item.innerHTML = `${iconHtml}<span class=\"feature-label\">${feature.label}</span>`;\n            const iconContainer = item.querySelector('.feature-icon');\n            if (isDeleteMode && !feature.isAddBtn && !feature.isDefault) {\n                // 创建隐藏的原生checkbox\n                const checkbox = document.createElement('input');\n                checkbox.type = 'checkbox';\n                checkbox.className = 'sticker-checkbox';\n                checkbox.dataset.stickerLabel = feature.label;\n                item.appendChild(checkbox);\n                // 创建可见的checkbox按钮\n                const checkboxButton = document.createElement('div');\n                checkboxButton.className = 'sticker-checkbox-button';\n                checkboxButton.style.display = 'block';\n                item.appendChild(checkboxButton);\n                // 更新checkbox按钮状态\n                const updateCheckboxState = (checked) => {\n                    if (checked) {\n                        checkboxButton.classList.add('checked');\n                    }\n                    else {\n                        checkboxButton.classList.remove('checked');\n                    }\n                    iconContainer?.classList.toggle('selected-for-delete', checked);\n                };\n                // 点击事件\n                const handleClick = (e) => {\n                    e.preventDefault();\n                    e.stopPropagation();\n                    checkbox.checked = !checkbox.checked;\n                    updateCheckboxState(checkbox.checked);\n                };\n                item.addEventListener('click', handleClick);\n                checkboxButton.addEventListener('click', handleClick);\n                // 设置初始状态\n                updateCheckboxState(checkbox.checked);\n            }\n            else if (feature.label === '添加') {\n                item.addEventListener('click', callbacks.onAddStickers);\n            }\n            else if (feature.label === '删除' || feature.label === '表情管理') {\n                item.addEventListener('click', callbacks.onToggleDeleteMode);\n            }\n            else {\n                item.addEventListener('click', feature.action);\n            }\n            gridElement.appendChild(item);\n        });\n    }\n    // 滚动到底部\n    scrollToBottom() {\n        // 直接设置scrollTop，避免jQuery动画可能导致的滚动锁定问题\n        this.wechatBody.scrollTop = this.wechatBody.scrollHeight;\n        // 添加一个延迟执行的备份滚动，确保在DOM完全渲染后滚动生效\n        setTimeout(() => {\n            this.wechatBody.scrollTop = this.wechatBody.scrollHeight;\n        }, 100);\n    }\n    // 为USER消息设置长按撤回功能 - 移动端优化版本\n    setupUserMessageLongPress(messageRow, entry) {\n        const $messageRow = $(messageRow);\n        const $messageBubble = $messageRow.find('.message-bubble');\n        const $targetElement = $messageBubble.length ? $messageBubble : $messageRow;\n        let longPressTimer;\n        const startCoords = { x: 0, y: 0 };\n        let isLongPressing = false;\n        let hasTriggered = false;\n        // 移动端优化的长按开始处理\n        const startLongPress = (e) => {\n            // 重置状态\n            hasTriggered = false;\n            isLongPressing = true;\n            // 安全地阻止默认行为 - 检查事件是否可取消\n            if (e.cancelable !== false) {\n                e.preventDefault();\n            }\n            e.stopPropagation();\n            // 获取坐标 - 兼容触摸和鼠标事件\n            const originalEvent = e;\n            if (originalEvent.type === 'touchstart') {\n                const touch = originalEvent.touches[0];\n                startCoords.x = touch.clientX;\n                startCoords.y = touch.clientY;\n            }\n            else {\n                const mouse = originalEvent;\n                if (mouse.button !== 0)\n                    return; // 只处理左键\n                startCoords.x = mouse.clientX;\n                startCoords.y = mouse.clientY;\n            }\n            // 添加视觉反馈 - 使用jQuery\n            $targetElement.addClass('long-press-active');\n            // 防止页面滚动和文本选择 - 使用jQuery\n            $('body').css({\n                overflow: 'hidden',\n                'user-select': 'none',\n                '-webkit-user-select': 'none',\n                '-moz-user-select': 'none',\n                '-ms-user-select': 'none',\n                '-webkit-touch-callout': 'none',\n                '-webkit-tap-highlight-color': 'transparent',\n            });\n            // 设置长按定时器\n            longPressTimer = setTimeout(async () => {\n                if (isLongPressing && !hasTriggered) {\n                    hasTriggered = true;\n                    // 移除视觉反馈\n                    $targetElement.removeClass('long-press-active');\n                    // 恢复页面状态\n                    $('body').css({\n                        overflow: '',\n                        'user-select': '',\n                        '-webkit-user-select': '',\n                        '-moz-user-select': '',\n                        '-ms-user-select': '',\n                        '-webkit-touch-callout': '',\n                        '-webkit-tap-highlight-color': '',\n                    });\n                    // 添加触觉反馈（移动端）\n                    if ('vibrate' in navigator) {\n                        navigator.vibrate(50);\n                    }\n                    // 执行撤回操作\n                    try {\n                        if (this.options.isMessageInQueue && this.options.isMessageInQueue(entry.id)) {\n                            await this.handleUserMessageRecall(entry);\n                        }\n                        else {\n                            // 使用jQuery UI的效果显示无法撤回\n                            $targetElement.effect('shake', { times: 2, distance: 5 }, 300);\n                            const { DialogManager } = await Promise.resolve(/*! import() */).then(__webpack_require__.bind(__webpack_require__, /*! ./dialog-manager */ \"./src/同层手机/dialog-manager.ts\"));\n                            const dialogManager = DialogManager.getInstance();\n                            await dialogManager.alert('消息已合并发送，无法撤回。', '无法撤回');\n                        }\n                    }\n                    catch (error) {\n                        // 使用jQuery UI的效果\n                        $targetElement.effect('shake', { times: 2, distance: 5 }, 300);\n                        console.error('撤回失败:', error);\n                    }\n                    isLongPressing = false;\n                }\n            }, 600); // 600ms长按时间\n        };\n        // 移动端优化的长按取消处理\n        const cancelLongPress = (e) => {\n            if (longPressTimer) {\n                clearTimeout(longPressTimer);\n            }\n            // 检查是否移动过多（超过20px取消长按，增加移动端容忍度）\n            if (e && isLongPressing && !hasTriggered) {\n                let currentX, currentY;\n                const originalEvent = e;\n                if (originalEvent.type.startsWith('touch')) {\n                    const touchEvent = originalEvent;\n                    if (touchEvent.touches.length > 0) {\n                        currentX = touchEvent.touches[0].clientX;\n                        currentY = touchEvent.touches[0].clientY;\n                    }\n                    else {\n                        // touchend事件，使用changedTouches\n                        currentX = touchEvent.changedTouches[0].clientX;\n                        currentY = touchEvent.changedTouches[0].clientY;\n                    }\n                }\n                else {\n                    const mouseEvent = originalEvent;\n                    currentX = mouseEvent.clientX;\n                    currentY = mouseEvent.clientY;\n                }\n                // 使用lodash计算距离\n                const moveDistance = Math.sqrt(Math.pow(currentX - startCoords.x, 2) + Math.pow(currentY - startCoords.y, 2));\n                if (moveDistance > 20) {\n                    // 增加移动容忍度到20px，适合移动端\n                    isLongPressing = false;\n                }\n            }\n            // 清理状态 - 使用jQuery\n            $targetElement.removeClass('long-press-active');\n            $('body').css({\n                overflow: '',\n                'user-select': '',\n                '-webkit-user-select': '',\n                '-moz-user-select': '',\n                '-ms-user-select': '',\n                '-webkit-touch-callout': '',\n                '-webkit-tap-highlight-color': '',\n            });\n            isLongPressing = false;\n        };\n        // 使用原生事件绑定避免jQuery的preventDefault问题\n        const targetElement = $targetElement[0];\n        // 鼠标事件\n        targetElement.addEventListener('mousedown', startLongPress, { passive: false });\n        targetElement.addEventListener('mouseup', cancelLongPress, { passive: true });\n        targetElement.addEventListener('mouseleave', cancelLongPress, { passive: true });\n        // 使用简单的节流优化mousemove性能\n        let mouseMoveTimer;\n        targetElement.addEventListener('mousemove', e => {\n            if (mouseMoveTimer)\n                clearTimeout(mouseMoveTimer);\n            mouseMoveTimer = setTimeout(() => cancelLongPress(e), 50);\n        }, { passive: true });\n        // 触摸事件 - 移动端核心功能，使用passive避免控制台警告\n        targetElement.addEventListener('touchstart', startLongPress, { passive: false });\n        targetElement.addEventListener('touchend', cancelLongPress, { passive: true });\n        targetElement.addEventListener('touchcancel', cancelLongPress, { passive: true });\n        // 使用简单的节流优化touchmove性能\n        let touchMoveTimer;\n        targetElement.addEventListener('touchmove', e => {\n            if (touchMoveTimer)\n                clearTimeout(touchMoveTimer);\n            touchMoveTimer = setTimeout(() => cancelLongPress(e), 50);\n        }, { passive: true });\n        // 阻止上下文菜单、文本选择和拖拽 - 使用jQuery\n        $targetElement.on('contextmenu selectstart dragstart', e => {\n            e.preventDefault();\n            e.stopPropagation();\n        });\n        // 移动端特殊处理 - 阻止双击缩放\n        $targetElement.css({\n            'touch-action': 'manipulation',\n            '-webkit-touch-callout': 'none',\n            '-webkit-user-select': 'none',\n            '-webkit-tap-highlight-color': 'transparent',\n        });\n    }\n    // 处理USER消息撤回\n    async handleUserMessageRecall(entry) {\n        try {\n            // 导入DialogManager\n            const { DialogManager } = await Promise.resolve(/*! import() */).then(__webpack_require__.bind(__webpack_require__, /*! ./dialog-manager */ \"./src/同层手机/dialog-manager.ts\"));\n            const dialogManager = DialogManager.getInstance();\n            // 确认撤回操作\n            const confirmed = await dialogManager.confirm('确定要撤回这条文字消息吗？撤回后对方将看到\"你撤回了一条消息\"。', '撤回文字消息', '撤回', '取消');\n            if (confirmed) {\n                // 调用撤回功能\n                if (this.options.onRecallMessage) {\n                    await this.options.onRecallMessage(entry);\n                }\n            }\n        }\n        catch (error) {\n            console.error('撤回消息时出错:', error);\n        }\n    }\n    /**\n     * 清理资源，防止内存泄漏\n     */\n    cleanup() {\n        this.eventManager.cleanup();\n        // console.log('[UIRenderer] 资源已清理');\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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WUFDL0IscUJBQXFCLEVBQUUsTUFBTTtZQUM3Qiw2QkFBNkIsRUFBRSxhQUFhO1NBQzdDLENBQUMsQ0FBQztJQUNMLENBQUM7SUFFRCxhQUFhO0lBQ0wsS0FBSyxDQUFDLHVCQUF1QixDQUFDLEtBQWdCO1FBQ3BELElBQUksQ0FBQztZQUNILGtCQUFrQjtZQUNsQixNQUFNLEVBQUUsYUFBYSxFQUFFLEdBQUcsTUFBTSw0SUFBMEIsQ0FBQztZQUMzRCxNQUFNLGFBQWEsR0FBRyxhQUFhLENBQUMsV0FBVyxFQUFFLENBQUM7WUFFbEQsU0FBUztZQUNULE1BQU0sU0FBUyxHQUFHLE1BQU0sYUFBYSxDQUFDLE9BQU8sQ0FDM0Msa0NBQWtDLEVBQ2xDLFFBQVEsRUFDUixJQUFJLEVBQ0osSUFBSSxDQUNMLENBQUM7WUFFRixJQUFJLFNBQVMsRUFBRSxDQUFDO2dCQUNkLFNBQVM7Z0JBQ1QsSUFBSSxJQUFJLENBQUMsT0FBTyxDQUFDLGVBQWUsRUFBRSxDQUFDO29CQUNqQyxNQUFNLElBQUksQ0FBQyxPQUFPLENBQUMsZUFBZSxDQUFDLEtBQUssQ0FBQyxDQUFDO2dCQUM1QyxDQUFDO1lBQ0gsQ0FBQztRQUNILENBQUM7UUFBQyxPQUFPLEtBQUssRUFBRSxDQUFDO1lBQ2YsT0FBTyxDQUFDLEtBQUssQ0FBQyxVQUFVLEVBQUUsS0FBSyxDQUFDLENBQUM7UUFDbkMsQ0FBQztJQUNILENBQUM7SUFFRDs7T0FFRztJQUNILE9BQU87UUFDTCxJQUFJLENBQUMsWUFBWSxDQUFDLE9BQU8sRUFBRSxDQUFDO1FBQzVCLHFDQUFxQztJQUN2QyxDQUFDO0NBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly90YXZlcm5faGVscGVyX3RlbXBsYXRlLy4vc3JjL+WQjOWxguaJi+acui91aS1yZW5kZXJlci50cz8iXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgRXZlbnRNYW5hZ2VyIH0gZnJvbSAnLi9ldmVudC1tYW5hZ2VyJztcbmltcG9ydCB7XG4gIENoYXRFbnRyeSxcbiAgRXZlbnRMb2dFbnRyeSxcbiAgRmlsZU1lc3NhZ2UsXG4gIEdpZnRNZXNzYWdlLFxuICBJbWFnZU1lc3NhZ2UsXG4gIExvY2F0aW9uTWVzc2FnZSxcbiAgTG9nRW50cnksXG4gIFN0aWNrZXJNZXNzYWdlLFxuICBUZXh0TWVzc2FnZSxcbiAgVHJhbnNmZXJNZXNzYWdlLFxuICBWb2ljZU1lc3NhZ2UsXG59IGZyb20gJy4vc2NyaXB0Jztcbi8vIOenu+mZpGxvZGFzaOWvvOWFpe+8jOWboOS4uuaIkeS7rOWPr+S7peebtOaOpeS9v+eUqOWFqOWxgOeahF9cbi8vIGltcG9ydCBfIGZyb20gJ2xvZGFzaCc7XG4vLyBqUXVlcnnlt7LlhajlsYDlj6/nlKjvvIzml6DpnIDlr7zlhaVcblxuLy8g57G75Z6L5a6a5LmJXG5pbnRlcmZhY2UgQXZhdGFycyB7XG4gIHVzZXI6IHN0cmluZztcbiAgY2hhcjogc3RyaW5nO1xufVxuXG5pbnRlcmZhY2UgVUlSZW5kZXJlck9wdGlvbnMge1xuICBnZXREaXNwbGF5TmFtZTogKHR5cGU6ICd1c2VyJyB8ICdjaGFyJykgPT4gc3RyaW5nO1xuICBmaW5kU3RpY2tlclVybEJ5TmFtZTogKG5hbWU6IHN0cmluZykgPT4gc3RyaW5nIHwgdW5kZWZpbmVkO1xuICBvblRyYW5zZmVyQWNjZXB0PzogKGRhdGE6IFRyYW5zZmVyTWVzc2FnZVsnZGF0YSddKSA9PiB2b2lkO1xuICBvbkdpZnRBY3Rpb24/OiAoZGF0YTogR2lmdE1lc3NhZ2VbJ2RhdGEnXSkgPT4gUHJvbWlzZTx2b2lkPjtcbiAgb25SZWNhbGxNZXNzYWdlPzogKGVudHJ5OiBDaGF0RW50cnkpID0+IFByb21pc2U8dm9pZD47XG4gIGlzTWVzc2FnZUluUXVldWU/OiAobWVzc2FnZUlkOiBzdHJpbmcpID0+IGJvb2xlYW47XG59XG5cbi8vIFVJ5riy5p+T5Zmo57G7XG5leHBvcnQgY2xhc3MgVUlSZW5kZXJlciB7XG4gIHByaXZhdGUgd2VjaGF0Qm9keTogSFRNTEVsZW1lbnQ7XG4gIHByaXZhdGUgbGFzdERpc3BsYXllZFRpbWVJbk1pbnV0ZXM6IG51bWJlciA9IC1JbmZpbml0eTtcbiAgcHJpdmF0ZSBvcHRpb25zOiBVSVJlbmRlcmVyT3B0aW9ucztcbiAgcHJpdmF0ZSBhdmF0YXJzOiBBdmF0YXJzO1xuICBwcml2YXRlIGV2ZW50TWFuYWdlcjogRXZlbnRNYW5hZ2VyO1xuXG4gIGNvbnN0cnVjdG9yKHdlY2hhdEJvZHlTZWxlY3Rvcjogc3RyaW5nLCBhdmF0YXJzOiBBdmF0YXJzLCBvcHRpb25zOiBVSVJlbmRlcmVyT3B0aW9ucykge1xuICAgIGNvbnN0ICR3ZWNoYXRCb2R5ID0gJCh3ZWNoYXRCb2R5U2VsZWN0b3IpO1xuICAgIGlmICghJHdlY2hhdEJvZHkubGVuZ3RoKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYEVsZW1lbnQgd2l0aCBzZWxlY3RvciBcIiR7d2VjaGF0Qm9keVNlbGVjdG9yfVwiIG5vdCBmb3VuZGApO1xuICAgIH1cbiAgICB0aGlzLndlY2hhdEJvZHkgPSAkd2VjaGF0Qm9keVswXTtcbiAgICB0aGlzLmF2YXRhcnMgPSBhdmF0YXJzO1xuICAgIHRoaXMub3B0aW9ucyA9IG9wdGlvbnM7XG4gICAgdGhpcy5ldmVudE1hbmFnZXIgPSBuZXcgRXZlbnRNYW5hZ2VyKCk7XG4gIH1cblxuICAvLyDmuIXpmaTogYrlpKnnlYzpnaJcbiAgY2xlYXJDaGF0KCk6IHZvaWQge1xuICAgIHRoaXMud2VjaGF0Qm9keS5pbm5lckhUTUwgPSAnJztcbiAgICB0aGlzLmxhc3REaXNwbGF5ZWRUaW1lSW5NaW51dGVzID0gLUluZmluaXR5O1xuICB9XG5cbiAgLy8g5riy5p+T5Y2V5Liq5p2h55uu5YiwVUlcbiAgcmVuZGVyRW50cnkoZW50cnk6IExvZ0VudHJ5LCBpbmRleD86IG51bWJlciwgYW5pbWF0ZTogYm9vbGVhbiA9IGZhbHNlKTogdm9pZCB7XG4gICAgaWYgKCFlbnRyeSkgcmV0dXJuO1xuXG4gICAgaWYgKCd0eXBlJyBpbiBlbnRyeSkge1xuICAgICAgc3dpdGNoIChlbnRyeS50eXBlKSB7XG4gICAgICAgIGNhc2UgJ21lc3NhZ2UnOlxuICAgICAgICAgIGlmIChlbnRyeS5pc1N5c3RlbU1lc3NhZ2UpIHtcbiAgICAgICAgICAgIHRoaXMucmVuZGVyU3lzdGVtTWVzc2FnZShlbnRyeSBhcyBUZXh0TWVzc2FnZSwgYW5pbWF0ZSwgaW5kZXgpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmFkZE1lc3NhZ2VUb1dlQ2hhdChlbnRyeSwgaW5kZXgsIGFuaW1hdGUpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAndGltZSc6XG4gICAgICAgICAgdGhpcy5hZGRUaW1lc3RhbXBUb1dlQ2hhdChlbnRyeS5jb250ZW50LmRhdGUsIGVudHJ5LmNvbnRlbnQudGltZSwgdHJ1ZSwgaW5kZXgpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICdldmVudCc6XG4gICAgICAgICAgLy8gY29uc29sZS5sb2coJ1tCTE1YXSDmuLLmn5NFVkVOVF9MT0fliLBVSTonLCBlbnRyeS5jb250ZW50LCAnaW5kZXg6JywgaW5kZXgpO1xuICAgICAgICAgIHRoaXMuYWRkRXZlbnRMb2dUb1dlQ2hhdChlbnRyeS5jb250ZW50LCBpbmRleCk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgdGhpcy5hZGRNZXNzYWdlVG9XZUNoYXQoZW50cnksIGluZGV4LCBhbmltYXRlKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvLyDmuLLmn5PmkqTlm57pgJrnn6VcbiAgcmVuZGVyUmVjYWxsTm90aWNlKGVudHJ5OiBMb2dFbnRyeSwgZWxlbWVudFRvUmVwbGFjZTogSFRNTEVsZW1lbnQgfCBudWxsID0gbnVsbCwgaW5kZXg/OiBudW1iZXIpOiB2b2lkIHtcbiAgICBjb25zdCB3aG8gPSB0aGlzLm9wdGlvbnMuZ2V0RGlzcGxheU5hbWUoJ3NlbmRlcicgaW4gZW50cnkgJiYgZW50cnkuc2VuZGVyID09PSAnbWUnID8gJ3VzZXInIDogJ2NoYXInKTtcbiAgICBjb25zdCBub3RpY2VSb3cgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICBub3RpY2VSb3cuY2xhc3NOYW1lID0gJ3RpbWVzdGFtcC1yb3cnO1xuXG4gICAgLy8g56Gu5L+d5re75YqgZGF0YS1sb2ctaW5kZXjlsZ7mgKfvvIzov5nmoLflnKjliKDpmaTmqKHlvI/kuIvlj6/ku6XmmL7npLrliKDpmaTmjInpkq5cbiAgICBpZiAoaW5kZXggIT09IHVuZGVmaW5lZCkge1xuICAgICAgbm90aWNlUm93LmRhdGFzZXQubG9nSW5kZXggPSBpbmRleC50b1N0cmluZygpO1xuICAgIH1cblxuICAgIC8vIOWmguaenOaciWlk77yM5re75YqgbWVzc2FnZS1pZOWxnuaAp1xuICAgIGlmICgnaWQnIGluIGVudHJ5KSB7XG4gICAgICBub3RpY2VSb3cuZGF0YXNldC5tZXNzYWdlSWQgPSBlbnRyeS5pZDtcbiAgICB9XG5cbiAgICBjb25zdCByZWNhbGxlZFRleHQgPVxuICAgICAgdHlwZW9mIGVudHJ5LnJlY2FsbGVkX2NvbnRlbnQgPT09ICdvYmplY3QnICYmIGVudHJ5LnJlY2FsbGVkX2NvbnRlbnQgIT09IG51bGxcbiAgICAgICAgPyBlbnRyeS5yZWNhbGxlZF9jb250ZW50LnRleHRcbiAgICAgICAgOiBlbnRyeS5yZWNhbGxlZF9jb250ZW50O1xuXG4gICAgbm90aWNlUm93LmlubmVySFRNTCA9IGBcbiAgICAgIDxkaXYgY2xhc3M9XCJyZWNhbGwtbm90aWNlLWNvbnRhaW5lclwiPlxuICAgICAgICA8ZGl2IGNsYXNzPVwicmVjYWxsLW5vdGljZS10ZXh0XCI+XCIke3dob31cIiDmkqTlm57kuobkuIDmnaHmtojmga88L2Rpdj5cbiAgICAgICAgPGRpdiBjbGFzcz1cInJlY2FsbC1jb250ZW50XCI+JHtyZWNhbGxlZFRleHQgfHwgKCdjb250ZW50JyBpbiBlbnRyeSA/IGVudHJ5LmNvbnRlbnQgOiAnJyl9PC9kaXY+XG4gICAgICA8L2Rpdj5cbiAgICBgO1xuXG4gICAgY29uc3Qgbm90aWNlVGV4dEVsID0gbm90aWNlUm93LnF1ZXJ5U2VsZWN0b3IoJy5yZWNhbGwtbm90aWNlLXRleHQnKTtcbiAgICBjb25zdCBjb250ZW50RWwgPSBub3RpY2VSb3cucXVlcnlTZWxlY3RvcignLnJlY2FsbC1jb250ZW50Jyk7XG5cbiAgICBpZiAobm90aWNlVGV4dEVsICYmIGNvbnRlbnRFbCkge1xuICAgICAgbm90aWNlVGV4dEVsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICBjb250ZW50RWwuY2xhc3NMaXN0LnRvZ2dsZSgnZXhwYW5kZWQnKTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGlmIChlbGVtZW50VG9SZXBsYWNlKSB7XG4gICAgICBlbGVtZW50VG9SZXBsYWNlLnJlcGxhY2VXaXRoKG5vdGljZVJvdyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMud2VjaGF0Qm9keS5hcHBlbmRDaGlsZChub3RpY2VSb3cpO1xuICAgIH1cblxuICAgIHRoaXMuc2Nyb2xsVG9Cb3R0b20oKTtcbiAgfVxuXG4gIHJlbmRlck1vbWVudHNGZWVkKFxuICAgIGxvZ0VudHJpZXM6IExvZ0VudHJ5W10sXG4gICAgZ2V0RGlzcGxheU5hbWU6ICh0eXBlOiAndXNlcicgfCAnY2hhcicpID0+IHN0cmluZyxcbiAgICBhdmF0YXJzOiB7IHVzZXI6IHN0cmluZzsgY2hhcjogc3RyaW5nIH0sXG4gICk6IHZvaWQge1xuICAgIGNvbnN0IG1vbWVudHNGZWVkTGlzdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtb21lbnRzLWZlZWQtbGlzdCcpIGFzIEhUTUxVTGlzdEVsZW1lbnQ7XG4gICAgaWYgKCFtb21lbnRzRmVlZExpc3QpIHJldHVybjtcblxuICAgIG1vbWVudHNGZWVkTGlzdC5pbm5lckhUTUwgPSAnJztcbiAgICBjb25zdCBwb3N0czogeyBba2V5OiBudW1iZXJdOiBhbnkgfSA9IHt9O1xuICAgIGNvbnN0IG1vbWVudFBvc3RMb2dJbmRpY2VzOiBudW1iZXJbXSA9IFtdO1xuXG4gICAgbG9nRW50cmllcy5mb3JFYWNoKChlbnRyeSwgaW5kZXgpID0+IHtcbiAgICAgIGlmICgna2V5JyBpbiBlbnRyeSAmJiBlbnRyeS5rZXkuaW5jbHVkZXMoJ19NT01FTlQnKSkge1xuICAgICAgICBtb21lbnRQb3N0TG9nSW5kaWNlcy5wdXNoKGluZGV4KTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIG1vbWVudFBvc3RMb2dJbmRpY2VzLmZvckVhY2gobG9nSW5kZXggPT4ge1xuICAgICAgY29uc3QgZW50cnkgPSBsb2dFbnRyaWVzW2xvZ0luZGV4XTtcbiAgICAgIHBvc3RzW2xvZ0luZGV4XSA9IHsgLi4uKGVudHJ5IGFzIGFueSksIGxpa2VzOiBbXSwgY29tbWVudHM6IFtdLCBpZDogbG9nSW5kZXggfTtcbiAgICB9KTtcblxuICAgIGxvZ0VudHJpZXMuZm9yRWFjaCgoZW50cnksIGluZGV4KSA9PiB7XG4gICAgICBpZiAoJ2tleScgaW4gZW50cnkgJiYgKGVudHJ5LmtleS5pbmNsdWRlcygnX0xJS0UnKSB8fCBlbnRyeS5rZXkuaW5jbHVkZXMoJ19DT01NRU5UJykpKSB7XG4gICAgICAgIGNvbnN0IHRhcmdldFBvc3RBYnNvbHV0ZUluZGV4ID0gbW9tZW50UG9zdExvZ0luZGljZXNbcGFyc2VJbnQoKGVudHJ5IGFzIGFueSkuZGF0YS50YXJnZXRfcG9zdF9pZCwgMTApXTtcbiAgICAgICAgY29uc3QgdGFyZ2V0UG9zdCA9IHBvc3RzW3RhcmdldFBvc3RBYnNvbHV0ZUluZGV4XTtcblxuICAgICAgICBpZiAodGFyZ2V0UG9zdCkge1xuICAgICAgICAgIGlmIChlbnRyeS5rZXkuaW5jbHVkZXMoJ19MSUtFJykpIHtcbiAgICAgICAgICAgIGNvbnN0IGxpa2VyTmFtZSA9IGVudHJ5LmtleS5zdGFydHNXaXRoKCdVU0VSJykgPyBnZXREaXNwbGF5TmFtZSgndXNlcicpIDogZ2V0RGlzcGxheU5hbWUoJ2NoYXInKTtcbiAgICAgICAgICAgIGlmICghdGFyZ2V0UG9zdC5saWtlcy5zb21lKChsOiBhbnkpID0+IGwubmFtZSA9PT0gbGlrZXJOYW1lKSkge1xuICAgICAgICAgICAgICB0YXJnZXRQb3N0Lmxpa2VzLnB1c2goeyBrZXk6IGVudHJ5LmtleSwgbmFtZTogbGlrZXJOYW1lLCBvcmlnaW5hbExvZ0luZGV4OiBpbmRleCB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGFyZ2V0UG9zdC5jb21tZW50cy5wdXNoKHsgLi4uKGVudHJ5IGFzIGFueSksIG9yaWdpbmFsTG9nSW5kZXg6IGluZGV4IH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjb25zb2xlLndhcm4oXG4gICAgICAgICAgICBgW0JMTVhdIENvdWxkIG5vdCBmaW5kIHRhcmdldCBwb3N0IGZvciBpbnRlcmFjdGlvbi4gdGFyZ2V0X3Bvc3RfaWQ6ICR7KGVudHJ5IGFzIGFueSkuZGF0YS50YXJnZXRfcG9zdF9pZH1gLFxuICAgICAgICAgICAgZW50cnksXG4gICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pO1xuXG4gICAgT2JqZWN0LnZhbHVlcyhwb3N0cylcbiAgICAgIC5yZXZlcnNlKClcbiAgICAgIC5mb3JFYWNoKHBvc3QgPT4ge1xuICAgICAgICBjb25zdCBmcm9tVXNlciA9IHBvc3Qua2V5LnN0YXJ0c1dpdGgoJ1VTRVInKTtcbiAgICAgICAgY29uc3QgYXV0aG9yTmFtZSA9IGZyb21Vc2VyID8gZ2V0RGlzcGxheU5hbWUoJ3VzZXInKSA6IGdldERpc3BsYXlOYW1lKCdjaGFyJyk7XG4gICAgICAgIGNvbnN0IGF1dGhvckF2YXRhciA9IGZyb21Vc2VyID8gYXZhdGFycy51c2VyIDogYXZhdGFycy5jaGFyO1xuICAgICAgICBjb25zdCBsaSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2xpJyk7XG4gICAgICAgIGxpLmNsYXNzTmFtZSA9ICdtb21lbnQtcG9zdCc7XG4gICAgICAgIGxpLmRhdGFzZXQucG9zdElkID0gcG9zdC5pZDtcbiAgICAgICAgY29uc3QgbW9tZW50U2VxdWVuY2VJZCA9IG1vbWVudFBvc3RMb2dJbmRpY2VzLmluZGV4T2YocG9zdC5pZCk7XG4gICAgICAgIGxpLmRhdGFzZXQubW9tZW50U2VxdWVuY2VJZCA9IFN0cmluZyhtb21lbnRTZXF1ZW5jZUlkKTtcbiAgICAgICAgLy8g6K6+572ubW9tZW50LWlk5bGe5oCn77yM55So5LqO5Yig6Zmk5Yqf6IO9XG4gICAgICAgIGxpLmRhdGFzZXQubW9tZW50SWQgPSBTdHJpbmcobW9tZW50U2VxdWVuY2VJZCk7XG5cbiAgICAgICAgbGV0IG1lZGlhSHRtbCA9ICcnO1xuICAgICAgICBpZiAocG9zdC5kYXRhLmltYWdlX3R5cGUgPT09ICd1cmwnICYmIHBvc3QuZGF0YS5pbWFnZSkge1xuICAgICAgICAgIG1lZGlhSHRtbCA9IGA8aW1nIHNyYz1cIiR7cG9zdC5kYXRhLmltYWdlfVwiIGNsYXNzPVwicG9zdC1tZWRpYS1pbWFnZVwiIC8+YDtcbiAgICAgICAgfSBlbHNlIGlmIChwb3N0LmRhdGEuaW1hZ2VfdHlwZSA9PT0gJ2Rlc2MnICYmIHBvc3QuZGF0YS5pbWFnZSkge1xuICAgICAgICAgIG1lZGlhSHRtbCA9IGA8ZGl2IGNsYXNzPVwiaW1hZ2UtZGVzYy1jb250ZW50XCI+PGRpdiBjbGFzcz1cInRleHQtd3JhcHBlclwiPiR7cG9zdC5kYXRhLmltYWdlfTwvZGl2PjwvZGl2PmA7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgaW50ZXJhY3Rpb25zSHRtbCA9ICcnO1xuICAgICAgICBpZiAocG9zdC5saWtlcy5sZW5ndGggPiAwIHx8IHBvc3QuY29tbWVudHMubGVuZ3RoID4gMCkge1xuICAgICAgICAgIGNvbnN0IGxpa2Vyc0h0bWwgPVxuICAgICAgICAgICAgcG9zdC5saWtlcy5sZW5ndGggPiAwXG4gICAgICAgICAgICAgID8gYDxkaXYgY2xhc3M9XCJsaWtlcy1zZWN0aW9uXCI+PGkgY2xhc3M9XCJmYXMgZmEtaGVhcnRcIj48L2k+ICR7cG9zdC5saWtlc1xuICAgICAgICAgICAgICAgICAgLm1hcCgobDogYW55KSA9PiBgPHNwYW4gY2xhc3M9XCJsaWtlci1uYW1lXCI+JHtsLm5hbWV9PC9zcGFuPmApXG4gICAgICAgICAgICAgICAgICAuam9pbignLCAnKX08L2Rpdj5gXG4gICAgICAgICAgICAgIDogJyc7XG4gICAgICAgICAgY29uc3QgY29tbWVudHNIdG1sID1cbiAgICAgICAgICAgIHBvc3QuY29tbWVudHMubGVuZ3RoID4gMFxuICAgICAgICAgICAgICA/IGA8dWwgY2xhc3M9XCJjb21tZW50cy1zZWN0aW9uXCI+JHtwb3N0LmNvbW1lbnRzXG4gICAgICAgICAgICAgICAgICAubWFwKFxuICAgICAgICAgICAgICAgICAgICAoYzogYW55KSA9PlxuICAgICAgICAgICAgICAgICAgICAgIGA8bGk+PHNwYW4gY2xhc3M9XCJjb21tZW50LWF1dGhvclwiPiR7XG4gICAgICAgICAgICAgICAgICAgICAgICBjLmtleS5zdGFydHNXaXRoKCdVU0VSJykgPyBnZXREaXNwbGF5TmFtZSgndXNlcicpIDogZ2V0RGlzcGxheU5hbWUoJ2NoYXInKVxuICAgICAgICAgICAgICAgICAgICAgIH08L3NwYW4+OiAke2MuZGF0YS50ZXh0fTwvbGk+YCxcbiAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgIC5qb2luKCcnKX08L3VsPmBcbiAgICAgICAgICAgICAgOiAnJztcbiAgICAgICAgICBpbnRlcmFjdGlvbnNIdG1sID0gYDxkaXYgY2xhc3M9XCJwb3N0LWludGVyYWN0aW9uc1wiPiR7bGlrZXJzSHRtbH0ke2NvbW1lbnRzSHRtbH08L2Rpdj5gO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgZGlzcGxheVRpbWUgPSB0aGlzLmZvcm1hdE1vbWVudFRpbWVzdGFtcChwb3N0LmRhdGEuZGF0ZSwgcG9zdC5kYXRhLnRpbWUpO1xuICAgICAgICBjb25zdCBkZWxldGVCdG5IdG1sID0gZnJvbVVzZXIgPyBgPHNwYW4gY2xhc3M9XCJkZWxldGUtbW9tZW50LWJ0blwiIHRpdGxlPVwi5Yig6ZmkXCI+5Yig6ZmkPC9zcGFuPmAgOiAnJztcblxuICAgICAgICBsaS5pbm5lckhUTUwgPSBgPGltZyBzcmM9XCIke2F1dGhvckF2YXRhcn1cIiBjbGFzcz1cInBvc3QtYXV0aG9yLWF2YXRhclwiIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cInBvc3QtZGV0YWlsc1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cInBvc3QtYXV0aG9yLW5hbWVcIj4ke2F1dGhvck5hbWV9PC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzcz1cInBvc3QtY29udGVudFwiPiR7cG9zdC5kYXRhLnRleHQgfHwgJyd9PC9wPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwicG9zdC1tZWRpYVwiPiR7bWVkaWFIdG1sfTwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwicG9zdC1tZXRhXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwicG9zdC1tZXRhLWxlZnRcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cInRpbWVzdGFtcFwiPiR7ZGlzcGxheVRpbWV9PC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICR7ZGVsZXRlQnRuSHRtbH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cInBvc3QtYWN0aW9uc1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwiY29tbWVudC1idXR0b25cIiB0aXRsZT1cIuivhOiuui/ngrnotZ5cIj48aSBjbGFzcz1cImZhcyBmYS1jb21tZW50LWRvdHNcIj48L2k+PC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAke2ludGVyYWN0aW9uc0h0bWx9XG4gICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+YDtcbiAgICAgICAgbW9tZW50c0ZlZWRMaXN0LmFwcGVuZENoaWxkKGxpKTtcbiAgICAgIH0pO1xuICB9XG5cbiAgLy8g5pi+56S6XCLmraPlnKjovpPlhaVcIuaMh+ekuuWZqFxuICBzaG93VHlwaW5nSW5kaWNhdG9yKCk6IHZvaWQge1xuICAgIHRoaXMuaGlkZVR5cGluZ0luZGljYXRvcigpOyAvLyDnoa7kv53lj6rmnInkuIDkuKpcbiAgICBjb25zdCBpbmRpY2F0b3IgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICBpbmRpY2F0b3IuY2xhc3NOYW1lID0gJ3R5cGluZy1pbmRpY2F0b3InO1xuICAgIGluZGljYXRvci5pZCA9ICd0eXBpbmctaW5kaWNhdG9yLWlkJztcbiAgICBjb25zdCBhdmF0YXJTcmMgPSB0aGlzLmF2YXRhcnMuY2hhcjtcblxuICAgIGluZGljYXRvci5pbm5lckhUTUwgPSBgXG4gICAgICA8aW1nIHNyYz1cIiR7YXZhdGFyU3JjfVwiIGNsYXNzPVwibWVzc2FnZS1hdmF0YXJcIiAvPlxuICAgICAgPGRpdiBjbGFzcz1cIm1lc3NhZ2UtYnViYmxlXCI+XG4gICAgICAgIDxzcGFuIGNsYXNzPVwidHlwaW5nLWRvdFwiPjwvc3Bhbj5cbiAgICAgICAgPHNwYW4gY2xhc3M9XCJ0eXBpbmctZG90XCI+PC9zcGFuPlxuICAgICAgICA8c3BhbiBjbGFzcz1cInR5cGluZy1kb3RcIj48L3NwYW4+XG4gICAgICA8L2Rpdj5cbiAgICBgO1xuICAgIHRoaXMud2VjaGF0Qm9keS5hcHBlbmRDaGlsZChpbmRpY2F0b3IpO1xuICAgIHRoaXMuc2Nyb2xsVG9Cb3R0b20oKTtcbiAgfVxuXG4gIC8vIOmakOiXj1wi5q2j5Zyo6L6T5YWlXCLmjIfnpLrlmahcbiAgaGlkZVR5cGluZ0luZGljYXRvcigpOiB2b2lkIHtcbiAgICAkKCcjdHlwaW5nLWluZGljYXRvci1pZCcpLnJlbW92ZSgpO1xuICB9XG5cbiAgLy8g5pi+56S6QUnnlJ/miJDlhoXlrrnnmoTliqDovb3liqjnlLvvvIjlnKjngbXliqjlspvkuIrvvIlcbiAgc2hvd0dlbmVyYXRpbmdJbmRpY2F0b3IoKTogdm9pZCB7XG4gICAgdGhpcy5oaWRlR2VuZXJhdGluZ0luZGljYXRvcigpOyAvLyDnoa7kv53lj6rmnInkuIDkuKpcblxuICAgIC8vIOiOt+WPlueBteWKqOWym+WFg+e0oFxuICAgIGNvbnN0IGR5bmFtaWNJc2xhbmQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZHluYW1pYy1pc2xhbmQnKSBhcyBIVE1MRWxlbWVudDtcbiAgICBpZiAoIWR5bmFtaWNJc2xhbmQpIHJldHVybjtcblxuICAgIC8vIOWIm+W7uuWKoOi9veWKqOeUu+WuueWZqFxuICAgIGNvbnN0IGxvYWRpbmdDb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICBsb2FkaW5nQ29udGFpbmVyLmNsYXNzTmFtZSA9ICdnZW5lcmF0aW5nLWluZGljYXRvcic7XG4gICAgbG9hZGluZ0NvbnRhaW5lci5pZCA9ICdnZW5lcmF0aW5nLWluZGljYXRvci1pZCc7XG5cbiAgICAvLyDliJvlu7rliqDovb3liqjnlLvngrlcbiAgICBsb2FkaW5nQ29udGFpbmVyLmlubmVySFRNTCA9IGBcbiAgICAgIDxzcGFuIGNsYXNzPVwiZ2VuZXJhdGluZy1kb3RcIj48L3NwYW4+XG4gICAgICA8c3BhbiBjbGFzcz1cImdlbmVyYXRpbmctZG90XCI+PC9zcGFuPlxuICAgICAgPHNwYW4gY2xhc3M9XCJnZW5lcmF0aW5nLWRvdFwiPjwvc3Bhbj5cbiAgICBgO1xuXG4gICAgLy8g5re75Yqg5Yiw54G15Yqo5bKbXG4gICAgZHluYW1pY0lzbGFuZC5hcHBlbmRDaGlsZChsb2FkaW5nQ29udGFpbmVyKTtcblxuICAgIC8vIOa3u+WKoOa0u+i3g+exu1xuICAgIGR5bmFtaWNJc2xhbmQuY2xhc3NMaXN0LmFkZCgnZ2VuZXJhdGluZy1hY3RpdmUnKTtcbiAgfVxuXG4gIC8vIOmakOiXj0FJ55Sf5oiQ5YaF5a6555qE5Yqg6L295Yqo55S7XG4gIGhpZGVHZW5lcmF0aW5nSW5kaWNhdG9yKCk6IHZvaWQge1xuICAgICQoJyNnZW5lcmF0aW5nLWluZGljYXRvci1pZCcpLnJlbW92ZSgpO1xuICAgICQoJy5keW5hbWljLWlzbGFuZCcpLnJlbW92ZUNsYXNzKCdnZW5lcmF0aW5nLWFjdGl2ZScpO1xuICB9XG5cbiAgLy8g6K6h566X5omT5a2X5bu26L+f5pe26Ze0XG4gIGNhbGN1bGF0ZVR5cGluZ0RlbGF5KG1lc3NhZ2VDb250ZW50OiBzdHJpbmcgfCBvYmplY3QpOiBudW1iZXIge1xuICAgIC8vIOWvueS6jumdnuaWh+acrOa2iOaBr++8iOWmguihqOaDheOAgeWbvueJh+etie+8ie+8jOS9v+eUqOS4gOS4qui+g+efreeahOWbuuWumuW7tui/n1xuICAgIGlmICh0eXBlb2YgbWVzc2FnZUNvbnRlbnQgIT09ICdzdHJpbmcnIHx8IG1lc3NhZ2VDb250ZW50LnRyaW0oKSA9PT0gJycpIHtcbiAgICAgIHJldHVybiA4MDAgKyBNYXRoLnJhbmRvbSgpICogNzAwOyAvLyAwLjhzIHRvIDEuNXNcbiAgICB9XG5cbiAgICBjb25zdCB0ZXh0TGVuZ3RoID0gbWVzc2FnZUNvbnRlbnQubGVuZ3RoO1xuICAgIGNvbnN0IGJhc2VEZWxheSA9IDUwMDsgLy8g5Z+656GA5bu26L+fIDAuNXNcbiAgICBjb25zdCBwZXJDaGFyRGVsYXkgPSA0MDsgLy8g5q+P5Liq5a2X56ym5aKe5YqgIDQwbXNcbiAgICBjb25zdCByYW5kb21Db21wb25lbnQgPSBNYXRoLnJhbmRvbSgpICogODAwOyAvLyDlop7liqAgMC0wLjhzIOeahOmaj+acuuaAp1xuXG4gICAgY29uc3QgdG90YWxEZWxheSA9IGJhc2VEZWxheSArIHRleHRMZW5ndGggKiBwZXJDaGFyRGVsYXkgKyByYW5kb21Db21wb25lbnQ7XG5cbiAgICAvLyDnoa7kv53mgLvlu7bov5/kuI3otoXov4cz56eSICgzMDAwbXMpXG4gICAgcmV0dXJuIE1hdGgubWluKHRvdGFsRGVsYXksIDMwMDApO1xuICB9XG5cbiAgLy8g5re75Yqg5raI5oGv5Yiw5b6u5L+h55WM6Z2iXG4gIHByaXZhdGUgYWRkTWVzc2FnZVRvV2VDaGF0KGVudHJ5OiBDaGF0RW50cnksIGluZGV4PzogbnVtYmVyLCBpc05ld01lc3NhZ2U6IGJvb2xlYW4gPSBmYWxzZSk6IHZvaWQge1xuICAgIGNvbnN0IHsgaWQsIHNlbmRlciwgdHlwZSB9ID0gZW50cnk7XG4gICAgY29uc3QgbWVzc2FnZVJvdyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIG1lc3NhZ2VSb3cuY2xhc3NOYW1lID0gJ21lc3NhZ2Utcm93JztcbiAgICBpZiAoaW5kZXggIT09IHVuZGVmaW5lZCkgbWVzc2FnZVJvdy5kYXRhc2V0LmxvZ0luZGV4ID0gaW5kZXgudG9TdHJpbmcoKTtcbiAgICBtZXNzYWdlUm93LmRhdGFzZXQubWVzc2FnZUlkID0gaWQ7XG5cbiAgICBjb25zdCBzZW5kZXJDbGFzcyA9IHNlbmRlcjtcbiAgICBtZXNzYWdlUm93LmNsYXNzTGlzdC5hZGQoc2VuZGVyQ2xhc3MpO1xuXG4gICAgY29uc3QgYXZhdGFyU3JjID0gc2VuZGVyID09PSAnbWUnID8gdGhpcy5hdmF0YXJzLnVzZXIgOiB0aGlzLmF2YXRhcnMuY2hhcjtcbiAgICBjb25zdCBhdmF0YXJJbWdIdG1sID0gYDxpbWcgc3JjPVwiJHthdmF0YXJTcmN9XCIgY2xhc3M9XCJtZXNzYWdlLWF2YXRhclwiIC8+YDtcblxuICAgIGlmICh0eXBlID09PSAndm9pY2UnKSB7XG4gICAgICB0aGlzLnJlbmRlclZvaWNlTWVzc2FnZShtZXNzYWdlUm93LCBlbnRyeSBhcyBWb2ljZU1lc3NhZ2UsIGF2YXRhckltZ0h0bWwpO1xuICAgIH0gZWxzZSB7XG4gICAgICBsZXQgYnViYmxlQ29udGVudCA9ICcnO1xuXG4gICAgICBzd2l0Y2ggKHR5cGUpIHtcbiAgICAgICAgY2FzZSAnc3RpY2tlcic6XG4gICAgICAgICAgYnViYmxlQ29udGVudCA9IHRoaXMucmVuZGVyU3RpY2tlckNvbnRlbnQoZW50cnkgYXMgU3RpY2tlck1lc3NhZ2UpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICdpbWFnZSc6XG4gICAgICAgICAgYnViYmxlQ29udGVudCA9IHRoaXMucmVuZGVySW1hZ2VDb250ZW50KGVudHJ5IGFzIEltYWdlTWVzc2FnZSk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgJ2xvY2F0aW9uJzpcbiAgICAgICAgICBidWJibGVDb250ZW50ID0gdGhpcy5yZW5kZXJMb2NhdGlvbkNvbnRlbnQoZW50cnkgYXMgTG9jYXRpb25NZXNzYWdlKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAndHJhbnNmZXInOlxuICAgICAgICAgIGJ1YmJsZUNvbnRlbnQgPSB0aGlzLnJlbmRlclRyYW5zZmVyQ29udGVudChlbnRyeSBhcyBUcmFuc2Zlck1lc3NhZ2UpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICdmaWxlJzpcbiAgICAgICAgICBidWJibGVDb250ZW50ID0gdGhpcy5yZW5kZXJGaWxlQ29udGVudChlbnRyeSBhcyBGaWxlTWVzc2FnZSk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgJ2dpZnQnOlxuICAgICAgICAgIHtcbiAgICAgICAgICAgIC8vIOWIpOaWreaYr+e6ouWMhei/mOaYr+ekvOeJqVxuICAgICAgICAgICAgY29uc3QgZ2lmdEVudHJ5ID0gZW50cnkgYXMgR2lmdE1lc3NhZ2U7XG4gICAgICAgICAgICBjb25zdCBpc1JlZEVudmVsb3BlID1cbiAgICAgICAgICAgICAgZ2lmdEVudHJ5LmRhdGEubmFtZS5pbmNsdWRlcygn57qi5YyFJykgfHxcbiAgICAgICAgICAgICAgZ2lmdEVudHJ5LmRhdGEubmFtZS5pbmNsdWRlcygn5Y6L5bKB6ZKxJykgfHxcbiAgICAgICAgICAgICAgZ2lmdEVudHJ5LmRhdGEubmFtZS5pbmNsdWRlcygn57qi5YipJyk7XG5cbiAgICAgICAgICAgIGlmIChpc1JlZEVudmVsb3BlKSB7XG4gICAgICAgICAgICAgIGJ1YmJsZUNvbnRlbnQgPSB0aGlzLnJlbmRlclJlZEVudmVsb3BlQ29udGVudChnaWZ0RW50cnkpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgYnViYmxlQ29udGVudCA9IHRoaXMucmVuZGVyR2lmdENvbnRlbnQoZ2lmdEVudHJ5KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgYnViYmxlQ29udGVudCA9IChlbnRyeSBhcyBUZXh0TWVzc2FnZSkuY29udGVudC5yZXBsYWNlKC88L2csICcmbHQ7JykucmVwbGFjZSgvPi9nLCAnJmd0OycpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgfVxuXG4gICAgICAvLyDmoLnmja7mtojmga/nsbvlnovmt7vliqDnibnmrornmoTmsJTms6HnsbtcbiAgICAgIGxldCBidWJibGVDbGFzcyA9ICdtZXNzYWdlLWJ1YmJsZSc7XG4gICAgICBpZiAodHlwZSA9PT0gJ3N0aWNrZXInKSB7XG4gICAgICAgIGJ1YmJsZUNsYXNzICs9ICcgc3RpY2tlci1idWJibGUnO1xuICAgICAgfSBlbHNlIGlmICh0eXBlID09PSAnaW1hZ2UnKSB7XG4gICAgICAgIGJ1YmJsZUNsYXNzICs9ICcgaW1hZ2UtZGVzYy1idWJibGUnO1xuICAgICAgfSBlbHNlIGlmICh0eXBlID09PSAnbG9jYXRpb24nKSB7XG4gICAgICAgIGJ1YmJsZUNsYXNzICs9ICcgbG9jYXRpb24tYnViYmxlJztcbiAgICAgIH0gZWxzZSBpZiAodHlwZSA9PT0gJ3RyYW5zZmVyJykge1xuICAgICAgICBidWJibGVDbGFzcyArPSAnIHRyYW5zZmVyLWJ1YmJsZSc7XG4gICAgICB9IGVsc2UgaWYgKHR5cGUgPT09ICdmaWxlJykge1xuICAgICAgICBidWJibGVDbGFzcyArPSAnIGZpbGUtYnViYmxlJztcbiAgICAgIH0gZWxzZSBpZiAodHlwZSA9PT0gJ2dpZnQnKSB7XG4gICAgICAgIGJ1YmJsZUNsYXNzICs9ICcgZ2lmdC1idWJibGUnO1xuICAgICAgfVxuXG4gICAgICBtZXNzYWdlUm93LmlubmVySFRNTCA9XG4gICAgICAgIHNlbmRlciA9PT0gJ21lJ1xuICAgICAgICAgID8gYDxkaXYgY2xhc3M9XCIke2J1YmJsZUNsYXNzfVwiPiR7YnViYmxlQ29udGVudH08L2Rpdj4ke2F2YXRhckltZ0h0bWx9YFxuICAgICAgICAgIDogYCR7YXZhdGFySW1nSHRtbH08ZGl2IGNsYXNzPVwiJHtidWJibGVDbGFzc31cIj4ke2J1YmJsZUNvbnRlbnR9PC9kaXY+YDtcblxuICAgICAgY29uc3QgYnViYmxlID0gbWVzc2FnZVJvdy5xdWVyeVNlbGVjdG9yKCcubWVzc2FnZS1idWJibGUnKTtcbiAgICAgIGlmIChidWJibGUpIHtcbiAgICAgICAgdGhpcy5hcHBseUJ1YmJsZVN0eWxlcyhidWJibGUsIHR5cGUsIGVudHJ5KTtcbiAgICAgICAgdGhpcy5zZXR1cEJ1YmJsZUludGVyYWN0aW9ucyhidWJibGUsIHR5cGUsIGVudHJ5KTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoaXNOZXdNZXNzYWdlKSB7XG4gICAgICBtZXNzYWdlUm93LmNsYXNzTGlzdC5hZGQoJ25ldy1tZXNzYWdlJyk7XG4gICAgfVxuXG4gICAgLy8g5Li6VVNFUuaWh+Wtl+a2iOaBr+a3u+WKoOmVv+aMieaSpOWbnuWKn+iDvVxuICAgIGlmIChzZW5kZXIgPT09ICdtZScgJiYgZW50cnkudHlwZSA9PT0gJ21lc3NhZ2UnKSB7XG4gICAgICB0aGlzLnNldHVwVXNlck1lc3NhZ2VMb25nUHJlc3MobWVzc2FnZVJvdywgZW50cnkpO1xuICAgIH1cblxuICAgIHRoaXMud2VjaGF0Qm9keS5hcHBlbmRDaGlsZChtZXNzYWdlUm93KTtcbiAgICB0aGlzLnNjcm9sbFRvQm90dG9tKCk7XG4gIH1cblxuICAvLyDmuLLmn5Por63pn7Pmtojmga9cbiAgcHJpdmF0ZSByZW5kZXJWb2ljZU1lc3NhZ2UobWVzc2FnZVJvdzogSFRNTEVsZW1lbnQsIGVudHJ5OiBWb2ljZU1lc3NhZ2UsIGF2YXRhckltZ0h0bWw6IHN0cmluZyk6IHZvaWQge1xuICAgIGNvbnN0IGNvbnRlbnRDb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICBjb250ZW50Q29udGFpbmVyLmNsYXNzTmFtZSA9ICdtZXNzYWdlLWNvbnRlbnQtY29udGFpbmVyJztcblxuICAgIGNvbnN0IGJ1YmJsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIGJ1YmJsZS5jbGFzc05hbWUgPSAnbWVzc2FnZS1idWJibGUgdm9pY2UtYnViYmxlJztcbiAgICBidWJibGUuaW5uZXJIVE1MID0gYDxzcGFuIGNsYXNzPVwiZHVyYXRpb25cIj4ke2VudHJ5LmNvbnRlbnQuZHVyYXRpb259XCI8L3NwYW4+PGkgY2xhc3M9XCJmYXMgZmEtd2lmaSB2b2ljZS1pY29uXCI+PC9pPmA7XG5cbiAgICBjb25zdCB0ZXh0UmV2ZWFsQm94ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgdGV4dFJldmVhbEJveC5jbGFzc05hbWUgPSAndm9pY2UtdGV4dC1jb250ZW50JztcbiAgICB0ZXh0UmV2ZWFsQm94LnRleHRDb250ZW50ID0gZW50cnkuY29udGVudC50ZXh0O1xuXG4gICAgY29udGVudENvbnRhaW5lci5hcHBlbmRDaGlsZChidWJibGUpO1xuICAgIGNvbnRlbnRDb250YWluZXIuYXBwZW5kQ2hpbGQodGV4dFJldmVhbEJveCk7XG5cbiAgICBpZiAoZW50cnkuc2VuZGVyID09PSAnbWUnKSB7XG4gICAgICBtZXNzYWdlUm93LmFwcGVuZENoaWxkKGNvbnRlbnRDb250YWluZXIpO1xuICAgICAgbWVzc2FnZVJvdy5pbnNlcnRBZGphY2VudEhUTUwoJ2JlZm9yZWVuZCcsIGF2YXRhckltZ0h0bWwpO1xuICAgIH0gZWxzZSB7XG4gICAgICBtZXNzYWdlUm93Lmluc2VydEFkamFjZW50SFRNTCgnYWZ0ZXJiZWdpbicsIGF2YXRhckltZ0h0bWwpO1xuICAgICAgbWVzc2FnZVJvdy5hcHBlbmRDaGlsZChjb250ZW50Q29udGFpbmVyKTtcbiAgICB9XG5cbiAgICBsZXQgbG9uZ1ByZXNzRmlyZWQgPSBmYWxzZTtcbiAgICBjb25zdCB0aW1lckR1cmF0aW9uID0gNTAwO1xuICAgIGxldCBwcmVzc1RpbWVyOiBudW1iZXI7XG5cbiAgICBidWJibGUuYWRkRXZlbnRMaXN0ZW5lcigncG9pbnRlcmRvd24nLCBlID0+IHtcbiAgICAgIGlmIChlLnBvaW50ZXJUeXBlID09PSAnbW91c2UnICYmIChlIGFzIFBvaW50ZXJFdmVudCkuYnV0dG9uICE9PSAwKSByZXR1cm47XG4gICAgICBsb25nUHJlc3NGaXJlZCA9IGZhbHNlO1xuICAgICAgcHJlc3NUaW1lciA9IHdpbmRvdy5zZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgbWVzc2FnZVJvdy5jbGFzc0xpc3QuYWRkKCd2b2ljZS10ZXh0LXZpc2libGUnKTtcbiAgICAgICAgbG9uZ1ByZXNzRmlyZWQgPSB0cnVlO1xuICAgICAgfSwgdGltZXJEdXJhdGlvbik7XG4gICAgfSk7XG5cbiAgICBidWJibGUuYWRkRXZlbnRMaXN0ZW5lcigncG9pbnRlcnVwJywgKCkgPT4ge1xuICAgICAgY2xlYXJUaW1lb3V0KHByZXNzVGltZXIpO1xuICAgICAgaWYgKCFsb25nUHJlc3NGaXJlZCkge1xuICAgICAgICBpZiAobWVzc2FnZVJvdy5jbGFzc0xpc3QuY29udGFpbnMoJ3ZvaWNlLXRleHQtdmlzaWJsZScpKSB7XG4gICAgICAgICAgbWVzc2FnZVJvdy5jbGFzc0xpc3QucmVtb3ZlKCd2b2ljZS10ZXh0LXZpc2libGUnKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pO1xuXG4gICAgYnViYmxlLmFkZEV2ZW50TGlzdGVuZXIoJ3BvaW50ZXJsZWF2ZScsICgpID0+IGNsZWFyVGltZW91dChwcmVzc1RpbWVyKSk7XG4gICAgYnViYmxlLmFkZEV2ZW50TGlzdGVuZXIoJ2NvbnRleHRtZW51JywgZSA9PiBlLnByZXZlbnREZWZhdWx0KCkpO1xuICB9XG5cbiAgLy8g5riy5p+T6KGo5oOF5YyF5YaF5a65XG4gIHByaXZhdGUgcmVuZGVyU3RpY2tlckNvbnRlbnQoZW50cnk6IFN0aWNrZXJNZXNzYWdlKTogc3RyaW5nIHtcbiAgICBjb25zdCBzdGlja2VyVXJsID0gdGhpcy5vcHRpb25zLmZpbmRTdGlja2VyVXJsQnlOYW1lKGVudHJ5LmNvbnRlbnQpO1xuICAgIGlmIChzdGlja2VyVXJsKSB7XG4gICAgICAvLyDkvb/nlKjnuq9IVE1M5Yib5bu66KGo5oOF5YyF5a655Zmo5ZKM5Zu+54mHXG4gICAgICByZXR1cm4gYDxkaXYgY2xhc3M9XCJzdGlja2VyLWNvbnRhaW5lclwiPjxpbWcgc3JjPVwiJHtzdGlja2VyVXJsfVwiIGNsYXNzPVwic3RpY2tlci1pbWdcIiAvPjwvZGl2PmA7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBgPGRpdiBjbGFzcz1cInN0aWNrZXItcGxhY2Vob2xkZXJcIj5b6KGo5oOFXTwvZGl2PmA7XG4gICAgfVxuICB9XG5cbiAgLy8g5riy5p+T5Zu+54mH5YaF5a65XG4gIHByaXZhdGUgcmVuZGVySW1hZ2VDb250ZW50KGVudHJ5OiBJbWFnZU1lc3NhZ2UpOiBzdHJpbmcge1xuICAgIGlmIChlbnRyeS5jb250ZW50LnR5cGUgPT09ICd1cmwnKSB7XG4gICAgICBsZXQgaW1hZ2VVcmwgPSBlbnRyeS5jb250ZW50LnZhbHVlO1xuICAgICAgaWYgKGltYWdlVXJsLnN0YXJ0c1dpdGgoJ2JsbXgtaW1nLScpKSB7XG4gICAgICAgIGNvbnN0IHN0b3JlZEltYWdlID0gc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbShpbWFnZVVybCk7XG4gICAgICAgIGlmIChzdG9yZWRJbWFnZSkge1xuICAgICAgICAgIGltYWdlVXJsID0gc3RvcmVkSW1hZ2U7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmV0dXJuIGA8ZGl2IGNsYXNzPVwiaW1hZ2UtZGVzYy1jb250ZW50XCI+PGRpdiBjbGFzcz1cInRleHQtd3JhcHBlclwiPlvlm77niYflt7Lov4fmnJ9dPC9kaXY+PC9kaXY+YDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIGA8aW1nIHNyYz1cIiR7aW1hZ2VVcmx9XCIgY2xhc3M9XCJjaGF0LWltYWdlXCIgLz5gO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCBkZXNjVGV4dCA9IGVudHJ5LmNvbnRlbnQudmFsdWU7XG4gICAgICByZXR1cm4gYDxkaXYgY2xhc3M9XCJpbWFnZS1kZXNjLWNvbnRlbnRcIj48ZGl2IGNsYXNzPVwidGV4dC13cmFwcGVyXCI+JHtTdHJpbmcoZGVzY1RleHQpXG4gICAgICAgIC5yZXBsYWNlKC88L2csICcmbHQ7JylcbiAgICAgICAgLnJlcGxhY2UoLz4vZywgJyZndDsnKX08L2Rpdj48L2Rpdj5gO1xuICAgIH1cbiAgfVxuXG4gIC8vIOa4suafk+S9jee9ruWGheWuuVxuICBwcml2YXRlIHJlbmRlckxvY2F0aW9uQ29udGVudChlbnRyeTogTG9jYXRpb25NZXNzYWdlKTogc3RyaW5nIHtcbiAgICByZXR1cm4gYDxkaXYgY2xhc3M9XCJsb2NhdGlvbi1jYXJkXCI+XG4gICAgICA8ZGl2IGNsYXNzPVwibG9jYXRpb24tY29udGVudFwiPlxuICAgICAgICA8ZGl2IGNsYXNzPVwibG9jYXRpb24tdGl0bGVcIj4ke2VudHJ5LmNvbnRlbnR9PC9kaXY+XG4gICAgICAgIDxkaXYgY2xhc3M9XCJsb2NhdGlvbi1zdWJ0aXRsZVwiPuWFseS6q+WunuaXtuS9jee9rjwvZGl2PlxuICAgICAgPC9kaXY+XG4gICAgICA8ZGl2IGNsYXNzPVwibG9jYXRpb24tbWFwLXBsYWNlaG9sZGVyXCI+PC9kaXY+XG4gICAgPC9kaXY+YDtcbiAgfVxuXG4gIC8vIOa4suafk+i9rOi0puWGheWuuVxuICBwcml2YXRlIHJlbmRlclRyYW5zZmVyQ29udGVudChlbnRyeTogVHJhbnNmZXJNZXNzYWdlKTogc3RyaW5nIHtcbiAgICBjb25zdCBpc1JlY2VpcHQgPSBlbnRyeS5kYXRhLnN0YXR1cyAhPT0gJ3NlbnQnO1xuICAgIGNvbnN0IGRldGFpbHNIdG1sID0gaXNSZWNlaXB0XG4gICAgICA/IGA8ZGl2IGNsYXNzPVwic3RhdHVzLXRleHRcIj4ke2VudHJ5LmRhdGEuc3RhdHVzID09PSAnYWNjZXB0ZWQnID8gJ+W3suaOpeaUticgOiAn5bey6YCA6L+YJ308L2Rpdj5gXG4gICAgICA6IGA8ZGl2IGNsYXNzPVwibm90ZVwiPiR7ZW50cnkuZGF0YS5ub3RlIHx8ICcgJ308L2Rpdj5gO1xuICAgIGNvbnN0IGNhcmRDbGFzcyA9IGlzUmVjZWlwdCA/ICd0cmFuc2Zlci1yZWNlaXB0JyA6ICd0cmFuc2Zlci1pbml0aWFsJztcblxuICAgIHJldHVybiBgPGRpdiBjbGFzcz1cInRyYW5zZmVyLWNhcmQgJHtjYXJkQ2xhc3N9XCI+XG4gICAgICA8ZGl2IGNsYXNzPVwidHJhbnNmZXItY29udGVudFwiPlxuICAgICAgICA8aW1nIHNyYz1cImh0dHBzOi8vZ2l0Z3VkLmlvL2xvbG9kZXN1L2xvbG9iYWJ5dHV0b3JpYWwvLS9yYXcvbWFzdGVyL2xvbG9nYW1lLyVFNyVCNCVBMCVFNiU5RCU5MC9hcnJvd3MucG5nXCIgY2xhc3M9XCJ0cmFuc2Zlci1pY29uLWltYWdlXCI+XG4gICAgICAgIDxkaXYgY2xhc3M9XCJ0cmFuc2Zlci1kZXRhaWxzXCI+XG4gICAgICAgICAgPGRpdiBjbGFzcz1cImFtb3VudFwiPsKlJHtlbnRyeS5kYXRhLmFtb3VudH08L2Rpdj5cbiAgICAgICAgICAke2RldGFpbHNIdG1sfVxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvZGl2PlxuICAgICAgPGRpdiBjbGFzcz1cInRyYW5zZmVyLWZvb3RlclwiPui9rOi0pjwvZGl2PlxuICAgIDwvZGl2PmA7XG4gIH1cblxuICAvLyDmuLLmn5Pmlofku7blhoXlrrlcbiAgcHJpdmF0ZSByZW5kZXJGaWxlQ29udGVudChlbnRyeTogRmlsZU1lc3NhZ2UpOiBzdHJpbmcge1xuICAgIHJldHVybiBgPGRpdiBjbGFzcz1cImZpbGUtY2FyZFwiPlxuICAgICAgPGRpdiBjbGFzcz1cImZpbGUtY29udGVudFwiPlxuICAgICAgICA8aSBjbGFzcz1cImZhcyBmYS1maWxlLWFsdCBmaWxlLWljb25cIj48L2k+XG4gICAgICAgIDxkaXYgY2xhc3M9XCJmaWxlLWRldGFpbHNcIj5cbiAgICAgICAgICA8ZGl2IGNsYXNzPVwiZmlsZS1uYW1lXCI+JHtlbnRyeS5jb250ZW50LnJlcGxhY2UoLzwvZywgJyZsdDsnKS5yZXBsYWNlKC8+L2csICcmZ3Q7Jyl9PC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9kaXY+XG4gICAgICA8ZGl2IGNsYXNzPVwiZmlsZS1mb290ZXJcIj7mlofku7Y8L2Rpdj5cbiAgICA8L2Rpdj5gO1xuICB9XG5cbiAgLy8g5riy5p+T56S854mp5YaF5a65XG4gIHByaXZhdGUgcmVuZGVyR2lmdENvbnRlbnQoZW50cnk6IEdpZnRNZXNzYWdlKTogc3RyaW5nIHtcbiAgICBsZXQgZGV0YWlsc0NsYXNzID0gJyc7XG4gICAgbGV0IGRldGFpbHNDb250ZW50ID0gJyc7XG4gICAgY29uc3QgaXNSZWNlaXB0ID0gZW50cnkuZGF0YS5zdGF0dXMgIT09ICdzZW50JztcbiAgICBjb25zdCBjYXJkQ2xhc3MgPSBpc1JlY2VpcHQgPyAnZ2lmdC1yZWNlaXB0JyA6ICdnaWZ0LWluaXRpYWwnO1xuXG4gICAgaWYgKGVudHJ5LmRhdGEuc3RhdHVzID09PSAnc2VudCcpIHtcbiAgICAgIGlmIChlbnRyeS5kYXRhLnByaWNlKSB7XG4gICAgICAgIGRldGFpbHNDbGFzcyA9ICdnaWZ0LXByaWNlJztcbiAgICAgICAgZGV0YWlsc0NvbnRlbnQgPSBgwqUgJHtlbnRyeS5kYXRhLnByaWNlfWA7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGRldGFpbHNDbGFzcyA9ICdnaWZ0LXN0YXR1cy10ZXh0JztcbiAgICAgIGRldGFpbHNDb250ZW50ID0gZW50cnkuZGF0YS5zdGF0dXMgPT09ICdhY2NlcHRlZCcgPyAn5bey5pS25LiLJyA6ICflt7Lmi5LmlLYnO1xuICAgIH1cblxuICAgIHJldHVybiBgPGRpdiBjbGFzcz1cImdpZnQtY2FyZCAke2NhcmRDbGFzc31cIj5cbiAgICAgIDxkaXYgY2xhc3M9XCJnaWZ0LWNvbnRlbnRcIj5cbiAgICAgICAgPHNwYW4gY2xhc3M9XCJnaWZ0LWljb24tZW1vamlcIj7wn46BPC9zcGFuPlxuICAgICAgICA8ZGl2IGNsYXNzPVwiZ2lmdC1kZXRhaWxzXCI+XG4gICAgICAgICAgPGRpdiBjbGFzcz1cImdpZnQtbmFtZVwiPiR7ZW50cnkuZGF0YS5uYW1lfTwvZGl2PlxuICAgICAgICAgICR7ZGV0YWlsc0NvbnRlbnQgPyBgPGRpdiBjbGFzcz1cIiR7ZGV0YWlsc0NsYXNzfVwiPiR7ZGV0YWlsc0NvbnRlbnR9PC9kaXY+YCA6ICcnfVxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvZGl2PlxuICAgICAgPGRpdiBjbGFzcz1cImdpZnQtZm9vdGVyXCI+56S854mpPC9kaXY+XG4gICAgPC9kaXY+YDtcbiAgfVxuXG4gIC8vIOa4suafk+e6ouWMheWGheWuuVxuICBwcml2YXRlIHJlbmRlclJlZEVudmVsb3BlQ29udGVudChlbnRyeTogR2lmdE1lc3NhZ2UpOiBzdHJpbmcge1xuICAgIGxldCBkZXRhaWxzQ2xhc3MgPSAnJztcbiAgICBsZXQgZGV0YWlsc0NvbnRlbnQgPSAnJztcbiAgICBjb25zdCBpc1JlY2VpcHQgPSBlbnRyeS5kYXRhLnN0YXR1cyAhPT0gJ3NlbnQnO1xuICAgIGNvbnN0IGNhcmRDbGFzcyA9IGlzUmVjZWlwdCA/ICdnaWZ0LXJlY2VpcHQnIDogJ2dpZnQtaW5pdGlhbCc7XG5cbiAgICBpZiAoZW50cnkuZGF0YS5zdGF0dXMgPT09ICdzZW50Jykge1xuICAgICAgaWYgKGVudHJ5LmRhdGEucHJpY2UpIHtcbiAgICAgICAgZGV0YWlsc0NsYXNzID0gJ2dpZnQtcHJpY2UnO1xuICAgICAgICBkZXRhaWxzQ29udGVudCA9IGDCpSAke2VudHJ5LmRhdGEucHJpY2V9YDtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgZGV0YWlsc0NsYXNzID0gJ2dpZnQtc3RhdHVzLXRleHQnO1xuICAgICAgZGV0YWlsc0NvbnRlbnQgPSBlbnRyeS5kYXRhLnN0YXR1cyA9PT0gJ2FjY2VwdGVkJyA/ICflt7Lpooblj5YnIDogJ+W3suaLkuaUtic7XG4gICAgfVxuXG4gICAgcmV0dXJuIGA8ZGl2IGNsYXNzPVwiZ2lmdC1jYXJkICR7Y2FyZENsYXNzfVwiPlxuICAgICAgPGRpdiBjbGFzcz1cImdpZnQtY29udGVudFwiPlxuICAgICAgICA8aW1nIHNyYz1cImh0dHBzOi8vZ2l0Z3VkLmlvL2xvbG9kZXN1L2xvbG9iYWJ5dHV0b3JpYWwvLS9yYXcvbWFzdGVyL2xvbG9nYW1lLyVFNyVCNCVBMCVFNiU5RCU5MC9yZWQtZW52ZWxvcGUucG5nXCIgY2xhc3M9XCJnaWZ0LWljb24taW1hZ2VcIj5cbiAgICAgICAgPGRpdiBjbGFzcz1cImdpZnQtZGV0YWlsc1wiPlxuICAgICAgICAgIDxkaXYgY2xhc3M9XCJnaWZ0LW5hbWVcIj4ke2VudHJ5LmRhdGEubmFtZX08L2Rpdj5cbiAgICAgICAgICAke2RldGFpbHNDb250ZW50ID8gYDxkaXYgY2xhc3M9XCIke2RldGFpbHNDbGFzc31cIj4ke2RldGFpbHNDb250ZW50fTwvZGl2PmAgOiAnJ31cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L2Rpdj5cbiAgICAgIDxkaXYgY2xhc3M9XCJnaWZ0LWZvb3RlclwiPue6ouWMhTwvZGl2PlxuICAgIDwvZGl2PmA7XG4gIH1cblxuICAvLyDlupTnlKjmsJTms6HmoLflvI9cbiAgcHJpdmF0ZSBhcHBseUJ1YmJsZVN0eWxlcyhidWJibGU6IEVsZW1lbnQsIHR5cGU6IHN0cmluZywgZW50cnk6IENoYXRFbnRyeSk6IHZvaWQge1xuICAgIGlmICh0eXBlID09PSAnaW1hZ2UnKSB7XG4gICAgICBpZiAoKGVudHJ5IGFzIEltYWdlTWVzc2FnZSkuY29udGVudC50eXBlID09PSAndXJsJykge1xuICAgICAgICBidWJibGUuY2xhc3NMaXN0LmFkZCgnaW1hZ2UtdXJsLWJ1YmJsZScpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgYnViYmxlLmNsYXNzTGlzdC5hZGQoJ2ltYWdlLWRlc2MtYnViYmxlJyk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IGJ1YmJsZVR5cGVNYXA6IFJlY29yZDxzdHJpbmcsIHN0cmluZz4gPSB7XG4gICAgICAgIHN0aWNrZXI6ICdzdGlja2VyLWJ1YmJsZScsXG4gICAgICAgIGxvY2F0aW9uOiAnbG9jYXRpb24tYnViYmxlJyxcbiAgICAgICAgdHJhbnNmZXI6ICd0cmFuc2Zlci1idWJibGUnLFxuICAgICAgICBmaWxlOiAnZmlsZS1idWJibGUnLFxuICAgICAgICBnaWZ0OiAnZ2lmdC1idWJibGUnLFxuICAgICAgfTtcblxuICAgICAgaWYgKGJ1YmJsZVR5cGVNYXBbdHlwZV0pIHtcbiAgICAgICAgYnViYmxlLmNsYXNzTGlzdC5hZGQoYnViYmxlVHlwZU1hcFt0eXBlXSk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLy8g6K6+572u5rCU5rOh5Lqk5LqSXG4gIHByaXZhdGUgc2V0dXBCdWJibGVJbnRlcmFjdGlvbnMoYnViYmxlOiBFbGVtZW50LCB0eXBlOiBzdHJpbmcsIGVudHJ5OiBDaGF0RW50cnkpOiB2b2lkIHtcbiAgICBpZiAodHlwZSA9PT0gJ3RyYW5zZmVyJykge1xuICAgICAgY29uc3QgdHJhbnNmZXJDYXJkID0gYnViYmxlLnF1ZXJ5U2VsZWN0b3IoJy50cmFuc2Zlci1jYXJkJyk7XG4gICAgICBpZiAoIXRyYW5zZmVyQ2FyZCkgcmV0dXJuO1xuXG4gICAgICBjb25zdCB0cmFuc2ZlckVudHJ5ID0gZW50cnkgYXMgVHJhbnNmZXJNZXNzYWdlO1xuICAgICAgY29uc3QgaXNSZWNlaXB0ID0gdHJhbnNmZXJFbnRyeS5kYXRhLnN0YXR1cyAhPT0gJ3NlbnQnO1xuXG4gICAgICBpZiAoIWlzUmVjZWlwdCAmJiBlbnRyeS5zZW5kZXIgPT09ICd0aGVtJykge1xuICAgICAgICB0cmFuc2ZlckNhcmQuY2xhc3NMaXN0LmFkZCgndGhlbScpO1xuICAgICAgICB0cmFuc2ZlckNhcmQuYWRkRXZlbnRMaXN0ZW5lcihcbiAgICAgICAgICAnY2xpY2snLFxuICAgICAgICAgICgpID0+IHtcbiAgICAgICAgICAgIC8vIOebtOaOpeaOpeaUtui9rOi0pu+8jOWboOS4uui9rOi0puWKn+iDveacrOi6q+W3sue7j+acieiHquWumuS5ieWvueivneahhlxuICAgICAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5vblRyYW5zZmVyQWNjZXB0KSB7XG4gICAgICAgICAgICAgIHRoaXMub3B0aW9ucy5vblRyYW5zZmVyQWNjZXB0KHtcbiAgICAgICAgICAgICAgICAuLi50cmFuc2ZlckVudHJ5LmRhdGEsXG4gICAgICAgICAgICAgICAgc3RhdHVzOiAnYWNjZXB0ZWQnIGFzICdhY2NlcHRlZCcgfCAncmVqZWN0ZWQnLFxuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9LFxuICAgICAgICAgIHsgb25jZTogdHJ1ZSB9LFxuICAgICAgICApO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmICh0eXBlID09PSAnZ2lmdCcpIHtcbiAgICAgIGNvbnN0IGdpZnRCdWJibGUgPSBidWJibGUgYXMgSFRNTEVsZW1lbnQ7XG4gICAgICBjb25zdCBnaWZ0Q2FyZCA9IGJ1YmJsZS5xdWVyeVNlbGVjdG9yKCcuZ2lmdC1jYXJkJyk7XG4gICAgICBjb25zdCBnaWZ0RW50cnkgPSBlbnRyeSBhcyBHaWZ0TWVzc2FnZTtcbiAgICAgIGNvbnN0IGlzUmVjZWlwdCA9IGdpZnRFbnRyeS5kYXRhLnN0YXR1cyAhPT0gJ3NlbnQnO1xuXG4gICAgICBpZiAoaXNSZWNlaXB0KSB7XG4gICAgICAgIC8vIOW3sue7j+aOpeaUtuaIluaLkuaUtueahOekvOeJqe+8jOS4jemcgOimgea3u+WKoOeCueWHu+S6i+S7tlxuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIC8vIOS4uuaJgOacieacquWkhOeQhueahOekvOeJqea3u+WKoOeCueWHu+S6i+S7tu+8jOaXoOiuuuaYr+eUqOaIt+i/mOaYr0FJ5Y+R6YCB55qEXG4gICAgICBpZiAoZ2lmdENhcmQpIGdpZnRDYXJkLmNsYXNzTGlzdC5hZGQoZW50cnkuc2VuZGVyID09PSAndGhlbScgPyAndGhlbScgOiAnbWUnKTtcbiAgICAgIGdpZnRCdWJibGUuY2xhc3NMaXN0LmFkZCgnZ2lmdC1jbGlja2FibGUnKTtcbiAgICAgIGdpZnRCdWJibGUuYWRkRXZlbnRMaXN0ZW5lcihcbiAgICAgICAgJ2NsaWNrJyxcbiAgICAgICAgYXN5bmMgKCkgPT4ge1xuICAgICAgICAgIGlmICh0aGlzLm9wdGlvbnMub25HaWZ0QWN0aW9uKSB7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLm9wdGlvbnMub25HaWZ0QWN0aW9uKGdpZnRFbnRyeS5kYXRhKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBnaWZ0QnViYmxlLmNsYXNzTGlzdC5yZW1vdmUoJ2dpZnQtY2xpY2thYmxlJyk7XG4gICAgICAgIH0sXG4gICAgICAgIHsgb25jZTogdHJ1ZSB9LFxuICAgICAgKTtcbiAgICB9XG4gIH1cblxuICAvLyDmt7vliqDml7bpl7TmiLPliLDlvq7kv6HnlYzpnaJcbiAgcHJpdmF0ZSBhZGRUaW1lc3RhbXBUb1dlQ2hhdChkYXRlOiBzdHJpbmcsIHRpbWU6IHN0cmluZywgaXNTeXN0ZW1UaW1lOiBib29sZWFuLCBpbmRleD86IG51bWJlcik6IHZvaWQge1xuICAgIGNvbnN0IHRpbWVUZXh0ID0gdGhpcy5mb3JtYXRNb21lbnRUaW1lc3RhbXAoZGF0ZSwgdGltZSk7XG5cbiAgICAvLyDmo4Dmn6XmmK/lkKbpnIDopoHmmL7npLrml7bpl7TmiLNcbiAgICAvLyDlpoLmnpzmmK/ns7vnu5/ml7bpl7TvvIjogIzkuI3mmK/nlKjmiLfmiYvliqjmj5LlhaXnmoTml7bpl7TvvIlcbiAgICBpZiAoaXNTeXN0ZW1UaW1lKSB7XG4gICAgICAvLyDlj6rmnInnuq/ml7bpl7TvvIjku4rlpKnnmoTmtojmga/vvInmiY3pnIDopoHov5vooYwxMOWIhumSn+i/h+a7pFxuICAgICAgY29uc3QgaXNPbmx5VGltZSA9IHRpbWVUZXh0ID09PSB0aW1lO1xuXG4gICAgICBpZiAoaXNPbmx5VGltZSkge1xuICAgICAgICAvLyDlr7nkuo7ku4rlpKnnmoTmtojmga/vvIzmo4Dmn6XmmK/lkKbkuI7kuIrkuIDmnaHml7bpl7TmiLPlpKrmjqXov5FcbiAgICAgICAgY29uc3QgdGltZUluTWludXRlcyA9IHRoaXMucGFyc2VUaW1lVG9NaW51dGVzKHRpbWVUZXh0KTtcbiAgICAgICAgaWYgKHRpbWVJbk1pbnV0ZXMgIT09IG51bGwgJiYgdGltZUluTWludXRlcyAtIHRoaXMubGFzdERpc3BsYXllZFRpbWVJbk1pbnV0ZXMgPCAxMCkge1xuICAgICAgICAgIHJldHVybjsgLy8g6Lez6L+H5pi+56S66L+Z5Liq5pe26Ze05oizXG4gICAgICAgIH1cblxuICAgICAgICAvLyDmm7TmlrDmnIDlkI7mmL7npLrnmoTml7bpl7RcbiAgICAgICAgaWYgKHRpbWVJbk1pbnV0ZXMgIT09IG51bGwpIHtcbiAgICAgICAgICB0aGlzLmxhc3REaXNwbGF5ZWRUaW1lSW5NaW51dGVzID0gdGltZUluTWludXRlcztcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8g5a+55LqO5pio5aSp5oiW5pu05pep55qE5raI5oGv77yM5oC75piv5pi+56S65bm26YeN572u5pe26Ze06K6h5pWw5ZmoXG4gICAgICAgIHRoaXMubGFzdERpc3BsYXllZFRpbWVJbk1pbnV0ZXMgPSAtSW5maW5pdHk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8g5Yib5bu65bm25re75Yqg5pe26Ze05oiz5YWD57SgXG4gICAgY29uc3QgdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIHQuY2xhc3NOYW1lID0gJ3RpbWVzdGFtcC1yb3cnO1xuICAgIGlmIChpbmRleCAhPT0gdW5kZWZpbmVkKSB0LmRhdGFzZXQubG9nSW5kZXggPSBpbmRleC50b1N0cmluZygpO1xuXG4gICAgLy8g5a2Y5YKo5Y6f5aeL5pel5pyf5ZKM5pe26Ze055So5LqO5Yi35pawXG4gICAgdC5kYXRhc2V0Lm9yaWdpbmFsRGF0ZSA9IGRhdGU7XG4gICAgdC5kYXRhc2V0Lm9yaWdpbmFsVGltZSA9IHRpbWU7XG5cbiAgICB0LmlubmVySFRNTCA9IGA8c3BhbiBjbGFzcz1cInRpbWVzdGFtcC10ZXh0XCI+JHt0aW1lVGV4dH08L3NwYW4+YDtcbiAgICB0aGlzLndlY2hhdEJvZHkuYXBwZW5kQ2hpbGQodCk7XG5cbiAgICB0aGlzLnNjcm9sbFRvQm90dG9tKCk7XG4gIH1cblxuICAvLyDmt7vliqDkuovku7bml6Xlv5fliLDlvq7kv6HnlYzpnaJcbiAgcHJpdmF0ZSBhZGRFdmVudExvZ1RvV2VDaGF0KGV2ZW50RGF0YTogRXZlbnRMb2dFbnRyeVsnY29udGVudCddLCBpbmRleD86IG51bWJlcik6IHZvaWQge1xuICAgIC8vIGNvbnNvbGUubG9nKCdbQkxNWF0gYWRkRXZlbnRMb2dUb1dlQ2hhdOiiq+iwg+eUqDonLCBldmVudERhdGEsICdpbmRleDonLCBpbmRleCk7XG5cbiAgICAvLyDnoa7kv51ldmVudERhdGHlhbfmnInlv4XopoHnmoTlrZfmrrVcbiAgICBpZiAoIWV2ZW50RGF0YSB8fCAhZXZlbnREYXRhLmRhdGUgfHwgIWV2ZW50RGF0YS50aW1lKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdbQkxNWF0g5LqL5Lu25pel5b+X5pWw5o2u5LiN5a6M5pW0OicsIGV2ZW50RGF0YSk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8g6I635Y+W5qC85byP5YyW5ZCO55qE5pe26Ze05paH5pys77yM5YyF5ZCr5pel5pyf5L+h5oGvXG4gICAgY29uc3QgdGltZVRleHQgPSB0aGlzLmZvcm1hdE1vbWVudFRpbWVzdGFtcChldmVudERhdGEuZGF0ZSwgZXZlbnREYXRhLnRpbWUpO1xuXG4gICAgLy8g5Yib5bu65LqL5Lu25pel5b+X6KGMXG4gICAgY29uc3Qgcm93ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgcm93LmNsYXNzTmFtZSA9ICdldmVudC1sb2ctcm93JztcbiAgICBpZiAoaW5kZXggIT09IHVuZGVmaW5lZCkgcm93LmRhdGFzZXQubG9nSW5kZXggPSBpbmRleC50b1N0cmluZygpO1xuXG4gICAgLy8g5a2Y5YKo5Y6f5aeL5pel5pyf5ZKM5pe26Ze055So5LqO5Yi35pawXG4gICAgcm93LmRhdGFzZXQub3JpZ2luYWxEYXRlID0gZXZlbnREYXRhLmRhdGU7XG4gICAgcm93LmRhdGFzZXQub3JpZ2luYWxUaW1lID0gZXZlbnREYXRhLnRpbWU7XG5cbiAgICAvLyDlpoLmnpzmsqHmnInmj4/ov7DvvIzlj6rmmL7npLrml7bpl7TvvJvlpoLmnpzmnInmj4/ov7DvvIzmmL7npLrml7bpl7Tlkozmj4/ov7BcbiAgICBpZiAoZXZlbnREYXRhLmRlc2NyaXB0aW9uKSB7XG4gICAgICByb3cuaW5uZXJIVE1MID0gYFxuICAgICAgICA8ZGl2IGNsYXNzPVwiZXZlbnQtbG9nLWNvbnRhaW5lclwiPlxuICAgICAgICAgIDxkaXYgY2xhc3M9XCJldmVudC10aW1lLXRleHQgaGFzLWRlc2MgY2xpY2thYmxlXCI+JHt0aW1lVGV4dH08L2Rpdj5cbiAgICAgICAgICA8ZGl2IGNsYXNzPVwiZXZlbnQtZGVzY3JpcHRpb25cIj4ke2V2ZW50RGF0YS5kZXNjcmlwdGlvbn08L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgICBgO1xuICAgIH0gZWxzZSB7XG4gICAgICByb3cuaW5uZXJIVE1MID0gYFxuICAgICAgICA8ZGl2IGNsYXNzPVwiZXZlbnQtbG9nLWNvbnRhaW5lclwiPlxuICAgICAgICAgIDxkaXYgY2xhc3M9XCJldmVudC10aW1lLXRleHRcIj4ke3RpbWVUZXh0fTwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICAgIGA7XG4gICAgfVxuXG4gICAgLy8g5Li65bim5pyJ5o+P6L+w55qE5LqL5Lu25re75Yqg54K55Ye75bGV5byA5Yqf6IO9XG4gICAgaWYgKGV2ZW50RGF0YS5kZXNjcmlwdGlvbikge1xuICAgICAgY29uc3QgdGltZUVsID0gcm93LnF1ZXJ5U2VsZWN0b3IoJy5ldmVudC10aW1lLXRleHQnKTtcbiAgICAgIGNvbnN0IGRlc2NFbCA9IHJvdy5xdWVyeVNlbGVjdG9yKCcuZXZlbnQtZGVzY3JpcHRpb24nKTtcblxuICAgICAgaWYgKHRpbWVFbCAmJiBkZXNjRWwpIHtcbiAgICAgICAgdGltZUVsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICAgIC8vIOeugOWNleWIh+aNouaYvuekui/pmpDol4/nirbmgIHvvIzkuI3kvb/nlKjliqjnlLtcbiAgICAgICAgICBjb25zdCBpc0V4cGFuZGVkID0gZGVzY0VsLmNsYXNzTGlzdC50b2dnbGUoJ2V4cGFuZGVkJyk7XG4gICAgICAgICAgY29uc3QgZGVzY0h0bWxFbCA9IGRlc2NFbCBhcyBIVE1MRWxlbWVudDtcblxuICAgICAgICAgIGlmIChpc0V4cGFuZGVkKSB7XG4gICAgICAgICAgICAvLyDmmL7npLrmj4/ov7BcbiAgICAgICAgICAgIGRlc2NIdG1sRWwuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vIOebtOaOpemakOiXj++8jOS4jeS9v+eUqOWKqOeUu1xuICAgICAgICAgICAgZGVzY0h0bWxFbC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8g5re75Yqg5Yiw6IGK5aSp55WM6Z2i5bm25rua5Yqo5Yiw5bqV6YOoXG4gICAgdGhpcy53ZWNoYXRCb2R5LmFwcGVuZENoaWxkKHJvdyk7XG4gICAgdGhpcy5zY3JvbGxUb0JvdHRvbSgpO1xuICB9XG5cbiAgLy8g5riy5p+T57O757uf5raI5oGvXG4gIHByaXZhdGUgcmVuZGVyU3lzdGVtTWVzc2FnZShlbnRyeTogVGV4dE1lc3NhZ2UsIGFuaW1hdGU6IGJvb2xlYW4gPSBmYWxzZSwgaW5kZXg/OiBudW1iZXIpOiB2b2lkIHtcbiAgICBjb25zdCBjaGF0Q29udGFpbmVyID0gdGhpcy53ZWNoYXRCb2R5O1xuICAgIGlmICghY2hhdENvbnRhaW5lcikgcmV0dXJuO1xuXG4gICAgY29uc3Qgc3lzdGVtUm93ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgc3lzdGVtUm93LmNsYXNzTmFtZSA9ICdldmVudC1sb2ctcm93JztcbiAgICBpZiAoYW5pbWF0ZSkgc3lzdGVtUm93LmNsYXNzTGlzdC5hZGQoJ25ldy1tZXNzYWdlJyk7XG4gICAgaWYgKGVudHJ5LmlkKSB7XG4gICAgICBzeXN0ZW1Sb3cuZGF0YXNldC5tZXNzYWdlSWQgPSBlbnRyeS5pZDtcbiAgICB9XG4gICAgaWYgKGluZGV4ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIHN5c3RlbVJvdy5kYXRhc2V0LmxvZ0luZGV4ID0gaW5kZXgudG9TdHJpbmcoKTtcbiAgICB9XG5cbiAgICBjb25zdCBzeXN0ZW1Db250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICBzeXN0ZW1Db250YWluZXIuY2xhc3NOYW1lID0gJ2V2ZW50LWxvZy1jb250YWluZXInO1xuXG4gICAgY29uc3Qgc3lzdGVtVGV4dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIHN5c3RlbVRleHQuY2xhc3NOYW1lID0gJ2V2ZW50LXRpbWUtdGV4dCBzeXN0ZW0tbWVzc2FnZSc7XG4gICAgc3lzdGVtVGV4dC50ZXh0Q29udGVudCA9IGVudHJ5LmNvbnRlbnQ7XG5cbiAgICBzeXN0ZW1Db250YWluZXIuYXBwZW5kQ2hpbGQoc3lzdGVtVGV4dCk7XG4gICAgc3lzdGVtUm93LmFwcGVuZENoaWxkKHN5c3RlbUNvbnRhaW5lcik7XG4gICAgY2hhdENvbnRhaW5lci5hcHBlbmRDaGlsZChzeXN0ZW1Sb3cpO1xuXG4gICAgdGhpcy5zY3JvbGxUb0JvdHRvbSgpO1xuICB9XG5cbiAgLy8g6Kej5p6Q5pe26Ze05Li65YiG6ZKf5pWwXG4gIHByaXZhdGUgcGFyc2VUaW1lVG9NaW51dGVzKHRpbWVTdHJpbmc6IHN0cmluZyk6IG51bWJlciB8IG51bGwge1xuICAgIGNvbnN0IG1hdGNoID0gdGltZVN0cmluZy5tYXRjaCgvKFxcZHsxLDJ9KTooXFxkezJ9KS8pO1xuICAgIHJldHVybiBtYXRjaCA/IDYwICogcGFyc2VJbnQobWF0Y2hbMV0sIDEwKSArIHBhcnNlSW50KG1hdGNoWzJdLCAxMCkgOiBudWxsO1xuICB9XG5cbiAgLy8g5qC85byP5YyW5pe26Ze05oizXG4gIHByaXZhdGUgZm9ybWF0TW9tZW50VGltZXN0YW1wKGRhdGVTdHJpbmc6IHN0cmluZywgdGltZVN0cmluZzogc3RyaW5nKTogc3RyaW5nIHtcbiAgICBpZiAoIWRhdGVTdHJpbmcgfHwgIXRpbWVTdHJpbmcpIHJldHVybiAnICc7XG5cbiAgICB0cnkge1xuICAgICAgLy8g6Kej5p6Q5pel5pyf5ZKM5b2T5YmN5pel5pyfXG4gICAgICBjb25zdCBwb3N0RGF0ZSA9IG5ldyBEYXRlKGRhdGVTdHJpbmcpO1xuICAgICAgLy8g56Gu5L+d5oiR5Lus5L2/55So5ri45oiP5pe26Ze06ICM6Z2e546w5a6e5pe26Ze0XG4gICAgICBjb25zdCBjdXJyZW50RGF0ZSA9IHdpbmRvdy5jdXJyZW50R2FtZURhdGUgPyBuZXcgRGF0ZSh3aW5kb3cuY3VycmVudEdhbWVEYXRlKSA6IG5ldyBEYXRlKCk7XG5cbiAgICAgIC8vIOaPkOWPluW5tOaciOaXpVxuICAgICAgY29uc3QgcG9zdFllYXIgPSBwb3N0RGF0ZS5nZXRGdWxsWWVhcigpO1xuICAgICAgY29uc3QgcG9zdE1vbnRoID0gcG9zdERhdGUuZ2V0TW9udGgoKTtcbiAgICAgIGNvbnN0IHBvc3REYXkgPSBwb3N0RGF0ZS5nZXREYXRlKCk7XG5cbiAgICAgIGNvbnN0IG5vd1llYXIgPSBjdXJyZW50RGF0ZS5nZXRGdWxsWWVhcigpO1xuICAgICAgY29uc3Qgbm93TW9udGggPSBjdXJyZW50RGF0ZS5nZXRNb250aCgpO1xuICAgICAgY29uc3Qgbm93RGF5ID0gY3VycmVudERhdGUuZ2V0RGF0ZSgpO1xuXG4gICAgICAvLyDliKTmlq3mmK/lkKbmmK/ku4rlpKnnmoTmtojmga9cbiAgICAgIGlmIChwb3N0WWVhciA9PT0gbm93WWVhciAmJiBwb3N0TW9udGggPT09IG5vd01vbnRoICYmIHBvc3REYXkgPT09IG5vd0RheSkge1xuICAgICAgICByZXR1cm4gdGltZVN0cmluZztcbiAgICAgIH1cblxuICAgICAgLy8g5Yib5bu65pio5aSp55qE5pel5pyf5a+56LGhXG4gICAgICBjb25zdCB5ZXN0ZXJkYXkgPSBuZXcgRGF0ZShjdXJyZW50RGF0ZSk7XG4gICAgICB5ZXN0ZXJkYXkuc2V0RGF0ZShjdXJyZW50RGF0ZS5nZXREYXRlKCkgLSAxKTtcbiAgICAgIGNvbnN0IHllc3RlcmRheVllYXIgPSB5ZXN0ZXJkYXkuZ2V0RnVsbFllYXIoKTtcbiAgICAgIGNvbnN0IHllc3RlcmRheU1vbnRoID0geWVzdGVyZGF5LmdldE1vbnRoKCk7XG4gICAgICBjb25zdCB5ZXN0ZXJkYXlEYXkgPSB5ZXN0ZXJkYXkuZ2V0RGF0ZSgpO1xuXG4gICAgICAvLyDliKTmlq3mmK/lkKbmmK/mmKjlpKnnmoTmtojmga9cbiAgICAgIGlmIChwb3N0WWVhciA9PT0geWVzdGVyZGF5WWVhciAmJiBwb3N0TW9udGggPT09IHllc3RlcmRheU1vbnRoICYmIHBvc3REYXkgPT09IHllc3RlcmRheURheSkge1xuICAgICAgICByZXR1cm4gYOaYqOWkqSAke3RpbWVTdHJpbmd9YDtcbiAgICAgIH1cblxuICAgICAgLy8g5Yik5pat5piv5ZCm5piv5LuK5bm055qE5raI5oGvXG4gICAgICBpZiAocG9zdFllYXIgPT09IG5vd1llYXIpIHtcbiAgICAgICAgcmV0dXJuIGAke3Bvc3RNb250aCArIDF95pyIJHtwb3N0RGF5feaXpSAke3RpbWVTdHJpbmd9YDtcbiAgICAgIH1cblxuICAgICAgLy8g5YW25LuW5oOF5Ya15pi+56S65a6M5pW05pel5pyfXG4gICAgICByZXR1cm4gYCR7cG9zdFllYXJ95bm0JHtwb3N0TW9udGggKyAxfeaciCR7cG9zdERheX3ml6UgJHt0aW1lU3RyaW5nfWA7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGZvcm1hdHRpbmcgdGltZXN0YW1wOicsIGVycm9yKTtcbiAgICAgIHJldHVybiB0aW1lU3RyaW5nOyAvLyDlh7rplJnml7boh7PlsJHov5Tlm57ml7bpl7RcbiAgICB9XG4gIH1cblxuICAvLyDliLfmlrDmiYDmnInml7bpl7TmiLPmmL7npLpcbiAgcHVibGljIHJlZnJlc2hBbGxUaW1lc3RhbXBzKCk6IHZvaWQge1xuICAgIC8vIOWIt+aWsOaJgOacieaXtumXtOaIs1xuICAgIGNvbnN0IHRpbWVzdGFtcFJvd3MgPSAkKCcudGltZXN0YW1wLXJvdycsIHRoaXMud2VjaGF0Qm9keSk7XG4gICAgY29uc3QgZXZlbnRMb2dSb3dzID0gJCgnLmV2ZW50LWxvZy1yb3cnLCB0aGlzLndlY2hhdEJvZHkpO1xuXG4gICAgLy8g5Yi35paw5pe26Ze05oiz6KGMXG4gICAgdGltZXN0YW1wUm93cy5lYWNoKChfLCByb3cpID0+IHtcbiAgICAgIGNvbnN0ICRyb3cgPSAkKHJvdyk7XG4gICAgICBjb25zdCAkdGltZXN0YW1wVGV4dCA9ICRyb3cuZmluZCgnLnRpbWVzdGFtcC10ZXh0Jyk7XG4gICAgICBpZiAoJHRpbWVzdGFtcFRleHQubGVuZ3RoKSB7XG4gICAgICAgIGNvbnN0IG9yaWdpbmFsRGF0ZSA9ICRyb3cuZGF0YSgnb3JpZ2luYWxEYXRlJyk7XG4gICAgICAgIGNvbnN0IG9yaWdpbmFsVGltZSA9ICRyb3cuZGF0YSgnb3JpZ2luYWxUaW1lJyk7XG4gICAgICAgIGlmIChvcmlnaW5hbERhdGUgJiYgb3JpZ2luYWxUaW1lKSB7XG4gICAgICAgICAgJHRpbWVzdGFtcFRleHQudGV4dCh0aGlzLmZvcm1hdE1vbWVudFRpbWVzdGFtcChvcmlnaW5hbERhdGUsIG9yaWdpbmFsVGltZSkpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICAvLyDliLfmlrDkuovku7bml6Xlv5fooYxcbiAgICBldmVudExvZ1Jvd3MuZWFjaCgoXywgcm93KSA9PiB7XG4gICAgICBjb25zdCAkcm93ID0gJChyb3cpO1xuICAgICAgY29uc3QgJGV2ZW50VGltZVRleHQgPSAkcm93LmZpbmQoJy5ldmVudC10aW1lLXRleHQnKTtcbiAgICAgIGlmICgkZXZlbnRUaW1lVGV4dC5sZW5ndGgpIHtcbiAgICAgICAgY29uc3Qgb3JpZ2luYWxEYXRlID0gJHJvdy5kYXRhKCdvcmlnaW5hbERhdGUnKTtcbiAgICAgICAgY29uc3Qgb3JpZ2luYWxUaW1lID0gJHJvdy5kYXRhKCdvcmlnaW5hbFRpbWUnKTtcbiAgICAgICAgaWYgKG9yaWdpbmFsRGF0ZSAmJiBvcmlnaW5hbFRpbWUpIHtcbiAgICAgICAgICAvLyDmm7TmlrDmlofmnKzlhoXlrrlcbiAgICAgICAgICAkZXZlbnRUaW1lVGV4dC50ZXh0KHRoaXMuZm9ybWF0TW9tZW50VGltZXN0YW1wKG9yaWdpbmFsRGF0ZSwgb3JpZ2luYWxUaW1lKSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIHJlbmRlckZlYXR1cmVHcmlkKFxuICAgIGdyaWRFbGVtZW50OiBIVE1MRWxlbWVudCxcbiAgICBmZWF0dXJlczogYW55W10sXG4gICAgY2FsbGJhY2tzOiB7XG4gICAgICBvblRvZ2dsZURlbGV0ZU1vZGU6ICgpID0+IHZvaWQ7XG4gICAgICBvbkFkZFN0aWNrZXJzOiAoKSA9PiB2b2lkO1xuICAgIH0sXG4gICk6IHZvaWQge1xuICAgIGlmICghZ3JpZEVsZW1lbnQpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ1tCTE1YXSBHcmlkIGVsZW1lbnQgbm90IGZvdW5kIGZvciByZW5kZXJGZWF0dXJlR3JpZCcpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGdyaWRFbGVtZW50LmlubmVySFRNTCA9ICcnO1xuICAgIGNvbnN0IGlzRGVsZXRlTW9kZSA9IGdyaWRFbGVtZW50LmNsYXNzTGlzdC5jb250YWlucygnc3RpY2tlci1kZWxldGUtbW9kZScpO1xuXG4gICAgZmVhdHVyZXMuZm9yRWFjaChmZWF0dXJlID0+IHtcbiAgICAgIGNvbnN0IGl0ZW0gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgIGl0ZW0uY2xhc3NOYW1lID0gJ2ZlYXR1cmUtaXRlbSc7XG5cbiAgICAgIGxldCBpY29uSHRtbCA9ICcnO1xuICAgICAgaWYgKGZlYXR1cmUuaXNBZGRCdG4pIHtcbiAgICAgICAgLy8g5aaC5p6c5piv6KGo5oOF566h55CG5oyJ6ZKu77yM5L2/55So6b2/6L2u5Zu+5qCHXG4gICAgICAgIGlmIChmZWF0dXJlLmxhYmVsID09PSAn6KGo5oOF566h55CGJykge1xuICAgICAgICAgIGljb25IdG1sID0gYDxkaXYgY2xhc3M9XCJmZWF0dXJlLWljb25cIj48aSBjbGFzcz1cImZhcyBmYS1jb2dcIj48L2k+PC9kaXY+YDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBpY29uSHRtbCA9IGA8ZGl2IGNsYXNzPVwiZmVhdHVyZS1pY29uXCI+PGkgY2xhc3M9XCJmYXMgZmEtJHtcbiAgICAgICAgICAgIGZlYXR1cmUubGFiZWwgPT09ICfmt7vliqAnID8gJ3BsdXMnIDogJ3RyYXNoLWFsdCdcbiAgICAgICAgICB9XCI+PC9pPjwvZGl2PmA7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAoZmVhdHVyZS5pY29uICYmIGZlYXR1cmUuaWNvbi5zdGFydHNXaXRoKCdodHRwJykpIHtcbiAgICAgICAgLy8g5aSE55CG5Zu+54mHVVJMICjooajmg4XljIUpXG4gICAgICAgIGljb25IdG1sID0gYDxkaXYgY2xhc3M9XCJmZWF0dXJlLWljb25cIj48aW1nIHNyYz1cIiR7ZmVhdHVyZS5pY29ufVwiIGFsdD1cIiR7ZmVhdHVyZS5sYWJlbH1cIiBjbGFzcz1cImZlYXR1cmUtaWNvbi1pbWdcIj48L2Rpdj5gO1xuICAgICAgfSBlbHNlIGlmIChcbiAgICAgICAgZmVhdHVyZS5pY29uICYmXG4gICAgICAgIChmZWF0dXJlLmljb24uc3RhcnRzV2l0aCgnZmFzICcpIHx8IGZlYXR1cmUuaWNvbi5zdGFydHNXaXRoKCdmYXIgJykgfHwgZmVhdHVyZS5pY29uLnN0YXJ0c1dpdGgoJ2ZhYiAnKSlcbiAgICAgICkge1xuICAgICAgICAvLyDlpITnkIbluKbnqbrmoLznmoRGb250IEF3ZXNvbWXlm77moIdcbiAgICAgICAgaWNvbkh0bWwgPSBgPGRpdiBjbGFzcz1cImZlYXR1cmUtaWNvblwiPjxpIGNsYXNzPVwiJHtmZWF0dXJlLmljb259IHRoZW1lLWljb25cIj48L2k+PC9kaXY+YDtcbiAgICAgIH0gZWxzZSBpZiAoZmVhdHVyZS5pY29uICYmIGZlYXR1cmUuaWNvbi5zdGFydHNXaXRoKCdmYScpKSB7XG4gICAgICAgIC8vIOWkhOeQhuS4jeW4puepuuagvOeahEZvbnQgQXdlc29tZeWbvuagh1xuICAgICAgICBpY29uSHRtbCA9IGA8ZGl2IGNsYXNzPVwiZmVhdHVyZS1pY29uXCI+PGkgY2xhc3M9XCIke2ZlYXR1cmUuaWNvbn0gdGhlbWUtaWNvblwiPjwvaT48L2Rpdj5gO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8g5aSE55CG5YW25LuW5Zu+5qCH57G75Z6LXG4gICAgICAgIGljb25IdG1sID0gYDxkaXYgY2xhc3M9XCJmZWF0dXJlLWljb25cIj48aSBjbGFzcz1cIiR7ZmVhdHVyZS5pY29uIHx8ICdmYXMgZmEtcXVlc3Rpb24nfVwiPjwvaT48L2Rpdj5gO1xuICAgICAgfVxuXG4gICAgICBpdGVtLmlubmVySFRNTCA9IGAke2ljb25IdG1sfTxzcGFuIGNsYXNzPVwiZmVhdHVyZS1sYWJlbFwiPiR7ZmVhdHVyZS5sYWJlbH08L3NwYW4+YDtcblxuICAgICAgY29uc3QgaWNvbkNvbnRhaW5lciA9IGl0ZW0ucXVlcnlTZWxlY3RvcignLmZlYXR1cmUtaWNvbicpO1xuICAgICAgaWYgKGlzRGVsZXRlTW9kZSAmJiAhZmVhdHVyZS5pc0FkZEJ0biAmJiAhZmVhdHVyZS5pc0RlZmF1bHQpIHtcbiAgICAgICAgLy8g5Yib5bu66ZqQ6JeP55qE5Y6f55SfY2hlY2tib3hcbiAgICAgICAgY29uc3QgY2hlY2tib3ggPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbnB1dCcpO1xuICAgICAgICBjaGVja2JveC50eXBlID0gJ2NoZWNrYm94JztcbiAgICAgICAgY2hlY2tib3guY2xhc3NOYW1lID0gJ3N0aWNrZXItY2hlY2tib3gnO1xuICAgICAgICBjaGVja2JveC5kYXRhc2V0LnN0aWNrZXJMYWJlbCA9IGZlYXR1cmUubGFiZWw7XG4gICAgICAgIGl0ZW0uYXBwZW5kQ2hpbGQoY2hlY2tib3gpO1xuXG4gICAgICAgIC8vIOWIm+W7uuWPr+ingeeahGNoZWNrYm945oyJ6ZKuXG4gICAgICAgIGNvbnN0IGNoZWNrYm94QnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgIGNoZWNrYm94QnV0dG9uLmNsYXNzTmFtZSA9ICdzdGlja2VyLWNoZWNrYm94LWJ1dHRvbic7XG4gICAgICAgIGNoZWNrYm94QnV0dG9uLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xuICAgICAgICBpdGVtLmFwcGVuZENoaWxkKGNoZWNrYm94QnV0dG9uKTtcblxuICAgICAgICAvLyDmm7TmlrBjaGVja2JveOaMiemSrueKtuaAgVxuICAgICAgICBjb25zdCB1cGRhdGVDaGVja2JveFN0YXRlID0gKGNoZWNrZWQ6IGJvb2xlYW4pID0+IHtcbiAgICAgICAgICBpZiAoY2hlY2tlZCkge1xuICAgICAgICAgICAgY2hlY2tib3hCdXR0b24uY2xhc3NMaXN0LmFkZCgnY2hlY2tlZCcpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjaGVja2JveEJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKCdjaGVja2VkJyk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGljb25Db250YWluZXI/LmNsYXNzTGlzdC50b2dnbGUoJ3NlbGVjdGVkLWZvci1kZWxldGUnLCBjaGVja2VkKTtcbiAgICAgICAgfTtcblxuICAgICAgICAvLyDngrnlh7vkuovku7ZcbiAgICAgICAgY29uc3QgaGFuZGxlQ2xpY2sgPSAoZTogRXZlbnQpID0+IHtcbiAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgICBjaGVja2JveC5jaGVja2VkID0gIWNoZWNrYm94LmNoZWNrZWQ7XG4gICAgICAgICAgdXBkYXRlQ2hlY2tib3hTdGF0ZShjaGVja2JveC5jaGVja2VkKTtcbiAgICAgICAgfTtcblxuICAgICAgICBpdGVtLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgaGFuZGxlQ2xpY2spO1xuICAgICAgICBjaGVja2JveEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGhhbmRsZUNsaWNrKTtcblxuICAgICAgICAvLyDorr7nva7liJ3lp4vnirbmgIFcbiAgICAgICAgdXBkYXRlQ2hlY2tib3hTdGF0ZShjaGVja2JveC5jaGVja2VkKTtcbiAgICAgIH0gZWxzZSBpZiAoZmVhdHVyZS5sYWJlbCA9PT0gJ+a3u+WKoCcpIHtcbiAgICAgICAgaXRlbS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGNhbGxiYWNrcy5vbkFkZFN0aWNrZXJzKTtcbiAgICAgIH0gZWxzZSBpZiAoZmVhdHVyZS5sYWJlbCA9PT0gJ+WIoOmZpCcgfHwgZmVhdHVyZS5sYWJlbCA9PT0gJ+ihqOaDheeuoeeQhicpIHtcbiAgICAgICAgaXRlbS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGNhbGxiYWNrcy5vblRvZ2dsZURlbGV0ZU1vZGUpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaXRlbS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZlYXR1cmUuYWN0aW9uKTtcbiAgICAgIH1cblxuICAgICAgZ3JpZEVsZW1lbnQuYXBwZW5kQ2hpbGQoaXRlbSk7XG4gICAgfSk7XG4gIH1cblxuICAvLyDmu5rliqjliLDlupXpg6hcbiAgcHJpdmF0ZSBzY3JvbGxUb0JvdHRvbSgpOiB2b2lkIHtcbiAgICAvLyDnm7TmjqXorr7nva5zY3JvbGxUb3DvvIzpgb/lhY1qUXVlcnnliqjnlLvlj6/og73lr7zoh7TnmoTmu5rliqjplIHlrprpl67pophcbiAgICB0aGlzLndlY2hhdEJvZHkuc2Nyb2xsVG9wID0gdGhpcy53ZWNoYXRCb2R5LnNjcm9sbEhlaWdodDtcblxuICAgIC8vIOa3u+WKoOS4gOS4quW7tui/n+aJp+ihjOeahOWkh+S7vea7muWKqO+8jOehruS/neWcqERPTeWujOWFqOa4suafk+WQjua7muWKqOeUn+aViFxuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgdGhpcy53ZWNoYXRCb2R5LnNjcm9sbFRvcCA9IHRoaXMud2VjaGF0Qm9keS5zY3JvbGxIZWlnaHQ7XG4gICAgfSwgMTAwKTtcbiAgfVxuXG4gIC8vIOS4ulVTRVLmtojmga/orr7nva7plb/mjInmkqTlm57lip/og70gLSDnp7vliqjnq6/kvJjljJbniYjmnKxcbiAgcHJpdmF0ZSBzZXR1cFVzZXJNZXNzYWdlTG9uZ1ByZXNzKG1lc3NhZ2VSb3c6IEhUTUxFbGVtZW50LCBlbnRyeTogQ2hhdEVudHJ5KTogdm9pZCB7XG4gICAgY29uc3QgJG1lc3NhZ2VSb3cgPSAkKG1lc3NhZ2VSb3cpO1xuICAgIGNvbnN0ICRtZXNzYWdlQnViYmxlID0gJG1lc3NhZ2VSb3cuZmluZCgnLm1lc3NhZ2UtYnViYmxlJyk7XG4gICAgY29uc3QgJHRhcmdldEVsZW1lbnQgPSAkbWVzc2FnZUJ1YmJsZS5sZW5ndGggPyAkbWVzc2FnZUJ1YmJsZSA6ICRtZXNzYWdlUm93O1xuXG4gICAgbGV0IGxvbmdQcmVzc1RpbWVyOiBudW1iZXI7XG4gICAgY29uc3Qgc3RhcnRDb29yZHMgPSB7IHg6IDAsIHk6IDAgfTtcbiAgICBsZXQgaXNMb25nUHJlc3NpbmcgPSBmYWxzZTtcbiAgICBsZXQgaGFzVHJpZ2dlcmVkID0gZmFsc2U7XG5cbiAgICAvLyDnp7vliqjnq6/kvJjljJbnmoTplb/mjInlvIDlp4vlpITnkIZcbiAgICBjb25zdCBzdGFydExvbmdQcmVzcyA9IChlOiBUb3VjaEV2ZW50IHwgTW91c2VFdmVudCkgPT4ge1xuICAgICAgLy8g6YeN572u54q25oCBXG4gICAgICBoYXNUcmlnZ2VyZWQgPSBmYWxzZTtcbiAgICAgIGlzTG9uZ1ByZXNzaW5nID0gdHJ1ZTtcblxuICAgICAgLy8g5a6J5YWo5Zyw6Zi75q2i6buY6K6k6KGM5Li6IC0g5qOA5p+l5LqL5Lu25piv5ZCm5Y+v5Y+W5raIXG4gICAgICBpZiAoZS5jYW5jZWxhYmxlICE9PSBmYWxzZSkge1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICB9XG4gICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuXG4gICAgICAvLyDojrflj5blnZDmoIcgLSDlhbzlrrnop6bmkbjlkozpvKDmoIfkuovku7ZcbiAgICAgIGNvbnN0IG9yaWdpbmFsRXZlbnQgPSBlO1xuICAgICAgaWYgKG9yaWdpbmFsRXZlbnQudHlwZSA9PT0gJ3RvdWNoc3RhcnQnKSB7XG4gICAgICAgIGNvbnN0IHRvdWNoID0gKG9yaWdpbmFsRXZlbnQgYXMgVG91Y2hFdmVudCkudG91Y2hlc1swXTtcbiAgICAgICAgc3RhcnRDb29yZHMueCA9IHRvdWNoLmNsaWVudFg7XG4gICAgICAgIHN0YXJ0Q29vcmRzLnkgPSB0b3VjaC5jbGllbnRZO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc3QgbW91c2UgPSBvcmlnaW5hbEV2ZW50IGFzIE1vdXNlRXZlbnQ7XG4gICAgICAgIGlmIChtb3VzZS5idXR0b24gIT09IDApIHJldHVybjsgLy8g5Y+q5aSE55CG5bem6ZSuXG4gICAgICAgIHN0YXJ0Q29vcmRzLnggPSBtb3VzZS5jbGllbnRYO1xuICAgICAgICBzdGFydENvb3Jkcy55ID0gbW91c2UuY2xpZW50WTtcbiAgICAgIH1cblxuICAgICAgLy8g5re75Yqg6KeG6KeJ5Y+N6aaIIC0g5L2/55SoalF1ZXJ5XG4gICAgICAkdGFyZ2V0RWxlbWVudC5hZGRDbGFzcygnbG9uZy1wcmVzcy1hY3RpdmUnKTtcblxuICAgICAgLy8g6Ziy5q2i6aG16Z2i5rua5Yqo5ZKM5paH5pys6YCJ5oupIC0g5L2/55SoalF1ZXJ5XG4gICAgICAkKCdib2R5JykuY3NzKHtcbiAgICAgICAgb3ZlcmZsb3c6ICdoaWRkZW4nLFxuICAgICAgICAndXNlci1zZWxlY3QnOiAnbm9uZScsXG4gICAgICAgICctd2Via2l0LXVzZXItc2VsZWN0JzogJ25vbmUnLFxuICAgICAgICAnLW1vei11c2VyLXNlbGVjdCc6ICdub25lJyxcbiAgICAgICAgJy1tcy11c2VyLXNlbGVjdCc6ICdub25lJyxcbiAgICAgICAgJy13ZWJraXQtdG91Y2gtY2FsbG91dCc6ICdub25lJyxcbiAgICAgICAgJy13ZWJraXQtdGFwLWhpZ2hsaWdodC1jb2xvcic6ICd0cmFuc3BhcmVudCcsXG4gICAgICB9KTtcblxuICAgICAgLy8g6K6+572u6ZW/5oyJ5a6a5pe25ZmoXG4gICAgICBsb25nUHJlc3NUaW1lciA9IHNldFRpbWVvdXQoYXN5bmMgKCkgPT4ge1xuICAgICAgICBpZiAoaXNMb25nUHJlc3NpbmcgJiYgIWhhc1RyaWdnZXJlZCkge1xuICAgICAgICAgIGhhc1RyaWdnZXJlZCA9IHRydWU7XG5cbiAgICAgICAgICAvLyDnp7vpmaTop4bop4nlj43ppohcbiAgICAgICAgICAkdGFyZ2V0RWxlbWVudC5yZW1vdmVDbGFzcygnbG9uZy1wcmVzcy1hY3RpdmUnKTtcblxuICAgICAgICAgIC8vIOaBouWkjemhtemdoueKtuaAgVxuICAgICAgICAgICQoJ2JvZHknKS5jc3Moe1xuICAgICAgICAgICAgb3ZlcmZsb3c6ICcnLFxuICAgICAgICAgICAgJ3VzZXItc2VsZWN0JzogJycsXG4gICAgICAgICAgICAnLXdlYmtpdC11c2VyLXNlbGVjdCc6ICcnLFxuICAgICAgICAgICAgJy1tb3otdXNlci1zZWxlY3QnOiAnJyxcbiAgICAgICAgICAgICctbXMtdXNlci1zZWxlY3QnOiAnJyxcbiAgICAgICAgICAgICctd2Via2l0LXRvdWNoLWNhbGxvdXQnOiAnJyxcbiAgICAgICAgICAgICctd2Via2l0LXRhcC1oaWdobGlnaHQtY29sb3InOiAnJyxcbiAgICAgICAgICB9KTtcblxuICAgICAgICAgIC8vIOa3u+WKoOinpuinieWPjemmiO+8iOenu+WKqOerr++8iVxuICAgICAgICAgIGlmICgndmlicmF0ZScgaW4gbmF2aWdhdG9yKSB7XG4gICAgICAgICAgICBuYXZpZ2F0b3IudmlicmF0ZSg1MCk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgLy8g5omn6KGM5pKk5Zue5pON5L2cXG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGlmICh0aGlzLm9wdGlvbnMuaXNNZXNzYWdlSW5RdWV1ZSAmJiB0aGlzLm9wdGlvbnMuaXNNZXNzYWdlSW5RdWV1ZShlbnRyeS5pZCkpIHtcbiAgICAgICAgICAgICAgYXdhaXQgdGhpcy5oYW5kbGVVc2VyTWVzc2FnZVJlY2FsbChlbnRyeSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAvLyDkvb/nlKhqUXVlcnkgVUnnmoTmlYjmnpzmmL7npLrml6Dms5XmkqTlm55cbiAgICAgICAgICAgICAgJHRhcmdldEVsZW1lbnQuZWZmZWN0KCdzaGFrZScsIHsgdGltZXM6IDIsIGRpc3RhbmNlOiA1IH0sIDMwMCk7XG5cbiAgICAgICAgICAgICAgY29uc3QgeyBEaWFsb2dNYW5hZ2VyIH0gPSBhd2FpdCBpbXBvcnQoJy4vZGlhbG9nLW1hbmFnZXInKTtcbiAgICAgICAgICAgICAgY29uc3QgZGlhbG9nTWFuYWdlciA9IERpYWxvZ01hbmFnZXIuZ2V0SW5zdGFuY2UoKTtcbiAgICAgICAgICAgICAgYXdhaXQgZGlhbG9nTWFuYWdlci5hbGVydCgn5raI5oGv5bey5ZCI5bm25Y+R6YCB77yM5peg5rOV5pKk5Zue44CCJywgJ+aXoOazleaSpOWbnicpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAvLyDkvb/nlKhqUXVlcnkgVUnnmoTmlYjmnpxcbiAgICAgICAgICAgICR0YXJnZXRFbGVtZW50LmVmZmVjdCgnc2hha2UnLCB7IHRpbWVzOiAyLCBkaXN0YW5jZTogNSB9LCAzMDApO1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcign5pKk5Zue5aSx6LSlOicsIGVycm9yKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpc0xvbmdQcmVzc2luZyA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgICB9LCA2MDApOyAvLyA2MDBtc+mVv+aMieaXtumXtFxuICAgIH07XG5cbiAgICAvLyDnp7vliqjnq6/kvJjljJbnmoTplb/mjInlj5bmtojlpITnkIZcbiAgICBjb25zdCBjYW5jZWxMb25nUHJlc3MgPSAoZT86IFRvdWNoRXZlbnQgfCBNb3VzZUV2ZW50KSA9PiB7XG4gICAgICBpZiAobG9uZ1ByZXNzVGltZXIpIHtcbiAgICAgICAgY2xlYXJUaW1lb3V0KGxvbmdQcmVzc1RpbWVyKTtcbiAgICAgIH1cblxuICAgICAgLy8g5qOA5p+l5piv5ZCm56e75Yqo6L+H5aSa77yI6LaF6L+HMjBweOWPlua2iOmVv+aMie+8jOWinuWKoOenu+WKqOerr+WuueW/jeW6pu+8iVxuICAgICAgaWYgKGUgJiYgaXNMb25nUHJlc3NpbmcgJiYgIWhhc1RyaWdnZXJlZCkge1xuICAgICAgICBsZXQgY3VycmVudFg6IG51bWJlciwgY3VycmVudFk6IG51bWJlcjtcblxuICAgICAgICBjb25zdCBvcmlnaW5hbEV2ZW50ID0gZTtcbiAgICAgICAgaWYgKG9yaWdpbmFsRXZlbnQudHlwZS5zdGFydHNXaXRoKCd0b3VjaCcpKSB7XG4gICAgICAgICAgY29uc3QgdG91Y2hFdmVudCA9IG9yaWdpbmFsRXZlbnQgYXMgVG91Y2hFdmVudDtcbiAgICAgICAgICBpZiAodG91Y2hFdmVudC50b3VjaGVzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIGN1cnJlbnRYID0gdG91Y2hFdmVudC50b3VjaGVzWzBdLmNsaWVudFg7XG4gICAgICAgICAgICBjdXJyZW50WSA9IHRvdWNoRXZlbnQudG91Y2hlc1swXS5jbGllbnRZO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyB0b3VjaGVuZOS6i+S7tu+8jOS9v+eUqGNoYW5nZWRUb3VjaGVzXG4gICAgICAgICAgICBjdXJyZW50WCA9IHRvdWNoRXZlbnQuY2hhbmdlZFRvdWNoZXNbMF0uY2xpZW50WDtcbiAgICAgICAgICAgIGN1cnJlbnRZID0gdG91Y2hFdmVudC5jaGFuZ2VkVG91Y2hlc1swXS5jbGllbnRZO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjb25zdCBtb3VzZUV2ZW50ID0gb3JpZ2luYWxFdmVudCBhcyBNb3VzZUV2ZW50O1xuICAgICAgICAgIGN1cnJlbnRYID0gbW91c2VFdmVudC5jbGllbnRYO1xuICAgICAgICAgIGN1cnJlbnRZID0gbW91c2VFdmVudC5jbGllbnRZO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8g5L2/55SobG9kYXNo6K6h566X6Led56a7XG4gICAgICAgIGNvbnN0IG1vdmVEaXN0YW5jZSA9IE1hdGguc3FydChNYXRoLnBvdyhjdXJyZW50WCAtIHN0YXJ0Q29vcmRzLngsIDIpICsgTWF0aC5wb3coY3VycmVudFkgLSBzdGFydENvb3Jkcy55LCAyKSk7XG5cbiAgICAgICAgaWYgKG1vdmVEaXN0YW5jZSA+IDIwKSB7XG4gICAgICAgICAgLy8g5aKe5Yqg56e75Yqo5a655b+N5bqm5YiwMjBweO+8jOmAguWQiOenu+WKqOerr1xuICAgICAgICAgIGlzTG9uZ1ByZXNzaW5nID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8g5riF55CG54q25oCBIC0g5L2/55SoalF1ZXJ5XG4gICAgICAkdGFyZ2V0RWxlbWVudC5yZW1vdmVDbGFzcygnbG9uZy1wcmVzcy1hY3RpdmUnKTtcbiAgICAgICQoJ2JvZHknKS5jc3Moe1xuICAgICAgICBvdmVyZmxvdzogJycsXG4gICAgICAgICd1c2VyLXNlbGVjdCc6ICcnLFxuICAgICAgICAnLXdlYmtpdC11c2VyLXNlbGVjdCc6ICcnLFxuICAgICAgICAnLW1vei11c2VyLXNlbGVjdCc6ICcnLFxuICAgICAgICAnLW1zLXVzZXItc2VsZWN0JzogJycsXG4gICAgICAgICctd2Via2l0LXRvdWNoLWNhbGxvdXQnOiAnJyxcbiAgICAgICAgJy13ZWJraXQtdGFwLWhpZ2hsaWdodC1jb2xvcic6ICcnLFxuICAgICAgfSk7XG4gICAgICBpc0xvbmdQcmVzc2luZyA9IGZhbHNlO1xuICAgIH07XG5cbiAgICAvLyDkvb/nlKjljp/nlJ/kuovku7bnu5Hlrprpgb/lhY1qUXVlcnnnmoRwcmV2ZW50RGVmYXVsdOmXrumimFxuICAgIGNvbnN0IHRhcmdldEVsZW1lbnQgPSAkdGFyZ2V0RWxlbWVudFswXTtcblxuICAgIC8vIOm8oOagh+S6i+S7tlxuICAgIHRhcmdldEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgc3RhcnRMb25nUHJlc3MgYXMgYW55LCB7IHBhc3NpdmU6IGZhbHNlIH0pO1xuICAgIHRhcmdldEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbW91c2V1cCcsIGNhbmNlbExvbmdQcmVzcyBhcyBhbnksIHsgcGFzc2l2ZTogdHJ1ZSB9KTtcbiAgICB0YXJnZXRFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbGVhdmUnLCBjYW5jZWxMb25nUHJlc3MgYXMgYW55LCB7IHBhc3NpdmU6IHRydWUgfSk7XG5cbiAgICAvLyDkvb/nlKjnroDljZXnmoToioLmtYHkvJjljJZtb3VzZW1vdmXmgKfog71cbiAgICBsZXQgbW91c2VNb3ZlVGltZXI6IG51bWJlcjtcbiAgICB0YXJnZXRFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXG4gICAgICAnbW91c2Vtb3ZlJyxcbiAgICAgIGUgPT4ge1xuICAgICAgICBpZiAobW91c2VNb3ZlVGltZXIpIGNsZWFyVGltZW91dChtb3VzZU1vdmVUaW1lcik7XG4gICAgICAgIG1vdXNlTW92ZVRpbWVyID0gc2V0VGltZW91dCgoKSA9PiBjYW5jZWxMb25nUHJlc3MoZSBhcyBhbnkpLCA1MCk7XG4gICAgICB9LFxuICAgICAgeyBwYXNzaXZlOiB0cnVlIH0sXG4gICAgKTtcblxuICAgIC8vIOinpuaRuOS6i+S7tiAtIOenu+WKqOerr+aguOW/g+WKn+iDve+8jOS9v+eUqHBhc3NpdmXpgb/lhY3mjqfliLblj7DorablkYpcbiAgICB0YXJnZXRFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNoc3RhcnQnLCBzdGFydExvbmdQcmVzcyBhcyBhbnksIHsgcGFzc2l2ZTogZmFsc2UgfSk7XG4gICAgdGFyZ2V0RWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCd0b3VjaGVuZCcsIGNhbmNlbExvbmdQcmVzcyBhcyBhbnksIHsgcGFzc2l2ZTogdHJ1ZSB9KTtcbiAgICB0YXJnZXRFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNoY2FuY2VsJywgY2FuY2VsTG9uZ1ByZXNzIGFzIGFueSwgeyBwYXNzaXZlOiB0cnVlIH0pO1xuXG4gICAgLy8g5L2/55So566A5Y2V55qE6IqC5rWB5LyY5YyWdG91Y2htb3Zl5oCn6IO9XG4gICAgbGV0IHRvdWNoTW92ZVRpbWVyOiBudW1iZXI7XG4gICAgdGFyZ2V0RWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFxuICAgICAgJ3RvdWNobW92ZScsXG4gICAgICBlID0+IHtcbiAgICAgICAgaWYgKHRvdWNoTW92ZVRpbWVyKSBjbGVhclRpbWVvdXQodG91Y2hNb3ZlVGltZXIpO1xuICAgICAgICB0b3VjaE1vdmVUaW1lciA9IHNldFRpbWVvdXQoKCkgPT4gY2FuY2VsTG9uZ1ByZXNzKGUgYXMgYW55KSwgNTApO1xuICAgICAgfSxcbiAgICAgIHsgcGFzc2l2ZTogdHJ1ZSB9LFxuICAgICk7XG5cbiAgICAvLyDpmLvmraLkuIrkuIvmlofoj5zljZXjgIHmlofmnKzpgInmi6nlkozmi5bmi70gLSDkvb/nlKhqUXVlcnlcbiAgICAkdGFyZ2V0RWxlbWVudC5vbignY29udGV4dG1lbnUgc2VsZWN0c3RhcnQgZHJhZ3N0YXJ0JywgZSA9PiB7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgIH0pO1xuXG4gICAgLy8g56e75Yqo56uv54m55q6K5aSE55CGIC0g6Zi75q2i5Y+M5Ye757yp5pS+XG4gICAgJHRhcmdldEVsZW1lbnQuY3NzKHtcbiAgICAgICd0b3VjaC1hY3Rpb24nOiAnbWFuaXB1bGF0aW9uJyxcbiAgICAgICctd2Via2l0LXRvdWNoLWNhbGxvdXQnOiAnbm9uZScsXG4gICAgICAnLXdlYmtpdC11c2VyLXNlbGVjdCc6ICdub25lJyxcbiAgICAgICctd2Via2l0LXRhcC1oaWdobGlnaHQtY29sb3InOiAndHJhbnNwYXJlbnQnLFxuICAgIH0pO1xuICB9XG5cbiAgLy8g5aSE55CGVVNFUua2iOaBr+aSpOWbnlxuICBwcml2YXRlIGFzeW5jIGhhbmRsZVVzZXJNZXNzYWdlUmVjYWxsKGVudHJ5OiBDaGF0RW50cnkpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICB0cnkge1xuICAgICAgLy8g5a+85YWlRGlhbG9nTWFuYWdlclxuICAgICAgY29uc3QgeyBEaWFsb2dNYW5hZ2VyIH0gPSBhd2FpdCBpbXBvcnQoJy4vZGlhbG9nLW1hbmFnZXInKTtcbiAgICAgIGNvbnN0IGRpYWxvZ01hbmFnZXIgPSBEaWFsb2dNYW5hZ2VyLmdldEluc3RhbmNlKCk7XG5cbiAgICAgIC8vIOehruiupOaSpOWbnuaTjeS9nFxuICAgICAgY29uc3QgY29uZmlybWVkID0gYXdhaXQgZGlhbG9nTWFuYWdlci5jb25maXJtKFxuICAgICAgICAn56Gu5a6a6KaB5pKk5Zue6L+Z5p2h5paH5a2X5raI5oGv5ZCX77yf5pKk5Zue5ZCO5a+55pa55bCG55yL5YiwXCLkvaDmkqTlm57kuobkuIDmnaHmtojmga9cIuOAgicsXG4gICAgICAgICfmkqTlm57mloflrZfmtojmga8nLFxuICAgICAgICAn5pKk5ZueJyxcbiAgICAgICAgJ+WPlua2iCcsXG4gICAgICApO1xuXG4gICAgICBpZiAoY29uZmlybWVkKSB7XG4gICAgICAgIC8vIOiwg+eUqOaSpOWbnuWKn+iDvVxuICAgICAgICBpZiAodGhpcy5vcHRpb25zLm9uUmVjYWxsTWVzc2FnZSkge1xuICAgICAgICAgIGF3YWl0IHRoaXMub3B0aW9ucy5vblJlY2FsbE1lc3NhZ2UoZW50cnkpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ+aSpOWbnua2iOaBr+aXtuWHuumUmTonLCBlcnJvcik7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIOa4heeQhui1hOa6kO+8jOmYsuatouWGheWtmOazhOa8j1xuICAgKi9cbiAgY2xlYW51cCgpOiB2b2lkIHtcbiAgICB0aGlzLmV2ZW50TWFuYWdlci5jbGVhbnVwKCk7XG4gICAgLy8gY29uc29sZS5sb2coJ1tVSVJlbmRlcmVyXSDotYTmupDlt7LmuIXnkIYnKTtcbiAgfVxufVxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/同层手机/ui-renderer.ts\n")},"./src/同层手机/utils.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   $safe: () => (/* binding */ $safe),\n/* harmony export */   ErrorHandler: () => (/* binding */ ErrorHandler),\n/* harmony export */   SafeStorage: () => (/* binding */ SafeStorage),\n/* harmony export */   debounce: () => (/* binding */ debounce),\n/* harmony export */   deepClone: () => (/* binding */ deepClone),\n/* harmony export */   delay: () => (/* binding */ delay),\n/* harmony export */   formatFileSize: () => (/* binding */ formatFileSize),\n/* harmony export */   formatTimestamp: () => (/* binding */ formatTimestamp),\n/* harmony export */   generateId: () => (/* binding */ generateId),\n/* harmony export */   isMobileDevice: () => (/* binding */ isMobileDevice),\n/* harmony export */   isTouchDevice: () => (/* binding */ isTouchDevice),\n/* harmony export */   safeJsonParse: () => (/* binding */ safeJsonParse),\n/* harmony export */   safeJsonStringify: () => (/* binding */ safeJsonStringify),\n/* harmony export */   safeQuerySelector: () => (/* binding */ safeQuerySelector),\n/* harmony export */   safeQuerySelectorAll: () => (/* binding */ safeQuerySelectorAll),\n/* harmony export */   throttle: () => (/* binding */ throttle)\n/* harmony export */ });\n/* harmony import */ var _debug_logger__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./debug-logger */ \"./src/同层手机/debug-logger.ts\");\n/**\n * 通用工具函数\n * 用于抽象重复的逻辑和提供共享功能\n */\n\n/**\n * 安全的JSON解析\n * @param jsonString JSON字符串\n * @param defaultValue 解析失败时的默认值\n * @returns 解析结果或默认值\n */\nfunction safeJsonParse(jsonString, defaultValue = null) {\n    try {\n        return JSON.parse(jsonString);\n    }\n    catch (error) {\n        _debug_logger__WEBPACK_IMPORTED_MODULE_0__.logger.warn('Utils', 'JSON解析失败', { jsonString: jsonString.substring(0, 100), error });\n        return defaultValue;\n    }\n}\n/**\n * 安全的JSON字符串化\n * @param obj 要序列化的对象\n * @param defaultValue 序列化失败时的默认值\n * @returns JSON字符串或默认值\n */\nfunction safeJsonStringify(obj, defaultValue = '{}') {\n    try {\n        return JSON.stringify(obj);\n    }\n    catch (error) {\n        _debug_logger__WEBPACK_IMPORTED_MODULE_0__.logger.warn('Utils', 'JSON序列化失败', { error });\n        return defaultValue;\n    }\n}\n/**\n * 防抖函数 - 使用lodash的debounce\n * @param func 要防抖的函数\n * @param wait 等待时间（毫秒）\n * @param options lodash debounce选项\n * @returns 防抖后的函数\n */\nfunction debounce(func, wait, options) {\n    return window._.debounce(func, wait, options);\n}\n/**\n * 节流函数 - 使用lodash的throttle\n * @param func 要节流的函数\n * @param wait 等待时间（毫秒）\n * @param options lodash throttle选项\n * @returns 节流后的函数\n */\nfunction throttle(func, wait, options) {\n    return window._.throttle(func, wait, options);\n}\n/**\n * 异步延迟函数\n * @param ms 延迟时间（毫秒）\n * @returns Promise\n */\nfunction delay(ms) {\n    return new Promise(resolve => setTimeout(resolve, ms));\n}\n/**\n * 安全的DOM查询 - 使用jQuery\n * @param selector CSS选择器\n * @param context 查询上下文，默认为document\n * @returns jQuery对象\n */\nfunction $safe(selector, context) {\n    try {\n        return context ? $(selector, context) : $(selector);\n    }\n    catch (error) {\n        _debug_logger__WEBPACK_IMPORTED_MODULE_0__.logger.warn('Utils', 'jQuery查询失败', { selector, error });\n        return $(); // 返回空的jQuery对象\n    }\n}\n/**\n * 安全的DOM查询（原生元素）\n * @param selector CSS选择器\n * @param context 查询上下文，默认为document\n * @returns 元素或null\n */\nfunction safeQuerySelector(selector, context = document) {\n    try {\n        return context.querySelector(selector);\n    }\n    catch (error) {\n        _debug_logger__WEBPACK_IMPORTED_MODULE_0__.logger.warn('Utils', 'DOM查询失败', { selector, error });\n        return null;\n    }\n}\n/**\n * 安全的DOM查询（多个元素）- 使用jQuery更简洁\n * @param selector CSS选择器\n * @param context 查询上下文，默认为document\n * @returns 元素数组\n */\nfunction safeQuerySelectorAll(selector, context = document) {\n    try {\n        const $elements = context ? $(selector, context) : $(selector);\n        return $elements.toArray();\n    }\n    catch (error) {\n        _debug_logger__WEBPACK_IMPORTED_MODULE_0__.logger.warn('Utils', 'DOM查询失败', { selector, error });\n        return [];\n    }\n}\n/**\n * 格式化文件大小\n * @param bytes 字节数\n * @returns 格式化的文件大小字符串\n */\nfunction formatFileSize(bytes) {\n    if (bytes === 0)\n        return '0 B';\n    const k = 1024;\n    const sizes = ['B', 'KB', 'MB', 'GB', 'TB'];\n    const i = Math.floor(Math.log(bytes) / Math.log(k));\n    return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];\n}\n/**\n * 格式化时间戳\n * @param timestamp 时间戳（毫秒）\n * @param format 格式类型\n * @returns 格式化的时间字符串\n */\nfunction formatTimestamp(timestamp, format = 'full') {\n    const date = new Date(timestamp);\n    switch (format) {\n        case 'time':\n            return date.toLocaleTimeString('zh-CN', { hour12: false });\n        case 'date':\n            return date.toLocaleDateString('zh-CN');\n        case 'full':\n        default:\n            return date.toLocaleString('zh-CN', { hour12: false });\n    }\n}\n/**\n * 生成唯一ID\n * @param prefix 前缀\n * @returns 唯一ID字符串\n */\nfunction generateId(prefix = 'id') {\n    return `${prefix}-${Date.now()}-${Math.random().toString(36).substring(2, 11)}`;\n}\n/**\n * 深度克隆对象 - 使用lodash的cloneDeep\n * @param obj 要克隆的对象\n * @returns 克隆后的对象\n */\nfunction deepClone(obj) {\n    return window._.cloneDeep(obj);\n}\n/**\n * 检查是否为移动设备\n * @returns 是否为移动设备\n */\nfunction isMobileDevice() {\n    return /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);\n}\n/**\n * 检查是否支持触摸\n * @returns 是否支持触摸\n */\nfunction isTouchDevice() {\n    return 'ontouchstart' in window || navigator.maxTouchPoints > 0;\n}\n/**\n * 安全的本地存储操作\n */\nconst SafeStorage = {\n    /**\n     * 获取本地存储项\n     * @param key 键名\n     * @param defaultValue 默认值\n     * @returns 存储的值或默认值\n     */\n    getItem(key, defaultValue = null) {\n        try {\n            const item = localStorage.getItem(key);\n            if (item === null)\n                return defaultValue;\n            // 尝试解析JSON，如果失败则返回原始字符串\n            try {\n                return JSON.parse(item);\n            }\n            catch {\n                return item;\n            }\n        }\n        catch (error) {\n            _debug_logger__WEBPACK_IMPORTED_MODULE_0__.logger.warn('Utils', '本地存储读取失败', { key, error });\n            return defaultValue;\n        }\n    },\n    /**\n     * 设置本地存储项\n     * @param key 键名\n     * @param value 值\n     * @returns 是否成功\n     */\n    setItem(key, value) {\n        try {\n            const serialized = typeof value === 'string' ? value : JSON.stringify(value);\n            localStorage.setItem(key, serialized);\n            return true;\n        }\n        catch (error) {\n            _debug_logger__WEBPACK_IMPORTED_MODULE_0__.logger.warn('Utils', '本地存储写入失败', { key, error });\n            return false;\n        }\n    },\n    /**\n     * 删除本地存储项\n     * @param key 键名\n     * @returns 是否成功\n     */\n    removeItem(key) {\n        try {\n            localStorage.removeItem(key);\n            return true;\n        }\n        catch (error) {\n            _debug_logger__WEBPACK_IMPORTED_MODULE_0__.logger.warn('Utils', '本地存储删除失败', { key, error });\n            return false;\n        }\n    },\n    /**\n     * 清空本地存储\n     * @returns 是否成功\n     */\n    clear() {\n        try {\n            localStorage.clear();\n            return true;\n        }\n        catch (error) {\n            _debug_logger__WEBPACK_IMPORTED_MODULE_0__.logger.warn('Utils', '本地存储清空失败', { error });\n            return false;\n        }\n    },\n};\n/**\n * 错误处理工具\n */\nconst ErrorHandler = {\n    /**\n     * 安全执行异步函数\n     * @param fn 异步函数\n     * @param errorMessage 错误消息\n     * @returns 执行结果或null\n     */\n    async safeAsync(fn, errorMessage) {\n        try {\n            return await fn();\n        }\n        catch (error) {\n            _debug_logger__WEBPACK_IMPORTED_MODULE_0__.logger.error('ErrorHandler', errorMessage || '异步操作失败', { error });\n            return null;\n        }\n    },\n    /**\n     * 安全执行同步函数\n     * @param fn 同步函数\n     * @param errorMessage 错误消息\n     * @returns 执行结果或null\n     */\n    safeSync(fn, errorMessage) {\n        try {\n            return fn();\n        }\n        catch (error) {\n            _debug_logger__WEBPACK_IMPORTED_MODULE_0__.logger.error('ErrorHandler', errorMessage || '同步操作失败', { error });\n            return null;\n        }\n    },\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUNsRSxPQUFPLElBQUksQ0FBQztRQUNkLENBQUM7SUFDSCxDQUFDO0NBQ0YsQ0FBQyIsInNvdXJjZXMiOlsid2VicGFjazovL3RhdmVybl9oZWxwZXJfdGVtcGxhdGUvLi9zcmMv5ZCM5bGC5omL5py6L3V0aWxzLnRzPyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIOmAmueUqOW3peWFt+WHveaVsFxuICog55So5LqO5oq96LGh6YeN5aSN55qE6YC76L6R5ZKM5o+Q5L6b5YWx5Lqr5Yqf6IO9XG4gKi9cblxuaW1wb3J0IHsgbG9nZ2VyIH0gZnJvbSAnLi9kZWJ1Zy1sb2dnZXInO1xuXG4vKipcbiAqIOWuieWFqOeahEpTT07op6PmnpBcbiAqIEBwYXJhbSBqc29uU3RyaW5nIEpTT07lrZfnrKbkuLJcbiAqIEBwYXJhbSBkZWZhdWx0VmFsdWUg6Kej5p6Q5aSx6LSl5pe255qE6buY6K6k5YC8XG4gKiBAcmV0dXJucyDop6PmnpDnu5PmnpzmiJbpu5jorqTlgLxcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHNhZmVKc29uUGFyc2U8VCA9IGFueT4oanNvblN0cmluZzogc3RyaW5nLCBkZWZhdWx0VmFsdWU6IFQgfCBudWxsID0gbnVsbCk6IFQgfCBudWxsIHtcbiAgdHJ5IHtcbiAgICByZXR1cm4gSlNPTi5wYXJzZShqc29uU3RyaW5nKTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBsb2dnZXIud2FybignVXRpbHMnLCAnSlNPTuino+aekOWksei0pScsIHsganNvblN0cmluZzoganNvblN0cmluZy5zdWJzdHJpbmcoMCwgMTAwKSwgZXJyb3IgfSk7XG4gICAgcmV0dXJuIGRlZmF1bHRWYWx1ZTtcbiAgfVxufVxuXG4vKipcbiAqIOWuieWFqOeahEpTT07lrZfnrKbkuLLljJZcbiAqIEBwYXJhbSBvYmog6KaB5bqP5YiX5YyW55qE5a+56LGhXG4gKiBAcGFyYW0gZGVmYXVsdFZhbHVlIOW6j+WIl+WMluWksei0peaXtueahOm7mOiupOWAvFxuICogQHJldHVybnMgSlNPTuWtl+espuS4suaIlum7mOiupOWAvFxuICovXG5leHBvcnQgZnVuY3Rpb24gc2FmZUpzb25TdHJpbmdpZnkob2JqOiBhbnksIGRlZmF1bHRWYWx1ZTogc3RyaW5nID0gJ3t9Jyk6IHN0cmluZyB7XG4gIHRyeSB7XG4gICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KG9iaik7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgbG9nZ2VyLndhcm4oJ1V0aWxzJywgJ0pTT07luo/liJfljJblpLHotKUnLCB7IGVycm9yIH0pO1xuICAgIHJldHVybiBkZWZhdWx0VmFsdWU7XG4gIH1cbn1cblxuLyoqXG4gKiDpmLLmipblh73mlbAgLSDkvb/nlKhsb2Rhc2jnmoRkZWJvdW5jZVxuICogQHBhcmFtIGZ1bmMg6KaB6Ziy5oqW55qE5Ye95pWwXG4gKiBAcGFyYW0gd2FpdCDnrYnlvoXml7bpl7TvvIjmr6vnp5LvvIlcbiAqIEBwYXJhbSBvcHRpb25zIGxvZGFzaCBkZWJvdW5jZemAiemhuVxuICogQHJldHVybnMg6Ziy5oqW5ZCO55qE5Ye95pWwXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBkZWJvdW5jZTxUIGV4dGVuZHMgKC4uLmFyZ3M6IGFueVtdKSA9PiBhbnk+KFxuICBmdW5jOiBULFxuICB3YWl0OiBudW1iZXIsXG4gIG9wdGlvbnM/OiB7IGxlYWRpbmc/OiBib29sZWFuOyB0cmFpbGluZz86IGJvb2xlYW47IG1heFdhaXQ/OiBudW1iZXIgfSxcbik6IFQge1xuICByZXR1cm4gKHdpbmRvdyBhcyBhbnkpLl8uZGVib3VuY2UoZnVuYywgd2FpdCwgb3B0aW9ucyk7XG59XG5cbi8qKlxuICog6IqC5rWB5Ye95pWwIC0g5L2/55SobG9kYXNo55qEdGhyb3R0bGVcbiAqIEBwYXJhbSBmdW5jIOimgeiKgua1geeahOWHveaVsFxuICogQHBhcmFtIHdhaXQg562J5b6F5pe26Ze077yI5q+r56eS77yJXG4gKiBAcGFyYW0gb3B0aW9ucyBsb2Rhc2ggdGhyb3R0bGXpgInpoblcbiAqIEByZXR1cm5zIOiKgua1geWQjueahOWHveaVsFxuICovXG5leHBvcnQgZnVuY3Rpb24gdGhyb3R0bGU8VCBleHRlbmRzICguLi5hcmdzOiBhbnlbXSkgPT4gYW55PihcbiAgZnVuYzogVCxcbiAgd2FpdDogbnVtYmVyLFxuICBvcHRpb25zPzogeyBsZWFkaW5nPzogYm9vbGVhbjsgdHJhaWxpbmc/OiBib29sZWFuIH0sXG4pOiBUIHtcbiAgcmV0dXJuICh3aW5kb3cgYXMgYW55KS5fLnRocm90dGxlKGZ1bmMsIHdhaXQsIG9wdGlvbnMpO1xufVxuXG4vKipcbiAqIOW8guatpeW7tui/n+WHveaVsFxuICogQHBhcmFtIG1zIOW7tui/n+aXtumXtO+8iOavq+enku+8iVxuICogQHJldHVybnMgUHJvbWlzZVxuICovXG5leHBvcnQgZnVuY3Rpb24gZGVsYXkobXM6IG51bWJlcik6IFByb21pc2U8dm9pZD4ge1xuICByZXR1cm4gbmV3IFByb21pc2UocmVzb2x2ZSA9PiBzZXRUaW1lb3V0KHJlc29sdmUsIG1zKSk7XG59XG5cbi8qKlxuICog5a6J5YWo55qERE9N5p+l6K+iIC0g5L2/55SoalF1ZXJ5XG4gKiBAcGFyYW0gc2VsZWN0b3IgQ1NT6YCJ5oup5ZmoXG4gKiBAcGFyYW0gY29udGV4dCDmn6Xor6LkuIrkuIvmlofvvIzpu5jorqTkuLpkb2N1bWVudFxuICogQHJldHVybnMgalF1ZXJ55a+56LGhXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiAkc2FmZShzZWxlY3Rvcjogc3RyaW5nLCBjb250ZXh0PzogRWxlbWVudCB8IERvY3VtZW50KTogSlF1ZXJ5PEhUTUxFbGVtZW50PiB7XG4gIHRyeSB7XG4gICAgcmV0dXJuIGNvbnRleHQgPyAkKHNlbGVjdG9yLCBjb250ZXh0KSA6ICQoc2VsZWN0b3IpO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGxvZ2dlci53YXJuKCdVdGlscycsICdqUXVlcnnmn6Xor6LlpLHotKUnLCB7IHNlbGVjdG9yLCBlcnJvciB9KTtcbiAgICByZXR1cm4gJCgpOyAvLyDov5Tlm57nqbrnmoRqUXVlcnnlr7nosaFcbiAgfVxufVxuXG4vKipcbiAqIOWuieWFqOeahERPTeafpeivou+8iOWOn+eUn+WFg+e0oO+8iVxuICogQHBhcmFtIHNlbGVjdG9yIENTU+mAieaLqeWZqFxuICogQHBhcmFtIGNvbnRleHQg5p+l6K+i5LiK5LiL5paH77yM6buY6K6k5Li6ZG9jdW1lbnRcbiAqIEByZXR1cm5zIOWFg+e0oOaIlm51bGxcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHNhZmVRdWVyeVNlbGVjdG9yPFQgZXh0ZW5kcyBFbGVtZW50ID0gRWxlbWVudD4oXG4gIHNlbGVjdG9yOiBzdHJpbmcsXG4gIGNvbnRleHQ6IERvY3VtZW50IHwgRWxlbWVudCA9IGRvY3VtZW50LFxuKTogVCB8IG51bGwge1xuICB0cnkge1xuICAgIHJldHVybiBjb250ZXh0LnF1ZXJ5U2VsZWN0b3I8VD4oc2VsZWN0b3IpO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGxvZ2dlci53YXJuKCdVdGlscycsICdET03mn6Xor6LlpLHotKUnLCB7IHNlbGVjdG9yLCBlcnJvciB9KTtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxufVxuXG4vKipcbiAqIOWuieWFqOeahERPTeafpeivou+8iOWkmuS4quWFg+e0oO+8iS0g5L2/55SoalF1ZXJ55pu0566A5rSBXG4gKiBAcGFyYW0gc2VsZWN0b3IgQ1NT6YCJ5oup5ZmoXG4gKiBAcGFyYW0gY29udGV4dCDmn6Xor6LkuIrkuIvmlofvvIzpu5jorqTkuLpkb2N1bWVudFxuICogQHJldHVybnMg5YWD57Sg5pWw57uEXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzYWZlUXVlcnlTZWxlY3RvckFsbDxUIGV4dGVuZHMgRWxlbWVudCA9IEVsZW1lbnQ+KFxuICBzZWxlY3Rvcjogc3RyaW5nLFxuICBjb250ZXh0OiBEb2N1bWVudCB8IEVsZW1lbnQgPSBkb2N1bWVudCxcbik6IFRbXSB7XG4gIHRyeSB7XG4gICAgY29uc3QgJGVsZW1lbnRzID0gY29udGV4dCA/ICQoc2VsZWN0b3IsIGNvbnRleHQpIDogJChzZWxlY3Rvcik7XG4gICAgcmV0dXJuICRlbGVtZW50cy50b0FycmF5KCkgYXMgdW5rbm93biBhcyBUW107XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgbG9nZ2VyLndhcm4oJ1V0aWxzJywgJ0RPTeafpeivouWksei0pScsIHsgc2VsZWN0b3IsIGVycm9yIH0pO1xuICAgIHJldHVybiBbXTtcbiAgfVxufVxuXG4vKipcbiAqIOagvOW8j+WMluaWh+S7tuWkp+Wwj1xuICogQHBhcmFtIGJ5dGVzIOWtl+iKguaVsFxuICogQHJldHVybnMg5qC85byP5YyW55qE5paH5Lu25aSn5bCP5a2X56ym5LiyXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBmb3JtYXRGaWxlU2l6ZShieXRlczogbnVtYmVyKTogc3RyaW5nIHtcbiAgaWYgKGJ5dGVzID09PSAwKSByZXR1cm4gJzAgQic7XG5cbiAgY29uc3QgayA9IDEwMjQ7XG4gIGNvbnN0IHNpemVzID0gWydCJywgJ0tCJywgJ01CJywgJ0dCJywgJ1RCJ107XG4gIGNvbnN0IGkgPSBNYXRoLmZsb29yKE1hdGgubG9nKGJ5dGVzKSAvIE1hdGgubG9nKGspKTtcblxuICByZXR1cm4gcGFyc2VGbG9hdCgoYnl0ZXMgLyBNYXRoLnBvdyhrLCBpKSkudG9GaXhlZCgyKSkgKyAnICcgKyBzaXplc1tpXTtcbn1cblxuLyoqXG4gKiDmoLzlvI/ljJbml7bpl7TmiLNcbiAqIEBwYXJhbSB0aW1lc3RhbXAg5pe26Ze05oiz77yI5q+r56eS77yJXG4gKiBAcGFyYW0gZm9ybWF0IOagvOW8j+exu+Wei1xuICogQHJldHVybnMg5qC85byP5YyW55qE5pe26Ze05a2X56ym5LiyXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBmb3JtYXRUaW1lc3RhbXAodGltZXN0YW1wOiBudW1iZXIsIGZvcm1hdDogJ2Z1bGwnIHwgJ3RpbWUnIHwgJ2RhdGUnID0gJ2Z1bGwnKTogc3RyaW5nIHtcbiAgY29uc3QgZGF0ZSA9IG5ldyBEYXRlKHRpbWVzdGFtcCk7XG5cbiAgc3dpdGNoIChmb3JtYXQpIHtcbiAgICBjYXNlICd0aW1lJzpcbiAgICAgIHJldHVybiBkYXRlLnRvTG9jYWxlVGltZVN0cmluZygnemgtQ04nLCB7IGhvdXIxMjogZmFsc2UgfSk7XG4gICAgY2FzZSAnZGF0ZSc6XG4gICAgICByZXR1cm4gZGF0ZS50b0xvY2FsZURhdGVTdHJpbmcoJ3poLUNOJyk7XG4gICAgY2FzZSAnZnVsbCc6XG4gICAgZGVmYXVsdDpcbiAgICAgIHJldHVybiBkYXRlLnRvTG9jYWxlU3RyaW5nKCd6aC1DTicsIHsgaG91cjEyOiBmYWxzZSB9KTtcbiAgfVxufVxuXG4vKipcbiAqIOeUn+aIkOWUr+S4gElEXG4gKiBAcGFyYW0gcHJlZml4IOWJjee8gFxuICogQHJldHVybnMg5ZSv5LiASUTlrZfnrKbkuLJcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdlbmVyYXRlSWQocHJlZml4OiBzdHJpbmcgPSAnaWQnKTogc3RyaW5nIHtcbiAgcmV0dXJuIGAke3ByZWZpeH0tJHtEYXRlLm5vdygpfS0ke01hdGgucmFuZG9tKCkudG9TdHJpbmcoMzYpLnN1YnN0cmluZygyLCAxMSl9YDtcbn1cblxuLyoqXG4gKiDmt7HluqblhYvpmoblr7nosaEgLSDkvb/nlKhsb2Rhc2jnmoRjbG9uZURlZXBcbiAqIEBwYXJhbSBvYmog6KaB5YWL6ZqG55qE5a+56LGhXG4gKiBAcmV0dXJucyDlhYvpmoblkI7nmoTlr7nosaFcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGRlZXBDbG9uZTxUPihvYmo6IFQpOiBUIHtcbiAgcmV0dXJuICh3aW5kb3cgYXMgYW55KS5fLmNsb25lRGVlcChvYmopO1xufVxuXG4vKipcbiAqIOajgOafpeaYr+WQpuS4uuenu+WKqOiuvuWkh1xuICogQHJldHVybnMg5piv5ZCm5Li656e75Yqo6K6+5aSHXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc01vYmlsZURldmljZSgpOiBib29sZWFuIHtcbiAgcmV0dXJuIC9BbmRyb2lkfHdlYk9TfGlQaG9uZXxpUGFkfGlQb2R8QmxhY2tCZXJyeXxJRU1vYmlsZXxPcGVyYSBNaW5pL2kudGVzdChuYXZpZ2F0b3IudXNlckFnZW50KTtcbn1cblxuLyoqXG4gKiDmo4Dmn6XmmK/lkKbmlK/mjIHop6bmkbhcbiAqIEByZXR1cm5zIOaYr+WQpuaUr+aMgeinpuaRuFxuICovXG5leHBvcnQgZnVuY3Rpb24gaXNUb3VjaERldmljZSgpOiBib29sZWFuIHtcbiAgcmV0dXJuICdvbnRvdWNoc3RhcnQnIGluIHdpbmRvdyB8fCBuYXZpZ2F0b3IubWF4VG91Y2hQb2ludHMgPiAwO1xufVxuXG4vKipcbiAqIOWuieWFqOeahOacrOWcsOWtmOWCqOaTjeS9nFxuICovXG5leHBvcnQgY29uc3QgU2FmZVN0b3JhZ2UgPSB7XG4gIC8qKlxuICAgKiDojrflj5bmnKzlnLDlrZjlgqjpoblcbiAgICogQHBhcmFtIGtleSDplK7lkI1cbiAgICogQHBhcmFtIGRlZmF1bHRWYWx1ZSDpu5jorqTlgLxcbiAgICogQHJldHVybnMg5a2Y5YKo55qE5YC85oiW6buY6K6k5YC8XG4gICAqL1xuICBnZXRJdGVtPFQgPSBzdHJpbmc+KGtleTogc3RyaW5nLCBkZWZhdWx0VmFsdWU6IFQgfCBudWxsID0gbnVsbCk6IFQgfCBudWxsIHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgaXRlbSA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKGtleSk7XG4gICAgICBpZiAoaXRlbSA9PT0gbnVsbCkgcmV0dXJuIGRlZmF1bHRWYWx1ZTtcblxuICAgICAgLy8g5bCd6K+V6Kej5p6QSlNPTu+8jOWmguaenOWksei0peWImei/lOWbnuWOn+Wni+Wtl+espuS4slxuICAgICAgdHJ5IHtcbiAgICAgICAgcmV0dXJuIEpTT04ucGFyc2UoaXRlbSk7XG4gICAgICB9IGNhdGNoIHtcbiAgICAgICAgcmV0dXJuIGl0ZW0gYXMgdW5rbm93biBhcyBUO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBsb2dnZXIud2FybignVXRpbHMnLCAn5pys5Zyw5a2Y5YKo6K+75Y+W5aSx6LSlJywgeyBrZXksIGVycm9yIH0pO1xuICAgICAgcmV0dXJuIGRlZmF1bHRWYWx1ZTtcbiAgICB9XG4gIH0sXG5cbiAgLyoqXG4gICAqIOiuvue9ruacrOWcsOWtmOWCqOmhuVxuICAgKiBAcGFyYW0ga2V5IOmUruWQjVxuICAgKiBAcGFyYW0gdmFsdWUg5YC8XG4gICAqIEByZXR1cm5zIOaYr+WQpuaIkOWKn1xuICAgKi9cbiAgc2V0SXRlbShrZXk6IHN0cmluZywgdmFsdWU6IGFueSk6IGJvb2xlYW4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBzZXJpYWxpemVkID0gdHlwZW9mIHZhbHVlID09PSAnc3RyaW5nJyA/IHZhbHVlIDogSlNPTi5zdHJpbmdpZnkodmFsdWUpO1xuICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oa2V5LCBzZXJpYWxpemVkKTtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBsb2dnZXIud2FybignVXRpbHMnLCAn5pys5Zyw5a2Y5YKo5YaZ5YWl5aSx6LSlJywgeyBrZXksIGVycm9yIH0pO1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgfSxcblxuICAvKipcbiAgICog5Yig6Zmk5pys5Zyw5a2Y5YKo6aG5XG4gICAqIEBwYXJhbSBrZXkg6ZSu5ZCNXG4gICAqIEByZXR1cm5zIOaYr+WQpuaIkOWKn1xuICAgKi9cbiAgcmVtb3ZlSXRlbShrZXk6IHN0cmluZyk6IGJvb2xlYW4ge1xuICAgIHRyeSB7XG4gICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbShrZXkpO1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGxvZ2dlci53YXJuKCdVdGlscycsICfmnKzlnLDlrZjlgqjliKDpmaTlpLHotKUnLCB7IGtleSwgZXJyb3IgfSk7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9LFxuXG4gIC8qKlxuICAgKiDmuIXnqbrmnKzlnLDlrZjlgqhcbiAgICogQHJldHVybnMg5piv5ZCm5oiQ5YqfXG4gICAqL1xuICBjbGVhcigpOiBib29sZWFuIHtcbiAgICB0cnkge1xuICAgICAgbG9jYWxTdG9yYWdlLmNsZWFyKCk7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgbG9nZ2VyLndhcm4oJ1V0aWxzJywgJ+acrOWcsOWtmOWCqOa4heepuuWksei0pScsIHsgZXJyb3IgfSk7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9LFxufTtcblxuLyoqXG4gKiDplJnor6/lpITnkIblt6XlhbdcbiAqL1xuZXhwb3J0IGNvbnN0IEVycm9ySGFuZGxlciA9IHtcbiAgLyoqXG4gICAqIOWuieWFqOaJp+ihjOW8guatpeWHveaVsFxuICAgKiBAcGFyYW0gZm4g5byC5q2l5Ye95pWwXG4gICAqIEBwYXJhbSBlcnJvck1lc3NhZ2Ug6ZSZ6K+v5raI5oGvXG4gICAqIEByZXR1cm5zIOaJp+ihjOe7k+aenOaIlm51bGxcbiAgICovXG4gIGFzeW5jIHNhZmVBc3luYzxUPihmbjogKCkgPT4gUHJvbWlzZTxUPiwgZXJyb3JNZXNzYWdlPzogc3RyaW5nKTogUHJvbWlzZTxUIHwgbnVsbD4ge1xuICAgIHRyeSB7XG4gICAgICByZXR1cm4gYXdhaXQgZm4oKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgbG9nZ2VyLmVycm9yKCdFcnJvckhhbmRsZXInLCBlcnJvck1lc3NhZ2UgfHwgJ+W8guatpeaTjeS9nOWksei0pScsIHsgZXJyb3IgfSk7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gIH0sXG5cbiAgLyoqXG4gICAqIOWuieWFqOaJp+ihjOWQjOatpeWHveaVsFxuICAgKiBAcGFyYW0gZm4g5ZCM5q2l5Ye95pWwXG4gICAqIEBwYXJhbSBlcnJvck1lc3NhZ2Ug6ZSZ6K+v5raI5oGvXG4gICAqIEByZXR1cm5zIOaJp+ihjOe7k+aenOaIlm51bGxcbiAgICovXG4gIHNhZmVTeW5jPFQ+KGZuOiAoKSA9PiBULCBlcnJvck1lc3NhZ2U/OiBzdHJpbmcpOiBUIHwgbnVsbCB7XG4gICAgdHJ5IHtcbiAgICAgIHJldHVybiBmbigpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBsb2dnZXIuZXJyb3IoJ0Vycm9ySGFuZGxlcicsIGVycm9yTWVzc2FnZSB8fCAn5ZCM5q2l5pON5L2c5aSx6LSlJywgeyBlcnJvciB9KTtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgfSxcbn07XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/同层手机/utils.ts\n")},"./src/同层手机/wallpaper-controller.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   WallpaperController: () => (/* binding */ WallpaperController)\n/* harmony export */ });\n/* harmony import */ var _wallpaper_selector__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./wallpaper-selector */ \"./src/同层手机/wallpaper-selector.ts\");\n// 壁纸控制器模块\n// 负责壁纸的应用和管理\n\nclass WallpaperController {\n    wallpaperManager;\n    themeManager;\n    wallpaperSelector;\n    constructor(themeManager) {\n        this.themeManager = themeManager;\n        this.wallpaperManager = themeManager.getWallpaperManager();\n        this.wallpaperSelector = new _wallpaper_selector__WEBPACK_IMPORTED_MODULE_0__.WallpaperSelector(this.wallpaperManager, this.themeManager);\n    }\n    // 应用壁纸到所有视图\n    applyWallpapers() {\n        const $chatView = $('#wechat-view');\n        const $homeScreen = $('#app-homescreen');\n        const $settingsView = $('#settings-view');\n        const currentTheme = this.themeManager.getCurrentTheme();\n        // 确保壁纸管理器使用当前主题名称\n        this.wallpaperManager.setCurrentThemeName(currentTheme.name);\n        // 应用聊天壁纸\n        const chatWallpaper = this.wallpaperManager.getCurrentWallpaper('chat');\n        this.wallpaperManager.applyWallpaperToElement($chatView[0], chatWallpaper, currentTheme.colors.defaultWallpapers.chat);\n        // 应用主屏幕壁纸\n        const homeWallpaper = this.wallpaperManager.getCurrentWallpaper('home');\n        this.wallpaperManager.applyWallpaperToElement($homeScreen[0], homeWallpaper, currentTheme.colors.defaultWallpapers.home);\n        // 应用设置壁纸\n        const settingsWallpaper = this.wallpaperManager.getCurrentWallpaper('settings');\n        this.wallpaperManager.applyWallpaperToElement($settingsView[0], settingsWallpaper, currentTheme.colors.defaultWallpapers.settings);\n    }\n    // 更改壁纸\n    changeWallpaper(viewType) {\n        // 显示壁纸选择器\n        this.wallpaperSelector.showWallpaperSelector(viewType, () => {\n            this.applyWallpapers();\n        });\n    }\n    // 初始化壁纸（在主题切换时调用）\n    initializeWallpapers(theme) {\n        // 确保应用当前主题的默认壁纸，但不覆盖用户已保存的壁纸设置\n        this.wallpaperManager.applyThemeDefaultWallpapers(theme);\n        this.applyWallpapers();\n    }\n    // 获取壁纸管理器（用于其他模块访问）\n    getWallpaperManager() {\n        return this.wallpaperManager;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMv5ZCM5bGC5omL5py6L3dhbGxwYXBlci1jb250cm9sbGVyLnRzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQUEsVUFBVTtBQUNWLGFBQWE7QUFHNEM7QUFFbEQsTUFBTSxtQkFBbUI7SUFDdEIsZ0JBQWdCLENBQW1CO0lBQ25DLFlBQVksQ0FBZTtJQUMzQixpQkFBaUIsQ0FBb0I7SUFFN0MsWUFBWSxZQUEwQjtRQUNwQyxJQUFJLENBQUMsWUFBWSxHQUFHLFlBQVksQ0FBQztRQUNqQyxJQUFJLENBQUMsZ0JBQWdCLEdBQUcsWUFBWSxDQUFDLG1CQUFtQixFQUFFLENBQUM7UUFDM0QsSUFBSSxDQUFDLGlCQUFpQixHQUFHLElBQUksa0VBQWlCLENBQUMsSUFBSSxDQUFDLGdCQUFnQixFQUFFLElBQUksQ0FBQyxZQUFZLENBQUMsQ0FBQztJQUMzRixDQUFDO0lBRUQsWUFBWTtJQUNaLGVBQWU7UUFDYixNQUFNLFNBQVMsR0FBRyxDQUFDLENBQUMsY0FBYyxDQUFDLENBQUM7UUFDcEMsTUFBTSxXQUFXLEdBQUcsQ0FBQyxDQUFDLGlCQUFpQixDQUFDLENBQUM7UUFDekMsTUFBTSxhQUFhLEdBQUcsQ0FBQyxDQUFDLGdCQUFnQixDQUFDLENBQUM7UUFDMUMsTUFBTSxZQUFZLEdBQUcsSUFBSSxDQUFDLFlBQVksQ0FBQyxlQUFlLEVBQUUsQ0FBQztRQUV6RCxrQkFBa0I7UUFDbEIsSUFBSSxDQUFDLGdCQUFnQixDQUFDLG1CQUFtQixDQUFDLFlBQVksQ0FBQyxJQUFJLENBQUMsQ0FBQztRQUU3RCxTQUFTO1FBQ1QsTUFBTSxhQUFhLEdBQUcsSUFBSSxDQUFDLGdCQUFnQixDQUFDLG1CQUFtQixDQUFDLE1BQU0sQ0FBQyxDQUFDO1FBQ3hFLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQyx1QkFBdUIsQ0FDM0MsU0FBUyxDQUFDLENBQUMsQ0FBQyxFQUNaLGFBQWEsRUFDYixZQUFZLENBQUMsTUFBTSxDQUFDLGlCQUFpQixDQUFDLElBQUksQ0FDM0MsQ0FBQztRQUVGLFVBQVU7UUFDVixNQUFNLGFBQWEsR0FBRyxJQUFJLENBQUMsZ0JBQWdCLENBQUMsbUJBQW1CLENBQUMsTUFBTSxDQUFDLENBQUM7UUFDeEUsSUFBSSxDQUFDLGdCQUFnQixDQUFDLHVCQUF1QixDQUMzQyxXQUFXLENBQUMsQ0FBQyxDQUFDLEVBQ2QsYUFBYSxFQUNiLFlBQVksQ0FBQyxNQUFNLENBQUMsaUJBQWlCLENBQUMsSUFBSSxDQUMzQyxDQUFDO1FBRUYsU0FBUztRQUNULE1BQU0saUJBQWlCLEdBQUcsSUFBSSxDQUFDLGdCQUFnQixDQUFDLG1CQUFtQixDQUFDLFVBQVUsQ0FBQyxDQUFDO1FBQ2hGLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQyx1QkFBdUIsQ0FDM0MsYUFBYSxDQUFDLENBQUMsQ0FBQyxFQUNoQixpQkFBaUIsRUFDakIsWUFBWSxDQUFDLE1BQU0sQ0FBQyxpQkFBaUIsQ0FBQyxRQUFRLENBQy9DLENBQUM7SUFDSixDQUFDO0lBRUQsT0FBTztJQUNQLGVBQWUsQ0FBQyxRQUFzQztRQUNwRCxVQUFVO1FBQ1YsSUFBSSxDQUFDLGlCQUFpQixDQUFDLHFCQUFxQixDQUFDLFFBQVEsRUFBRSxHQUFHLEVBQUU7WUFDMUQsSUFBSSxDQUFDLGVBQWUsRUFBRSxDQUFDO1FBQ3pCLENBQUMsQ0FBQyxDQUFDO0lBQ0wsQ0FBQztJQUVELGtCQUFrQjtJQUNsQixvQkFBb0IsQ0FBQyxLQUFZO1FBQy9CLCtCQUErQjtRQUMvQixJQUFJLENBQUMsZ0JBQWdCLENBQUMsMkJBQTJCLENBQUMsS0FBSyxDQUFDLENBQUM7UUFDekQsSUFBSSxDQUFDLGVBQWUsRUFBRSxDQUFDO0lBQ3pCLENBQUM7SUFFRCxvQkFBb0I7SUFDcEIsbUJBQW1CO1FBQ2pCLE9BQU8sSUFBSSxDQUFDLGdCQUFnQixDQUFDO0lBQy9CLENBQUM7Q0FDRiIsInNvdXJjZXMiOlsid2VicGFjazovL3RhdmVybl9oZWxwZXJfdGVtcGxhdGUvLi9zcmMv5ZCM5bGC5omL5py6L3dhbGxwYXBlci1jb250cm9sbGVyLnRzPyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyDlo4HnurjmjqfliLblmajmqKHlnZdcbi8vIOi0n+i0o+Wjgee6uOeahOW6lOeUqOWSjOeuoeeQhlxuXG5pbXBvcnQgeyBUaGVtZSwgVGhlbWVNYW5hZ2VyLCBXYWxscGFwZXJNYW5hZ2VyIH0gZnJvbSAnLi90aGVtZS1tYW5hZ2VyJztcbmltcG9ydCB7IFdhbGxwYXBlclNlbGVjdG9yIH0gZnJvbSAnLi93YWxscGFwZXItc2VsZWN0b3InO1xuXG5leHBvcnQgY2xhc3MgV2FsbHBhcGVyQ29udHJvbGxlciB7XG4gIHByaXZhdGUgd2FsbHBhcGVyTWFuYWdlcjogV2FsbHBhcGVyTWFuYWdlcjtcbiAgcHJpdmF0ZSB0aGVtZU1hbmFnZXI6IFRoZW1lTWFuYWdlcjtcbiAgcHJpdmF0ZSB3YWxscGFwZXJTZWxlY3RvcjogV2FsbHBhcGVyU2VsZWN0b3I7XG5cbiAgY29uc3RydWN0b3IodGhlbWVNYW5hZ2VyOiBUaGVtZU1hbmFnZXIpIHtcbiAgICB0aGlzLnRoZW1lTWFuYWdlciA9IHRoZW1lTWFuYWdlcjtcbiAgICB0aGlzLndhbGxwYXBlck1hbmFnZXIgPSB0aGVtZU1hbmFnZXIuZ2V0V2FsbHBhcGVyTWFuYWdlcigpO1xuICAgIHRoaXMud2FsbHBhcGVyU2VsZWN0b3IgPSBuZXcgV2FsbHBhcGVyU2VsZWN0b3IodGhpcy53YWxscGFwZXJNYW5hZ2VyLCB0aGlzLnRoZW1lTWFuYWdlcik7XG4gIH1cblxuICAvLyDlupTnlKjlo4HnurjliLDmiYDmnInop4blm75cbiAgYXBwbHlXYWxscGFwZXJzKCk6IHZvaWQge1xuICAgIGNvbnN0ICRjaGF0VmlldyA9ICQoJyN3ZWNoYXQtdmlldycpO1xuICAgIGNvbnN0ICRob21lU2NyZWVuID0gJCgnI2FwcC1ob21lc2NyZWVuJyk7XG4gICAgY29uc3QgJHNldHRpbmdzVmlldyA9ICQoJyNzZXR0aW5ncy12aWV3Jyk7XG4gICAgY29uc3QgY3VycmVudFRoZW1lID0gdGhpcy50aGVtZU1hbmFnZXIuZ2V0Q3VycmVudFRoZW1lKCk7XG5cbiAgICAvLyDnoa7kv53lo4HnurjnrqHnkIblmajkvb/nlKjlvZPliY3kuLvpopjlkI3np7BcbiAgICB0aGlzLndhbGxwYXBlck1hbmFnZXIuc2V0Q3VycmVudFRoZW1lTmFtZShjdXJyZW50VGhlbWUubmFtZSk7XG5cbiAgICAvLyDlupTnlKjogYrlpKnlo4HnurhcbiAgICBjb25zdCBjaGF0V2FsbHBhcGVyID0gdGhpcy53YWxscGFwZXJNYW5hZ2VyLmdldEN1cnJlbnRXYWxscGFwZXIoJ2NoYXQnKTtcbiAgICB0aGlzLndhbGxwYXBlck1hbmFnZXIuYXBwbHlXYWxscGFwZXJUb0VsZW1lbnQoXG4gICAgICAkY2hhdFZpZXdbMF0sXG4gICAgICBjaGF0V2FsbHBhcGVyLFxuICAgICAgY3VycmVudFRoZW1lLmNvbG9ycy5kZWZhdWx0V2FsbHBhcGVycy5jaGF0LFxuICAgICk7XG5cbiAgICAvLyDlupTnlKjkuLvlsY/luZXlo4HnurhcbiAgICBjb25zdCBob21lV2FsbHBhcGVyID0gdGhpcy53YWxscGFwZXJNYW5hZ2VyLmdldEN1cnJlbnRXYWxscGFwZXIoJ2hvbWUnKTtcbiAgICB0aGlzLndhbGxwYXBlck1hbmFnZXIuYXBwbHlXYWxscGFwZXJUb0VsZW1lbnQoXG4gICAgICAkaG9tZVNjcmVlblswXSxcbiAgICAgIGhvbWVXYWxscGFwZXIsXG4gICAgICBjdXJyZW50VGhlbWUuY29sb3JzLmRlZmF1bHRXYWxscGFwZXJzLmhvbWUsXG4gICAgKTtcblxuICAgIC8vIOW6lOeUqOiuvue9ruWjgee6uFxuICAgIGNvbnN0IHNldHRpbmdzV2FsbHBhcGVyID0gdGhpcy53YWxscGFwZXJNYW5hZ2VyLmdldEN1cnJlbnRXYWxscGFwZXIoJ3NldHRpbmdzJyk7XG4gICAgdGhpcy53YWxscGFwZXJNYW5hZ2VyLmFwcGx5V2FsbHBhcGVyVG9FbGVtZW50KFxuICAgICAgJHNldHRpbmdzVmlld1swXSxcbiAgICAgIHNldHRpbmdzV2FsbHBhcGVyLFxuICAgICAgY3VycmVudFRoZW1lLmNvbG9ycy5kZWZhdWx0V2FsbHBhcGVycy5zZXR0aW5ncyxcbiAgICApO1xuICB9XG5cbiAgLy8g5pu05pS55aOB57q4XG4gIGNoYW5nZVdhbGxwYXBlcih2aWV3VHlwZTogJ2NoYXQnIHwgJ2hvbWUnIHwgJ3NldHRpbmdzJyk6IHZvaWQge1xuICAgIC8vIOaYvuekuuWjgee6uOmAieaLqeWZqFxuICAgIHRoaXMud2FsbHBhcGVyU2VsZWN0b3Iuc2hvd1dhbGxwYXBlclNlbGVjdG9yKHZpZXdUeXBlLCAoKSA9PiB7XG4gICAgICB0aGlzLmFwcGx5V2FsbHBhcGVycygpO1xuICAgIH0pO1xuICB9XG5cbiAgLy8g5Yid5aeL5YyW5aOB57q477yI5Zyo5Li76aKY5YiH5o2i5pe26LCD55So77yJXG4gIGluaXRpYWxpemVXYWxscGFwZXJzKHRoZW1lOiBUaGVtZSk6IHZvaWQge1xuICAgIC8vIOehruS/neW6lOeUqOW9k+WJjeS4u+mimOeahOm7mOiupOWjgee6uO+8jOS9huS4jeimhueblueUqOaIt+W3suS/neWtmOeahOWjgee6uOiuvue9rlxuICAgIHRoaXMud2FsbHBhcGVyTWFuYWdlci5hcHBseVRoZW1lRGVmYXVsdFdhbGxwYXBlcnModGhlbWUpO1xuICAgIHRoaXMuYXBwbHlXYWxscGFwZXJzKCk7XG4gIH1cblxuICAvLyDojrflj5blo4HnurjnrqHnkIblmajvvIjnlKjkuo7lhbbku5bmqKHlnZforr/pl67vvIlcbiAgZ2V0V2FsbHBhcGVyTWFuYWdlcigpOiBXYWxscGFwZXJNYW5hZ2VyIHtcbiAgICByZXR1cm4gdGhpcy53YWxscGFwZXJNYW5hZ2VyO1xuICB9XG59XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/同层手机/wallpaper-controller.ts\n")},"./src/同层手机/wallpaper-selector.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   WallpaperSelector: () => (/* binding */ WallpaperSelector)\n/* harmony export */ });\n// 壁纸选择器模块\n// 负责壁纸选择器UI的创建和管理\nclass WallpaperSelector {\n    wallpaperManager;\n    themeManager; // 主题管理器引用\n    constructor(wallpaperManager, themeManager) {\n        this.wallpaperManager = wallpaperManager;\n        this.themeManager = themeManager;\n    }\n    // 显示壁纸选择器\n    showWallpaperSelector(viewType, onApplyWallpaper) {\n        // 创建模态框\n        const modal = document.createElement('div');\n        modal.className = 'wallpaper-modal';\n        modal.style.cssText = `\n      position: fixed;\n      top: 0;\n      left: 0;\n      right: 0;\n      bottom: 0;\n      background-color: rgba(0, 0, 0, 0.7);\n      display: flex;\n      justify-content: center;\n      align-items: center;\n      z-index: 1000;\n    `;\n        // 创建内容容器\n        const container = document.createElement('div');\n        container.className = 'wallpaper-container';\n        container.style.cssText = `\n      background-color: white;\n      border-radius: 12px;\n      width: 90%;\n      max-width: 500px;\n      max-height: 80vh;\n      overflow-y: auto;\n      padding: 20px;\n      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);\n    `;\n        // 标题\n        const title = document.createElement('h2');\n        title.textContent = `选择${viewType === 'chat' ? '聊天' : viewType === 'home' ? '主屏幕' : '设置'}壁纸`;\n        title.style.cssText = `\n      margin-top: 0;\n      color: var(--text-primary);\n      font-size: 1.2rem;\n      text-align: center;\n      margin-bottom: 20px;\n    `;\n        container.appendChild(title);\n        // 创建选项卡\n        const tabs = this.createTabs(container);\n        container.appendChild(tabs);\n        // 创建各个选项卡内容\n        this.createBuiltinWallpaperTab(container, viewType, modal, onApplyWallpaper);\n        this.createSolidColorTab(container, viewType, modal, onApplyWallpaper);\n        this.createCustomWallpaperTab(container, viewType, modal, onApplyWallpaper);\n        this.createUploadTab(container, viewType, modal, onApplyWallpaper);\n        // 创建底部按钮\n        this.createBottomButtons(container, viewType, modal, onApplyWallpaper);\n        modal.appendChild(container);\n        document.body.appendChild(modal);\n    }\n    // 创建选项卡\n    createTabs(container) {\n        const tabs = document.createElement('div');\n        tabs.style.cssText = `\n      display: flex;\n      border-bottom: 1px solid ${document.body.classList.contains('dark-mode') ? '#3c3c3c' : '#eee'};\n      margin-bottom: 15px;\n    `;\n        const createTab = (label, id, isActive = false) => {\n            const tab = document.createElement('div');\n            tab.textContent = label;\n            tab.dataset.tabId = id;\n            tab.style.cssText = `\n        padding: 10px 15px;\n        cursor: pointer;\n        font-weight: ${isActive ? 'bold' : 'normal'};\n        color: ${isActive ? 'var(--primary-blue)' : 'var(--text-secondary)'};\n        border-bottom: ${isActive ? '2px solid var(--primary-blue)' : 'none'};\n        margin-bottom: -1px;\n      `;\n            tab.addEventListener('click', () => {\n                // 移除所有活动状态\n                tabs.querySelectorAll('div').forEach(t => {\n                    t.style.fontWeight = 'normal';\n                    t.style.color = 'var(--text-secondary)';\n                    t.style.borderBottom = 'none';\n                });\n                // 设置当前标签为活动状态\n                tab.style.fontWeight = 'bold';\n                tab.style.color = 'var(--primary-blue)';\n                tab.style.borderBottom = '2px solid var(--primary-blue)';\n                // 隐藏所有内容\n                container.querySelectorAll('.tab-content').forEach(c => {\n                    c.style.display = 'none';\n                });\n                // 显示选定的内容\n                const content = container.querySelector(`.tab-content[data-tab-id=\"${id}\"]`);\n                if (content) {\n                    content.style.display = 'block';\n                }\n            });\n            return tab;\n        };\n        tabs.appendChild(createTab('内置壁纸', 'builtin', true));\n        tabs.appendChild(createTab('纯色壁纸', 'solid'));\n        tabs.appendChild(createTab('自定义壁纸', 'custom'));\n        tabs.appendChild(createTab('上传壁纸', 'upload'));\n        return tabs;\n    }\n    // 创建内置壁纸选项卡\n    createBuiltinWallpaperTab(container, viewType, modal, onApplyWallpaper) {\n        const builtinContent = document.createElement('div');\n        builtinContent.className = 'tab-content';\n        builtinContent.dataset.tabId = 'builtin';\n        builtinContent.style.cssText = 'display: block;';\n        // 获取内置壁纸\n        const builtinWallpapers = this.wallpaperManager.getBuiltInWallpapers().filter(w => w.type === 'image');\n        // 创建壁纸网格\n        const builtinGrid = document.createElement('div');\n        builtinGrid.style.cssText = `\n      display: grid;\n      grid-template-columns: repeat(2, 1fr);\n      gap: 10px;\n    `;\n        builtinWallpapers.forEach(wallpaper => {\n            const wallpaperItem = this.createWallpaperItem(wallpaper, viewType, false, modal, onApplyWallpaper);\n            builtinGrid.appendChild(wallpaperItem);\n        });\n        builtinContent.appendChild(builtinGrid);\n        container.appendChild(builtinContent);\n    }\n    // 创建纯色壁纸选项卡\n    createSolidColorTab(container, viewType, modal, onApplyWallpaper) {\n        const solidContent = document.createElement('div');\n        solidContent.className = 'tab-content';\n        solidContent.dataset.tabId = 'solid';\n        solidContent.style.cssText = 'display: none;';\n        // 获取纯色壁纸\n        const solidWallpapers = this.wallpaperManager.getBuiltInWallpapers().filter(w => w.type === 'color');\n        // 创建壁纸网格\n        const solidGrid = document.createElement('div');\n        solidGrid.style.cssText = `\n      display: grid;\n      grid-template-columns: repeat(4, 1fr);\n      gap: 10px;\n    `;\n        solidWallpapers.forEach(wallpaper => {\n            const wallpaperItem = this.createWallpaperItem(wallpaper, viewType, false, modal, onApplyWallpaper);\n            solidGrid.appendChild(wallpaperItem);\n        });\n        solidContent.appendChild(solidGrid);\n        // 添加颜色选择器\n        this.addColorPicker(solidContent, viewType, modal, onApplyWallpaper);\n        container.appendChild(solidContent);\n    }\n    // 创建自定义壁纸选项卡\n    createCustomWallpaperTab(container, viewType, modal, onApplyWallpaper) {\n        const customContent = document.createElement('div');\n        customContent.className = 'tab-content';\n        customContent.dataset.tabId = 'custom';\n        customContent.style.cssText = 'display: none;';\n        // 获取自定义壁纸\n        const customWallpapers = this.wallpaperManager.getCustomWallpapers();\n        if (customWallpapers.length === 0) {\n            const noCustomWallpapers = document.createElement('p');\n            noCustomWallpapers.textContent = '没有自定义壁纸。请在\"上传壁纸\"选项卡中添加。';\n            noCustomWallpapers.style.cssText = `\n        text-align: center;\n        color: var(--text-secondary);\n        margin: 30px 0;\n      `;\n            customContent.appendChild(noCustomWallpapers);\n        }\n        else {\n            // 创建壁纸网格\n            const customGrid = document.createElement('div');\n            customGrid.style.cssText = `\n        display: grid;\n        grid-template-columns: repeat(2, 1fr);\n        gap: 10px;\n      `;\n            customWallpapers.forEach(wallpaper => {\n                const wallpaperItem = this.createWallpaperItem(wallpaper, viewType, true, modal, onApplyWallpaper);\n                customGrid.appendChild(wallpaperItem);\n            });\n            customContent.appendChild(customGrid);\n        }\n        container.appendChild(customContent);\n    }\n    // 创建上传选项卡\n    createUploadTab(container, viewType, modal, onApplyWallpaper) {\n        const uploadContent = document.createElement('div');\n        uploadContent.className = 'tab-content';\n        uploadContent.dataset.tabId = 'upload';\n        uploadContent.style.cssText = 'display: none; padding: 10px 0;';\n        // 从本地上传部分\n        this.createLocalUploadSection(uploadContent, viewType, modal, onApplyWallpaper);\n        // 从URL添加部分\n        this.createUrlUploadSection(uploadContent, viewType, modal, onApplyWallpaper);\n        container.appendChild(uploadContent);\n    }\n    // 添加颜色选择器\n    addColorPicker(solidContent, viewType, modal, onApplyWallpaper) {\n        const colorPickerContainer = document.createElement('div');\n        colorPickerContainer.style.cssText = `\n      margin-top: 20px;\n      padding-top: 15px;\n      border-top: 1px solid ${document.body.classList.contains('dark-mode') ? '#3c3c3c' : '#eee'};\n    `;\n        const colorPickerLabel = document.createElement('p');\n        colorPickerLabel.textContent = '自定义颜色:';\n        colorPickerLabel.style.cssText = `\n      margin: 0 0 10px 0;\n      font-size: 0.9rem;\n      color: var(--text-primary);\n    `;\n        const colorPicker = document.createElement('input');\n        colorPicker.type = 'color';\n        colorPicker.value = '#ffffff';\n        colorPicker.style.cssText = `\n      width: 100%;\n      height: 40px;\n      border: none;\n      border-radius: 5px;\n      cursor: pointer;\n    `;\n        const colorNameInput = document.createElement('input');\n        colorNameInput.type = 'text';\n        colorNameInput.placeholder = '颜色名称 (可选)';\n        colorNameInput.style.cssText = `\n      width: 100%;\n      padding: 8px;\n      margin-top: 10px;\n      border: 1px solid #ddd;\n      border-radius: 5px;\n      box-sizing: border-box;\n    `;\n        const addColorBtn = document.createElement('button');\n        addColorBtn.textContent = '添加此颜色';\n        addColorBtn.style.cssText = `\n      width: 100%;\n      padding: 10px;\n      margin-top: 10px;\n      background: var(--primary-blue);\n      color: white;\n      border: none;\n      border-radius: 5px;\n      cursor: pointer;\n      font-weight: 500;\n    `;\n        addColorBtn.addEventListener('click', () => {\n            const color = colorPicker.value;\n            const name = colorNameInput.value.trim() || `颜色 ${color}`;\n            const newWallpaper = this.wallpaperManager.createSolidColorWallpaper(color, name);\n            if (newWallpaper) {\n                // 应用新壁纸\n                this.wallpaperManager.setWallpaper(viewType, newWallpaper);\n                onApplyWallpaper();\n                // 关闭模态框\n                document.body.removeChild(modal);\n            }\n            else {\n                // 显示错误消息\n                alert('创建纯色壁纸失败，请确保颜色格式正确。');\n            }\n        });\n        colorPickerContainer.appendChild(colorPickerLabel);\n        colorPickerContainer.appendChild(colorPicker);\n        colorPickerContainer.appendChild(colorNameInput);\n        colorPickerContainer.appendChild(addColorBtn);\n        solidContent.appendChild(colorPickerContainer);\n    }\n    // 创建本地上传部分\n    createLocalUploadSection(uploadContent, viewType, modal, onApplyWallpaper) {\n        const localUploadSection = document.createElement('div');\n        localUploadSection.style.cssText = 'margin-bottom: 20px;';\n        const localUploadTitle = document.createElement('h3');\n        localUploadTitle.textContent = '从本地上传';\n        localUploadTitle.style.cssText = `\n      font-size: 1rem;\n      color: var(--text-primary);\n      margin: 0 0 10px 0;\n    `;\n        const fileInput = document.createElement('input');\n        fileInput.type = 'file';\n        fileInput.accept = 'image/*';\n        fileInput.style.cssText = `\n      width: 100%;\n      padding: 10px;\n      margin-bottom: 10px;\n      border: 1px solid #ddd;\n      border-radius: 5px;\n      box-sizing: border-box;\n    `;\n        const uploadBtn = document.createElement('button');\n        uploadBtn.textContent = '上传并应用';\n        uploadBtn.style.cssText = `\n      width: 100%;\n      padding: 10px;\n      background: var(--primary-blue);\n      color: white;\n      border: none;\n      border-radius: 5px;\n      cursor: pointer;\n      font-weight: 500;\n    `;\n        uploadBtn.addEventListener('click', async () => {\n            if (fileInput.files && fileInput.files[0]) {\n                const file = fileInput.files[0];\n                const newWallpaper = await this.wallpaperManager.createWallpaperFromFile(file);\n                if (newWallpaper) {\n                    // 应用新壁纸\n                    this.wallpaperManager.setWallpaper(viewType, newWallpaper);\n                    onApplyWallpaper();\n                    // 关闭模态框\n                    document.body.removeChild(modal);\n                }\n            }\n        });\n        localUploadSection.appendChild(localUploadTitle);\n        localUploadSection.appendChild(fileInput);\n        localUploadSection.appendChild(uploadBtn);\n        uploadContent.appendChild(localUploadSection);\n    }\n    // 创建URL上传部分\n    createUrlUploadSection(uploadContent, viewType, modal, onApplyWallpaper) {\n        const urlUploadSection = document.createElement('div');\n        urlUploadSection.style.cssText = `\n      margin-top: 30px;\n      padding-top: 20px;\n      border-top: 1px solid ${document.body.classList.contains('dark-mode') ? '#3c3c3c' : '#eee'};\n    `;\n        const urlUploadTitle = document.createElement('h3');\n        urlUploadTitle.textContent = '从URL添加';\n        urlUploadTitle.style.cssText = `\n      font-size: 1rem;\n      color: var(--text-primary);\n      margin: 0 0 10px 0;\n    `;\n        const urlInput = document.createElement('input');\n        urlInput.type = 'text';\n        urlInput.placeholder = '输入图片URL';\n        urlInput.style.cssText = `\n      width: 100%;\n      padding: 10px;\n      margin-bottom: 10px;\n      border: 1px solid #ddd;\n      border-radius: 5px;\n      box-sizing: border-box;\n    `;\n        const nameInput = document.createElement('input');\n        nameInput.type = 'text';\n        nameInput.placeholder = '壁纸名称 (可选)';\n        nameInput.style.cssText = `\n      width: 100%;\n      padding: 10px;\n      margin-bottom: 10px;\n      border: 1px solid #ddd;\n      border-radius: 5px;\n      box-sizing: border-box;\n    `;\n        const addUrlBtn = document.createElement('button');\n        addUrlBtn.textContent = '添加并应用';\n        addUrlBtn.style.cssText = `\n      width: 100%;\n      padding: 10px;\n      background: var(--primary-blue);\n      color: white;\n      border: none;\n      border-radius: 5px;\n      cursor: pointer;\n      font-weight: 500;\n    `;\n        addUrlBtn.addEventListener('click', async () => {\n            const url = urlInput.value.trim();\n            const name = nameInput.value.trim() || 'URL壁纸';\n            if (url) {\n                const newWallpaper = await this.wallpaperManager.createWallpaperFromUrl(url, name);\n                if (newWallpaper) {\n                    // 应用新壁纸\n                    this.wallpaperManager.setWallpaper(viewType, newWallpaper);\n                    onApplyWallpaper();\n                    // 关闭模态框\n                    document.body.removeChild(modal);\n                }\n                else {\n                    alert('无效的URL。请输入有效的图片URL。');\n                }\n            }\n        });\n        urlUploadSection.appendChild(urlUploadTitle);\n        urlUploadSection.appendChild(urlInput);\n        urlUploadSection.appendChild(nameInput);\n        urlUploadSection.appendChild(addUrlBtn);\n        uploadContent.appendChild(urlUploadSection);\n    }\n    // 创建壁纸项\n    createWallpaperItem(wallpaper, viewType, showDeleteButton, modal, onApplyWallpaper) {\n        const item = document.createElement('div');\n        item.style.cssText = `\n      border-radius: 8px;\n      overflow: hidden;\n      position: relative;\n      cursor: pointer;\n      box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);\n      transition: transform 0.2s ease, box-shadow 0.2s ease;\n    `;\n        // 预览\n        const preview = document.createElement('div');\n        preview.style.cssText = `\n      width: 100%;\n      height: 100px;\n      display: flex;\n      align-items: center;\n      justify-content: center;\n    `;\n        if (wallpaper.type === 'color') {\n            // 确保纯色壁纸预览正确\n            preview.style.backgroundImage = 'none';\n            preview.style.backgroundColor = wallpaper.value;\n        }\n        else {\n            preview.style.backgroundImage = `url(\"${wallpaper.value}\")`;\n            preview.style.backgroundSize = 'cover';\n            preview.style.backgroundPosition = 'center';\n        }\n        // 名称\n        const name = document.createElement('div');\n        name.textContent = wallpaper.name;\n        name.style.cssText = `\n      padding: 8px;\n      text-align: center;\n      font-size: 0.8rem;\n      color: var(--text-primary);\n      background-color: ${document.body.classList.contains('dark-mode') ? 'rgba(42, 42, 42, 0.9)' : 'rgba(255, 255, 255, 0.9)'};\n    `;\n        // 删除按钮\n        if (showDeleteButton) {\n            const deleteBtn = document.createElement('button');\n            deleteBtn.innerHTML = '&times;';\n            deleteBtn.style.cssText = `\n        position: absolute;\n        top: 5px;\n        right: 5px;\n        width: 20px;\n        height: 20px;\n        border-radius: 50%;\n        background-color: rgba(255, 0, 0, 0.7);\n        color: white;\n        border: none;\n        font-size: 14px;\n        line-height: 1;\n        cursor: pointer;\n        z-index: 1;\n      `;\n            deleteBtn.addEventListener('click', e => {\n                e.stopPropagation();\n                if (confirm('确定要删除这个壁纸吗？')) {\n                    this.wallpaperManager.deleteCustomWallpaper(wallpaper.id);\n                    // 如果当前正在使用这个壁纸，则重置为默认\n                    const currentWallpaper = this.wallpaperManager.getCurrentWallpaper(viewType);\n                    if (currentWallpaper && currentWallpaper.id === wallpaper.id) {\n                        this.wallpaperManager.setWallpaper(viewType, null);\n                        onApplyWallpaper();\n                    }\n                    // 移除元素\n                    item.parentElement?.removeChild(item);\n                }\n            });\n            item.appendChild(deleteBtn);\n        }\n        // 点击应用壁纸\n        item.addEventListener('click', () => {\n            // 确保壁纸管理器使用当前主题名称\n            const currentTheme = this.themeManager.getCurrentTheme();\n            this.wallpaperManager.setCurrentThemeName(currentTheme.name);\n            this.wallpaperManager.setWallpaper(viewType, wallpaper);\n            onApplyWallpaper();\n            // 关闭模态框\n            document.body.removeChild(modal);\n        });\n        item.appendChild(preview);\n        item.appendChild(name);\n        return item;\n    }\n    // 创建底部按钮\n    createBottomButtons(container, viewType, modal, onApplyWallpaper) {\n        const buttonsContainer = document.createElement('div');\n        buttonsContainer.style.cssText = `\n      display: flex;\n      justify-content: space-between;\n      margin-top: 20px;\n      padding-top: 15px;\n      border-top: 1px solid ${document.body.classList.contains('dark-mode') ? '#3c3c3c' : '#eee'};\n    `;\n        const resetBtn = document.createElement('button');\n        resetBtn.textContent = '恢复默认';\n        resetBtn.style.cssText = `\n      padding: 10px 15px;\n      background: ${document.body.classList.contains('dark-mode') ? '#3c3c3c' : '#f1f5f9'};\n      color: var(--text-primary);\n      border: none;\n      border-radius: 5px;\n      cursor: pointer;\n      font-weight: 500;\n    `;\n        resetBtn.addEventListener('click', () => {\n            // 移除自定义壁纸设置，将使用主题默认壁纸\n            this.wallpaperManager.setWallpaper(viewType, null);\n            onApplyWallpaper();\n            // 关闭模态框\n            document.body.removeChild(modal);\n        });\n        const closeBtn = document.createElement('button');\n        closeBtn.textContent = '关闭';\n        closeBtn.style.cssText = `\n      padding: 10px 20px;\n      background: var(--primary-blue);\n      color: white;\n      border: none;\n      border-radius: 5px;\n      cursor: pointer;\n      font-weight: 500;\n    `;\n        closeBtn.addEventListener('click', () => {\n            document.body.removeChild(modal);\n        });\n        buttonsContainer.appendChild(resetBtn);\n        buttonsContainer.appendChild(closeBtn);\n        container.appendChild(buttonsContainer);\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMv5ZCM5bGC5omL5py6L3dhbGxwYXBlci1zZWxlY3Rvci50cyIsIm1hcHBpbmdzIjoiOzs7O0FBQUEsVUFBVTtBQUNWLGtCQUFrQjtBQUlYLE1BQU0saUJBQWlCO0lBQ3BCLGdCQUFnQixDQUFtQjtJQUNuQyxZQUFZLENBQU0sQ0FBQyxVQUFVO0lBRXJDLFlBQVksZ0JBQWtDLEVBQUUsWUFBaUI7UUFDL0QsSUFBSSxDQUFDLGdCQUFnQixHQUFHLGdCQUFnQixDQUFDO1FBQ3pDLElBQUksQ0FBQyxZQUFZLEdBQUcsWUFBWSxDQUFDO0lBQ25DLENBQUM7SUFFRCxVQUFVO0lBQ1YscUJBQXFCLENBQUMsUUFBc0MsRUFBRSxnQkFBNEI7UUFDeEYsUUFBUTtRQUNSLE1BQU0sS0FBSyxHQUFHLFFBQVEsQ0FBQyxhQUFhLENBQUMsS0FBSyxDQUFDLENBQUM7UUFDNUMsS0FBSyxDQUFDLFNBQVMsR0FBRyxpQkFBaUIsQ0FBQztRQUNwQyxLQUFLLENBQUMsS0FBSyxDQUFDLE9BQU8sR0FBRzs7Ozs7Ozs7Ozs7S0FXckIsQ0FBQztRQUVGLFNBQVM7UUFDVCxNQUFNLFNBQVMsR0FBRyxRQUFRLENBQUMsYUFBYSxDQUFDLEtBQUssQ0FBQyxDQUFDO1FBQ2hELFNBQVMsQ0FBQyxTQUFTLEdBQUcscUJBQXFCLENBQUM7UUFDNUMsU0FBUyxDQUFDLEtBQUssQ0FBQyxPQUFPLEdBQUc7Ozs7Ozs7OztLQVN6QixDQUFDO1FBRUYsS0FBSztRQUNMLE1BQU0sS0FBSyxHQUFHLFFBQVEsQ0FBQyxhQUFhLENBQUMsSUFBSSxDQUFDLENBQUM7UUFDM0MsS0FBSyxDQUFDLFdBQVcsR0FBRyxLQUFLLFFBQVEsS0FBSyxNQUFNLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsUUFBUSxLQUFLLE1BQU0sQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxJQUFJLElBQUksQ0FBQztRQUM3RixLQUFLLENBQUMsS0FBSyxDQUFDLE9BQU8sR0FBRzs7Ozs7O0tBTXJC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Q0FBQyxDQUFDO1FBRUgsZ0JBQWdCLENBQUMsV0FBVyxDQUFDLFFBQVEsQ0FBQyxDQUFDO1FBQ3ZDLGdCQUFnQixDQUFDLFdBQVcsQ0FBQyxRQUFRLENBQUMsQ0FBQztRQUN2QyxTQUFTLENBQUMsV0FBVyxDQUFDLGdCQUFnQixDQUFDLENBQUM7SUFDMUMsQ0FBQztDQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdGF2ZXJuX2hlbHBlcl90ZW1wbGF0ZS8uL3NyYy/lkIzlsYLmiYvmnLovd2FsbHBhcGVyLXNlbGVjdG9yLnRzPyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyDlo4HnurjpgInmi6nlmajmqKHlnZdcbi8vIOi0n+i0o+Wjgee6uOmAieaLqeWZqFVJ55qE5Yib5bu65ZKM566h55CGXG5cbmltcG9ydCB7IFdhbGxwYXBlciwgV2FsbHBhcGVyTWFuYWdlciB9IGZyb20gJy4vdGhlbWUtbWFuYWdlcic7XG5cbmV4cG9ydCBjbGFzcyBXYWxscGFwZXJTZWxlY3RvciB7XG4gIHByaXZhdGUgd2FsbHBhcGVyTWFuYWdlcjogV2FsbHBhcGVyTWFuYWdlcjtcbiAgcHJpdmF0ZSB0aGVtZU1hbmFnZXI6IGFueTsgLy8g5Li76aKY566h55CG5Zmo5byV55SoXG5cbiAgY29uc3RydWN0b3Iod2FsbHBhcGVyTWFuYWdlcjogV2FsbHBhcGVyTWFuYWdlciwgdGhlbWVNYW5hZ2VyOiBhbnkpIHtcbiAgICB0aGlzLndhbGxwYXBlck1hbmFnZXIgPSB3YWxscGFwZXJNYW5hZ2VyO1xuICAgIHRoaXMudGhlbWVNYW5hZ2VyID0gdGhlbWVNYW5hZ2VyO1xuICB9XG5cbiAgLy8g5pi+56S65aOB57q46YCJ5oup5ZmoXG4gIHNob3dXYWxscGFwZXJTZWxlY3Rvcih2aWV3VHlwZTogJ2NoYXQnIHwgJ2hvbWUnIHwgJ3NldHRpbmdzJywgb25BcHBseVdhbGxwYXBlcjogKCkgPT4gdm9pZCk6IHZvaWQge1xuICAgIC8vIOWIm+W7uuaooeaAgeahhlxuICAgIGNvbnN0IG1vZGFsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgbW9kYWwuY2xhc3NOYW1lID0gJ3dhbGxwYXBlci1tb2RhbCc7XG4gICAgbW9kYWwuc3R5bGUuY3NzVGV4dCA9IGBcbiAgICAgIHBvc2l0aW9uOiBmaXhlZDtcbiAgICAgIHRvcDogMDtcbiAgICAgIGxlZnQ6IDA7XG4gICAgICByaWdodDogMDtcbiAgICAgIGJvdHRvbTogMDtcbiAgICAgIGJhY2tncm91bmQtY29sb3I6IHJnYmEoMCwgMCwgMCwgMC43KTtcbiAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcbiAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAgICB6LWluZGV4OiAxMDAwO1xuICAgIGA7XG5cbiAgICAvLyDliJvlu7rlhoXlrrnlrrnlmahcbiAgICBjb25zdCBjb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICBjb250YWluZXIuY2xhc3NOYW1lID0gJ3dhbGxwYXBlci1jb250YWluZXInO1xuICAgIGNvbnRhaW5lci5zdHlsZS5jc3NUZXh0ID0gYFxuICAgICAgYmFja2dyb3VuZC1jb2xvcjogd2hpdGU7XG4gICAgICBib3JkZXItcmFkaXVzOiAxMnB4O1xuICAgICAgd2lkdGg6IDkwJTtcbiAgICAgIG1heC13aWR0aDogNTAwcHg7XG4gICAgICBtYXgtaGVpZ2h0OiA4MHZoO1xuICAgICAgb3ZlcmZsb3cteTogYXV0bztcbiAgICAgIHBhZGRpbmc6IDIwcHg7XG4gICAgICBib3gtc2hhZG93OiAwIDVweCAxNXB4IHJnYmEoMCwgMCwgMCwgMC4zKTtcbiAgICBgO1xuXG4gICAgLy8g5qCH6aKYXG4gICAgY29uc3QgdGl0bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdoMicpO1xuICAgIHRpdGxlLnRleHRDb250ZW50ID0gYOmAieaLqSR7dmlld1R5cGUgPT09ICdjaGF0JyA/ICfogYrlpKknIDogdmlld1R5cGUgPT09ICdob21lJyA/ICfkuLvlsY/luZUnIDogJ+iuvue9rid95aOB57q4YDtcbiAgICB0aXRsZS5zdHlsZS5jc3NUZXh0ID0gYFxuICAgICAgbWFyZ2luLXRvcDogMDtcbiAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LXByaW1hcnkpO1xuICAgICAgZm9udC1zaXplOiAxLjJyZW07XG4gICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XG4gICAgICBtYXJnaW4tYm90dG9tOiAyMHB4O1xuICAgIGA7XG4gICAgY29udGFpbmVyLmFwcGVuZENoaWxkKHRpdGxlKTtcblxuICAgIC8vIOWIm+W7uumAiemhueWNoVxuICAgIGNvbnN0IHRhYnMgPSB0aGlzLmNyZWF0ZVRhYnMoY29udGFpbmVyKTtcbiAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQodGFicyk7XG5cbiAgICAvLyDliJvlu7rlkITkuKrpgInpobnljaHlhoXlrrlcbiAgICB0aGlzLmNyZWF0ZUJ1aWx0aW5XYWxscGFwZXJUYWIoY29udGFpbmVyLCB2aWV3VHlwZSwgbW9kYWwsIG9uQXBwbHlXYWxscGFwZXIpO1xuICAgIHRoaXMuY3JlYXRlU29saWRDb2xvclRhYihjb250YWluZXIsIHZpZXdUeXBlLCBtb2RhbCwgb25BcHBseVdhbGxwYXBlcik7XG4gICAgdGhpcy5jcmVhdGVDdXN0b21XYWxscGFwZXJUYWIoY29udGFpbmVyLCB2aWV3VHlwZSwgbW9kYWwsIG9uQXBwbHlXYWxscGFwZXIpO1xuICAgIHRoaXMuY3JlYXRlVXBsb2FkVGFiKGNvbnRhaW5lciwgdmlld1R5cGUsIG1vZGFsLCBvbkFwcGx5V2FsbHBhcGVyKTtcblxuICAgIC8vIOWIm+W7uuW6lemDqOaMiemSrlxuICAgIHRoaXMuY3JlYXRlQm90dG9tQnV0dG9ucyhjb250YWluZXIsIHZpZXdUeXBlLCBtb2RhbCwgb25BcHBseVdhbGxwYXBlcik7XG5cbiAgICBtb2RhbC5hcHBlbmRDaGlsZChjb250YWluZXIpO1xuICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQobW9kYWwpO1xuICB9XG5cbiAgLy8g5Yib5bu66YCJ6aG55Y2hXG4gIHByaXZhdGUgY3JlYXRlVGFicyhjb250YWluZXI6IEhUTUxFbGVtZW50KTogSFRNTEVsZW1lbnQge1xuICAgIGNvbnN0IHRhYnMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICB0YWJzLnN0eWxlLmNzc1RleHQgPSBgXG4gICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkICR7ZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QuY29udGFpbnMoJ2RhcmstbW9kZScpID8gJyMzYzNjM2MnIDogJyNlZWUnfTtcbiAgICAgIG1hcmdpbi1ib3R0b206IDE1cHg7XG4gICAgYDtcblxuICAgIGNvbnN0IGNyZWF0ZVRhYiA9IChsYWJlbDogc3RyaW5nLCBpZDogc3RyaW5nLCBpc0FjdGl2ZTogYm9vbGVhbiA9IGZhbHNlKSA9PiB7XG4gICAgICBjb25zdCB0YWIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgIHRhYi50ZXh0Q29udGVudCA9IGxhYmVsO1xuICAgICAgdGFiLmRhdGFzZXQudGFiSWQgPSBpZDtcbiAgICAgIHRhYi5zdHlsZS5jc3NUZXh0ID0gYFxuICAgICAgICBwYWRkaW5nOiAxMHB4IDE1cHg7XG4gICAgICAgIGN1cnNvcjogcG9pbnRlcjtcbiAgICAgICAgZm9udC13ZWlnaHQ6ICR7aXNBY3RpdmUgPyAnYm9sZCcgOiAnbm9ybWFsJ307XG4gICAgICAgIGNvbG9yOiAke2lzQWN0aXZlID8gJ3ZhcigtLXByaW1hcnktYmx1ZSknIDogJ3ZhcigtLXRleHQtc2Vjb25kYXJ5KSd9O1xuICAgICAgICBib3JkZXItYm90dG9tOiAke2lzQWN0aXZlID8gJzJweCBzb2xpZCB2YXIoLS1wcmltYXJ5LWJsdWUpJyA6ICdub25lJ307XG4gICAgICAgIG1hcmdpbi1ib3R0b206IC0xcHg7XG4gICAgICBgO1xuICAgICAgdGFiLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICAvLyDnp7vpmaTmiYDmnInmtLvliqjnirbmgIFcbiAgICAgICAgdGFicy5xdWVyeVNlbGVjdG9yQWxsKCdkaXYnKS5mb3JFYWNoKHQgPT4ge1xuICAgICAgICAgIHQuc3R5bGUuZm9udFdlaWdodCA9ICdub3JtYWwnO1xuICAgICAgICAgIHQuc3R5bGUuY29sb3IgPSAndmFyKC0tdGV4dC1zZWNvbmRhcnkpJztcbiAgICAgICAgICB0LnN0eWxlLmJvcmRlckJvdHRvbSA9ICdub25lJztcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8g6K6+572u5b2T5YmN5qCH562+5Li65rS75Yqo54q25oCBXG4gICAgICAgIHRhYi5zdHlsZS5mb250V2VpZ2h0ID0gJ2JvbGQnO1xuICAgICAgICB0YWIuc3R5bGUuY29sb3IgPSAndmFyKC0tcHJpbWFyeS1ibHVlKSc7XG4gICAgICAgIHRhYi5zdHlsZS5ib3JkZXJCb3R0b20gPSAnMnB4IHNvbGlkIHZhcigtLXByaW1hcnktYmx1ZSknO1xuXG4gICAgICAgIC8vIOmakOiXj+aJgOacieWGheWuuVxuICAgICAgICBjb250YWluZXIucXVlcnlTZWxlY3RvckFsbCgnLnRhYi1jb250ZW50JykuZm9yRWFjaChjID0+IHtcbiAgICAgICAgICAoYyBhcyBIVE1MRWxlbWVudCkuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8g5pi+56S66YCJ5a6a55qE5YaF5a65XG4gICAgICAgIGNvbnN0IGNvbnRlbnQgPSBjb250YWluZXIucXVlcnlTZWxlY3RvcihgLnRhYi1jb250ZW50W2RhdGEtdGFiLWlkPVwiJHtpZH1cIl1gKTtcbiAgICAgICAgaWYgKGNvbnRlbnQpIHtcbiAgICAgICAgICAoY29udGVudCBhcyBIVE1MRWxlbWVudCkuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIHRhYjtcbiAgICB9O1xuXG4gICAgdGFicy5hcHBlbmRDaGlsZChjcmVhdGVUYWIoJ+WGhee9ruWjgee6uCcsICdidWlsdGluJywgdHJ1ZSkpO1xuICAgIHRhYnMuYXBwZW5kQ2hpbGQoY3JlYXRlVGFiKCfnuq/oibLlo4HnurgnLCAnc29saWQnKSk7XG4gICAgdGFicy5hcHBlbmRDaGlsZChjcmVhdGVUYWIoJ+iHquWumuS5ieWjgee6uCcsICdjdXN0b20nKSk7XG4gICAgdGFicy5hcHBlbmRDaGlsZChjcmVhdGVUYWIoJ+S4iuS8oOWjgee6uCcsICd1cGxvYWQnKSk7XG5cbiAgICByZXR1cm4gdGFicztcbiAgfVxuXG4gIC8vIOWIm+W7uuWGhee9ruWjgee6uOmAiemhueWNoVxuICBwcml2YXRlIGNyZWF0ZUJ1aWx0aW5XYWxscGFwZXJUYWIoXG4gICAgY29udGFpbmVyOiBIVE1MRWxlbWVudCxcbiAgICB2aWV3VHlwZTogJ2NoYXQnIHwgJ2hvbWUnIHwgJ3NldHRpbmdzJyxcbiAgICBtb2RhbDogSFRNTEVsZW1lbnQsXG4gICAgb25BcHBseVdhbGxwYXBlcjogKCkgPT4gdm9pZCxcbiAgKTogdm9pZCB7XG4gICAgY29uc3QgYnVpbHRpbkNvbnRlbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICBidWlsdGluQ29udGVudC5jbGFzc05hbWUgPSAndGFiLWNvbnRlbnQnO1xuICAgIGJ1aWx0aW5Db250ZW50LmRhdGFzZXQudGFiSWQgPSAnYnVpbHRpbic7XG4gICAgYnVpbHRpbkNvbnRlbnQuc3R5bGUuY3NzVGV4dCA9ICdkaXNwbGF5OiBibG9jazsnO1xuXG4gICAgLy8g6I635Y+W5YaF572u5aOB57q4XG4gICAgY29uc3QgYnVpbHRpbldhbGxwYXBlcnMgPSB0aGlzLndhbGxwYXBlck1hbmFnZXIuZ2V0QnVpbHRJbldhbGxwYXBlcnMoKS5maWx0ZXIodyA9PiB3LnR5cGUgPT09ICdpbWFnZScpO1xuXG4gICAgLy8g5Yib5bu65aOB57q4572R5qC8XG4gICAgY29uc3QgYnVpbHRpbkdyaWQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICBidWlsdGluR3JpZC5zdHlsZS5jc3NUZXh0ID0gYFxuICAgICAgZGlzcGxheTogZ3JpZDtcbiAgICAgIGdyaWQtdGVtcGxhdGUtY29sdW1uczogcmVwZWF0KDIsIDFmcik7XG4gICAgICBnYXA6IDEwcHg7XG4gICAgYDtcblxuICAgIGJ1aWx0aW5XYWxscGFwZXJzLmZvckVhY2god2FsbHBhcGVyID0+IHtcbiAgICAgIGNvbnN0IHdhbGxwYXBlckl0ZW0gPSB0aGlzLmNyZWF0ZVdhbGxwYXBlckl0ZW0od2FsbHBhcGVyLCB2aWV3VHlwZSwgZmFsc2UsIG1vZGFsLCBvbkFwcGx5V2FsbHBhcGVyKTtcbiAgICAgIGJ1aWx0aW5HcmlkLmFwcGVuZENoaWxkKHdhbGxwYXBlckl0ZW0pO1xuICAgIH0pO1xuXG4gICAgYnVpbHRpbkNvbnRlbnQuYXBwZW5kQ2hpbGQoYnVpbHRpbkdyaWQpO1xuICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZChidWlsdGluQ29udGVudCk7XG4gIH1cblxuICAvLyDliJvlu7rnuq/oibLlo4HnurjpgInpobnljaFcbiAgcHJpdmF0ZSBjcmVhdGVTb2xpZENvbG9yVGFiKFxuICAgIGNvbnRhaW5lcjogSFRNTEVsZW1lbnQsXG4gICAgdmlld1R5cGU6ICdjaGF0JyB8ICdob21lJyB8ICdzZXR0aW5ncycsXG4gICAgbW9kYWw6IEhUTUxFbGVtZW50LFxuICAgIG9uQXBwbHlXYWxscGFwZXI6ICgpID0+IHZvaWQsXG4gICk6IHZvaWQge1xuICAgIGNvbnN0IHNvbGlkQ29udGVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIHNvbGlkQ29udGVudC5jbGFzc05hbWUgPSAndGFiLWNvbnRlbnQnO1xuICAgIHNvbGlkQ29udGVudC5kYXRhc2V0LnRhYklkID0gJ3NvbGlkJztcbiAgICBzb2xpZENvbnRlbnQuc3R5bGUuY3NzVGV4dCA9ICdkaXNwbGF5OiBub25lOyc7XG5cbiAgICAvLyDojrflj5bnuq/oibLlo4HnurhcbiAgICBjb25zdCBzb2xpZFdhbGxwYXBlcnMgPSB0aGlzLndhbGxwYXBlck1hbmFnZXIuZ2V0QnVpbHRJbldhbGxwYXBlcnMoKS5maWx0ZXIodyA9PiB3LnR5cGUgPT09ICdjb2xvcicpO1xuXG4gICAgLy8g5Yib5bu65aOB57q4572R5qC8XG4gICAgY29uc3Qgc29saWRHcmlkID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgc29saWRHcmlkLnN0eWxlLmNzc1RleHQgPSBgXG4gICAgICBkaXNwbGF5OiBncmlkO1xuICAgICAgZ3JpZC10ZW1wbGF0ZS1jb2x1bW5zOiByZXBlYXQoNCwgMWZyKTtcbiAgICAgIGdhcDogMTBweDtcbiAgICBgO1xuXG4gICAgc29saWRXYWxscGFwZXJzLmZvckVhY2god2FsbHBhcGVyID0+IHtcbiAgICAgIGNvbnN0IHdhbGxwYXBlckl0ZW0gPSB0aGlzLmNyZWF0ZVdhbGxwYXBlckl0ZW0od2FsbHBhcGVyLCB2aWV3VHlwZSwgZmFsc2UsIG1vZGFsLCBvbkFwcGx5V2FsbHBhcGVyKTtcbiAgICAgIHNvbGlkR3JpZC5hcHBlbmRDaGlsZCh3YWxscGFwZXJJdGVtKTtcbiAgICB9KTtcblxuICAgIHNvbGlkQ29udGVudC5hcHBlbmRDaGlsZChzb2xpZEdyaWQpO1xuXG4gICAgLy8g5re75Yqg6aKc6Imy6YCJ5oup5ZmoXG4gICAgdGhpcy5hZGRDb2xvclBpY2tlcihzb2xpZENvbnRlbnQsIHZpZXdUeXBlLCBtb2RhbCwgb25BcHBseVdhbGxwYXBlcik7XG5cbiAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQoc29saWRDb250ZW50KTtcbiAgfVxuXG4gIC8vIOWIm+W7uuiHquWumuS5ieWjgee6uOmAiemhueWNoVxuICBwcml2YXRlIGNyZWF0ZUN1c3RvbVdhbGxwYXBlclRhYihcbiAgICBjb250YWluZXI6IEhUTUxFbGVtZW50LFxuICAgIHZpZXdUeXBlOiAnY2hhdCcgfCAnaG9tZScgfCAnc2V0dGluZ3MnLFxuICAgIG1vZGFsOiBIVE1MRWxlbWVudCxcbiAgICBvbkFwcGx5V2FsbHBhcGVyOiAoKSA9PiB2b2lkLFxuICApOiB2b2lkIHtcbiAgICBjb25zdCBjdXN0b21Db250ZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgY3VzdG9tQ29udGVudC5jbGFzc05hbWUgPSAndGFiLWNvbnRlbnQnO1xuICAgIGN1c3RvbUNvbnRlbnQuZGF0YXNldC50YWJJZCA9ICdjdXN0b20nO1xuICAgIGN1c3RvbUNvbnRlbnQuc3R5bGUuY3NzVGV4dCA9ICdkaXNwbGF5OiBub25lOyc7XG5cbiAgICAvLyDojrflj5boh6rlrprkuYnlo4HnurhcbiAgICBjb25zdCBjdXN0b21XYWxscGFwZXJzID0gdGhpcy53YWxscGFwZXJNYW5hZ2VyLmdldEN1c3RvbVdhbGxwYXBlcnMoKTtcblxuICAgIGlmIChjdXN0b21XYWxscGFwZXJzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgY29uc3Qgbm9DdXN0b21XYWxscGFwZXJzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgncCcpO1xuICAgICAgbm9DdXN0b21XYWxscGFwZXJzLnRleHRDb250ZW50ID0gJ+ayoeacieiHquWumuS5ieWjgee6uOOAguivt+WcqFwi5LiK5Lyg5aOB57q4XCLpgInpobnljaHkuK3mt7vliqDjgIInO1xuICAgICAgbm9DdXN0b21XYWxscGFwZXJzLnN0eWxlLmNzc1RleHQgPSBgXG4gICAgICAgIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgICAgICAgY29sb3I6IHZhcigtLXRleHQtc2Vjb25kYXJ5KTtcbiAgICAgICAgbWFyZ2luOiAzMHB4IDA7XG4gICAgICBgO1xuICAgICAgY3VzdG9tQ29udGVudC5hcHBlbmRDaGlsZChub0N1c3RvbVdhbGxwYXBlcnMpO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyDliJvlu7rlo4HnurjnvZHmoLxcbiAgICAgIGNvbnN0IGN1c3RvbUdyaWQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgIGN1c3RvbUdyaWQuc3R5bGUuY3NzVGV4dCA9IGBcbiAgICAgICAgZGlzcGxheTogZ3JpZDtcbiAgICAgICAgZ3JpZC10ZW1wbGF0ZS1jb2x1bW5zOiByZXBlYXQoMiwgMWZyKTtcbiAgICAgICAgZ2FwOiAxMHB4O1xuICAgICAgYDtcblxuICAgICAgY3VzdG9tV2FsbHBhcGVycy5mb3JFYWNoKHdhbGxwYXBlciA9PiB7XG4gICAgICAgIGNvbnN0IHdhbGxwYXBlckl0ZW0gPSB0aGlzLmNyZWF0ZVdhbGxwYXBlckl0ZW0od2FsbHBhcGVyLCB2aWV3VHlwZSwgdHJ1ZSwgbW9kYWwsIG9uQXBwbHlXYWxscGFwZXIpO1xuICAgICAgICBjdXN0b21HcmlkLmFwcGVuZENoaWxkKHdhbGxwYXBlckl0ZW0pO1xuICAgICAgfSk7XG5cbiAgICAgIGN1c3RvbUNvbnRlbnQuYXBwZW5kQ2hpbGQoY3VzdG9tR3JpZCk7XG4gICAgfVxuXG4gICAgY29udGFpbmVyLmFwcGVuZENoaWxkKGN1c3RvbUNvbnRlbnQpO1xuICB9XG5cbiAgLy8g5Yib5bu65LiK5Lyg6YCJ6aG55Y2hXG4gIHByaXZhdGUgY3JlYXRlVXBsb2FkVGFiKFxuICAgIGNvbnRhaW5lcjogSFRNTEVsZW1lbnQsXG4gICAgdmlld1R5cGU6ICdjaGF0JyB8ICdob21lJyB8ICdzZXR0aW5ncycsXG4gICAgbW9kYWw6IEhUTUxFbGVtZW50LFxuICAgIG9uQXBwbHlXYWxscGFwZXI6ICgpID0+IHZvaWQsXG4gICk6IHZvaWQge1xuICAgIGNvbnN0IHVwbG9hZENvbnRlbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICB1cGxvYWRDb250ZW50LmNsYXNzTmFtZSA9ICd0YWItY29udGVudCc7XG4gICAgdXBsb2FkQ29udGVudC5kYXRhc2V0LnRhYklkID0gJ3VwbG9hZCc7XG4gICAgdXBsb2FkQ29udGVudC5zdHlsZS5jc3NUZXh0ID0gJ2Rpc3BsYXk6IG5vbmU7IHBhZGRpbmc6IDEwcHggMDsnO1xuXG4gICAgLy8g5LuO5pys5Zyw5LiK5Lyg6YOo5YiGXG4gICAgdGhpcy5jcmVhdGVMb2NhbFVwbG9hZFNlY3Rpb24odXBsb2FkQ29udGVudCwgdmlld1R5cGUsIG1vZGFsLCBvbkFwcGx5V2FsbHBhcGVyKTtcblxuICAgIC8vIOS7jlVSTOa3u+WKoOmDqOWIhlxuICAgIHRoaXMuY3JlYXRlVXJsVXBsb2FkU2VjdGlvbih1cGxvYWRDb250ZW50LCB2aWV3VHlwZSwgbW9kYWwsIG9uQXBwbHlXYWxscGFwZXIpO1xuXG4gICAgY29udGFpbmVyLmFwcGVuZENoaWxkKHVwbG9hZENvbnRlbnQpO1xuICB9XG5cbiAgLy8g5re75Yqg6aKc6Imy6YCJ5oup5ZmoXG4gIHByaXZhdGUgYWRkQ29sb3JQaWNrZXIoXG4gICAgc29saWRDb250ZW50OiBIVE1MRWxlbWVudCxcbiAgICB2aWV3VHlwZTogJ2NoYXQnIHwgJ2hvbWUnIHwgJ3NldHRpbmdzJyxcbiAgICBtb2RhbDogSFRNTEVsZW1lbnQsXG4gICAgb25BcHBseVdhbGxwYXBlcjogKCkgPT4gdm9pZCxcbiAgKTogdm9pZCB7XG4gICAgY29uc3QgY29sb3JQaWNrZXJDb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICBjb2xvclBpY2tlckNvbnRhaW5lci5zdHlsZS5jc3NUZXh0ID0gYFxuICAgICAgbWFyZ2luLXRvcDogMjBweDtcbiAgICAgIHBhZGRpbmctdG9wOiAxNXB4O1xuICAgICAgYm9yZGVyLXRvcDogMXB4IHNvbGlkICR7ZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QuY29udGFpbnMoJ2RhcmstbW9kZScpID8gJyMzYzNjM2MnIDogJyNlZWUnfTtcbiAgICBgO1xuXG4gICAgY29uc3QgY29sb3JQaWNrZXJMYWJlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3AnKTtcbiAgICBjb2xvclBpY2tlckxhYmVsLnRleHRDb250ZW50ID0gJ+iHquWumuS5ieminOiJsjonO1xuICAgIGNvbG9yUGlja2VyTGFiZWwuc3R5bGUuY3NzVGV4dCA9IGBcbiAgICAgIG1hcmdpbjogMCAwIDEwcHggMDtcbiAgICAgIGZvbnQtc2l6ZTogMC45cmVtO1xuICAgICAgY29sb3I6IHZhcigtLXRleHQtcHJpbWFyeSk7XG4gICAgYDtcblxuICAgIGNvbnN0IGNvbG9yUGlja2VyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW5wdXQnKTtcbiAgICBjb2xvclBpY2tlci50eXBlID0gJ2NvbG9yJztcbiAgICBjb2xvclBpY2tlci52YWx1ZSA9ICcjZmZmZmZmJztcbiAgICBjb2xvclBpY2tlci5zdHlsZS5jc3NUZXh0ID0gYFxuICAgICAgd2lkdGg6IDEwMCU7XG4gICAgICBoZWlnaHQ6IDQwcHg7XG4gICAgICBib3JkZXI6IG5vbmU7XG4gICAgICBib3JkZXItcmFkaXVzOiA1cHg7XG4gICAgICBjdXJzb3I6IHBvaW50ZXI7XG4gICAgYDtcblxuICAgIGNvbnN0IGNvbG9yTmFtZUlucHV0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW5wdXQnKTtcbiAgICBjb2xvck5hbWVJbnB1dC50eXBlID0gJ3RleHQnO1xuICAgIGNvbG9yTmFtZUlucHV0LnBsYWNlaG9sZGVyID0gJ+minOiJsuWQjeensCAo5Y+v6YCJKSc7XG4gICAgY29sb3JOYW1lSW5wdXQuc3R5bGUuY3NzVGV4dCA9IGBcbiAgICAgIHdpZHRoOiAxMDAlO1xuICAgICAgcGFkZGluZzogOHB4O1xuICAgICAgbWFyZ2luLXRvcDogMTBweDtcbiAgICAgIGJvcmRlcjogMXB4IHNvbGlkICNkZGQ7XG4gICAgICBib3JkZXItcmFkaXVzOiA1cHg7XG4gICAgICBib3gtc2l6aW5nOiBib3JkZXItYm94O1xuICAgIGA7XG5cbiAgICBjb25zdCBhZGRDb2xvckJ0biA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpO1xuICAgIGFkZENvbG9yQnRuLnRleHRDb250ZW50ID0gJ+a3u+WKoOatpOminOiJsic7XG4gICAgYWRkQ29sb3JCdG4uc3R5bGUuY3NzVGV4dCA9IGBcbiAgICAgIHdpZHRoOiAxMDAlO1xuICAgICAgcGFkZGluZzogMTBweDtcbiAgICAgIG1hcmdpbi10b3A6IDEwcHg7XG4gICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1wcmltYXJ5LWJsdWUpO1xuICAgICAgY29sb3I6IHdoaXRlO1xuICAgICAgYm9yZGVyOiBub25lO1xuICAgICAgYm9yZGVyLXJhZGl1czogNXB4O1xuICAgICAgY3Vyc29yOiBwb2ludGVyO1xuICAgICAgZm9udC13ZWlnaHQ6IDUwMDtcbiAgICBgO1xuXG4gICAgYWRkQ29sb3JCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICBjb25zdCBjb2xvciA9IGNvbG9yUGlja2VyLnZhbHVlO1xuICAgICAgY29uc3QgbmFtZSA9IGNvbG9yTmFtZUlucHV0LnZhbHVlLnRyaW0oKSB8fCBg6aKc6ImyICR7Y29sb3J9YDtcblxuICAgICAgY29uc3QgbmV3V2FsbHBhcGVyID0gdGhpcy53YWxscGFwZXJNYW5hZ2VyLmNyZWF0ZVNvbGlkQ29sb3JXYWxscGFwZXIoY29sb3IsIG5hbWUpO1xuXG4gICAgICBpZiAobmV3V2FsbHBhcGVyKSB7XG4gICAgICAgIC8vIOW6lOeUqOaWsOWjgee6uFxuICAgICAgICB0aGlzLndhbGxwYXBlck1hbmFnZXIuc2V0V2FsbHBhcGVyKHZpZXdUeXBlLCBuZXdXYWxscGFwZXIpO1xuICAgICAgICBvbkFwcGx5V2FsbHBhcGVyKCk7XG5cbiAgICAgICAgLy8g5YWz6Zet5qih5oCB5qGGXG4gICAgICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQobW9kYWwpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8g5pi+56S66ZSZ6K+v5raI5oGvXG4gICAgICAgIGFsZXJ0KCfliJvlu7rnuq/oibLlo4HnurjlpLHotKXvvIzor7fnoa7kv53popzoibLmoLzlvI/mraPnoa7jgIInKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIGNvbG9yUGlja2VyQ29udGFpbmVyLmFwcGVuZENoaWxkKGNvbG9yUGlja2VyTGFiZWwpO1xuICAgIGNvbG9yUGlja2VyQ29udGFpbmVyLmFwcGVuZENoaWxkKGNvbG9yUGlja2VyKTtcbiAgICBjb2xvclBpY2tlckNvbnRhaW5lci5hcHBlbmRDaGlsZChjb2xvck5hbWVJbnB1dCk7XG4gICAgY29sb3JQaWNrZXJDb250YWluZXIuYXBwZW5kQ2hpbGQoYWRkQ29sb3JCdG4pO1xuXG4gICAgc29saWRDb250ZW50LmFwcGVuZENoaWxkKGNvbG9yUGlja2VyQ29udGFpbmVyKTtcbiAgfVxuXG4gIC8vIOWIm+W7uuacrOWcsOS4iuS8oOmDqOWIhlxuICBwcml2YXRlIGNyZWF0ZUxvY2FsVXBsb2FkU2VjdGlvbihcbiAgICB1cGxvYWRDb250ZW50OiBIVE1MRWxlbWVudCxcbiAgICB2aWV3VHlwZTogJ2NoYXQnIHwgJ2hvbWUnIHwgJ3NldHRpbmdzJyxcbiAgICBtb2RhbDogSFRNTEVsZW1lbnQsXG4gICAgb25BcHBseVdhbGxwYXBlcjogKCkgPT4gdm9pZCxcbiAgKTogdm9pZCB7XG4gICAgY29uc3QgbG9jYWxVcGxvYWRTZWN0aW9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgbG9jYWxVcGxvYWRTZWN0aW9uLnN0eWxlLmNzc1RleHQgPSAnbWFyZ2luLWJvdHRvbTogMjBweDsnO1xuXG4gICAgY29uc3QgbG9jYWxVcGxvYWRUaXRsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2gzJyk7XG4gICAgbG9jYWxVcGxvYWRUaXRsZS50ZXh0Q29udGVudCA9ICfku47mnKzlnLDkuIrkvKAnO1xuICAgIGxvY2FsVXBsb2FkVGl0bGUuc3R5bGUuY3NzVGV4dCA9IGBcbiAgICAgIGZvbnQtc2l6ZTogMXJlbTtcbiAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LXByaW1hcnkpO1xuICAgICAgbWFyZ2luOiAwIDAgMTBweCAwO1xuICAgIGA7XG5cbiAgICBjb25zdCBmaWxlSW5wdXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbnB1dCcpO1xuICAgIGZpbGVJbnB1dC50eXBlID0gJ2ZpbGUnO1xuICAgIGZpbGVJbnB1dC5hY2NlcHQgPSAnaW1hZ2UvKic7XG4gICAgZmlsZUlucHV0LnN0eWxlLmNzc1RleHQgPSBgXG4gICAgICB3aWR0aDogMTAwJTtcbiAgICAgIHBhZGRpbmc6IDEwcHg7XG4gICAgICBtYXJnaW4tYm90dG9tOiAxMHB4O1xuICAgICAgYm9yZGVyOiAxcHggc29saWQgI2RkZDtcbiAgICAgIGJvcmRlci1yYWRpdXM6IDVweDtcbiAgICAgIGJveC1zaXppbmc6IGJvcmRlci1ib3g7XG4gICAgYDtcblxuICAgIGNvbnN0IHVwbG9hZEJ0biA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpO1xuICAgIHVwbG9hZEJ0bi50ZXh0Q29udGVudCA9ICfkuIrkvKDlubblupTnlKgnO1xuICAgIHVwbG9hZEJ0bi5zdHlsZS5jc3NUZXh0ID0gYFxuICAgICAgd2lkdGg6IDEwMCU7XG4gICAgICBwYWRkaW5nOiAxMHB4O1xuICAgICAgYmFja2dyb3VuZDogdmFyKC0tcHJpbWFyeS1ibHVlKTtcbiAgICAgIGNvbG9yOiB3aGl0ZTtcbiAgICAgIGJvcmRlcjogbm9uZTtcbiAgICAgIGJvcmRlci1yYWRpdXM6IDVweDtcbiAgICAgIGN1cnNvcjogcG9pbnRlcjtcbiAgICAgIGZvbnQtd2VpZ2h0OiA1MDA7XG4gICAgYDtcblxuICAgIHVwbG9hZEJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGFzeW5jICgpID0+IHtcbiAgICAgIGlmIChmaWxlSW5wdXQuZmlsZXMgJiYgZmlsZUlucHV0LmZpbGVzWzBdKSB7XG4gICAgICAgIGNvbnN0IGZpbGUgPSBmaWxlSW5wdXQuZmlsZXNbMF07XG4gICAgICAgIGNvbnN0IG5ld1dhbGxwYXBlciA9IGF3YWl0IHRoaXMud2FsbHBhcGVyTWFuYWdlci5jcmVhdGVXYWxscGFwZXJGcm9tRmlsZShmaWxlKTtcblxuICAgICAgICBpZiAobmV3V2FsbHBhcGVyKSB7XG4gICAgICAgICAgLy8g5bqU55So5paw5aOB57q4XG4gICAgICAgICAgdGhpcy53YWxscGFwZXJNYW5hZ2VyLnNldFdhbGxwYXBlcih2aWV3VHlwZSwgbmV3V2FsbHBhcGVyKTtcbiAgICAgICAgICBvbkFwcGx5V2FsbHBhcGVyKCk7XG5cbiAgICAgICAgICAvLyDlhbPpl63mqKHmgIHmoYZcbiAgICAgICAgICBkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKG1vZGFsKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pO1xuXG4gICAgbG9jYWxVcGxvYWRTZWN0aW9uLmFwcGVuZENoaWxkKGxvY2FsVXBsb2FkVGl0bGUpO1xuICAgIGxvY2FsVXBsb2FkU2VjdGlvbi5hcHBlbmRDaGlsZChmaWxlSW5wdXQpO1xuICAgIGxvY2FsVXBsb2FkU2VjdGlvbi5hcHBlbmRDaGlsZCh1cGxvYWRCdG4pO1xuICAgIHVwbG9hZENvbnRlbnQuYXBwZW5kQ2hpbGQobG9jYWxVcGxvYWRTZWN0aW9uKTtcbiAgfVxuXG4gIC8vIOWIm+W7ulVSTOS4iuS8oOmDqOWIhlxuICBwcml2YXRlIGNyZWF0ZVVybFVwbG9hZFNlY3Rpb24oXG4gICAgdXBsb2FkQ29udGVudDogSFRNTEVsZW1lbnQsXG4gICAgdmlld1R5cGU6ICdjaGF0JyB8ICdob21lJyB8ICdzZXR0aW5ncycsXG4gICAgbW9kYWw6IEhUTUxFbGVtZW50LFxuICAgIG9uQXBwbHlXYWxscGFwZXI6ICgpID0+IHZvaWQsXG4gICk6IHZvaWQge1xuICAgIGNvbnN0IHVybFVwbG9hZFNlY3Rpb24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICB1cmxVcGxvYWRTZWN0aW9uLnN0eWxlLmNzc1RleHQgPSBgXG4gICAgICBtYXJnaW4tdG9wOiAzMHB4O1xuICAgICAgcGFkZGluZy10b3A6IDIwcHg7XG4gICAgICBib3JkZXItdG9wOiAxcHggc29saWQgJHtkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC5jb250YWlucygnZGFyay1tb2RlJykgPyAnIzNjM2MzYycgOiAnI2VlZSd9O1xuICAgIGA7XG5cbiAgICBjb25zdCB1cmxVcGxvYWRUaXRsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2gzJyk7XG4gICAgdXJsVXBsb2FkVGl0bGUudGV4dENvbnRlbnQgPSAn5LuOVVJM5re75YqgJztcbiAgICB1cmxVcGxvYWRUaXRsZS5zdHlsZS5jc3NUZXh0ID0gYFxuICAgICAgZm9udC1zaXplOiAxcmVtO1xuICAgICAgY29sb3I6IHZhcigtLXRleHQtcHJpbWFyeSk7XG4gICAgICBtYXJnaW46IDAgMCAxMHB4IDA7XG4gICAgYDtcblxuICAgIGNvbnN0IHVybElucHV0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW5wdXQnKTtcbiAgICB1cmxJbnB1dC50eXBlID0gJ3RleHQnO1xuICAgIHVybElucHV0LnBsYWNlaG9sZGVyID0gJ+i+k+WFpeWbvueJh1VSTCc7XG4gICAgdXJsSW5wdXQuc3R5bGUuY3NzVGV4dCA9IGBcbiAgICAgIHdpZHRoOiAxMDAlO1xuICAgICAgcGFkZGluZzogMTBweDtcbiAgICAgIG1hcmdpbi1ib3R0b206IDEwcHg7XG4gICAgICBib3JkZXI6IDFweCBzb2xpZCAjZGRkO1xuICAgICAgYm9yZGVyLXJhZGl1czogNXB4O1xuICAgICAgYm94LXNpemluZzogYm9yZGVyLWJveDtcbiAgICBgO1xuXG4gICAgY29uc3QgbmFtZUlucHV0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW5wdXQnKTtcbiAgICBuYW1lSW5wdXQudHlwZSA9ICd0ZXh0JztcbiAgICBuYW1lSW5wdXQucGxhY2Vob2xkZXIgPSAn5aOB57q45ZCN56ewICjlj6/pgIkpJztcbiAgICBuYW1lSW5wdXQuc3R5bGUuY3NzVGV4dCA9IGBcbiAgICAgIHdpZHRoOiAxMDAlO1xuICAgICAgcGFkZGluZzogMTBweDtcbiAgICAgIG1hcmdpbi1ib3R0b206IDEwcHg7XG4gICAgICBib3JkZXI6IDFweCBzb2xpZCAjZGRkO1xuICAgICAgYm9yZGVyLXJhZGl1czogNXB4O1xuICAgICAgYm94LXNpemluZzogYm9yZGVyLWJveDtcbiAgICBgO1xuXG4gICAgY29uc3QgYWRkVXJsQnRuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJyk7XG4gICAgYWRkVXJsQnRuLnRleHRDb250ZW50ID0gJ+a3u+WKoOW5tuW6lOeUqCc7XG4gICAgYWRkVXJsQnRuLnN0eWxlLmNzc1RleHQgPSBgXG4gICAgICB3aWR0aDogMTAwJTtcbiAgICAgIHBhZGRpbmc6IDEwcHg7XG4gICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1wcmltYXJ5LWJsdWUpO1xuICAgICAgY29sb3I6IHdoaXRlO1xuICAgICAgYm9yZGVyOiBub25lO1xuICAgICAgYm9yZGVyLXJhZGl1czogNXB4O1xuICAgICAgY3Vyc29yOiBwb2ludGVyO1xuICAgICAgZm9udC13ZWlnaHQ6IDUwMDtcbiAgICBgO1xuXG4gICAgYWRkVXJsQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgdXJsID0gdXJsSW5wdXQudmFsdWUudHJpbSgpO1xuICAgICAgY29uc3QgbmFtZSA9IG5hbWVJbnB1dC52YWx1ZS50cmltKCkgfHwgJ1VSTOWjgee6uCc7XG5cbiAgICAgIGlmICh1cmwpIHtcbiAgICAgICAgY29uc3QgbmV3V2FsbHBhcGVyID0gYXdhaXQgdGhpcy53YWxscGFwZXJNYW5hZ2VyLmNyZWF0ZVdhbGxwYXBlckZyb21VcmwodXJsLCBuYW1lKTtcblxuICAgICAgICBpZiAobmV3V2FsbHBhcGVyKSB7XG4gICAgICAgICAgLy8g5bqU55So5paw5aOB57q4XG4gICAgICAgICAgdGhpcy53YWxscGFwZXJNYW5hZ2VyLnNldFdhbGxwYXBlcih2aWV3VHlwZSwgbmV3V2FsbHBhcGVyKTtcbiAgICAgICAgICBvbkFwcGx5V2FsbHBhcGVyKCk7XG5cbiAgICAgICAgICAvLyDlhbPpl63mqKHmgIHmoYZcbiAgICAgICAgICBkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKG1vZGFsKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBhbGVydCgn5peg5pWI55qEVVJM44CC6K+36L6T5YWl5pyJ5pWI55qE5Zu+54mHVVJM44CCJyk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KTtcblxuICAgIHVybFVwbG9hZFNlY3Rpb24uYXBwZW5kQ2hpbGQodXJsVXBsb2FkVGl0bGUpO1xuICAgIHVybFVwbG9hZFNlY3Rpb24uYXBwZW5kQ2hpbGQodXJsSW5wdXQpO1xuICAgIHVybFVwbG9hZFNlY3Rpb24uYXBwZW5kQ2hpbGQobmFtZUlucHV0KTtcbiAgICB1cmxVcGxvYWRTZWN0aW9uLmFwcGVuZENoaWxkKGFkZFVybEJ0bik7XG4gICAgdXBsb2FkQ29udGVudC5hcHBlbmRDaGlsZCh1cmxVcGxvYWRTZWN0aW9uKTtcbiAgfVxuXG4gIC8vIOWIm+W7uuWjgee6uOmhuVxuICBwcml2YXRlIGNyZWF0ZVdhbGxwYXBlckl0ZW0oXG4gICAgd2FsbHBhcGVyOiBXYWxscGFwZXIsXG4gICAgdmlld1R5cGU6ICdjaGF0JyB8ICdob21lJyB8ICdzZXR0aW5ncycsXG4gICAgc2hvd0RlbGV0ZUJ1dHRvbjogYm9vbGVhbixcbiAgICBtb2RhbDogSFRNTEVsZW1lbnQsXG4gICAgb25BcHBseVdhbGxwYXBlcjogKCkgPT4gdm9pZCxcbiAgKTogSFRNTEVsZW1lbnQge1xuICAgIGNvbnN0IGl0ZW0gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICBpdGVtLnN0eWxlLmNzc1RleHQgPSBgXG4gICAgICBib3JkZXItcmFkaXVzOiA4cHg7XG4gICAgICBvdmVyZmxvdzogaGlkZGVuO1xuICAgICAgcG9zaXRpb246IHJlbGF0aXZlO1xuICAgICAgY3Vyc29yOiBwb2ludGVyO1xuICAgICAgYm94LXNoYWRvdzogMCAycHggNXB4IHJnYmEoMCwgMCwgMCwgMC4xKTtcbiAgICAgIHRyYW5zaXRpb246IHRyYW5zZm9ybSAwLjJzIGVhc2UsIGJveC1zaGFkb3cgMC4ycyBlYXNlO1xuICAgIGA7XG5cbiAgICAvLyDpooTop4hcbiAgICBjb25zdCBwcmV2aWV3ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgcHJldmlldy5zdHlsZS5jc3NUZXh0ID0gYFxuICAgICAgd2lkdGg6IDEwMCU7XG4gICAgICBoZWlnaHQ6IDEwMHB4O1xuICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcbiAgICBgO1xuXG4gICAgaWYgKHdhbGxwYXBlci50eXBlID09PSAnY29sb3InKSB7XG4gICAgICAvLyDnoa7kv53nuq/oibLlo4HnurjpooTop4jmraPnoa5cbiAgICAgIHByZXZpZXcuc3R5bGUuYmFja2dyb3VuZEltYWdlID0gJ25vbmUnO1xuICAgICAgcHJldmlldy5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSB3YWxscGFwZXIudmFsdWU7XG4gICAgfSBlbHNlIHtcbiAgICAgIHByZXZpZXcuc3R5bGUuYmFja2dyb3VuZEltYWdlID0gYHVybChcIiR7d2FsbHBhcGVyLnZhbHVlfVwiKWA7XG4gICAgICBwcmV2aWV3LnN0eWxlLmJhY2tncm91bmRTaXplID0gJ2NvdmVyJztcbiAgICAgIHByZXZpZXcuc3R5bGUuYmFja2dyb3VuZFBvc2l0aW9uID0gJ2NlbnRlcic7XG4gICAgfVxuXG4gICAgLy8g5ZCN56ewXG4gICAgY29uc3QgbmFtZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIG5hbWUudGV4dENvbnRlbnQgPSB3YWxscGFwZXIubmFtZTtcbiAgICBuYW1lLnN0eWxlLmNzc1RleHQgPSBgXG4gICAgICBwYWRkaW5nOiA4cHg7XG4gICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XG4gICAgICBmb250LXNpemU6IDAuOHJlbTtcbiAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LXByaW1hcnkpO1xuICAgICAgYmFja2dyb3VuZC1jb2xvcjogJHtcbiAgICAgICAgZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QuY29udGFpbnMoJ2RhcmstbW9kZScpID8gJ3JnYmEoNDIsIDQyLCA0MiwgMC45KScgOiAncmdiYSgyNTUsIDI1NSwgMjU1LCAwLjkpJ1xuICAgICAgfTtcbiAgICBgO1xuXG4gICAgLy8g5Yig6Zmk5oyJ6ZKuXG4gICAgaWYgKHNob3dEZWxldGVCdXR0b24pIHtcbiAgICAgIGNvbnN0IGRlbGV0ZUJ0biA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpO1xuICAgICAgZGVsZXRlQnRuLmlubmVySFRNTCA9ICcmdGltZXM7JztcbiAgICAgIGRlbGV0ZUJ0bi5zdHlsZS5jc3NUZXh0ID0gYFxuICAgICAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgICAgIHRvcDogNXB4O1xuICAgICAgICByaWdodDogNXB4O1xuICAgICAgICB3aWR0aDogMjBweDtcbiAgICAgICAgaGVpZ2h0OiAyMHB4O1xuICAgICAgICBib3JkZXItcmFkaXVzOiA1MCU7XG4gICAgICAgIGJhY2tncm91bmQtY29sb3I6IHJnYmEoMjU1LCAwLCAwLCAwLjcpO1xuICAgICAgICBjb2xvcjogd2hpdGU7XG4gICAgICAgIGJvcmRlcjogbm9uZTtcbiAgICAgICAgZm9udC1zaXplOiAxNHB4O1xuICAgICAgICBsaW5lLWhlaWdodDogMTtcbiAgICAgICAgY3Vyc29yOiBwb2ludGVyO1xuICAgICAgICB6LWluZGV4OiAxO1xuICAgICAgYDtcblxuICAgICAgZGVsZXRlQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZSA9PiB7XG4gICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG5cbiAgICAgICAgaWYgKGNvbmZpcm0oJ+ehruWumuimgeWIoOmZpOi/meS4quWjgee6uOWQl++8nycpKSB7XG4gICAgICAgICAgdGhpcy53YWxscGFwZXJNYW5hZ2VyLmRlbGV0ZUN1c3RvbVdhbGxwYXBlcih3YWxscGFwZXIuaWQpO1xuXG4gICAgICAgICAgLy8g5aaC5p6c5b2T5YmN5q2j5Zyo5L2/55So6L+Z5Liq5aOB57q477yM5YiZ6YeN572u5Li66buY6K6kXG4gICAgICAgICAgY29uc3QgY3VycmVudFdhbGxwYXBlciA9IHRoaXMud2FsbHBhcGVyTWFuYWdlci5nZXRDdXJyZW50V2FsbHBhcGVyKHZpZXdUeXBlKTtcbiAgICAgICAgICBpZiAoY3VycmVudFdhbGxwYXBlciAmJiBjdXJyZW50V2FsbHBhcGVyLmlkID09PSB3YWxscGFwZXIuaWQpIHtcbiAgICAgICAgICAgIHRoaXMud2FsbHBhcGVyTWFuYWdlci5zZXRXYWxscGFwZXIodmlld1R5cGUsIG51bGwpO1xuICAgICAgICAgICAgb25BcHBseVdhbGxwYXBlcigpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIC8vIOenu+mZpOWFg+e0oFxuICAgICAgICAgIGl0ZW0ucGFyZW50RWxlbWVudD8ucmVtb3ZlQ2hpbGQoaXRlbSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgICBpdGVtLmFwcGVuZENoaWxkKGRlbGV0ZUJ0bik7XG4gICAgfVxuXG4gICAgLy8g54K55Ye75bqU55So5aOB57q4XG4gICAgaXRlbS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgIC8vIOehruS/neWjgee6uOeuoeeQhuWZqOS9v+eUqOW9k+WJjeS4u+mimOWQjeensFxuICAgICAgY29uc3QgY3VycmVudFRoZW1lID0gdGhpcy50aGVtZU1hbmFnZXIuZ2V0Q3VycmVudFRoZW1lKCk7XG4gICAgICB0aGlzLndhbGxwYXBlck1hbmFnZXIuc2V0Q3VycmVudFRoZW1lTmFtZShjdXJyZW50VGhlbWUubmFtZSk7XG5cbiAgICAgIHRoaXMud2FsbHBhcGVyTWFuYWdlci5zZXRXYWxscGFwZXIodmlld1R5cGUsIHdhbGxwYXBlcik7XG4gICAgICBvbkFwcGx5V2FsbHBhcGVyKCk7XG5cbiAgICAgIC8vIOWFs+mXreaooeaAgeahhlxuICAgICAgZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZChtb2RhbCk7XG4gICAgfSk7XG5cbiAgICBpdGVtLmFwcGVuZENoaWxkKHByZXZpZXcpO1xuICAgIGl0ZW0uYXBwZW5kQ2hpbGQobmFtZSk7XG5cbiAgICByZXR1cm4gaXRlbTtcbiAgfVxuXG4gIC8vIOWIm+W7uuW6lemDqOaMiemSrlxuICBwcml2YXRlIGNyZWF0ZUJvdHRvbUJ1dHRvbnMoXG4gICAgY29udGFpbmVyOiBIVE1MRWxlbWVudCxcbiAgICB2aWV3VHlwZTogJ2NoYXQnIHwgJ2hvbWUnIHwgJ3NldHRpbmdzJyxcbiAgICBtb2RhbDogSFRNTEVsZW1lbnQsXG4gICAgb25BcHBseVdhbGxwYXBlcjogKCkgPT4gdm9pZCxcbiAgKTogdm9pZCB7XG4gICAgY29uc3QgYnV0dG9uc0NvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIGJ1dHRvbnNDb250YWluZXIuc3R5bGUuY3NzVGV4dCA9IGBcbiAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47XG4gICAgICBtYXJnaW4tdG9wOiAyMHB4O1xuICAgICAgcGFkZGluZy10b3A6IDE1cHg7XG4gICAgICBib3JkZXItdG9wOiAxcHggc29saWQgJHtkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC5jb250YWlucygnZGFyay1tb2RlJykgPyAnIzNjM2MzYycgOiAnI2VlZSd9O1xuICAgIGA7XG5cbiAgICBjb25zdCByZXNldEJ0biA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpO1xuICAgIHJlc2V0QnRuLnRleHRDb250ZW50ID0gJ+aBouWkjem7mOiupCc7XG4gICAgcmVzZXRCdG4uc3R5bGUuY3NzVGV4dCA9IGBcbiAgICAgIHBhZGRpbmc6IDEwcHggMTVweDtcbiAgICAgIGJhY2tncm91bmQ6ICR7ZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QuY29udGFpbnMoJ2RhcmstbW9kZScpID8gJyMzYzNjM2MnIDogJyNmMWY1ZjknfTtcbiAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LXByaW1hcnkpO1xuICAgICAgYm9yZGVyOiBub25lO1xuICAgICAgYm9yZGVyLXJhZGl1czogNXB4O1xuICAgICAgY3Vyc29yOiBwb2ludGVyO1xuICAgICAgZm9udC13ZWlnaHQ6IDUwMDtcbiAgICBgO1xuXG4gICAgcmVzZXRCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAvLyDnp7vpmaToh6rlrprkuYnlo4Hnurjorr7nva7vvIzlsIbkvb/nlKjkuLvpopjpu5jorqTlo4HnurhcbiAgICAgIHRoaXMud2FsbHBhcGVyTWFuYWdlci5zZXRXYWxscGFwZXIodmlld1R5cGUsIG51bGwpO1xuICAgICAgb25BcHBseVdhbGxwYXBlcigpO1xuXG4gICAgICAvLyDlhbPpl63mqKHmgIHmoYZcbiAgICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQobW9kYWwpO1xuICAgIH0pO1xuXG4gICAgY29uc3QgY2xvc2VCdG4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTtcbiAgICBjbG9zZUJ0bi50ZXh0Q29udGVudCA9ICflhbPpl60nO1xuICAgIGNsb3NlQnRuLnN0eWxlLmNzc1RleHQgPSBgXG4gICAgICBwYWRkaW5nOiAxMHB4IDIwcHg7XG4gICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1wcmltYXJ5LWJsdWUpO1xuICAgICAgY29sb3I6IHdoaXRlO1xuICAgICAgYm9yZGVyOiBub25lO1xuICAgICAgYm9yZGVyLXJhZGl1czogNXB4O1xuICAgICAgY3Vyc29yOiBwb2ludGVyO1xuICAgICAgZm9udC13ZWlnaHQ6IDUwMDtcbiAgICBgO1xuXG4gICAgY2xvc2VCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICBkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKG1vZGFsKTtcbiAgICB9KTtcblxuICAgIGJ1dHRvbnNDb250YWluZXIuYXBwZW5kQ2hpbGQocmVzZXRCdG4pO1xuICAgIGJ1dHRvbnNDb250YWluZXIuYXBwZW5kQ2hpbGQoY2xvc2VCdG4pO1xuICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZChidXR0b25zQ29udGFpbmVyKTtcbiAgfVxufVxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/同层手机/wallpaper-selector.ts\n")}},__webpack_module_cache__={};function __webpack_require__(Q){var U=__webpack_module_cache__[Q];if(void 0!==U)return U.exports;var F=__webpack_module_cache__[Q]={exports:{}};return __webpack_modules__[Q](F,F.exports,__webpack_require__),F.exports}__webpack_require__.d=(Q,U)=>{for(var F in U)__webpack_require__.o(U,F)&&!__webpack_require__.o(Q,F)&&Object.defineProperty(Q,F,{enumerable:!0,get:U[F]})},__webpack_require__.o=(Q,U)=>Object.prototype.hasOwnProperty.call(Q,U),__webpack_require__.r=Q=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(Q,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(Q,"__esModule",{value:!0})};var __webpack_exports__=__webpack_require__("./src/同层手机/index.ts");</script></body>
</html>
