<head><script type="module">import{createPinia as e,defineStore as t}from'https://testingcf.jsdelivr.net/npm/pinia/+esm';import{klona as n}from'https://testingcf.jsdelivr.net/npm/klona/+esm';var o={830(e,t){t.A=(e,t)=>{const n=e.__vccOpts||e;for(const[e,o]of t)n[e]=o;return n}}},l={};const a=Vue,r=['力量','敏捷','体质','感知','意志','魅力'],s={力量:'体能与攻击能力，决定近战输出与负重',敏捷:'移动、闪避与反应速度，影响先手与命中',体质:'生命力与耐久度，决定抗性与恢复速度',感知:'观察与洞察能力，影响侦查与魔力控制',意志:'精神力与抗干扰能力，决定技能稳定性',魅力:'影响交涉、统御与社交反馈的综合指标'},c=z,i=c.z.object({世界:c.z.object({当前时间:c.z.string(),当前地点:c.z.string()}),主角:c.z.object({姓名:c.z.string(),性别:c.z.string(),年龄:c.z.coerce.number().or(c.z.templateLiteral([c.z.coerce.number(),c.z.literal('岁')]).transform(e=>parseInt(e))).or(c.z.literal('待初始化')),外貌:c.z.object({描述:c.z.string(),主角评价:c.z.string()}),能力面板:c.z.record(c.z.enum(['力量','敏捷','体质','感知','意志','魅力']),c.z.object({数值:c.z.coerce.number().or(c.z.literal('待初始化')),主角评价:c.z.string()})),装备栏:c.z.record(c.z.enum(['主手','副手','防具','饰品']),c.z.object({装备:c.z.string(),主角评价:c.z.string()})),物品栏:c.z.record(c.z.string(),c.z.object({描述:c.z.string(),主角评价:c.z.string()})),持有能力:c.z.record(c.z.string(),c.z.object({描述:c.z.string(),主角评价:c.z.string()})),当前状态:c.z.record(c.z.string(),c.z.object({类型:c.z.enum(['增益','减益']),持续时间:c.z.string(),触发条件:c.z.string(),描述:c.z.string(),主角评价:c.z.string()}))}),系统状态:c.z.object({可用积分:c.z.coerce.number().or(c.z.literal('待初始化')),对主角可见形象:c.z.string(),玩家ID:c.z.string(),玩家本轮操作日志:c.z.array(c.z.string())}),商品列表:c.z.record(c.z.string(),c.z.object({描述:c.z.string(),主角评价:c.z.string(),积分价格:c.z.coerce.number().or(c.z.literal('待初始化'))})),任务列表:c.z.record(c.z.string(),c.z.object({类型:c.z.enum(['主线','支线','每日','临危受命']),说明:c.z.string(),目标:c.z.string(),奖励:c.z.string(),惩罚:c.z.string()}))}),u=['主线','支线','每日','临危受命'],d=t('data',()=>{const e=(0,a.ref)(i.parse(_.get(getVariables({type:'message',message_id:getCurrentMessageId()}),'stat_data',{})));(0,a.watchEffect)(()=>{updateVariablesWith(t=>(_.set(t,'stat_data',n(e.value)),t),{type:'message',message_id:getCurrentMessageId()})}),e.value.系统状态.玩家本轮操作日志=[];return{data:e,log:t=>{e.value.系统状态.玩家本轮操作日志.push(t)}}});function m(e){const t=(0,a.computed)(()=>function(e){if(!e||'object'!=typeof e)return[];const t=[],n=e;return Object.entries(n).forEach(([e,n])=>{if('$meta'===e||!n||'object'!=typeof n)return;const o=n;t.push({id:`status-${e}`,key:e,name:e,类型:o.类型||'增益',持续时间:o.持续时间||'',触发条件:o.触发条件||'',描述:o.描述||'',主角评价:o.主角评价||''})}),t}(e.value.当前状态)),n=(0,a.computed)(()=>t.value.filter(e=>'增益'===e.类型)),o=(0,a.computed)(()=>t.value.filter(e=>'减益'===e.类型)),l=(0,a.computed)(()=>({增益:n.value.length,减益:o.value.length}));return{allStatus:t,buffList:n,debuffList:o,statusCounts:l}}const p={class:'top-info-bar'},f={class:'info-left'},v={class:'info-right'},b={class:'status-badge'},y=(0,a.defineComponent)({__name:'TopBar',props:{currentTimeLabel:{},location:{}},setup:e=>(t,n)=>((0,a.openBlock)(),(0,a.createElementBlock)('div',p,[(0,a.createElementVNode)('div',f,[n[0]||(n[0]=(0,a.createElementVNode)('span',{class:'status-indicator online','aria-hidden':'true'},null,-1)),(0,a.createElementVNode)('span',null,(0,a.toDisplayString)(e.currentTimeLabel),1)]),(0,a.createElementVNode)('div',v,[(0,a.createElementVNode)('div',b,(0,a.toDisplayString)(e.location),1)])]))});var g=function e(t){var n=l[t];if(void 0!==n)return n.exports;var a=l[t]={exports:{}};return o[t](a,a.exports,e),a.exports}(830);const E=(0,g.A)(y,[['__scopeId','data-v-0f177904']]),k='转生系统的头像文件！',V=500;async function N(e,t){await async function(){getWorldbookNames().includes(k)||(await createWorldbook(k,[]),await rebindChatWorldbook('current',k))}();const n=await getWorldbook(k),o=n.findIndex(t=>t.strategy.keys.includes(e)),l={name:`${e}的头像`,enabled:!0,strategy:{type:'selective',keys:[e],keys_secondary:{logic:'and_any',keys:[]},scan_depth:1},position:{type:'after_character_definition',role:'system',depth:0,order:999},content:JSON.stringify({角色名称:e,头像数据:t,更新时间:(new Date).toISOString()}),probability:100,recursion:{prevent_incoming:!0,prevent_outgoing:!0,delay_until:null},effect:{sticky:null,cooldown:null,delay:null}};o>=0?(n[o]={...n[o],...l},await replaceWorldbook(k,n)):await createWorldbookEntries(k,[l])}function h(){const e=(0,a.ref)(!1),t=(0,a.ref)(null);return{uploading:e,avatarUrl:t,uploadAvatar:async n=>{if(!n||'角色名称'===n)return void toastr?.warning?.('请先设置角色名称','头像上传');const o=document.createElement('input');o.type='file',o.accept='image/*',o.onchange=async o=>{const l=o.target.files?.[0];if(l)if(l.type.startsWith('image/'))if(l.size>5242880)toastr?.error?.('图片文件过大，请选择小于 5MB 的图片','头像上传');else{e.value=!0;try{const e=await async function(e){return new Promise((t,n)=>{const o=new FileReader;o.onload=e=>{const o=new Image;o.onload=()=>{const e=document.createElement('canvas');let l=o.width,a=o.height;l>a&&l>V?(a=a*V/l,l=V):a>=l&&a>V&&(l=l*V/a,a=V),e.width=l,e.height=a;const r=e.getContext('2d');if(!r)return void n(new Error('无法获取 canvas context'));r.drawImage(o,0,0,l,a);const s=e.toDataURL('image/jpeg',.8);t(s)},o.onerror=()=>n(new Error('图片加载失败')),o.src=e.target?.result},o.onerror=()=>n(new Error('文件读取失败')),o.readAsDataURL(e)})}(l);await N(n,e),t.value=e,toastr?.success?.('头像上传成功','头像上传')}catch(e){console.error('[头像上传] 失败',e),toastr?.error?.('头像上传失败：'+e.message,'头像上传')}finally{e.value=!1}}else toastr?.error?.('请选择图片文件','头像上传')},o.click()},loadAvatarForCharacter:async e=>{if(e&&'角色名称'!==e)try{const n=await async function(e){try{if(!getWorldbookNames().includes(k))return null;const t=(await getWorldbook(k)).find(t=>t.strategy.keys.includes(e));return t&&JSON.parse(t.content).头像数据||null}catch(e){return console.error('[头像管理] 读取头像失败',e),null}}(e);t.value=n}catch(e){console.error('[头像加载] 失败',e),t.value=null}else t.value=null}}}const C={class:'character-info-card'},B={class:'character-header'},w=['title'],D={key:0,class:'avatar-placeholder'},S={key:1,class:'avatar-loading'},P={class:'character-basic-info'},x={class:'character-name'},M={class:'character-stats'},T={class:'stat-item'},I={class:'stat-value'},L={class:'stat-item'},F={class:'stat-value'},q={class:'character-description-section'},U={class:'appearance-description'},R={class:'self-evaluation'},j=(0,a.defineComponent)({__name:'CharacterInfo',props:{name:{},gender:{},age:{},appearanceDescription:{},selfEvaluation:{}},setup(e){const t=e,{uploading:n,avatarUrl:o,uploadAvatar:l,loadAvatarForCharacter:r}=h();return(0,a.watch)(()=>t.name,async e=>{e&&'角色名称'!==e&&await r(e)},{immediate:!0}),(t,r)=>((0,a.openBlock)(),(0,a.createElementBlock)('div',C,[(0,a.createElementVNode)('div',B,[(0,a.createElementVNode)('div',{class:(0,a.normalizeClass)(['character-avatar',{'has-avatar':(0,a.unref)(o),uploading:(0,a.unref)(n)}]),style:(0,a.normalizeStyle)((0,a.unref)(o)?{backgroundImage:`url(${(0,a.unref)(o)})`}:{}),title:(0,a.unref)(n)?'上传中...':'点击上传头像',onClick:r[0]||(r[0]=t=>(0,a.unref)(l)(e.name))},[(0,a.unref)(o)||(0,a.unref)(n)?(0,a.createCommentVNode)('v-if',!0):((0,a.openBlock)(),(0,a.createElementBlock)('div',D,[...r[1]||(r[1]=[(0,a.createElementVNode)('span',null,'+',-1)])])),(0,a.unref)(n)?((0,a.openBlock)(),(0,a.createElementBlock)('div',S,[...r[2]||(r[2]=[(0,a.createElementVNode)('span',null,'...',-1)])])):(0,a.createCommentVNode)('v-if',!0)],14,w),(0,a.createElementVNode)('div',P,[(0,a.createElementVNode)('div',x,(0,a.toDisplayString)(e.name),1),(0,a.createElementVNode)('div',M,[(0,a.createElementVNode)('div',T,[r[3]||(r[3]=(0,a.createElementVNode)('span',{class:'stat-label'},'性别:',-1)),(0,a.createElementVNode)('span',I,(0,a.toDisplayString)(e.gender),1)]),(0,a.createElementVNode)('div',L,[r[4]||(r[4]=(0,a.createElementVNode)('span',{class:'stat-label'},'年龄:',-1)),(0,a.createElementVNode)('span',F,(0,a.toDisplayString)(e.age),1)])])])]),(0,a.createElementVNode)('div',q,[(0,a.createElementVNode)('div',U,(0,a.toDisplayString)(e.appearanceDescription),1),(0,a.createElementVNode)('div',R,(0,a.toDisplayString)(e.selfEvaluation),1)])]))}}),A=(0,g.A)(j,[['__scopeId','data-v-4f0bcb15']]),O={class:'pixel-modal'},K={class:'pixel-modal__panel'},W={class:'pixel-modal__header'},H={class:'pixel-modal__title'},G={class:'pixel-modal__scroll'},J={key:0,class:'pixel-modal__description'},Q={class:'pixel-modal__body'},X=(0,a.defineComponent)({__name:'ActionModal',props:{title:{},description:{}},emits:['close'],setup(e,{emit:t}){const n=t;return(t,o)=>((0,a.openBlock)(),(0,a.createBlock)(a.Teleport,{to:'body'},[(0,a.createElementVNode)('div',O,[(0,a.createElementVNode)('div',{class:'pixel-modal__backdrop',onClick:o[0]||(o[0]=e=>n('close'))}),(0,a.createElementVNode)('div',K,[(0,a.createElementVNode)('header',W,[(0,a.createElementVNode)('h3',H,(0,a.toDisplayString)(e.title),1),(0,a.createElementVNode)('button',{type:'button',class:'pixel-modal__close','aria-label':'关闭',onClick:o[1]||(o[1]=e=>n('close'))},'×')]),(0,a.createElementVNode)('div',G,[e.description?((0,a.openBlock)(),(0,a.createElementBlock)('p',J,(0,a.toDisplayString)(e.description),1)):(0,a.createCommentVNode)('v-if',!0),(0,a.createElementVNode)('section',Q,[(0,a.renderSlot)(t.$slots,'default')])])])])]))}}),Y=(0,g.A)(X,[['__scopeId','data-v-e9cd6f88']]),Z={class:'confirm-modal'},ee={key:0,class:'confirm-modal__question'},te={key:1,class:'confirm-modal__hint'},ne={key:2,class:'confirm-modal__body'},oe={class:'confirm-modal__actions'},le=(0,a.defineComponent)({__name:'Confirm',props:{title:{},question:{}},emits:['cancel','confirm'],setup(e,{emit:t}){const n=t;return(t,o)=>((0,a.openBlock)(),(0,a.createBlock)(Y,{title:e.title,onClose:o[2]||(o[2]=e=>n('cancel'))},{default:(0,a.withCtx)(()=>[(0,a.createElementVNode)('div',Z,[e.question?((0,a.openBlock)(),(0,a.createElementBlock)('p',ee,(0,a.toDisplayString)(e.question),1)):(0,a.createCommentVNode)('v-if',!0),t.$slots.hint?((0,a.openBlock)(),(0,a.createElementBlock)('div',te,[(0,a.renderSlot)(t.$slots,'hint')])):(0,a.createCommentVNode)('v-if',!0),t.$slots.default?((0,a.openBlock)(),(0,a.createElementBlock)('div',ne,[(0,a.renderSlot)(t.$slots,'default')])):(0,a.createCommentVNode)('v-if',!0),(0,a.createElementVNode)('div',oe,[(0,a.renderSlot)(t.$slots,'actions',{},()=>[(0,a.createElementVNode)('button',{type:'button',class:'confirm-button ghost',onClick:o[0]||(o[0]=e=>n('cancel'))},'取消'),(0,a.createElementVNode)('button',{type:'submit',class:'confirm-button primary',onClick:o[1]||(o[1]=e=>n('confirm'))},'确认')])])])]),_:3},8,['title']))}}),ae=(0,g.A)(le,[['__scopeId','data-v-2deec386']]);function re(){const e=(0,a.ref)(null);return{activeBubble:e,toggleBubble:function(t){e.value=e.value===t?null:t},closeBubble:function(){e.value=null}}}function se(e){const t=e.delay??600,n=e.usePointerCapture??!0,o=e.preventDefaultOnTouch??!0,l=(0,a.ref)(null);let r=null;const s=(0,a.ref)(!1);function c(){r&&(clearTimeout(r),r=null)}return(0,a.onBeforeUnmount)(()=>{c()}),{onPointerDown:function(a,i){0===i.button&&(e.shouldHandle&&!e.shouldHandle(a,i)||(l.value=i.pointerId,s.value=!1,n&&i.currentTarget?.setPointerCapture(i.pointerId),o&&'mouse'!==i.pointerType&&i.preventDefault(),c(),r=setTimeout(()=>{s.value=!0,e.onLongPress?.(a,i)},t)))},onPointerUp:function(t,o){if(0!==o.button||l.value!==o.pointerId)return;n&&o.currentTarget?.releasePointerCapture(o.pointerId),l.value=null;const a=s.value;c(),a||e.onTap?.(t,o)},onPointerCancel:function(e){e&&l.value===e.pointerId&&n&&e.currentTarget?.releasePointerCapture(e.pointerId),l.value=null,c(),s.value=!1},clearPressTimer:c}}const ce={class:'abilities-panel'},ie=['onPointerdown','onPointerup'],ue={class:'ability-item__name'},de={class:'ability-item__value'},me={class:'ability-item__desc'},pe={key:0,class:'ability-bubble'},fe={class:'ability-edit-field'},ve=['onKeyup'],be=(0,a.defineComponent)({__name:'AbilitiesPanel',props:{abilities:{},descriptions:{}},setup(e){const t=d(),{activeBubble:n,toggleBubble:o,closeBubble:l}=re(),r=(0,a.ref)(!1),s=(0,a.ref)(null),c=(0,a.ref)(''),i=(0,a.ref)(null),u=(0,a.computed)(()=>s.value??'未知能力'),m=se({onTap:e=>o(e.key),onLongPress:e=>function(e){s.value=e.key,c.value=e.数值?.toString()??'',r.value=!0,l(),(0,a.nextTick)(()=>i.value?.focus())}(e)});function p(){r.value=!1,s.value=null,c.value=''}function f(){if(!s.value)return;const e=String(c.value??'').trim();if(''===e)return void toastr.error('请输入数值');const n=Number(e);if(Number.isNaN(n))return void toastr.error('请输入有效的数字');const o=function(){const e=t.data.主角;return e&&'object'==typeof e?(e.能力面板&&'object'==typeof e.能力面板||(e.能力面板={}),e.能力面板):null}();if(!o)return void toastr.error('未找到主角能力数据');(o[s.value]??(o[s.value]={数值:n,主角评价:'待评价，需要立即更新'})).数值=n,t.log(`能力'${s.value}'已更新为${n}|立即更新全部自我评价变量`),toastr.success('能力数值已更新'),p()}return(t,o)=>((0,a.openBlock)(),(0,a.createElementBlock)(a.Fragment,null,[(0,a.createElementVNode)('div',ce,[((0,a.openBlock)(!0),(0,a.createElementBlock)(a.Fragment,null,(0,a.renderList)(e.abilities,t=>((0,a.openBlock)(),(0,a.createElementBlock)('div',{key:t.key,class:(0,a.normalizeClass)(['ability-item',{active:(0,a.unref)(n)===t.key}]),onPointerdown:e=>(0,a.unref)(m).onPointerDown(t,e),onPointerup:e=>(0,a.unref)(m).onPointerUp(t,e),onPointerleave:o[0]||(o[0]=e=>(0,a.unref)(m).onPointerCancel(e)),onPointercancel:o[1]||(o[1]=e=>(0,a.unref)(m).onPointerCancel(e)),onContextmenu:o[2]||(o[2]=(0,a.withModifiers)(()=>{},['prevent']))},[(0,a.createElementVNode)('div',ue,(0,a.toDisplayString)(t.key),1),(0,a.createElementVNode)('div',de,(0,a.toDisplayString)(t.数值),1),(0,a.createElementVNode)('div',me,(0,a.toDisplayString)(e.descriptions[t.key]),1),(0,a.unref)(n)===t.key?((0,a.openBlock)(),(0,a.createElementBlock)('div',pe,(0,a.toDisplayString)(t.主角评价),1)):(0,a.createCommentVNode)('v-if',!0)],42,ie))),128))]),(0,a.unref)(r)?((0,a.openBlock)(),(0,a.createBlock)(ae,{key:0,title:`调整能力：${(0,a.unref)(u)}`,question:`请输入要设置的「${(0,a.unref)(u)}」数值：`,onCancel:p},{hint:(0,a.withCtx)(()=>[...o[4]||(o[4]=[(0,a.createElementVNode)('span',null,'输入数字后，会通过记录日志告知AI。',-1)])]),default:(0,a.withCtx)(()=>[(0,a.createElementVNode)('label',fe,[o[5]||(o[5]=(0,a.createElementVNode)('span',null,'新的数值',-1)),(0,a.withDirectives)((0,a.createElementVNode)('input',{ref_key:'abilityInputRef',ref:i,type:'number',step:'1','onUpdate:modelValue':o[3]||(o[3]=e=>(0,a.isRef)(c)?c.value=e:null),onKeyup:(0,a.withKeys)((0,a.withModifiers)(f,['prevent']),['enter'])},null,40,ve),[[a.vModelText,(0,a.unref)(c)]])])]),actions:(0,a.withCtx)(()=>[(0,a.createElementVNode)('button',{type:'button',class:'confirm-button ghost',onClick:p},'取消'),(0,a.createElementVNode)('button',{type:'button',class:'confirm-button primary',onClick:f},'确认')]),_:1},8,['title','question'])):(0,a.createCommentVNode)('v-if',!0)],64))}}),ye=(0,g.A)(be,[['__scopeId','data-v-6d7e1566']]);function ge(e){const t=(0,a.ref)(!1),n=(0,a.ref)(null),o=(0,a.computed)(()=>e.getName(n.value));function l(){t.value=!1,n.value=null}function r(t){const a=n.value;if(!a)return;if(!e.removeByKey(e.getKey(a)))return void toastr.warning('delete'===t?e.deleteFailureMessage??'未找到要删除的条目':e.destroyFailureMessage??'未找到要销毁的条目');const r=o.value;'destroy'===t&&e.logDestroy?.(r);const s='delete'===t?e.deleteSuccessMessage?.(r)??`已删除「${r}」`:e.destroySuccessMessage?.(r)??`已销毁「${r}」`;toastr.success(s),l()}return{showRemovalModal:t,pendingEntry:n,selectedName:o,openRemovalModal:function(e){n.value=e,t.value=!0},closeRemovalModal:l,handleBugDelete:()=>r('delete'),handleDestroy:()=>r('destroy')}}function Ee(e,t,n){if(!n)return!1;const o=function(e,t){if(!e||'object'!=typeof e)return null;const n=e[t];return n&&'object'==typeof n||(e[t]={}),e[t]}(e,t);return!!o&&(!!Object.prototype.hasOwnProperty.call(o,n)&&(delete o[n],!0))}const ke={class:'ability-status-panel'},Ve={class:'ability-status-group'},Ne={class:'ability-status-title'},he={class:'ability-status-list'},Ce=['onPointerdown','onPointerup'],Be={class:'ability-status-name'},we={class:'ability-status-desc'},_e={key:0,class:'ability-status-eval'},De=(0,a.defineComponent)({__name:'AbilityPanel',props:{abilities:{}},setup(e){const t=e,n=(0,a.toRef)(t,'abilities'),o=(0,a.computed)(()=>{const e=n.value.map(e=>({...e}));for(;e.length<2;){const t=e.length;e.push({id:`placeholder-${t}`,key:`placeholder-${t}`,name:'空槽位',描述:'暂无能力',主角评价:'',__placeholder:!0})}return e}),l=d(),{showRemovalModal:r,selectedName:s,openRemovalModal:c,closeRemovalModal:i,handleBugDelete:u,handleDestroy:m}=ge({getName:e=>e?.name??'未知能力',getKey:e=>e?.key,removeByKey:e=>Ee(l.data.主角,'持有能力',e),deleteSuccessMessage:e=>`已删除能力「${e}」`,destroySuccessMessage:e=>`已销毁能力「${e}」`,logDestroy:e=>l.log(`系统销毁了能力'${e}'`),deleteFailureMessage:'未找到要删除的能力',destroyFailureMessage:'未找到要销毁的能力'}),p=se({onLongPress:e=>c(e),shouldHandle:e=>!e.__placeholder});return(e,t)=>((0,a.openBlock)(),(0,a.createElementBlock)(a.Fragment,null,[(0,a.createElementVNode)('div',ke,[(0,a.createElementVNode)('div',Ve,[(0,a.createElementVNode)('div',Ne,'持有能力 ('+(0,a.toDisplayString)(n.value.length)+')',1),(0,a.createElementVNode)('ul',he,[((0,a.openBlock)(!0),(0,a.createElementBlock)(a.Fragment,null,(0,a.renderList)(o.value,e=>((0,a.openBlock)(),(0,a.createElementBlock)('li',{key:e.id,class:(0,a.normalizeClass)(['ability-status-item',{placeholder:e.__placeholder}]),onPointerdown:t=>(0,a.unref)(p).onPointerDown(e,t),onPointerup:t=>(0,a.unref)(p).onPointerUp(e,t),onPointerleave:t[0]||(t[0]=e=>(0,a.unref)(p).onPointerCancel(e)),onPointercancel:t[1]||(t[1]=e=>(0,a.unref)(p).onPointerCancel(e)),onContextmenu:t[2]||(t[2]=(0,a.withModifiers)(()=>{},['prevent']))},[(0,a.createElementVNode)('div',Be,(0,a.toDisplayString)(e.name),1),(0,a.createElementVNode)('p',we,(0,a.toDisplayString)(e.描述),1),e.主角评价?((0,a.openBlock)(),(0,a.createElementBlock)('p',_e,(0,a.toDisplayString)(e.主角评价),1)):(0,a.createCommentVNode)('v-if',!0)],42,Ce))),128))])])]),(0,a.unref)(r)?((0,a.openBlock)(),(0,a.createBlock)(ae,{key:0,title:`处理能力：${(0,a.unref)(s)}`,question:`请选择要对「${(0,a.unref)(s)}」执行的操作。`,onCancel:(0,a.unref)(i)},{hint:(0,a.withCtx)(()=>[...t[6]||(t[6]=[(0,a.createElementVNode)('span',null,'删除是指出现bug强行将条目删除、销毁是指玩家主动删除。注意：删除不会记录日志，销毁会以系统行为记录日志。',-1)])]),actions:(0,a.withCtx)(()=>[(0,a.createElementVNode)('button',{type:'button',class:'confirm-button ghost',onClick:t[3]||(t[3]=(...e)=>(0,a.unref)(u)&&(0,a.unref)(u)(...e))},'删除'),(0,a.createElementVNode)('button',{type:'button',class:'confirm-button ghost',onClick:t[4]||(t[4]=(...e)=>(0,a.unref)(m)&&(0,a.unref)(m)(...e))},'销毁'),(0,a.createElementVNode)('button',{type:'button',class:'confirm-button ghost',onClick:t[5]||(t[5]=(...e)=>(0,a.unref)(i)&&(0,a.unref)(i)(...e))},'取消')]),_:1},8,['title','question','onCancel'])):(0,a.createCommentVNode)('v-if',!0)],64))}}),Se=(0,g.A)(De,[['__scopeId','data-v-5b2e1f3e']]),ze=['onPointerdown','onPointerup','onPointerleave','onPointercancel'],Pe={key:0},xe={key:1},Me={key:0,class:'status-bubble'},$e=(0,a.defineComponent)({__name:'StatusList',props:{entries:{},emptyText:{},activeId:{},useBubble:{type:Boolean},bubbleShouldShowOnTop:{type:Function},getItemClass:{type:Function},compact:{type:Boolean},minRows:{}},emits:['pointerdown','pointerup','pointerleave','pointercancel'],setup(e){const t=e,n=(0,a.computed)(()=>t.useBubble??!1),o=(0,a.computed)(()=>{const e=[...t.entries],n=t.minRows??0;if(n>0&&e.length<n){const t=n-e.length;for(let n=0;n<t;n+=1)e.push({id:`placeholder-${n}`,key:`placeholder-${n}`,name:'空槽位',类型:'增益',描述:'',主角评价:'',持续时间:'',触发条件:'',__placeholder:!0})}return e}),l=(0,a.computed)(()=>t.bubbleShouldShowOnTop),r=(0,a.computed)(()=>t.activeId??null),s=(0,a.computed)(()=>t.compact??!1);function c(e,n){return'function'==typeof t.getItemClass?t.getItemClass(e,n)??'':t.getItemClass?t.getItemClass:''}return(t,i)=>o.value.length?((0,a.openBlock)(),(0,a.createElementBlock)('ul',{key:1,class:(0,a.normalizeClass)(['status-effects-list',{compact:s.value}])},[((0,a.openBlock)(!0),(0,a.createElementBlock)(a.Fragment,null,(0,a.renderList)(o.value,(e,u)=>((0,a.openBlock)(),(0,a.createElementBlock)('li',{key:e.id,class:(0,a.normalizeClass)(['status-effect-item',c(e,u),{compact:s.value,placeholder:e.__placeholder,active:r.value===e.id,'bubble-top':n.value&&!e.__placeholder&&l.value?.(u,o.value.length)}]),onPointerdown:n=>t.$emit('pointerdown',e,n),onPointerup:n=>t.$emit('pointerup',e,n),onPointerleave:n=>t.$emit('pointerleave',e,n),onPointercancel:n=>t.$emit('pointercancel',e,n),onContextmenu:i[0]||(i[0]=(0,a.withModifiers)(()=>{},['prevent']))},[(0,a.createElementVNode)('div',{class:(0,a.normalizeClass)(['status-effect-name',{compact:s.value}])},(0,a.toDisplayString)(e.name),3),(0,a.createElementVNode)('p',{class:(0,a.normalizeClass)(['status-effect-desc',{compact:s.value}])},(0,a.toDisplayString)(e.描述),3),(0,a.createElementVNode)('div',{class:(0,a.normalizeClass)(['status-effect-meta',{compact:s.value}])},[e.持续时间?((0,a.openBlock)(),(0,a.createElementBlock)('span',Pe,'持续时间: '+(0,a.toDisplayString)(e.持续时间),1)):(0,a.createCommentVNode)('v-if',!0),e.触发条件?((0,a.openBlock)(),(0,a.createElementBlock)('span',xe,'触发条件: '+(0,a.toDisplayString)(e.触发条件),1)):(0,a.createCommentVNode)('v-if',!0)],2),n.value&&!e.__placeholder&&r.value===e.id&&e.主角评价?((0,a.openBlock)(),(0,a.createElementBlock)('div',Me,(0,a.toDisplayString)(e.主角评价),1)):(0,a.createCommentVNode)('v-if',!0)],42,ze))),128))],2)):((0,a.openBlock)(),(0,a.createElementBlock)('p',{key:0,class:(0,a.normalizeClass)(['status-effects-empty',{compact:s.value}])},(0,a.toDisplayString)(e.emptyText),3))}}),Te=(0,g.A)($e,[['__scopeId','data-v-e2868310']]),Ie={class:'status-effects-panel'},Le={class:'status-tabs'},Fe={class:'status-content'},qe=(0,a.defineComponent)({__name:'StatusEffectsPanel',props:{buffList:{},debuffList:{}},setup(e){const t=(0,a.ref)('增益'),n=d(),{showRemovalModal:o,selectedName:l,openRemovalModal:r,closeRemovalModal:s,handleBugDelete:c,handleDestroy:i}=ge({getName:e=>e?.name??'未知状态',getKey:e=>e?.key??e?.name,removeByKey:e=>Ee(n.data.主角,'当前状态',e),deleteSuccessMessage:e=>`已删除状态「${e}」`,destroySuccessMessage:e=>`已销毁状态「${e}」`,deleteFailureMessage:'未找到要删除的状态',destroyFailureMessage:'未找到要销毁的状态',logDestroy:e=>n.log(`系统销毁了状态'${e}'`)}),u=se({onLongPress:e=>r(e)});return(n,r)=>((0,a.openBlock)(),(0,a.createElementBlock)(a.Fragment,null,[(0,a.createElementVNode)('div',Ie,[(0,a.createElementVNode)('div',Le,[(0,a.createElementVNode)('button',{class:(0,a.normalizeClass)(['status-tab',{active:'增益'===(0,a.unref)(t)}]),type:'button',onClick:r[0]||(r[0]=e=>t.value='增益')},' 增益 ('+(0,a.toDisplayString)(e.buffList.length)+') ',3),(0,a.createElementVNode)('button',{class:(0,a.normalizeClass)(['status-tab',{active:'减益'===(0,a.unref)(t)}]),type:'button',onClick:r[1]||(r[1]=e=>t.value='减益')},' 减益 ('+(0,a.toDisplayString)(e.debuffList.length)+') ',3)]),(0,a.createElementVNode)('div',Fe,['增益'===(0,a.unref)(t)?((0,a.openBlock)(),(0,a.createBlock)(Te,{key:0,entries:e.buffList,'empty-text':'暂无增益状态','min-rows':2,compact:'',onPointerdown:r[2]||(r[2]=(e,t)=>(0,a.unref)(u).onPointerDown(e,t)),onPointerup:r[3]||(r[3]=(e,t)=>(0,a.unref)(u).onPointerUp(e,t)),onPointerleave:r[4]||(r[4]=(_,e)=>(0,a.unref)(u).onPointerCancel(e)),onPointercancel:r[5]||(r[5]=(_,e)=>(0,a.unref)(u).onPointerCancel(e))},null,8,['entries'])):((0,a.openBlock)(),(0,a.createBlock)(Te,{key:1,entries:e.debuffList,'empty-text':'暂无减益状态','min-rows':2,compact:'',onPointerdown:r[6]||(r[6]=(e,t)=>(0,a.unref)(u).onPointerDown(e,t)),onPointerup:r[7]||(r[7]=(e,t)=>(0,a.unref)(u).onPointerUp(e,t)),onPointerleave:r[8]||(r[8]=(_,e)=>(0,a.unref)(u).onPointerCancel(e)),onPointercancel:r[9]||(r[9]=(_,e)=>(0,a.unref)(u).onPointerCancel(e))},null,8,['entries']))])]),(0,a.unref)(o)?((0,a.openBlock)(),(0,a.createBlock)(ae,{key:0,title:`处理状态：${(0,a.unref)(l)}`,question:`请选择要对「${(0,a.unref)(l)}」执行的操作。`,onCancel:(0,a.unref)(s)},{hint:(0,a.withCtx)(()=>[...r[13]||(r[13]=[(0,a.createElementVNode)('span',null,'删除是指出现bug强行将条目删除、销毁是指玩家主动删除。注意：删除不会记录日志，销毁会以系统行为记录日志。',-1)])]),actions:(0,a.withCtx)(()=>[(0,a.createElementVNode)('button',{type:'button',class:'confirm-button ghost',onClick:r[10]||(r[10]=(...e)=>(0,a.unref)(c)&&(0,a.unref)(c)(...e))},'删除'),(0,a.createElementVNode)('button',{type:'button',class:'confirm-button ghost',onClick:r[11]||(r[11]=(...e)=>(0,a.unref)(i)&&(0,a.unref)(i)(...e))},'销毁'),(0,a.createElementVNode)('button',{type:'button',class:'confirm-button ghost',onClick:r[12]||(r[12]=(...e)=>(0,a.unref)(s)&&(0,a.unref)(s)(...e))},'取消')]),_:1},8,['title','question','onCancel'])):(0,a.createCommentVNode)('v-if',!0)],64))}}),Ue=(0,g.A)(qe,[['__scopeId','data-v-7ab5f997']]),Re={class:'equipment-section'},je={class:'equipment-grid'},Ae=['onClick'],Oe={class:'slot-name'},Ke={class:'slot-item'},We={key:0,class:'info-bubble equipment-bubble'},He=(0,a.defineComponent)({__name:'EquipmentPanel',props:{slots:{}},setup(e){const{activeBubble:t,toggleBubble:n}=re();return(o,l)=>((0,a.openBlock)(),(0,a.createElementBlock)('div',Re,[l[0]||(l[0]=(0,a.createElementVNode)('div',{class:'section-title'},'装备栏',-1)),(0,a.createElementVNode)('div',je,[((0,a.openBlock)(!0),(0,a.createElementBlock)(a.Fragment,null,(0,a.renderList)(e.slots,e=>((0,a.openBlock)(),(0,a.createElementBlock)('div',{key:e.label,class:(0,a.normalizeClass)(['equipment-slot',{active:(0,a.unref)(t)===e.label}]),onClick:t=>(0,a.unref)(n)(e.label)},[(0,a.createElementVNode)('div',Oe,(0,a.toDisplayString)(e.label),1),(0,a.createElementVNode)('div',Ke,(0,a.toDisplayString)(e.item||'空置'),1),(0,a.unref)(t)===e.label?((0,a.openBlock)(),(0,a.createElementBlock)('div',We,(0,a.toDisplayString)(e.evaluation||'暂无评价'),1)):(0,a.createCommentVNode)('v-if',!0)],10,Ae))),128))])]))}}),Ge=(0,g.A)(He,[['__scopeId','data-v-f314b564']]),Je={class:'inventory-section'},Qe=['onPointerdown','onPointerup'],Xe={class:'item-name'},Ye={class:'item-description'},Ze={key:0,class:'info-bubble inventory-bubble'},et=(0,a.defineComponent)({__name:'InventoryPanel',props:{inventory:{},isMobile:{type:Boolean}},setup(e){const t=e,n=d(),{activeBubble:o,toggleBubble:l,closeBubble:r}=re(),s=(0,a.computed)(()=>t.inventory??[]),c=(0,a.computed)(()=>{const e=[...s.value];if(t.isMobile)return e;if(e.length<4){const t=4-e.length;for(let n=0;n<t;n+=1)e.push({id:`placeholder-${n}`,key:`placeholder-${n}`,名称:'—',描述:'空槽位',主角评价:'',placeholder:!0})}return e}),{showRemovalModal:i,selectedName:u,openRemovalModal:m,closeRemovalModal:p,handleBugDelete:f,handleDestroy:v}=ge({getName:e=>e?.名称||'未知物品',getKey:e=>e?.key,removeByKey:e=>Ee(n.data.主角,'物品栏',e),deleteSuccessMessage:e=>`已删除物品「${e}」`,destroySuccessMessage:e=>`已销毁物品「${e}」`,deleteFailureMessage:'未找到要删除的物品',destroyFailureMessage:'未找到要销毁的物品',logDestroy:e=>n.log(`系统销毁了物品'${e}'`)}),b=(0,a.computed)(()=>`处理物品：${u.value}`),y=se({onTap:e=>l(e.id),onLongPress:e=>function(e){r(),m(e)}(e),usePointerCapture:!1,shouldHandle:e=>!e.placeholder});function g(e,t){return e<Math.floor(t/2)}return(e,t)=>((0,a.openBlock)(),(0,a.createElementBlock)(a.Fragment,null,[(0,a.createElementVNode)('div',Je,[t[7]||(t[7]=(0,a.createElementVNode)('div',{class:'inventory-title'},'物品栏',-1)),(0,a.createElementVNode)('div',{class:'inventory-grid',onWheel:t[3]||(t[3]=(0,a.withModifiers)(()=>{},['stop']))},[((0,a.openBlock)(!0),(0,a.createElementBlock)(a.Fragment,null,(0,a.renderList)((0,a.unref)(c),(e,n)=>((0,a.openBlock)(),(0,a.createElementBlock)('div',{key:e.id,class:(0,a.normalizeClass)(['inventory-item',{placeholder:e.placeholder,active:(0,a.unref)(o)===e.id,'bubble-top':g(n,(0,a.unref)(c).length)}]),onPointerdown:t=>(0,a.unref)(y).onPointerDown(e,t),onPointerup:t=>(0,a.unref)(y).onPointerUp(e,t),onPointerleave:t[0]||(t[0]=e=>(0,a.unref)(y).onPointerCancel()),onPointercancel:t[1]||(t[1]=e=>(0,a.unref)(y).onPointerCancel(e)),onContextmenu:t[2]||(t[2]=(0,a.withModifiers)(()=>{},['prevent']))},[(0,a.createElementVNode)('div',Xe,(0,a.toDisplayString)(e.名称),1),(0,a.createElementVNode)('div',Ye,(0,a.toDisplayString)(e.描述||e.主角评价||'空槽位'),1),e.placeholder||(0,a.unref)(o)!==e.id?(0,a.createCommentVNode)('v-if',!0):((0,a.openBlock)(),(0,a.createElementBlock)('div',Ze,(0,a.toDisplayString)(e.主角评价||e.描述||'暂无评价'),1))],42,Qe))),128))],32)]),(0,a.unref)(i)?((0,a.openBlock)(),(0,a.createBlock)(ae,{key:0,title:(0,a.unref)(b),question:`请选择要对「${(0,a.unref)(u)}」执行的操作。`,onCancel:(0,a.unref)(p)},{hint:(0,a.withCtx)(()=>[...t[8]||(t[8]=[(0,a.createElementVNode)('span',null,'删除：强行将物品删除，通常用于出现bug时。销毁：将物品删除并通知AI，作为剧情的一部分。',-1)])]),actions:(0,a.withCtx)(()=>[(0,a.createElementVNode)('button',{type:'button',class:'confirm-button ghost',onClick:t[4]||(t[4]=(...e)=>(0,a.unref)(f)&&(0,a.unref)(f)(...e))},'删除'),(0,a.createElementVNode)('button',{type:'button',class:'confirm-button ghost',onClick:t[5]||(t[5]=(...e)=>(0,a.unref)(v)&&(0,a.unref)(v)(...e))},'销毁'),(0,a.createElementVNode)('button',{type:'button',class:'confirm-button ghost',onClick:t[6]||(t[6]=(...e)=>(0,a.unref)(p)&&(0,a.unref)(p)(...e))},'取消')]),_:1},8,['title','question','onCancel'])):(0,a.createCommentVNode)('v-if',!0)],64))}}),tt=(0,g.A)(et,[['__scopeId','data-v-500270ee']]),nt={class:'status-effects-trigger'},ot={key:0,class:'status-effects-popover'},lt={class:'status-effects-content'},at={class:'status-tabs'},rt={class:'status-list-content'},st=(0,a.defineComponent)({__name:'StatusPopover',props:(0,a.mergeModels)({buffList:{},debuffList:{},buffCount:{},debuffCount:{}},{show:{type:Boolean,default:!1},showModifiers:{},tab:{default:'增益'},tabModifiers:{}}),emits:['update:show','update:tab'],setup(e){const t=(0,a.useModel)(e,'show'),n=(0,a.useModel)(e,'tab'),{activeBubble:o,toggleBubble:l}=re(),r=d(),{showRemovalModal:s,selectedName:c,openRemovalModal:i,closeRemovalModal:u,handleBugDelete:m,handleDestroy:p}=ge({getName:e=>e?.name??'未知状态',getKey:e=>e?.key??e?.name,removeByKey:e=>Ee(r.data.主角,'当前状态',e),deleteSuccessMessage:e=>`已删除状态「${e}」`,destroySuccessMessage:e=>`已销毁状态「${e}」`,deleteFailureMessage:'未找到要删除的状态',destroyFailureMessage:'未找到要销毁的状态',logDestroy:e=>r.log(`系统销毁了状态'${e}'`)}),f=se({onTap:e=>l(e.id),onLongPress:e=>i(e)}),v=()=>'status-effect-buff',b=()=>'status-effect-debuff';function y(){t.value=!t.value}function g(){t.value=!1}function E(e,t){return!(t<=1)&&e>=Math.floor(t/2)}return(l,r)=>((0,a.openBlock)(),(0,a.createElementBlock)(a.Fragment,null,[(0,a.createElementVNode)('div',nt,[(0,a.createElementVNode)('button',{class:(0,a.normalizeClass)(['status-button',{active:t.value}]),type:'button',onClick:y},[r[13]||(r[13]=(0,a.createElementVNode)('span',{class:'button-icon'},'✤',-1)),(0,a.createTextVNode)(' 状态 ('+(0,a.toDisplayString)(e.buffCount+e.debuffCount)+') ',1)],2),t.value?((0,a.openBlock)(),(0,a.createElementBlock)('div',ot,[(0,a.createElementVNode)('div',{class:'popover-header'},[r[14]||(r[14]=(0,a.createElementVNode)('span',null,'状态概览',-1)),(0,a.createElementVNode)('button',{class:'popover-close',type:'button','aria-label':'关闭状态概览',onClick:g},'×')]),(0,a.createElementVNode)('div',lt,[(0,a.createElementVNode)('div',at,[(0,a.createElementVNode)('button',{class:(0,a.normalizeClass)(['status-tab',{active:'增益'===n.value}]),type:'button',onClick:r[0]||(r[0]=e=>n.value='增益')},' 增益 ('+(0,a.toDisplayString)(e.buffCount)+') ',3),(0,a.createElementVNode)('button',{class:(0,a.normalizeClass)(['status-tab',{active:'减益'===n.value}]),type:'button',onClick:r[1]||(r[1]=e=>n.value='减益')},' 减益 ('+(0,a.toDisplayString)(e.debuffCount)+') ',3)]),(0,a.createElementVNode)('div',rt,['增益'===n.value?((0,a.openBlock)(),(0,a.createBlock)(Te,{key:0,entries:e.buffList,'empty-text':'暂无增益状态','use-bubble':!0,'active-id':(0,a.unref)(o),'bubble-should-show-on-top':E,'get-item-class':v,'min-rows':2,onPointerdown:r[2]||(r[2]=(e,t)=>(0,a.unref)(f).onPointerDown(e,t)),onPointerup:r[3]||(r[3]=(e,t)=>(0,a.unref)(f).onPointerUp(e,t)),onPointerleave:r[4]||(r[4]=(_,e)=>(0,a.unref)(f).onPointerCancel(e)),onPointercancel:r[5]||(r[5]=(_,e)=>(0,a.unref)(f).onPointerCancel(e))},null,8,['entries','active-id'])):((0,a.openBlock)(),(0,a.createBlock)(Te,{key:1,entries:e.debuffList,'empty-text':'暂无减益状态','use-bubble':!0,'active-id':(0,a.unref)(o),'bubble-should-show-on-top':E,'get-item-class':b,'min-rows':2,onPointerdown:r[6]||(r[6]=(e,t)=>(0,a.unref)(f).onPointerDown(e,t)),onPointerup:r[7]||(r[7]=(e,t)=>(0,a.unref)(f).onPointerUp(e,t)),onPointerleave:r[8]||(r[8]=(_,e)=>(0,a.unref)(f).onPointerCancel(e)),onPointercancel:r[9]||(r[9]=(_,e)=>(0,a.unref)(f).onPointerCancel(e))},null,8,['entries','active-id']))])])])):(0,a.createCommentVNode)('v-if',!0)]),(0,a.unref)(s)?((0,a.openBlock)(),(0,a.createBlock)(ae,{key:0,title:`处理状态：${(0,a.unref)(c)}`,question:`请选择要对「${(0,a.unref)(c)}」执行的操作。`,onCancel:(0,a.unref)(u)},{hint:(0,a.withCtx)(()=>[...r[15]||(r[15]=[(0,a.createElementVNode)('span',null,'删除是指出现bug强行将条目删除、销毁是指玩家主动删除。删除不写日志，销毁会记录“系统销毁了状态”。',-1)])]),actions:(0,a.withCtx)(()=>[(0,a.createElementVNode)('button',{type:'button',class:'confirm-button ghost',onClick:r[10]||(r[10]=(...e)=>(0,a.unref)(m)&&(0,a.unref)(m)(...e))},'删除'),(0,a.createElementVNode)('button',{type:'button',class:'confirm-button ghost',onClick:r[11]||(r[11]=(...e)=>(0,a.unref)(p)&&(0,a.unref)(p)(...e))},'销毁'),(0,a.createElementVNode)('button',{type:'button',class:'confirm-button ghost',onClick:r[12]||(r[12]=(...e)=>(0,a.unref)(u)&&(0,a.unref)(u)(...e))},'取消')]),_:1},8,['title','question','onCancel'])):(0,a.createCommentVNode)('v-if',!0)],64))}}),ct=(0,g.A)(st,[['__scopeId','data-v-4f8b9b98']]),it={class:'ability-popover-trigger'},ut={key:0,class:'ability-popover'},dt={class:'ability-content'},mt={class:'ability-scroll'},pt={key:0,class:'ability-empty'},ft={class:'ability-list'},vt=['onPointerdown','onPointerup'],bt={class:'ability-name'},yt={class:'ability-desc'},gt={key:0,class:'ability-bubble'},Et=(0,a.defineComponent)({__name:'AbilityPopover',props:(0,a.mergeModels)({abilities:{}},{show:{type:Boolean,default:!1},showModifiers:{}}),emits:['update:show'],setup(e){const t=e,n=(0,a.toRef)(t,'abilities'),o=(0,a.computed)(()=>{const e=n.value.map(e=>({...e}));for(;e.length<2;){const t=e.length;e.push({id:`placeholder-${t}`,key:`placeholder-${t}`,name:'空槽位',描述:'暂无能力',主角评价:'',__placeholder:!0})}return e}),l=(0,a.useModel)(e,'show'),{activeBubble:r,toggleBubble:s}=re(),c=d(),{showRemovalModal:i,selectedName:u,openRemovalModal:m,closeRemovalModal:p,handleBugDelete:f,handleDestroy:v}=ge({getName:e=>e?.name??'未知能力',getKey:e=>e?.key??e?.name,removeByKey:e=>Ee(c.data.主角,'持有能力',e),deleteSuccessMessage:e=>`已删除能力「${e}」`,destroySuccessMessage:e=>`已销毁能力「${e}」`,deleteFailureMessage:'未找到要删除的能力',destroyFailureMessage:'未找到要销毁的能力',logDestroy:e=>c.log(`系统销毁了能力'${e}'`)}),b=se({onTap:e=>s(e.id),onLongPress:e=>m(e),shouldHandle:e=>!e.__placeholder});function y(){l.value=!l.value}function g(){l.value=!1}function E(e,t){return e>=Math.floor(t/2)}return(e,t)=>((0,a.openBlock)(),(0,a.createElementBlock)(a.Fragment,null,[(0,a.createElementVNode)('div',it,[(0,a.createElementVNode)('button',{class:(0,a.normalizeClass)(['ability-button',{active:l.value}]),type:'button',onClick:y},[t[6]||(t[6]=(0,a.createElementVNode)('span',{class:'button-icon'},'✦',-1)),(0,a.createTextVNode)(' 能力 ('+(0,a.toDisplayString)(n.value.length)+') ',1)],2),l.value?((0,a.openBlock)(),(0,a.createElementBlock)('div',ut,[(0,a.createElementVNode)('div',{class:'popover-header'},[t[7]||(t[7]=(0,a.createElementVNode)('span',null,'持有能力',-1)),(0,a.createElementVNode)('button',{class:'popover-close',type:'button','aria-label':'关闭能力列表',onClick:g},'×')]),(0,a.createElementVNode)('div',dt,[(0,a.createElementVNode)('div',mt,[n.value.length?(0,a.createCommentVNode)('v-if',!0):((0,a.openBlock)(),(0,a.createElementBlock)('p',pt,'暂无持有能力')),(0,a.createElementVNode)('ul',ft,[((0,a.openBlock)(!0),(0,a.createElementBlock)(a.Fragment,null,(0,a.renderList)(o.value,(e,n)=>((0,a.openBlock)(),(0,a.createElementBlock)('li',{key:e.id,class:(0,a.normalizeClass)(['ability-item',{active:!e.__placeholder&&(0,a.unref)(r)===e.id,'bubble-top':!e.__placeholder&&E(n,o.value.length),placeholder:e.__placeholder}]),onPointerdown:t=>(0,a.unref)(b).onPointerDown(e,t),onPointerup:t=>(0,a.unref)(b).onPointerUp(e,t),onPointerleave:t[0]||(t[0]=e=>(0,a.unref)(b).onPointerCancel(e)),onPointercancel:t[1]||(t[1]=e=>(0,a.unref)(b).onPointerCancel(e)),onContextmenu:t[2]||(t[2]=(0,a.withModifiers)(()=>{},['prevent']))},[(0,a.createElementVNode)('div',bt,(0,a.toDisplayString)(e.name),1),(0,a.createElementVNode)('p',yt,(0,a.toDisplayString)(e.描述),1),(0,a.unref)(r)===e.id&&e.主角评价&&!e.__placeholder?((0,a.openBlock)(),(0,a.createElementBlock)('div',gt,(0,a.toDisplayString)(e.主角评价),1)):(0,a.createCommentVNode)('v-if',!0)],42,vt))),128))])])])])):(0,a.createCommentVNode)('v-if',!0)]),(0,a.unref)(i)?((0,a.openBlock)(),(0,a.createBlock)(ae,{key:0,title:`处理能力：${(0,a.unref)(u)}`,question:`请选择要对「${(0,a.unref)(u)}」执行的操作。`,onCancel:(0,a.unref)(p)},{hint:(0,a.withCtx)(()=>[...t[8]||(t[8]=[(0,a.createElementVNode)('span',null,'删除是指出现bug强行将条目删除、销毁是指玩家主动删除。删除不写日志，销毁会记录“系统销毁了能力”。',-1)])]),actions:(0,a.withCtx)(()=>[(0,a.createElementVNode)('button',{type:'button',class:'confirm-button ghost',onClick:t[3]||(t[3]=(...e)=>(0,a.unref)(f)&&(0,a.unref)(f)(...e))},'删除'),(0,a.createElementVNode)('button',{type:'button',class:'confirm-button ghost',onClick:t[4]||(t[4]=(...e)=>(0,a.unref)(v)&&(0,a.unref)(v)(...e))},'销毁'),(0,a.createElementVNode)('button',{type:'button',class:'confirm-button ghost',onClick:t[5]||(t[5]=(...e)=>(0,a.unref)(p)&&(0,a.unref)(p)(...e))},'取消')]),_:1},8,['title','question','onCancel'])):(0,a.createCommentVNode)('v-if',!0)],64))}}),kt=(0,g.A)(Et,[['__scopeId','data-v-6fad9abb']]),Vt={class:'bottom-bar'},Nt={class:'bottom-left'},ht={class:'bottom-right'};const Ct={},Bt=(0,g.A)(Ct,[['render',function(e,t){return(0,a.openBlock)(),(0,a.createElementBlock)('div',Vt,[(0,a.createElementVNode)('div',Nt,[(0,a.renderSlot)(e.$slots,'left',{},void 0,!0)]),(0,a.createElementVNode)('div',ht,[(0,a.renderSlot)(e.$slots,'right',{},void 0,!0)])])}],['__scopeId','data-v-487904fc']]),wt={class:'form-grid'},_t=['value'],Dt=['value'],St=['value'],zt={class:'form-grid__checkbox'},Pt={class:'form-actions'},xt=(0,a.defineComponent)({__name:'AutoTask',emits:['close'],setup(e,{emit:t}){const n=t,o=['简单','普通','困难'],l=['微薄','一般','丰厚'],r=(c.z.object({类型:i.shape.任务列表.valueType.shape.类型,难度:c.z.enum(o),奖励:c.z.enum(l),是否色情:c.z.coerce.boolean()}),(0,a.ref)({类型:'主线',难度:'简单',奖励:'微薄',是否色情:!0}));async function s(){const e=`系统发布了一个${r.value.难度}的${r.value.类型}任务，奖励${r.value.奖励}，本次任务${r.value.是否色情?'必须':'禁止'}包含色情内容\x3c!--必须立即根据剧情生成合适的任务--\x3e`;await createChatMessages([{role:'user',message:e}]),await triggerSlash('/trigger'),toastr.success('已触发自动任务生成'),n('close')}return(e,t)=>((0,a.openBlock)(),(0,a.createBlock)(Y,{title:'自动发布任务',onClose:t[5]||(t[5]=e=>n('close'))},{default:(0,a.withCtx)(()=>[(0,a.createElementVNode)('form',wt,[(0,a.createElementVNode)('label',null,[t[6]||(t[6]=(0,a.createElementVNode)('span',null,'任务类型',-1)),(0,a.withDirectives)((0,a.createElementVNode)('select',{'onUpdate:modelValue':t[0]||(t[0]=e=>(0,a.unref)(r).类型=e)},[((0,a.openBlock)(!0),(0,a.createElementBlock)(a.Fragment,null,(0,a.renderList)((0,a.unref)(u),e=>((0,a.openBlock)(),(0,a.createElementBlock)('option',{key:e,value:e},(0,a.toDisplayString)(e),9,_t))),128))],512),[[a.vModelSelect,(0,a.unref)(r).类型]])]),(0,a.createElementVNode)('label',null,[t[7]||(t[7]=(0,a.createElementVNode)('span',null,'难度',-1)),(0,a.withDirectives)((0,a.createElementVNode)('select',{'onUpdate:modelValue':t[1]||(t[1]=e=>(0,a.unref)(r).难度=e)},[((0,a.openBlock)(),(0,a.createElementBlock)(a.Fragment,null,(0,a.renderList)(o,e=>(0,a.createElementVNode)('option',{key:e,value:e},(0,a.toDisplayString)(e),9,Dt)),64))],512),[[a.vModelSelect,(0,a.unref)(r).难度]])]),(0,a.createElementVNode)('label',null,[t[8]||(t[8]=(0,a.createElementVNode)('span',null,'奖励丰厚程度',-1)),(0,a.withDirectives)((0,a.createElementVNode)('select',{'onUpdate:modelValue':t[2]||(t[2]=e=>(0,a.unref)(r).奖励=e)},[((0,a.openBlock)(),(0,a.createElementBlock)(a.Fragment,null,(0,a.renderList)(l,e=>(0,a.createElementVNode)('option',{key:e,value:e},(0,a.toDisplayString)(e),9,St)),64))],512),[[a.vModelSelect,(0,a.unref)(r).奖励]])]),(0,a.createElementVNode)('label',zt,[(0,a.withDirectives)((0,a.createElementVNode)('input',{'onUpdate:modelValue':t[3]||(t[3]=e=>(0,a.unref)(r).是否色情=e),type:'checkbox'},null,512),[[a.vModelCheckbox,(0,a.unref)(r).是否色情]]),t[9]||(t[9]=(0,a.createElementVNode)('span',null,'包含色情内容',-1))]),(0,a.createElementVNode)('div',Pt,[(0,a.createElementVNode)('button',{type:'button',class:'ghost',onClick:t[4]||(t[4]=e=>n('close'))},'取消'),(0,a.createElementVNode)('button',{type:'submit',class:'primary',onClick:s},'生成')])])]),_:1}))}}),Mt={class:'form-grid'},$t={class:'form-actions',style:{'margin-bottom':'12px','padding-bottom':'0',border:'none'}},Tt=['value'],It={class:'form-actions'},Lt=(0,a.defineComponent)({__name:'PublishTask',emits:['close'],setup(e,{emit:t}){const n=(0,a.ref)(!1),o=t,l=c.z.object({名称:c.z.coerce.string()}).extend(i.shape.任务列表.valueType.shape),r=(0,a.ref)({名称:'',类型:'主线',说明:'',目标:'',奖励:'',惩罚:''});function s(){const e=l.safeDecode(r.value);if(e.error)return toastr.error('填写奖励时出错'),void o('close');const t=e.data;if(!t.名称)return void toastr.error('必须填写名称');const n=d();n.log(`已发布新任务'${t.名称}'`),_.set(n.data.任务列表,t.名称,i.shape.任务列表.valueType.decode(t)),toastr.success('已发布任务'),o('close')}return(e,t)=>((0,a.openBlock)(),(0,a.createElementBlock)(a.Fragment,null,[(0,a.createVNode)(Y,{title:'发布任务',onClose:t[8]||(t[8]=e=>o('close'))},{default:(0,a.withCtx)(()=>[(0,a.createElementVNode)('form',Mt,[(0,a.createElementVNode)('div',$t,[(0,a.createElementVNode)('button',{type:'button',class:'primary',style:{width:'100%'},onClick:t[0]||(t[0]=e=>n.value=!0)},'自动发布任务')]),(0,a.createElementVNode)('label',null,[t[10]||(t[10]=(0,a.createElementVNode)('span',null,'名称',-1)),(0,a.withDirectives)((0,a.createElementVNode)('input',{'onUpdate:modelValue':t[1]||(t[1]=e=>(0,a.unref)(r).名称=e),required:'',placeholder:'例如：夺回王城'},null,512),[[a.vModelText,(0,a.unref)(r).名称]])]),(0,a.createElementVNode)('label',null,[t[11]||(t[11]=(0,a.createElementVNode)('span',null,'类型',-1)),(0,a.withDirectives)((0,a.createElementVNode)('select',{'onUpdate:modelValue':t[2]||(t[2]=e=>(0,a.unref)(r).类型=e)},[((0,a.openBlock)(!0),(0,a.createElementBlock)(a.Fragment,null,(0,a.renderList)((0,a.unref)(u),e=>((0,a.openBlock)(),(0,a.createElementBlock)('option',{key:e,value:e},(0,a.toDisplayString)(e),9,Tt))),128))],512),[[a.vModelSelect,(0,a.unref)(r).类型]])]),(0,a.createElementVNode)('label',null,[t[12]||(t[12]=(0,a.createElementVNode)('span',null,'说明',-1)),(0,a.withDirectives)((0,a.createElementVNode)('textarea',{'onUpdate:modelValue':t[3]||(t[3]=e=>(0,a.unref)(r).说明=e),placeholder:'交代背景、系统指示等'},null,512),[[a.vModelText,(0,a.unref)(r).说明]])]),(0,a.createElementVNode)('label',null,[t[13]||(t[13]=(0,a.createElementVNode)('span',null,'目标',-1)),(0,a.withDirectives)((0,a.createElementVNode)('textarea',{'onUpdate:modelValue':t[4]||(t[4]=e=>(0,a.unref)(r).目标=e),placeholder:'列出具体步骤或达成条件'},null,512),[[a.vModelText,(0,a.unref)(r).目标]])]),(0,a.createElementVNode)('label',null,[t[14]||(t[14]=(0,a.createElementVNode)('span',null,'奖励',-1)),(0,a.withDirectives)((0,a.createElementVNode)('input',{'onUpdate:modelValue':t[5]||(t[5]=e=>(0,a.unref)(r).奖励=e),placeholder:'积分、道具、权限...'},null,512),[[a.vModelText,(0,a.unref)(r).奖励]])]),(0,a.createElementVNode)('label',null,[t[15]||(t[15]=(0,a.createElementVNode)('span',null,'惩罚',-1)),(0,a.withDirectives)((0,a.createElementVNode)('input',{'onUpdate:modelValue':t[6]||(t[6]=e=>(0,a.unref)(r).惩罚=e),placeholder:'失败后承担的代价（可选）'},null,512),[[a.vModelText,(0,a.unref)(r).惩罚]])]),(0,a.createElementVNode)('div',It,[(0,a.createElementVNode)('button',{type:'button',class:'ghost',onClick:t[7]||(t[7]=e=>o('close'))},'取消'),(0,a.createElementVNode)('button',{type:'submit',class:'primary',onClick:s},'发布')])])]),_:1}),(0,a.unref)(n)?((0,a.openBlock)(),(0,a.createBlock)(xt,{key:0,onClose:t[9]||(t[9]=e=>n.value=!1)})):(0,a.createCommentVNode)('v-if',!0)],64))}}),Ft={class:'form-grid'},qt={class:'form-actions with-auto'},Ut={class:'form-grid'},Rt=(0,a.defineComponent)({__name:'CreateShopItem',emits:['close'],setup(e,{emit:t}){const n=t,o=c.z.object({名称:c.z.coerce.string()}).extend(i.shape.商品列表.valueType.shape),l=(0,a.ref)({名称:'',描述:'',主角评价:'待评价，需要立即更新',积分价格:0}),r=(0,a.ref)(1),s=(0,a.ref)(!1);function u(){const e=o.safeDecode(l.value);if(e.error)return toastr.success('填写商品时出错'),void n('close');const t=e.data;if(!t.名称)return void toastr.error('必须填写名称');const a=d();t.名称&&(a.log(`已创建商品'${t.名称}'`),_.set(a.data.商品列表,t.名称,i.shape.商品列表.valueType.decode(t)),toastr.success('已创建商品')),n('close')}function m(){s.value=!1}async function p(){const e=Number.isFinite(r.value)?Math.floor(r.value):1,t=_.clamp(e,1,5),o=`系统上架了 ${t} 件商品\x3c!--商品必须根据当前背景与人设来生成符合情节逻辑的变量内容，本次必须新增 ${t} 件商品变量--\x3e`;try{await triggerSlash(`/send ${o} || /trigger`),toastr.success(`已请求系统自动生成 ${t} 件商品`),m(),n('close')}catch(e){console.error(e),toastr.error('触发自动创建失败，请稍后重试')}}return(e,t)=>((0,a.openBlock)(),(0,a.createElementBlock)(a.Fragment,null,[(0,a.createVNode)(Y,{title:'创建商城条目',description:'为商城上架新商品，供主角在系统界面中兑换。',onClose:t[5]||(t[5]=e=>n('close'))},{default:(0,a.withCtx)(()=>[(0,a.createElementVNode)('form',Ft,[(0,a.createElementVNode)('label',null,[t[7]||(t[7]=(0,a.createElementVNode)('span',null,'物品名称',-1)),(0,a.withDirectives)((0,a.createElementVNode)('input',{'onUpdate:modelValue':t[0]||(t[0]=e=>(0,a.unref)(l).名称=e),required:'',placeholder:'例如：星辉精粹'},null,512),[[a.vModelText,(0,a.unref)(l).名称]])]),(0,a.createElementVNode)('label',null,[t[8]||(t[8]=(0,a.createElementVNode)('span',null,'描述',-1)),(0,a.withDirectives)((0,a.createElementVNode)('textarea',{'onUpdate:modelValue':t[1]||(t[1]=e=>(0,a.unref)(l).描述=e),placeholder:'简述功效与限制'},null,512),[[a.vModelText,(0,a.unref)(l).描述]])]),(0,a.createElementVNode)('label',null,[t[9]||(t[9]=(0,a.createElementVNode)('span',null,'价格(积分)',-1)),(0,a.withDirectives)((0,a.createElementVNode)('input',{'onUpdate:modelValue':t[2]||(t[2]=e=>(0,a.unref)(l).积分价格=e),type:'number',min:'0',required:'',placeholder:'所需积分数'},null,512),[[a.vModelText,(0,a.unref)(l).积分价格,void 0,{number:!0}]])])]),(0,a.createElementVNode)('div',qt,[(0,a.createElementVNode)('button',{type:'button',class:'ghost',onClick:t[3]||(t[3]=e=>n('close'))},'取消'),(0,a.createElementVNode)('button',{type:'button',class:'ghost',onClick:t[4]||(t[4]=e=>s.value=!0)},'自动'),(0,a.createElementVNode)('button',{type:'submit',class:'primary',onClick:u},'上架')])]),_:1}),(0,a.unref)(s)?((0,a.openBlock)(),(0,a.createBlock)(Y,{key:0,title:'自动创建商品',description:'系统会一次性生成多件符合剧情的商品。',onClose:m},{default:(0,a.withCtx)(()=>[(0,a.createElementVNode)('form',Ut,[(0,a.createElementVNode)('label',null,[t[10]||(t[10]=(0,a.createElementVNode)('span',null,'创建数量',-1)),(0,a.withDirectives)((0,a.createElementVNode)('input',{'onUpdate:modelValue':t[6]||(t[6]=e=>(0,a.isRef)(r)?r.value=e:null),type:'number',min:'1',max:5,required:''},null,512),[[a.vModelText,(0,a.unref)(r),void 0,{number:!0}]]),(0,a.createElementVNode)('small',null,'范围：1 - '+(0,a.toDisplayString)(5))]),(0,a.createElementVNode)('div',{class:'form-actions'},[(0,a.createElementVNode)('button',{type:'button',class:'ghost',onClick:m},'取消'),(0,a.createElementVNode)('button',{type:'button',class:'primary',onClick:p},'确认生成')])])]),_:1})):(0,a.createCommentVNode)('v-if',!0)],64))}}),jt=(0,g.A)(Rt,[['__scopeId','data-v-b63e6292']]),At={class:'form-grid'},Ot={class:'form-actions'},Kt=(0,a.defineComponent)({__name:'GrantReward',emits:['close'],setup(e,{emit:t}){const n=t,o=c.z.object({名称:c.z.coerce.string(),描述:c.z.string().default(''),主角评价:c.z.string().default('待评价，需要立即更新'),增加积分:c.z.coerce.number().default(0),类型:c.z.enum(['物品','能力','增益','减益']),持续时间:c.z.string().default('一次性奖励'),触发条件:c.z.string().default('系统发放')}),l=(0,a.ref)({类型:'物品',名称:'',描述:'',主角评价:'待评价，需要立即更新',增加积分:0,持续时间:'永久',触发条件:'一直触发'});async function r(){const e=o.safeDecode(l.value);if(e.error)return toastr.error('填写奖励时出错'),console.error(e.error),void n('close');const t=e.data;if(!t.名称&&!t.增加积分)return void toastr.error('未给予任何奖励');const a=d();t.名称&&('物品'===t.类型?_.set(a.data.主角.物品栏,t.名称,i.shape.主角.shape.物品栏.valueType.decode({描述:t.描述,主角评价:t.主角评价})):'能力'===t.类型?_.set(a.data.主角.持有能力,t.名称,i.shape.主角.shape.持有能力.valueType.decode({描述:t.描述,主角评价:t.主角评价})):_.set(a.data.主角.当前状态,t.名称,i.shape.主角.shape.当前状态.valueType.decode({类型:'增益'===t.类型?'增益':'减益',描述:t.描述,主角评价:t.主角评价,持续时间:t.持续时间||'一次性奖励',触发条件:t.触发条件||'系统发放'}))),t.增加积分>0&&('string'==typeof a.data.系统状态.可用积分&&(a.data.系统状态.可用积分=0),a.data.系统状态.可用积分+=t.增加积分);const r=[];t.名称&&r.push(`类型：${t.类型}`,`名称：${t.名称}`,`描述：${t.描述||'无描述'}`),t.增加积分&&r.push(`增加积分：${t.增加积分}`),a.log('发放了一份奖励'+(r.length?`（${r.join('，')}）`:'')),toastr.success('已发放奖励'),n('close')}return(e,t)=>((0,a.openBlock)(),(0,a.createBlock)(Y,{title:'发布奖励',description:'将奖励发放到主角物品栏，或直接调整系统积分。',onClose:t[7]||(t[7]=e=>n('close'))},{default:(0,a.withCtx)(()=>[(0,a.createElementVNode)('form',At,[(0,a.createElementVNode)('label',null,[t[9]||(t[9]=(0,a.createElementVNode)('span',null,'奖励类型',-1)),(0,a.withDirectives)((0,a.createElementVNode)('select',{'onUpdate:modelValue':t[0]||(t[0]=e=>(0,a.unref)(l).类型=e)},[...t[8]||(t[8]=[(0,a.createElementVNode)('option',{value:'物品'},'物品',-1),(0,a.createElementVNode)('option',{value:'能力'},'能力',-1),(0,a.createElementVNode)('option',{value:'增益'},'增益',-1),(0,a.createElementVNode)('option',{value:'减益'},'减益',-1)])],512),[[a.vModelSelect,(0,a.unref)(l).类型]])]),(0,a.createElementVNode)('label',null,[t[10]||(t[10]=(0,a.createElementVNode)('span',null,'奖励名称',-1)),(0,a.withDirectives)((0,a.createElementVNode)('input',{'onUpdate:modelValue':t[1]||(t[1]=e=>(0,a.unref)(l).名称=e),required:'',placeholder:'例如：龙鳞护符'},null,512),[[a.vModelText,(0,a.unref)(l).名称]])]),(0,a.createElementVNode)('label',null,[t[11]||(t[11]=(0,a.createElementVNode)('span',null,'描述',-1)),(0,a.withDirectives)((0,a.createElementVNode)('textarea',{'onUpdate:modelValue':t[2]||(t[2]=e=>(0,a.unref)(l).描述=e),placeholder:'效果、来历等'},null,512),[[a.vModelText,(0,a.unref)(l).描述]])]),(0,a.createElementVNode)('label',null,[t[12]||(t[12]=(0,a.createElementVNode)('span',null,'增加积分',-1)),(0,a.withDirectives)((0,a.createElementVNode)('input',{'onUpdate:modelValue':t[3]||(t[3]=e=>(0,a.unref)(l).增加积分=e),type:'number',min:'0',placeholder:'可选，输入数字则增加积分'},null,512),[[a.vModelText,(0,a.unref)(l).增加积分,void 0,{number:!0}]])]),'增益'===(0,a.unref)(l).类型||'减益'===(0,a.unref)(l).类型?((0,a.openBlock)(),(0,a.createElementBlock)(a.Fragment,{key:0},[(0,a.createElementVNode)('label',null,[t[13]||(t[13]=(0,a.createElementVNode)('span',null,'持续时间',-1)),(0,a.withDirectives)((0,a.createElementVNode)('input',{'onUpdate:modelValue':t[4]||(t[4]=e=>(0,a.unref)(l).持续时间=e),placeholder:'例如：3回合、直到战斗结束'},null,512),[[a.vModelText,(0,a.unref)(l).持续时间]])]),(0,a.createElementVNode)('label',null,[t[14]||(t[14]=(0,a.createElementVNode)('span',null,'触发条件',-1)),(0,a.withDirectives)((0,a.createElementVNode)('input',{'onUpdate:modelValue':t[5]||(t[5]=e=>(0,a.unref)(l).触发条件=e),placeholder:'例如：受到攻击时触发'},null,512),[[a.vModelText,(0,a.unref)(l).触发条件]])])],64)):(0,a.createCommentVNode)('v-if',!0),(0,a.createElementVNode)('div',Ot,[(0,a.createElementVNode)('button',{type:'button',class:'ghost',onClick:t[6]||(t[6]=e=>n('close'))},'取消'),(0,a.createElementVNode)('button',{type:'submit',class:'primary',onClick:r},'发放')])])]),_:1}))}}),Wt={class:'shop-overlay'},Ht={class:'shop-container'},Gt={class:'shop-header'},Jt={class:'shop-info'},Qt={class:'shop-balance'},Xt={class:'balance-value'},Yt={class:'shop-content'},Zt={key:0,class:'shop-empty'},en={key:1,class:'shop-grid'},tn=['onClick'],nn={class:'item-header'},on={class:'item-name'},ln={class:'item-price'},an={class:'price-value'},rn={class:'item-description'},sn=['onClick'],cn={key:0,class:'info-bubble'},un=(0,a.defineComponent)({__name:'Shop',emits:['close'],setup(e,{emit:t}){const n=d(),o=(0,a.toRef)(n.data,'商品列表'),l=(0,a.toRef)(n.data.系统状态,'可用积分'),r=t,{activeBubble:s,toggleBubble:c}=re(),i=(0,a.ref)(!1),u=(0,a.ref)(''),m=(0,a.computed)(()=>`确定要下架商品 "${u.value}" 吗？`);function p(){n.log(`商品'${u.value}'已下架'`),_.unset(o.value,u.value),toastr.success('已下架商品'),i.value=!1}function f(e){return 0===Math.floor(e/2)}return(e,t)=>((0,a.openBlock)(),(0,a.createElementBlock)(a.Fragment,null,[(0,a.createElementVNode)('div',Wt,[(0,a.createElementVNode)('div',Ht,[(0,a.createElementVNode)('header',Gt,[t[2]||(t[2]=(0,a.createElementVNode)('h2',{class:'shop-title'},'系统商城',-1)),(0,a.createElementVNode)('button',{class:'shop-close',onClick:t[0]||(t[0]=e=>r('close'))},'×')]),(0,a.createElementVNode)('div',Jt,[(0,a.createElementVNode)('div',Qt,[t[3]||(t[3]=(0,a.createElementVNode)('span',{class:'balance-label'},'主角可用积分:',-1)),(0,a.createElementVNode)('span',Xt,(0,a.toDisplayString)((0,a.unref)(l)),1)]),t[4]||(t[4]=(0,a.createElementVNode)('div',{class:'shop-hint'},'仅供查看当前上架商品，购买需主角自行决定',-1))]),(0,a.createElementVNode)('div',Yt,[0===Object.keys((0,a.unref)(o)).length?((0,a.openBlock)(),(0,a.createElementBlock)('div',Zt,[...t[5]||(t[5]=[(0,a.createElementVNode)('div',{class:'empty-icon'},'🏪',-1),(0,a.createElementVNode)('p',null,'商城暂无商品',-1),(0,a.createElementVNode)('p',{class:'empty-hint'},'系统管理员可通过"创建商城"按钮上架商品',-1)])])):((0,a.openBlock)(),(0,a.createElementBlock)('div',en,[((0,a.openBlock)(!0),(0,a.createElementBlock)(a.Fragment,null,(0,a.renderList)((0,a.unref)(o),(e,n,o)=>((0,a.openBlock)(),(0,a.createElementBlock)('div',{key:n,class:(0,a.normalizeClass)(['shop-item',{affordable:(0,a.unref)(l)>=e.积分价格,active:(0,a.unref)(s)===n,'bubble-top':f(o)}]),onClick:e=>(0,a.unref)(c)(n)},[(0,a.createElementVNode)('div',nn,[(0,a.createElementVNode)('div',on,(0,a.toDisplayString)(n),1),(0,a.createElementVNode)('div',ln,[(0,a.createElementVNode)('span',an,(0,a.toDisplayString)(e.积分价格),1),t[6]||(t[6]=(0,a.createElementVNode)('span',{class:'price-unit'},'积分',-1))])]),(0,a.createElementVNode)('div',rn,(0,a.toDisplayString)(e.描述),1),(0,a.createElementVNode)('button',{class:'delist-button',title:'下架商品',onClick:(0,a.withModifiers)(e=>function(e){i.value=!0,u.value=e}(n),['stop'])},'×',8,sn),(0,a.unref)(s)===n?((0,a.openBlock)(),(0,a.createElementBlock)('div',cn,(0,a.toDisplayString)(e.主角评价),1)):(0,a.createCommentVNode)('v-if',!0)],10,tn))),128))]))])])]),(0,a.unref)(i)?((0,a.openBlock)(),(0,a.createBlock)(ae,{key:0,title:'下架商品',question:(0,a.unref)(m),onCancel:t[1]||(t[1]=e=>i.value=!1),onConfirm:p},null,8,['question'])):(0,a.createCommentVNode)('v-if',!0)],64))}}),dn=(0,g.A)(un,[['__scopeId','data-v-3396741a']]),mn={class:'task-overlay'},pn={class:'task-container'},fn={class:'task-header'},vn={class:'task-content'},bn={key:0,class:'task-empty'},yn={key:1,class:'task-list'},gn={class:'task-item-header'},En={class:'task-name'},kn={class:'task-type-badge'},Vn={class:'task-section'},Nn={class:'task-section-content'},hn={class:'task-section'},Cn={class:'task-section-content'},Bn={class:'task-footer'},wn={class:'task-reward'},_n={class:'reward-text'},Dn={class:'task-penalty'},Sn={class:'penalty-text'},zn={class:'task-actions'},Pn=['onClick'],xn=['onClick'],Mn=(0,a.defineComponent)({__name:'TaskList',emits:['close'],setup(e,{emit:t}){const n=d(),o=(0,a.toRef)(n.data,'任务列表'),l=t,r=(0,a.ref)(!1),s=(0,a.ref)(''),c=(0,a.computed)(()=>`确定要删除任务 "${s.value}" 吗？该任务将会消失。`);function i(){n.log(`任务'${s.value}'已消失`),_.unset(o.value,s.value),toastr.success('已删除任务'),r.value=!1}const u=(0,a.ref)(!1),m=(0,a.ref)(''),p=(0,a.computed)(()=>`确定要将任务 "${m.value}" 标记为失败吗？`);function f(){n.log(`任务'${m.value}'被标记为失败！惩罚：${_.get(o.value,m.value).惩罚}`),_.unset(o.value,m.value),toastr.success('已标记任务为失败'),u.value=!1}return(e,t)=>((0,a.openBlock)(),(0,a.createElementBlock)(a.Fragment,null,[(0,a.createElementVNode)('div',mn,[(0,a.createElementVNode)('div',pn,[(0,a.createElementVNode)('header',fn,[t[3]||(t[3]=(0,a.createElementVNode)('h2',{class:'task-title'},'任务列表',-1)),(0,a.createElementVNode)('button',{class:'task-close',onClick:t[0]||(t[0]=e=>l('close'))},'×')]),t[9]||(t[9]=(0,a.createElementVNode)('div',{class:'task-info'},[(0,a.createElementVNode)('div',{class:'task-hint'},'主角当前接受的所有任务')],-1)),(0,a.createElementVNode)('div',vn,[0===Object.keys((0,a.unref)(o)).length?((0,a.openBlock)(),(0,a.createElementBlock)('div',bn,[...t[4]||(t[4]=[(0,a.createElementVNode)('div',{class:'empty-icon'},'📝',-1),(0,a.createElementVNode)('p',null,'暂无任务',-1),(0,a.createElementVNode)('p',{class:'empty-hint'},'系统管理员可通过"发布任务"按钮发布新任务',-1)])])):((0,a.openBlock)(),(0,a.createElementBlock)('div',yn,[((0,a.openBlock)(!0),(0,a.createElementBlock)(a.Fragment,null,(0,a.renderList)((0,a.unref)(o),(e,n)=>((0,a.openBlock)(),(0,a.createElementBlock)('div',{key:n,class:(0,a.normalizeClass)(['task-item',`task-type-${e.类型}`])},[(0,a.createElementVNode)('div',gn,[(0,a.createElementVNode)('div',En,(0,a.toDisplayString)(n),1),(0,a.createElementVNode)('div',kn,(0,a.toDisplayString)(e.类型),1)]),(0,a.createElementVNode)('div',Vn,[t[5]||(t[5]=(0,a.createElementVNode)('div',{class:'task-section-title'},'任务说明',-1)),(0,a.createElementVNode)('div',Nn,(0,a.toDisplayString)(e.说明),1)]),(0,a.createElementVNode)('div',hn,[t[6]||(t[6]=(0,a.createElementVNode)('div',{class:'task-section-title'},'任务目标',-1)),(0,a.createElementVNode)('div',Cn,(0,a.toDisplayString)(e.目标),1)]),(0,a.createElementVNode)('div',Bn,[(0,a.createElementVNode)('div',wn,[t[7]||(t[7]=(0,a.createElementVNode)('span',{class:'reward-label'},'奖励:',-1)),(0,a.createElementVNode)('span',_n,(0,a.toDisplayString)(e.奖励),1)]),(0,a.createElementVNode)('div',Dn,[t[8]||(t[8]=(0,a.createElementVNode)('span',{class:'penalty-label'},'惩罚:',-1)),(0,a.createElementVNode)('span',Sn,(0,a.toDisplayString)(e.惩罚),1)])]),(0,a.createElementVNode)('div',zn,[(0,a.createElementVNode)('button',{class:'action-button delete',onClick:e=>function(e){r.value=!0,s.value=e}(n)},'删除',8,Pn),(0,a.createElementVNode)('button',{class:'action-button fail',onClick:e=>function(e){u.value=!0,m.value=e}(n)},'失败',8,xn)])],2))),128))]))])])]),(0,a.unref)(r)?((0,a.openBlock)(),(0,a.createBlock)(ae,{key:0,title:'删除任务',question:(0,a.unref)(c),onCancel:t[1]||(t[1]=e=>r.value=!1),onConfirm:i},null,8,['question'])):(0,a.createCommentVNode)('v-if',!0),(0,a.unref)(u)?((0,a.openBlock)(),(0,a.createBlock)(ae,{key:1,title:'标记任务为失败',question:(0,a.unref)(p),onCancel:t[2]||(t[2]=e=>u.value=!1),onConfirm:f},null,8,['question'])):(0,a.createCommentVNode)('v-if',!0)],64))}}),$n=(0,g.A)(Mn,[['__scopeId','data-v-69e0ed79']]),Tn={class:'status-system-wrapper'},In={class:'status-system'},Ln={class:'main-content'},Fn={class:'character-panel'},qn={class:'mobile-section'},Un=['aria-expanded'],Rn={class:'chevron'},jn={class:'mobile-section__body'},An={class:'mobile-section'},On=['aria-expanded'],Kn={class:'chevron'},Wn={class:'mobile-section__body'},Hn={class:'mobile-section mobile-only'},Gn=['aria-expanded'],Jn={class:'chevron'},Qn={class:'mobile-section__body'},Xn={class:'mobile-section mobile-only'},Yn=['aria-expanded'],Zn={class:'chevron'},eo={class:'mobile-section__body'},to={class:'right-panel'},no={class:'mobile-section'},oo=['aria-expanded'],lo={class:'chevron'},ao={class:'mobile-section__body'},ro={class:'mobile-section inventory-container'},so=['aria-expanded'],co={class:'chevron'},io={class:'mobile-section__body'},uo=(0,a.defineComponent)({__name:'App',setup(e){const t=(0,a.ref)(!1),n=(0,a.ref)(!1),o=(0,a.ref)(!1),l=(0,a.ref)(!1),c=(0,a.ref)(!1),i=(0,a.ref)(!1),u=(0,a.ref)('增益'),p=(0,a.ref)(!1),f=(0,a.toRef)(d(),'data'),v=(0,a.computed)(()=>f.value.世界??{当前地点:'未知地点',当前时间:'未知时间'}),b=(0,a.computed)(()=>f.value.主角??{});function y(e){return'待初始化'===e||void 0===e?'暂无':e}const g=(0,a.computed)(()=>{const e=b.value.能力面板??{};return r.map(t=>({key:t,数值:e[t]?.数值??'--',主角评价:y(e[t]?.主角评价)}))}),{buffList:k,debuffList:V,statusCounts:N}=m(b),h=(0,a.computed)(()=>{const e=b.value.持有能力??{};return'object'!=typeof e||Array.isArray(e)?[]:Object.entries(e).map(([e,t],n)=>({id:`${n}-${e}`,key:e,name:e,描述:t?.描述||'',主角评价:y(t?.主角评价)}))}),C=(0,a.computed)(()=>{const e=b.value.装备栏??{};return['主手','副手','防具','饰品'].map(t=>{const n=e[t];if(n&&'object'==typeof n){const e=n;return{label:t,item:e.装备??e.名称??e.value??'空置',evaluation:y(e.主角评价??e.评价)}}return{label:t,item:n??'空置',evaluation:'暂无'}})}),B=(0,a.computed)(()=>{const e=b.value.物品栏??{};return'object'!=typeof e||Array.isArray(e)?[]:Object.entries(e).map(([e,t],n)=>({id:`${n}-${e}`,key:e,名称:e||'未知物品',描述:t?.描述||'',主角评价:y(t?.主角评价),placeholder:!1}))}),w=(0,a.computed)(()=>v.value.当前时间||(new Date).toLocaleString('zh-CN')),{isMobile:D,sectionOpen:S,toggleSection:P}=function(){const e=(0,a.ref)(!1),t=(0,a.reactive)({info:!1,abilities:!1,equipment:!1,inventory:!1,status:!1,'held-abilities':!1});function n(){e.value=window.matchMedia('(max-width: 768px)').matches}return(0,a.onMounted)(()=>{n(),window.addEventListener('resize',n)}),(0,a.onBeforeUnmount)(()=>{window.removeEventListener('resize',n)}),(0,a.watch)(e,e=>{e||Object.keys(t).forEach(e=>{t[e]=!0})}),{isMobile:e,sectionState:t,sectionOpen:function(n){return!e.value||t[n]},toggleSection:function(n){e.value&&(t[n]=!t[n])}}}();return function(e){let t=null;function n(){const t=document.querySelector('.status-system-wrapper'),n=document.querySelector('.status-system');if(!t||!n)return;if(e.value)return n.style.transform='',n.style.width='',void(t.style.height='');const o=t.clientWidth/800;n.style.transform=`scale(${o})`,n.style.transformOrigin='top left',n.style.width='800px';const l=n.offsetHeight*o;t.style.height=`${l}px`}function o(){if(window.frameElement){const e=document.documentElement.scrollHeight;window.frameElement.style.height=`${e}px`}}(0,a.onMounted)(()=>{window.addEventListener('resize',n),setTimeout(()=>{n(),o()},0),t=new ResizeObserver(()=>{n(),o()});const e=document.querySelector('.status-system');e&&t.observe(e)}),(0,a.onBeforeUnmount)(()=>{window.removeEventListener('resize',n),t&&t.disconnect()}),(0,a.watch)(e,()=>{n()})}(D),(0,a.watch)(D,e=>{e&&(i.value=!1,p.value=!1)}),(0,a.watch)(i,e=>{e&&(p.value=!1)}),(0,a.watch)(p,e=>{e&&(i.value=!1)}),(e,r)=>((0,a.openBlock)(),(0,a.createElementBlock)('div',Tn,[(0,a.createElementVNode)('section',In,[(0,a.createVNode)(E,{'current-time-label':(0,a.unref)(w),location:(0,a.unref)(v).当前地点},null,8,['current-time-label','location']),(0,a.createElementVNode)('div',Ln,[(0,a.createElementVNode)('div',Fn,[(0,a.createElementVNode)('div',qn,[(0,a.createElementVNode)('button',{class:'collapse-toggle','aria-expanded':(0,a.unref)(S)('info'),onClick:r[0]||(r[0]=e=>(0,a.unref)(P)('info'))},[r[19]||(r[19]=(0,a.createElementVNode)('span',null,'角色信息',-1)),(0,a.createElementVNode)('span',Rn,(0,a.toDisplayString)((0,a.unref)(S)('info')?'−':'+'),1)],8,Un),(0,a.withDirectives)((0,a.createElementVNode)('div',jn,[(0,a.createVNode)(A,{name:(0,a.unref)(f).主角.姓名,gender:(0,a.unref)(f).主角.性别,age:(0,a.unref)(f).主角.年龄,'appearance-description':(0,a.unref)(b).外貌.描述,'self-evaluation':y((0,a.unref)(b).外貌.主角评价)},null,8,['name','gender','age','appearance-description','self-evaluation'])],512),[[a.vShow,(0,a.unref)(S)('info')]])]),(0,a.createElementVNode)('div',An,[(0,a.createElementVNode)('button',{class:'collapse-toggle','aria-expanded':(0,a.unref)(S)('abilities'),onClick:r[1]||(r[1]=e=>(0,a.unref)(P)('abilities'))},[r[20]||(r[20]=(0,a.createElementVNode)('span',null,'能力面板',-1)),(0,a.createElementVNode)('span',Kn,(0,a.toDisplayString)((0,a.unref)(S)('abilities')?'−':'+'),1)],8,On),(0,a.withDirectives)((0,a.createElementVNode)('div',Wn,[(0,a.createVNode)(ye,{abilities:(0,a.unref)(g),descriptions:(0,a.unref)(s)},null,8,['abilities','descriptions'])],512),[[a.vShow,(0,a.unref)(S)('abilities')]])]),(0,a.createElementVNode)('div',Hn,[(0,a.createElementVNode)('button',{class:'collapse-toggle','aria-expanded':(0,a.unref)(S)('status'),onClick:r[2]||(r[2]=e=>(0,a.unref)(P)('status'))},[r[21]||(r[21]=(0,a.createElementVNode)('span',null,'状态',-1)),(0,a.createElementVNode)('span',Jn,(0,a.toDisplayString)((0,a.unref)(S)('status')?'−':'+'),1)],8,Gn),(0,a.withDirectives)((0,a.createElementVNode)('div',Qn,[(0,a.createVNode)(Ue,{'buff-list':(0,a.unref)(k),'debuff-list':(0,a.unref)(V)},null,8,['buff-list','debuff-list'])],512),[[a.vShow,(0,a.unref)(S)('status')]])]),(0,a.createElementVNode)('div',Xn,[(0,a.createElementVNode)('button',{class:'collapse-toggle','aria-expanded':(0,a.unref)(S)('held-abilities'),onClick:r[3]||(r[3]=e=>(0,a.unref)(P)('held-abilities'))},[r[22]||(r[22]=(0,a.createElementVNode)('span',null,'持有能力',-1)),(0,a.createElementVNode)('span',Zn,(0,a.toDisplayString)((0,a.unref)(S)('held-abilities')?'−':'+'),1)],8,Yn),(0,a.withDirectives)((0,a.createElementVNode)('div',eo,[(0,a.createVNode)(Se,{abilities:(0,a.unref)(h)},null,8,['abilities'])],512),[[a.vShow,(0,a.unref)(S)('held-abilities')]])])]),(0,a.createElementVNode)('div',to,[(0,a.createElementVNode)('div',no,[(0,a.createElementVNode)('button',{class:'collapse-toggle','aria-expanded':(0,a.unref)(S)('equipment'),onClick:r[4]||(r[4]=e=>(0,a.unref)(P)('equipment'))},[r[23]||(r[23]=(0,a.createElementVNode)('span',null,'装备栏',-1)),(0,a.createElementVNode)('span',lo,(0,a.toDisplayString)((0,a.unref)(S)('equipment')?'−':'+'),1)],8,oo),(0,a.withDirectives)((0,a.createElementVNode)('div',ao,[(0,a.createVNode)(Ge,{slots:(0,a.unref)(C)},null,8,['slots'])],512),[[a.vShow,(0,a.unref)(S)('equipment')]])]),(0,a.createElementVNode)('div',ro,[(0,a.createElementVNode)('button',{class:'collapse-toggle','aria-expanded':(0,a.unref)(S)('inventory'),onClick:r[5]||(r[5]=e=>(0,a.unref)(P)('inventory'))},[r[24]||(r[24]=(0,a.createElementVNode)('span',null,'物品栏',-1)),(0,a.createElementVNode)('span',co,(0,a.toDisplayString)((0,a.unref)(S)('inventory')?'−':'+'),1)],8,so),(0,a.withDirectives)((0,a.createElementVNode)('div',io,[(0,a.createVNode)(tt,{inventory:(0,a.unref)(B),'is-mobile':(0,a.unref)(D)},null,8,['inventory','is-mobile'])],512),[[a.vShow,(0,a.unref)(S)('inventory')]])])])]),(0,a.createVNode)(Bt,null,{left:(0,a.withCtx)(()=>[(0,a.createVNode)(ct,{show:(0,a.unref)(i),'onUpdate:show':r[6]||(r[6]=e=>(0,a.isRef)(i)?i.value=e:null),tab:(0,a.unref)(u),'onUpdate:tab':r[7]||(r[7]=e=>(0,a.isRef)(u)?u.value=e:null),'buff-list':(0,a.unref)(k),'debuff-list':(0,a.unref)(V),'buff-count':(0,a.unref)(N).增益,'debuff-count':(0,a.unref)(N).减益},null,8,['show','tab','buff-list','debuff-list','buff-count','debuff-count']),(0,a.createVNode)(kt,{show:(0,a.unref)(p),'onUpdate:show':r[8]||(r[8]=e=>(0,a.isRef)(p)?p.value=e:null),abilities:(0,a.unref)(h)},null,8,['show','abilities'])]),right:(0,a.withCtx)(()=>[(0,a.createElementVNode)('button',{class:'action-button',type:'button',onClick:r[9]||(r[9]=e=>t.value=!0)},'发布任务'),(0,a.createElementVNode)('button',{class:'action-button',type:'button',onClick:r[10]||(r[10]=e=>n.value=!0)},'查看任务'),(0,a.createElementVNode)('button',{class:'action-button',type:'button',onClick:r[11]||(r[11]=e=>o.value=!0)},'发布奖励'),(0,a.createElementVNode)('button',{class:'action-button',type:'button',onClick:r[12]||(r[12]=e=>l.value=!0)},'创建商品'),(0,a.createElementVNode)('button',{class:'action-button',type:'button',onClick:r[13]||(r[13]=e=>c.value=!0)},'查看商城')]),_:1})]),(0,a.unref)(t)?((0,a.openBlock)(),(0,a.createBlock)(Lt,{key:0,onClose:r[14]||(r[14]=e=>t.value=!1)})):(0,a.createCommentVNode)('v-if',!0),(0,a.unref)(o)?((0,a.openBlock)(),(0,a.createBlock)(Kt,{key:1,onClose:r[15]||(r[15]=e=>o.value=!1)})):(0,a.createCommentVNode)('v-if',!0),(0,a.unref)(l)?((0,a.openBlock)(),(0,a.createBlock)(jt,{key:2,onClose:r[16]||(r[16]=e=>l.value=!1)})):(0,a.createCommentVNode)('v-if',!0),(0,a.unref)(c)?((0,a.openBlock)(),(0,a.createBlock)(dn,{key:3,onClose:r[17]||(r[17]=e=>c.value=!1)})):(0,a.createCommentVNode)('v-if',!0),(0,a.unref)(n)?((0,a.openBlock)(),(0,a.createBlock)($n,{key:4,onClose:r[18]||(r[18]=e=>n.value=!1)})):(0,a.createCommentVNode)('v-if',!0)]))}});$(async()=>{await waitGlobalInitialized('Mvu');const t=(0,a.createApp)(uo);t.use(e()),t.mount('#app')});
//# sourceMappingURL=index.js.map</script><style>@import url(https://fontsapi.zeoseven.com/570/main/result.css);
.top-info-bar[data-v-0f177904]{background:#333;color:var(--text-primary);padding:8px 20px;display:flex;justify-content:space-between;align-items:center;font-size:12px;position:relative;z-index:2;border-bottom:3px solid var(--border-color)}.info-left[data-v-0f177904]{display:flex;gap:20px;align-items:center}.info-right[data-v-0f177904]{display:flex;gap:15px;align-items:center;flex:1;justify-content:flex-end}.status-badge[data-v-0f177904]{background:var(--bg-input);color:#000;padding:2px 8px;border:1px solid var(--border-color);font-size:10px;min-width:240px;text-align:center;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.status-indicator[data-v-0f177904]{width:8px;height:8px;background:var(--bg-success);border:1px solid var(--border-color);border-radius:50%;display:inline-block;margin-right:5px}.status-indicator.offline[data-v-0f177904]{background:var(--bg-error)}.status-indicator.warning[data-v-0f177904]{background:var(--bg-warning)}@media (max-width:768px){.top-info-bar[data-v-0f177904]{padding:6px 12px;font-size:10px}.info-right[data-v-0f177904]{flex:none}.status-badge[data-v-0f177904]{min-width:auto;max-width:180px;font-size:9px}}
.character-info-card[data-v-4f0bcb15]{background:var(--bg-input);border:2px solid var(--border-color);padding:8px;display:flex;flex-direction:column;gap:10px}.character-header[data-v-4f0bcb15]{display:flex;gap:15px;flex-shrink:0}.character-avatar[data-v-4f0bcb15]{width:70px;height:70px;background:var(--bg-input);border:2px solid var(--border-color);flex-shrink:0;cursor:pointer;position:relative;overflow:hidden;background-size:cover;background-position:center;transition:all .2s ease}.character-avatar[data-v-4f0bcb15]:hover{border-color:#666;opacity:.9}.character-avatar.has-avatar[data-v-4f0bcb15]{background-color:rgba(0,0,0,0)}.character-avatar.uploading[data-v-4f0bcb15]{cursor:wait;opacity:.6}.character-avatar .avatar-placeholder[data-v-4f0bcb15]{width:100%;height:100%;display:flex;align-items:center;justify-content:center;font-size:24px;color:#666;font-weight:bold;-webkit-user-select:none;user-select:none}.character-avatar .avatar-loading[data-v-4f0bcb15]{position:absolute;inset:0;display:flex;align-items:center;justify-content:center;background:rgba(0,0,0,.5);color:#fff;font-size:12px;animation:pulse-4f0bcb15 1.5s ease-in-out infinite}@keyframes pulse-4f0bcb15{0%,100%{opacity:.6}50%{opacity:1}}.character-name[data-v-4f0bcb15]{font-size:18px;color:#000;margin-bottom:8px;text-transform:uppercase;letter-spacing:1px;text-shadow:1px 1px 0px #fff}.character-stats[data-v-4f0bcb15]{display:grid;grid-template-columns:repeat(4,1fr);gap:6px;font-size:11px}.stat-item[data-v-4f0bcb15]{display:flex;justify-content:space-between;align-items:center;background:var(--bg-card);padding:5px 8px;border:1px solid var(--border-color);min-height:24px}.stat-label[data-v-4f0bcb15]{color:#000;font-weight:bold;font-size:10px}.stat-value[data-v-4f0bcb15]{color:#000;font-size:10px}.character-description-section[data-v-4f0bcb15]{display:flex;flex-direction:column;gap:6px;flex-shrink:0}.appearance-description[data-v-4f0bcb15]{background:var(--bg-card);border:1px solid var(--border-color);border-top:2px solid var(--border-color);padding:8px;font-size:10px;color:#000;line-height:1.4;min-height:35px;display:-webkit-box;line-clamp:2;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden;text-overflow:ellipsis}.self-evaluation[data-v-4f0bcb15]{background:#e8e8e8;border:1px solid var(--border-color);border-left:3px solid #666;padding:8px 10px;font-size:10px;color:#333;line-height:1.4;min-height:35px;display:-webkit-box;line-clamp:2;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden;text-overflow:ellipsis}@media (max-width:768px){.character-info-card[data-v-4f0bcb15]{padding:8px;gap:8px}.character-avatar[data-v-4f0bcb15]{width:60px;height:60px}.character-name[data-v-4f0bcb15]{font-size:14px;margin-bottom:6px}.character-stats[data-v-4f0bcb15]{grid-template-columns:repeat(2,1fr);gap:5px;font-size:10px}.stat-item[data-v-4f0bcb15]{padding:4px 6px;min-height:22px}}
.pixel-modal[data-v-e9cd6f88]{position:fixed;inset:0;z-index:9999;display:flex;align-items:center;justify-content:center;animation:fadeIn-e9cd6f88 .3s ease-out forwards}.pixel-modal__backdrop[data-v-e9cd6f88]{position:absolute;inset:0;background:rgba(0,0,0,.7)}.pixel-modal__panel[data-v-e9cd6f88]{position:relative;width:min(320px,92vw);max-height:min(560px,100% - 32px);margin:16px;overflow:hidden;display:flex;flex-direction:column;background:#f5f5f5;border:4px solid #000;padding:0;color:#000;font-family:"Fusion Pixel 12px M latin","Courier New",monospace;box-shadow:8px 8px 0 rgba(0,0,0,.3);animation:slideUp-e9cd6f88 .3s ease-out forwards}.pixel-modal__header[data-v-e9cd6f88]{background:#333;color:#fff;padding:5px 10px;border-bottom:4px solid #000;display:flex;justify-content:space-between;align-items:center}.pixel-modal__title[data-v-e9cd6f88]{margin:0;font-size:13px;text-transform:uppercase;letter-spacing:1px;text-shadow:2px 2px 0px #000}.pixel-modal__close[data-v-e9cd6f88]{background:#fff;border:2px solid #000;color:#000;width:20px;height:20px;cursor:pointer;font-size:15px;line-height:1;font-family:"Courier New",monospace;transition:all .1s}.pixel-modal__close[data-v-e9cd6f88]:hover{background:#ddd}.pixel-modal__close[data-v-e9cd6f88]:active{box-shadow:inset 2px 2px 0 rgba(0,0,0,.3)}.pixel-modal__scroll[data-v-e9cd6f88]{flex:1;overflow-y:auto;padding:0 6px 8px}.pixel-modal__description[data-v-e9cd6f88]{background:#ffc;border:2px solid #f90;padding:5px;margin:6px 10px;font-size:10px;line-height:1.3}.pixel-modal__body[data-v-e9cd6f88]{padding:8px 4px 4px}.pixel-modal__body[data-v-e9cd6f88] .form-grid{display:flex;flex-direction:column;gap:6px}.pixel-modal__body[data-v-e9cd6f88] .form-grid label{display:flex;flex-direction:column;gap:6px;font-size:10px;color:#000}.pixel-modal__body[data-v-e9cd6f88] .form-grid label>span:first-child{font-weight:bold;font-size:9px;padding-top:0}.pixel-modal__body[data-v-e9cd6f88] .form-grid input,.pixel-modal__body[data-v-e9cd6f88] .form-grid textarea,.pixel-modal__body[data-v-e9cd6f88] .form-grid select{flex:1;width:100%;padding:4px 6px;border:1px solid #000;background:#fff;color:#000;font-size:10px;font-family:"Fusion Pixel 12px M latin","Courier New",monospace}.pixel-modal__body[data-v-e9cd6f88] .form-grid input:focus,.pixel-modal__body[data-v-e9cd6f88] .form-grid textarea:focus,.pixel-modal__body[data-v-e9cd6f88] .form-grid select:focus{outline:none;background:#ffc;border-color:red}.pixel-modal__body[data-v-e9cd6f88] .form-grid input::placeholder,.pixel-modal__body[data-v-e9cd6f88] .form-grid textarea::placeholder,.pixel-modal__body[data-v-e9cd6f88] .form-grid select::placeholder{color:#999}.pixel-modal__body[data-v-e9cd6f88] .form-grid textarea{resize:vertical;min-height:42px}.pixel-modal__body[data-v-e9cd6f88] .form-grid select{cursor:pointer}.pixel-modal__body[data-v-e9cd6f88] .form-grid__checkbox{display:inline-flex !important;flex-direction:row !important;align-items:stretch !important;gap:0 !important;padding:0 !important;margin:0 auto !important;border:1px solid #000 !important;background:#fff !important;transition:all .1s;cursor:pointer;position:relative;overflow:hidden;height:26px !important;width:auto !important;max-width:-moz-fit-content !important;max-width:fit-content !important}.pixel-modal__body[data-v-e9cd6f88] .form-grid__checkbox:hover{background:#f9f9f9 !important}.pixel-modal__body[data-v-e9cd6f88] .form-grid__checkbox:active{background:#f0f0f0 !important}.pixel-modal__body[data-v-e9cd6f88] .form-grid__checkbox>span:first-child{display:none !important}.pixel-modal__body[data-v-e9cd6f88] .form-grid__checkbox input[type=checkbox]{appearance:none !important;-webkit-appearance:none !important;-moz-appearance:none !important;width:26px !important;height:26px !important;min-height:unset !important;border:none !important;border-right:1px solid #000 !important;background:#e8e8e8 !important;cursor:pointer !important;position:relative;flex:none !important;margin:0 !important;padding:0 !important;transition:all .1s}.pixel-modal__body[data-v-e9cd6f88] .form-grid__checkbox input[type=checkbox]::before{content:"";position:absolute;left:50%;top:50%;transform:translate(-50%,-50%);width:12px;height:12px;border:1px solid #666;background:#fff}.pixel-modal__body[data-v-e9cd6f88] .form-grid__checkbox input[type=checkbox]:checked{background:#000 !important}.pixel-modal__body[data-v-e9cd6f88] .form-grid__checkbox input[type=checkbox]:checked::before{background:#000;border-color:#fff}.pixel-modal__body[data-v-e9cd6f88] .form-grid__checkbox input[type=checkbox]:checked::after{content:"";position:absolute;left:50%;top:50%;transform:translate(-50%,-50%) translate(-1px,-1px) rotate(45deg);width:5px;height:8px;border:solid #fff;border-width:0 2px 2px 0;z-index:1}.pixel-modal__body[data-v-e9cd6f88] .form-grid__checkbox input[type=checkbox]:focus{outline:none}.pixel-modal__body[data-v-e9cd6f88] .form-grid__checkbox>span:last-child{flex:1 !important;padding:5px 8px !important;min-width:auto !important;font-weight:normal !important;cursor:pointer !important;-webkit-user-select:none !important;user-select:none !important;display:flex !important;align-items:center !important;font-size:10px !important;color:#000 !important;line-height:1.4 !important}.pixel-modal__body[data-v-e9cd6f88] .form-grid__checkbox:focus-within{box-shadow:0 0 0 2px rgba(0,0,0,.15)}.pixel-modal__body[data-v-e9cd6f88] .form-actions{display:flex;justify-content:flex-end;gap:5px;margin-top:8px;padding-top:6px;border-top:2px solid #000}.pixel-modal__body[data-v-e9cd6f88] .form-actions button{background:#fff;border:2px solid #000;color:#000;padding:4px 10px;font-size:10px;cursor:pointer;font-family:"Fusion Pixel 12px M latin","Courier New",monospace;text-transform:uppercase;transition:all .1s}.pixel-modal__body[data-v-e9cd6f88] .form-actions button:hover{background:#ddd}.pixel-modal__body[data-v-e9cd6f88] .form-actions button:active{border-width:3px 5px 5px 3px}.pixel-modal__body[data-v-e9cd6f88] .form-actions button:disabled{opacity:.5;cursor:not-allowed}.pixel-modal__body[data-v-e9cd6f88] .form-actions button.primary{background:#000;color:#fff}.pixel-modal__body[data-v-e9cd6f88] .form-actions button.primary:hover{background:#333}.pixel-modal__body[data-v-e9cd6f88] .form-actions button.ghost{background:rgba(0,0,0,0);border:2px solid #000}.pixel-modal__body[data-v-e9cd6f88] .form-actions button.ghost:hover{background:rgba(0,0,0,.05)}.pixel-modal__scroll[data-v-e9cd6f88]::-webkit-scrollbar{height:6px}.pixel-modal__scroll[data-v-e9cd6f88]::-webkit-scrollbar-track{background:rgba(0,0,0,.08)}.pixel-modal__scroll[data-v-e9cd6f88]{scrollbar-width:thin;scrollbar-color:#7a7a7a rgba(0,0,0,.08)}.pixel-modal__scroll[data-v-e9cd6f88]::-webkit-scrollbar-thumb{background:#7a7a7a;border:1px solid #f5f5f5}@keyframes fadeIn-e9cd6f88{from{opacity:0}to{opacity:1}}@keyframes slideUp-e9cd6f88{from{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}@media (max-width:768px){.pixel-modal__panel[data-v-e9cd6f88]{width:100%;max-height:calc(100% - 12px);margin:6px}}
.confirm-modal[data-v-2deec386]{display:flex;flex-direction:column;gap:8px;font-size:10px;line-height:1.4;color:#000}.confirm-modal__question[data-v-2deec386]{font-weight:bold;margin:0}.confirm-modal__hint[data-v-2deec386]{background:#fffbcc;border:2px solid #ffb74d;padding:6px}.confirm-modal__body[data-v-2deec386]{color:#333}.confirm-modal__actions[data-v-2deec386]{display:flex;gap:6px;justify-content:flex-end}[data-v-2deec386] .confirm-button{flex:1;min-width:0;padding:6px 10px;border:2px solid #000;background:#fff;color:#000;cursor:pointer;font-size:10px;font-family:"Fusion Pixel 12px M latin","Courier New",monospace;transition:background .1s}[data-v-2deec386] .confirm-button.primary{background:#000;color:#fff}[data-v-2deec386] .confirm-button.ghost{background:#fff;color:#000}[data-v-2deec386] .confirm-button:hover{background:rgba(0,0,0,.08)}
.abilities-panel[data-v-6d7e1566]{background:var(--bg-input);border:2px solid var(--border-color);padding:8px;display:grid;grid-template-columns:repeat(3,1fr);grid-template-rows:repeat(2,minmax(70px,auto));gap:6px;flex:1;min-height:0;align-content:start;position:relative;overflow:visible}.ability-item[data-v-6d7e1566]{background:var(--bg-card);border:1px solid var(--border-color);padding:5px;text-align:center;cursor:pointer;transition:all .2s;display:flex;flex-direction:column;justify-content:center;align-items:center;-webkit-user-select:none;user-select:none;touch-action:none;position:relative}.ability-item[data-v-6d7e1566]:hover{background:var(--bg-card-hover);border-color:#666}.ability-item.active[data-v-6d7e1566]{background:#e3f2fd;border-color:#1976d2;box-shadow:0 0 0 2px rgba(25,118,210,.15)}.ability-item__name[data-v-6d7e1566]{font-size:10px;font-weight:bold;color:#000;margin-bottom:3px}.ability-item__value[data-v-6d7e1566]{font-size:11px;font-weight:bold;color:#000;margin-bottom:2px}.ability-item__desc[data-v-6d7e1566]{font-size:7px;color:#666;line-height:1.1}.ability-bubble[data-v-6d7e1566]{position:absolute;top:calc(100% + 8px);left:50%;transform:translateX(-50%);background:#f5f5f5;border:2px solid var(--border-color);padding:8px 10px;font-size:9px;color:#000;white-space:normal;z-index:20;animation:bubblePop-6d7e1566 .2s ease-out;max-width:200px;min-width:120px;text-align:left;line-height:1.4;box-shadow:2px 2px 0 rgba(0,0,0,.2);pointer-events:none}.ability-bubble[data-v-6d7e1566]::before{content:"";position:absolute;bottom:100%;left:50%;transform:translateX(-50%);width:0;height:0;border-style:solid;border-width:0 6px 6px 6px;border-color:rgba(0,0,0,0) rgba(0,0,0,0) var(--border-color) rgba(0,0,0,0)}.ability-bubble[data-v-6d7e1566]::after{content:"";position:absolute;bottom:100%;left:50%;transform:translateX(-50%);width:0;height:0;border-style:solid;border-width:0 5px 5px 5px;border-color:rgba(0,0,0,0) rgba(0,0,0,0) #f5f5f5 rgba(0,0,0,0);margin-bottom:-1px}@media (min-width:769px){.abilities-panel .ability-item:nth-last-child(-n+3) .ability-bubble[data-v-6d7e1566]{top:auto;bottom:calc(100% + 8px)}.abilities-panel .ability-item:nth-last-child(-n+3) .ability-bubble[data-v-6d7e1566]::before{bottom:auto;top:100%;border-width:6px 6px 0 6px;border-color:var(--border-color) rgba(0,0,0,0) rgba(0,0,0,0) rgba(0,0,0,0)}.abilities-panel .ability-item:nth-last-child(-n+3) .ability-bubble[data-v-6d7e1566]::after{bottom:auto;top:100%;border-width:5px 5px 0 5px;border-color:#f5f5f5 rgba(0,0,0,0) rgba(0,0,0,0) rgba(0,0,0,0);margin-bottom:0;margin-top:-1px}}@media (max-width:768px){.abilities-panel[data-v-6d7e1566]{grid-template-columns:repeat(2,1fr);overflow:visible}.abilities-panel .ability-item:nth-last-child(-n+2) .ability-bubble[data-v-6d7e1566]{top:auto;bottom:calc(100% + 8px)}.abilities-panel .ability-item:nth-last-child(-n+2) .ability-bubble[data-v-6d7e1566]::before{bottom:auto;top:100%;border-width:6px 6px 0 6px;border-color:var(--border-color) rgba(0,0,0,0) rgba(0,0,0,0) rgba(0,0,0,0)}.abilities-panel .ability-item:nth-last-child(-n+2) .ability-bubble[data-v-6d7e1566]::after{bottom:auto;top:100%;border-width:5px 5px 0 5px;border-color:#f5f5f5 rgba(0,0,0,0) rgba(0,0,0,0) rgba(0,0,0,0);margin-bottom:0;margin-top:-1px}}.ability-edit-field[data-v-6d7e1566]{display:flex;flex-direction:column;gap:4px;font-size:10px;color:#000}.ability-edit-field input[data-v-6d7e1566]{border:2px solid #000;padding:6px;font-size:12px;font-family:inherit;background:#fff;color:#000;width:100%}.ability-edit-field input[data-v-6d7e1566]:focus{outline:none;box-shadow:0 0 0 2px rgba(0,0,0,.2)}@keyframes bubblePop-6d7e1566{from{opacity:0;transform:translateX(-50%) translateY(5px)}to{opacity:1;transform:translateX(-50%) translateY(0)}}
.ability-status-panel[data-v-5b2e1f3e]{background:var(--bg-input);border:2px solid var(--border-color);padding:10px;display:flex;flex-direction:column;gap:10px}.ability-status-group[data-v-5b2e1f3e]{display:flex;flex-direction:column;gap:6px}.ability-status-title[data-v-5b2e1f3e]{font-weight:bold;font-size:10px;color:#000}.ability-status-list[data-v-5b2e1f3e]{list-style:none;margin:0;padding:0;display:flex;flex-direction:column;gap:6px}.ability-status-item[data-v-5b2e1f3e]{background:var(--bg-card);border:1px solid var(--border-color);padding:6px;font-size:8px;text-align:left;line-height:1.3;cursor:pointer;-webkit-user-select:none;user-select:none;touch-action:none}.ability-status-item.placeholder[data-v-5b2e1f3e]{border-style:dashed;color:#888;background:#fafafa;pointer-events:none}.ability-status-name[data-v-5b2e1f3e]{font-weight:bold;font-size:9px;margin-bottom:2px;color:#000}.ability-status-desc[data-v-5b2e1f3e]{font-size:8px;color:#111}.ability-status-eval[data-v-5b2e1f3e]{font-size:8px;color:#222;margin-top:2px}.ability-status-empty[data-v-5b2e1f3e]{font-size:9px;color:#666;text-align:center}
.status-effects-empty[data-v-e2868310]{font-size:10px;color:#999;text-align:center;padding:20px}.status-effects-empty.compact[data-v-e2868310]{font-size:9px;color:#666;padding:10px}.status-effects-list[data-v-e2868310]{list-style:none;margin:0;padding:0;display:flex;flex-direction:column;gap:8px}.status-effects-list.compact[data-v-e2868310]{gap:6px}.status-effect-item[data-v-e2868310]{background:var(--bg-card);border:1px solid var(--border-color);padding:8px;font-size:9px;text-align:left;line-height:1.5;cursor:pointer;-webkit-user-select:none;user-select:none;touch-action:none;position:relative;transition:background .2s,border-color .2s;color:#000}.status-effect-item.active[data-v-e2868310]{background:#e3f2fd;border-color:#1976d2;box-shadow:0 0 0 2px rgba(25,118,210,.15)}.status-effect-item.compact[data-v-e2868310]{padding:6px;font-size:8px;line-height:1.3}.status-effect-item.placeholder[data-v-e2868310]{border-style:dashed;color:#888;background:#fafafa;pointer-events:none}.status-effect-name[data-v-e2868310]{font-weight:bold;font-size:11px;margin-bottom:6px;color:#000;padding-bottom:5px;border-bottom:1px solid var(--border-color)}.status-effect-name.compact[data-v-e2868310]{font-size:9px;margin-bottom:2px;padding-bottom:0;border-bottom:none}.status-effect-desc[data-v-e2868310]{font-size:10px;color:#333;margin-bottom:6px;line-height:1.5}.status-effect-desc.compact[data-v-e2868310]{font-size:8px;color:#111;margin-bottom:3px;line-height:1.3}.status-effect-meta[data-v-e2868310]{font-size:9px;color:#888;display:flex;flex-direction:column;gap:3px;margin-top:6px;padding-top:6px;border-top:1px dashed var(--border-color)}.status-effect-meta span[data-v-e2868310]{display:flex;align-items:center;gap:4px}.status-effect-meta span[data-v-e2868310]::before{content:"•";color:#aaa}.status-effect-meta.compact[data-v-e2868310]{font-size:7px;color:#666;gap:2px;margin-top:0;padding-top:0;border-top:none}.status-effect-meta.compact span[data-v-e2868310]::before{content:""}.status-bubble[data-v-e2868310]{position:absolute;top:calc(100% + 8px);left:50%;transform:translateX(-50%);background:#f5f5f5;border:2px solid var(--border-color);padding:8px 10px;font-size:9px;color:#000;white-space:normal;z-index:9999;animation:bubblePop-e2868310 .2s ease-out;max-width:200px;min-width:120px;text-align:left;line-height:1.4;box-shadow:2px 2px 0 rgba(0,0,0,.2);pointer-events:none}.status-bubble[data-v-e2868310]::before{content:"";position:absolute;bottom:100%;left:50%;transform:translateX(-50%);width:0;height:0;border-style:solid;border-width:0 6px 6px 6px;border-color:rgba(0,0,0,0) rgba(0,0,0,0) var(--border-color) rgba(0,0,0,0)}.status-bubble[data-v-e2868310]::after{content:"";position:absolute;bottom:100%;left:50%;transform:translateX(-50%);width:0;height:0;border-style:solid;border-width:0 5px 5px 5px;border-color:rgba(0,0,0,0) rgba(0,0,0,0) #f5f5f5 rgba(0,0,0,0);margin-bottom:-1px}.status-effect-item.bubble-top .status-bubble[data-v-e2868310]{top:auto;bottom:calc(100% + 8px)}.status-effect-item.bubble-top .status-bubble[data-v-e2868310]::before{bottom:auto;top:100%;border-width:6px 6px 0 6px;border-color:var(--border-color) rgba(0,0,0,0) rgba(0,0,0,0) rgba(0,0,0,0)}.status-effect-item.bubble-top .status-bubble[data-v-e2868310]::after{bottom:auto;top:100%;border-width:5px 5px 0 5px;border-color:#f5f5f5 rgba(0,0,0,0) rgba(0,0,0,0) rgba(0,0,0,0);margin-bottom:0;margin-top:-1px}@keyframes bubblePop-e2868310{from{opacity:0;transform:translateX(-50%) scale(0.9)}to{opacity:1;transform:translateX(-50%) scale(1)}}
.status-effects-panel[data-v-7ab5f997]{background:var(--bg-input);border:2px solid var(--border-color);display:flex;flex-direction:column}.status-tabs[data-v-7ab5f997]{display:flex;background:#fff;border-top:2px solid var(--border-color);border-bottom:2px solid var(--border-color)}.status-tab[data-v-7ab5f997]{flex:1;padding:8px 0;text-align:center;background:#fff;border:none;border-right:2px solid var(--border-color);font-family:var(--pixel-font);font-size:10px;font-weight:bold;cursor:pointer;transition:color .2s,background .2s;color:#000}.status-tab[data-v-7ab5f997]:last-child{border-right:none}.status-tab[data-v-7ab5f997]:hover{background:#f5f5f5}.status-tab.active[data-v-7ab5f997]{color:#1976d2}.status-content[data-v-7ab5f997]{padding:10px;display:flex;flex-direction:column;gap:6px}
.equipment-section[data-v-f314b564]{flex:1;padding:10px;background:var(--bg-card);border-bottom:2px solid var(--border-color);overflow:visible}.section-title[data-v-f314b564]{font-size:11px;font-weight:bold;color:#000;margin-bottom:6px}.equipment-grid[data-v-f314b564]{display:grid;grid-template-columns:1fr 1fr;gap:6px;grid-auto-rows:60px;overflow:visible}.equipment-slot[data-v-f314b564]{background:var(--bg-input);border:1px solid var(--border-color);padding:6px 8px;font-size:9px;text-align:center;cursor:pointer;position:relative;overflow:visible}.equipment-slot.active[data-v-f314b564]{background:#e3f2fd;border-color:#1976d2}.slot-name[data-v-f314b564]{color:#000;font-weight:bold;margin-bottom:2px;font-size:8px}.slot-item[data-v-f314b564]{color:#000;font-size:9px;word-break:break-word}.info-bubble[data-v-f314b564]{position:absolute;bottom:calc(100% + 6px);left:50%;transform:translateX(-50%);background:#f5f5f5;border:2px solid var(--border-color);padding:6px 8px;font-size:8px;color:#000;white-space:normal;z-index:25;animation:bubblePop-f314b564 .2s ease-out;max-width:180px;min-width:120px;text-align:left;line-height:1.3;box-shadow:2px 2px 0 rgba(0,0,0,.2);pointer-events:none}.info-bubble[data-v-f314b564]::before{content:"";position:absolute;top:100%;left:50%;transform:translateX(-50%);width:0;height:0;border-style:solid;border-width:6px 6px 0 6px;border-color:var(--border-color) rgba(0,0,0,0) rgba(0,0,0,0) rgba(0,0,0,0)}.info-bubble[data-v-f314b564]::after{content:"";position:absolute;top:100%;left:50%;transform:translateX(-50%);width:0;height:0;border-style:solid;border-width:5px 5px 0 5px;border-color:#f5f5f5 rgba(0,0,0,0) rgba(0,0,0,0) rgba(0,0,0,0);margin-top:-1px}@keyframes bubblePop-f314b564{from{opacity:0;transform:translateX(-50%) translateY(5px)}to{opacity:1;transform:translateX(-50%) translateY(0)}}@media (max-width:768px){.equipment-section[data-v-f314b564]{padding:10px;border-bottom:none}.equipment-grid[data-v-f314b564]{grid-template-columns:1fr}}
.inventory-section[data-v-500270ee]{padding:10px 10px 60px;background:var(--bg-card);display:flex;flex-direction:column;flex:none;min-height:auto;width:100%}.inventory-title[data-v-500270ee]{font-size:11px;font-weight:bold;color:#000;margin-bottom:6px;flex-shrink:0}.inventory-grid[data-v-500270ee]{flex:none;max-height:185px;display:grid;grid-template-columns:repeat(2,1fr);gap:6px;grid-auto-rows:75px;overflow-y:auto;overflow-x:hidden;padding-right:4px;margin-bottom:6px}.inventory-grid[data-v-500270ee]::-webkit-scrollbar{width:4px}.inventory-grid[data-v-500270ee]::-webkit-scrollbar-track{background:rgba(0,0,0,0)}.inventory-grid[data-v-500270ee]::-webkit-scrollbar-thumb{background:#000;border-radius:0}.inventory-grid[data-v-500270ee]{scrollbar-width:thin;scrollbar-color:#000 rgba(0,0,0,0)}.inventory-item[data-v-500270ee]{background:var(--bg-input);border:1px solid var(--border-color);padding:6px;cursor:pointer;transition:background-color .2s;display:flex;flex-direction:column;justify-content:center;min-height:0;height:100%;position:relative;overflow:visible;z-index:1}.inventory-item.active[data-v-500270ee]{z-index:100}.inventory-item[data-v-500270ee]:hover{background:var(--bg-card-hover)}.inventory-item.active[data-v-500270ee]{background:#e3f2fd;border-color:#1976d2}.inventory-item.placeholder[data-v-500270ee]{opacity:.5;border-style:dashed;pointer-events:none;cursor:default}.item-name[data-v-500270ee]{font-size:9px;color:#000;font-weight:bold;margin-bottom:2px;text-align:center}.item-description[data-v-500270ee]{font-size:7px;color:#666;line-height:1.2;text-align:center;word-wrap:break-word}.info-bubble[data-v-500270ee]{position:absolute;bottom:calc(100% + 6px);left:50%;transform:translateX(-50%);background:#f5f5f5;border:2px solid var(--border-color);padding:6px 8px;font-size:8px;color:#000;white-space:normal;z-index:25;animation:bubblePop-500270ee .2s ease-out;max-width:130px;min-width:100px;text-align:left;line-height:1.3;box-shadow:2px 2px 0 rgba(0,0,0,.2);pointer-events:none}.info-bubble[data-v-500270ee]::before{content:"";position:absolute;top:100%;left:50%;transform:translateX(-50%);width:0;height:0;border-style:solid;border-width:6px 6px 0 6px;border-color:var(--border-color) rgba(0,0,0,0) rgba(0,0,0,0) rgba(0,0,0,0)}.info-bubble[data-v-500270ee]::after{content:"";position:absolute;top:100%;left:50%;transform:translateX(-50%);width:0;height:0;border-style:solid;border-width:5px 5px 0 5px;border-color:#f5f5f5 rgba(0,0,0,0) rgba(0,0,0,0) rgba(0,0,0,0);margin-top:-1px}.inventory-item.bubble-top .info-bubble[data-v-500270ee]{bottom:auto;top:calc(100% + 6px)}.inventory-item.bubble-top .info-bubble[data-v-500270ee]::before{top:auto;bottom:100%;border-width:0 6px 6px 6px;border-color:rgba(0,0,0,0) rgba(0,0,0,0) var(--border-color) rgba(0,0,0,0)}.inventory-item.bubble-top .info-bubble[data-v-500270ee]::after{top:auto;bottom:100%;border-width:0 5px 5px 5px;border-color:rgba(0,0,0,0) rgba(0,0,0,0) #f5f5f5 rgba(0,0,0,0);margin-top:0;margin-bottom:-1px}@keyframes bubblePop-500270ee{from{opacity:0;transform:translateX(-50%) translateY(5px)}to{opacity:1;transform:translateX(-50%) translateY(0)}}@media (max-width:768px){.inventory-section[data-v-500270ee]{border-bottom:none;padding-bottom:20px}.inventory-grid[data-v-500270ee]{min-height:auto;max-height:none;grid-template-columns:1fr;grid-auto-rows:72px;overflow:visible;padding-right:0}}
.status-effects-trigger[data-v-4f8b9b98]{display:flex;gap:8px;align-items:flex-start;position:relative}.status-button[data-v-4f8b9b98]{background:rgba(0,0,0,0);border:none;font-family:var(--pixel-font);font-size:10px;font-weight:bold;cursor:pointer;padding:4px 8px;transition:color .2s;color:var(--text-primary);display:flex;align-items:center;gap:4px}.status-button.active[data-v-4f8b9b98]{color:#1976d2;text-decoration:underline}.button-icon[data-v-4f8b9b98]{font-size:12px}.status-effects-popover[data-v-4f8b9b98]{position:absolute;bottom:calc(100% + 10px);left:0;width:320px;background:var(--bg-input);border:3px solid var(--border-color);border-radius:4px;padding:0;box-shadow:4px 4px 0 rgba(0,0,0,.3);z-index:30;animation:popoverFadeIn-4f8b9b98 .2s ease-out}@keyframes popoverFadeIn-4f8b9b98{from{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}.popover-header[data-v-4f8b9b98]{display:flex;justify-content:space-between;align-items:center;font-weight:bold;font-size:11px;padding:10px 12px;background:var(--bg-card);border-bottom:2px solid var(--border-color);color:#000}.popover-close[data-v-4f8b9b98]{background:rgba(0,0,0,0);border:none;font-size:16px;line-height:1;cursor:pointer;color:#666;transition:color .2s;padding:0 4px}.popover-close[data-v-4f8b9b98]:hover{color:#000}.status-effects-content[data-v-4f8b9b98]{display:flex;flex-direction:column;padding:8px}.status-tabs[data-v-4f8b9b98]{display:flex;border:2px solid var(--border-color);border-bottom:none;background:#fff;margin-bottom:0;overflow:hidden}.status-tab[data-v-4f8b9b98]{flex:1;padding:8px 0;background:#fff;border:none;font-family:var(--pixel-font);font-size:10px;font-weight:bold;cursor:pointer;transition:background-color .2s,color .2s;color:#000;position:relative}.status-tab+.status-tab[data-v-4f8b9b98]::before{content:"";position:absolute;left:-1px;top:0;bottom:0;border-left:2px solid var(--border-color)}.status-tab[data-v-4f8b9b98]::after{content:"";position:absolute;left:0;right:0;bottom:0;border-bottom:2px solid #000}.status-tab[data-v-4f8b9b98]:hover{background:#f5f5f5}.status-tab.active[data-v-4f8b9b98]{color:#1976d2}.status-list-content[data-v-4f8b9b98]{max-height:280px;overflow-y:auto;padding-right:4px;border:2px solid var(--border-color);border-top:none;padding:12px}.status-list-content[data-v-4f8b9b98]::-webkit-scrollbar{width:8px}.status-list-content[data-v-4f8b9b98]::-webkit-scrollbar-track{background:var(--bg-card);border-radius:4px;border:1px solid var(--border-color)}.status-list-content[data-v-4f8b9b98]::-webkit-scrollbar-thumb{background:#999;border-radius:4px;border:1px solid var(--border-color)}.status-list-content[data-v-4f8b9b98]::-webkit-scrollbar-thumb:hover{background:#777}.status-list-content[data-v-4f8b9b98]::-webkit-scrollbar-thumb:active{background:#555}.status-list-content[data-v-4f8b9b98]{scrollbar-width:thin;scrollbar-color:#999 var(--bg-card)}@media (max-width:768px){.status-effects-trigger[data-v-4f8b9b98]{display:none}}
.ability-popover-trigger[data-v-6fad9abb]{display:flex;gap:8px;align-items:flex-start;position:relative}.ability-button[data-v-6fad9abb]{background:rgba(0,0,0,0);border:none;font-family:var(--pixel-font);font-size:10px;font-weight:bold;cursor:pointer;padding:4px 8px;transition:color .2s;color:var(--text-primary);display:flex;align-items:center;gap:4px}.ability-button.active[data-v-6fad9abb]{color:#1976d2;text-decoration:underline}.button-icon[data-v-6fad9abb]{font-size:12px}.ability-popover[data-v-6fad9abb]{position:absolute;bottom:calc(100% + 10px);left:0;width:320px;background:var(--bg-input);border:3px solid var(--border-color);border-radius:4px;padding:0;box-shadow:4px 4px 0 rgba(0,0,0,.3);z-index:30;animation:popoverFadeIn .2s ease-out}.ability-content[data-v-6fad9abb]{padding:8px;padding-right:4px;position:relative}.ability-scroll[data-v-6fad9abb]{max-height:320px;overflow-y:auto}.ability-scroll[data-v-6fad9abb]::-webkit-scrollbar{width:8px}.ability-scroll[data-v-6fad9abb]::-webkit-scrollbar-track{background:var(--bg-card);border-radius:4px;border:1px solid var(--border-color)}.ability-scroll[data-v-6fad9abb]::-webkit-scrollbar-thumb{background:#999;border-radius:4px;border:1px solid var(--border-color)}.ability-scroll[data-v-6fad9abb]::-webkit-scrollbar-thumb:hover{background:#777}.ability-scroll[data-v-6fad9abb]::-webkit-scrollbar-thumb:active{background:#555}.ability-scroll[data-v-6fad9abb]{scrollbar-width:thin;scrollbar-color:#999 var(--bg-card)}.ability-empty[data-v-6fad9abb]{font-size:10px;color:#999;text-align:center;padding:20px;margin:0}.ability-list[data-v-6fad9abb]{list-style:none;margin:0;padding:0;display:flex;flex-direction:column;gap:8px}.ability-item[data-v-6fad9abb]{background:var(--bg-card);border:1px solid var(--border-color);padding:8px;font-size:9px;text-align:left;line-height:1.5;transition:all .2s;cursor:pointer;position:relative;-webkit-user-select:none;user-select:none}.ability-item[data-v-6fad9abb]:hover{background:var(--bg-card-hover);border-color:#666}.ability-item.active[data-v-6fad9abb]{background:#e3f2fd;border-color:#1976d2;box-shadow:0 0 0 2px rgba(25,118,210,.15)}.ability-item.placeholder[data-v-6fad9abb]{border-style:dashed;color:#888;background:#fafafa;pointer-events:none}.ability-name[data-v-6fad9abb]{font-weight:bold;font-size:11px;margin-bottom:6px;color:#000;padding-bottom:5px;border-bottom:1px solid var(--border-color)}.ability-desc[data-v-6fad9abb]{font-size:10px;color:#333;line-height:1.5}.ability-bubble[data-v-6fad9abb]{position:absolute;top:calc(100% + 8px);left:50%;transform:translateX(-50%);background:#f5f5f5;border:2px solid var(--border-color);padding:8px 10px;font-size:9px;color:#000;white-space:normal;z-index:9999;animation:bubblePop-6fad9abb .2s ease-out;max-width:200px;min-width:120px;text-align:left;line-height:1.4;box-shadow:2px 2px 0 rgba(0,0,0,.2);pointer-events:none}.ability-bubble[data-v-6fad9abb]::before{content:"";position:absolute;bottom:100%;left:50%;transform:translateX(-50%);width:0;height:0;border-style:solid;border-width:0 6px 6px 6px;border-color:rgba(0,0,0,0) rgba(0,0,0,0) var(--border-color) rgba(0,0,0,0)}.ability-bubble[data-v-6fad9abb]::after{content:"";position:absolute;bottom:100%;left:50%;transform:translateX(-50%);width:0;height:0;border-style:solid;border-width:0 5px 5px 5px;border-color:rgba(0,0,0,0) rgba(0,0,0,0) #f5f5f5 rgba(0,0,0,0);margin-bottom:-1px}.ability-item.bubble-top .ability-bubble[data-v-6fad9abb]{top:auto;bottom:calc(100% + 8px)}.ability-item.bubble-top .ability-bubble[data-v-6fad9abb]::before{bottom:auto;top:100%;border-width:6px 6px 0 6px;border-color:var(--border-color) rgba(0,0,0,0) rgba(0,0,0,0) rgba(0,0,0,0)}.ability-item.bubble-top .ability-bubble[data-v-6fad9abb]::after{bottom:auto;top:100%;border-width:5px 5px 0 5px;border-color:#f5f5f5 rgba(0,0,0,0) rgba(0,0,0,0) rgba(0,0,0,0);margin-bottom:0;margin-top:-1px}@keyframes bubblePop-6fad9abb{from{opacity:0;transform:translateX(-50%) scale(0.9)}to{opacity:1;transform:translateX(-50%) scale(1)}}@media (max-width:768px){.ability-popover-trigger[data-v-6fad9abb]{display:none}}
.bottom-bar[data-v-487904fc]{background:#333;color:var(--text-primary);padding:4px 20px;display:flex;justify-content:space-between;align-items:center;font-size:10px;position:relative;z-index:2;border-top:3px solid var(--border-color);flex-shrink:0}.bottom-left[data-v-487904fc]{display:flex;gap:15px;align-items:center}.bottom-right[data-v-487904fc]{display:flex;gap:15px;align-items:center}@media (max-width:768px){.bottom-bar[data-v-487904fc]{flex-shrink:0;flex-direction:column;gap:8px;padding:10px 12px}.bottom-left[data-v-487904fc]{flex-direction:row;flex-wrap:wrap;gap:8px;font-size:9px;width:100%;justify-content:space-between}.bottom-right[data-v-487904fc]{display:grid;grid-template-columns:1fr 1fr 1fr 1fr;gap:8px;width:100%}}
.form-actions.with-auto[data-v-b63e6292]{display:flex;justify-content:flex-end;gap:12px}

.shop-overlay[data-v-3396741a]{position:fixed;inset:0;z-index:9998;display:flex;align-items:center;justify-content:center;background:rgba(0,0,0,.85);animation:fadeIn-3396741a .3s ease-out}.shop-container[data-v-3396741a]{width:min(640px,92vw);max-height:min(720px,100% - 32px);margin:16px;background:#f5f5f5;border:4px solid #000;display:flex;flex-direction:column;font-family:"Fusion Pixel 12px M latin","Courier New",monospace;box-shadow:12px 12px 0 rgba(0,0,0,.5);animation:slideUp-3396741a .3s ease-out}.shop-header[data-v-3396741a]{background:#333;color:#fff;padding:5px 12px;border-bottom:3px solid #000;display:flex;justify-content:space-between;align-items:center}.shop-title[data-v-3396741a]{margin:0;font-size:14px;text-transform:uppercase;letter-spacing:1px;text-shadow:2px 2px 0px #000}.shop-close[data-v-3396741a]{background:#fff;border:2px solid #000;color:#000;width:22px;height:22px;cursor:pointer;font-size:18px;line-height:1;font-family:"Courier New",monospace;transition:all .1s}.shop-close[data-v-3396741a]:hover{background:#ddd}.shop-close[data-v-3396741a]:active{box-shadow:inset 2px 2px 0 rgba(0,0,0,.3)}.shop-info[data-v-3396741a]{background:#ffc;border-bottom:2px solid #000;padding:6px 12px;display:flex;justify-content:space-between;align-items:center;gap:12px}.shop-balance[data-v-3396741a]{display:flex;align-items:center;gap:4px;font-size:11px;font-weight:bold}.balance-label[data-v-3396741a]{color:#666}.balance-value[data-v-3396741a]{color:#d32f2f;font-size:13px;text-shadow:1px 1px 0 #fff}.shop-hint[data-v-3396741a]{font-size:9px;color:#666}.shop-content[data-v-3396741a]{flex:1;overflow-y:auto;padding:10px;min-height:220px}.shop-content[data-v-3396741a]::-webkit-scrollbar{width:6px}.shop-content[data-v-3396741a]::-webkit-scrollbar-track{background:rgba(0,0,0,.08)}.shop-content[data-v-3396741a]::-webkit-scrollbar-thumb{background:#7a7a7a;border:1px solid #f5f5f5}.shop-empty[data-v-3396741a]{display:flex;flex-direction:column;align-items:center;justify-content:center;height:100%;color:#666;text-align:center}.shop-empty .empty-icon[data-v-3396741a]{font-size:44px;margin-bottom:10px;opacity:.3}.shop-empty p[data-v-3396741a]{margin:6px 0;font-size:14px}.shop-empty .empty-hint[data-v-3396741a]{font-size:10px;color:#999}.shop-grid[data-v-3396741a]{display:grid;grid-template-columns:repeat(auto-fill,minmax(200px,1fr));gap:8px}.shop-item[data-v-3396741a]{background:#fff;border:2px solid #000;padding:8px;cursor:pointer;position:relative}.shop-item.active[data-v-3396741a]{border-color:#1976d2}.shop-item:not(.affordable) .item-price .price-value[data-v-3396741a]{color:#d32f2f}.shop-item .delist-button[data-v-3396741a]{position:absolute;bottom:2px;right:2px;width:18px;height:18px;background:#e57373;color:#fff;border:1px solid #000;cursor:pointer;font-size:16px;line-height:15px;font-family:"Courier New",monospace;z-index:10;display:none;transition:all .2s}.shop-item .delist-button[data-v-3396741a]:hover{background:#d32f2f;transform:scale(1.1)}.shop-item:hover .delist-button[data-v-3396741a]{display:block}.item-header[data-v-3396741a]{display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:8px;gap:8px}.item-name[data-v-3396741a]{font-size:13px;font-weight:bold;color:#000;flex:1}.item-price[data-v-3396741a]{display:flex;flex-direction:column;align-items:flex-end;gap:2px}.price-value[data-v-3396741a]{font-size:14px;font-weight:bold;color:#2e7d32}.price-unit[data-v-3396741a]{font-size:9px;color:#666}.item-description[data-v-3396741a]{font-size:10px;color:#333;line-height:1.3;margin-bottom:6px;min-height:32px}.item-evaluation[data-v-3396741a]{background:#fff9c4;border:1px solid #f9a825;padding:5px;font-size:9px;margin-bottom:5px;line-height:1.3}.eval-label[data-v-3396741a]{color:#666;margin-right:4px}.eval-text[data-v-3396741a]{color:#000}.info-bubble[data-v-3396741a]{position:absolute;bottom:calc(100% + 6px);left:50%;transform:translateX(-50%);background:#f5f5f5;border:2px solid var(--border-color);padding:6px 8px;font-size:8px;color:#000;white-space:normal;z-index:25;max-width:180px;min-width:120px;text-align:left;line-height:1.3;box-shadow:2px 2px 0 rgba(0,0,0,.2);pointer-events:none}.info-bubble[data-v-3396741a]::before{content:"";position:absolute;top:100%;left:50%;transform:translateX(-50%);width:0;height:0;border-style:solid;border-width:6px 6px 0 6px;border-color:var(--border-color) rgba(0,0,0,0) rgba(0,0,0,0) rgba(0,0,0,0)}.info-bubble[data-v-3396741a]::after{content:"";position:absolute;top:100%;left:50%;transform:translateX(-50%);width:0;height:0;border-style:solid;border-width:5px 5px 0 5px;border-color:#f5f5f5 rgba(0,0,0,0) rgba(0,0,0,0) rgba(0,0,0,0);margin-top:-1px}.shop-item.bubble-top .info-bubble[data-v-3396741a]{bottom:auto;top:calc(100% + 6px)}.shop-item.bubble-top .info-bubble[data-v-3396741a]::before{top:auto;bottom:100%;border-width:0 6px 6px 6px;border-color:rgba(0,0,0,0) rgba(0,0,0,0) #000 rgba(0,0,0,0)}.shop-item.bubble-top .info-bubble[data-v-3396741a]::after{top:auto;bottom:100%;border-width:0 5px 5px 5px;border-color:rgba(0,0,0,0) rgba(0,0,0,0) #f5f5f5 rgba(0,0,0,0);margin-top:0;margin-bottom:-1px}@keyframes fadeIn-3396741a{from{opacity:0}to{opacity:1}}@keyframes slideUp-3396741a{from{opacity:0;transform:translateY(30px)}to{opacity:1;transform:translateY(0)}}@media (max-width:768px){.shop-container[data-v-3396741a]{width:100%;max-height:calc(100% - 12px);margin:6px;border-width:4px;box-shadow:none}.shop-header[data-v-3396741a]{padding:8px 12px}.shop-title[data-v-3396741a]{font-size:14px;letter-spacing:1px}.shop-close[data-v-3396741a]{width:28px;height:28px;font-size:22px}.shop-info[data-v-3396741a]{flex-direction:column;align-items:flex-start;gap:8px;padding:10px 12px}.shop-balance[data-v-3396741a]{font-size:13px}.balance-value[data-v-3396741a]{font-size:15px}.shop-hint[data-v-3396741a]{font-size:10px}.shop-content[data-v-3396741a]{padding:12px;min-height:300px}.shop-grid[data-v-3396741a]{grid-template-columns:1fr;gap:12px}.shop-item[data-v-3396741a]{padding:12px}.item-name[data-v-3396741a]{font-size:14px}.price-value[data-v-3396741a]{font-size:16px}.item-description[data-v-3396741a]{font-size:11px}.shop-footer[data-v-3396741a]{padding:10px 12px}.footer-button[data-v-3396741a]{padding:8px 24px;font-size:14px}}
.task-overlay[data-v-69e0ed79]{position:fixed;inset:0;z-index:9998;display:flex;align-items:center;justify-content:center;background:rgba(0,0,0,.85);animation:fadeIn-69e0ed79 .3s ease-out}.task-container[data-v-69e0ed79]{width:min(640px,92vw);max-height:min(720px,100% - 32px);margin:16px;background:#f5f5f5;border:4px solid #000;display:flex;flex-direction:column;font-family:"Fusion Pixel 12px M latin","Courier New",monospace;box-shadow:12px 12px 0 rgba(0,0,0,.5);animation:slideUp-69e0ed79 .3s ease-out}.task-header[data-v-69e0ed79]{background:#333;color:#fff;padding:5px 12px;border-bottom:3px solid #000;display:flex;justify-content:space-between;align-items:center}.task-title[data-v-69e0ed79]{margin:0;font-size:14px;text-transform:uppercase;letter-spacing:1px;text-shadow:2px 2px 0px #000}.task-close[data-v-69e0ed79]{background:#fff;border:2px solid #000;color:#000;width:22px;height:22px;cursor:pointer;font-size:18px;line-height:1;font-family:"Courier New",monospace;transition:all .1s}.task-close[data-v-69e0ed79]:hover{background:#ddd}.task-close[data-v-69e0ed79]:active{box-shadow:inset 2px 2px 0 rgba(0,0,0,.3)}.task-info[data-v-69e0ed79]{background:#ffc;border-bottom:2px solid #000;padding:6px 12px;display:flex;justify-content:space-between;align-items:center;gap:12px}.task-hint[data-v-69e0ed79]{font-size:9px;color:#666}.task-content[data-v-69e0ed79]{flex:1;overflow-y:auto;padding:10px;min-height:220px}.task-content[data-v-69e0ed79]::-webkit-scrollbar{width:6px}.task-content[data-v-69e0ed79]::-webkit-scrollbar-track{background:rgba(0,0,0,.08)}.task-content[data-v-69e0ed79]::-webkit-scrollbar-thumb{background:#7a7a7a;border:1px solid #f5f5f5}.task-empty[data-v-69e0ed79]{display:flex;flex-direction:column;align-items:center;justify-content:center;height:100%;color:#666;text-align:center}.task-empty .empty-icon[data-v-69e0ed79]{font-size:44px;margin-bottom:10px;opacity:.3}.task-empty p[data-v-69e0ed79]{margin:6px 0;font-size:14px}.task-empty .empty-hint[data-v-69e0ed79]{font-size:10px;color:#999}.task-list[data-v-69e0ed79]{display:flex;flex-direction:column;gap:12px}.task-item[data-v-69e0ed79]{background:#fff;border:2px solid #000;padding:10px;padding-bottom:40px;position:relative}.task-item.task-type-主线[data-v-69e0ed79]{border-left:4px solid #d32f2f}.task-item.task-type-支线[data-v-69e0ed79]{border-left:4px solid #1976d2}.task-item.task-type-每日[data-v-69e0ed79]{border-left:4px solid #388e3c}.task-item.task-type-临危受命[data-v-69e0ed79]{border-left:4px solid #f57c00}.task-item-header[data-v-69e0ed79]{display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:10px;gap:8px}.task-name[data-v-69e0ed79]{font-size:14px;font-weight:bold;color:#000;flex:1;text-transform:uppercase;letter-spacing:.5px}.task-type-badge[data-v-69e0ed79]{background:#000;color:#fff;padding:2px 6px;font-size:9px;border:1px solid #000;text-transform:uppercase}.task-section[data-v-69e0ed79]{margin-bottom:8px}.task-section-title[data-v-69e0ed79]{font-size:10px;font-weight:bold;color:#666;margin-bottom:4px;text-transform:uppercase}.task-section-content[data-v-69e0ed79]{font-size:11px;color:#333;line-height:1.4;padding:6px 8px;background:#f9f9f9;border:1px solid #ddd;white-space:pre-wrap}.task-footer[data-v-69e0ed79]{display:flex;flex-direction:column;gap:6px;margin-top:8px;padding-top:8px;border-top:1px dashed #ccc}.task-actions[data-v-69e0ed79]{position:absolute;bottom:8px;right:10px;display:flex;gap:8px}.action-button[data-v-69e0ed79]{background:#fff;border:1px solid #000;padding:3px 8px;font-size:10px;cursor:pointer;font-family:inherit;transition:all .2s}.action-button[data-v-69e0ed79]:hover{transform:translateY(-1px);box-shadow:0 2px 4px rgba(0,0,0,.2)}.action-button.delete[data-v-69e0ed79]{border-color:#757575;color:#757575}.action-button.delete[data-v-69e0ed79]:hover{background:#f5f5f5;border-color:#000;color:#000}.action-button.fail[data-v-69e0ed79]{border-color:#d32f2f;color:#d32f2f}.action-button.fail[data-v-69e0ed79]:hover{background:#d32f2f;color:#fff}.task-reward[data-v-69e0ed79],.task-penalty[data-v-69e0ed79]{font-size:10px;display:flex;gap:6px}.task-reward .reward-label[data-v-69e0ed79]{color:#2e7d32;font-weight:bold}.task-reward .reward-text[data-v-69e0ed79]{color:#333}.task-penalty .penalty-label[data-v-69e0ed79]{color:#d32f2f;font-weight:bold}.task-penalty .penalty-text[data-v-69e0ed79]{color:#333}@keyframes fadeIn-69e0ed79{from{opacity:0}to{opacity:1}}@keyframes slideUp-69e0ed79{from{opacity:0;transform:translateY(30px)}to{opacity:1;transform:translateY(0)}}@media (max-width:768px){.task-container[data-v-69e0ed79]{width:100%;max-height:calc(100% - 12px);margin:6px;border-width:4px;box-shadow:none}.task-header[data-v-69e0ed79]{padding:8px 12px}.task-title[data-v-69e0ed79]{font-size:14px;letter-spacing:1px}.task-close[data-v-69e0ed79]{width:28px;height:28px;font-size:22px}.task-info[data-v-69e0ed79]{padding:10px 12px}.task-hint[data-v-69e0ed79]{font-size:10px}.task-content[data-v-69e0ed79]{padding:12px;min-height:300px}.task-list[data-v-69e0ed79]{gap:16px}.task-item[data-v-69e0ed79]{padding:12px}.task-name[data-v-69e0ed79]{font-size:15px}.task-type-badge[data-v-69e0ed79]{font-size:10px}.task-section-content[data-v-69e0ed79]{font-size:12px}}
/*! tailwindcss v4.1.18 | MIT License | https://tailwindcss.com */:root{--bg-dark:#0a0a0a;--bg-darker:#050505;--text-primary:#ffffff;--text-secondary:#cccccc;--border-color:#000000;--bg-panel:#f5f5f5;--bg-input:#ffffff;--bg-card:#f0f0f0;--bg-card-hover:#e0e0e0;--bg-success:#90ee90;--bg-error:#ffb3b3;--bg-highlight:#ffffcc;--bg-warning:#ffe4b3;--pixel-font:'Fusion Pixel 12px M latin','Courier New',monospace}@keyframes fadeIn{from{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}@keyframes pulse{0%,100%{opacity:.6}50%{opacity:1}}@keyframes bubblePop{from{opacity:0;transform:translateX(-50%) translateY(5px)}to{opacity:1;transform:translateX(-50%) translateY(0)}}*{margin:0;padding:0;box-sizing:border-box}.status-system-wrapper{width:100%;background:rgba(0,0,0,0);position:relative}.status-system{width:800px;aspect-ratio:16/9;background:var(--bg-panel);border:4px solid var(--border-color);position:relative;overflow:hidden;display:flex;flex-direction:column;font-family:var(--pixel-font);font-weight:normal;animation:fadeIn .5s ease-out}.status-system::before{content:"";position:absolute;inset:0;background-image:linear-gradient(90deg,rgba(0,0,0,0.03) 1px,transparent 1px),linear-gradient(rgba(0,0,0,0.03) 1px,transparent 1px);background-size:15px 15px;z-index:1;pointer-events:none}.main-content{flex:1;display:flex;position:relative;z-index:2;min-height:0}.character-panel{flex:2;padding:5px;display:flex;flex-direction:column;gap:10px;background:var(--bg-card);min-height:0}.mobile-section{display:flex;flex-direction:column;overflow:visible}.mobile-section__body{display:block;overflow:visible}.inventory-container .mobile-section__body{flex:none;min-height:auto;display:block}.right-panel{flex:1;display:flex;flex-direction:column;border-left:3px solid var(--border-color);min-height:0}.inventory-container{flex:none;min-height:auto}.collapse-toggle{width:100%;display:none;justify-content:space-between;align-items:center;padding:8px 12px;background:#222;color:var(--text-primary);border:none;border-top:2px solid var(--border-color);border-bottom:2px solid var(--border-color);font-size:12px;font-family:var(--pixel-font);margin:0}.action-button{background:var(--bg-input);color:#000;border:2px solid var(--border-color);padding:4px 12px;font-family:var(--pixel-font);font-size:9px;cursor:pointer;transition:all .1s}.action-button:hover{background:#ddd}.action-button:active{border-width:2px 4px 2px 2px}.mobile-section.mobile-only{display:none}@media (max-width:768px){.status-system-wrapper{width:100%;background:rgba(0,0,0,0);display:flex;justify-content:center;align-items:center}.status-system{max-width:100%;min-height:auto;width:100% !important;aspect-ratio:unset;height:auto;transform:none !important}.main-content{flex-direction:column;overflow-y:visible;overflow-x:hidden;flex:0 1 auto}.character-panel{flex:none;border-bottom:2px solid var(--border-color);padding:0;gap:0;min-height:0;height:auto}.right-panel{flex:none;flex-direction:column;border-left:none;border-top:none;padding:0;min-height:0;height:auto}.collapse-toggle{display:flex;margin:0;cursor:pointer;border-top:none}.mobile-section:first-child .collapse-toggle{border-top:2px solid var(--border-color)}.mobile-section{margin-bottom:0;border-bottom:2px solid var(--border-color);flex-shrink:0}.mobile-section:last-child{border-bottom:none}.mobile-section__body{padding:10px;flex-shrink:1;display:block}.mobile-section__body[style*="display: none"]{display:none !important;height:0;padding:0;overflow:hidden}.mobile-section__body>*{margin:0}.mobile-section.mobile-only{display:flex}.action-button{padding:10px 8px;font-size:9px;width:100%;text-align:center}.action-button:nth-child(1),.action-button:nth-child(2){grid-column:span 1}.action-button:nth-child(3){grid-column:span 2}.action-button:nth-child(4),.action-button:nth-child(5){grid-column:span 2}}

/*# sourceMappingURL=main.css.map*/</style></head><body><div id="app"></div></body>