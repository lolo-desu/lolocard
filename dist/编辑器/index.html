<!doctype html><html lang="zh-CN"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width,initial-scale=1"/><title>è§’è‰²è®¾å®šç®¡ç†å™¨</title><style>.mvu-editor{width:100%;max-width:1000px;margin:0 auto;background:#fff;border-radius:8px;box-shadow:0 2px 12px rgba(0,0,0,.08);overflow:hidden;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,sans-serif;border:1px solid #e1e5e9}.mvu-header{background:#f8f9fa;border-bottom:1px solid #e1e5e9;padding:16px 20px}.mvu-header .mvu-title{margin:0 0 4px 0;font-size:18px;font-weight:600;color:#2c3e50;display:flex;align-items:center;gap:8px}.mvu-header .mvu-subtitle{margin:0 0 16px 0;font-size:13px;color:#6c757d;font-weight:400}.mvu-header .mvu-toolbar{display:flex;gap:8px;flex-wrap:wrap}.mvu-btn{padding:8px 14px;border:1px solid #d1d5db;border-radius:6px;font-size:13px;font-weight:500;cursor:pointer;transition:all .15s ease;display:inline-flex;align-items:center;gap:6px;background:#fff;color:#374151}.mvu-btn:hover{background:#f9fafb;border-color:#9ca3af;box-shadow:0 1px 3px rgba(0,0,0,.1)}.mvu-btn:active{background:#f3f4f6;transform:translateY(1px)}.mvu-btn i{font-size:12px}.mvu-btn-primary{background:#3b82f6;color:#fff;border-color:#3b82f6}.mvu-btn-primary:hover{background:#2563eb;border-color:#2563eb}.mvu-btn-primary:active{background:#1d4ed8}.mvu-btn-secondary{background:#6b7280;color:#fff;border-color:#6b7280}.mvu-btn-secondary:hover{background:#4b5563;border-color:#4b5563}.mvu-btn-secondary:active{background:#374151}.mvu-btn-icon{width:28px;aspect-ratio:1;padding:0;border:none;border-radius:4px;background:rgba(0,0,0,0);color:#6b7280;cursor:pointer;transition:all .15s ease;display:flex;align-items:center;justify-content:center;font-size:12px}.mvu-btn-icon:hover{background:#f3f4f6;color:#374151}.mvu-btn-icon.mvu-btn-edit:hover{background:#dbeafe;color:#3b82f6}.mvu-btn-icon.mvu-btn-delete:hover{background:#fee2e2;color:#dc2626}.mvu-btn-icon.mvu-btn-add:hover{background:#dcfce7;color:#16a34a}.mvu-content{width:100%;aspect-ratio:16/10;overflow:auto;background:#fafbfc}.mvu-editor-panel{padding:16px;width:100%;min-height:100%}.mvu-tree{width:100%;background:#fff;border-radius:6px;border:1px solid #e1e5e9;overflow:hidden}.mvu-item{border-bottom:1px solid #f1f3f4;background:#fff;transition:all .15s ease}.mvu-item:hover{background:#f8f9fa}.mvu-item:last-child{border-bottom:none}.mvu-item.mvu-nested-object{background:#fafbfc}.mvu-item.mvu-nested-object:hover{background:#f5f6f7}.mvu-item-header{display:flex;align-items:center;padding:12px 16px;gap:10px;min-height:44px}.mvu-item-header .mvu-key{font-weight:500;color:#2c3e50;flex:1;font-size:14px;display:flex;align-items:center;gap:8px}.mvu-item-header .mvu-key::before{content:"ğŸ“„";font-size:16px}.mvu-item-header .mvu-actions{display:flex;gap:4px;opacity:0;transition:opacity .2s ease}.mvu-nested-object .mvu-item-header .mvu-key::before{content:"ğŸ“"}.mvu-item:hover .mvu-actions{opacity:1}.mvu-toggle{width:20px;aspect-ratio:1;border:none;background:none;cursor:pointer;display:flex;align-items:center;justify-content:center;border-radius:3px;transition:all .15s ease;margin-right:4px}.mvu-toggle:hover{background:#f3f4f6}.mvu-toggle i{color:#6b7280;font-size:10px;transition:transform .15s ease}.mvu-value-content{padding:12px 16px 16px 16px;background:#fafbfc;border-top:1px solid #f1f3f4}.mvu-value-display{display:flex;flex-direction:column;gap:10px}.mvu-value-display .mvu-value{font-family:"SF Mono",Monaco,"Cascadia Code",monospace;font-size:13px;color:#1f2937;font-weight:500;background:#e5f3ff;padding:6px 10px;border-radius:4px;display:inline-block;border:1px solid #bfdbfe;max-width:-moz-fit-content;max-width:fit-content}.mvu-value-display .mvu-description{font-size:12px;color:#6b7280;line-height:1.5;background:#fff;padding:10px 12px;border-radius:4px;border:1px solid #e5e7eb;border-left:3px solid #3b82f6}.mvu-children{background:#fff;border-left:2px solid #e5e7eb;margin-left:20px;overflow:hidden;transition:all .3s ease}.mvu-nested-object .mvu-children{display:block}.mvu-footer{background:#f8f9fa;padding:10px 16px;border-top:1px solid #e1e5e9;display:flex;justify-content:space-between;align-items:center}.mvu-status{display:flex;align-items:center;gap:6px;font-size:12px;color:#6b7280}.mvu-status #statusIcon{color:#10b981;font-size:10px}.mvu-status .mvu-dirty{color:#f59e0b;font-size:11px;font-weight:500;background:#fef3c7;padding:2px 6px;border-radius:3px}.ui-dialog{border-radius:8px !important;border:1px solid #e1e5e9 !important;box-shadow:0 4px 20px rgba(0,0,0,.15) !important}.ui-dialog .ui-dialog-titlebar{background:#f8f9fa !important;color:#374151 !important;border:none !important;border-bottom:1px solid #e1e5e9 !important;border-radius:8px 8px 0 0 !important;padding:14px 16px !important}.ui-dialog .ui-dialog-titlebar .ui-dialog-title{font-weight:600 !important;font-size:15px !important}.ui-dialog .ui-dialog-titlebar .ui-dialog-titlebar-close{background:#e5e7eb !important;border:none !important;border-radius:4px !important;color:#6b7280 !important;width:24px !important;height:24px !important}.ui-dialog .ui-dialog-titlebar .ui-dialog-titlebar-close:hover{background:#d1d5db !important;color:#374151 !important}.ui-dialog .ui-dialog-content{padding:16px !important;background:#fff !important}.ui-dialog .ui-dialog-buttonpane{background:#f8f9fa !important;border-top:1px solid #e1e5e9 !important;padding:12px 16px !important}.ui-dialog .ui-dialog-buttonpane .ui-dialog-buttonset{display:flex !important;gap:8px !important;justify-content:flex-end !important}.ui-dialog .ui-dialog-buttonpane .ui-dialog-buttonset button{padding:8px 14px !important;border:1px solid #d1d5db !important;border-radius:6px !important;font-weight:500 !important;cursor:pointer !important;transition:all .15s ease !important;font-size:13px !important}.ui-dialog .ui-dialog-buttonpane .ui-dialog-buttonset button:first-child{background:#3b82f6 !important;color:#fff !important;border-color:#3b82f6 !important}.ui-dialog .ui-dialog-buttonpane .ui-dialog-buttonset button:first-child:hover{background:#2563eb !important;border-color:#2563eb !important}.ui-dialog .ui-dialog-buttonpane .ui-dialog-buttonset button:last-child{background:#fff !important;color:#6b7280 !important}.ui-dialog .ui-dialog-buttonpane .ui-dialog-buttonset button:last-child:hover{background:#f9fafb !important;color:#374151 !important}.mvu-form-group{margin-bottom:16px}.mvu-form-group label{display:block;margin-bottom:6px;font-weight:500;color:#374151;font-size:13px}.mvu-form-group .mvu-hint{display:block;margin-top:4px;font-size:11px;color:#6b7280;line-height:1.4}.mvu-form-group .mvu-hint::before{margin-right:4px}.mvu-input,.mvu-textarea{width:100%;padding:8px 12px;border:1px solid #d1d5db;border-radius:6px;font-size:13px;font-family:inherit;transition:all .15s ease;background:#fff}.mvu-input:focus,.mvu-textarea:focus{outline:none;border-color:#3b82f6;box-shadow:0 0 0 3px rgba(59,130,246,.1)}.mvu-input::placeholder,.mvu-textarea::placeholder{color:#9ca3af}.mvu-textarea{resize:vertical;min-height:70px;font-family:inherit;line-height:1.4}.mvu-radio-group{display:flex;flex-direction:column;gap:8px}.mvu-radio-group label{display:flex !important;align-items:center;gap:8px;font-weight:normal !important;cursor:pointer}.mvu-radio-group label input[type=radio]{width:auto !important;margin:0 !important}@keyframes fadeIn{from{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}@keyframes slideDown{from{max-height:0;opacity:0}to{max-height:500px;opacity:1}}@keyframes slideUp{from{max-height:500px;opacity:1}to{max-height:0;opacity:0}}.mvu-item{animation:fadeIn .3s ease}.mvu-children{overflow:hidden;transition:all .3s ease}.mvu-empty-state{text-align:center;padding:40px 20px;color:#6b7280;background:#fff;border-radius:6px;border:1px solid #e1e5e9}.mvu-empty-state .mvu-empty-icon{font-size:40px;color:#d1d5db;margin-bottom:16px}.mvu-empty-state .mvu-empty-title{font-size:16px;font-weight:600;margin-bottom:8px;color:#374151}.mvu-empty-state .mvu-empty-description{font-size:13px;line-height:1.5;margin-bottom:24px;color:#6b7280}.mvu-empty-state .mvu-empty-actions{display:flex;gap:10px;justify-content:center;flex-wrap:wrap}.mvu-loading{display:flex;align-items:center;justify-content:center;padding:40px}.mvu-loading .mvu-spinner{width:32px;aspect-ratio:1;border:3px solid #f0f0f0;border-top:3px solid #007aff;border-radius:50%;animation:spin 1s linear infinite}@keyframes spin{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}.mvu-tooltip{position:relative}.mvu-tooltip:hover::after{content:attr(data-tooltip);position:absolute;bottom:100%;left:50%;transform:translateX(-50%);background:rgba(0,0,0,.8);color:#fff;padding:6px 10px;border-radius:6px;font-size:12px;white-space:nowrap;z-index:1000;margin-bottom:5px}.mvu-tooltip:hover::before{content:"";position:absolute;bottom:100%;left:50%;transform:translateX(-50%);border:5px solid rgba(0,0,0,0);border-top-color:rgba(0,0,0,.8);z-index:1000}.mvu-children.collapsed{max-height:0;opacity:0}.mvu-children.expanded{max-height:1000px;opacity:1}.mvu-toggle i.rotated{transform:rotate(90deg)}.mvu-item.selected{background:#e0f2fe !important;border-left:3px solid #3b82f6}@media(max-width: 768px){.mvu-editor{margin:8px;border-radius:6px}.mvu-header{padding:12px 16px}.mvu-header .mvu-title{font-size:16px}.mvu-header .mvu-subtitle{font-size:12px}.mvu-header .mvu-toolbar{gap:6px}.mvu-btn{padding:6px 10px;font-size:12px}.mvu-content{aspect-ratio:4/5}.mvu-editor-panel{padding:12px}.mvu-children{margin-left:16px}.ui-dialog{width:90% !important;max-width:400px !important}.mvu-empty-state{padding:30px 16px}.mvu-empty-state .mvu-empty-icon{font-size:32px}.mvu-empty-state .mvu-empty-title{font-size:15px}.mvu-empty-state .mvu-empty-description{font-size:12px}.mvu-item-header{padding:10px 12px;min-height:40px}.mvu-item-header .mvu-key{font-size:13px}.mvu-value-content{padding:10px 12px 12px 12px}}
</style></head><body><div id="mvuEditor"></div><script>class t{static validate(t){const e=[];return this.isObject(t)?(this.validateObject(t,'',e),{valid:0===e.length,errors:e}):(e.push({path:'',message:'æ ¹æ•°æ®å¿…é¡»æ˜¯å¯¹è±¡',type:'format'}),{valid:!1,errors:e})}static validateObject(t,e,i){if(this.isObject(t))for(const[n,s]of Object.entries(t)){const t=e?`${e}.${n}`:n;this.isValidKey(n)?Array.isArray(s)?this.validateValuePair(s,t,i):this.isObject(s)?this.validateObject(s,t,i):i.push({path:t,message:'å€¼å¿…é¡»æ˜¯æ•°ç»„æˆ–å¯¹è±¡',type:'format'}):i.push({path:t,message:'é”®åä¸èƒ½ä¸ºç©º',type:'required'})}else i.push({path:e,message:'å¿…é¡»æ˜¯å¯¹è±¡',type:'format'})}static validateValuePair(t,e,i){Array.isArray(t)?2===t.length?'string'!=typeof t[1]&&i.push({path:e,message:'æè¿°å¿…é¡»æ˜¯å­—ç¬¦ä¸²',type:'type'}):i.push({path:e,message:'å€¼å¯¹å¿…é¡»åŒ…å«æ°å¥½ä¸¤ä¸ªå…ƒç´ ',type:'format'}):i.push({path:e,message:'å€¼å¯¹å¿…é¡»æ˜¯æ•°ç»„',type:'format'})}static isValidKey(t){return'string'==typeof t&&t.trim().length>0}static isObject(t){return'object'==typeof t&&null!==t&&!Array.isArray(t)}}class e{static parse(t){const e=t.trim();if(''===e)return'';if('true'===e)return!0;if('false'===e)return!1;if('null'===e)return null;if('undefined'!==e){if(this.isNumber(e))return Number(e);if(this.isJsonLike(e))try{return JSON.parse(e)}catch{}return e}}static format(t){return'string'==typeof t?`"${t}"`:null===t?'null':void 0===t?'undefined':'object'==typeof t?JSON.stringify(t):String(t)}static getTypeDescription(t){if(null===t)return'null';if(void 0===t)return'undefined';if(Array.isArray(t))return'array';const e=typeof t;return'object'===e?'object':e}static isNumber(t){return!isNaN(Number(t))&&''!==t}static isJsonLike(t){return t.startsWith('{')&&t.endsWith('}')||t.startsWith('[')&&t.endsWith(']')}}class i{container;data={};isDirty=!1;constructor(t){this.container=$(`#${t}`),this.init()}init(){this.render(),this.bindEvents(),this.loadSampleData()}loadSampleData(){this.data={æ—¥æœŸ:['03æœˆ15æ—¥','ä»Šå¤©çš„æ—¥æœŸï¼Œæ ¼å¼ä¸º mmæœˆddæ—¥'],æ—¶é—´:['09:00','æŒ‰ç…§è¿›è¡Œè¡ŒåŠ¨åå®é™…ç»å†çš„æ—¶é—´è¿›è¡Œæ›´æ–°ï¼Œæ¯æ¬¡è¡ŒåŠ¨åæ›´æ–°ï¼Œæ ¼å¼ä¸º hh:mm'],user:{èº«ä»½:['æ–°æ¥çš„ç‰§å¸ˆ','éšæ•…äº‹è¿›å±•æ”¹å˜ï¼Œä¾‹å¦‚å®Œæˆç‰¹å®šä»»åŠ¡åæ›´æ–°'],å½“å‰ä½ç½®:['æ•™å ‚','userå½“å‰æ‰€åœ¨çš„åœ°ç‚¹ï¼Œå½“userç§»åŠ¨åˆ°æ–°åŒºåŸŸæ—¶æ›´æ–°'],é‡è¦ç»å†:['','è®°å½•ä¸æ•…äº‹æ ¸å¿ƒäººç‰©æˆ–å…³é”®äº‹ä»¶ç›¸å…³çš„é‡è¦ç»å†ï¼Œç´¯åŠ è®°å½•'],ä¸ç†çš„å¥½æ„Ÿåº¦:[0,'[-100, 100]èŒƒå›´ï¼Œä¸è§’è‰²\'ç†\'çš„äº’åŠ¨ä¼šå½±å“æ­¤å€¼ï¼Œç§¯æäº’åŠ¨å¢åŠ ï¼Œæ¶ˆæäº’åŠ¨å‡å°‘']},ç†:{å½“å‰ä½ç½®:['æ•™å ‚','è§’è‰²\'ç†\'å½“å‰æ‰€åœ¨çš„åœ°ç‚¹ï¼Œä¼šéšå‰§æƒ…ç§»åŠ¨'],æƒ…ç»ªçŠ¶æ€:{pleasure:[.1,'[-1,1]ä¹‹é—´, ä»£è¡¨æ„‰æ‚¦åº¦ã€‚æ­£é¢äº‹ä»¶æå‡ï¼Œè´Ÿé¢äº‹ä»¶é™ä½ã€‚âˆ’1æç«¯ç—›è‹¦ï¼Œ0ä¸­æ€§ï¼Œ1æç«¯å–œæ‚¦ã€‚'],arousal:[0,'[-1,1]ä¹‹é—´, ä»£è¡¨ç”Ÿç†æˆ–æƒ…ç»ªä¸Šçš„æ¿€åŠ¨ç¨‹åº¦ã€‚åˆºæ¿€æ€§äº‹ä»¶ä¼šæ”¹å˜æ­¤å€¼ã€‚']},å½“å‰æ‰€æƒ³:['ä»Šå¤©å¤©æ°”çœŸå¥½ï¼Œå¸Œæœ›èƒ½å¸®åˆ°æ›´å¤šçš„äººã€‚','è§’è‰²\'ç†\'å½“å‰è„‘æµ·ä¸­çš„ä¸»è¦æƒ³æ³•æˆ–æ„Ÿå—ï¼Œéšäº’åŠ¨å’Œæƒ…å¢ƒæ›´æ–°']},ä¸–ç•Œ:{å½“å‰äº‹ä»¶é˜¶æ®µ:[0,'æ ‡è®°ä¸»è¦æ•…äº‹ä»¶çš„è¿›å±•é˜¶æ®µï¼Œä¾‹å¦‚ï¼š0-åºç« , 1-é­é‡å±æœº, 2-å¯»æ‰¾çº¿ç´¢...'],å¤©æ°”:['æ™´æœ—','å½“å‰ä¸–ç•Œçš„å¤©æ°”çŠ¶å†µï¼Œå¯ä»¥æ˜¯ï¼šæ™´æœ—, å¤šäº‘, å°é›¨, é›·æš´, æµ“é›¾ç­‰']}},this.renderData()}render(){this.container.html('\n      <div class="mvu-editor">\n        <div class="mvu-header">\n          <h1 class="mvu-title">\n            <i class="fas fa-folder" style="color: #3b82f6;"></i>\n            è§’è‰²è®¾å®šç®¡ç†å™¨\n          </h1>\n          <p class="mvu-subtitle">åƒç®¡ç†æ–‡ä»¶å¤¹ä¸€æ ·è½»æ¾ç®¡ç†æ‚¨çš„è§’è‰²å±æ€§å’Œä¸–ç•Œè®¾å®š</p>\n          <div class="mvu-toolbar">\n            <button class="mvu-btn mvu-btn-primary mvu-tooltip" id="importBtn" data-tooltip="æ‰“å¼€å·²æœ‰çš„è®¾å®šæ–‡ä»¶">\n              <i class="fas fa-folder-open"></i> æ‰“å¼€\n            </button>\n            <button class="mvu-btn mvu-btn-primary mvu-tooltip" id="exportBtn" data-tooltip="ä¿å­˜å½“å‰è®¾å®šåˆ°æ–‡ä»¶">\n              <i class="fas fa-save"></i> ä¿å­˜\n            </button>\n            <button class="mvu-btn mvu-btn-secondary mvu-tooltip" id="addRootBtn" data-tooltip="æ–°å»ºè®¾å®šé¡¹">\n              <i class="fas fa-plus"></i> æ–°å»º\n            </button>\n            <button class="mvu-btn mvu-btn-secondary mvu-tooltip" id="clearBtn" data-tooltip="æ¸…ç©ºæ‰€æœ‰è®¾å®š">\n              <i class="fas fa-trash-alt"></i> æ¸…ç©º\n            </button>\n          </div>\n        </div>\n        <div class="mvu-content">\n          <div class="mvu-editor-panel" id="editorPanel">\n            \x3c!-- ç¼–è¾‘å™¨å†…å®¹å°†åœ¨è¿™é‡Œæ¸²æŸ“ --\x3e\n          </div>\n        </div>\n        <div class="mvu-footer">\n          <div class="mvu-status">\n            <i class="fas fa-circle" id="statusIcon"></i>\n            <span id="statusText">å‡†å¤‡å°±ç»ª</span>\n            <span id="dirtyIndicator" class="mvu-dirty" style="display: none;">â— æœ‰æœªä¿å­˜çš„ä¿®æ”¹</span>\n          </div>\n        </div>\n      </div>\n    ')}bindEvents(){this.container.find('#importBtn').on('click',(()=>this.importJson())),this.container.find('#exportBtn').on('click',(()=>this.exportJson())),this.container.find('#addRootBtn').on('click',(()=>this.addRootItem())),this.container.find('#clearBtn').on('click',(()=>this.clearData()))}renderData(){const t=this.container.find('#editorPanel');if(t.empty(),0===Object.keys(this.data).length)this.renderEmptyState(t);else{const e=$('<div class="mvu-tree"></div>');this.renderObject(this.data,e,''),t.append(e)}}renderEmptyState(t){const e=$('\n      <div class="mvu-empty-state">\n        <div class="mvu-empty-icon">\n          <i class="fas fa-folder-open"></i>\n        </div>\n        <div class="mvu-empty-title">æ–‡ä»¶å¤¹æ˜¯ç©ºçš„</div>\n        <div class="mvu-empty-description">\n          è¿™é‡Œè¿˜æ²¡æœ‰ä»»ä½•è®¾å®šæ–‡ä»¶ã€‚æ‚¨å¯ä»¥åˆ›å»ºæ–°çš„è®¾å®šï¼Œ<br>\n          æˆ–è€…æ‰“å¼€å·²æœ‰çš„è®¾å®šæ–‡ä»¶å¼€å§‹ç¼–è¾‘ã€‚\n        </div>\n        <div class="mvu-empty-actions">\n          <button class="mvu-btn mvu-btn-primary" id="quickAddBtn">\n            <i class="fas fa-file-plus"></i> æ–°å»ºè®¾å®š\n          </button>\n          <button class="mvu-btn mvu-btn-secondary" id="quickImportBtn">\n            <i class="fas fa-folder-open"></i> æ‰“å¼€æ–‡ä»¶\n          </button>\n        </div>\n      </div>\n    ');e.find('#quickAddBtn').on('click',(()=>this.addRootItem())),e.find('#quickImportBtn').on('click',(()=>this.importJson())),t.append(e)}renderObject(t,e,i){Object.keys(t).forEach((n=>{const s=t[n],a=i?`${i}.${n}`:n;Array.isArray(s)&&2===s.length?this.renderValuePair(n,s,e,a):'object'==typeof s&&null!==s&&this.renderNestedObject(n,s,e,a)}))}renderValuePair(t,e,i,n){const s=$(`\n      <div class="mvu-item mvu-value-pair" data-path="${n}">\n        <div class="mvu-item-header">\n          <span class="mvu-key">${t}</span>\n          <div class="mvu-actions">\n            <button class="mvu-btn-icon mvu-btn-edit mvu-tooltip" data-tooltip="ç¼–è¾‘">\n              <i class="fas fa-edit"></i>\n            </button>\n            <button class="mvu-btn-icon mvu-btn-delete mvu-tooltip" data-tooltip="åˆ é™¤">\n              <i class="fas fa-trash"></i>\n            </button>\n          </div>\n        </div>\n        <div class="mvu-value-content">\n          <div class="mvu-value-display">\n            <span class="mvu-value">${this.formatValue(e[0])}</span>\n            <span class="mvu-description">${e[1]}</span>\n          </div>\n        </div>\n      </div>\n    `);s.find('.mvu-btn-edit').on('click',(()=>this.editValuePair(n,t,e))),s.find('.mvu-btn-delete').on('click',(()=>this.deleteItem(n))),i.append(s)}renderNestedObject(t,e,i,n){const s=$(`\n      <div class="mvu-item mvu-nested-object" data-path="${n}">\n        <div class="mvu-item-header">\n          <button class="mvu-toggle">\n            <i class="fas fa-chevron-down"></i>\n          </button>\n          <span class="mvu-key">${t}</span>\n          <div class="mvu-actions">\n            <button class="mvu-btn-icon mvu-btn-add mvu-tooltip" data-tooltip="æ·»åŠ å­é¡¹">\n              <i class="fas fa-plus"></i>\n            </button>\n            <button class="mvu-btn-icon mvu-btn-delete mvu-tooltip" data-tooltip="åˆ é™¤æ–‡ä»¶å¤¹">\n              <i class="fas fa-trash"></i>\n            </button>\n          </div>\n        </div>\n        <div class="mvu-children">\n        </div>\n      </div>\n    `),a=s.find('.mvu-children');this.renderObject(e,a,n),s.find('.mvu-toggle').on('click',(function(){const t=$(this),e=t.find('i'),i=t.closest('.mvu-item').find('.mvu-children');i.is(':visible')?(i.slideUp(200),e.removeClass('fa-chevron-down').addClass('fa-chevron-right')):(i.slideDown(200),e.removeClass('fa-chevron-right').addClass('fa-chevron-down'))})),s.find('.mvu-btn-add').on('click',(()=>this.addChildItem(n))),s.find('.mvu-btn-delete').on('click',(()=>this.deleteItem(n))),i.append(s)}formatValue(t){return e.format(t)}editValuePair(t,e,i){const n=this.createEditDialog(e,i[0],i[1]);n.dialog({title:`ç¼–è¾‘ ${e}`,width:500,height:400,modal:!0,resizable:!1,buttons:{ä¿å­˜:()=>{const e=n.find('#valueInput').val(),i=n.find('#descriptionInput').val(),s=this.parseValue(e);this.setValueByPath(t,[s,i]),this.markDirty(),this.renderData(),n.dialog('close')},å–æ¶ˆ:()=>{n.dialog('close')}},close:()=>{n.remove()}})}createEditDialog(t,e,i){return $(`\n      <div class="mvu-edit-dialog">\n        <div class="mvu-form-group">\n          <label for="valueInput">å½“å‰å€¼:</label>\n          <input type="text" id="valueInput" class="mvu-input" value="${e}" placeholder="è¾“å…¥æ•°å€¼æˆ–æ–‡å­—" />\n          <small class="mvu-hint">å¯ä»¥æ˜¯æ–‡å­—ã€æ•°å­—æˆ– true/false</small>\n        </div>\n        <div class="mvu-form-group">\n          <label for="descriptionInput">è¯´æ˜:</label>\n          <textarea id="descriptionInput" class="mvu-textarea" rows="5" placeholder="æè¿°è¿™ä¸ªè®¾å®šçš„ä½œç”¨å’Œæ›´æ–°è§„åˆ™">${i}</textarea>\n          <small class="mvu-hint">è¯´æ˜è¿™ä¸ªè®¾å®šçš„å«ä¹‰ã€å–å€¼èŒƒå›´å’Œæ›´æ–°æ¡ä»¶</small>\n        </div>\n      </div>\n    `)}parseValue(t){return e.parse(t)}addRootItem(){this.showAddItemDialog('',!1)}addChildItem(t){this.showAddItemDialog(t,!0)}showAddItemDialog(t,e){const i=$('\n      <div class="mvu-add-dialog">\n        <div class="mvu-form-group">\n          <label for="keyInput">åç§°:</label>\n          <input type="text" id="keyInput" class="mvu-input" placeholder="ä¾‹å¦‚ï¼šè§’è‰²åå­—ã€å½“å‰ä½ç½®ã€å¥½æ„Ÿåº¦" />\n          <small class="mvu-hint">ç»™è¿™ä¸ªè®¾å®šèµ·ä¸ªå®¹æ˜“ç†è§£çš„åå­—</small>\n        </div>\n        <div class="mvu-form-group">\n          <label>ç±»å‹:</label>\n          <div class="mvu-radio-group">\n            <label><input type="radio" name="itemType" value="value" checked> ğŸ“„ æ–‡ä»¶ (å…·ä½“çš„è®¾å®šå€¼)</label>\n            <label><input type="radio" name="itemType" value="object"> ğŸ“ æ–‡ä»¶å¤¹ (åŒ…å«å¤šä¸ªè®¾å®š)</label>\n          </div>\n        </div>\n        <div id="valueFields">\n          <div class="mvu-form-group">\n            <label for="newValueInput">åˆå§‹å€¼:</label>\n            <input type="text" id="newValueInput" class="mvu-input" placeholder="ä¾‹å¦‚ï¼šå°æ˜ã€æ•™å ‚ã€0ã€true" />\n            <small class="mvu-hint">è¿™ä¸ªè®¾å®šçš„åˆå§‹æ•°å€¼</small>\n          </div>\n          <div class="mvu-form-group">\n            <label for="newDescriptionInput">è¯´æ˜:</label>\n            <textarea id="newDescriptionInput" class="mvu-textarea" rows="3" placeholder="ä¾‹å¦‚ï¼šè§’è‰²çš„çœŸå®å§“åï¼Œåœ¨å‰§æƒ…ä¸­ä¸ä¼šæ”¹å˜"></textarea>\n            <small class="mvu-hint">è§£é‡Šè¿™ä¸ªè®¾å®šçš„ä½œç”¨å’Œæ›´æ–°è§„åˆ™</small>\n          </div>\n        </div>\n      </div>\n    ');i.find('input[name="itemType"]').on('change',(function(){const t=i.find('#valueFields');'value'===$(this).val()?t.show():t.hide()})),i.dialog({title:e?'æ–°å»ºå­é¡¹':'æ–°å»ºè®¾å®š',width:450,height:350,modal:!0,resizable:!1,buttons:{åˆ›å»º:()=>{const e=i.find('#keyInput').val(),n=i.find('input[name="itemType"]:checked').val();if(!e.trim())return void toastr.error('è¯·è¾“å…¥è®¾å®šåç§°');let s;if('value'===n){s=[this.parseValue(i.find('#newValueInput').val()),i.find('#newDescriptionInput').val()]}else s={};const a=t?`${t}.${e}`:e;this.setValueByPath(a,s),this.markDirty(),this.renderData(),i.dialog('close')},å–æ¶ˆ:()=>{i.dialog('close')}},close:()=>{i.remove()}})}deleteItem(t){confirm('ğŸ—‘ï¸ ç¡®å®šè¦åˆ é™¤è¿™ä¸ªè®¾å®šå—ï¼Ÿ\nåˆ é™¤åæ— æ³•æ¢å¤ï¼')&&(this.deleteValueByPath(t),this.markDirty(),this.renderData(),toastr.success('è®¾å®šå·²åˆ é™¤'))}setValueByPath(t,e){const i=t.split('.');let n=this.data;for(let t=0;t<i.length-1;t++)i[t]in n||(n[i[t]]={}),n=n[i[t]];n[i[i.length-1]]=e}deleteValueByPath(t){const e=t.split('.');let i=this.data;for(let t=0;t<e.length-1;t++)i=i[e[t]];delete i[e[e.length-1]]}clearData(){confirm('ğŸ§¹ ç¡®å®šè¦æ¸…ç©ºæ‰€æœ‰è®¾å®šå—ï¼Ÿ\nè¿™å°†åˆ é™¤æ‚¨åˆ›å»ºçš„æ‰€æœ‰å†…å®¹ï¼Œæ— æ³•æ¢å¤ï¼')&&(this.data={},this.markDirty(),this.renderData(),toastr.success('æ‰€æœ‰è®¾å®šå·²æ¸…ç©º'))}importJson(){const e=$('<input type="file" accept=".json" style="display: none;">');e.on('change',(e=>{const i=e.target.files?.[0];if(!i)return;this.showLoading('æ­£åœ¨å¯¼å…¥æ–‡ä»¶...');const n=new FileReader;n.onload=e=>{try{const i=JSON.parse(e.target?.result),n=t.validate(i);if(n.valid){if(this.isDirty&&!confirm('ğŸ“ å½“å‰æœ‰æœªä¿å­˜çš„ä¿®æ”¹ï¼Œç¡®å®šè¦æ‰“å¼€æ–°æ–‡ä»¶å—ï¼Ÿ\næœªä¿å­˜çš„ä¿®æ”¹å°†ä¼šä¸¢å¤±ï¼'))return void this.hideLoading();this.data=i,this.markClean(),this.renderData(),this.hideLoading(),toastr.success(`ğŸ‰ æ–‡ä»¶æ‰“å¼€æˆåŠŸï¼å…±è½½å…¥ ${this.countItems(i)} ä¸ªè®¾å®š`)}else this.hideLoading(),this.showValidationErrors(n.errors)}catch(t){this.hideLoading(),toastr.error('âŒ æ–‡ä»¶æ ¼å¼æœ‰é—®é¢˜ï¼š'+t.message)}},n.onerror=()=>{this.hideLoading(),toastr.error('âŒ æ–‡ä»¶è¯»å–å¤±è´¥ï¼Œè¯·é‡è¯•')},n.readAsText(i)})),e.trigger('click')}exportJson(){if(0!==Object.keys(this.data).length)try{const e=t.validate(this.data);if(!e.valid)return toastr.error('âŒ è®¾å®šæ ¼å¼æœ‰é—®é¢˜ï¼Œæ— æ³•ä¿å­˜'),void this.showValidationErrors(e.errors);const i=JSON.stringify(this.data,null,2),n=new Blob([i],{type:'application/json'}),s=URL.createObjectURL(n),a=`mvu-initvar-${(new Date).toISOString().slice(0,19).replace(/[:-]/g,'')}.json`;$('<a>').attr({href:s,download:a})[0].click(),URL.revokeObjectURL(s);const r=this.countItems(this.data);toastr.success(`ğŸ’¾ æ–‡ä»¶ä¿å­˜æˆåŠŸï¼å…±ä¿å­˜äº† ${r} ä¸ªè®¾å®š`)}catch(t){toastr.error('âŒ ä¿å­˜å¤±è´¥ï¼š'+t.message)}else toastr.warning('âš ï¸ è¿˜æ²¡æœ‰ä»»ä½•è®¾å®šå¯ä»¥ä¿å­˜')}markDirty(){this.isDirty=!0,this.container.find('#dirtyIndicator').show(),this.container.find('#statusText').text('å·²ä¿®æ”¹'),this.container.find('#statusIcon').removeClass('fa-circle').addClass('fa-exclamation-circle').css('color','#f59e0b')}markClean(){this.isDirty=!1,this.container.find('#dirtyIndicator').hide(),this.container.find('#statusText').text('å·²ä¿å­˜'),this.container.find('#statusIcon').removeClass('fa-exclamation-circle').addClass('fa-circle').css('color','#10b981')}isDirtyState(){return this.isDirty}showLoading(t='åŠ è½½ä¸­...'){this.container.find('#editorPanel').html(`\n      <div class="mvu-loading">\n        <div class="mvu-spinner"></div>\n        <div style="margin-left: 12px; color: #666;">${t}</div>\n      </div>\n    `)}hideLoading(){this.renderData()}countItems(t){let e=0;const i=t=>{for(const n of Object.values(t))Array.isArray(n)&&2===n.length?e++:'object'==typeof n&&null!==n&&i(n)};return i(t),e}showValidationErrors(t){const e=t.map((t=>`ğŸ“ ${t.path||'æ ¹ç›®å½•'}: ${t.message}`)).join('\n');$(`\n      <div class="mvu-validation-errors">\n        <h3>âŒ æ–‡ä»¶æ ¼å¼æœ‰é—®é¢˜</h3>\n        <p>å‘ç°ä»¥ä¸‹é—®é¢˜ï¼š</p>\n        <pre style="background: #f5f5f5; padding: 12px; border-radius: 6px; font-size: 12px; max-height: 200px; overflow-y: auto; line-height: 1.4;">${e}</pre>\n        <p><small>ğŸ’¡ è¯·ä¿®æ­£è¿™äº›é—®é¢˜åé‡æ–°æ‰“å¼€æ–‡ä»¶ã€‚</small></p>\n      </div>\n    `).dialog({title:'âš ï¸ æ— æ³•æ‰“å¼€æ–‡ä»¶',width:500,height:350,modal:!0,resizable:!1,buttons:{çŸ¥é“äº†:function(){$(this).dialog('close')}},close:function(){$(this).remove()}})}}$((()=>{new i('mvuEditor')}));</script></body></html>