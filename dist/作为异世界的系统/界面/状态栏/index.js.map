{"version":3,"file":"index.js","mappings":"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","sources":["src://tavern_helper_template/node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.24_typescript@6.0.0-dev.20250807__webpack@5.102.1/node_modules/vue-loader/dist/exportHelper.js","src://tavern_helper_template/webpack/bootstrap","src://tavern_helper_template/external var \"Vue\"","src://tavern_helper_template/src/作为异世界的系统/界面/状态栏/constants.ts","src://tavern_helper_template/external var \"z\"","src://tavern_helper_template/src/作为异世界的系统/schema.ts","src://tavern_helper_template/src/作为异世界的系统/界面/状态栏/store.ts","src://tavern_helper_template/src/作为异世界的系统/界面/状态栏/composables/useStatusEffects.ts","webpack://tavern_helper_template/./src/作为异世界的系统/界面/状态栏/components/TopBar.vue?59ff","webpack://tavern_helper_template/src/作为异世界的系统/界面/状态栏/components/TopBar.vue?c677","src://tavern_helper_template/src/作为异世界的系统/界面/状态栏/composables/useAvatarManager.ts","webpack://tavern_helper_template/./src/作为异世界的系统/界面/状态栏/components/CharacterInfo.vue?0172","webpack://tavern_helper_template/src/作为异世界的系统/界面/状态栏/components/CharacterInfo.vue?80e8","src://tavern_helper_template/src/作为异世界的系统/界面/状态栏/composables/useBubble.ts","webpack://tavern_helper_template/./src/作为异世界的系统/界面/状态栏/components/AbilitiesPanel.vue?294e","webpack://tavern_helper_template/src/作为异世界的系统/界面/状态栏/components/AbilitiesPanel.vue?20fa","webpack://tavern_helper_template/./src/作为异世界的系统/界面/状态栏/components/AbilityPanel.vue?1b35","webpack://tavern_helper_template/src/作为异世界的系统/界面/状态栏/components/AbilityPanel.vue?340a","webpack://tavern_helper_template/./src/作为异世界的系统/界面/状态栏/components/StatusEffectsPanel.vue?82e0","webpack://tavern_helper_template/src/作为异世界的系统/界面/状态栏/components/StatusEffectsPanel.vue?12a8","webpack://tavern_helper_template/./src/作为异世界的系统/界面/状态栏/components/EquipmentPanel.vue?9ab8","webpack://tavern_helper_template/src/作为异世界的系统/界面/状态栏/components/EquipmentPanel.vue?9d92","webpack://tavern_helper_template/./src/作为异世界的系统/界面/状态栏/components/InventoryPanel.vue?0f7a","webpack://tavern_helper_template/src/作为异世界的系统/界面/状态栏/components/InventoryPanel.vue?93b1","webpack://tavern_helper_template/./src/作为异世界的系统/界面/状态栏/components/StatusPopover.vue?d287","webpack://tavern_helper_template/src/作为异世界的系统/界面/状态栏/components/StatusPopover.vue?589d","webpack://tavern_helper_template/./src/作为异世界的系统/界面/状态栏/components/AbilityPopover.vue?5e95","webpack://tavern_helper_template/src/作为异世界的系统/界面/状态栏/components/AbilityPopover.vue?984e","webpack://tavern_helper_template/./src/作为异世界的系统/界面/状态栏/components/BottomBar.vue?5e6d","webpack://tavern_helper_template/src/作为异世界的系统/界面/状态栏/components/BottomBar.vue?810d","webpack://tavern_helper_template/./src/作为异世界的系统/界面/状态栏/components/ActionModal.vue?b208","webpack://tavern_helper_template/src/作为异世界的系统/界面/状态栏/components/ActionModal.vue?283e","src://tavern_helper_template/src/作为异世界的系统/界面/状态栏/view/AutoTask.vue","webpack://tavern_helper_template/src/作为异世界的系统/界面/状态栏/view/AutoTask.vue?04c4","src://tavern_helper_template/src/作为异世界的系统/界面/状态栏/view/PublishTask.vue","webpack://tavern_helper_template/src/作为异世界的系统/界面/状态栏/view/PublishTask.vue?eab9","src://tavern_helper_template/src/作为异世界的系统/界面/状态栏/view/CreateShopItem.vue","webpack://tavern_helper_template/src/作为异世界的系统/界面/状态栏/view/CreateShopItem.vue?1154","src://tavern_helper_template/src/作为异世界的系统/界面/状态栏/view/GrantReward.vue","webpack://tavern_helper_template/src/作为异世界的系统/界面/状态栏/view/GrantReward.vue?01b3","webpack://tavern_helper_template/./src/作为异世界的系统/界面/状态栏/view/Shop.vue?10ce","webpack://tavern_helper_template/src/作为异世界的系统/界面/状态栏/view/Shop.vue?4122","webpack://tavern_helper_template/./src/作为异世界的系统/界面/状态栏/view/TaskList.vue?d9b4","webpack://tavern_helper_template/src/作为异世界的系统/界面/状态栏/view/TaskList.vue?1453","webpack://tavern_helper_template/./src/作为异世界的系统/界面/状态栏/App.vue?d738","webpack://tavern_helper_template/src/作为异世界的系统/界面/状态栏/App.vue?f0e7","src://tavern_helper_template/src/作为异世界的系统/界面/状态栏/composables/useResponsive.ts","src://tavern_helper_template/src/作为异世界的系统/界面/状态栏/composables/useScaling.ts","src://tavern_helper_template/src/作为异世界的系统/界面/状态栏/index.ts"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n// runtime helper for setting properties on components\n// in a tree-shakable way\nexports.default = (sfc, props) => {\n    const target = sfc.__vccOpts || sfc;\n    for (const [key, val] of props) {\n        target[key] = val;\n    }\n    return target;\n};\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","const __WEBPACK_NAMESPACE_OBJECT__ = Vue;","import type { AbilityKey } from './types';\n\nexport const abilityOrder: readonly AbilityKey[] = ['力量', '敏捷', '体质', '感知', '意志', '魅力'];\n\nexport const abilityBaseDescriptions: Record<AbilityKey, string> = {\n  力量: '体能与攻击能力，决定近战输出与负重',\n  敏捷: '移动、闪避与反应速度，影响先手与命中',\n  体质: '生命力与耐久度，决定抗性与恢复速度',\n  感知: '观察与洞察能力，影响侦查与魔力控制',\n  意志: '精神力与抗干扰能力，决定技能稳定性',\n  魅力: '影响交涉、统御与社交反馈的综合指标',\n};\n\nexport const BASE_WIDTH = 800;\n\nexport const ITEMS_PER_PAGE = 6;\n","const __WEBPACK_NAMESPACE_OBJECT__ = z;","import { z } from 'zod';\n\nexport const Schema = z.object({\n  世界: z.object({\n    当前时间: z.coerce.string(),\n    当前地点: z.coerce.string(),\n  }),\n\n  主角: z.object({\n    姓名: z.coerce.string(),\n    性别: z.coerce.string(),\n    年龄: z.union([z.coerce.number(), z.literal('待初始化')]),\n    外貌: z.object({\n      描述: z.coerce.string(),\n      主角评价: z.coerce.string(),\n    }),\n    能力面板: z.object({\n      力量: z\n        .object({\n          数值: z.union([z.union([z.coerce.number(), z.literal('待初始化')]), z.literal('待初始化')]),\n          主角评价: z.coerce.string(),\n        })\n        .describe('体能与攻击能力，决定近战输出与负重'),\n      敏捷: z\n        .object({\n          数值: z.union([z.coerce.number(), z.literal('待初始化')]),\n          主角评价: z.coerce.string(),\n        })\n        .describe('移动、闪避与反应速度，影响先手与命中'),\n      体质: z\n        .object({\n          数值: z.union([z.coerce.number(), z.literal('待初始化')]),\n          主角评价: z.coerce.string(),\n        })\n        .describe('生命力与耐久度，决定抗性与恢复速度'),\n      感知: z\n        .object({\n          数值: z.union([z.coerce.number(), z.literal('待初始化')]),\n          主角评价: z.coerce.string(),\n        })\n        .describe('观察与洞察能力，影响侦查与魔力控制'),\n      意志: z\n        .object({\n          数值: z.union([z.coerce.number(), z.literal('待初始化')]),\n          主角评价: z.coerce.string(),\n        })\n        .describe('精神力与抗干扰能力，决定技能稳定性'),\n      魅力: z\n        .object({\n          数值: z.union([z.coerce.number(), z.literal('待初始化')]),\n          主角评价: z.coerce.string(),\n        })\n        .describe('影响交涉、统御与社交反馈的综合指标'),\n    }),\n    装备栏: z.object({\n      主手: z.object({\n        装备: z.coerce.string(),\n        主角评价: z.coerce.string(),\n      }),\n      副手: z.object({\n        装备: z.coerce.string(),\n        主角评价: z.coerce.string(),\n      }),\n      防具: z.object({\n        装备: z.coerce.string(),\n        主角评价: z.coerce.string(),\n      }),\n      饰品: z.object({\n        装备: z.coerce.string(),\n        主角评价: z.coerce.string(),\n      }),\n    }),\n    物品栏: z.record(\n      z.coerce.string<string | number>().describe('物品名'),\n      z.object({\n        描述: z.coerce.string(),\n        主角评价: z.coerce.string(),\n      }),\n    ),\n    持有能力: z.record(\n      z.coerce.string<string | number>().describe('物品名'),\n      z.object({\n        描述: z.coerce.string(),\n        主角评价: z.coerce.string(),\n      }),\n    ),\n    当前状态: z.record(\n      z.coerce.string<string | number>().describe('状态名'),\n      z.object({\n        类型: z.enum(['增益', '减益']),\n        持续时间: z.union([z.literal('永久'), z.coerce.string()]),\n        触发条件: z.coerce.string(),\n        描述: z.coerce.string(),\n        主角评价: z.coerce.string(),\n      }),\n    ),\n  }),\n\n  系统状态: z.object({\n    可用积分: z.union([z.coerce.number(), z.literal('待初始化')]),\n    对主角可见形象: z.coerce.string(),\n    玩家ID: z.coerce.string(),\n  }),\n\n  商品列表: z.record(\n    z.coerce.string<string | number>().describe('商品名'),\n    z.object({\n      描述: z.coerce.string(),\n      主角评价: z.coerce.string(),\n      积分价格: z.union([z.coerce.number(), z.literal('待初始化')]),\n    }),\n  ),\n\n  任务列表: z.record(\n    z.coerce.string<string | number>().describe('任务名'),\n    z.object({\n      类型: z.enum(['主线', '支线', '每日', '临危受命']),\n      说明: z.coerce.string(),\n      目标: z.coerce.string(),\n      奖励: z.coerce.string(),\n      惩罚: z.coerce.string(),\n    }),\n  ),\n});\nexport type Schema = z.output<typeof Schema>;\nexport const TASK_TYPES = ['主线', '支线', '每日', '临危受命'] as const;\n","import { Schema } from '../../schema';\nexport const useDataStore = defineStore('data', () => {\n    const data = ref(Schema.parse(_.get(getVariables({ type: 'message', message_id: getCurrentMessageId() }), 'stat_data', {})));\n    watchEffect(() => {\n        updateVariablesWith(variables => {\n            _.set(variables, 'stat_data', klona(data.value));\n            return variables;\n        }, { type: 'message', message_id: getCurrentMessageId() });\n    });\n    return { data };\n});\n","export function normalizeStatusEntries(value) {\n    if (!value || typeof value !== 'object') {\n        return [];\n    }\n    const entries = [];\n    const statusObj = value;\n    Object.entries(statusObj).forEach(([name, data]) => {\n        if (name === '$meta' || !data || typeof data !== 'object') {\n            return;\n        }\n        const statusData = data;\n        entries.push({\n            id: `status-${name}`,\n            name,\n            类型: statusData.类型 || '增益',\n            持续时间: statusData.持续时间 || '',\n            触发条件: statusData.触发条件 || '',\n            描述: statusData.描述 || '',\n            主角评价: statusData.主角评价 || '',\n        });\n    });\n    return entries;\n}\nexport function useStatusEffects(heroData) {\n    const allStatus = computed(() => normalizeStatusEntries(heroData.value.当前状态));\n    const buffList = computed(() => allStatus.value.filter(s => s.类型 === '增益'));\n    const debuffList = computed(() => allStatus.value.filter(s => s.类型 === '减益'));\n    const statusCounts = computed(() => ({\n        增益: buffList.value.length,\n        减益: debuffList.value.length,\n    }));\n    return {\n        allStatus,\n        buffList,\n        debuffList,\n        statusCounts,\n    };\n}\n","import { defineComponent as _defineComponent } from 'vue';\nimport { createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\";\nconst _hoisted_1 = { class: \"top-info-bar\" };\nconst _hoisted_2 = { class: \"info-left\" };\nconst _hoisted_3 = { class: \"info-right\" };\nconst _hoisted_4 = { class: \"status-badge\" };\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'TopBar',\n    props: {\n        currentTimeLabel: {},\n        location: {}\n    },\n    setup(__props) {\n        const props = __props;\n        return (_ctx, _cache) => {\n            return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n                _createElementVNode(\"div\", _hoisted_2, [\n                    _cache[0] || (_cache[0] = _createElementVNode(\"span\", {\n                        class: \"status-indicator online\",\n                        \"aria-hidden\": \"true\"\n                    }, null, -1 /* CACHED */)),\n                    _createElementVNode(\"span\", null, _toDisplayString(__props.currentTimeLabel), 1 /* TEXT */)\n                ]),\n                _createElementVNode(\"div\", _hoisted_3, [\n                    _createElementVNode(\"div\", _hoisted_4, _toDisplayString(__props.location), 1 /* TEXT */)\n                ])\n            ]));\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./TopBar.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./TopBar.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./TopBar.vue?vue&type=style&index=0&id=2ba81f26&lang=scss&scoped=true\"\n\nimport exportComponent from \"../../../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.24_typescript@6.0.0-dev.20250807__webpack@5.102.1/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-2ba81f26\"]])\n\nexport default __exports__","import { ref } from 'vue';\n\nconst AVATAR_WORLDBOOK_NAME = '转生系统的头像文件！';\nconst MAX_IMAGE_SIZE = 500; // 压缩后的最大尺寸\n\n/**\n * 压缩图片并转换为 base64\n */\nasync function compressImage(file: File): Promise<string> {\n  return new Promise((resolve, reject) => {\n    const reader = new FileReader();\n    reader.onload = (e) => {\n      const img = new Image();\n      img.onload = () => {\n        const canvas = document.createElement('canvas');\n        let width = img.width;\n        let height = img.height;\n\n        // 计算压缩后的尺寸，保持宽高比\n        if (width > height && width > MAX_IMAGE_SIZE) {\n          height = (height * MAX_IMAGE_SIZE) / width;\n          width = MAX_IMAGE_SIZE;\n        } else if (height >= width && height > MAX_IMAGE_SIZE) {\n          width = (width * MAX_IMAGE_SIZE) / height;\n          height = MAX_IMAGE_SIZE;\n        }\n\n        canvas.width = width;\n        canvas.height = height;\n        const ctx = canvas.getContext('2d');\n        if (!ctx) {\n          reject(new Error('无法获取 canvas context'));\n          return;\n        }\n\n        ctx.drawImage(img, 0, 0, width, height);\n        \n        // 转换为 base64，使用 JPEG 格式压缩\n        const base64 = canvas.toDataURL('image/jpeg', 0.8);\n        resolve(base64);\n      };\n      img.onerror = () => reject(new Error('图片加载失败'));\n      img.src = e.target?.result as string;\n    };\n    reader.onerror = () => reject(new Error('文件读取失败'));\n    reader.readAsDataURL(file);\n  });\n}\n\n/**\n * 获取或创建头像世界书\n */\nasync function ensureAvatarWorldbook(): Promise<void> {\n  const worldbooks = getWorldbookNames();\n  if (!worldbooks.includes(AVATAR_WORLDBOOK_NAME)) {\n    await createWorldbook(AVATAR_WORLDBOOK_NAME, []);\n    // 绑定到当前聊天\n    await rebindChatWorldbook('current', AVATAR_WORLDBOOK_NAME);\n  }\n}\n\n/**\n * 保存头像到聊天知识书\n */\nasync function saveAvatar(characterName: string, base64: string): Promise<void> {\n  await ensureAvatarWorldbook();\n  \n  const worldbook = await getWorldbook(AVATAR_WORLDBOOK_NAME);\n  \n  // 查找是否已存在该角色的头像条目\n  const existingEntryIndex = worldbook.findIndex(\n    entry => entry.strategy.keys.includes(characterName)\n  );\n  \n  const entryData = {\n    name: `${characterName}的头像`,\n    enabled: true,\n    strategy: {\n      type: 'selective' as const,\n      keys: [characterName],\n      keys_secondary: { logic: 'and_any' as const, keys: [] },\n      scan_depth: 1,\n    },\n    position: {\n      type: 'after_character_definition' as const,\n      role: 'system' as const,\n      depth: 0,\n      order: 999,\n    },\n    content: JSON.stringify({\n      角色名称: characterName,\n      头像数据: base64,\n      更新时间: new Date().toISOString(),\n    }),\n    probability: 100,\n    recursion: {\n      prevent_incoming: true,\n      prevent_outgoing: true,\n      delay_until: null,\n    },\n    effect: {\n      sticky: null,\n      cooldown: null,\n      delay: null,\n    },\n  };\n  \n  if (existingEntryIndex >= 0) {\n    // 更新现有条目\n    worldbook[existingEntryIndex] = {\n      ...worldbook[existingEntryIndex],\n      ...entryData,\n    };\n    await replaceWorldbook(AVATAR_WORLDBOOK_NAME, worldbook);\n  } else {\n    // 创建新条目\n    await createWorldbookEntries(AVATAR_WORLDBOOK_NAME, [entryData]);\n  }\n}\n\n/**\n * 读取角色头像\n */\nasync function loadAvatar(characterName: string): Promise<string | null> {\n  try {\n    const worldbooks = getWorldbookNames();\n    if (!worldbooks.includes(AVATAR_WORLDBOOK_NAME)) {\n      return null;\n    }\n    \n    const worldbook = await getWorldbook(AVATAR_WORLDBOOK_NAME);\n    const entry = worldbook.find(\n      e => e.strategy.keys.includes(characterName)\n    );\n    \n    if (!entry) {\n      return null;\n    }\n    \n    const data = JSON.parse(entry.content);\n    return data.头像数据 || null;\n  } catch (err) {\n    console.error('[头像管理] 读取头像失败', err);\n    return null;\n  }\n}\n\nexport function useAvatarManager() {\n  const uploading = ref(false);\n  const avatarUrl = ref<string | null>(null);\n  \n  /**\n   * 上传头像\n   */\n  const uploadAvatar = async (characterName: string): Promise<void> => {\n    if (!characterName || characterName === '角色名称') {\n      toastr?.warning?.('请先设置角色名称', '头像上传');\n      return;\n    }\n    \n    // 创建文件选择器\n    const input = document.createElement('input');\n    input.type = 'file';\n    input.accept = 'image/*';\n    \n    input.onchange = async (e) => {\n      const file = (e.target as HTMLInputElement).files?.[0];\n      if (!file) {\n        return;\n      }\n      \n      // 验证文件类型\n      if (!file.type.startsWith('image/')) {\n        toastr?.error?.('请选择图片文件', '头像上传');\n        return;\n      }\n      \n      // 验证文件大小（最大 5MB）\n      if (file.size > 5 * 1024 * 1024) {\n        toastr?.error?.('图片文件过大，请选择小于 5MB 的图片', '头像上传');\n        return;\n      }\n      \n      uploading.value = true;\n      \n      try {\n        // 压缩并转换为 base64\n        const base64 = await compressImage(file);\n        \n        // 保存到聊天知识书\n        await saveAvatar(characterName, base64);\n        \n        // 更新显示\n        avatarUrl.value = base64;\n        \n        toastr?.success?.('头像上传成功', '头像上传');\n      } catch (err) {\n        console.error('[头像上传] 失败', err);\n        toastr?.error?.('头像上传失败：' + (err as Error).message, '头像上传');\n      } finally {\n        uploading.value = false;\n      }\n    };\n    \n    input.click();\n  };\n  \n  /**\n   * 加载头像\n   */\n  const loadAvatarForCharacter = async (characterName: string): Promise<void> => {\n    if (!characterName || characterName === '角色名称') {\n      avatarUrl.value = null;\n      return;\n    }\n    \n    try {\n      const url = await loadAvatar(characterName);\n      avatarUrl.value = url;\n    } catch (err) {\n      console.error('[头像加载] 失败', err);\n      avatarUrl.value = null;\n    }\n  };\n  \n  return {\n    uploading,\n    avatarUrl,\n    uploadAvatar,\n    loadAvatarForCharacter,\n  };\n}","import { defineComponent as _defineComponent } from 'vue';\nimport { unref as _unref, createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, normalizeClass as _normalizeClass, normalizeStyle as _normalizeStyle, toDisplayString as _toDisplayString } from \"vue\";\nconst _hoisted_1 = { class: \"character-info-card\" };\nconst _hoisted_2 = { class: \"character-header\" };\nconst _hoisted_3 = [\"title\"];\nconst _hoisted_4 = {\n    key: 0,\n    class: \"avatar-placeholder\"\n};\nconst _hoisted_5 = {\n    key: 1,\n    class: \"avatar-loading\"\n};\nconst _hoisted_6 = { class: \"character-basic-info\" };\nconst _hoisted_7 = { class: \"character-name\" };\nconst _hoisted_8 = { class: \"character-stats\" };\nconst _hoisted_9 = { class: \"stat-item\" };\nconst _hoisted_10 = { class: \"stat-value\" };\nconst _hoisted_11 = { class: \"stat-item\" };\nconst _hoisted_12 = { class: \"stat-value\" };\nconst _hoisted_13 = { class: \"character-description-section\" };\nconst _hoisted_14 = { class: \"appearance-description\" };\nconst _hoisted_15 = { class: \"self-evaluation\" };\nimport { useAvatarManager } from '../composables/useAvatarManager';\n\nimport { watch } from 'vue';\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'CharacterInfo',\n    props: {\n        name: {},\n        gender: {},\n        age: {},\n        appearanceDescription: {},\n        selfEvaluation: {}\n    },\n    setup(__props) {\n        const props = __props;\n        const { uploading: avatarUploading, avatarUrl, uploadAvatar, loadAvatarForCharacter } = useAvatarManager();\n        // 监听角色名称变化，自动加载头像\n        watch(() => props.name, async (newName) => {\n            if (newName && newName !== '角色名称') {\n                await loadAvatarForCharacter(newName);\n            }\n        }, { immediate: true });\n        return (_ctx, _cache) => {\n            return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n                _createElementVNode(\"div\", _hoisted_2, [\n                    _createElementVNode(\"div\", {\n                        class: _normalizeClass([\"character-avatar\", { 'has-avatar': _unref(avatarUrl), uploading: _unref(avatarUploading) }]),\n                        style: _normalizeStyle(_unref(avatarUrl) ? { backgroundImage: `url(${_unref(avatarUrl)})` } : {}),\n                        title: _unref(avatarUploading) ? '上传中...' : '点击上传头像',\n                        onClick: _cache[0] || (_cache[0] = ($event) => (_unref(uploadAvatar)(__props.name)))\n                    }, [\n                        (!_unref(avatarUrl) && !_unref(avatarUploading))\n                            ? (_openBlock(), _createElementBlock(\"div\", _hoisted_4, [...(_cache[1] || (_cache[1] = [\n                                    _createElementVNode(\"span\", null, \"+\", -1 /* CACHED */)\n                                ]))]))\n                            : _createCommentVNode(\"v-if\", true),\n                        (_unref(avatarUploading))\n                            ? (_openBlock(), _createElementBlock(\"div\", _hoisted_5, [...(_cache[2] || (_cache[2] = [\n                                    _createElementVNode(\"span\", null, \"...\", -1 /* CACHED */)\n                                ]))]))\n                            : _createCommentVNode(\"v-if\", true)\n                    ], 14 /* CLASS, STYLE, PROPS */, _hoisted_3),\n                    _createElementVNode(\"div\", _hoisted_6, [\n                        _createElementVNode(\"div\", _hoisted_7, _toDisplayString(__props.name), 1 /* TEXT */),\n                        _createElementVNode(\"div\", _hoisted_8, [\n                            _createElementVNode(\"div\", _hoisted_9, [\n                                _cache[3] || (_cache[3] = _createElementVNode(\"span\", { class: \"stat-label\" }, \"性别:\", -1 /* CACHED */)),\n                                _createElementVNode(\"span\", _hoisted_10, _toDisplayString(__props.gender), 1 /* TEXT */)\n                            ]),\n                            _createElementVNode(\"div\", _hoisted_11, [\n                                _cache[4] || (_cache[4] = _createElementVNode(\"span\", { class: \"stat-label\" }, \"年龄:\", -1 /* CACHED */)),\n                                _createElementVNode(\"span\", _hoisted_12, _toDisplayString(__props.age), 1 /* TEXT */)\n                            ])\n                        ])\n                    ])\n                ]),\n                _createElementVNode(\"div\", _hoisted_13, [\n                    _createElementVNode(\"div\", _hoisted_14, _toDisplayString(__props.appearanceDescription), 1 /* TEXT */),\n                    _createElementVNode(\"div\", _hoisted_15, _toDisplayString(__props.selfEvaluation), 1 /* TEXT */)\n                ])\n            ]));\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./CharacterInfo.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./CharacterInfo.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./CharacterInfo.vue?vue&type=style&index=0&id=5bf17e9a&lang=scss&scoped=true\"\n\nimport exportComponent from \"../../../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.24_typescript@6.0.0-dev.20250807__webpack@5.102.1/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-5bf17e9a\"]])\n\nexport default __exports__","export function useBubble() {\n    const activeBubble = ref(null);\n    function toggleBubble(id) {\n        activeBubble.value = activeBubble.value === id ? null : id;\n    }\n    function closeBubble() {\n        activeBubble.value = null;\n    }\n    return {\n        activeBubble,\n        toggleBubble,\n        closeBubble,\n    };\n}\n","import { defineComponent as _defineComponent } from 'vue';\nimport { renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, unref as _unref, toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, createCommentVNode as _createCommentVNode, normalizeClass as _normalizeClass } from \"vue\";\nconst _hoisted_1 = { class: \"abilities-panel\" };\nconst _hoisted_2 = [\"onClick\"];\nconst _hoisted_3 = { class: \"ability-item__name\" };\nconst _hoisted_4 = { class: \"ability-item__value\" };\nconst _hoisted_5 = { class: \"ability-item__desc\" };\nconst _hoisted_6 = {\n    key: 0,\n    class: \"ability-bubble\"\n};\nimport { useBubble } from '../composables/useBubble';\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'AbilitiesPanel',\n    props: {\n        abilities: {},\n        descriptions: {}\n    },\n    setup(__props) {\n        const props = __props;\n        const { activeBubble, toggleBubble } = useBubble();\n        return (_ctx, _cache) => {\n            return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n                (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(__props.abilities, (ability) => {\n                    return (_openBlock(), _createElementBlock(\"div\", {\n                        key: ability.key,\n                        class: _normalizeClass([\"ability-item\", { active: _unref(activeBubble) === ability.key }]),\n                        onClick: ($event) => (_unref(toggleBubble)(ability.key))\n                    }, [\n                        _createElementVNode(\"div\", _hoisted_3, _toDisplayString(ability.key), 1 /* TEXT */),\n                        _createElementVNode(\"div\", _hoisted_4, _toDisplayString(ability.数值), 1 /* TEXT */),\n                        _createElementVNode(\"div\", _hoisted_5, _toDisplayString(__props.descriptions[ability.key]), 1 /* TEXT */),\n                        (_unref(activeBubble) === ability.key)\n                            ? (_openBlock(), _createElementBlock(\"div\", _hoisted_6, _toDisplayString(ability.主角评价), 1 /* TEXT */))\n                            : _createCommentVNode(\"v-if\", true)\n                    ], 10 /* CLASS, PROPS */, _hoisted_2));\n                }), 128 /* KEYED_FRAGMENT */))\n            ]));\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./AbilitiesPanel.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./AbilitiesPanel.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./AbilitiesPanel.vue?vue&type=style&index=0&id=7b940c1a&lang=scss&scoped=true\"\n\nimport exportComponent from \"../../../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.24_typescript@6.0.0-dev.20250807__webpack@5.102.1/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-7b940c1a\"]])\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue';\nimport { toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode } from \"vue\";\nconst _hoisted_1 = { class: \"ability-status-panel\" };\nconst _hoisted_2 = {\n    key: 0,\n    class: \"ability-status-group\"\n};\nconst _hoisted_3 = { class: \"ability-status-title\" };\nconst _hoisted_4 = { class: \"ability-status-list\" };\nconst _hoisted_5 = { class: \"ability-status-name\" };\nconst _hoisted_6 = { class: \"ability-status-desc\" };\nconst _hoisted_7 = {\n    key: 0,\n    class: \"ability-status-eval\"\n};\nconst _hoisted_8 = {\n    key: 1,\n    class: \"ability-status-empty\"\n};\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'AbilityPanel',\n    props: {\n        abilities: {}\n    },\n    setup(__props) {\n        return (_ctx, _cache) => {\n            return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n                (__props.abilities.length)\n                    ? (_openBlock(), _createElementBlock(\"div\", _hoisted_2, [\n                        _createElementVNode(\"div\", _hoisted_3, \"持有能力 (\" + _toDisplayString(__props.abilities.length) + \")\", 1 /* TEXT */),\n                        _createElementVNode(\"ul\", _hoisted_4, [\n                            (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(__props.abilities, (ability) => {\n                                return (_openBlock(), _createElementBlock(\"li\", {\n                                    key: ability.id,\n                                    class: \"ability-status-item\"\n                                }, [\n                                    _createElementVNode(\"div\", _hoisted_5, _toDisplayString(ability.name), 1 /* TEXT */),\n                                    _createElementVNode(\"p\", _hoisted_6, _toDisplayString(ability.描述), 1 /* TEXT */),\n                                    (ability.主角评价)\n                                        ? (_openBlock(), _createElementBlock(\"p\", _hoisted_7, \"「\" + _toDisplayString(ability.主角评价) + \"」\", 1 /* TEXT */))\n                                        : _createCommentVNode(\"v-if\", true)\n                                ]));\n                            }), 128 /* KEYED_FRAGMENT */))\n                        ])\n                    ]))\n                    : _createCommentVNode(\"v-if\", true),\n                (!__props.abilities.length)\n                    ? (_openBlock(), _createElementBlock(\"p\", _hoisted_8, \"暂无持有能力\"))\n                    : _createCommentVNode(\"v-if\", true)\n            ]));\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./AbilityPanel.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./AbilityPanel.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./AbilityPanel.vue?vue&type=style&index=0&id=36ecc432&lang=scss&scoped=true\"\n\nimport exportComponent from \"../../../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.24_typescript@6.0.0-dev.20250807__webpack@5.102.1/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-36ecc432\"]])\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue';\nimport { unref as _unref, toDisplayString as _toDisplayString, normalizeClass as _normalizeClass, createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, renderList as _renderList, Fragment as _Fragment } from \"vue\";\n\nimport { ref } from 'vue';\nconst _hoisted_1 = { class: \"status-effects-panel\" };\nconst _hoisted_2 = { class: \"status-tabs\" };\nconst _hoisted_3 = { class: \"status-content\" };\nconst _hoisted_4 = {\n    key: 0,\n    class: \"status-effects-empty\"\n};\nconst _hoisted_5 = {\n    key: 1,\n    class: \"status-effects-list\"\n};\nconst _hoisted_6 = { class: \"status-effect-name\" };\nconst _hoisted_7 = { class: \"status-effect-desc\" };\nconst _hoisted_8 = {\n    key: 0,\n    class: \"status-effect-eval\"\n};\nconst _hoisted_9 = { class: \"status-effect-meta\" };\nconst _hoisted_10 = { key: 0 };\nconst _hoisted_11 = { key: 1 };\nconst _hoisted_12 = {\n    key: 0,\n    class: \"status-effects-empty\"\n};\nconst _hoisted_13 = {\n    key: 1,\n    class: \"status-effects-list\"\n};\nconst _hoisted_14 = { class: \"status-effect-name\" };\nconst _hoisted_15 = { class: \"status-effect-desc\" };\nconst _hoisted_16 = {\n    key: 0,\n    class: \"status-effect-eval\"\n};\nconst _hoisted_17 = { class: \"status-effect-meta\" };\nconst _hoisted_18 = { key: 0 };\nconst _hoisted_19 = { key: 1 };\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'StatusEffectsPanel',\n    props: {\n        buffList: {},\n        debuffList: {}\n    },\n    setup(__props) {\n        const activeTab = ref('增益');\n        return (_ctx, _cache) => {\n            return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n                _createElementVNode(\"div\", _hoisted_2, [\n                    _createElementVNode(\"button\", {\n                        class: _normalizeClass([\"status-tab\", { active: _unref(activeTab) === '增益' }]),\n                        type: \"button\",\n                        onClick: _cache[0] || (_cache[0] = ($event) => (activeTab.value = '增益'))\n                    }, \" 增益 (\" + _toDisplayString(__props.buffList.length) + \") \", 3 /* TEXT, CLASS */),\n                    _createElementVNode(\"button\", {\n                        class: _normalizeClass([\"status-tab\", { active: _unref(activeTab) === '减益' }]),\n                        type: \"button\",\n                        onClick: _cache[1] || (_cache[1] = ($event) => (activeTab.value = '减益'))\n                    }, \" 减益 (\" + _toDisplayString(__props.debuffList.length) + \") \", 3 /* TEXT, CLASS */)\n                ]),\n                _createElementVNode(\"div\", _hoisted_3, [\n                    (_unref(activeTab) === '增益')\n                        ? (_openBlock(), _createElementBlock(_Fragment, { key: 0 }, [\n                            (!__props.buffList.length)\n                                ? (_openBlock(), _createElementBlock(\"p\", _hoisted_4, \"暂无增益状态\"))\n                                : (_openBlock(), _createElementBlock(\"ul\", _hoisted_5, [\n                                    (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(__props.buffList, (buff) => {\n                                        return (_openBlock(), _createElementBlock(\"li\", {\n                                            key: buff.id,\n                                            class: \"status-effect-item\"\n                                        }, [\n                                            _createElementVNode(\"div\", _hoisted_6, _toDisplayString(buff.name), 1 /* TEXT */),\n                                            _createElementVNode(\"p\", _hoisted_7, _toDisplayString(buff.描述), 1 /* TEXT */),\n                                            (buff.主角评价)\n                                                ? (_openBlock(), _createElementBlock(\"p\", _hoisted_8, \"「\" + _toDisplayString(buff.主角评价) + \"」\", 1 /* TEXT */))\n                                                : _createCommentVNode(\"v-if\", true),\n                                            _createElementVNode(\"div\", _hoisted_9, [\n                                                (buff.持续时间)\n                                                    ? (_openBlock(), _createElementBlock(\"span\", _hoisted_10, \"持续时间: \" + _toDisplayString(buff.持续时间), 1 /* TEXT */))\n                                                    : _createCommentVNode(\"v-if\", true),\n                                                (buff.触发条件)\n                                                    ? (_openBlock(), _createElementBlock(\"span\", _hoisted_11, \"触发条件: \" + _toDisplayString(buff.触发条件), 1 /* TEXT */))\n                                                    : _createCommentVNode(\"v-if\", true)\n                                            ])\n                                        ]));\n                                    }), 128 /* KEYED_FRAGMENT */))\n                                ]))\n                        ], 64 /* STABLE_FRAGMENT */))\n                        : (_openBlock(), _createElementBlock(_Fragment, { key: 1 }, [\n                            (!__props.debuffList.length)\n                                ? (_openBlock(), _createElementBlock(\"p\", _hoisted_12, \"暂无减益状态\"))\n                                : (_openBlock(), _createElementBlock(\"ul\", _hoisted_13, [\n                                    (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(__props.debuffList, (debuff) => {\n                                        return (_openBlock(), _createElementBlock(\"li\", {\n                                            key: debuff.id,\n                                            class: \"status-effect-item\"\n                                        }, [\n                                            _createElementVNode(\"div\", _hoisted_14, _toDisplayString(debuff.name), 1 /* TEXT */),\n                                            _createElementVNode(\"p\", _hoisted_15, _toDisplayString(debuff.描述), 1 /* TEXT */),\n                                            (debuff.主角评价)\n                                                ? (_openBlock(), _createElementBlock(\"p\", _hoisted_16, \"「\" + _toDisplayString(debuff.主角评价) + \"」\", 1 /* TEXT */))\n                                                : _createCommentVNode(\"v-if\", true),\n                                            _createElementVNode(\"div\", _hoisted_17, [\n                                                (debuff.持续时间)\n                                                    ? (_openBlock(), _createElementBlock(\"span\", _hoisted_18, \"持续时间: \" + _toDisplayString(debuff.持续时间), 1 /* TEXT */))\n                                                    : _createCommentVNode(\"v-if\", true),\n                                                (debuff.触发条件)\n                                                    ? (_openBlock(), _createElementBlock(\"span\", _hoisted_19, \"触发条件: \" + _toDisplayString(debuff.触发条件), 1 /* TEXT */))\n                                                    : _createCommentVNode(\"v-if\", true)\n                                            ])\n                                        ]));\n                                    }), 128 /* KEYED_FRAGMENT */))\n                                ]))\n                        ], 64 /* STABLE_FRAGMENT */))\n                ])\n            ]));\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./StatusEffectsPanel.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./StatusEffectsPanel.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./StatusEffectsPanel.vue?vue&type=style&index=0&id=f9653ffe&lang=scss&scoped=true\"\n\nimport exportComponent from \"../../../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.24_typescript@6.0.0-dev.20250807__webpack@5.102.1/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-f9653ffe\"]])\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue';\nimport { createElementVNode as _createElementVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, unref as _unref, toDisplayString as _toDisplayString, createCommentVNode as _createCommentVNode, normalizeClass as _normalizeClass } from \"vue\";\nconst _hoisted_1 = { class: \"equipment-section\" };\nconst _hoisted_2 = { class: \"equipment-grid\" };\nconst _hoisted_3 = [\"onClick\"];\nconst _hoisted_4 = { class: \"slot-name\" };\nconst _hoisted_5 = { class: \"slot-item\" };\nconst _hoisted_6 = {\n    key: 0,\n    class: \"info-bubble equipment-bubble\"\n};\nimport { useBubble } from '../composables/useBubble';\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'EquipmentPanel',\n    props: {\n        slots: {}\n    },\n    setup(__props) {\n        const { activeBubble, toggleBubble } = useBubble();\n        return (_ctx, _cache) => {\n            return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n                _cache[0] || (_cache[0] = _createElementVNode(\"div\", { class: \"section-title\" }, \"装备栏\", -1 /* CACHED */)),\n                _createElementVNode(\"div\", _hoisted_2, [\n                    (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(__props.slots, (slot) => {\n                        return (_openBlock(), _createElementBlock(\"div\", {\n                            key: slot.label,\n                            class: _normalizeClass([\"equipment-slot\", { active: _unref(activeBubble) === slot.label }]),\n                            onClick: ($event) => (_unref(toggleBubble)(slot.label))\n                        }, [\n                            _createElementVNode(\"div\", _hoisted_4, _toDisplayString(slot.label), 1 /* TEXT */),\n                            _createElementVNode(\"div\", _hoisted_5, _toDisplayString(slot.item || '空置'), 1 /* TEXT */),\n                            (_unref(activeBubble) === slot.label)\n                                ? (_openBlock(), _createElementBlock(\"div\", _hoisted_6, _toDisplayString(slot.evaluation || '暂无评价'), 1 /* TEXT */))\n                                : _createCommentVNode(\"v-if\", true)\n                        ], 10 /* CLASS, PROPS */, _hoisted_3));\n                    }), 128 /* KEYED_FRAGMENT */))\n                ])\n            ]));\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./EquipmentPanel.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./EquipmentPanel.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./EquipmentPanel.vue?vue&type=style&index=0&id=70286b28&lang=scss&scoped=true\"\n\nimport exportComponent from \"../../../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.24_typescript@6.0.0-dev.20250807__webpack@5.102.1/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-70286b28\"]])\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue';\nimport { createElementVNode as _createElementVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, unref as _unref, toDisplayString as _toDisplayString, createCommentVNode as _createCommentVNode, normalizeClass as _normalizeClass } from \"vue\";\nconst _hoisted_1 = { class: \"inventory-section\" };\nconst _hoisted_2 = { class: \"inventory-grid\" };\nconst _hoisted_3 = [\"onClick\"];\nconst _hoisted_4 = { class: \"item-name\" };\nconst _hoisted_5 = { class: \"item-description\" };\nconst _hoisted_6 = {\n    key: 0,\n    class: \"info-bubble inventory-bubble\"\n};\nimport { useBubble } from '../composables/useBubble';\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'InventoryPanel',\n    props: {\n        inventory: {}\n    },\n    setup(__props) {\n        const { activeBubble, toggleBubble } = useBubble();\n        // 判断气泡应该显示在上方还是下方\n        // 列表后半部分的元素,气泡显示在上方\n        function shouldShowBubbleOnTop(index, total) {\n            return index < Math.floor(total / 2);\n        }\n        return (_ctx, _cache) => {\n            return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n                _cache[0] || (_cache[0] = _createElementVNode(\"div\", { class: \"inventory-title\" }, \"物品栏\", -1 /* CACHED */)),\n                _createElementVNode(\"div\", _hoisted_2, [\n                    (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(__props.inventory, (item, index) => {\n                        return (_openBlock(), _createElementBlock(\"div\", {\n                            key: item.id,\n                            class: _normalizeClass([\"inventory-item\", {\n                                    placeholder: item.placeholder,\n                                    active: _unref(activeBubble) === item.id,\n                                    'bubble-top': shouldShowBubbleOnTop(index, __props.inventory.length),\n                                }]),\n                            onClick: ($event) => (!item.placeholder && _unref(toggleBubble)(item.id))\n                        }, [\n                            _createElementVNode(\"div\", _hoisted_4, _toDisplayString(item.名称), 1 /* TEXT */),\n                            _createElementVNode(\"div\", _hoisted_5, _toDisplayString(item.描述 || item.主角评价 || '空槽位'), 1 /* TEXT */),\n                            (!item.placeholder && _unref(activeBubble) === item.id)\n                                ? (_openBlock(), _createElementBlock(\"div\", _hoisted_6, _toDisplayString(item.主角评价 || item.描述 || '暂无评价'), 1 /* TEXT */))\n                                : _createCommentVNode(\"v-if\", true)\n                        ], 10 /* CLASS, PROPS */, _hoisted_3));\n                    }), 128 /* KEYED_FRAGMENT */))\n                ])\n            ]));\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./InventoryPanel.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./InventoryPanel.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./InventoryPanel.vue?vue&type=style&index=0&id=fb68b888&lang=scss&scoped=true\"\n\nimport exportComponent from \"../../../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.24_typescript@6.0.0-dev.20250807__webpack@5.102.1/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-fb68b888\"]])\n\nexport default __exports__","import { useModel as _useModel, mergeModels as _mergeModels, defineComponent as _defineComponent } from 'vue';\nimport { createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, createTextVNode as _createTextVNode, normalizeClass as _normalizeClass, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, renderList as _renderList, Fragment as _Fragment, unref as _unref } from \"vue\";\nconst _hoisted_1 = { class: \"status-effects-trigger\" };\nconst _hoisted_2 = {\n    key: 0,\n    class: \"status-effects-popover\"\n};\nconst _hoisted_3 = { class: \"status-effects-content\" };\nconst _hoisted_4 = { class: \"status-tabs\" };\nconst _hoisted_5 = { class: \"status-list-content\" };\nconst _hoisted_6 = {\n    key: 0,\n    class: \"status-effects-empty popover-empty\"\n};\nconst _hoisted_7 = {\n    key: 1,\n    class: \"status-effects-list\"\n};\nconst _hoisted_8 = [\"onClick\"];\nconst _hoisted_9 = { class: \"status-effect-name\" };\nconst _hoisted_10 = { class: \"status-effect-desc\" };\nconst _hoisted_11 = {\n    key: 0,\n    class: \"status-effect-meta\"\n};\nconst _hoisted_12 = { key: 0 };\nconst _hoisted_13 = { key: 1 };\nconst _hoisted_14 = {\n    key: 1,\n    class: \"status-bubble\"\n};\nconst _hoisted_15 = {\n    key: 0,\n    class: \"status-effects-empty popover-empty\"\n};\nconst _hoisted_16 = {\n    key: 1,\n    class: \"status-effects-list\"\n};\nconst _hoisted_17 = [\"onClick\"];\nconst _hoisted_18 = { class: \"status-effect-name\" };\nconst _hoisted_19 = { class: \"status-effect-desc\" };\nconst _hoisted_20 = {\n    key: 0,\n    class: \"status-effect-meta\"\n};\nconst _hoisted_21 = { key: 0 };\nconst _hoisted_22 = { key: 1 };\nconst _hoisted_23 = {\n    key: 1,\n    class: \"status-bubble\"\n};\nimport { useBubble } from '../composables/useBubble';\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'StatusPopover',\n    props: /*@__PURE__*/ _mergeModels({\n        buffList: {},\n        debuffList: {},\n        buffCount: {},\n        debuffCount: {}\n    }, {\n        \"show\": { type: Boolean, ...{ default: false } },\n        \"showModifiers\": {},\n        \"tab\": { default: '增益' },\n        \"tabModifiers\": {},\n    }),\n    emits: [\"update:show\", \"update:tab\"],\n    setup(__props) {\n        const show = _useModel(__props, 'show');\n        const tab = _useModel(__props, 'tab');\n        const { activeBubble, toggleBubble } = useBubble();\n        function toggle() {\n            show.value = !show.value;\n        }\n        function close() {\n            show.value = false;\n        }\n        // 判断气泡应该显示在上方还是下方\n        // 列表后半部分的元素,气泡显示在上方\n        function shouldShowBubbleOnTop(index, total) {\n            return index >= Math.floor(total / 2);\n        }\n        return (_ctx, _cache) => {\n            return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n                _createElementVNode(\"button\", {\n                    class: _normalizeClass([\"status-button\", { active: show.value }]),\n                    type: \"button\",\n                    onClick: toggle\n                }, [\n                    _cache[2] || (_cache[2] = _createElementVNode(\"span\", { class: \"button-icon\" }, \"⚡\", -1 /* CACHED */)),\n                    _createTextVNode(\" 状态 (\" + _toDisplayString(__props.buffCount + __props.debuffCount) + \") \", 1 /* TEXT */)\n                ], 2 /* CLASS */),\n                (show.value)\n                    ? (_openBlock(), _createElementBlock(\"div\", _hoisted_2, [\n                        _createElementVNode(\"div\", { class: \"popover-header\" }, [\n                            _cache[3] || (_cache[3] = _createElementVNode(\"span\", null, \"状态概览\", -1 /* CACHED */)),\n                            _createElementVNode(\"button\", {\n                                class: \"popover-close\",\n                                type: \"button\",\n                                \"aria-label\": \"关闭状态概览\",\n                                onClick: close\n                            }, \"×\")\n                        ]),\n                        _createElementVNode(\"div\", _hoisted_3, [\n                            _createElementVNode(\"div\", _hoisted_4, [\n                                _createElementVNode(\"button\", {\n                                    class: _normalizeClass([\"status-tab\", { active: tab.value === '增益' }]),\n                                    type: \"button\",\n                                    onClick: _cache[0] || (_cache[0] = ($event) => (tab.value = '增益'))\n                                }, \" 增益 (\" + _toDisplayString(__props.buffCount) + \") \", 3 /* TEXT, CLASS */),\n                                _createElementVNode(\"button\", {\n                                    class: _normalizeClass([\"status-tab\", { active: tab.value === '减益' }]),\n                                    type: \"button\",\n                                    onClick: _cache[1] || (_cache[1] = ($event) => (tab.value = '减益'))\n                                }, \" 减益 (\" + _toDisplayString(__props.debuffCount) + \") \", 3 /* TEXT, CLASS */)\n                            ]),\n                            _createElementVNode(\"div\", _hoisted_5, [\n                                (tab.value === '增益')\n                                    ? (_openBlock(), _createElementBlock(_Fragment, { key: 0 }, [\n                                        (!__props.buffList.length)\n                                            ? (_openBlock(), _createElementBlock(\"p\", _hoisted_6, \"暂无增益状态\"))\n                                            : (_openBlock(), _createElementBlock(\"ul\", _hoisted_7, [\n                                                (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(__props.buffList, (buff, index) => {\n                                                    return (_openBlock(), _createElementBlock(\"li\", {\n                                                        key: buff.id,\n                                                        class: _normalizeClass([\"status-effect-item status-effect-buff\", { active: _unref(activeBubble) === buff.id, 'bubble-top': shouldShowBubbleOnTop(index, __props.buffList.length) }]),\n                                                        onClick: ($event) => (_unref(toggleBubble)(buff.id))\n                                                    }, [\n                                                        _createElementVNode(\"div\", _hoisted_9, _toDisplayString(buff.name), 1 /* TEXT */),\n                                                        _createElementVNode(\"p\", _hoisted_10, _toDisplayString(buff.描述), 1 /* TEXT */),\n                                                        (buff.持续时间 || buff.触发条件)\n                                                            ? (_openBlock(), _createElementBlock(\"div\", _hoisted_11, [\n                                                                (buff.持续时间)\n                                                                    ? (_openBlock(), _createElementBlock(\"span\", _hoisted_12, \"持续时间: \" + _toDisplayString(buff.持续时间), 1 /* TEXT */))\n                                                                    : _createCommentVNode(\"v-if\", true),\n                                                                (buff.触发条件)\n                                                                    ? (_openBlock(), _createElementBlock(\"span\", _hoisted_13, \"触发条件: \" + _toDisplayString(buff.触发条件), 1 /* TEXT */))\n                                                                    : _createCommentVNode(\"v-if\", true)\n                                                            ]))\n                                                            : _createCommentVNode(\"v-if\", true),\n                                                        (_unref(activeBubble) === buff.id && buff.主角评价)\n                                                            ? (_openBlock(), _createElementBlock(\"div\", _hoisted_14, _toDisplayString(buff.主角评价), 1 /* TEXT */))\n                                                            : _createCommentVNode(\"v-if\", true)\n                                                    ], 10 /* CLASS, PROPS */, _hoisted_8));\n                                                }), 128 /* KEYED_FRAGMENT */))\n                                            ]))\n                                    ], 64 /* STABLE_FRAGMENT */))\n                                    : (_openBlock(), _createElementBlock(_Fragment, { key: 1 }, [\n                                        (!__props.debuffList.length)\n                                            ? (_openBlock(), _createElementBlock(\"p\", _hoisted_15, \"暂无减益状态\"))\n                                            : (_openBlock(), _createElementBlock(\"ul\", _hoisted_16, [\n                                                (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(__props.debuffList, (debuff, index) => {\n                                                    return (_openBlock(), _createElementBlock(\"li\", {\n                                                        key: debuff.id,\n                                                        class: _normalizeClass([\"status-effect-item status-effect-debuff\", { active: _unref(activeBubble) === debuff.id, 'bubble-top': shouldShowBubbleOnTop(index, __props.debuffList.length) }]),\n                                                        onClick: ($event) => (_unref(toggleBubble)(debuff.id))\n                                                    }, [\n                                                        _createElementVNode(\"div\", _hoisted_18, _toDisplayString(debuff.name), 1 /* TEXT */),\n                                                        _createElementVNode(\"p\", _hoisted_19, _toDisplayString(debuff.描述), 1 /* TEXT */),\n                                                        (debuff.持续时间 || debuff.触发条件)\n                                                            ? (_openBlock(), _createElementBlock(\"div\", _hoisted_20, [\n                                                                (debuff.持续时间)\n                                                                    ? (_openBlock(), _createElementBlock(\"span\", _hoisted_21, \"持续时间: \" + _toDisplayString(debuff.持续时间), 1 /* TEXT */))\n                                                                    : _createCommentVNode(\"v-if\", true),\n                                                                (debuff.触发条件)\n                                                                    ? (_openBlock(), _createElementBlock(\"span\", _hoisted_22, \"触发条件: \" + _toDisplayString(debuff.触发条件), 1 /* TEXT */))\n                                                                    : _createCommentVNode(\"v-if\", true)\n                                                            ]))\n                                                            : _createCommentVNode(\"v-if\", true),\n                                                        (_unref(activeBubble) === debuff.id && debuff.主角评价)\n                                                            ? (_openBlock(), _createElementBlock(\"div\", _hoisted_23, _toDisplayString(debuff.主角评价), 1 /* TEXT */))\n                                                            : _createCommentVNode(\"v-if\", true)\n                                                    ], 10 /* CLASS, PROPS */, _hoisted_17));\n                                                }), 128 /* KEYED_FRAGMENT */))\n                                            ]))\n                                    ], 64 /* STABLE_FRAGMENT */))\n                            ])\n                        ])\n                    ]))\n                    : _createCommentVNode(\"v-if\", true)\n            ]));\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./StatusPopover.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./StatusPopover.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./StatusPopover.vue?vue&type=style&index=0&id=c80eaeea&lang=scss&scoped=true\"\n\nimport exportComponent from \"../../../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.24_typescript@6.0.0-dev.20250807__webpack@5.102.1/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-c80eaeea\"]])\n\nexport default __exports__","import { useModel as _useModel, mergeModels as _mergeModels, defineComponent as _defineComponent } from 'vue';\nimport { createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, createTextVNode as _createTextVNode, normalizeClass as _normalizeClass, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, renderList as _renderList, Fragment as _Fragment, unref as _unref } from \"vue\";\nconst _hoisted_1 = { class: \"ability-popover-trigger\" };\nconst _hoisted_2 = {\n    key: 0,\n    class: \"ability-popover\"\n};\nconst _hoisted_3 = { class: \"ability-content\" };\nconst _hoisted_4 = {\n    key: 0,\n    class: \"ability-empty\"\n};\nconst _hoisted_5 = {\n    key: 1,\n    class: \"ability-list\"\n};\nconst _hoisted_6 = [\"onClick\"];\nconst _hoisted_7 = { class: \"ability-name\" };\nconst _hoisted_8 = { class: \"ability-desc\" };\nconst _hoisted_9 = {\n    key: 0,\n    class: \"ability-bubble\"\n};\nimport { useBubble } from '../composables/useBubble';\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'AbilityPopover',\n    props: /*@__PURE__*/ _mergeModels({\n        abilities: {}\n    }, {\n        \"show\": { type: Boolean, ...{ default: false } },\n        \"showModifiers\": {},\n    }),\n    emits: [\"update:show\"],\n    setup(__props) {\n        const show = _useModel(__props, 'show');\n        const { activeBubble, toggleBubble } = useBubble();\n        function toggle() {\n            show.value = !show.value;\n        }\n        function close() {\n            show.value = false;\n        }\n        // 判断气泡应该显示在上方还是下方\n        // 列表后半部分的元素,气泡显示在上方\n        function shouldShowBubbleOnTop(index, total) {\n            return index >= Math.floor(total / 2);\n        }\n        return (_ctx, _cache) => {\n            return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n                _createElementVNode(\"button\", {\n                    class: _normalizeClass([\"ability-button\", { active: show.value }]),\n                    type: \"button\",\n                    onClick: toggle\n                }, [\n                    _cache[0] || (_cache[0] = _createElementVNode(\"span\", { class: \"button-icon\" }, \"★\", -1 /* CACHED */)),\n                    _createTextVNode(\" 能力 (\" + _toDisplayString(__props.abilities.length) + \") \", 1 /* TEXT */)\n                ], 2 /* CLASS */),\n                (show.value)\n                    ? (_openBlock(), _createElementBlock(\"div\", _hoisted_2, [\n                        _createElementVNode(\"div\", { class: \"popover-header\" }, [\n                            _cache[1] || (_cache[1] = _createElementVNode(\"span\", null, \"持有能力\", -1 /* CACHED */)),\n                            _createElementVNode(\"button\", {\n                                class: \"popover-close\",\n                                type: \"button\",\n                                \"aria-label\": \"关闭能力列表\",\n                                onClick: close\n                            }, \"×\")\n                        ]),\n                        _createElementVNode(\"div\", _hoisted_3, [\n                            (!__props.abilities.length)\n                                ? (_openBlock(), _createElementBlock(\"p\", _hoisted_4, \"暂无持有能力\"))\n                                : (_openBlock(), _createElementBlock(\"ul\", _hoisted_5, [\n                                    (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(__props.abilities, (ability, index) => {\n                                        return (_openBlock(), _createElementBlock(\"li\", {\n                                            key: ability.id,\n                                            class: _normalizeClass([\"ability-item\", { active: _unref(activeBubble) === ability.id, 'bubble-top': shouldShowBubbleOnTop(index, __props.abilities.length) }]),\n                                            onClick: ($event) => (_unref(toggleBubble)(ability.id))\n                                        }, [\n                                            _createElementVNode(\"div\", _hoisted_7, _toDisplayString(ability.name), 1 /* TEXT */),\n                                            _createElementVNode(\"p\", _hoisted_8, _toDisplayString(ability.描述), 1 /* TEXT */),\n                                            (_unref(activeBubble) === ability.id && ability.主角评价)\n                                                ? (_openBlock(), _createElementBlock(\"div\", _hoisted_9, _toDisplayString(ability.主角评价), 1 /* TEXT */))\n                                                : _createCommentVNode(\"v-if\", true)\n                                        ], 10 /* CLASS, PROPS */, _hoisted_6));\n                                    }), 128 /* KEYED_FRAGMENT */))\n                                ]))\n                        ])\n                    ]))\n                    : _createCommentVNode(\"v-if\", true)\n            ]));\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./AbilityPopover.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./AbilityPopover.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./AbilityPopover.vue?vue&type=style&index=0&id=049afa8a&lang=scss&scoped=true\"\n\nimport exportComponent from \"../../../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.24_typescript@6.0.0-dev.20250807__webpack@5.102.1/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-049afa8a\"]])\n\nexport default __exports__","import { renderSlot as _renderSlot, createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\"\n\nconst _hoisted_1 = { class: \"bottom-bar\" }\nconst _hoisted_2 = { class: \"bottom-left\" }\nconst _hoisted_3 = { class: \"bottom-right\" }\n\nexport function render(_ctx, _cache) {\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    _createElementVNode(\"div\", _hoisted_2, [\n      _renderSlot(_ctx.$slots, \"left\", {}, undefined, true)\n    ]),\n    _createElementVNode(\"div\", _hoisted_3, [\n      _renderSlot(_ctx.$slots, \"right\", {}, undefined, true)\n    ])\n  ]))\n}","/* unplugin-vue-components disabled */import { render } from \"./BottomBar.vue?vue&type=template&id=604538ab&scoped=true\"\nconst script = {}\n\nimport \"./BottomBar.vue?vue&type=style&index=0&id=604538ab&lang=scss&scoped=true\"\n\nimport exportComponent from \"../../../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.24_typescript@6.0.0-dev.20250807__webpack@5.102.1/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-604538ab\"]])\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue';\nimport { createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, renderSlot as _renderSlot, Teleport as _Teleport, createBlock as _createBlock } from \"vue\";\nconst _hoisted_1 = { class: \"pixel-modal\" };\nconst _hoisted_2 = { class: \"pixel-modal__panel\" };\nconst _hoisted_3 = { class: \"pixel-modal__header\" };\nconst _hoisted_4 = { class: \"pixel-modal__title\" };\nconst _hoisted_5 = { class: \"pixel-modal__scroll\" };\nconst _hoisted_6 = {\n    key: 0,\n    class: \"pixel-modal__description\"\n};\nconst _hoisted_7 = { class: \"pixel-modal__body\" };\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'ActionModal',\n    props: {\n        title: {},\n        description: {}\n    },\n    emits: [\"close\"],\n    setup(__props, { emit: __emit }) {\n        const emit = __emit;\n        return (_ctx, _cache) => {\n            return (_openBlock(), _createBlock(_Teleport, { to: \"body\" }, [\n                _createElementVNode(\"div\", _hoisted_1, [\n                    _createElementVNode(\"div\", {\n                        class: \"pixel-modal__backdrop\",\n                        onClick: _cache[0] || (_cache[0] = ($event) => (emit('close')))\n                    }),\n                    _createElementVNode(\"div\", _hoisted_2, [\n                        _createElementVNode(\"header\", _hoisted_3, [\n                            _createElementVNode(\"h3\", _hoisted_4, _toDisplayString(__props.title), 1 /* TEXT */),\n                            _createElementVNode(\"button\", {\n                                type: \"button\",\n                                class: \"pixel-modal__close\",\n                                \"aria-label\": \"关闭\",\n                                onClick: _cache[1] || (_cache[1] = ($event) => (emit('close')))\n                            }, \"×\")\n                        ]),\n                        _createElementVNode(\"div\", _hoisted_5, [\n                            (__props.description)\n                                ? (_openBlock(), _createElementBlock(\"p\", _hoisted_6, _toDisplayString(__props.description), 1 /* TEXT */))\n                                : _createCommentVNode(\"v-if\", true),\n                            _createElementVNode(\"section\", _hoisted_7, [\n                                _renderSlot(_ctx.$slots, \"default\")\n                            ])\n                        ])\n                    ])\n                ])\n            ]));\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./ActionModal.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./ActionModal.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./ActionModal.vue?vue&type=style&index=0&id=c2011d9a&scoped=true&lang=scss\"\n\nimport exportComponent from \"../../../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.24_typescript@6.0.0-dev.20250807__webpack@5.102.1/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-c2011d9a\"]])\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue';\nimport { createElementVNode as _createElementVNode, unref as _unref, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, vModelSelect as _vModelSelect, withDirectives as _withDirectives, vModelCheckbox as _vModelCheckbox, withCtx as _withCtx, createBlock as _createBlock } from \"vue\";\nconst _hoisted_1 = { class: \"form-grid\" };\nconst _hoisted_2 = [\"value\"];\nconst _hoisted_3 = [\"value\"];\nconst _hoisted_4 = [\"value\"];\nconst _hoisted_5 = { class: \"form-grid__checkbox\" };\nconst _hoisted_6 = { class: \"form-actions\" };\nimport { Schema, TASK_TYPES } from '../../../schema';\nimport ActionModal from '../components/ActionModal.vue';\n\nimport { z } from 'zod';\nimport { ref } from 'vue';\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'AutoTask',\n    emits: [\"close\"],\n    setup(__props, { emit: __emit }) {\n        const emit = __emit;\n        const DIFFICULTIES = ['简单', '普通', '困难'];\n        const REWARDS = ['微薄', '一般', '丰厚'];\n        const TaskForm = z.object({\n            类型: Schema.shape.任务列表.valueType.shape.类型,\n            难度: z.enum(DIFFICULTIES),\n            奖励: z.enum(REWARDS),\n            是否色情: z.coerce.boolean(),\n        });\n        const task_form = ref({\n            类型: '主线',\n            难度: '简单',\n            奖励: '微薄',\n            是否色情: true,\n        });\n        async function handleSubmit() {\n            const message = `【<user>发布了一个${task_form.value.难度}的${task_form.value.类型}任务，奖励${task_form.value.奖励}，本次任务${task_form.value.是否色情 ? '必须' : '禁止'}包含色情内容】<!--必须立即根据剧情生成合适的任务-->`;\n            await createChatMessages([{ role: 'user', message }]);\n            await triggerSlash('/trigger');\n            toastr.success('已触发自动任务生成');\n            emit('close');\n        }\n        return (_ctx, _cache) => {\n            return (_openBlock(), _createBlock(ActionModal, {\n                title: \"自动发布任务\",\n                onClose: _cache[5] || (_cache[5] = ($event) => (emit('close')))\n            }, {\n                default: _withCtx(() => [\n                    _createElementVNode(\"form\", _hoisted_1, [\n                        _createElementVNode(\"label\", null, [\n                            _cache[6] || (_cache[6] = _createElementVNode(\"span\", null, \"任务类型\", -1 /* CACHED */)),\n                            _withDirectives(_createElementVNode(\"select\", {\n                                \"onUpdate:modelValue\": _cache[0] || (_cache[0] = ($event) => ((_unref(task_form).类型) = $event))\n                            }, [\n                                (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_unref(TASK_TYPES), (type) => {\n                                    return (_openBlock(), _createElementBlock(\"option\", {\n                                        key: type,\n                                        value: type\n                                    }, _toDisplayString(type), 9 /* TEXT, PROPS */, _hoisted_2));\n                                }), 128 /* KEYED_FRAGMENT */))\n                            ], 512 /* NEED_PATCH */), [\n                                [_vModelSelect, _unref(task_form).类型]\n                            ])\n                        ]),\n                        _createElementVNode(\"label\", null, [\n                            _cache[7] || (_cache[7] = _createElementVNode(\"span\", null, \"难度\", -1 /* CACHED */)),\n                            _withDirectives(_createElementVNode(\"select\", {\n                                \"onUpdate:modelValue\": _cache[1] || (_cache[1] = ($event) => ((_unref(task_form).难度) = $event))\n                            }, [\n                                (_openBlock(), _createElementBlock(_Fragment, null, _renderList(DIFFICULTIES, (difficulty) => {\n                                    return _createElementVNode(\"option\", {\n                                        key: difficulty,\n                                        value: difficulty\n                                    }, _toDisplayString(difficulty), 9 /* TEXT, PROPS */, _hoisted_3);\n                                }), 64 /* STABLE_FRAGMENT */))\n                            ], 512 /* NEED_PATCH */), [\n                                [_vModelSelect, _unref(task_form).难度]\n                            ])\n                        ]),\n                        _createElementVNode(\"label\", null, [\n                            _cache[8] || (_cache[8] = _createElementVNode(\"span\", null, \"奖励丰厚程度\", -1 /* CACHED */)),\n                            _withDirectives(_createElementVNode(\"select\", {\n                                \"onUpdate:modelValue\": _cache[2] || (_cache[2] = ($event) => ((_unref(task_form).奖励) = $event))\n                            }, [\n                                (_openBlock(), _createElementBlock(_Fragment, null, _renderList(REWARDS, (reward) => {\n                                    return _createElementVNode(\"option\", {\n                                        key: reward,\n                                        value: reward\n                                    }, _toDisplayString(reward), 9 /* TEXT, PROPS */, _hoisted_4);\n                                }), 64 /* STABLE_FRAGMENT */))\n                            ], 512 /* NEED_PATCH */), [\n                                [_vModelSelect, _unref(task_form).奖励]\n                            ])\n                        ]),\n                        _createElementVNode(\"label\", _hoisted_5, [\n                            _withDirectives(_createElementVNode(\"input\", {\n                                \"onUpdate:modelValue\": _cache[3] || (_cache[3] = ($event) => ((_unref(task_form).是否色情) = $event)),\n                                type: \"checkbox\"\n                            }, null, 512 /* NEED_PATCH */), [\n                                [_vModelCheckbox, _unref(task_form).是否色情]\n                            ]),\n                            _cache[9] || (_cache[9] = _createElementVNode(\"span\", null, \"包含色情内容\", -1 /* CACHED */))\n                        ]),\n                        _createElementVNode(\"div\", _hoisted_6, [\n                            _createElementVNode(\"button\", {\n                                type: \"button\",\n                                class: \"ghost\",\n                                onClick: _cache[4] || (_cache[4] = ($event) => (emit('close')))\n                            }, \"取消\"),\n                            _createElementVNode(\"button\", {\n                                type: \"submit\",\n                                class: \"primary\",\n                                onClick: handleSubmit\n                            }, \"生成\")\n                        ])\n                    ])\n                ]),\n                _: 1 /* STABLE */\n            }));\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./AutoTask.vue?vue&type=script&lang=ts&setup=true\"\nexport * from \"./AutoTask.vue?vue&type=script&lang=ts&setup=true\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue';\nimport { createElementVNode as _createElementVNode, unref as _unref, vModelText as _vModelText, withDirectives as _withDirectives, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, vModelSelect as _vModelSelect, withCtx as _withCtx, createVNode as _createVNode, createBlock as _createBlock, createCommentVNode as _createCommentVNode } from \"vue\";\nconst _hoisted_1 = { class: \"form-grid\" };\nconst _hoisted_2 = {\n    class: \"form-actions\",\n    style: { \"margin-bottom\": \"12px\", \"padding-bottom\": \"0\", \"border\": \"none\" }\n};\nconst _hoisted_3 = [\"value\"];\nconst _hoisted_4 = { class: \"form-actions\" };\nimport { Schema, TASK_TYPES } from '../../../schema';\nimport ActionModal from '../components/ActionModal.vue';\nimport { useDataStore } from '../store';\nimport AutoTask from './AutoTask.vue';\n\nimport { ref } from 'vue';\nimport { z } from 'zod';\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'PublishTask',\n    emits: [\"close\"],\n    setup(__props, { emit: __emit }) {\n        const show_auto_task = ref(false);\n        const emit = __emit;\n        const TaskForm = z.object({ 名称: z.coerce.string() }).extend(Schema.shape.任务列表.valueType.shape);\n        const task_form = ref({\n            名称: '',\n            类型: '主线',\n            说明: '',\n            目标: '',\n            奖励: '',\n            惩罚: '',\n        });\n        function handleSubmit() {\n            const result = TaskForm.safeParse(task_form.value);\n            if (result.error) {\n                toastr.success('填写奖励时出错');\n                emit('close');\n                return;\n            }\n            const data = result.data;\n            const store = useDataStore();\n            if (data.名称) {\n                _.set(store.data.任务列表, data.名称, Schema.shape.任务列表.valueType.parse(data));\n            }\n            toastr.success('已发布任务');\n            emit('close');\n        }\n        return (_ctx, _cache) => {\n            return (_openBlock(), _createElementBlock(_Fragment, null, [\n                _createVNode(ActionModal, {\n                    title: \"发布任务\",\n                    onClose: _cache[8] || (_cache[8] = ($event) => (emit('close')))\n                }, {\n                    default: _withCtx(() => [\n                        _createElementVNode(\"form\", _hoisted_1, [\n                            _createElementVNode(\"div\", _hoisted_2, [\n                                _createElementVNode(\"button\", {\n                                    type: \"button\",\n                                    class: \"primary\",\n                                    style: { \"width\": \"100%\" },\n                                    onClick: _cache[0] || (_cache[0] = ($event) => (show_auto_task.value = true))\n                                }, \"自动发布任务\")\n                            ]),\n                            _createElementVNode(\"label\", null, [\n                                _cache[10] || (_cache[10] = _createElementVNode(\"span\", null, \"名称\", -1 /* CACHED */)),\n                                _withDirectives(_createElementVNode(\"input\", {\n                                    \"onUpdate:modelValue\": _cache[1] || (_cache[1] = ($event) => ((_unref(task_form).名称) = $event)),\n                                    required: \"\",\n                                    placeholder: \"例如：夺回王城\"\n                                }, null, 512 /* NEED_PATCH */), [\n                                    [_vModelText, _unref(task_form).名称]\n                                ])\n                            ]),\n                            _createElementVNode(\"label\", null, [\n                                _cache[11] || (_cache[11] = _createElementVNode(\"span\", null, \"类型\", -1 /* CACHED */)),\n                                _withDirectives(_createElementVNode(\"select\", {\n                                    \"onUpdate:modelValue\": _cache[2] || (_cache[2] = ($event) => ((_unref(task_form).类型) = $event))\n                                }, [\n                                    (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_unref(TASK_TYPES), (type) => {\n                                        return (_openBlock(), _createElementBlock(\"option\", {\n                                            key: type,\n                                            value: type\n                                        }, _toDisplayString(type), 9 /* TEXT, PROPS */, _hoisted_3));\n                                    }), 128 /* KEYED_FRAGMENT */))\n                                ], 512 /* NEED_PATCH */), [\n                                    [_vModelSelect, _unref(task_form).类型]\n                                ])\n                            ]),\n                            _createElementVNode(\"label\", null, [\n                                _cache[12] || (_cache[12] = _createElementVNode(\"span\", null, \"说明\", -1 /* CACHED */)),\n                                _withDirectives(_createElementVNode(\"textarea\", {\n                                    \"onUpdate:modelValue\": _cache[3] || (_cache[3] = ($event) => ((_unref(task_form).说明) = $event)),\n                                    placeholder: \"交代背景、系统指示等\"\n                                }, null, 512 /* NEED_PATCH */), [\n                                    [_vModelText, _unref(task_form).说明]\n                                ])\n                            ]),\n                            _createElementVNode(\"label\", null, [\n                                _cache[13] || (_cache[13] = _createElementVNode(\"span\", null, \"目标\", -1 /* CACHED */)),\n                                _withDirectives(_createElementVNode(\"textarea\", {\n                                    \"onUpdate:modelValue\": _cache[4] || (_cache[4] = ($event) => ((_unref(task_form).目标) = $event)),\n                                    placeholder: \"列出具体步骤或达成条件\"\n                                }, null, 512 /* NEED_PATCH */), [\n                                    [_vModelText, _unref(task_form).目标]\n                                ])\n                            ]),\n                            _createElementVNode(\"label\", null, [\n                                _cache[14] || (_cache[14] = _createElementVNode(\"span\", null, \"奖励\", -1 /* CACHED */)),\n                                _withDirectives(_createElementVNode(\"input\", {\n                                    \"onUpdate:modelValue\": _cache[5] || (_cache[5] = ($event) => ((_unref(task_form).奖励) = $event)),\n                                    placeholder: \"积分、道具、权限...\"\n                                }, null, 512 /* NEED_PATCH */), [\n                                    [_vModelText, _unref(task_form).奖励]\n                                ])\n                            ]),\n                            _createElementVNode(\"label\", null, [\n                                _cache[15] || (_cache[15] = _createElementVNode(\"span\", null, \"惩罚\", -1 /* CACHED */)),\n                                _withDirectives(_createElementVNode(\"input\", {\n                                    \"onUpdate:modelValue\": _cache[6] || (_cache[6] = ($event) => ((_unref(task_form).惩罚) = $event)),\n                                    placeholder: \"失败后承担的代价（可选）\"\n                                }, null, 512 /* NEED_PATCH */), [\n                                    [_vModelText, _unref(task_form).惩罚]\n                                ])\n                            ]),\n                            _createElementVNode(\"div\", _hoisted_4, [\n                                _createElementVNode(\"button\", {\n                                    type: \"button\",\n                                    class: \"ghost\",\n                                    onClick: _cache[7] || (_cache[7] = ($event) => (emit('close')))\n                                }, \"取消\"),\n                                _createElementVNode(\"button\", {\n                                    type: \"submit\",\n                                    class: \"primary\",\n                                    onClick: handleSubmit\n                                }, \"发布\")\n                            ])\n                        ])\n                    ]),\n                    _: 1 /* STABLE */\n                }),\n                (_unref(show_auto_task))\n                    ? (_openBlock(), _createBlock(AutoTask, {\n                        key: 0,\n                        onClose: _cache[9] || (_cache[9] = ($event) => (show_auto_task.value = false))\n                    }))\n                    : _createCommentVNode(\"v-if\", true)\n            ], 64 /* STABLE_FRAGMENT */));\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./PublishTask.vue?vue&type=script&lang=ts&setup=true\"\nexport * from \"./PublishTask.vue?vue&type=script&lang=ts&setup=true\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue';\nimport { createElementVNode as _createElementVNode, unref as _unref, vModelText as _vModelText, withDirectives as _withDirectives, withCtx as _withCtx, openBlock as _openBlock, createBlock as _createBlock } from \"vue\";\nconst _hoisted_1 = { class: \"form-grid\" };\nconst _hoisted_2 = { class: \"form-actions\" };\nimport { Schema } from '../../../schema';\nimport ActionModal from '../components/ActionModal.vue';\nimport { useDataStore } from '../store';\n\nimport { z } from 'zod';\nimport { ref } from 'vue';\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'CreateShopItem',\n    emits: [\"close\"],\n    setup(__props, { emit: __emit }) {\n        const emit = __emit;\n        const ShopItemForm = z\n            .object({\n            名称: z.coerce.string(),\n        })\n            .extend(Schema.shape.商品列表.valueType.shape);\n        const shop_item_form = ref({\n            名称: '',\n            描述: '',\n            主角评价: '',\n            积分价格: 0,\n        });\n        function handleSubmit() {\n            const result = ShopItemForm.safeParse(shop_item_form.value);\n            if (result.error) {\n                toastr.success('填写商品时出错');\n                emit('close');\n                return;\n            }\n            const data = result.data;\n            const store = useDataStore();\n            if (data.名称) {\n                _.set(store.data.商品列表, data.名称, Schema.shape.商品列表.valueType.parse(data));\n            }\n            toastr.success('已增加商品');\n            emit('close');\n        }\n        return (_ctx, _cache) => {\n            return (_openBlock(), _createBlock(ActionModal, {\n                title: \"创建商城条目\",\n                description: \"为商城上架新商品，供主角在系统界面中兑换。\",\n                onClose: _cache[4] || (_cache[4] = ($event) => (emit('close')))\n            }, {\n                default: _withCtx(() => [\n                    _createElementVNode(\"form\", _hoisted_1, [\n                        _createElementVNode(\"label\", null, [\n                            _cache[5] || (_cache[5] = _createElementVNode(\"span\", null, \"物品名称\", -1 /* CACHED */)),\n                            _withDirectives(_createElementVNode(\"input\", {\n                                \"onUpdate:modelValue\": _cache[0] || (_cache[0] = ($event) => ((_unref(shop_item_form).名称) = $event)),\n                                required: \"\",\n                                placeholder: \"例如：星辉精粹\"\n                            }, null, 512 /* NEED_PATCH */), [\n                                [_vModelText, _unref(shop_item_form).名称]\n                            ])\n                        ]),\n                        _createElementVNode(\"label\", null, [\n                            _cache[6] || (_cache[6] = _createElementVNode(\"span\", null, \"描述\", -1 /* CACHED */)),\n                            _withDirectives(_createElementVNode(\"textarea\", {\n                                \"onUpdate:modelValue\": _cache[1] || (_cache[1] = ($event) => ((_unref(shop_item_form).描述) = $event)),\n                                placeholder: \"简述功效与限制\"\n                            }, null, 512 /* NEED_PATCH */), [\n                                [_vModelText, _unref(shop_item_form).描述]\n                            ])\n                        ]),\n                        _createElementVNode(\"label\", null, [\n                            _cache[7] || (_cache[7] = _createElementVNode(\"span\", null, \"价格(积分)\", -1 /* CACHED */)),\n                            _withDirectives(_createElementVNode(\"input\", {\n                                \"onUpdate:modelValue\": _cache[2] || (_cache[2] = ($event) => ((_unref(shop_item_form).积分价格) = $event)),\n                                type: \"number\",\n                                min: \"0\",\n                                required: \"\",\n                                placeholder: \"所需积分数\"\n                            }, null, 512 /* NEED_PATCH */), [\n                                [\n                                    _vModelText,\n                                    _unref(shop_item_form).积分价格,\n                                    void 0,\n                                    { number: true }\n                                ]\n                            ])\n                        ]),\n                        _createElementVNode(\"div\", _hoisted_2, [\n                            _createElementVNode(\"button\", {\n                                type: \"button\",\n                                class: \"ghost\",\n                                onClick: _cache[3] || (_cache[3] = ($event) => (emit('close')))\n                            }, \"取消\"),\n                            _createElementVNode(\"button\", {\n                                type: \"submit\",\n                                class: \"primary\",\n                                onClick: handleSubmit\n                            }, \"上架\")\n                        ])\n                    ])\n                ]),\n                _: 1 /* STABLE */\n            }));\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./CreateShopItem.vue?vue&type=script&lang=ts&setup=true\"\nexport * from \"./CreateShopItem.vue?vue&type=script&lang=ts&setup=true\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue';\nimport { createElementVNode as _createElementVNode, unref as _unref, vModelText as _vModelText, withDirectives as _withDirectives, vModelCheckbox as _vModelCheckbox, withCtx as _withCtx, openBlock as _openBlock, createBlock as _createBlock } from \"vue\";\nconst _hoisted_1 = { class: \"form-grid\" };\nconst _hoisted_2 = { class: \"form-grid__checkbox\" };\nconst _hoisted_3 = { class: \"form-actions\" };\nimport { Schema } from '../../../schema';\nimport ActionModal from '../components/ActionModal.vue';\nimport { useDataStore } from '../store';\n\nimport { z } from 'zod';\nimport { ref } from 'vue';\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'GrantReward',\n    emits: [\"close\"],\n    setup(__props, { emit: __emit }) {\n        const emit = __emit;\n        const RewardForm = z\n            .object({\n            名称: z.coerce.string(),\n            增加积分: z.coerce.number(),\n            发送消息: z.coerce.boolean(),\n        })\n            .extend(Schema.shape.主角.shape.物品栏.valueType.omit({ 主角评价: true }).shape);\n        const reward_form = ref({\n            名称: '',\n            描述: '',\n            增加积分: 0,\n            发送消息: true,\n        });\n        async function handleSubmit() {\n            const result = RewardForm.safeParse(reward_form.value);\n            if (result.error) {\n                toastr.error('填写奖励时出错');\n                console.error(result.error);\n                emit('close');\n                return;\n            }\n            const data = result.data;\n            const store = useDataStore();\n            if (data.名称) {\n                _.set(store.data.主角.物品栏, data.名称, Schema.shape.主角.shape.物品栏.valueType.parse(data));\n            }\n            if (data.增加积分 > 0) {\n                if (typeof store.data.系统状态.可用积分 === 'string') {\n                    store.data.系统状态.可用积分 = 0;\n                }\n                store.data.系统状态.可用积分 += data.增加积分;\n            }\n            if (data.发送消息) {\n                let message = `{{user}}发放了一份奖励：【${data.名称}，${data.描述}`;\n                if (data.增加积分 > 0) {\n                    message += `，增加积分：${data.增加积分}`;\n                }\n                message += '】';\n                await createChatMessages([{ role: 'user', message }]);\n            }\n            toastr.success('已发放奖励');\n            emit('close');\n        }\n        return (_ctx, _cache) => {\n            return (_openBlock(), _createBlock(ActionModal, {\n                title: \"发布奖励\",\n                description: \"将奖励发放到主角物品栏，或直接调整系统积分。\",\n                onClose: _cache[5] || (_cache[5] = ($event) => (emit('close')))\n            }, {\n                default: _withCtx(() => [\n                    _createElementVNode(\"form\", _hoisted_1, [\n                        _createElementVNode(\"label\", null, [\n                            _cache[6] || (_cache[6] = _createElementVNode(\"span\", null, \"奖励名称\", -1 /* CACHED */)),\n                            _withDirectives(_createElementVNode(\"input\", {\n                                \"onUpdate:modelValue\": _cache[0] || (_cache[0] = ($event) => ((_unref(reward_form).名称) = $event)),\n                                required: \"\",\n                                placeholder: \"例如：龙鳞护符\"\n                            }, null, 512 /* NEED_PATCH */), [\n                                [_vModelText, _unref(reward_form).名称]\n                            ])\n                        ]),\n                        _createElementVNode(\"label\", null, [\n                            _cache[7] || (_cache[7] = _createElementVNode(\"span\", null, \"描述\", -1 /* CACHED */)),\n                            _withDirectives(_createElementVNode(\"textarea\", {\n                                \"onUpdate:modelValue\": _cache[1] || (_cache[1] = ($event) => ((_unref(reward_form).描述) = $event)),\n                                placeholder: \"效果、来历等\"\n                            }, null, 512 /* NEED_PATCH */), [\n                                [_vModelText, _unref(reward_form).描述]\n                            ])\n                        ]),\n                        _createElementVNode(\"label\", null, [\n                            _cache[8] || (_cache[8] = _createElementVNode(\"span\", null, \"增加积分\", -1 /* CACHED */)),\n                            _withDirectives(_createElementVNode(\"input\", {\n                                \"onUpdate:modelValue\": _cache[2] || (_cache[2] = ($event) => ((_unref(reward_form).增加积分) = $event)),\n                                type: \"number\",\n                                min: \"0\",\n                                placeholder: \"可选，输入数字则增加积分\"\n                            }, null, 512 /* NEED_PATCH */), [\n                                [\n                                    _vModelText,\n                                    _unref(reward_form).增加积分,\n                                    void 0,\n                                    { number: true }\n                                ]\n                            ])\n                        ]),\n                        _createElementVNode(\"label\", _hoisted_2, [\n                            _withDirectives(_createElementVNode(\"input\", {\n                                \"onUpdate:modelValue\": _cache[3] || (_cache[3] = ($event) => ((_unref(reward_form).发送消息) = $event)),\n                                type: \"checkbox\"\n                            }, null, 512 /* NEED_PATCH */), [\n                                [_vModelCheckbox, _unref(reward_form).发送消息]\n                            ]),\n                            _cache[9] || (_cache[9] = _createElementVNode(\"span\", null, \"同时作为消息发送\", -1 /* CACHED */))\n                        ]),\n                        _createElementVNode(\"div\", _hoisted_3, [\n                            _createElementVNode(\"button\", {\n                                type: \"button\",\n                                class: \"ghost\",\n                                onClick: _cache[4] || (_cache[4] = ($event) => (emit('close')))\n                            }, \"取消\"),\n                            _createElementVNode(\"button\", {\n                                type: \"submit\",\n                                class: \"primary\",\n                                onClick: handleSubmit\n                            }, \"发放\")\n                        ])\n                    ])\n                ]),\n                _: 1 /* STABLE */\n            }));\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./GrantReward.vue?vue&type=script&lang=ts&setup=true\"\nexport * from \"./GrantReward.vue?vue&type=script&lang=ts&setup=true\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue';\nimport { createElementVNode as _createElementVNode, unref as _unref, toDisplayString as _toDisplayString, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, renderList as _renderList, Fragment as _Fragment, withModifiers as _withModifiers, normalizeClass as _normalizeClass } from \"vue\";\nconst _hoisted_1 = { class: \"shop-overlay\" };\nconst _hoisted_2 = { class: \"shop-container\" };\nconst _hoisted_3 = { class: \"shop-header\" };\nconst _hoisted_4 = { class: \"shop-info\" };\nconst _hoisted_5 = { class: \"shop-balance\" };\nconst _hoisted_6 = { class: \"balance-value\" };\nconst _hoisted_7 = { class: \"shop-content\" };\nconst _hoisted_8 = {\n    key: 0,\n    class: \"shop-empty\"\n};\nconst _hoisted_9 = {\n    key: 1,\n    class: \"shop-grid\"\n};\nconst _hoisted_10 = [\"onClick\"];\nconst _hoisted_11 = { class: \"item-header\" };\nconst _hoisted_12 = { class: \"item-name\" };\nconst _hoisted_13 = { class: \"item-price\" };\nconst _hoisted_14 = { class: \"price-value\" };\nconst _hoisted_15 = { class: \"item-description\" };\nconst _hoisted_16 = [\"onClick\"];\nconst _hoisted_17 = {\n    key: 0,\n    class: \"info-bubble\"\n};\nimport { useBubble } from '../composables/useBubble';\nimport { useDataStore } from '../store';\n\nimport { toRef, computed } from 'vue';\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'Shop',\n    emits: [\"close\"],\n    setup(__props, { emit: __emit }) {\n        const store = useDataStore();\n        const shop = toRef(store.data, '商品列表');\n        const available_points = toRef(store.data.系统状态, '可用积分');\n        const emit = __emit;\n        const { activeBubble, toggleBubble } = useBubble();\n        function delistItem(itemName) {\n            if (confirm(`确定要下架商品 \"${itemName}\" 吗？`)) {\n                const { [itemName]: removed, ...rest } = shop.value;\n                shop.value = rest;\n            }\n        }\n        function formatEvaluation(evaluation) {\n            return evaluation === '待初始化' || evaluation === undefined ? '暂无' : evaluation;\n        }\n        const shop_items = computed(() => Object.entries(shop.value).map(([name, item]) => ({\n            name,\n            ...item,\n            主角评价: formatEvaluation(item.主角评价),\n        })));\n        function shouldShowBubbleOnTop(index, total) {\n            return index < Math.floor(total / 2);\n        }\n        return (_ctx, _cache) => {\n            return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n                _createElementVNode(\"div\", _hoisted_2, [\n                    _createElementVNode(\"header\", _hoisted_3, [\n                        _cache[1] || (_cache[1] = _createElementVNode(\"h2\", { class: \"shop-title\" }, \"系统商城\", -1 /* CACHED */)),\n                        _createElementVNode(\"button\", {\n                            class: \"shop-close\",\n                            onClick: _cache[0] || (_cache[0] = ($event) => (emit('close')))\n                        }, \"×\")\n                    ]),\n                    _createElementVNode(\"div\", _hoisted_4, [\n                        _createElementVNode(\"div\", _hoisted_5, [\n                            _cache[2] || (_cache[2] = _createElementVNode(\"span\", { class: \"balance-label\" }, \"主角可用积分:\", -1 /* CACHED */)),\n                            _createElementVNode(\"span\", _hoisted_6, _toDisplayString(_unref(available_points)), 1 /* TEXT */)\n                        ]),\n                        _cache[3] || (_cache[3] = _createElementVNode(\"div\", { class: \"shop-hint\" }, \"仅供查看当前上架商品，购买需主角自行决定\", -1 /* CACHED */))\n                    ]),\n                    _createElementVNode(\"div\", _hoisted_7, [\n                        (Object.keys(_unref(shop)).length === 0)\n                            ? (_openBlock(), _createElementBlock(\"div\", _hoisted_8, [...(_cache[4] || (_cache[4] = [\n                                    _createElementVNode(\"div\", { class: \"empty-icon\" }, \"🏪\", -1 /* CACHED */),\n                                    _createElementVNode(\"p\", null, \"商城暂无商品\", -1 /* CACHED */),\n                                    _createElementVNode(\"p\", { class: \"empty-hint\" }, \"系统管理员可通过\\\"创建商城\\\"按钮上架商品\", -1 /* CACHED */)\n                                ]))]))\n                            : (_openBlock(), _createElementBlock(\"div\", _hoisted_9, [\n                                (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_unref(shop_items), (item, index) => {\n                                    return (_openBlock(), _createElementBlock(\"div\", {\n                                        key: item.name,\n                                        class: _normalizeClass([\"shop-item\", {\n                                                affordable: _unref(available_points) >= item.积分价格,\n                                                active: _unref(activeBubble) === item.name,\n                                                'bubble-top': shouldShowBubbleOnTop(index, _unref(shop_items).length),\n                                            }]),\n                                        onClick: ($event) => (_unref(toggleBubble)(item.name))\n                                    }, [\n                                        _createElementVNode(\"div\", _hoisted_11, [\n                                            _createElementVNode(\"div\", _hoisted_12, _toDisplayString(item.name), 1 /* TEXT */),\n                                            _createElementVNode(\"div\", _hoisted_13, [\n                                                _createElementVNode(\"span\", _hoisted_14, _toDisplayString(item.积分价格), 1 /* TEXT */),\n                                                _cache[5] || (_cache[5] = _createElementVNode(\"span\", { class: \"price-unit\" }, \"积分\", -1 /* CACHED */))\n                                            ])\n                                        ]),\n                                        _createElementVNode(\"div\", _hoisted_15, _toDisplayString(item.描述), 1 /* TEXT */),\n                                        _createElementVNode(\"button\", {\n                                            class: \"delist-button\",\n                                            title: \"下架商品\",\n                                            onClick: _withModifiers(($event) => (delistItem(item.name)), [\"stop\"])\n                                        }, \"×\", 8 /* PROPS */, _hoisted_16),\n                                        (_unref(activeBubble) === item.name)\n                                            ? (_openBlock(), _createElementBlock(\"div\", _hoisted_17, _toDisplayString(item.主角评价), 1 /* TEXT */))\n                                            : _createCommentVNode(\"v-if\", true)\n                                    ], 10 /* CLASS, PROPS */, _hoisted_10));\n                                }), 128 /* KEYED_FRAGMENT */))\n                            ]))\n                    ])\n                ])\n            ]));\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./Shop.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./Shop.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./Shop.vue?vue&type=style&index=0&id=05de7ef2&scoped=true&lang=scss\"\n\nimport exportComponent from \"../../../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.24_typescript@6.0.0-dev.20250807__webpack@5.102.1/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-05de7ef2\"]])\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue';\nimport { createElementVNode as _createElementVNode, unref as _unref, openBlock as _openBlock, createElementBlock as _createElementBlock, renderList as _renderList, Fragment as _Fragment, toDisplayString as _toDisplayString, normalizeClass as _normalizeClass } from \"vue\";\nconst _hoisted_1 = { class: \"task-overlay\" };\nconst _hoisted_2 = { class: \"task-container\" };\nconst _hoisted_3 = { class: \"task-header\" };\nconst _hoisted_4 = { class: \"task-content\" };\nconst _hoisted_5 = {\n    key: 0,\n    class: \"task-empty\"\n};\nconst _hoisted_6 = {\n    key: 1,\n    class: \"task-list\"\n};\nconst _hoisted_7 = { class: \"task-item-header\" };\nconst _hoisted_8 = { class: \"task-name\" };\nconst _hoisted_9 = { class: \"task-type-badge\" };\nconst _hoisted_10 = { class: \"task-section\" };\nconst _hoisted_11 = { class: \"task-section-content\" };\nconst _hoisted_12 = { class: \"task-section\" };\nconst _hoisted_13 = { class: \"task-section-content\" };\nconst _hoisted_14 = { class: \"task-footer\" };\nconst _hoisted_15 = { class: \"task-reward\" };\nconst _hoisted_16 = { class: \"reward-text\" };\nconst _hoisted_17 = { class: \"task-penalty\" };\nconst _hoisted_18 = { class: \"penalty-text\" };\nconst _hoisted_19 = { class: \"task-actions\" };\nconst _hoisted_20 = [\"onClick\"];\nconst _hoisted_21 = [\"onClick\"];\nimport { useDataStore } from '../store';\n\nimport { toRef } from 'vue';\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'TaskList',\n    emits: [\"close\"],\n    setup(__props, { emit: __emit }) {\n        const store = useDataStore();\n        const tasks = toRef(store.data, '任务列表');\n        const emit = __emit;\n        function deleteTask(taskName) {\n            if (confirm(`确定要删除任务 \"${taskName}\" 吗？该任务将会消失。`)) {\n                createChatMessages([\n                    {\n                        role: 'user',\n                        message: `[系统提示：任务\"${taskName}\"消失了。]`,\n                    },\n                ]);\n                const { [taskName]: removed, ...rest } = tasks.value;\n                tasks.value = rest;\n            }\n        }\n        function failTask(taskName, task) {\n            if (confirm(`确定要将任务 \"${taskName}\" 标记为失败吗？`)) {\n                createChatMessages([\n                    {\n                        role: 'user',\n                        message: `[系统提示：任务\"${taskName}\"失败了！惩罚：${task.惩罚}]`,\n                    },\n                ]);\n                const { [taskName]: removed, ...rest } = tasks.value;\n                tasks.value = rest;\n            }\n        }\n        return (_ctx, _cache) => {\n            return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n                _createElementVNode(\"div\", _hoisted_2, [\n                    _createElementVNode(\"header\", _hoisted_3, [\n                        _cache[1] || (_cache[1] = _createElementVNode(\"h2\", { class: \"task-title\" }, \"任务列表\", -1 /* CACHED */)),\n                        _createElementVNode(\"button\", {\n                            class: \"task-close\",\n                            onClick: _cache[0] || (_cache[0] = ($event) => (emit('close')))\n                        }, \"×\")\n                    ]),\n                    _cache[7] || (_cache[7] = _createElementVNode(\"div\", { class: \"task-info\" }, [\n                        _createElementVNode(\"div\", { class: \"task-hint\" }, \"主角当前接受的所有任务\")\n                    ], -1 /* CACHED */)),\n                    _createElementVNode(\"div\", _hoisted_4, [\n                        (Object.keys(_unref(tasks)).length === 0)\n                            ? (_openBlock(), _createElementBlock(\"div\", _hoisted_5, [...(_cache[2] || (_cache[2] = [\n                                    _createElementVNode(\"div\", { class: \"empty-icon\" }, \"📝\", -1 /* CACHED */),\n                                    _createElementVNode(\"p\", null, \"暂无任务\", -1 /* CACHED */),\n                                    _createElementVNode(\"p\", { class: \"empty-hint\" }, \"系统管理员可通过\\\"发布任务\\\"按钮发布新任务\", -1 /* CACHED */)\n                                ]))]))\n                            : (_openBlock(), _createElementBlock(\"div\", _hoisted_6, [\n                                (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_unref(tasks), (item, name) => {\n                                    return (_openBlock(), _createElementBlock(\"div\", {\n                                        key: name,\n                                        class: _normalizeClass([\"task-item\", `task-type-${item.类型}`])\n                                    }, [\n                                        _createElementVNode(\"div\", _hoisted_7, [\n                                            _createElementVNode(\"div\", _hoisted_8, _toDisplayString(name), 1 /* TEXT */),\n                                            _createElementVNode(\"div\", _hoisted_9, _toDisplayString(item.类型), 1 /* TEXT */)\n                                        ]),\n                                        _createElementVNode(\"div\", _hoisted_10, [\n                                            _cache[3] || (_cache[3] = _createElementVNode(\"div\", { class: \"task-section-title\" }, \"任务说明\", -1 /* CACHED */)),\n                                            _createElementVNode(\"div\", _hoisted_11, _toDisplayString(item.说明), 1 /* TEXT */)\n                                        ]),\n                                        _createElementVNode(\"div\", _hoisted_12, [\n                                            _cache[4] || (_cache[4] = _createElementVNode(\"div\", { class: \"task-section-title\" }, \"任务目标\", -1 /* CACHED */)),\n                                            _createElementVNode(\"div\", _hoisted_13, _toDisplayString(item.目标), 1 /* TEXT */)\n                                        ]),\n                                        _createElementVNode(\"div\", _hoisted_14, [\n                                            _createElementVNode(\"div\", _hoisted_15, [\n                                                _cache[5] || (_cache[5] = _createElementVNode(\"span\", { class: \"reward-label\" }, \"奖励:\", -1 /* CACHED */)),\n                                                _createElementVNode(\"span\", _hoisted_16, _toDisplayString(item.奖励), 1 /* TEXT */)\n                                            ]),\n                                            _createElementVNode(\"div\", _hoisted_17, [\n                                                _cache[6] || (_cache[6] = _createElementVNode(\"span\", { class: \"penalty-label\" }, \"惩罚:\", -1 /* CACHED */)),\n                                                _createElementVNode(\"span\", _hoisted_18, _toDisplayString(item.惩罚), 1 /* TEXT */)\n                                            ])\n                                        ]),\n                                        _createElementVNode(\"div\", _hoisted_19, [\n                                            _createElementVNode(\"button\", {\n                                                class: \"action-button delete\",\n                                                onClick: ($event) => (deleteTask(name))\n                                            }, \"删除\", 8 /* PROPS */, _hoisted_20),\n                                            _createElementVNode(\"button\", {\n                                                class: \"action-button fail\",\n                                                onClick: ($event) => (failTask(name, item))\n                                            }, \"失败\", 8 /* PROPS */, _hoisted_21)\n                                        ])\n                                    ], 2 /* CLASS */));\n                                }), 128 /* KEYED_FRAGMENT */))\n                            ]))\n                    ])\n                ])\n            ]));\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./TaskList.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./TaskList.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./TaskList.vue?vue&type=style&index=0&id=b3a7051a&scoped=true&lang=scss\"\n\nimport exportComponent from \"../../../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.24_typescript@6.0.0-dev.20250807__webpack@5.102.1/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-b3a7051a\"]])\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue';\nimport { unref as _unref, createVNode as _createVNode, createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, vShow as _vShow, withDirectives as _withDirectives, isRef as _isRef, withCtx as _withCtx, openBlock as _openBlock, createBlock as _createBlock, createCommentVNode as _createCommentVNode, createElementBlock as _createElementBlock } from \"vue\";\nconst _hoisted_1 = { class: \"status-system-wrapper\" };\nconst _hoisted_2 = { class: \"status-system\" };\nconst _hoisted_3 = { class: \"main-content\" };\nconst _hoisted_4 = { class: \"character-panel\" };\nconst _hoisted_5 = { class: \"mobile-section\" };\nconst _hoisted_6 = [\"aria-expanded\"];\nconst _hoisted_7 = { class: \"chevron\" };\nconst _hoisted_8 = { class: \"mobile-section__body\" };\nconst _hoisted_9 = { class: \"mobile-section\" };\nconst _hoisted_10 = [\"aria-expanded\"];\nconst _hoisted_11 = { class: \"chevron\" };\nconst _hoisted_12 = { class: \"mobile-section__body\" };\nconst _hoisted_13 = { class: \"mobile-section mobile-only\" };\nconst _hoisted_14 = [\"aria-expanded\"];\nconst _hoisted_15 = { class: \"chevron\" };\nconst _hoisted_16 = { class: \"mobile-section__body\" };\nconst _hoisted_17 = { class: \"mobile-section mobile-only\" };\nconst _hoisted_18 = [\"aria-expanded\"];\nconst _hoisted_19 = { class: \"chevron\" };\nconst _hoisted_20 = { class: \"mobile-section__body\" };\nconst _hoisted_21 = { class: \"right-panel\" };\nconst _hoisted_22 = { class: \"mobile-section\" };\nconst _hoisted_23 = [\"aria-expanded\"];\nconst _hoisted_24 = { class: \"chevron\" };\nconst _hoisted_25 = { class: \"mobile-section__body\" };\nconst _hoisted_26 = { class: \"mobile-section inventory-container\" };\nconst _hoisted_27 = [\"aria-expanded\"];\nconst _hoisted_28 = { class: \"chevron\" };\nconst _hoisted_29 = { class: \"mobile-section__body\" };\nimport { abilityBaseDescriptions, abilityOrder } from './constants';\nimport { useDataStore } from './store';\nimport { useStatusEffects } from './composables/useStatusEffects';\nimport { useResponsive } from './composables/useResponsive';\nimport { useScaling } from './composables/useScaling';\nimport TopBar from './components/TopBar.vue';\nimport CharacterInfo from './components/CharacterInfo.vue';\nimport AbilitiesPanel from './components/AbilitiesPanel.vue';\nimport AbilityPanel from './components/AbilityPanel.vue';\nimport StatusEffectsPanel from './components/StatusEffectsPanel.vue';\nimport EquipmentPanel from './components/EquipmentPanel.vue';\nimport InventoryPanel from './components/InventoryPanel.vue';\nimport StatusPopover from './components/StatusPopover.vue';\nimport AbilityPopover from './components/AbilityPopover.vue';\nimport BottomBar from './components/BottomBar.vue';\nimport PublishTask from './view/PublishTask.vue';\nimport CreateShopItem from './view/CreateShopItem.vue';\nimport GrantReward from './view/GrantReward.vue';\nimport Shop from './view/Shop.vue';\nimport TaskList from './view/TaskList.vue';\n\nimport { ref, toRef, computed, watch } from 'vue';\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'App',\n    setup(__props) {\n        const show_publish_task = ref(false);\n        const show_task_list = ref(false);\n        const show_grant_reward = ref(false);\n        const show_create_shop_item = ref(false);\n        const show_shop = ref(false);\n        const showStatusPopover = ref(false);\n        const statusPopoverTab = ref('增益');\n        const showAbilityPopover = ref(false);\n        const statData = toRef(useDataStore(), 'data');\n        const world = computed(() => statData.value.世界 ?? { 当前地点: '未知地点', 当前时间: '未知时间' });\n        const hero = computed(() => statData.value.主角 ?? {});\n        function formatEvaluation(evaluation) {\n            return evaluation === '待初始化' || evaluation === undefined ? '暂无' : evaluation;\n        }\n        const orderedAbilities = computed(() => {\n            const abilities = hero.value.能力面板 ?? {};\n            return abilityOrder.map(key => ({\n                key,\n                数值: abilities[key]?.数值 ?? '--',\n                主角评价: formatEvaluation(abilities[key]?.主角评价),\n            }));\n        });\n        const { buffList, debuffList, statusCounts } = useStatusEffects(hero);\n        const abilityList = computed(() => {\n            const abilities = hero.value.持有能力 ?? {};\n            if (typeof abilities !== 'object' || Array.isArray(abilities)) {\n                return [];\n            }\n            return Object.entries(abilities).map(([name, ability], index) => ({\n                id: `${index}-${name}`,\n                name,\n                描述: ability?.描述 || '',\n                主角评价: formatEvaluation(ability?.主角评价),\n            }));\n        });\n        const equipmentSlots = computed(() => {\n            const equipment = hero.value.装备栏 ?? {};\n            const order = ['主手', '副手', '防具', '饰品'];\n            return order.map(label => {\n                const slot = equipment[label];\n                if (slot && typeof slot === 'object') {\n                    const record = slot;\n                    return {\n                        label,\n                        item: record.装备 ?? record.名称 ?? record.value ?? '空置',\n                        evaluation: formatEvaluation(record.主角评价 ?? record.评价),\n                    };\n                }\n                return {\n                    label,\n                    item: slot ?? '空置',\n                    evaluation: '暂无',\n                };\n            });\n        });\n        const inventoryItems = computed(() => {\n            const inventory = hero.value.物品栏 ?? {};\n            if (typeof inventory !== 'object' || Array.isArray(inventory)) {\n                return [];\n            }\n            return Object.entries(inventory).map(([name, item], index) => ({\n                id: `${index}-${name}`,\n                名称: name || '未知物品',\n                描述: item?.描述 || '',\n                主角评价: formatEvaluation(item?.主角评价),\n                placeholder: false,\n            }));\n        });\n        const currentTimeLabel = computed(() => world.value.当前时间 || new Date().toLocaleString('zh-CN'));\n        const { isMobile, sectionOpen, toggleSection } = useResponsive();\n        useScaling(isMobile);\n        watch(isMobile, value => {\n            if (value) {\n                showStatusPopover.value = false;\n                showAbilityPopover.value = false;\n            }\n        });\n        // 让状态和能力弹窗互斥\n        watch(showStatusPopover, value => {\n            if (value) {\n                showAbilityPopover.value = false;\n            }\n        });\n        watch(showAbilityPopover, value => {\n            if (value) {\n                showStatusPopover.value = false;\n            }\n        });\n        return (_ctx, _cache) => {\n            return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n                _createElementVNode(\"section\", _hoisted_2, [\n                    _createVNode(TopBar, {\n                        \"current-time-label\": _unref(currentTimeLabel),\n                        location: _unref(world).当前地点\n                    }, null, 8 /* PROPS */, [\"current-time-label\", \"location\"]),\n                    _createElementVNode(\"div\", _hoisted_3, [\n                        _createElementVNode(\"div\", _hoisted_4, [\n                            _createElementVNode(\"div\", _hoisted_5, [\n                                _createElementVNode(\"button\", {\n                                    class: \"collapse-toggle\",\n                                    \"aria-expanded\": _unref(sectionOpen)('info'),\n                                    onClick: _cache[0] || (_cache[0] = ($event) => (_unref(toggleSection)('info')))\n                                }, [\n                                    _cache[19] || (_cache[19] = _createElementVNode(\"span\", null, \"角色信息\", -1 /* CACHED */)),\n                                    _createElementVNode(\"span\", _hoisted_7, _toDisplayString(_unref(sectionOpen)('info') ? '−' : '+'), 1 /* TEXT */)\n                                ], 8 /* PROPS */, _hoisted_6),\n                                _withDirectives(_createElementVNode(\"div\", _hoisted_8, [\n                                    _createVNode(CharacterInfo, {\n                                        name: _unref(statData).主角.姓名,\n                                        gender: _unref(statData).主角.性别,\n                                        age: _unref(statData).主角.年龄,\n                                        \"appearance-description\": _unref(hero).外貌.描述,\n                                        \"self-evaluation\": formatEvaluation(_unref(hero).外貌.主角评价)\n                                    }, null, 8 /* PROPS */, [\"name\", \"gender\", \"age\", \"appearance-description\", \"self-evaluation\"])\n                                ], 512 /* NEED_PATCH */), [\n                                    [_vShow, _unref(sectionOpen)('info')]\n                                ])\n                            ]),\n                            _createElementVNode(\"div\", _hoisted_9, [\n                                _createElementVNode(\"button\", {\n                                    class: \"collapse-toggle\",\n                                    \"aria-expanded\": _unref(sectionOpen)('abilities'),\n                                    onClick: _cache[1] || (_cache[1] = ($event) => (_unref(toggleSection)('abilities')))\n                                }, [\n                                    _cache[20] || (_cache[20] = _createElementVNode(\"span\", null, \"能力面板\", -1 /* CACHED */)),\n                                    _createElementVNode(\"span\", _hoisted_11, _toDisplayString(_unref(sectionOpen)('abilities') ? '−' : '+'), 1 /* TEXT */)\n                                ], 8 /* PROPS */, _hoisted_10),\n                                _withDirectives(_createElementVNode(\"div\", _hoisted_12, [\n                                    _createVNode(AbilitiesPanel, {\n                                        abilities: _unref(orderedAbilities),\n                                        descriptions: _unref(abilityBaseDescriptions)\n                                    }, null, 8 /* PROPS */, [\"abilities\", \"descriptions\"])\n                                ], 512 /* NEED_PATCH */), [\n                                    [_vShow, _unref(sectionOpen)('abilities')]\n                                ])\n                            ]),\n                            _createElementVNode(\"div\", _hoisted_13, [\n                                _createElementVNode(\"button\", {\n                                    class: \"collapse-toggle\",\n                                    \"aria-expanded\": _unref(sectionOpen)('status'),\n                                    onClick: _cache[2] || (_cache[2] = ($event) => (_unref(toggleSection)('status')))\n                                }, [\n                                    _cache[21] || (_cache[21] = _createElementVNode(\"span\", null, \"状态\", -1 /* CACHED */)),\n                                    _createElementVNode(\"span\", _hoisted_15, _toDisplayString(_unref(sectionOpen)('status') ? '−' : '+'), 1 /* TEXT */)\n                                ], 8 /* PROPS */, _hoisted_14),\n                                _withDirectives(_createElementVNode(\"div\", _hoisted_16, [\n                                    _createVNode(StatusEffectsPanel, {\n                                        \"buff-list\": _unref(buffList),\n                                        \"debuff-list\": _unref(debuffList)\n                                    }, null, 8 /* PROPS */, [\"buff-list\", \"debuff-list\"])\n                                ], 512 /* NEED_PATCH */), [\n                                    [_vShow, _unref(sectionOpen)('status')]\n                                ])\n                            ]),\n                            _createElementVNode(\"div\", _hoisted_17, [\n                                _createElementVNode(\"button\", {\n                                    class: \"collapse-toggle\",\n                                    \"aria-expanded\": _unref(sectionOpen)('held-abilities'),\n                                    onClick: _cache[3] || (_cache[3] = ($event) => (_unref(toggleSection)('held-abilities')))\n                                }, [\n                                    _cache[22] || (_cache[22] = _createElementVNode(\"span\", null, \"持有能力\", -1 /* CACHED */)),\n                                    _createElementVNode(\"span\", _hoisted_19, _toDisplayString(_unref(sectionOpen)('held-abilities') ? '−' : '+'), 1 /* TEXT */)\n                                ], 8 /* PROPS */, _hoisted_18),\n                                _withDirectives(_createElementVNode(\"div\", _hoisted_20, [\n                                    _createVNode(AbilityPanel, { abilities: _unref(abilityList) }, null, 8 /* PROPS */, [\"abilities\"])\n                                ], 512 /* NEED_PATCH */), [\n                                    [_vShow, _unref(sectionOpen)('held-abilities')]\n                                ])\n                            ])\n                        ]),\n                        _createElementVNode(\"div\", _hoisted_21, [\n                            _createElementVNode(\"div\", _hoisted_22, [\n                                _createElementVNode(\"button\", {\n                                    class: \"collapse-toggle\",\n                                    \"aria-expanded\": _unref(sectionOpen)('equipment'),\n                                    onClick: _cache[4] || (_cache[4] = ($event) => (_unref(toggleSection)('equipment')))\n                                }, [\n                                    _cache[23] || (_cache[23] = _createElementVNode(\"span\", null, \"装备栏\", -1 /* CACHED */)),\n                                    _createElementVNode(\"span\", _hoisted_24, _toDisplayString(_unref(sectionOpen)('equipment') ? '−' : '+'), 1 /* TEXT */)\n                                ], 8 /* PROPS */, _hoisted_23),\n                                _withDirectives(_createElementVNode(\"div\", _hoisted_25, [\n                                    _createVNode(EquipmentPanel, { slots: _unref(equipmentSlots) }, null, 8 /* PROPS */, [\"slots\"])\n                                ], 512 /* NEED_PATCH */), [\n                                    [_vShow, _unref(sectionOpen)('equipment')]\n                                ])\n                            ]),\n                            _createElementVNode(\"div\", _hoisted_26, [\n                                _createElementVNode(\"button\", {\n                                    class: \"collapse-toggle\",\n                                    \"aria-expanded\": _unref(sectionOpen)('inventory'),\n                                    onClick: _cache[5] || (_cache[5] = ($event) => (_unref(toggleSection)('inventory')))\n                                }, [\n                                    _cache[24] || (_cache[24] = _createElementVNode(\"span\", null, \"物品栏\", -1 /* CACHED */)),\n                                    _createElementVNode(\"span\", _hoisted_28, _toDisplayString(_unref(sectionOpen)('inventory') ? '−' : '+'), 1 /* TEXT */)\n                                ], 8 /* PROPS */, _hoisted_27),\n                                _withDirectives(_createElementVNode(\"div\", _hoisted_29, [\n                                    _createVNode(InventoryPanel, { inventory: _unref(inventoryItems) }, null, 8 /* PROPS */, [\"inventory\"])\n                                ], 512 /* NEED_PATCH */), [\n                                    [_vShow, _unref(sectionOpen)('inventory')]\n                                ])\n                            ])\n                        ])\n                    ]),\n                    _createVNode(BottomBar, null, {\n                        left: _withCtx(() => [\n                            _createVNode(StatusPopover, {\n                                show: _unref(showStatusPopover),\n                                \"onUpdate:show\": _cache[6] || (_cache[6] = ($event) => (_isRef(showStatusPopover) ? (showStatusPopover).value = $event : null)),\n                                tab: _unref(statusPopoverTab),\n                                \"onUpdate:tab\": _cache[7] || (_cache[7] = ($event) => (_isRef(statusPopoverTab) ? (statusPopoverTab).value = $event : null)),\n                                \"buff-list\": _unref(buffList),\n                                \"debuff-list\": _unref(debuffList),\n                                \"buff-count\": _unref(statusCounts).增益,\n                                \"debuff-count\": _unref(statusCounts).减益\n                            }, null, 8 /* PROPS */, [\"show\", \"tab\", \"buff-list\", \"debuff-list\", \"buff-count\", \"debuff-count\"]),\n                            _createVNode(AbilityPopover, {\n                                show: _unref(showAbilityPopover),\n                                \"onUpdate:show\": _cache[8] || (_cache[8] = ($event) => (_isRef(showAbilityPopover) ? (showAbilityPopover).value = $event : null)),\n                                abilities: _unref(abilityList)\n                            }, null, 8 /* PROPS */, [\"show\", \"abilities\"])\n                        ]),\n                        right: _withCtx(() => [\n                            _createElementVNode(\"button\", {\n                                class: \"action-button\",\n                                type: \"button\",\n                                onClick: _cache[9] || (_cache[9] = ($event) => (show_publish_task.value = true))\n                            }, \"发布任务\"),\n                            _createElementVNode(\"button\", {\n                                class: \"action-button\",\n                                type: \"button\",\n                                onClick: _cache[10] || (_cache[10] = ($event) => (show_task_list.value = true))\n                            }, \"查看任务\"),\n                            _createElementVNode(\"button\", {\n                                class: \"action-button\",\n                                type: \"button\",\n                                onClick: _cache[11] || (_cache[11] = ($event) => (show_grant_reward.value = true))\n                            }, \"发布奖励\"),\n                            _createElementVNode(\"button\", {\n                                class: \"action-button\",\n                                type: \"button\",\n                                onClick: _cache[12] || (_cache[12] = ($event) => (show_create_shop_item.value = true))\n                            }, \"创建商品\"),\n                            _createElementVNode(\"button\", {\n                                class: \"action-button\",\n                                type: \"button\",\n                                onClick: _cache[13] || (_cache[13] = ($event) => (show_shop.value = true))\n                            }, \"查看商城\")\n                        ]),\n                        _: 1 /* STABLE */\n                    })\n                ]),\n                (_unref(show_publish_task))\n                    ? (_openBlock(), _createBlock(PublishTask, {\n                        key: 0,\n                        onClose: _cache[14] || (_cache[14] = ($event) => (show_publish_task.value = false))\n                    }))\n                    : _createCommentVNode(\"v-if\", true),\n                (_unref(show_grant_reward))\n                    ? (_openBlock(), _createBlock(GrantReward, {\n                        key: 1,\n                        onClose: _cache[15] || (_cache[15] = ($event) => (show_grant_reward.value = false))\n                    }))\n                    : _createCommentVNode(\"v-if\", true),\n                (_unref(show_create_shop_item))\n                    ? (_openBlock(), _createBlock(CreateShopItem, {\n                        key: 2,\n                        onClose: _cache[16] || (_cache[16] = ($event) => (show_create_shop_item.value = false))\n                    }))\n                    : _createCommentVNode(\"v-if\", true),\n                (_unref(show_shop))\n                    ? (_openBlock(), _createBlock(Shop, {\n                        key: 3,\n                        onClose: _cache[17] || (_cache[17] = ($event) => (show_shop.value = false))\n                    }))\n                    : _createCommentVNode(\"v-if\", true),\n                (_unref(show_task_list))\n                    ? (_openBlock(), _createBlock(TaskList, {\n                        key: 4,\n                        onClose: _cache[18] || (_cache[18] = ($event) => (show_task_list.value = false))\n                    }))\n                    : _createCommentVNode(\"v-if\", true)\n            ]));\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./App.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./App.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./App.vue?vue&type=style&index=0&id=48420416&lang=scss\"\n\nconst __exports__ = script;\n\nexport default __exports__","export function useResponsive() {\n    const isMobile = ref(false);\n    const sectionState = reactive({\n        info: false,\n        abilities: false,\n        equipment: false,\n        inventory: false,\n        effects: false,\n    });\n    function sectionOpen(key) {\n        return isMobile.value ? sectionState[key] : true;\n    }\n    function toggleSection(key) {\n        if (!isMobile.value) {\n            return;\n        }\n        sectionState[key] = !sectionState[key];\n    }\n    function updateIsMobile() {\n        isMobile.value = window.matchMedia('(max-width: 768px)').matches;\n    }\n    onMounted(() => {\n        updateIsMobile();\n        window.addEventListener('resize', updateIsMobile);\n    });\n    onBeforeUnmount(() => {\n        window.removeEventListener('resize', updateIsMobile);\n    });\n    watch(isMobile, value => {\n        if (!value) {\n            Object.keys(sectionState).forEach(key => {\n                sectionState[key] = true;\n            });\n        }\n    });\n    return {\n        isMobile,\n        sectionState,\n        sectionOpen,\n        toggleSection,\n    };\n}\n","import { BASE_WIDTH } from '../constants';\nexport function useScaling(isMobile) {\n    let resizeObserver = null;\n    // 等比缩放状态栏（仅桌面端）\n    function updateScale() {\n        const wrapper = document.querySelector('.status-system-wrapper');\n        const statusSystem = document.querySelector('.status-system');\n        if (!wrapper || !statusSystem)\n            return;\n        // 移动端不进行缩放，保持原样\n        if (isMobile.value) {\n            statusSystem.style.transform = '';\n            statusSystem.style.width = '';\n            wrapper.style.height = '';\n            return;\n        }\n        // 桌面端进行等比缩放\n        const wrapperWidth = wrapper.clientWidth;\n        const scale = wrapperWidth / BASE_WIDTH;\n        // 应用缩放\n        statusSystem.style.transform = `scale(${scale})`;\n        statusSystem.style.transformOrigin = 'top left';\n        statusSystem.style.width = `${BASE_WIDTH}px`;\n        // 调整容器高度以适应缩放后的内容\n        const scaledHeight = statusSystem.offsetHeight * scale;\n        wrapper.style.height = `${scaledHeight}px`;\n    }\n    // 通知父窗口调整iframe高度\n    function updateIframeHeight() {\n        if (window.frameElement) {\n            const height = document.documentElement.scrollHeight;\n            window.frameElement.style.height = `${height}px`;\n        }\n    }\n    onMounted(() => {\n        window.addEventListener('resize', updateScale);\n        // 初始缩放和高度调整\n        setTimeout(() => {\n            updateScale();\n            updateIframeHeight();\n        }, 0);\n        // 监听内容高度变化\n        resizeObserver = new ResizeObserver(() => {\n            updateScale();\n            updateIframeHeight();\n        });\n        const statusSystem = document.querySelector('.status-system');\n        if (statusSystem) {\n            resizeObserver.observe(statusSystem);\n        }\n    });\n    onBeforeUnmount(() => {\n        window.removeEventListener('resize', updateScale);\n        if (resizeObserver) {\n            resizeObserver.disconnect();\n        }\n    });\n    watch(isMobile, () => {\n        // 切换移动端/桌面端时重新计算缩放\n        updateScale();\n    });\n    return {\n        updateScale,\n    };\n}\n","import App from './App.vue';\n$(async () => {\n    await waitGlobalInitialized('Mvu');\n    const app = createApp(App);\n    app.use(createPinia());\n    app.mount('#app');\n});\n"],"names":["exports","sfc","props","target","__vccOpts","key","val","__webpack_module_cache__","Vue","abilityOrder","abilityBaseDescriptions","z","Schema","object","coerce","string","union","number","literal","describe","record","enum","TASK_TYPES","useDataStore","data","ref","parse","_","get","getVariables","type","message_id","getCurrentMessageId","watchEffect","updateVariablesWith","variables","set","value","useStatusEffects","heroData","allStatus","computed","entries","statusObj","Object","forEach","name","statusData","push","id","normalizeStatusEntries","buffList","filter","s","debuffList","statusCounts","length","_hoisted_1","class","_hoisted_2","_hoisted_3","_hoisted_4","__name","currentTimeLabel","location","setup","__props","_ctx","_cache","__webpack_require__","moduleId","cachedModule","undefined","module","__webpack_modules__","AVATAR_WORLDBOOK_NAME","MAX_IMAGE_SIZE","async","saveAvatar","characterName","base64","getWorldbookNames","includes","createWorldbook","rebindChatWorldbook","ensureAvatarWorldbook","worldbook","getWorldbook","existingEntryIndex","findIndex","entry","strategy","keys","entryData","enabled","keys_secondary","logic","scan_depth","position","role","depth","order","content","JSON","stringify","Date","toISOString","probability","recursion","prevent_incoming","prevent_outgoing","delay_until","effect","sticky","cooldown","delay","replaceWorldbook","createWorldbookEntries","useAvatarManager","uploading","avatarUrl","uploadAvatar","toastr","warning","input","document","createElement","accept","onchange","e","file","files","startsWith","size","error","Promise","resolve","reject","reader","FileReader","onload","img","Image","canvas","width","height","ctx","getContext","Error","drawImage","toDataURL","onerror","src","result","readAsDataURL","compressImage","success","err","console","message","click","loadAvatarForCharacter","url","find","loadAvatar","_hoisted_5","_hoisted_6","_hoisted_7","_hoisted_8","_hoisted_9","_hoisted_10","_hoisted_11","_hoisted_12","_hoisted_13","_hoisted_14","_hoisted_15","gender","age","appearanceDescription","selfEvaluation","avatarUploading","watch","newName","immediate","style","backgroundImage","title","onClick","$event","useBubble","activeBubble","toggleBubble","closeBubble","abilities","descriptions","ability","active","_hoisted_16","_hoisted_17","_hoisted_18","_hoisted_19","activeTab","buff","debuff","slots","slot","label","item","evaluation","inventory","shouldShowBubbleOnTop","index","total","Math","floor","placeholder","_hoisted_20","_hoisted_21","_hoisted_22","_hoisted_23","buffCount","debuffCount","Boolean","default","emits","show","tab","toggle","close","script","$slots","description","emit","__emit","to","DIFFICULTIES","REWARDS","task_form","shape","valueType","boolean","handleSubmit","createChatMessages","triggerSlash","ActionModal","onClose","difficulty","reward","show_auto_task","TaskForm","extend","safeParse","store","required","AutoTask","ShopItemForm","shop_item_form","min","RewardForm","omit","reward_form","shop","toRef","available_points","shop_items","map","affordable","itemName","confirm","removed","rest","tasks","taskName","task","_hoisted_24","_hoisted_25","_hoisted_26","_hoisted_27","_hoisted_28","_hoisted_29","show_publish_task","show_task_list","show_grant_reward","show_create_shop_item","show_shop","showStatusPopover","statusPopoverTab","showAbilityPopover","statData","world","hero","formatEvaluation","orderedAbilities","abilityList","Array","isArray","equipmentSlots","equipment","inventoryItems","toLocaleString","isMobile","sectionOpen","toggleSection","sectionState","reactive","info","effects","updateIsMobile","window","matchMedia","matches","onMounted","addEventListener","onBeforeUnmount","removeEventListener","useResponsive","resizeObserver","updateScale","wrapper","querySelector","statusSystem","transform","scale","clientWidth","transformOrigin","scaledHeight","offsetHeight","updateIframeHeight","frameElement","documentElement","scrollHeight","setTimeout","ResizeObserver","observe","disconnect","useScaling","TopBar","CharacterInfo","AbilitiesPanel","StatusEffectsPanel","AbilityPanel","EquipmentPanel","InventoryPanel","BottomBar","left","StatusPopover","AbilityPopover","right","PublishTask","GrantReward","CreateShopItem","Shop","TaskList","$","waitGlobalInitialized","app","createApp","App","use","mount"],"sourceRoot":""}