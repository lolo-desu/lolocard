<head><script type="module">import{createPinia as e,defineStore as t}from'https://testingcf.jsdelivr.net/npm/pinia/+esm';import{klona as n}from'https://testingcf.jsdelivr.net/npm/klona/+esm';var o={895:(e,t)=>{t.A=(e,t)=>{const n=e.__vccOpts||e;for(const[e,o]of t)n[e]=o;return n}}},l={};const a=Vue,r=['力量','敏捷','体质','感知','意志','魅力'],c={力量:'体能与攻击能力，决定近战输出与负重',敏捷:'移动、闪避与反应速度，影响先手与命中',体质:'生命力与耐久度，决定抗性与恢复速度',感知:'观察与洞察能力，影响侦查与魔力控制',意志:'精神力与抗干扰能力，决定技能稳定性',魅力:'影响交涉、统御与社交反馈的综合指标'},s=z,i=s.z.object({世界:s.z.object({当前时间:s.z.string(),当前地点:s.z.string()}),主角:s.z.object({姓名:s.z.string(),性别:s.z.string(),年龄:s.z.coerce.number().or(s.z.literal('待初始化')),外貌:s.z.object({描述:s.z.string(),主角评价:s.z.string()}),能力面板:s.z.object({力量:s.z.object({数值:s.z.coerce.number().or(s.z.literal('待初始化')),主角评价:s.z.string()}),敏捷:s.z.object({数值:s.z.coerce.number().or(s.z.literal('待初始化')),主角评价:s.z.string()}),体质:s.z.object({数值:s.z.coerce.number().or(s.z.literal('待初始化')),主角评价:s.z.string()}),感知:s.z.object({数值:s.z.coerce.number().or(s.z.literal('待初始化')),主角评价:s.z.string()}),意志:s.z.object({数值:s.z.coerce.number().or(s.z.literal('待初始化')),主角评价:s.z.string()}),魅力:s.z.object({数值:s.z.coerce.number().or(s.z.literal('待初始化')),主角评价:s.z.string()})}),装备栏:s.z.object({主手:s.z.object({装备:s.z.string(),主角评价:s.z.string()}),副手:s.z.object({装备:s.z.string(),主角评价:s.z.string()}),防具:s.z.object({装备:s.z.string(),主角评价:s.z.string()}),饰品:s.z.object({装备:s.z.string(),主角评价:s.z.string()})}),物品栏:s.z.record(s.z.string(),s.z.object({描述:s.z.string(),主角评价:s.z.string()})),持有能力:s.z.record(s.z.string(),s.z.object({描述:s.z.string(),主角评价:s.z.string()})),当前状态:s.z.record(s.z.string(),s.z.object({类型:s.z.enum(['增益','减益']),持续时间:s.z.string(),触发条件:s.z.string(),描述:s.z.string(),主角评价:s.z.string()}))}),系统状态:s.z.object({可用积分:s.z.coerce.number().or(s.z.literal('待初始化')),对主角可见形象:s.z.string(),玩家ID:s.z.string(),玩家本轮操作日志:s.z.array(s.z.string())}),商品列表:s.z.record(s.z.string(),s.z.object({描述:s.z.string(),主角评价:s.z.string(),积分价格:s.z.coerce.number().or(s.z.literal('待初始化'))})),任务列表:s.z.record(s.z.string(),s.z.object({类型:s.z.enum(['主线','支线','每日','临危受命']),说明:s.z.string(),目标:s.z.string(),奖励:s.z.string(),惩罚:s.z.string()}))}),u=['主线','支线','每日','临危受命'],d=t('data',()=>{const e=(0,a.ref)(i.parse(_.get(getVariables({type:'message',message_id:getCurrentMessageId()}),'stat_data',{})));(0,a.watchEffect)(()=>{updateVariablesWith(t=>(_.set(t,'stat_data',n(e.value)),t),{type:'message',message_id:getCurrentMessageId()})}),e.value.系统状态.玩家本轮操作日志=[];return{data:e,log:t=>{e.value.系统状态.玩家本轮操作日志.push(t)}}});function m(e){const t=(0,a.computed)(()=>function(e){if(!e||'object'!=typeof e)return[];const t=[],n=e;return Object.entries(n).forEach(([e,n])=>{if('$meta'===e||!n||'object'!=typeof n)return;const o=n;t.push({id:`status-${e}`,key:e,name:e,类型:o.类型||'增益',持续时间:o.持续时间||'',触发条件:o.触发条件||'',描述:o.描述||'',主角评价:o.主角评价||''})}),t}(e.value.当前状态)),n=(0,a.computed)(()=>t.value.filter(e=>'增益'===e.类型)),o=(0,a.computed)(()=>t.value.filter(e=>'减益'===e.类型)),l=(0,a.computed)(()=>({增益:n.value.length,减益:o.value.length}));return{allStatus:t,buffList:n,debuffList:o,statusCounts:l}}const p={class:'top-info-bar'},f={class:'info-left'},v={class:'info-right'},b={class:'status-badge'},k=(0,a.defineComponent)({__name:'TopBar',props:{currentTimeLabel:{},location:{}},setup:e=>(t,n)=>((0,a.openBlock)(),(0,a.createElementBlock)('div',p,[(0,a.createElementVNode)('div',f,[n[0]||(n[0]=(0,a.createElementVNode)('span',{class:'status-indicator online','aria-hidden':'true'},null,-1)),(0,a.createElementVNode)('span',null,(0,a.toDisplayString)(e.currentTimeLabel),1)]),(0,a.createElementVNode)('div',v,[(0,a.createElementVNode)('div',b,(0,a.toDisplayString)(e.location),1)])]))});var y=function e(t){var n=l[t];if(void 0!==n)return n.exports;var a=l[t]={exports:{}};return o[t](a,a.exports,e),a.exports}(895);const E=(0,y.A)(k,[['__scopeId','data-v-2ba81f26']]),V='转生系统的头像文件！',g=500;async function N(e,t){await async function(){getWorldbookNames().includes(V)||(await createWorldbook(V,[]),await rebindChatWorldbook('current',V))}();const n=await getWorldbook(V),o=n.findIndex(t=>t.strategy.keys.includes(e)),l={name:`${e}的头像`,enabled:!0,strategy:{type:'selective',keys:[e],keys_secondary:{logic:'and_any',keys:[]},scan_depth:1},position:{type:'after_character_definition',role:'system',depth:0,order:999},content:JSON.stringify({角色名称:e,头像数据:t,更新时间:(new Date).toISOString()}),probability:100,recursion:{prevent_incoming:!0,prevent_outgoing:!0,delay_until:null},effect:{sticky:null,cooldown:null,delay:null}};o>=0?(n[o]={...n[o],...l},await replaceWorldbook(V,n)):await createWorldbookEntries(V,[l])}function h(){const e=(0,a.ref)(!1),t=(0,a.ref)(null);return{uploading:e,avatarUrl:t,uploadAvatar:async n=>{if(!n||'角色名称'===n)return void toastr?.warning?.('请先设置角色名称','头像上传');const o=document.createElement('input');o.type='file',o.accept='image/*',o.onchange=async o=>{const l=o.target.files?.[0];if(l)if(l.type.startsWith('image/'))if(l.size>5242880)toastr?.error?.('图片文件过大，请选择小于 5MB 的图片','头像上传');else{e.value=!0;try{const e=await async function(e){return new Promise((t,n)=>{const o=new FileReader;o.onload=e=>{const o=new Image;o.onload=()=>{const e=document.createElement('canvas');let l=o.width,a=o.height;l>a&&l>g?(a=a*g/l,l=g):a>=l&&a>g&&(l=l*g/a,a=g),e.width=l,e.height=a;const r=e.getContext('2d');if(!r)return void n(new Error('无法获取 canvas context'));r.drawImage(o,0,0,l,a);const c=e.toDataURL('image/jpeg',.8);t(c)},o.onerror=()=>n(new Error('图片加载失败')),o.src=e.target?.result},o.onerror=()=>n(new Error('文件读取失败')),o.readAsDataURL(e)})}(l);await N(n,e),t.value=e,toastr?.success?.('头像上传成功','头像上传')}catch(e){console.error('[头像上传] 失败',e),toastr?.error?.('头像上传失败：'+e.message,'头像上传')}finally{e.value=!1}}else toastr?.error?.('请选择图片文件','头像上传')},o.click()},loadAvatarForCharacter:async e=>{if(e&&'角色名称'!==e)try{const n=await async function(e){try{if(!getWorldbookNames().includes(V))return null;const t=(await getWorldbook(V)).find(t=>t.strategy.keys.includes(e));return t&&JSON.parse(t.content).头像数据||null}catch(e){return console.error('[头像管理] 读取头像失败',e),null}}(e);t.value=n}catch(e){console.error('[头像加载] 失败',e),t.value=null}else t.value=null}}}const B={class:'character-info-card'},C={class:'character-header'},w=['title'],D={key:0,class:'avatar-placeholder'},S={key:1,class:'avatar-loading'},x={class:'character-basic-info'},P={class:'character-name'},T={class:'character-stats'},I={class:'stat-item'},M={class:'stat-value'},j={class:'stat-item'},L={class:'stat-value'},q={class:'character-description-section'},U={class:'appearance-description'},A={class:'self-evaluation'},F=(0,a.defineComponent)({__name:'CharacterInfo',props:{name:{},gender:{},age:{},appearanceDescription:{},selfEvaluation:{}},setup(e){const t=e,{uploading:n,avatarUrl:o,uploadAvatar:l,loadAvatarForCharacter:r}=h();return(0,a.watch)(()=>t.name,async e=>{e&&'角色名称'!==e&&await r(e)},{immediate:!0}),(t,r)=>((0,a.openBlock)(),(0,a.createElementBlock)('div',B,[(0,a.createElementVNode)('div',C,[(0,a.createElementVNode)('div',{class:(0,a.normalizeClass)(['character-avatar',{'has-avatar':(0,a.unref)(o),uploading:(0,a.unref)(n)}]),style:(0,a.normalizeStyle)((0,a.unref)(o)?{backgroundImage:`url(${(0,a.unref)(o)})`}:{}),title:(0,a.unref)(n)?'上传中...':'点击上传头像',onClick:r[0]||(r[0]=t=>(0,a.unref)(l)(e.name))},[(0,a.unref)(o)||(0,a.unref)(n)?(0,a.createCommentVNode)('v-if',!0):((0,a.openBlock)(),(0,a.createElementBlock)('div',D,[...r[1]||(r[1]=[(0,a.createElementVNode)('span',null,'+',-1)])])),(0,a.unref)(n)?((0,a.openBlock)(),(0,a.createElementBlock)('div',S,[...r[2]||(r[2]=[(0,a.createElementVNode)('span',null,'...',-1)])])):(0,a.createCommentVNode)('v-if',!0)],14,w),(0,a.createElementVNode)('div',x,[(0,a.createElementVNode)('div',P,(0,a.toDisplayString)(e.name),1),(0,a.createElementVNode)('div',T,[(0,a.createElementVNode)('div',I,[r[3]||(r[3]=(0,a.createElementVNode)('span',{class:'stat-label'},'性别:',-1)),(0,a.createElementVNode)('span',M,(0,a.toDisplayString)(e.gender),1)]),(0,a.createElementVNode)('div',j,[r[4]||(r[4]=(0,a.createElementVNode)('span',{class:'stat-label'},'年龄:',-1)),(0,a.createElementVNode)('span',L,(0,a.toDisplayString)(e.age),1)])])])]),(0,a.createElementVNode)('div',q,[(0,a.createElementVNode)('div',U,(0,a.toDisplayString)(e.appearanceDescription),1),(0,a.createElementVNode)('div',A,(0,a.toDisplayString)(e.selfEvaluation),1)])]))}}),O=(0,y.A)(F,[['__scopeId','data-v-5bf17e9a']]),R={class:'pixel-modal'},W={class:'pixel-modal__panel'},K={class:'pixel-modal__header'},G={class:'pixel-modal__title'},H={class:'pixel-modal__scroll'},J={key:0,class:'pixel-modal__description'},Q={class:'pixel-modal__body'},X=(0,a.defineComponent)({__name:'ActionModal',props:{title:{},description:{}},emits:['close'],setup(e,{emit:t}){const n=t;return(t,o)=>((0,a.openBlock)(),(0,a.createBlock)(a.Teleport,{to:'body'},[(0,a.createElementVNode)('div',R,[(0,a.createElementVNode)('div',{class:'pixel-modal__backdrop',onClick:o[0]||(o[0]=e=>n('close'))}),(0,a.createElementVNode)('div',W,[(0,a.createElementVNode)('header',K,[(0,a.createElementVNode)('h3',G,(0,a.toDisplayString)(e.title),1),(0,a.createElementVNode)('button',{type:'button',class:'pixel-modal__close','aria-label':'关闭',onClick:o[1]||(o[1]=e=>n('close'))},'×')]),(0,a.createElementVNode)('div',H,[e.description?((0,a.openBlock)(),(0,a.createElementBlock)('p',J,(0,a.toDisplayString)(e.description),1)):(0,a.createCommentVNode)('v-if',!0),(0,a.createElementVNode)('section',Q,[(0,a.renderSlot)(t.$slots,'default')])])])])]))}}),Y=(0,y.A)(X,[['__scopeId','data-v-c2011d9a']]),Z={class:'confirm-modal'},ee={key:0,class:'confirm-modal__question'},te={key:1,class:'confirm-modal__hint'},ne={key:2,class:'confirm-modal__body'},oe={class:'confirm-modal__actions'},le=(0,a.defineComponent)({__name:'Confirm',props:{title:{},question:{}},emits:['cancel','confirm'],setup(e,{emit:t}){const n=t;return(t,o)=>((0,a.openBlock)(),(0,a.createBlock)(Y,{title:e.title,onClose:o[2]||(o[2]=e=>n('cancel'))},{default:(0,a.withCtx)(()=>[(0,a.createElementVNode)('div',Z,[e.question?((0,a.openBlock)(),(0,a.createElementBlock)('p',ee,(0,a.toDisplayString)(e.question),1)):(0,a.createCommentVNode)('v-if',!0),t.$slots.hint?((0,a.openBlock)(),(0,a.createElementBlock)('div',te,[(0,a.renderSlot)(t.$slots,'hint')])):(0,a.createCommentVNode)('v-if',!0),t.$slots.default?((0,a.openBlock)(),(0,a.createElementBlock)('div',ne,[(0,a.renderSlot)(t.$slots,'default')])):(0,a.createCommentVNode)('v-if',!0),(0,a.createElementVNode)('div',oe,[(0,a.renderSlot)(t.$slots,'actions',{},()=>[(0,a.createElementVNode)('button',{type:'button',class:'confirm-button ghost',onClick:o[0]||(o[0]=e=>n('cancel'))},'取消'),(0,a.createElementVNode)('button',{type:'submit',class:'confirm-button primary',onClick:o[1]||(o[1]=e=>n('confirm'))},'确认')])])])]),_:3},8,['title']))}}),ae=(0,y.A)(le,[['__scopeId','data-v-bbb24722']]);function re(){const e=(0,a.ref)(null);return{activeBubble:e,toggleBubble:function(t){e.value=e.value===t?null:t},closeBubble:function(){e.value=null}}}const ce={class:'abilities-panel'},se=['onPointerdown','onPointerup'],ie={class:'ability-item__name'},ue={class:'ability-item__value'},de={class:'ability-item__desc'},me={key:0,class:'ability-bubble'},pe={class:'ability-edit-field'},fe=['onKeyup'],ve=(0,a.defineComponent)({__name:'AbilitiesPanel',props:{abilities:{},descriptions:{}},setup(e){const t=d(),{activeBubble:n,toggleBubble:o,closeBubble:l}=re(),r=(0,a.ref)(!1),c=(0,a.ref)(null),s=(0,a.ref)(''),i=(0,a.ref)(null),u=(0,a.ref)(null),m=(0,a.computed)(()=>c.value??'未知能力');let p=null;const f=(0,a.ref)(!1);function v(){p&&(clearTimeout(p),p=null)}function b(e,t){0===t.button&&(u.value=t.pointerId,t.currentTarget?.setPointerCapture(t.pointerId),f.value=!1,'mouse'!==t.pointerType&&t.preventDefault(),v(),p=setTimeout(()=>{f.value=!0,function(e){c.value=e.key,s.value=e.数值?.toString()??'',r.value=!0,l(),(0,a.nextTick)(()=>i.value?.focus())}(e)},600))}function k(e){e&&u.value===e.pointerId&&(e.currentTarget?.releasePointerCapture(e.pointerId),u.value=null),v(),f.value=!1}function y(){r.value=!1,c.value=null,s.value=''}function E(){if(!c.value)return;const e=s.value.trim();if(''===e)return void toastr.error('请输入数值');const n=Number(e);if(Number.isNaN(n))return void toastr.error('请输入有效的数字');const o=function(){const e=t.data.主角;return e&&'object'==typeof e?e.能力面板:null}();if(!o)return void toastr.error('未找到主角能力数据');o[c.value].数值=n,t.log(`能力'${c.value}'已更新为${n}`),toastr.success('能力数值已更新'),y()}return(0,a.onBeforeUnmount)(()=>{v()}),(t,l)=>((0,a.openBlock)(),(0,a.createElementBlock)(a.Fragment,null,[(0,a.createElementVNode)('div',ce,[((0,a.openBlock)(!0),(0,a.createElementBlock)(a.Fragment,null,(0,a.renderList)(e.abilities,t=>((0,a.openBlock)(),(0,a.createElementBlock)('div',{key:t.key,class:(0,a.normalizeClass)(['ability-item',{active:(0,a.unref)(n)===t.key}]),onPointerdown:e=>b(t,e),onPointerup:e=>function(e,t){if(0!==t.button||u.value!==t.pointerId)return;t.currentTarget?.releasePointerCapture(t.pointerId),u.value=null;const n=f.value;v(),n||o(e.key)}(t,e),onPointerleave:l[0]||(l[0]=e=>k(e)),onPointercancel:l[1]||(l[1]=e=>k(e)),onContextmenu:l[2]||(l[2]=(0,a.withModifiers)(()=>{},['prevent']))},[(0,a.createElementVNode)('div',ie,(0,a.toDisplayString)(t.key),1),(0,a.createElementVNode)('div',ue,(0,a.toDisplayString)(t.数值),1),(0,a.createElementVNode)('div',de,(0,a.toDisplayString)(e.descriptions[t.key]),1),(0,a.unref)(n)===t.key?((0,a.openBlock)(),(0,a.createElementBlock)('div',me,(0,a.toDisplayString)(t.主角评价),1)):(0,a.createCommentVNode)('v-if',!0)],42,se))),128))]),(0,a.unref)(r)?((0,a.openBlock)(),(0,a.createBlock)(ae,{key:0,title:`调整能力：${(0,a.unref)(m)}`,question:`请输入要设置的「${(0,a.unref)(m)}」数值：`,onCancel:y},{hint:(0,a.withCtx)(()=>[...l[4]||(l[4]=[(0,a.createElementVNode)('span',null,'输入数字后，会通过记录日志告知AI。',-1)])]),default:(0,a.withCtx)(()=>[(0,a.createElementVNode)('label',pe,[l[5]||(l[5]=(0,a.createElementVNode)('span',null,'新的数值',-1)),(0,a.withDirectives)((0,a.createElementVNode)('input',{ref_key:'abilityInputRef',ref:i,type:'number',step:'1','onUpdate:modelValue':l[3]||(l[3]=e=>(0,a.isRef)(s)?s.value=e:null),onKeyup:(0,a.withKeys)((0,a.withModifiers)(E,['prevent']),['enter'])},null,40,fe),[[a.vModelText,(0,a.unref)(s)]])])]),actions:(0,a.withCtx)(()=>[(0,a.createElementVNode)('button',{type:'button',class:'confirm-button ghost',onClick:y},'取消'),(0,a.createElementVNode)('button',{type:'button',class:'confirm-button primary',onClick:E},'确认')]),_:1},8,['title','question'])):(0,a.createCommentVNode)('v-if',!0)],64))}}),be=(0,y.A)(ve,[['__scopeId','data-v-ccd2e9a4']]),ke={class:'ability-status-panel'},ye={key:0,class:'ability-status-group'},Ee={class:'ability-status-title'},Ve={class:'ability-status-list'},ge=['onPointerdown'],Ne={class:'ability-status-name'},he={class:'ability-status-desc'},Be={key:0,class:'ability-status-eval'},Ce={key:1,class:'ability-status-empty'},we=(0,a.defineComponent)({__name:'AbilityPanel',props:{abilities:{}},setup(e){const t=d(),n=(0,a.ref)(!1),o=(0,a.ref)(null),l=(0,a.computed)(()=>o.value?.name??'未知能力');let r=null;const c=(0,a.ref)(!1),s=(0,a.ref)(null);function i(){r&&(clearTimeout(r),r=null)}function u(e,t){0===t.button&&(s.value=t.pointerId,t.currentTarget?.setPointerCapture(t.pointerId),c.value=!1,'mouse'!==t.pointerType&&t.preventDefault(),i(),r=setTimeout(()=>{c.value=!0,function(e){o.value=e,n.value=!0}(e)},600))}function m(e){e&&s.value===e.pointerId&&(e.currentTarget?.releasePointerCapture(e.pointerId),s.value=null),i(),c.value=!1}function p(){n.value=!1,o.value=null}function f(e){if(!e)return!1;const n=function(){const e=t.data.主角;return e&&'object'==typeof e?(e.持有能力&&'object'==typeof e.持有能力||(e.持有能力={}),e.持有能力):null}();return!!n&&(!!Object.prototype.hasOwnProperty.call(n,e)&&(delete n[e],!0))}function v(){if(!o.value)return;f(o.value.key)?toastr.success(`已删除能力「${l.value}」`):toastr.warning('未找到要删除的能力'),p()}function b(){if(!o.value)return;f(o.value.key)?(t.log(`系统销毁了能力'${l.value}'`),toastr.success(`已销毁能力「${l.value}」`)):toastr.warning('未找到要销毁的能力'),p()}return(0,a.onBeforeUnmount)(()=>{i()}),(t,o)=>((0,a.openBlock)(),(0,a.createElementBlock)(a.Fragment,null,[(0,a.createElementVNode)('div',ke,[e.abilities.length?((0,a.openBlock)(),(0,a.createElementBlock)('div',ye,[(0,a.createElementVNode)('div',Ee,'持有能力 ('+(0,a.toDisplayString)(e.abilities.length)+')',1),(0,a.createElementVNode)('ul',Ve,[((0,a.openBlock)(!0),(0,a.createElementBlock)(a.Fragment,null,(0,a.renderList)(e.abilities,e=>((0,a.openBlock)(),(0,a.createElementBlock)('li',{key:e.id,class:'ability-status-item',onPointerdown:t=>u(e,t),onPointerup:o[0]||(o[0]=e=>{var t;0===(t=e).button&&s.value===t.pointerId&&(t.currentTarget?.releasePointerCapture(t.pointerId),s.value=null,i(),c.value=!1)}),onPointerleave:o[1]||(o[1]=e=>m(e)),onPointercancel:o[2]||(o[2]=e=>m(e)),onContextmenu:o[3]||(o[3]=(0,a.withModifiers)(()=>{},['prevent']))},[(0,a.createElementVNode)('div',Ne,(0,a.toDisplayString)(e.name),1),(0,a.createElementVNode)('p',he,(0,a.toDisplayString)(e.描述),1),e.主角评价?((0,a.openBlock)(),(0,a.createElementBlock)('p',Be,'「'+(0,a.toDisplayString)(e.主角评价)+'」',1)):(0,a.createCommentVNode)('v-if',!0)],40,ge))),128))])])):(0,a.createCommentVNode)('v-if',!0),e.abilities.length?(0,a.createCommentVNode)('v-if',!0):((0,a.openBlock)(),(0,a.createElementBlock)('p',Ce,'暂无持有能力'))]),(0,a.unref)(n)?((0,a.openBlock)(),(0,a.createBlock)(ae,{key:0,title:`处理能力：${(0,a.unref)(l)}`,question:`请选择要对「${(0,a.unref)(l)}」执行的操作。`,onCancel:p},{hint:(0,a.withCtx)(()=>[...o[4]||(o[4]=[(0,a.createElementVNode)('span',null,'删除是指出现bug强行将条目删除、销毁是指玩家主动删除。注意：删除不会记录日志，销毁会以系统行为记录日志。',-1)])]),actions:(0,a.withCtx)(()=>[(0,a.createElementVNode)('button',{type:'button',class:'confirm-button ghost',onClick:v},'删除'),(0,a.createElementVNode)('button',{type:'button',class:'confirm-button ghost',onClick:b},'销毁'),(0,a.createElementVNode)('button',{type:'button',class:'confirm-button ghost',onClick:p},'取消')]),_:1},8,['title','question'])):(0,a.createCommentVNode)('v-if',!0)],64))}}),_e=(0,y.A)(we,[['__scopeId','data-v-126d59b6']]),ze={class:'status-effects-panel'},De={class:'status-tabs'},Se={class:'status-content'},xe={key:0,class:'status-effects-empty'},Pe={key:1,class:'status-effects-list'},$e=['onPointerdown'],Te={class:'status-effect-name'},Ie={class:'status-effect-desc'},Me={key:0,class:'status-effect-eval'},je={class:'status-effect-meta'},Le={key:0},qe={key:1},Ue={key:0,class:'status-effects-empty'},Ae={key:1,class:'status-effects-list'},Fe=['onPointerdown'],Oe={class:'status-effect-name'},Re={class:'status-effect-desc'},We={key:0,class:'status-effect-eval'},Ke={class:'status-effect-meta'},Ge={key:0},He={key:1},Je=(0,a.defineComponent)({__name:'StatusEffectsPanel',props:{buffList:{},debuffList:{}},setup(e){const t=(0,a.ref)('增益'),n=d(),o=(0,a.ref)(!1),l=(0,a.ref)(null),r=(0,a.computed)(()=>l.value?.name??'未知状态');let c=null;const s=(0,a.ref)(!1),i=(0,a.ref)(null);function u(){c&&(clearTimeout(c),c=null)}function m(e,t){0===t.button&&(i.value=t.pointerId,t.currentTarget?.setPointerCapture(t.pointerId),s.value=!1,'mouse'!==t.pointerType&&t.preventDefault(),u(),c=setTimeout(()=>{s.value=!0,function(e){l.value=e,o.value=!0}(e)},600))}function p(e){0===e.button&&i.value===e.pointerId&&(e.currentTarget?.releasePointerCapture(e.pointerId),i.value=null,u(),s.value=!1)}function f(e){e&&i.value===e.pointerId&&(e.currentTarget?.releasePointerCapture(e.pointerId),i.value=null),u(),s.value=!1}function v(){o.value=!1,l.value=null}function b(e){if(!e)return!1;const t=function(){const e=n.data.主角;return e&&'object'==typeof e?(e.当前状态&&'object'==typeof e.当前状态||(e.当前状态={}),e.当前状态):null}();return!!t&&(!!Object.prototype.hasOwnProperty.call(t,e)&&(delete t[e],!0))}function k(){if(!l.value)return;b(l.value.key)?toastr.success(`已删除状态「${r.value}」`):toastr.warning('未找到要删除的状态'),v()}function y(){if(!l.value)return;b(l.value.key)?(n.log(`系统销毁了状态'${r.value}'`),toastr.success(`已销毁状态「${r.value}」`)):toastr.warning('未找到要销毁的状态'),v()}return(0,a.onBeforeUnmount)(()=>{u()}),(n,l)=>((0,a.openBlock)(),(0,a.createElementBlock)(a.Fragment,null,[(0,a.createElementVNode)('div',ze,[(0,a.createElementVNode)('div',De,[(0,a.createElementVNode)('button',{class:(0,a.normalizeClass)(['status-tab',{active:'增益'===(0,a.unref)(t)}]),type:'button',onClick:l[0]||(l[0]=e=>t.value='增益')},' 增益 ('+(0,a.toDisplayString)(e.buffList.length)+') ',3),(0,a.createElementVNode)('button',{class:(0,a.normalizeClass)(['status-tab',{active:'减益'===(0,a.unref)(t)}]),type:'button',onClick:l[1]||(l[1]=e=>t.value='减益')},' 减益 ('+(0,a.toDisplayString)(e.debuffList.length)+') ',3)]),(0,a.createElementVNode)('div',Se,['增益'===(0,a.unref)(t)?((0,a.openBlock)(),(0,a.createElementBlock)(a.Fragment,{key:0},[e.buffList.length?((0,a.openBlock)(),(0,a.createElementBlock)('ul',Pe,[((0,a.openBlock)(!0),(0,a.createElementBlock)(a.Fragment,null,(0,a.renderList)(e.buffList,e=>((0,a.openBlock)(),(0,a.createElementBlock)('li',{key:e.id,class:'status-effect-item',onPointerdown:t=>m(e,t),onPointerup:l[2]||(l[2]=e=>p(e)),onPointerleave:l[3]||(l[3]=e=>f(e)),onPointercancel:l[4]||(l[4]=e=>f(e)),onContextmenu:l[5]||(l[5]=(0,a.withModifiers)(()=>{},['prevent']))},[(0,a.createElementVNode)('div',Te,(0,a.toDisplayString)(e.name),1),(0,a.createElementVNode)('p',Ie,(0,a.toDisplayString)(e.描述),1),e.主角评价?((0,a.openBlock)(),(0,a.createElementBlock)('p',Me,'「'+(0,a.toDisplayString)(e.主角评价)+'」',1)):(0,a.createCommentVNode)('v-if',!0),(0,a.createElementVNode)('div',je,[e.持续时间?((0,a.openBlock)(),(0,a.createElementBlock)('span',Le,'持续时间: '+(0,a.toDisplayString)(e.持续时间),1)):(0,a.createCommentVNode)('v-if',!0),e.触发条件?((0,a.openBlock)(),(0,a.createElementBlock)('span',qe,'触发条件: '+(0,a.toDisplayString)(e.触发条件),1)):(0,a.createCommentVNode)('v-if',!0)])],40,$e))),128))])):((0,a.openBlock)(),(0,a.createElementBlock)('p',xe,'暂无增益状态'))],64)):((0,a.openBlock)(),(0,a.createElementBlock)(a.Fragment,{key:1},[e.debuffList.length?((0,a.openBlock)(),(0,a.createElementBlock)('ul',Ae,[((0,a.openBlock)(!0),(0,a.createElementBlock)(a.Fragment,null,(0,a.renderList)(e.debuffList,e=>((0,a.openBlock)(),(0,a.createElementBlock)('li',{key:e.id,class:'status-effect-item',onPointerdown:t=>m(e,t),onPointerup:l[6]||(l[6]=e=>p(e)),onPointerleave:l[7]||(l[7]=e=>f(e)),onPointercancel:l[8]||(l[8]=e=>f(e)),onContextmenu:l[9]||(l[9]=(0,a.withModifiers)(()=>{},['prevent']))},[(0,a.createElementVNode)('div',Oe,(0,a.toDisplayString)(e.name),1),(0,a.createElementVNode)('p',Re,(0,a.toDisplayString)(e.描述),1),e.主角评价?((0,a.openBlock)(),(0,a.createElementBlock)('p',We,'「'+(0,a.toDisplayString)(e.主角评价)+'」',1)):(0,a.createCommentVNode)('v-if',!0),(0,a.createElementVNode)('div',Ke,[e.持续时间?((0,a.openBlock)(),(0,a.createElementBlock)('span',Ge,'持续时间: '+(0,a.toDisplayString)(e.持续时间),1)):(0,a.createCommentVNode)('v-if',!0),e.触发条件?((0,a.openBlock)(),(0,a.createElementBlock)('span',He,'触发条件: '+(0,a.toDisplayString)(e.触发条件),1)):(0,a.createCommentVNode)('v-if',!0)])],40,Fe))),128))])):((0,a.openBlock)(),(0,a.createElementBlock)('p',Ue,'暂无减益状态'))],64))])]),(0,a.unref)(o)?((0,a.openBlock)(),(0,a.createBlock)(ae,{key:0,title:`处理状态：${(0,a.unref)(r)}`,question:`请选择要对「${(0,a.unref)(r)}」执行的操作。`,onCancel:v},{hint:(0,a.withCtx)(()=>[...l[10]||(l[10]=[(0,a.createElementVNode)('span',null,'删除是指出现bug强行将条目删除、销毁是指玩家主动删除。注意：删除不会记录日志，销毁会以系统行为记录日志。',-1)])]),actions:(0,a.withCtx)(()=>[(0,a.createElementVNode)('button',{type:'button',class:'confirm-button ghost',onClick:k},'删除'),(0,a.createElementVNode)('button',{type:'button',class:'confirm-button ghost',onClick:y},'销毁'),(0,a.createElementVNode)('button',{type:'button',class:'confirm-button ghost',onClick:v},'取消')]),_:1},8,['title','question'])):(0,a.createCommentVNode)('v-if',!0)],64))}}),Qe=(0,y.A)(Je,[['__scopeId','data-v-284fa7b7']]),Xe={class:'equipment-section'},Ye={class:'equipment-grid'},Ze=['onClick'],et={class:'slot-name'},tt={class:'slot-item'},nt={key:0,class:'info-bubble equipment-bubble'},ot=(0,a.defineComponent)({__name:'EquipmentPanel',props:{slots:{}},setup(e){const{activeBubble:t,toggleBubble:n}=re();return(o,l)=>((0,a.openBlock)(),(0,a.createElementBlock)('div',Xe,[l[0]||(l[0]=(0,a.createElementVNode)('div',{class:'section-title'},'装备栏',-1)),(0,a.createElementVNode)('div',Ye,[((0,a.openBlock)(!0),(0,a.createElementBlock)(a.Fragment,null,(0,a.renderList)(e.slots,e=>((0,a.openBlock)(),(0,a.createElementBlock)('div',{key:e.label,class:(0,a.normalizeClass)(['equipment-slot',{active:(0,a.unref)(t)===e.label}]),onClick:t=>(0,a.unref)(n)(e.label)},[(0,a.createElementVNode)('div',et,(0,a.toDisplayString)(e.label),1),(0,a.createElementVNode)('div',tt,(0,a.toDisplayString)(e.item||'空置'),1),(0,a.unref)(t)===e.label?((0,a.openBlock)(),(0,a.createElementBlock)('div',nt,(0,a.toDisplayString)(e.evaluation||'暂无评价'),1)):(0,a.createCommentVNode)('v-if',!0)],10,Ze))),128))])]))}}),lt=(0,y.A)(ot,[['__scopeId','data-v-70286b28']]),at={class:'inventory-section'},rt=['onPointerdown','onPointerup'],ct={class:'item-name'},st={class:'item-description'},it={key:0,class:'info-bubble inventory-bubble'},ut=(0,a.defineComponent)({__name:'InventoryPanel',props:{inventory:{},isMobile:{type:Boolean}},setup(e){const t=e,n=d(),{activeBubble:o,toggleBubble:l,closeBubble:r}=re(),c=(0,a.computed)(()=>t.inventory??[]),s=(0,a.computed)(()=>{const e=[...c.value];if(t.isMobile)return e;if(e.length<4){const t=4-e.length;for(let n=0;n<t;n+=1)e.push({id:`placeholder-${n}`,key:`placeholder-${n}`,名称:'—',描述:'空槽位',主角评价:'',placeholder:!0})}return e}),i=(0,a.ref)(!1),u=(0,a.ref)(null),m=(0,a.computed)(()=>u.value?.名称||'未知物品'),p=(0,a.computed)(()=>`处理物品：${m.value}`);let f=null;const v=(0,a.ref)(!1);function b(){f&&(clearTimeout(f),f=null)}function k(e,t){e.placeholder||0!==t.button||(v.value=!1,b(),f=setTimeout(()=>{v.value=!0,function(e){u.value=e,i.value=!0,r()}(e)},600))}function y(){b(),v.value=!1}function E(){i.value=!1,u.value=null}function V(e){if(void 0===e)return!1;const t=function(){const e=n.data.主角;return e&&'object'==typeof e?(e.物品栏&&'object'==typeof e.物品栏||(e.物品栏={}),e.物品栏):null}();return!!t&&(!!Object.prototype.hasOwnProperty.call(t,e)&&(delete t[e],!0))}function g(){if(!u.value)return;V(u.value.key)?toastr.success(`已删除物品「${m.value}」`):toastr.warning('未找到要删除的物品'),E()}function N(){if(!u.value)return;V(u.value.key)?(n.log(`系统销毁了物品'${m.value}'`),toastr.success(`已销毁物品「${m.value}」`)):toastr.warning('未找到要销毁的物品'),E()}function h(e,t){return e<Math.floor(t/2)}return(0,a.onBeforeUnmount)(()=>{b()}),(e,t)=>((0,a.openBlock)(),(0,a.createElementBlock)(a.Fragment,null,[(0,a.createElementVNode)('div',at,[t[4]||(t[4]=(0,a.createElementVNode)('div',{class:'inventory-title'},'物品栏',-1)),(0,a.createElementVNode)('div',{class:'inventory-grid',onWheel:t[3]||(t[3]=(0,a.withModifiers)(()=>{},['stop']))},[((0,a.openBlock)(!0),(0,a.createElementBlock)(a.Fragment,null,(0,a.renderList)((0,a.unref)(s),(e,n)=>((0,a.openBlock)(),(0,a.createElementBlock)('div',{key:e.id,class:(0,a.normalizeClass)(['inventory-item',{placeholder:e.placeholder,active:(0,a.unref)(o)===e.id,'bubble-top':h(n,(0,a.unref)(s).length)}]),onPointerdown:t=>k(e,t),onPointerup:t=>function(e,t){if(e.placeholder||0!==t.button)return;const n=v.value;b(),n||l(e.id)}(e,t),onPointerleave:t[0]||(t[0]=e=>y()),onPointercancel:t[1]||(t[1]=e=>y()),onContextmenu:t[2]||(t[2]=(0,a.withModifiers)(()=>{},['prevent']))},[(0,a.createElementVNode)('div',ct,(0,a.toDisplayString)(e.名称),1),(0,a.createElementVNode)('div',st,(0,a.toDisplayString)(e.描述||e.主角评价||'空槽位'),1),e.placeholder||(0,a.unref)(o)!==e.id?(0,a.createCommentVNode)('v-if',!0):((0,a.openBlock)(),(0,a.createElementBlock)('div',it,(0,a.toDisplayString)(e.主角评价||e.描述||'暂无评价'),1))],42,rt))),128))],32)]),(0,a.unref)(i)?((0,a.openBlock)(),(0,a.createBlock)(ae,{key:0,title:(0,a.unref)(p),question:`请选择要对「${(0,a.unref)(m)}」执行的操作。`,onCancel:E},{hint:(0,a.withCtx)(()=>[...t[5]||(t[5]=[(0,a.createElementVNode)('span',null,'删除：强行将物品删除，通常用于出现bug时。销毁：将物品删除并通知AI，作为剧情的一部分。',-1)])]),actions:(0,a.withCtx)(()=>[(0,a.createElementVNode)('button',{type:'button',class:'confirm-button ghost',onClick:g},'删除'),(0,a.createElementVNode)('button',{type:'button',class:'confirm-button ghost',onClick:N},'销毁'),(0,a.createElementVNode)('button',{type:'button',class:'confirm-button ghost',onClick:E},'取消')]),_:1},8,['title','question'])):(0,a.createCommentVNode)('v-if',!0)],64))}}),dt=(0,y.A)(ut,[['__scopeId','data-v-6fb3f9cb']]),mt={class:'status-effects-trigger'},pt={key:0,class:'status-effects-popover'},ft={class:'status-effects-content'},vt={class:'status-tabs'},bt={class:'status-list-content'},kt={key:0,class:'status-effects-empty popover-empty'},yt={key:1,class:'status-effects-list'},Et=['onPointerdown','onPointerup'],Vt={class:'status-effect-name'},gt={class:'status-effect-desc'},Nt={key:0,class:'status-effect-meta'},ht={key:0},Bt={key:1},Ct={key:1,class:'status-bubble'},wt={key:0,class:'status-effects-empty popover-empty'},_t={key:1,class:'status-effects-list'},zt=['onPointerdown','onPointerup'],Dt={class:'status-effect-name'},St={class:'status-effect-desc'},xt={key:0,class:'status-effect-meta'},Pt={key:0},$t={key:1},Tt={key:1,class:'status-bubble'},It=(0,a.defineComponent)({__name:'StatusPopover',props:(0,a.mergeModels)({buffList:{},debuffList:{},buffCount:{},debuffCount:{}},{show:{type:Boolean,default:!1},showModifiers:{},tab:{default:'增益'},tabModifiers:{}}),emits:['update:show','update:tab'],setup(e){const t=(0,a.useModel)(e,'show'),n=(0,a.useModel)(e,'tab'),{activeBubble:o,toggleBubble:l}=re(),r=d();let c=null;const s=(0,a.ref)(!1),i=(0,a.ref)(!1),u=(0,a.ref)(null),m=(0,a.computed)(()=>u.value?.name??'未知状态'),p=(0,a.ref)(null);function f(){t.value=!t.value}function v(){t.value=!1}function b(e,t){return e>=Math.floor(t/2)}function k(){c&&(clearTimeout(c),c=null)}function y(e,t){0===t.button&&(p.value=t.pointerId,t.currentTarget?.setPointerCapture(t.pointerId),s.value=!1,'mouse'!==t.pointerType&&t.preventDefault(),k(),c=setTimeout(()=>{s.value=!0,function(e){u.value=e,i.value=!0}(e)},600))}function E(e,t){if(0!==t.button||p.value!==t.pointerId)return;t.currentTarget?.releasePointerCapture(t.pointerId),p.value=null;const n=s.value;k(),n||l(e.id)}function V(e){e&&p.value===e.pointerId&&(e.currentTarget?.releasePointerCapture(e.pointerId),p.value=null),k(),s.value=!1}function g(){i.value=!1,u.value=null}function N(e){if(!e)return!1;const t=function(){const e=r.data.主角;return e&&'object'==typeof e?(e.当前状态&&'object'==typeof e.当前状态||(e.当前状态={}),e.当前状态):null}();return!!t&&(!!Object.prototype.hasOwnProperty.call(t,e)&&(delete t[e],!0))}function h(){if(!u.value)return;N(u.value.key??u.value.name)?toastr.success(`已删除状态「${m.value}」`):toastr.warning('未找到要删除的状态'),g()}function B(){if(!u.value)return;N(u.value.key??u.value.name)?(r.log(`系统销毁了状态'${m.value}'`),toastr.success(`已销毁状态「${m.value}」`)):toastr.warning('未找到要销毁的状态'),g()}return(0,a.onBeforeUnmount)(()=>k()),(l,r)=>((0,a.openBlock)(),(0,a.createElementBlock)(a.Fragment,null,[(0,a.createElementVNode)('div',mt,[(0,a.createElementVNode)('button',{class:(0,a.normalizeClass)(['status-button',{active:t.value}]),type:'button',onClick:f},[r[8]||(r[8]=(0,a.createElementVNode)('span',{class:'button-icon'},'✤',-1)),(0,a.createTextVNode)(' 状态 ('+(0,a.toDisplayString)(e.buffCount+e.debuffCount)+') ',1)],2),t.value?((0,a.openBlock)(),(0,a.createElementBlock)('div',pt,[(0,a.createElementVNode)('div',{class:'popover-header'},[r[9]||(r[9]=(0,a.createElementVNode)('span',null,'状态概览',-1)),(0,a.createElementVNode)('button',{class:'popover-close',type:'button','aria-label':'关闭状态概览',onClick:v},'×')]),(0,a.createElementVNode)('div',ft,[(0,a.createElementVNode)('div',vt,[(0,a.createElementVNode)('button',{class:(0,a.normalizeClass)(['status-tab',{active:'增益'===n.value}]),type:'button',onClick:r[0]||(r[0]=e=>n.value='增益')},' 增益 ('+(0,a.toDisplayString)(e.buffCount)+') ',3),(0,a.createElementVNode)('button',{class:(0,a.normalizeClass)(['status-tab',{active:'减益'===n.value}]),type:'button',onClick:r[1]||(r[1]=e=>n.value='减益')},' 减益 ('+(0,a.toDisplayString)(e.debuffCount)+') ',3)]),(0,a.createElementVNode)('div',bt,['增益'===n.value?((0,a.openBlock)(),(0,a.createElementBlock)(a.Fragment,{key:0},[e.buffList.length?((0,a.openBlock)(),(0,a.createElementBlock)('ul',yt,[((0,a.openBlock)(!0),(0,a.createElementBlock)(a.Fragment,null,(0,a.renderList)(e.buffList,(t,n)=>((0,a.openBlock)(),(0,a.createElementBlock)('li',{key:t.id,class:(0,a.normalizeClass)(['status-effect-item status-effect-buff',{active:(0,a.unref)(o)===t.id,'bubble-top':b(n,e.buffList.length)}]),onPointerdown:e=>y(t,e),onPointerup:e=>E(t,e),onPointerleave:r[2]||(r[2]=e=>V(e)),onPointercancel:r[3]||(r[3]=e=>V(e)),onContextmenu:r[4]||(r[4]=(0,a.withModifiers)(()=>{},['prevent']))},[(0,a.createElementVNode)('div',Vt,(0,a.toDisplayString)(t.name),1),(0,a.createElementVNode)('p',gt,(0,a.toDisplayString)(t.描述),1),t.持续时间||t.触发条件?((0,a.openBlock)(),(0,a.createElementBlock)('div',Nt,[t.持续时间?((0,a.openBlock)(),(0,a.createElementBlock)('span',ht,'持续时间: '+(0,a.toDisplayString)(t.持续时间),1)):(0,a.createCommentVNode)('v-if',!0),t.触发条件?((0,a.openBlock)(),(0,a.createElementBlock)('span',Bt,'触发条件: '+(0,a.toDisplayString)(t.触发条件),1)):(0,a.createCommentVNode)('v-if',!0)])):(0,a.createCommentVNode)('v-if',!0),(0,a.unref)(o)===t.id&&t.主角评价?((0,a.openBlock)(),(0,a.createElementBlock)('div',Ct,(0,a.toDisplayString)(t.主角评价),1)):(0,a.createCommentVNode)('v-if',!0)],42,Et))),128))])):((0,a.openBlock)(),(0,a.createElementBlock)('p',kt,'暂无增益状态'))],64)):((0,a.openBlock)(),(0,a.createElementBlock)(a.Fragment,{key:1},[e.debuffList.length?((0,a.openBlock)(),(0,a.createElementBlock)('ul',_t,[((0,a.openBlock)(!0),(0,a.createElementBlock)(a.Fragment,null,(0,a.renderList)(e.debuffList,(t,n)=>((0,a.openBlock)(),(0,a.createElementBlock)('li',{key:t.id,class:(0,a.normalizeClass)(['status-effect-item status-effect-debuff',{active:(0,a.unref)(o)===t.id,'bubble-top':b(n,e.debuffList.length)}]),onPointerdown:e=>y(t,e),onPointerup:e=>E(t,e),onPointerleave:r[5]||(r[5]=e=>V(e)),onPointercancel:r[6]||(r[6]=e=>V(e)),onContextmenu:r[7]||(r[7]=(0,a.withModifiers)(()=>{},['prevent']))},[(0,a.createElementVNode)('div',Dt,(0,a.toDisplayString)(t.name),1),(0,a.createElementVNode)('p',St,(0,a.toDisplayString)(t.描述),1),t.持续时间||t.触发条件?((0,a.openBlock)(),(0,a.createElementBlock)('div',xt,[t.持续时间?((0,a.openBlock)(),(0,a.createElementBlock)('span',Pt,'持续时间: '+(0,a.toDisplayString)(t.持续时间),1)):(0,a.createCommentVNode)('v-if',!0),t.触发条件?((0,a.openBlock)(),(0,a.createElementBlock)('span',$t,'触发条件: '+(0,a.toDisplayString)(t.触发条件),1)):(0,a.createCommentVNode)('v-if',!0)])):(0,a.createCommentVNode)('v-if',!0),(0,a.unref)(o)===t.id&&t.主角评价?((0,a.openBlock)(),(0,a.createElementBlock)('div',Tt,(0,a.toDisplayString)(t.主角评价),1)):(0,a.createCommentVNode)('v-if',!0)],42,zt))),128))])):((0,a.openBlock)(),(0,a.createElementBlock)('p',wt,'暂无减益状态'))],64))])])])):(0,a.createCommentVNode)('v-if',!0)]),i.value?((0,a.openBlock)(),(0,a.createBlock)(ae,{key:0,title:`处理状态：${m.value}`,question:`请选择要对「${m.value}」执行的操作。`,onCancel:g},{hint:(0,a.withCtx)(()=>[...r[10]||(r[10]=[(0,a.createElementVNode)('span',null,'删除是指出现bug强行将条目删除、销毁是指玩家主动删除。删除不写日志，销毁会记录“系统销毁了状态”。',-1)])]),actions:(0,a.withCtx)(()=>[(0,a.createElementVNode)('button',{type:'button',class:'confirm-button ghost',onClick:h},'删除'),(0,a.createElementVNode)('button',{type:'button',class:'confirm-button ghost',onClick:B},'销毁'),(0,a.createElementVNode)('button',{type:'button',class:'confirm-button ghost',onClick:g},'取消')]),_:1},8,['title','question'])):(0,a.createCommentVNode)('v-if',!0)],64))}}),Mt=(0,y.A)(It,[['__scopeId','data-v-fc6126d2']]),jt={class:'ability-popover-trigger'},Lt={key:0,class:'ability-popover'},qt={class:'ability-content'},Ut={key:0,class:'ability-empty'},At={key:1,class:'ability-list'},Ft=['onPointerdown','onPointerup'],Ot={class:'ability-name'},Rt={class:'ability-desc'},Wt={key:0,class:'ability-bubble'},Kt=(0,a.defineComponent)({__name:'AbilityPopover',props:(0,a.mergeModels)({abilities:{}},{show:{type:Boolean,default:!1},showModifiers:{}}),emits:['update:show'],setup(e){const t=(0,a.useModel)(e,'show'),{activeBubble:n,toggleBubble:o}=re(),l=d();let r=null;const c=(0,a.ref)(!1),s=(0,a.ref)(null),i=(0,a.ref)(!1),u=(0,a.ref)(null),m=(0,a.computed)(()=>u.value?.name??'未知能力');function p(){t.value=!t.value}function f(){t.value=!1}function v(e,t){return e>=Math.floor(t/2)}function b(){r&&(clearTimeout(r),r=null)}function k(e,t){0===t.button&&(s.value=t.pointerId,t.currentTarget?.setPointerCapture(t.pointerId),c.value=!1,'mouse'!==t.pointerType&&t.preventDefault(),b(),r=setTimeout(()=>{c.value=!0,function(e){u.value=e,i.value=!0}(e)},600))}function y(e){e&&s.value===e.pointerId&&(e.currentTarget?.releasePointerCapture(e.pointerId),s.value=null),b(),c.value=!1}function E(){i.value=!1,u.value=null}function V(e){if(!e)return!1;const t=function(){const e=l.data.主角;return e&&'object'==typeof e?(e.持有能力&&'object'==typeof e.持有能力||(e.持有能力={}),e.持有能力):null}();return!!t&&(!!Object.prototype.hasOwnProperty.call(t,e)&&(delete t[e],!0))}function g(){if(!u.value)return;V(u.value.key??u.value.name)?toastr.success(`已删除能力「${m.value}」`):toastr.warning('未找到要删除的能力'),E()}function N(){if(!u.value)return;V(u.value.key??u.value.name)?(l.log(`系统销毁了能力'${m.value}'`),toastr.success(`已销毁能力「${m.value}」`)):toastr.warning('未找到要销毁的能力'),E()}return(0,a.onBeforeUnmount)(()=>b()),(l,r)=>((0,a.openBlock)(),(0,a.createElementBlock)(a.Fragment,null,[(0,a.createElementVNode)('div',jt,[(0,a.createElementVNode)('button',{class:(0,a.normalizeClass)(['ability-button',{active:t.value}]),type:'button',onClick:p},[r[3]||(r[3]=(0,a.createElementVNode)('span',{class:'button-icon'},'✦',-1)),(0,a.createTextVNode)(' 能力 ('+(0,a.toDisplayString)(e.abilities.length)+') ',1)],2),t.value?((0,a.openBlock)(),(0,a.createElementBlock)('div',Lt,[(0,a.createElementVNode)('div',{class:'popover-header'},[r[4]||(r[4]=(0,a.createElementVNode)('span',null,'持有能力',-1)),(0,a.createElementVNode)('button',{class:'popover-close',type:'button','aria-label':'关闭能力列表',onClick:f},'×')]),(0,a.createElementVNode)('div',qt,[e.abilities.length?((0,a.openBlock)(),(0,a.createElementBlock)('ul',At,[((0,a.openBlock)(!0),(0,a.createElementBlock)(a.Fragment,null,(0,a.renderList)(e.abilities,(t,l)=>((0,a.openBlock)(),(0,a.createElementBlock)('li',{key:t.id,class:(0,a.normalizeClass)(['ability-item',{active:(0,a.unref)(n)===t.id,'bubble-top':v(l,e.abilities.length)}]),onPointerdown:e=>k(t,e),onPointerup:e=>function(e,t){if(0!==t.button||s.value!==t.pointerId)return;t.currentTarget?.releasePointerCapture(t.pointerId),s.value=null;const n=c.value;b(),n||o(e.id)}(t,e),onPointerleave:r[0]||(r[0]=e=>y(e)),onPointercancel:r[1]||(r[1]=e=>y(e)),onContextmenu:r[2]||(r[2]=(0,a.withModifiers)(()=>{},['prevent']))},[(0,a.createElementVNode)('div',Ot,(0,a.toDisplayString)(t.name),1),(0,a.createElementVNode)('p',Rt,(0,a.toDisplayString)(t.描述),1),(0,a.unref)(n)===t.id&&t.主角评价?((0,a.openBlock)(),(0,a.createElementBlock)('div',Wt,(0,a.toDisplayString)(t.主角评价),1)):(0,a.createCommentVNode)('v-if',!0)],42,Ft))),128))])):((0,a.openBlock)(),(0,a.createElementBlock)('p',Ut,'暂无持有能力'))])])):(0,a.createCommentVNode)('v-if',!0)]),i.value?((0,a.openBlock)(),(0,a.createBlock)(ae,{key:0,title:`处理能力：${m.value}`,question:`请选择要对「${m.value}」执行的操作。`,onCancel:E},{hint:(0,a.withCtx)(()=>[...r[5]||(r[5]=[(0,a.createElementVNode)('span',null,'删除是指出现bug强行将条目删除、销毁是指玩家主动删除。删除不写日志，销毁会记录“系统销毁了能力”。',-1)])]),actions:(0,a.withCtx)(()=>[(0,a.createElementVNode)('button',{type:'button',class:'confirm-button ghost',onClick:g},'删除'),(0,a.createElementVNode)('button',{type:'button',class:'confirm-button ghost',onClick:N},'销毁'),(0,a.createElementVNode)('button',{type:'button',class:'confirm-button ghost',onClick:E},'取消')]),_:1},8,['title','question'])):(0,a.createCommentVNode)('v-if',!0)],64))}}),Gt=(0,y.A)(Kt,[['__scopeId','data-v-3e3db43e']]),Ht={class:'bottom-bar'},Jt={class:'bottom-left'},Qt={class:'bottom-right'};const Xt={},Yt=(0,y.A)(Xt,[['render',function(e,t){return(0,a.openBlock)(),(0,a.createElementBlock)('div',Ht,[(0,a.createElementVNode)('div',Jt,[(0,a.renderSlot)(e.$slots,'left',{},void 0,!0)]),(0,a.createElementVNode)('div',Qt,[(0,a.renderSlot)(e.$slots,'right',{},void 0,!0)])])}],['__scopeId','data-v-604538ab']]),Zt={class:'form-grid'},en=['value'],tn=['value'],nn=['value'],on={class:'form-grid__checkbox'},ln={class:'form-actions'},an=(0,a.defineComponent)({__name:'AutoTask',emits:['close'],setup(e,{emit:t}){const n=t,o=['简单','普通','困难'],l=['微薄','一般','丰厚'],r=(s.z.object({类型:i.shape.任务列表.valueType.shape.类型,难度:s.z.enum(o),奖励:s.z.enum(l),是否色情:s.z.coerce.boolean()}),(0,a.ref)({类型:'主线',难度:'简单',奖励:'微薄',是否色情:!0}));async function c(){const e=`【<user>发布了一个${r.value.难度}的${r.value.类型}任务，奖励${r.value.奖励}，本次任务${r.value.是否色情?'必须':'禁止'}包含色情内容】\x3c!--必须立即根据剧情生成合适的任务--\x3e`;await createChatMessages([{role:'user',message:e}]),await triggerSlash('/trigger'),toastr.success('已触发自动任务生成'),n('close')}return(e,t)=>((0,a.openBlock)(),(0,a.createBlock)(Y,{title:'自动发布任务',onClose:t[5]||(t[5]=e=>n('close'))},{default:(0,a.withCtx)(()=>[(0,a.createElementVNode)('form',Zt,[(0,a.createElementVNode)('label',null,[t[6]||(t[6]=(0,a.createElementVNode)('span',null,'任务类型',-1)),(0,a.withDirectives)((0,a.createElementVNode)('select',{'onUpdate:modelValue':t[0]||(t[0]=e=>(0,a.unref)(r).类型=e)},[((0,a.openBlock)(!0),(0,a.createElementBlock)(a.Fragment,null,(0,a.renderList)((0,a.unref)(u),e=>((0,a.openBlock)(),(0,a.createElementBlock)('option',{key:e,value:e},(0,a.toDisplayString)(e),9,en))),128))],512),[[a.vModelSelect,(0,a.unref)(r).类型]])]),(0,a.createElementVNode)('label',null,[t[7]||(t[7]=(0,a.createElementVNode)('span',null,'难度',-1)),(0,a.withDirectives)((0,a.createElementVNode)('select',{'onUpdate:modelValue':t[1]||(t[1]=e=>(0,a.unref)(r).难度=e)},[((0,a.openBlock)(),(0,a.createElementBlock)(a.Fragment,null,(0,a.renderList)(o,e=>(0,a.createElementVNode)('option',{key:e,value:e},(0,a.toDisplayString)(e),9,tn)),64))],512),[[a.vModelSelect,(0,a.unref)(r).难度]])]),(0,a.createElementVNode)('label',null,[t[8]||(t[8]=(0,a.createElementVNode)('span',null,'奖励丰厚程度',-1)),(0,a.withDirectives)((0,a.createElementVNode)('select',{'onUpdate:modelValue':t[2]||(t[2]=e=>(0,a.unref)(r).奖励=e)},[((0,a.openBlock)(),(0,a.createElementBlock)(a.Fragment,null,(0,a.renderList)(l,e=>(0,a.createElementVNode)('option',{key:e,value:e},(0,a.toDisplayString)(e),9,nn)),64))],512),[[a.vModelSelect,(0,a.unref)(r).奖励]])]),(0,a.createElementVNode)('label',on,[(0,a.withDirectives)((0,a.createElementVNode)('input',{'onUpdate:modelValue':t[3]||(t[3]=e=>(0,a.unref)(r).是否色情=e),type:'checkbox'},null,512),[[a.vModelCheckbox,(0,a.unref)(r).是否色情]]),t[9]||(t[9]=(0,a.createElementVNode)('span',null,'包含色情内容',-1))]),(0,a.createElementVNode)('div',ln,[(0,a.createElementVNode)('button',{type:'button',class:'ghost',onClick:t[4]||(t[4]=e=>n('close'))},'取消'),(0,a.createElementVNode)('button',{type:'submit',class:'primary',onClick:c},'生成')])])]),_:1}))}}),rn={class:'form-grid'},cn={class:'form-actions',style:{'margin-bottom':'12px','padding-bottom':'0',border:'none'}},sn=['value'],un={class:'form-actions'},dn=(0,a.defineComponent)({__name:'PublishTask',emits:['close'],setup(e,{emit:t}){const n=(0,a.ref)(!1),o=t,l=s.z.object({名称:s.z.coerce.string()}).extend(i.shape.任务列表.valueType.shape),r=(0,a.ref)({名称:'',类型:'主线',说明:'',目标:'',奖励:'',惩罚:''});function c(){const e=l.safeDecode(r.value);if(e.error)return toastr.error('填写奖励时出错'),void o('close');const t=e.data;if(!t.名称)return void toastr.error('必须填写名称');const n=d();n.log(`已发布新任务'${t.名称}'`),_.set(n.data.任务列表,t.名称,i.shape.任务列表.valueType.decode(t)),toastr.success('已发布任务'),o('close')}return(e,t)=>((0,a.openBlock)(),(0,a.createElementBlock)(a.Fragment,null,[(0,a.createVNode)(Y,{title:'发布任务',onClose:t[8]||(t[8]=e=>o('close'))},{default:(0,a.withCtx)(()=>[(0,a.createElementVNode)('form',rn,[(0,a.createElementVNode)('div',cn,[(0,a.createElementVNode)('button',{type:'button',class:'primary',style:{width:'100%'},onClick:t[0]||(t[0]=e=>n.value=!0)},'自动发布任务')]),(0,a.createElementVNode)('label',null,[t[10]||(t[10]=(0,a.createElementVNode)('span',null,'名称',-1)),(0,a.withDirectives)((0,a.createElementVNode)('input',{'onUpdate:modelValue':t[1]||(t[1]=e=>(0,a.unref)(r).名称=e),required:'',placeholder:'例如：夺回王城'},null,512),[[a.vModelText,(0,a.unref)(r).名称]])]),(0,a.createElementVNode)('label',null,[t[11]||(t[11]=(0,a.createElementVNode)('span',null,'类型',-1)),(0,a.withDirectives)((0,a.createElementVNode)('select',{'onUpdate:modelValue':t[2]||(t[2]=e=>(0,a.unref)(r).类型=e)},[((0,a.openBlock)(!0),(0,a.createElementBlock)(a.Fragment,null,(0,a.renderList)((0,a.unref)(u),e=>((0,a.openBlock)(),(0,a.createElementBlock)('option',{key:e,value:e},(0,a.toDisplayString)(e),9,sn))),128))],512),[[a.vModelSelect,(0,a.unref)(r).类型]])]),(0,a.createElementVNode)('label',null,[t[12]||(t[12]=(0,a.createElementVNode)('span',null,'说明',-1)),(0,a.withDirectives)((0,a.createElementVNode)('textarea',{'onUpdate:modelValue':t[3]||(t[3]=e=>(0,a.unref)(r).说明=e),placeholder:'交代背景、系统指示等'},null,512),[[a.vModelText,(0,a.unref)(r).说明]])]),(0,a.createElementVNode)('label',null,[t[13]||(t[13]=(0,a.createElementVNode)('span',null,'目标',-1)),(0,a.withDirectives)((0,a.createElementVNode)('textarea',{'onUpdate:modelValue':t[4]||(t[4]=e=>(0,a.unref)(r).目标=e),placeholder:'列出具体步骤或达成条件'},null,512),[[a.vModelText,(0,a.unref)(r).目标]])]),(0,a.createElementVNode)('label',null,[t[14]||(t[14]=(0,a.createElementVNode)('span',null,'奖励',-1)),(0,a.withDirectives)((0,a.createElementVNode)('input',{'onUpdate:modelValue':t[5]||(t[5]=e=>(0,a.unref)(r).奖励=e),placeholder:'积分、道具、权限...'},null,512),[[a.vModelText,(0,a.unref)(r).奖励]])]),(0,a.createElementVNode)('label',null,[t[15]||(t[15]=(0,a.createElementVNode)('span',null,'惩罚',-1)),(0,a.withDirectives)((0,a.createElementVNode)('input',{'onUpdate:modelValue':t[6]||(t[6]=e=>(0,a.unref)(r).惩罚=e),placeholder:'失败后承担的代价（可选）'},null,512),[[a.vModelText,(0,a.unref)(r).惩罚]])]),(0,a.createElementVNode)('div',un,[(0,a.createElementVNode)('button',{type:'button',class:'ghost',onClick:t[7]||(t[7]=e=>o('close'))},'取消'),(0,a.createElementVNode)('button',{type:'submit',class:'primary',onClick:c},'发布')])])]),_:1}),(0,a.unref)(n)?((0,a.openBlock)(),(0,a.createBlock)(an,{key:0,onClose:t[9]||(t[9]=e=>n.value=!1)})):(0,a.createCommentVNode)('v-if',!0)],64))}}),mn={class:'form-grid'},pn={class:'form-actions with-auto'},fn={class:'form-grid'},vn=(0,a.defineComponent)({__name:'CreateShopItem',emits:['close'],setup(e,{emit:t}){const n=t,o=s.z.object({名称:s.z.coerce.string()}).extend(i.shape.商品列表.valueType.shape),l=(0,a.ref)({名称:'',描述:'',主角评价:'待评价，需要立即更新',积分价格:0}),r=(0,a.ref)(1),c=(0,a.ref)(!1);function u(){const e=o.safeDecode(l.value);if(e.error)return toastr.success('填写商品时出错'),void n('close');const t=e.data;if(!t.名称)return void toastr.error('必须填写名称');const a=d();t.名称&&(a.log(`已创建商品'${t.名称}'`),_.set(a.data.商品列表,t.名称,i.shape.商品列表.valueType.decode(t)),toastr.success('已创建商品')),n('close')}function m(){c.value=!1}async function p(){const e=Number.isFinite(r.value)?Math.floor(r.value):1,t=_.clamp(e,1,5),o=`系统上架了 ${t} 件商品\x3c!--商品必须根据当前背景与人设来生成符合情节逻辑的变量内容，本次必须新增 ${t} 件商品变量--\x3e`;try{await triggerSlash(`/send ${o} || /trigger`),toastr.success(`已请求系统自动生成 ${t} 件商品`),m(),n('close')}catch(e){console.error(e),toastr.error('触发自动创建失败，请稍后重试')}}return(e,t)=>((0,a.openBlock)(),(0,a.createElementBlock)(a.Fragment,null,[(0,a.createVNode)(Y,{title:'创建商城条目',description:'为商城上架新商品，供主角在系统界面中兑换。',onClose:t[5]||(t[5]=e=>n('close'))},{default:(0,a.withCtx)(()=>[(0,a.createElementVNode)('form',mn,[(0,a.createElementVNode)('label',null,[t[7]||(t[7]=(0,a.createElementVNode)('span',null,'物品名称',-1)),(0,a.withDirectives)((0,a.createElementVNode)('input',{'onUpdate:modelValue':t[0]||(t[0]=e=>(0,a.unref)(l).名称=e),required:'',placeholder:'例如：星辉精粹'},null,512),[[a.vModelText,(0,a.unref)(l).名称]])]),(0,a.createElementVNode)('label',null,[t[8]||(t[8]=(0,a.createElementVNode)('span',null,'描述',-1)),(0,a.withDirectives)((0,a.createElementVNode)('textarea',{'onUpdate:modelValue':t[1]||(t[1]=e=>(0,a.unref)(l).描述=e),placeholder:'简述功效与限制'},null,512),[[a.vModelText,(0,a.unref)(l).描述]])]),(0,a.createElementVNode)('label',null,[t[9]||(t[9]=(0,a.createElementVNode)('span',null,'价格(积分)',-1)),(0,a.withDirectives)((0,a.createElementVNode)('input',{'onUpdate:modelValue':t[2]||(t[2]=e=>(0,a.unref)(l).积分价格=e),type:'number',min:'0',required:'',placeholder:'所需积分数'},null,512),[[a.vModelText,(0,a.unref)(l).积分价格,void 0,{number:!0}]])])]),(0,a.createElementVNode)('div',pn,[(0,a.createElementVNode)('button',{type:'button',class:'ghost',onClick:t[3]||(t[3]=e=>n('close'))},'取消'),(0,a.createElementVNode)('button',{type:'button',class:'ghost',onClick:t[4]||(t[4]=e=>c.value=!0)},'自动'),(0,a.createElementVNode)('button',{type:'submit',class:'primary',onClick:u},'上架')])]),_:1}),(0,a.unref)(c)?((0,a.openBlock)(),(0,a.createBlock)(Y,{key:0,title:'自动创建商品',description:'系统会一次性生成多件符合剧情的商品。',onClose:m},{default:(0,a.withCtx)(()=>[(0,a.createElementVNode)('form',fn,[(0,a.createElementVNode)('label',null,[t[10]||(t[10]=(0,a.createElementVNode)('span',null,'创建数量',-1)),(0,a.withDirectives)((0,a.createElementVNode)('input',{'onUpdate:modelValue':t[6]||(t[6]=e=>(0,a.isRef)(r)?r.value=e:null),type:'number',min:'1',max:5,required:''},null,512),[[a.vModelText,(0,a.unref)(r),void 0,{number:!0}]]),(0,a.createElementVNode)('small',null,'范围：1 - '+(0,a.toDisplayString)(5))]),(0,a.createElementVNode)('div',{class:'form-actions'},[(0,a.createElementVNode)('button',{type:'button',class:'ghost',onClick:m},'取消'),(0,a.createElementVNode)('button',{type:'button',class:'primary',onClick:p},'确认生成')])])]),_:1})):(0,a.createCommentVNode)('v-if',!0)],64))}}),bn=(0,y.A)(vn,[['__scopeId','data-v-6ea64b40']]),kn={class:'form-grid'},yn={class:'form-actions'},En=(0,a.defineComponent)({__name:'GrantReward',emits:['close'],setup(e,{emit:t}){const n=t,o=s.z.object({名称:s.z.coerce.string(),描述:s.z.string().default(''),主角评价:s.z.string().default('待评价，需要立即更新'),增加积分:s.z.coerce.number().default(0),类型:s.z.enum(['物品','能力','增益','减益']),持续时间:s.z.string().default('一次性奖励'),触发条件:s.z.string().default('系统发放')}),l=(0,a.ref)({类型:'物品',名称:'',描述:'',主角评价:'待评价，需要立即更新',增加积分:0,持续时间:'永久',触发条件:'一直触发'});async function r(){const e=o.safeDecode(l.value);if(e.error)return toastr.error('填写奖励时出错'),console.error(e.error),void n('close');const t=e.data;if(!t.名称&&!t.增加积分)return void toastr.error('未给予任何奖励');const a=d();t.名称&&('物品'===t.类型?_.set(a.data.主角.物品栏,t.名称,i.shape.主角.shape.物品栏.valueType.decode({描述:t.描述,主角评价:t.主角评价})):'能力'===t.类型?_.set(a.data.主角.持有能力,t.名称,i.shape.主角.shape.持有能力.valueType.decode({描述:t.描述,主角评价:t.主角评价})):_.set(a.data.主角.当前状态,t.名称,i.shape.主角.shape.当前状态.valueType.decode({类型:'增益'===t.类型?'增益':'减益',描述:t.描述,主角评价:t.主角评价,持续时间:t.持续时间||'一次性奖励',触发条件:t.触发条件||'系统发放'}))),t.增加积分>0&&('string'==typeof a.data.系统状态.可用积分&&(a.data.系统状态.可用积分=0),a.data.系统状态.可用积分+=t.增加积分);const r=[];t.名称&&r.push(`类型：${t.类型}`,`名称：${t.名称}`,`描述：${t.描述||'无描述'}`),t.增加积分&&r.push(`增加积分：${t.增加积分}`),a.log('发放了一份奖励'+(r.length?`（${r.join('，')}）`:'')),toastr.success('已发放奖励'),n('close')}return(e,t)=>((0,a.openBlock)(),(0,a.createBlock)(Y,{title:'发布奖励',description:'将奖励发放到主角物品栏，或直接调整系统积分。',onClose:t[7]||(t[7]=e=>n('close'))},{default:(0,a.withCtx)(()=>[(0,a.createElementVNode)('form',kn,[(0,a.createElementVNode)('label',null,[t[9]||(t[9]=(0,a.createElementVNode)('span',null,'奖励类型',-1)),(0,a.withDirectives)((0,a.createElementVNode)('select',{'onUpdate:modelValue':t[0]||(t[0]=e=>(0,a.unref)(l).类型=e)},[...t[8]||(t[8]=[(0,a.createElementVNode)('option',{value:'物品'},'物品',-1),(0,a.createElementVNode)('option',{value:'能力'},'能力',-1),(0,a.createElementVNode)('option',{value:'增益'},'增益',-1),(0,a.createElementVNode)('option',{value:'减益'},'减益',-1)])],512),[[a.vModelSelect,(0,a.unref)(l).类型]])]),(0,a.createElementVNode)('label',null,[t[10]||(t[10]=(0,a.createElementVNode)('span',null,'奖励名称',-1)),(0,a.withDirectives)((0,a.createElementVNode)('input',{'onUpdate:modelValue':t[1]||(t[1]=e=>(0,a.unref)(l).名称=e),required:'',placeholder:'例如：龙鳞护符'},null,512),[[a.vModelText,(0,a.unref)(l).名称]])]),(0,a.createElementVNode)('label',null,[t[11]||(t[11]=(0,a.createElementVNode)('span',null,'描述',-1)),(0,a.withDirectives)((0,a.createElementVNode)('textarea',{'onUpdate:modelValue':t[2]||(t[2]=e=>(0,a.unref)(l).描述=e),placeholder:'效果、来历等'},null,512),[[a.vModelText,(0,a.unref)(l).描述]])]),(0,a.createElementVNode)('label',null,[t[12]||(t[12]=(0,a.createElementVNode)('span',null,'增加积分',-1)),(0,a.withDirectives)((0,a.createElementVNode)('input',{'onUpdate:modelValue':t[3]||(t[3]=e=>(0,a.unref)(l).增加积分=e),type:'number',min:'0',placeholder:'可选，输入数字则增加积分'},null,512),[[a.vModelText,(0,a.unref)(l).增加积分,void 0,{number:!0}]])]),'增益'===(0,a.unref)(l).类型||'减益'===(0,a.unref)(l).类型?((0,a.openBlock)(),(0,a.createElementBlock)(a.Fragment,{key:0},[(0,a.createElementVNode)('label',null,[t[13]||(t[13]=(0,a.createElementVNode)('span',null,'持续时间',-1)),(0,a.withDirectives)((0,a.createElementVNode)('input',{'onUpdate:modelValue':t[4]||(t[4]=e=>(0,a.unref)(l).持续时间=e),placeholder:'例如：3回合、直到战斗结束'},null,512),[[a.vModelText,(0,a.unref)(l).持续时间]])]),(0,a.createElementVNode)('label',null,[t[14]||(t[14]=(0,a.createElementVNode)('span',null,'触发条件',-1)),(0,a.withDirectives)((0,a.createElementVNode)('input',{'onUpdate:modelValue':t[5]||(t[5]=e=>(0,a.unref)(l).触发条件=e),placeholder:'例如：受到攻击时触发'},null,512),[[a.vModelText,(0,a.unref)(l).触发条件]])])],64)):(0,a.createCommentVNode)('v-if',!0),(0,a.createElementVNode)('div',yn,[(0,a.createElementVNode)('button',{type:'button',class:'ghost',onClick:t[6]||(t[6]=e=>n('close'))},'取消'),(0,a.createElementVNode)('button',{type:'submit',class:'primary',onClick:r},'发放')])])]),_:1}))}}),Vn={class:'shop-overlay'},gn={class:'shop-container'},Nn={class:'shop-header'},hn={class:'shop-info'},Bn={class:'shop-balance'},Cn={class:'balance-value'},wn={class:'shop-content'},_n={key:0,class:'shop-empty'},zn={key:1,class:'shop-grid'},Dn=['onClick'],Sn={class:'item-header'},xn={class:'item-name'},Pn={class:'item-price'},$n={class:'price-value'},Tn={class:'item-description'},In=['onClick'],Mn={key:0,class:'info-bubble'},jn=(0,a.defineComponent)({__name:'Shop',emits:['close'],setup(e,{emit:t}){const n=d(),o=(0,a.toRef)(n.data,'商品列表'),l=(0,a.toRef)(n.data.系统状态,'可用积分'),r=t,{activeBubble:c,toggleBubble:s}=re(),i=(0,a.ref)(!1),u=(0,a.ref)(''),m=(0,a.computed)(()=>`确定要下架商品 "${u.value}" 吗？`);function p(){n.log(`商品'${u.value}'已下架'`),_.unset(o.value,u.value),toastr.success('已下架商品'),i.value=!1}function f(e){return 0===Math.floor(e/2)}return(e,t)=>((0,a.openBlock)(),(0,a.createElementBlock)(a.Fragment,null,[(0,a.createElementVNode)('div',Vn,[(0,a.createElementVNode)('div',gn,[(0,a.createElementVNode)('header',Nn,[t[2]||(t[2]=(0,a.createElementVNode)('h2',{class:'shop-title'},'系统商城',-1)),(0,a.createElementVNode)('button',{class:'shop-close',onClick:t[0]||(t[0]=e=>r('close'))},'×')]),(0,a.createElementVNode)('div',hn,[(0,a.createElementVNode)('div',Bn,[t[3]||(t[3]=(0,a.createElementVNode)('span',{class:'balance-label'},'主角可用积分:',-1)),(0,a.createElementVNode)('span',Cn,(0,a.toDisplayString)((0,a.unref)(l)),1)]),t[4]||(t[4]=(0,a.createElementVNode)('div',{class:'shop-hint'},'仅供查看当前上架商品，购买需主角自行决定',-1))]),(0,a.createElementVNode)('div',wn,[0===Object.keys((0,a.unref)(o)).length?((0,a.openBlock)(),(0,a.createElementBlock)('div',_n,[...t[5]||(t[5]=[(0,a.createElementVNode)('div',{class:'empty-icon'},'🏪',-1),(0,a.createElementVNode)('p',null,'商城暂无商品',-1),(0,a.createElementVNode)('p',{class:'empty-hint'},'系统管理员可通过"创建商城"按钮上架商品',-1)])])):((0,a.openBlock)(),(0,a.createElementBlock)('div',zn,[((0,a.openBlock)(!0),(0,a.createElementBlock)(a.Fragment,null,(0,a.renderList)((0,a.unref)(o),(e,n,o)=>((0,a.openBlock)(),(0,a.createElementBlock)('div',{key:n,class:(0,a.normalizeClass)(['shop-item',{affordable:(0,a.unref)(l)>=e.积分价格,active:(0,a.unref)(c)===n,'bubble-top':f(o)}]),onClick:e=>(0,a.unref)(s)(n)},[(0,a.createElementVNode)('div',Sn,[(0,a.createElementVNode)('div',xn,(0,a.toDisplayString)(n),1),(0,a.createElementVNode)('div',Pn,[(0,a.createElementVNode)('span',$n,(0,a.toDisplayString)(e.积分价格),1),t[6]||(t[6]=(0,a.createElementVNode)('span',{class:'price-unit'},'积分',-1))])]),(0,a.createElementVNode)('div',Tn,(0,a.toDisplayString)(e.描述),1),(0,a.createElementVNode)('button',{class:'delist-button',title:'下架商品',onClick:(0,a.withModifiers)(e=>function(e){i.value=!0,u.value=e}(n),['stop'])},'×',8,In),(0,a.unref)(c)===n?((0,a.openBlock)(),(0,a.createElementBlock)('div',Mn,(0,a.toDisplayString)(e.主角评价),1)):(0,a.createCommentVNode)('v-if',!0)],10,Dn))),128))]))])])]),(0,a.unref)(i)?((0,a.openBlock)(),(0,a.createBlock)(ae,{key:0,title:'下架商品',question:(0,a.unref)(m),onCancel:t[1]||(t[1]=e=>i.value=!1),onConfirm:p},null,8,['question'])):(0,a.createCommentVNode)('v-if',!0)],64))}}),Ln=(0,y.A)(jn,[['__scopeId','data-v-75643e83']]),qn={class:'task-overlay'},Un={class:'task-container'},An={class:'task-header'},Fn={class:'task-content'},On={key:0,class:'task-empty'},Rn={key:1,class:'task-list'},Wn={class:'task-item-header'},Kn={class:'task-name'},Gn={class:'task-type-badge'},Hn={class:'task-section'},Jn={class:'task-section-content'},Qn={class:'task-section'},Xn={class:'task-section-content'},Yn={class:'task-footer'},Zn={class:'task-reward'},eo={class:'reward-text'},to={class:'task-penalty'},no={class:'penalty-text'},oo={class:'task-actions'},lo=['onClick'],ao=['onClick'],ro=(0,a.defineComponent)({__name:'TaskList',emits:['close'],setup(e,{emit:t}){const n=d(),o=(0,a.toRef)(n.data,'任务列表'),l=t,r=(0,a.ref)(!1),c=(0,a.ref)(''),s=(0,a.computed)(()=>`确定要删除任务 "${c.value}" 吗？该任务将会消失。`);function i(){n.log(`任务'${c.value}'已消失`),_.unset(o.value,c.value),toastr.success('已删除任务'),r.value=!1}const u=(0,a.ref)(!1),m=(0,a.ref)(''),p=(0,a.computed)(()=>`确定要将任务 "${m.value}" 标记为失败吗？`);function f(){n.log(`任务'${m.value}'被标记为失败！惩罚：${_.get(o.value,m.value).惩罚}`),_.unset(o.value,m.value),toastr.success('已标记任务为失败'),u.value=!1}return(e,t)=>((0,a.openBlock)(),(0,a.createElementBlock)(a.Fragment,null,[(0,a.createElementVNode)('div',qn,[(0,a.createElementVNode)('div',Un,[(0,a.createElementVNode)('header',An,[t[3]||(t[3]=(0,a.createElementVNode)('h2',{class:'task-title'},'任务列表',-1)),(0,a.createElementVNode)('button',{class:'task-close',onClick:t[0]||(t[0]=e=>l('close'))},'×')]),t[9]||(t[9]=(0,a.createElementVNode)('div',{class:'task-info'},[(0,a.createElementVNode)('div',{class:'task-hint'},'主角当前接受的所有任务')],-1)),(0,a.createElementVNode)('div',Fn,[0===Object.keys((0,a.unref)(o)).length?((0,a.openBlock)(),(0,a.createElementBlock)('div',On,[...t[4]||(t[4]=[(0,a.createElementVNode)('div',{class:'empty-icon'},'📝',-1),(0,a.createElementVNode)('p',null,'暂无任务',-1),(0,a.createElementVNode)('p',{class:'empty-hint'},'系统管理员可通过"发布任务"按钮发布新任务',-1)])])):((0,a.openBlock)(),(0,a.createElementBlock)('div',Rn,[((0,a.openBlock)(!0),(0,a.createElementBlock)(a.Fragment,null,(0,a.renderList)((0,a.unref)(o),(e,n)=>((0,a.openBlock)(),(0,a.createElementBlock)('div',{key:n,class:(0,a.normalizeClass)(['task-item',`task-type-${e.类型}`])},[(0,a.createElementVNode)('div',Wn,[(0,a.createElementVNode)('div',Kn,(0,a.toDisplayString)(n),1),(0,a.createElementVNode)('div',Gn,(0,a.toDisplayString)(e.类型),1)]),(0,a.createElementVNode)('div',Hn,[t[5]||(t[5]=(0,a.createElementVNode)('div',{class:'task-section-title'},'任务说明',-1)),(0,a.createElementVNode)('div',Jn,(0,a.toDisplayString)(e.说明),1)]),(0,a.createElementVNode)('div',Qn,[t[6]||(t[6]=(0,a.createElementVNode)('div',{class:'task-section-title'},'任务目标',-1)),(0,a.createElementVNode)('div',Xn,(0,a.toDisplayString)(e.目标),1)]),(0,a.createElementVNode)('div',Yn,[(0,a.createElementVNode)('div',Zn,[t[7]||(t[7]=(0,a.createElementVNode)('span',{class:'reward-label'},'奖励:',-1)),(0,a.createElementVNode)('span',eo,(0,a.toDisplayString)(e.奖励),1)]),(0,a.createElementVNode)('div',to,[t[8]||(t[8]=(0,a.createElementVNode)('span',{class:'penalty-label'},'惩罚:',-1)),(0,a.createElementVNode)('span',no,(0,a.toDisplayString)(e.惩罚),1)])]),(0,a.createElementVNode)('div',oo,[(0,a.createElementVNode)('button',{class:'action-button delete',onClick:e=>function(e){r.value=!0,c.value=e}(n)},'删除',8,lo),(0,a.createElementVNode)('button',{class:'action-button fail',onClick:e=>function(e){u.value=!0,m.value=e}(n)},'失败',8,ao)])],2))),128))]))])])]),(0,a.unref)(r)?((0,a.openBlock)(),(0,a.createBlock)(ae,{key:0,title:'删除任务',question:(0,a.unref)(s),onCancel:t[1]||(t[1]=e=>r.value=!1),onConfirm:i},null,8,['question'])):(0,a.createCommentVNode)('v-if',!0),(0,a.unref)(u)?((0,a.openBlock)(),(0,a.createBlock)(ae,{key:1,title:'标记任务为失败',question:(0,a.unref)(p),onCancel:t[2]||(t[2]=e=>u.value=!1),onConfirm:f},null,8,['question'])):(0,a.createCommentVNode)('v-if',!0)],64))}}),co=(0,y.A)(ro,[['__scopeId','data-v-6477603c']]),so={class:'status-system-wrapper'},io={class:'status-system'},uo={class:'main-content'},mo={class:'character-panel'},po={class:'mobile-section'},fo=['aria-expanded'],vo={class:'chevron'},bo={class:'mobile-section__body'},ko={class:'mobile-section'},yo=['aria-expanded'],Eo={class:'chevron'},Vo={class:'mobile-section__body'},go={class:'mobile-section mobile-only'},No=['aria-expanded'],ho={class:'chevron'},Bo={class:'mobile-section__body'},Co={class:'mobile-section mobile-only'},wo=['aria-expanded'],_o={class:'chevron'},zo={class:'mobile-section__body'},Do={class:'right-panel'},So={class:'mobile-section'},xo=['aria-expanded'],Po={class:'chevron'},$o={class:'mobile-section__body'},To={class:'mobile-section inventory-container'},Io=['aria-expanded'],Mo={class:'chevron'},jo={class:'mobile-section__body'},Lo=(0,a.defineComponent)({__name:'App',setup(e){const t=(0,a.ref)(!1),n=(0,a.ref)(!1),o=(0,a.ref)(!1),l=(0,a.ref)(!1),s=(0,a.ref)(!1),i=(0,a.ref)(!1),u=(0,a.ref)('增益'),p=(0,a.ref)(!1),f=(0,a.toRef)(d(),'data'),v=(0,a.computed)(()=>f.value.世界??{当前地点:'未知地点',当前时间:'未知时间'}),b=(0,a.computed)(()=>f.value.主角??{});function k(e){return'待初始化'===e||void 0===e?'暂无':e}const y=(0,a.computed)(()=>{const e=b.value.能力面板??{};return r.map(t=>({key:t,数值:e[t]?.数值??'--',主角评价:k(e[t]?.主角评价)}))}),{buffList:V,debuffList:g,statusCounts:N}=m(b),h=(0,a.computed)(()=>{const e=b.value.持有能力??{};return'object'!=typeof e||Array.isArray(e)?[]:Object.entries(e).map(([e,t],n)=>({id:`${n}-${e}`,key:e,name:e,描述:t?.描述||'',主角评价:k(t?.主角评价)}))}),B=(0,a.computed)(()=>{const e=b.value.装备栏??{};return['主手','副手','防具','饰品'].map(t=>{const n=e[t];if(n&&'object'==typeof n){const e=n;return{label:t,item:e.装备??e.名称??e.value??'空置',evaluation:k(e.主角评价??e.评价)}}return{label:t,item:n??'空置',evaluation:'暂无'}})}),C=(0,a.computed)(()=>{const e=b.value.物品栏??{};return'object'!=typeof e||Array.isArray(e)?[]:Object.entries(e).map(([e,t],n)=>({id:`${n}-${e}`,key:e,名称:e||'未知物品',描述:t?.描述||'',主角评价:k(t?.主角评价),placeholder:!1}))}),w=(0,a.computed)(()=>v.value.当前时间||(new Date).toLocaleString('zh-CN')),{isMobile:D,sectionOpen:S,toggleSection:x}=function(){const e=(0,a.ref)(!1),t=(0,a.reactive)({info:!1,abilities:!1,equipment:!1,inventory:!1,status:!1});function n(){e.value=window.matchMedia('(max-width: 768px)').matches}return(0,a.onMounted)(()=>{n(),window.addEventListener('resize',n)}),(0,a.onBeforeUnmount)(()=>{window.removeEventListener('resize',n)}),(0,a.watch)(e,e=>{e||Object.keys(t).forEach(e=>{t[e]=!0})}),{isMobile:e,sectionState:t,sectionOpen:function(n){return!e.value||t[n]},toggleSection:function(n){e.value&&(t[n]=!t[n])}}}();return function(e){let t=null;function n(){const t=document.querySelector('.status-system-wrapper'),n=document.querySelector('.status-system');if(!t||!n)return;if(e.value)return n.style.transform='',n.style.width='',void(t.style.height='');const o=t.clientWidth/800;n.style.transform=`scale(${o})`,n.style.transformOrigin='top left',n.style.width='800px';const l=n.offsetHeight*o;t.style.height=`${l}px`}function o(){if(window.frameElement){const e=document.documentElement.scrollHeight;window.frameElement.style.height=`${e}px`}}(0,a.onMounted)(()=>{window.addEventListener('resize',n),setTimeout(()=>{n(),o()},0),t=new ResizeObserver(()=>{n(),o()});const e=document.querySelector('.status-system');e&&t.observe(e)}),(0,a.onBeforeUnmount)(()=>{window.removeEventListener('resize',n),t&&t.disconnect()}),(0,a.watch)(e,()=>{n()})}(D),(0,a.watch)(D,e=>{e&&(i.value=!1,p.value=!1)}),(0,a.watch)(i,e=>{e&&(p.value=!1)}),(0,a.watch)(p,e=>{e&&(i.value=!1)}),(e,r)=>((0,a.openBlock)(),(0,a.createElementBlock)('div',so,[(0,a.createElementVNode)('section',io,[(0,a.createVNode)(E,{'current-time-label':(0,a.unref)(w),location:(0,a.unref)(v).当前地点},null,8,['current-time-label','location']),(0,a.createElementVNode)('div',uo,[(0,a.createElementVNode)('div',mo,[(0,a.createElementVNode)('div',po,[(0,a.createElementVNode)('button',{class:'collapse-toggle','aria-expanded':(0,a.unref)(S)('info'),onClick:r[0]||(r[0]=e=>(0,a.unref)(x)('info'))},[r[19]||(r[19]=(0,a.createElementVNode)('span',null,'角色信息',-1)),(0,a.createElementVNode)('span',vo,(0,a.toDisplayString)((0,a.unref)(S)('info')?'−':'+'),1)],8,fo),(0,a.withDirectives)((0,a.createElementVNode)('div',bo,[(0,a.createVNode)(O,{name:(0,a.unref)(f).主角.姓名,gender:(0,a.unref)(f).主角.性别,age:(0,a.unref)(f).主角.年龄,'appearance-description':(0,a.unref)(b).外貌.描述,'self-evaluation':k((0,a.unref)(b).外貌.主角评价)},null,8,['name','gender','age','appearance-description','self-evaluation'])],512),[[a.vShow,(0,a.unref)(S)('info')]])]),(0,a.createElementVNode)('div',ko,[(0,a.createElementVNode)('button',{class:'collapse-toggle','aria-expanded':(0,a.unref)(S)('abilities'),onClick:r[1]||(r[1]=e=>(0,a.unref)(x)('abilities'))},[r[20]||(r[20]=(0,a.createElementVNode)('span',null,'能力面板',-1)),(0,a.createElementVNode)('span',Eo,(0,a.toDisplayString)((0,a.unref)(S)('abilities')?'−':'+'),1)],8,yo),(0,a.withDirectives)((0,a.createElementVNode)('div',Vo,[(0,a.createVNode)(be,{abilities:(0,a.unref)(y),descriptions:(0,a.unref)(c)},null,8,['abilities','descriptions'])],512),[[a.vShow,(0,a.unref)(S)('abilities')]])]),(0,a.createElementVNode)('div',go,[(0,a.createElementVNode)('button',{class:'collapse-toggle','aria-expanded':(0,a.unref)(S)('status'),onClick:r[2]||(r[2]=e=>(0,a.unref)(x)('status'))},[r[21]||(r[21]=(0,a.createElementVNode)('span',null,'状态',-1)),(0,a.createElementVNode)('span',ho,(0,a.toDisplayString)((0,a.unref)(S)('status')?'−':'+'),1)],8,No),(0,a.withDirectives)((0,a.createElementVNode)('div',Bo,[(0,a.createVNode)(Qe,{'buff-list':(0,a.unref)(V),'debuff-list':(0,a.unref)(g)},null,8,['buff-list','debuff-list'])],512),[[a.vShow,(0,a.unref)(S)('status')]])]),(0,a.createElementVNode)('div',Co,[(0,a.createElementVNode)('button',{class:'collapse-toggle','aria-expanded':(0,a.unref)(S)('held-abilities'),onClick:r[3]||(r[3]=e=>(0,a.unref)(x)('held-abilities'))},[r[22]||(r[22]=(0,a.createElementVNode)('span',null,'持有能力',-1)),(0,a.createElementVNode)('span',_o,(0,a.toDisplayString)((0,a.unref)(S)('held-abilities')?'−':'+'),1)],8,wo),(0,a.withDirectives)((0,a.createElementVNode)('div',zo,[(0,a.createVNode)(_e,{abilities:(0,a.unref)(h)},null,8,['abilities'])],512),[[a.vShow,(0,a.unref)(S)('held-abilities')]])])]),(0,a.createElementVNode)('div',Do,[(0,a.createElementVNode)('div',So,[(0,a.createElementVNode)('button',{class:'collapse-toggle','aria-expanded':(0,a.unref)(S)('equipment'),onClick:r[4]||(r[4]=e=>(0,a.unref)(x)('equipment'))},[r[23]||(r[23]=(0,a.createElementVNode)('span',null,'装备栏',-1)),(0,a.createElementVNode)('span',Po,(0,a.toDisplayString)((0,a.unref)(S)('equipment')?'−':'+'),1)],8,xo),(0,a.withDirectives)((0,a.createElementVNode)('div',$o,[(0,a.createVNode)(lt,{slots:(0,a.unref)(B)},null,8,['slots'])],512),[[a.vShow,(0,a.unref)(S)('equipment')]])]),(0,a.createElementVNode)('div',To,[(0,a.createElementVNode)('button',{class:'collapse-toggle','aria-expanded':(0,a.unref)(S)('inventory'),onClick:r[5]||(r[5]=e=>(0,a.unref)(x)('inventory'))},[r[24]||(r[24]=(0,a.createElementVNode)('span',null,'物品栏',-1)),(0,a.createElementVNode)('span',Mo,(0,a.toDisplayString)((0,a.unref)(S)('inventory')?'−':'+'),1)],8,Io),(0,a.withDirectives)((0,a.createElementVNode)('div',jo,[(0,a.createVNode)(dt,{inventory:(0,a.unref)(C),'is-mobile':(0,a.unref)(D)},null,8,['inventory','is-mobile'])],512),[[a.vShow,(0,a.unref)(S)('inventory')]])])])]),(0,a.createVNode)(Yt,null,{left:(0,a.withCtx)(()=>[(0,a.createVNode)(Mt,{show:(0,a.unref)(i),'onUpdate:show':r[6]||(r[6]=e=>(0,a.isRef)(i)?i.value=e:null),tab:(0,a.unref)(u),'onUpdate:tab':r[7]||(r[7]=e=>(0,a.isRef)(u)?u.value=e:null),'buff-list':(0,a.unref)(V),'debuff-list':(0,a.unref)(g),'buff-count':(0,a.unref)(N).增益,'debuff-count':(0,a.unref)(N).减益},null,8,['show','tab','buff-list','debuff-list','buff-count','debuff-count']),(0,a.createVNode)(Gt,{show:(0,a.unref)(p),'onUpdate:show':r[8]||(r[8]=e=>(0,a.isRef)(p)?p.value=e:null),abilities:(0,a.unref)(h)},null,8,['show','abilities'])]),right:(0,a.withCtx)(()=>[(0,a.createElementVNode)('button',{class:'action-button',type:'button',onClick:r[9]||(r[9]=e=>t.value=!0)},'发布任务'),(0,a.createElementVNode)('button',{class:'action-button',type:'button',onClick:r[10]||(r[10]=e=>n.value=!0)},'查看任务'),(0,a.createElementVNode)('button',{class:'action-button',type:'button',onClick:r[11]||(r[11]=e=>o.value=!0)},'发布奖励'),(0,a.createElementVNode)('button',{class:'action-button',type:'button',onClick:r[12]||(r[12]=e=>l.value=!0)},'创建商品'),(0,a.createElementVNode)('button',{class:'action-button',type:'button',onClick:r[13]||(r[13]=e=>s.value=!0)},'查看商城')]),_:1})]),(0,a.unref)(t)?((0,a.openBlock)(),(0,a.createBlock)(dn,{key:0,onClose:r[14]||(r[14]=e=>t.value=!1)})):(0,a.createCommentVNode)('v-if',!0),(0,a.unref)(o)?((0,a.openBlock)(),(0,a.createBlock)(En,{key:1,onClose:r[15]||(r[15]=e=>o.value=!1)})):(0,a.createCommentVNode)('v-if',!0),(0,a.unref)(l)?((0,a.openBlock)(),(0,a.createBlock)(bn,{key:2,onClose:r[16]||(r[16]=e=>l.value=!1)})):(0,a.createCommentVNode)('v-if',!0),(0,a.unref)(s)?((0,a.openBlock)(),(0,a.createBlock)(Ln,{key:3,onClose:r[17]||(r[17]=e=>s.value=!1)})):(0,a.createCommentVNode)('v-if',!0),(0,a.unref)(n)?((0,a.openBlock)(),(0,a.createBlock)(co,{key:4,onClose:r[18]||(r[18]=e=>n.value=!1)})):(0,a.createCommentVNode)('v-if',!0)]))}});$(async()=>{await waitGlobalInitialized('Mvu');const t=(0,a.createApp)(Lo);t.use(e()),t.mount('#app')});
//# sourceMappingURL=index.js.map</script><style>@import url(https://fontsapi.zeoseven.com/570/main/result.css);
.top-info-bar[data-v-2ba81f26]{background:#333;color:var(--text-primary);padding:8px 20px;display:flex;justify-content:space-between;align-items:center;font-size:12px;position:relative;z-index:2;border-bottom:3px solid var(--border-color)}.info-left[data-v-2ba81f26]{display:flex;gap:20px;align-items:center}.info-right[data-v-2ba81f26]{display:flex;gap:15px;align-items:center;flex:1;justify-content:flex-end}.status-badge[data-v-2ba81f26]{background:var(--bg-input);color:#000;padding:2px 8px;border:1px solid var(--border-color);font-size:10px;min-width:240px;text-align:center;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.status-indicator[data-v-2ba81f26]{width:8px;height:8px;background:var(--bg-success);border:1px solid var(--border-color);border-radius:50%;display:inline-block;margin-right:5px}.status-indicator.offline[data-v-2ba81f26]{background:var(--bg-error)}.status-indicator.warning[data-v-2ba81f26]{background:var(--bg-warning)}@media (max-width:768px){.top-info-bar[data-v-2ba81f26]{padding:6px 12px;font-size:10px}.info-right[data-v-2ba81f26]{flex:none}.status-badge[data-v-2ba81f26]{min-width:auto;max-width:180px;font-size:9px}}
.character-info-card[data-v-5bf17e9a]{background:var(--bg-input);border:2px solid var(--border-color);padding:8px;display:flex;flex-direction:column;gap:10px}.character-header[data-v-5bf17e9a]{display:flex;gap:15px;flex-shrink:0}.character-avatar[data-v-5bf17e9a]{width:70px;height:70px;background:var(--bg-input);border:2px solid var(--border-color);flex-shrink:0;cursor:pointer;position:relative;overflow:hidden;background-size:cover;background-position:center;transition:all .2s ease}.character-avatar[data-v-5bf17e9a]:hover{border-color:#666;opacity:.9}.character-avatar.has-avatar[data-v-5bf17e9a]{background-color:rgba(0,0,0,0)}.character-avatar.uploading[data-v-5bf17e9a]{cursor:wait;opacity:.6}.character-avatar .avatar-placeholder[data-v-5bf17e9a]{width:100%;height:100%;display:flex;align-items:center;justify-content:center;font-size:24px;color:#666;font-weight:bold;-webkit-user-select:none;user-select:none}.character-avatar .avatar-loading[data-v-5bf17e9a]{position:absolute;inset:0;display:flex;align-items:center;justify-content:center;background:rgba(0,0,0,.5);color:#fff;font-size:12px;animation:pulse-5bf17e9a 1.5s ease-in-out infinite}@keyframes pulse-5bf17e9a{0%,100%{opacity:.6}50%{opacity:1}}.character-name[data-v-5bf17e9a]{font-size:18px;color:#000;margin-bottom:8px;text-transform:uppercase;letter-spacing:1px;text-shadow:1px 1px 0px #fff}.character-stats[data-v-5bf17e9a]{display:grid;grid-template-columns:repeat(4,1fr);gap:6px;font-size:11px}.stat-item[data-v-5bf17e9a]{display:flex;justify-content:space-between;align-items:center;background:var(--bg-card);padding:5px 8px;border:1px solid var(--border-color);min-height:24px}.stat-label[data-v-5bf17e9a]{color:#000;font-weight:bold;font-size:10px}.stat-value[data-v-5bf17e9a]{color:#000;font-size:10px}.character-description-section[data-v-5bf17e9a]{display:flex;flex-direction:column;gap:6px;flex-shrink:0}.appearance-description[data-v-5bf17e9a]{background:var(--bg-card);border:1px solid var(--border-color);border-top:2px solid var(--border-color);padding:8px;font-size:10px;color:#000;line-height:1.4;min-height:35px;display:-webkit-box;line-clamp:2;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden;text-overflow:ellipsis}.self-evaluation[data-v-5bf17e9a]{background:#e8e8e8;border:1px solid var(--border-color);border-left:3px solid #666;padding:8px 10px;font-size:10px;color:#333;line-height:1.4;min-height:35px;display:-webkit-box;line-clamp:2;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden;text-overflow:ellipsis}.self-evaluation[data-v-5bf17e9a]::before{content:"「";font-style:normal;font-weight:bold;color:#666;margin-right:2px}@media (max-width:768px){.character-info-card[data-v-5bf17e9a]{padding:8px;gap:8px}.character-avatar[data-v-5bf17e9a]{width:60px;height:60px}.character-name[data-v-5bf17e9a]{font-size:14px;margin-bottom:6px}.character-stats[data-v-5bf17e9a]{grid-template-columns:repeat(2,1fr);gap:5px;font-size:10px}.stat-item[data-v-5bf17e9a]{padding:4px 6px;min-height:22px}}
.pixel-modal[data-v-c2011d9a]{position:fixed;inset:0;z-index:9999;display:flex;align-items:center;justify-content:center;animation:fadeIn-c2011d9a .3s ease-out forwards}.pixel-modal__backdrop[data-v-c2011d9a]{position:absolute;inset:0;background:rgba(0,0,0,.7)}.pixel-modal__panel[data-v-c2011d9a]{position:relative;width:min(320px,92vw);max-height:min(560px,100% - 32px);margin:16px;overflow:hidden;display:flex;flex-direction:column;background:#f5f5f5;border:4px solid #000;padding:0;color:#000;font-family:"Fusion Pixel 12px M latin","Courier New",monospace;box-shadow:8px 8px 0 rgba(0,0,0,.3);animation:slideUp-c2011d9a .3s ease-out forwards}.pixel-modal__header[data-v-c2011d9a]{background:#333;color:#fff;padding:5px 10px;border-bottom:4px solid #000;display:flex;justify-content:space-between;align-items:center}.pixel-modal__title[data-v-c2011d9a]{margin:0;font-size:13px;text-transform:uppercase;letter-spacing:1px;text-shadow:2px 2px 0px #000}.pixel-modal__close[data-v-c2011d9a]{background:#fff;border:2px solid #000;color:#000;width:20px;height:20px;cursor:pointer;font-size:15px;line-height:1;font-family:"Courier New",monospace;transition:all .1s}.pixel-modal__close[data-v-c2011d9a]:hover{background:#ddd}.pixel-modal__close[data-v-c2011d9a]:active{box-shadow:inset 2px 2px 0 rgba(0,0,0,.3)}.pixel-modal__scroll[data-v-c2011d9a]{flex:1;overflow-y:auto;padding:0 6px 8px}.pixel-modal__description[data-v-c2011d9a]{background:#ffc;border:2px solid #f90;padding:5px;margin:6px 10px;font-size:10px;line-height:1.3}.pixel-modal__body[data-v-c2011d9a]{padding:8px 4px 4px}.pixel-modal__body[data-v-c2011d9a] .form-grid{display:flex;flex-direction:column;gap:6px}.pixel-modal__body[data-v-c2011d9a] .form-grid label{display:flex;flex-direction:column;gap:6px;font-size:10px;color:#000}.pixel-modal__body[data-v-c2011d9a] .form-grid label>span:first-child{font-weight:bold;font-size:9px;padding-top:0}.pixel-modal__body[data-v-c2011d9a] .form-grid input,.pixel-modal__body[data-v-c2011d9a] .form-grid textarea,.pixel-modal__body[data-v-c2011d9a] .form-grid select{flex:1;width:100%;padding:4px 6px;border:1px solid #000;background:#fff;color:#000;font-size:10px;font-family:"Fusion Pixel 12px M latin","Courier New",monospace}.pixel-modal__body[data-v-c2011d9a] .form-grid input:focus,.pixel-modal__body[data-v-c2011d9a] .form-grid textarea:focus,.pixel-modal__body[data-v-c2011d9a] .form-grid select:focus{outline:none;background:#ffc;border-color:red}.pixel-modal__body[data-v-c2011d9a] .form-grid input::placeholder,.pixel-modal__body[data-v-c2011d9a] .form-grid textarea::placeholder,.pixel-modal__body[data-v-c2011d9a] .form-grid select::placeholder{color:#999}.pixel-modal__body[data-v-c2011d9a] .form-grid textarea{resize:vertical;min-height:42px}.pixel-modal__body[data-v-c2011d9a] .form-grid select{cursor:pointer}.pixel-modal__body[data-v-c2011d9a] .form-grid__checkbox{display:inline-flex !important;flex-direction:row !important;align-items:stretch !important;gap:0 !important;padding:0 !important;margin:0 auto !important;border:1px solid #000 !important;background:#fff !important;transition:all .1s;cursor:pointer;position:relative;overflow:hidden;height:26px !important;width:auto !important;max-width:-moz-fit-content !important;max-width:fit-content !important}.pixel-modal__body[data-v-c2011d9a] .form-grid__checkbox:hover{background:#f9f9f9 !important}.pixel-modal__body[data-v-c2011d9a] .form-grid__checkbox:active{background:#f0f0f0 !important}.pixel-modal__body[data-v-c2011d9a] .form-grid__checkbox>span:first-child{display:none !important}.pixel-modal__body[data-v-c2011d9a] .form-grid__checkbox input[type=checkbox]{appearance:none !important;-webkit-appearance:none !important;-moz-appearance:none !important;width:26px !important;height:26px !important;min-height:unset !important;border:none !important;border-right:1px solid #000 !important;background:#e8e8e8 !important;cursor:pointer !important;position:relative;flex:none !important;margin:0 !important;padding:0 !important;transition:all .1s}.pixel-modal__body[data-v-c2011d9a] .form-grid__checkbox input[type=checkbox]::before{content:"";position:absolute;left:50%;top:50%;transform:translate(-50%,-50%);width:12px;height:12px;border:1px solid #666;background:#fff}.pixel-modal__body[data-v-c2011d9a] .form-grid__checkbox input[type=checkbox]:checked{background:#000 !important}.pixel-modal__body[data-v-c2011d9a] .form-grid__checkbox input[type=checkbox]:checked::before{background:#000;border-color:#fff}.pixel-modal__body[data-v-c2011d9a] .form-grid__checkbox input[type=checkbox]:checked::after{content:"";position:absolute;left:50%;top:50%;transform:translate(-50%,-50%) translate(-1px,-1px) rotate(45deg);width:5px;height:8px;border:solid #fff;border-width:0 2px 2px 0;z-index:1}.pixel-modal__body[data-v-c2011d9a] .form-grid__checkbox input[type=checkbox]:focus{outline:none}.pixel-modal__body[data-v-c2011d9a] .form-grid__checkbox>span:last-child{flex:1 !important;padding:5px 8px !important;min-width:auto !important;font-weight:normal !important;cursor:pointer !important;-webkit-user-select:none !important;user-select:none !important;display:flex !important;align-items:center !important;font-size:10px !important;color:#000 !important;line-height:1.4 !important}.pixel-modal__body[data-v-c2011d9a] .form-grid__checkbox:focus-within{box-shadow:0 0 0 2px rgba(0,0,0,.15)}.pixel-modal__body[data-v-c2011d9a] .form-actions{display:flex;justify-content:flex-end;gap:5px;margin-top:8px;padding-top:6px;border-top:2px solid #000}.pixel-modal__body[data-v-c2011d9a] .form-actions button{background:#fff;border:2px solid #000;color:#000;padding:4px 10px;font-size:10px;cursor:pointer;font-family:"Fusion Pixel 12px M latin","Courier New",monospace;text-transform:uppercase;transition:all .1s}.pixel-modal__body[data-v-c2011d9a] .form-actions button:hover{background:#ddd}.pixel-modal__body[data-v-c2011d9a] .form-actions button:active{border-width:3px 5px 5px 3px}.pixel-modal__body[data-v-c2011d9a] .form-actions button:disabled{opacity:.5;cursor:not-allowed}.pixel-modal__body[data-v-c2011d9a] .form-actions button.primary{background:#000;color:#fff}.pixel-modal__body[data-v-c2011d9a] .form-actions button.primary:hover{background:#333}.pixel-modal__body[data-v-c2011d9a] .form-actions button.ghost{background:rgba(0,0,0,0);border:2px solid #000}.pixel-modal__body[data-v-c2011d9a] .form-actions button.ghost:hover{background:rgba(0,0,0,.05)}.pixel-modal__scroll[data-v-c2011d9a]::-webkit-scrollbar{height:6px}.pixel-modal__scroll[data-v-c2011d9a]::-webkit-scrollbar-track{background:rgba(0,0,0,.08)}.pixel-modal__scroll[data-v-c2011d9a]{scrollbar-width:thin;scrollbar-color:#7a7a7a rgba(0,0,0,.08)}.pixel-modal__scroll[data-v-c2011d9a]::-webkit-scrollbar-thumb{background:#7a7a7a;border:1px solid #f5f5f5}@keyframes fadeIn-c2011d9a{from{opacity:0}to{opacity:1}}@keyframes slideUp-c2011d9a{from{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}@media (max-width:768px){.pixel-modal__panel[data-v-c2011d9a]{width:100%;max-height:calc(100% - 12px);margin:6px}}
.confirm-modal[data-v-bbb24722]{display:flex;flex-direction:column;gap:8px;font-size:10px;line-height:1.4;color:#000}.confirm-modal__question[data-v-bbb24722]{font-weight:bold;margin:0}.confirm-modal__hint[data-v-bbb24722]{background:#fffbcc;border:2px solid #ffb74d;padding:6px}.confirm-modal__body[data-v-bbb24722]{color:#333}.confirm-modal__actions[data-v-bbb24722]{display:flex;gap:6px;justify-content:flex-end}[data-v-bbb24722] .confirm-button{flex:1;min-width:0;padding:6px 10px;border:2px solid #000;background:#fff;color:#000;cursor:pointer;font-size:10px;font-family:"Fusion Pixel 12px M latin","Courier New",monospace;transition:background .1s}[data-v-bbb24722] .confirm-button.primary{background:#000;color:#fff}[data-v-bbb24722] .confirm-button.ghost{background:#fff;color:#000}[data-v-bbb24722] .confirm-button:hover{background:rgba(0,0,0,.08)}
.abilities-panel[data-v-ccd2e9a4]{background:var(--bg-input);border:2px solid var(--border-color);padding:8px;display:grid;grid-template-columns:repeat(3,1fr);grid-template-rows:repeat(2,minmax(70px,auto));gap:6px;flex:1;min-height:0;align-content:start;position:relative;overflow:visible}.ability-item[data-v-ccd2e9a4]{background:var(--bg-card);border:1px solid var(--border-color);padding:5px;text-align:center;cursor:pointer;transition:all .2s;display:flex;flex-direction:column;justify-content:center;align-items:center;-webkit-user-select:none;user-select:none;touch-action:none;position:relative}.ability-item[data-v-ccd2e9a4]:hover{background:var(--bg-card-hover);border-color:#666}.ability-item.active[data-v-ccd2e9a4]{background:#e3f2fd;border-color:#1976d2;box-shadow:0 0 0 2px rgba(25,118,210,.15)}.ability-item__name[data-v-ccd2e9a4]{font-size:10px;font-weight:bold;color:#000;margin-bottom:3px}.ability-item__value[data-v-ccd2e9a4]{font-size:11px;font-weight:bold;color:#000;margin-bottom:2px}.ability-item__desc[data-v-ccd2e9a4]{font-size:7px;color:#666;line-height:1.1}.ability-bubble[data-v-ccd2e9a4]{position:absolute;top:calc(100% + 8px);left:50%;transform:translateX(-50%);background:#f5f5f5;border:2px solid var(--border-color);padding:8px 10px;font-size:9px;color:#000;white-space:normal;z-index:20;animation:bubblePop-ccd2e9a4 .2s ease-out;max-width:200px;min-width:120px;text-align:left;line-height:1.4;box-shadow:2px 2px 0 rgba(0,0,0,.2);pointer-events:none}.ability-bubble[data-v-ccd2e9a4]::before{content:"";position:absolute;bottom:100%;left:50%;transform:translateX(-50%);width:0;height:0;border-style:solid;border-width:0 6px 6px 6px;border-color:rgba(0,0,0,0) rgba(0,0,0,0) var(--border-color) rgba(0,0,0,0)}.ability-bubble[data-v-ccd2e9a4]::after{content:"";position:absolute;bottom:100%;left:50%;transform:translateX(-50%);width:0;height:0;border-style:solid;border-width:0 5px 5px 5px;border-color:rgba(0,0,0,0) rgba(0,0,0,0) #f5f5f5 rgba(0,0,0,0);margin-bottom:-1px}@media (min-width:769px){.abilities-panel .ability-item:nth-last-child(-n+3) .ability-bubble[data-v-ccd2e9a4]{top:auto;bottom:calc(100% + 8px)}.abilities-panel .ability-item:nth-last-child(-n+3) .ability-bubble[data-v-ccd2e9a4]::before{bottom:auto;top:100%;border-width:6px 6px 0 6px;border-color:var(--border-color) rgba(0,0,0,0) rgba(0,0,0,0) rgba(0,0,0,0)}.abilities-panel .ability-item:nth-last-child(-n+3) .ability-bubble[data-v-ccd2e9a4]::after{bottom:auto;top:100%;border-width:5px 5px 0 5px;border-color:#f5f5f5 rgba(0,0,0,0) rgba(0,0,0,0) rgba(0,0,0,0);margin-bottom:0;margin-top:-1px}}@media (max-width:768px){.abilities-panel[data-v-ccd2e9a4]{grid-template-columns:repeat(2,1fr);overflow:visible}.abilities-panel .ability-item:nth-last-child(-n+2) .ability-bubble[data-v-ccd2e9a4]{top:auto;bottom:calc(100% + 8px)}.abilities-panel .ability-item:nth-last-child(-n+2) .ability-bubble[data-v-ccd2e9a4]::before{bottom:auto;top:100%;border-width:6px 6px 0 6px;border-color:var(--border-color) rgba(0,0,0,0) rgba(0,0,0,0) rgba(0,0,0,0)}.abilities-panel .ability-item:nth-last-child(-n+2) .ability-bubble[data-v-ccd2e9a4]::after{bottom:auto;top:100%;border-width:5px 5px 0 5px;border-color:#f5f5f5 rgba(0,0,0,0) rgba(0,0,0,0) rgba(0,0,0,0);margin-bottom:0;margin-top:-1px}}.ability-edit-field[data-v-ccd2e9a4]{display:flex;flex-direction:column;gap:4px;font-size:10px;color:#000}.ability-edit-field input[data-v-ccd2e9a4]{border:2px solid #000;padding:6px;font-size:12px;font-family:inherit;background:#fff;color:#000;width:100%}.ability-edit-field input[data-v-ccd2e9a4]:focus{outline:none;box-shadow:0 0 0 2px rgba(0,0,0,.2)}@keyframes bubblePop-ccd2e9a4{from{opacity:0;transform:translateX(-50%) translateY(5px)}to{opacity:1;transform:translateX(-50%) translateY(0)}}
.ability-status-panel[data-v-126d59b6]{background:var(--bg-input);border:2px solid var(--border-color);padding:10px;display:flex;flex-direction:column;gap:10px}.ability-status-group[data-v-126d59b6]{display:flex;flex-direction:column;gap:6px}.ability-status-title[data-v-126d59b6]{font-weight:bold;font-size:10px;color:#000}.ability-status-list[data-v-126d59b6]{list-style:none;margin:0;padding:0;display:flex;flex-direction:column;gap:6px}.ability-status-item[data-v-126d59b6]{background:var(--bg-card);border:1px solid var(--border-color);padding:6px;font-size:8px;text-align:left;line-height:1.3;cursor:pointer;-webkit-user-select:none;user-select:none;touch-action:none}.ability-status-name[data-v-126d59b6]{font-weight:bold;font-size:9px;margin-bottom:2px;color:#000}.ability-status-desc[data-v-126d59b6]{font-size:8px;color:#111}.ability-status-eval[data-v-126d59b6]{font-size:8px;color:#222;margin-top:2px}.ability-status-empty[data-v-126d59b6]{font-size:9px;color:#666;text-align:center}
.status-effects-panel[data-v-284fa7b7]{background:var(--bg-input);border:2px solid var(--border-color);display:flex;flex-direction:column}.status-tabs[data-v-284fa7b7]{display:flex;background:#fff;border-top:2px solid var(--border-color);border-bottom:2px solid var(--border-color)}.status-tab[data-v-284fa7b7]{flex:1;padding:8px 0;text-align:center;background:#fff;border:none;border-right:2px solid var(--border-color);font-family:var(--pixel-font);font-size:10px;font-weight:bold;cursor:pointer;transition:color .2s,background .2s;color:#000}.status-tab[data-v-284fa7b7]:last-child{border-right:none}.status-tab[data-v-284fa7b7]:hover{background:#f5f5f5}.status-tab.active[data-v-284fa7b7]{color:#1976d2}.status-content[data-v-284fa7b7]{padding:10px;display:flex;flex-direction:column;gap:6px}.status-effects-list[data-v-284fa7b7]{list-style:none;margin:0;padding:0;display:flex;flex-direction:column;gap:6px}.status-effect-item[data-v-284fa7b7]{background:var(--bg-card);border:1px solid var(--border-color);padding:6px;font-size:8px;text-align:left;line-height:1.3;cursor:pointer;-webkit-user-select:none;user-select:none;touch-action:none;position:relative}.status-effect-name[data-v-284fa7b7]{font-weight:bold;font-size:9px;margin-bottom:2px;color:#000}.status-effect-desc[data-v-284fa7b7]{font-size:8px;color:#111;margin-bottom:3px}.status-effect-eval[data-v-284fa7b7]{font-size:8px;color:#222;margin-bottom:3px}.status-effect-meta[data-v-284fa7b7]{font-size:7px;color:#666;display:flex;flex-direction:column;gap:2px}.status-effects-empty[data-v-284fa7b7]{font-size:9px;color:#666;text-align:center;padding:10px}
.equipment-section[data-v-70286b28]{flex:1;padding:10px;background:var(--bg-card);border-bottom:2px solid var(--border-color);overflow:visible}.section-title[data-v-70286b28]{font-size:11px;font-weight:bold;color:#000;margin-bottom:6px}.equipment-grid[data-v-70286b28]{display:grid;grid-template-columns:1fr 1fr;gap:6px;overflow:visible}.equipment-slot[data-v-70286b28]{background:var(--bg-input);border:1px solid var(--border-color);padding:6px 8px;font-size:9px;text-align:center;cursor:pointer;position:relative;overflow:visible}.equipment-slot.active[data-v-70286b28]{background:#e3f2fd;border-color:#1976d2}.slot-name[data-v-70286b28]{color:#000;font-weight:bold;margin-bottom:2px;font-size:8px}.slot-item[data-v-70286b28]{color:#000;font-size:9px;word-break:break-word}.info-bubble[data-v-70286b28]{position:absolute;bottom:calc(100% + 6px);left:50%;transform:translateX(-50%);background:#f5f5f5;border:2px solid var(--border-color);padding:6px 8px;font-size:8px;color:#000;white-space:normal;z-index:25;animation:bubblePop-70286b28 .2s ease-out;max-width:180px;min-width:120px;text-align:left;line-height:1.3;box-shadow:2px 2px 0 rgba(0,0,0,.2);pointer-events:none}.info-bubble[data-v-70286b28]::before{content:"";position:absolute;top:100%;left:50%;transform:translateX(-50%);width:0;height:0;border-style:solid;border-width:6px 6px 0 6px;border-color:var(--border-color) rgba(0,0,0,0) rgba(0,0,0,0) rgba(0,0,0,0)}.info-bubble[data-v-70286b28]::after{content:"";position:absolute;top:100%;left:50%;transform:translateX(-50%);width:0;height:0;border-style:solid;border-width:5px 5px 0 5px;border-color:#f5f5f5 rgba(0,0,0,0) rgba(0,0,0,0) rgba(0,0,0,0);margin-top:-1px}@keyframes bubblePop-70286b28{from{opacity:0;transform:translateX(-50%) translateY(5px)}to{opacity:1;transform:translateX(-50%) translateY(0)}}@media (max-width:768px){.equipment-section[data-v-70286b28]{padding:10px;border-bottom:none}.equipment-grid[data-v-70286b28]{grid-template-columns:1fr}}
.inventory-section[data-v-6fb3f9cb]{padding:10px 10px 60px;background:var(--bg-card);display:flex;flex-direction:column;flex:none;min-height:auto;width:100%}.inventory-title[data-v-6fb3f9cb]{font-size:11px;font-weight:bold;color:#000;margin-bottom:6px;flex-shrink:0}.inventory-grid[data-v-6fb3f9cb]{flex:none;min-height:200px;max-height:200px;display:grid;grid-template-columns:repeat(2,1fr);gap:6px;grid-auto-rows:94px;overflow-y:auto;overflow-x:hidden;padding-right:4px;margin-bottom:6px}.inventory-grid[data-v-6fb3f9cb]::-webkit-scrollbar{width:4px}.inventory-grid[data-v-6fb3f9cb]::-webkit-scrollbar-track{background:rgba(0,0,0,0)}.inventory-grid[data-v-6fb3f9cb]::-webkit-scrollbar-thumb{background:#000;border-radius:0}.inventory-grid[data-v-6fb3f9cb]{scrollbar-width:thin;scrollbar-color:#000 rgba(0,0,0,0)}.inventory-item[data-v-6fb3f9cb]{background:var(--bg-input);border:1px solid var(--border-color);padding:6px;cursor:pointer;transition:background-color .2s;display:flex;flex-direction:column;justify-content:center;min-height:0;height:100%;position:relative;overflow:visible;z-index:1}.inventory-item.active[data-v-6fb3f9cb]{z-index:100}.inventory-item[data-v-6fb3f9cb]:hover{background:var(--bg-card-hover)}.inventory-item.active[data-v-6fb3f9cb]{background:#e3f2fd;border-color:#1976d2}.inventory-item.placeholder[data-v-6fb3f9cb]{opacity:.5;border-style:dashed;pointer-events:none;cursor:default}.item-name[data-v-6fb3f9cb]{font-size:9px;color:#000;font-weight:bold;margin-bottom:2px;text-align:center}.item-description[data-v-6fb3f9cb]{font-size:7px;color:#666;line-height:1.2;text-align:center;word-wrap:break-word}.info-bubble[data-v-6fb3f9cb]{position:absolute;bottom:calc(100% + 6px);left:50%;transform:translateX(-50%);background:#f5f5f5;border:2px solid var(--border-color);padding:6px 8px;font-size:8px;color:#000;white-space:normal;z-index:25;animation:bubblePop-6fb3f9cb .2s ease-out;max-width:130px;min-width:100px;text-align:left;line-height:1.3;box-shadow:2px 2px 0 rgba(0,0,0,.2);pointer-events:none}.info-bubble[data-v-6fb3f9cb]::before{content:"";position:absolute;top:100%;left:50%;transform:translateX(-50%);width:0;height:0;border-style:solid;border-width:6px 6px 0 6px;border-color:var(--border-color) rgba(0,0,0,0) rgba(0,0,0,0) rgba(0,0,0,0)}.info-bubble[data-v-6fb3f9cb]::after{content:"";position:absolute;top:100%;left:50%;transform:translateX(-50%);width:0;height:0;border-style:solid;border-width:5px 5px 0 5px;border-color:#f5f5f5 rgba(0,0,0,0) rgba(0,0,0,0) rgba(0,0,0,0);margin-top:-1px}.inventory-item.bubble-top .info-bubble[data-v-6fb3f9cb]{bottom:auto;top:calc(100% + 6px)}.inventory-item.bubble-top .info-bubble[data-v-6fb3f9cb]::before{top:auto;bottom:100%;border-width:0 6px 6px 6px;border-color:rgba(0,0,0,0) rgba(0,0,0,0) var(--border-color) rgba(0,0,0,0)}.inventory-item.bubble-top .info-bubble[data-v-6fb3f9cb]::after{top:auto;bottom:100%;border-width:0 5px 5px 5px;border-color:rgba(0,0,0,0) rgba(0,0,0,0) #f5f5f5 rgba(0,0,0,0);margin-top:0;margin-bottom:-1px}@keyframes bubblePop-6fb3f9cb{from{opacity:0;transform:translateX(-50%) translateY(5px)}to{opacity:1;transform:translateX(-50%) translateY(0)}}@media (max-width:768px){.inventory-section[data-v-6fb3f9cb]{border-bottom:none;padding-bottom:20px}.inventory-grid[data-v-6fb3f9cb]{min-height:auto;max-height:none;grid-template-columns:1fr;grid-auto-rows:72px;overflow:visible;padding-right:0}}
.status-effects-trigger[data-v-fc6126d2]{display:flex;gap:8px;align-items:flex-start;position:relative}.status-button[data-v-fc6126d2]{background:rgba(0,0,0,0);border:none;font-family:var(--pixel-font);font-size:10px;font-weight:bold;cursor:pointer;padding:4px 8px;transition:color .2s;color:var(--text-primary);display:flex;align-items:center;gap:4px}.status-button.active[data-v-fc6126d2]{color:#1976d2;text-decoration:underline}.button-icon[data-v-fc6126d2]{font-size:12px}.status-effects-popover[data-v-fc6126d2]{position:absolute;bottom:calc(100% + 10px);left:0;width:320px;background:var(--bg-input);border:3px solid var(--border-color);border-radius:4px;padding:0;box-shadow:4px 4px 0 rgba(0,0,0,.3);z-index:30;animation:popoverFadeIn-fc6126d2 .2s ease-out}@keyframes popoverFadeIn-fc6126d2{from{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}.popover-header[data-v-fc6126d2]{display:flex;justify-content:space-between;align-items:center;font-weight:bold;font-size:11px;padding:10px 12px;background:var(--bg-card);border-bottom:2px solid var(--border-color);color:#000}.popover-close[data-v-fc6126d2]{background:rgba(0,0,0,0);border:none;font-size:16px;line-height:1;cursor:pointer;color:#666;transition:color .2s;padding:0 4px}.popover-close[data-v-fc6126d2]:hover{color:#000}.status-effects-content[data-v-fc6126d2]{display:flex;flex-direction:column;padding:8px}.status-tabs[data-v-fc6126d2]{display:flex;border:2px solid var(--border-color);border-bottom:none;background:#fff;margin-bottom:0;overflow:hidden}.status-tab[data-v-fc6126d2]{flex:1;padding:8px 0;background:#fff;border:none;font-family:var(--pixel-font);font-size:10px;font-weight:bold;cursor:pointer;transition:background-color .2s,color .2s;color:#000;position:relative}.status-tab+.status-tab[data-v-fc6126d2]::before{content:"";position:absolute;left:-1px;top:0;bottom:0;border-left:2px solid var(--border-color)}.status-tab[data-v-fc6126d2]::after{content:"";position:absolute;left:0;right:0;bottom:0;border-bottom:2px solid #000}.status-tab[data-v-fc6126d2]:hover{background:#f5f5f5}.status-tab.active[data-v-fc6126d2]{color:#1976d2}.status-list-content[data-v-fc6126d2]{max-height:280px;overflow-y:auto;padding-right:4px;border:2px solid var(--border-color);border-top:none;padding:12px}.status-list-content[data-v-fc6126d2]::-webkit-scrollbar{width:8px}.status-list-content[data-v-fc6126d2]::-webkit-scrollbar-track{background:var(--bg-card);border-radius:4px;border:1px solid var(--border-color)}.status-list-content[data-v-fc6126d2]::-webkit-scrollbar-thumb{background:#999;border-radius:4px;border:1px solid var(--border-color)}.status-list-content[data-v-fc6126d2]::-webkit-scrollbar-thumb:hover{background:#777}.status-list-content[data-v-fc6126d2]::-webkit-scrollbar-thumb:active{background:#555}.status-list-content[data-v-fc6126d2]{scrollbar-width:thin;scrollbar-color:#999 var(--bg-card)}.popover-empty[data-v-fc6126d2]{margin:0;padding:20px;text-align:center;color:#999;font-size:10px}.status-effects-list[data-v-fc6126d2]{list-style:none;margin:0;padding:0;display:flex;flex-direction:column;gap:8px}.status-effect-item[data-v-fc6126d2]{background:var(--bg-card);border:1px solid var(--border-color);padding:8px;font-size:9px;text-align:left;line-height:1.5;transition:all .2s;cursor:pointer;position:relative;-webkit-user-select:none;user-select:none;touch-action:none}.status-effect-item[data-v-fc6126d2]:hover{background:var(--bg-card-hover);border-color:#666}.status-effect-item.active[data-v-fc6126d2]{background:#e3f2fd;border-color:#1976d2;box-shadow:0 0 0 2px rgba(25,118,210,.15)}.status-effect-name[data-v-fc6126d2]{font-weight:bold;font-size:11px;margin-bottom:6px;color:#000;padding-bottom:5px;border-bottom:1px solid var(--border-color)}.status-effect-desc[data-v-fc6126d2]{font-size:10px;color:#333;margin-bottom:6px;line-height:1.5}.status-effect-meta[data-v-fc6126d2]{font-size:9px;color:#888;display:flex;flex-direction:column;gap:3px;margin-top:6px;padding-top:6px;border-top:1px dashed var(--border-color)}.status-effect-meta span[data-v-fc6126d2]{display:flex;align-items:center;gap:4px}.status-effect-meta span[data-v-fc6126d2]::before{content:"•";color:#aaa}.status-bubble[data-v-fc6126d2]{position:absolute;top:calc(100% + 8px);left:50%;transform:translateX(-50%);background:#f5f5f5;border:2px solid var(--border-color);padding:8px 10px;font-size:9px;color:#000;white-space:normal;z-index:100;animation:bubblePop-fc6126d2 .2s ease-out;max-width:200px;min-width:120px;text-align:left;line-height:1.4;box-shadow:2px 2px 0 rgba(0,0,0,.2);pointer-events:none}.status-bubble[data-v-fc6126d2]::before{content:"";position:absolute;bottom:100%;left:50%;transform:translateX(-50%);width:0;height:0;border-style:solid;border-width:0 6px 6px 6px;border-color:rgba(0,0,0,0) rgba(0,0,0,0) var(--border-color) rgba(0,0,0,0)}.status-bubble[data-v-fc6126d2]::after{content:"";position:absolute;bottom:100%;left:50%;transform:translateX(-50%);width:0;height:0;border-style:solid;border-width:0 5px 5px 5px;border-color:rgba(0,0,0,0) rgba(0,0,0,0) #f5f5f5 rgba(0,0,0,0);margin-bottom:-1px}.status-effect-item.bubble-top .status-bubble[data-v-fc6126d2]{top:auto;bottom:calc(100% + 8px)}.status-effect-item.bubble-top .status-bubble[data-v-fc6126d2]::before{bottom:auto;top:100%;border-width:6px 6px 0 6px;border-color:var(--border-color) rgba(0,0,0,0) rgba(0,0,0,0) rgba(0,0,0,0)}.status-effect-item.bubble-top .status-bubble[data-v-fc6126d2]::after{bottom:auto;top:100%;border-width:5px 5px 0 5px;border-color:#f5f5f5 rgba(0,0,0,0) rgba(0,0,0,0) rgba(0,0,0,0);margin-bottom:0;margin-top:-1px}@keyframes bubblePop-fc6126d2{from{opacity:0;transform:translateX(-50%) scale(0.9)}to{opacity:1;transform:translateX(-50%) scale(1)}}.status-effects-empty[data-v-fc6126d2]{font-size:10px;color:#999;text-align:center;padding:20px}@media (max-width:768px){.status-effects-trigger[data-v-fc6126d2]{display:none}}
.ability-popover-trigger[data-v-3e3db43e]{display:flex;gap:8px;align-items:flex-start;position:relative}.ability-button[data-v-3e3db43e]{background:rgba(0,0,0,0);border:none;font-family:var(--pixel-font);font-size:10px;font-weight:bold;cursor:pointer;padding:4px 8px;transition:color .2s;color:var(--text-primary);display:flex;align-items:center;gap:4px}.ability-button.active[data-v-3e3db43e]{color:#1976d2;text-decoration:underline}.button-icon[data-v-3e3db43e]{font-size:12px}.ability-popover[data-v-3e3db43e]{position:absolute;bottom:calc(100% + 10px);left:0;width:320px;background:var(--bg-input);border:3px solid var(--border-color);border-radius:4px;padding:0;box-shadow:4px 4px 0 rgba(0,0,0,.3);z-index:30;animation:popoverFadeIn-3e3db43e .2s ease-out}@keyframes popoverFadeIn-3e3db43e{from{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}.popover-header[data-v-3e3db43e]{display:flex;justify-content:space-between;align-items:center;font-weight:bold;font-size:11px;padding:10px 12px;background:var(--bg-card);border-bottom:2px solid var(--border-color);color:#000}.popover-close[data-v-3e3db43e]{background:rgba(0,0,0,0);border:none;font-size:16px;line-height:1;cursor:pointer;color:#666;transition:color .2s;padding:0 4px}.popover-close[data-v-3e3db43e]:hover{color:#000}.ability-content[data-v-3e3db43e]{max-height:320px;overflow-y:auto;padding:8px;padding-right:4px}.ability-content[data-v-3e3db43e]::-webkit-scrollbar{width:8px}.ability-content[data-v-3e3db43e]::-webkit-scrollbar-track{background:var(--bg-card);border-radius:4px;border:1px solid var(--border-color)}.ability-content[data-v-3e3db43e]::-webkit-scrollbar-thumb{background:#999;border-radius:4px;border:1px solid var(--border-color)}.ability-content[data-v-3e3db43e]::-webkit-scrollbar-thumb:hover{background:#777}.ability-content[data-v-3e3db43e]::-webkit-scrollbar-thumb:active{background:#555}.ability-content[data-v-3e3db43e]{scrollbar-width:thin;scrollbar-color:#999 var(--bg-card)}.ability-empty[data-v-3e3db43e]{font-size:10px;color:#999;text-align:center;padding:20px;margin:0}.ability-list[data-v-3e3db43e]{list-style:none;margin:0;padding:0;display:flex;flex-direction:column;gap:8px}.ability-item[data-v-3e3db43e]{background:var(--bg-card);border:1px solid var(--border-color);padding:8px;font-size:9px;text-align:left;line-height:1.5;transition:all .2s;cursor:pointer;position:relative;-webkit-user-select:none;user-select:none}.ability-item[data-v-3e3db43e]:hover{background:var(--bg-card-hover);border-color:#666}.ability-item.active[data-v-3e3db43e]{background:#e3f2fd;border-color:#1976d2;box-shadow:0 0 0 2px rgba(25,118,210,.15)}.ability-name[data-v-3e3db43e]{font-weight:bold;font-size:11px;margin-bottom:6px;color:#000;padding-bottom:5px;border-bottom:1px solid var(--border-color)}.ability-desc[data-v-3e3db43e]{font-size:10px;color:#333;line-height:1.5}.ability-bubble[data-v-3e3db43e]{position:absolute;top:calc(100% + 8px);left:50%;transform:translateX(-50%);background:#f5f5f5;border:2px solid var(--border-color);padding:8px 10px;font-size:9px;color:#000;white-space:normal;z-index:100;animation:bubblePop-3e3db43e .2s ease-out;max-width:200px;min-width:120px;text-align:left;line-height:1.4;box-shadow:2px 2px 0 rgba(0,0,0,.2);pointer-events:none}.ability-bubble[data-v-3e3db43e]::before{content:"";position:absolute;bottom:100%;left:50%;transform:translateX(-50%);width:0;height:0;border-style:solid;border-width:0 6px 6px 6px;border-color:rgba(0,0,0,0) rgba(0,0,0,0) var(--border-color) rgba(0,0,0,0)}.ability-bubble[data-v-3e3db43e]::after{content:"";position:absolute;bottom:100%;left:50%;transform:translateX(-50%);width:0;height:0;border-style:solid;border-width:0 5px 5px 5px;border-color:rgba(0,0,0,0) rgba(0,0,0,0) #f5f5f5 rgba(0,0,0,0);margin-bottom:-1px}.ability-item.bubble-top .ability-bubble[data-v-3e3db43e]{top:auto;bottom:calc(100% + 8px)}.ability-item.bubble-top .ability-bubble[data-v-3e3db43e]::before{bottom:auto;top:100%;border-width:6px 6px 0 6px;border-color:var(--border-color) rgba(0,0,0,0) rgba(0,0,0,0) rgba(0,0,0,0)}.ability-item.bubble-top .ability-bubble[data-v-3e3db43e]::after{bottom:auto;top:100%;border-width:5px 5px 0 5px;border-color:#f5f5f5 rgba(0,0,0,0) rgba(0,0,0,0) rgba(0,0,0,0);margin-bottom:0;margin-top:-1px}@keyframes bubblePop-3e3db43e{from{opacity:0;transform:translateX(-50%) scale(0.9)}to{opacity:1;transform:translateX(-50%) scale(1)}}@media (max-width:768px){.ability-popover-trigger[data-v-3e3db43e]{display:none}}
.bottom-bar[data-v-604538ab]{background:#333;color:var(--text-primary);padding:4px 20px;display:flex;justify-content:space-between;align-items:center;font-size:10px;position:relative;z-index:2;border-top:3px solid var(--border-color);flex-shrink:0}.bottom-left[data-v-604538ab]{display:flex;gap:15px;align-items:center}.bottom-right[data-v-604538ab]{display:flex;gap:15px;align-items:center}@media (max-width:768px){.bottom-bar[data-v-604538ab]{flex-shrink:0;flex-direction:column;gap:8px;padding:10px 12px}.bottom-left[data-v-604538ab]{flex-direction:row;flex-wrap:wrap;gap:8px;font-size:9px;width:100%;justify-content:space-between}.bottom-right[data-v-604538ab]{display:grid;grid-template-columns:1fr 1fr 1fr 1fr;gap:8px;width:100%}}
.form-actions.with-auto[data-v-6ea64b40]{display:flex;justify-content:flex-end;gap:12px}

.shop-overlay[data-v-75643e83]{position:fixed;inset:0;z-index:9998;display:flex;align-items:center;justify-content:center;background:rgba(0,0,0,.85);animation:fadeIn-75643e83 .3s ease-out}.shop-container[data-v-75643e83]{width:min(640px,92vw);max-height:min(720px,100% - 32px);margin:16px;background:#f5f5f5;border:4px solid #000;display:flex;flex-direction:column;font-family:"Fusion Pixel 12px M latin","Courier New",monospace;box-shadow:12px 12px 0 rgba(0,0,0,.5);animation:slideUp-75643e83 .3s ease-out}.shop-header[data-v-75643e83]{background:#333;color:#fff;padding:5px 12px;border-bottom:3px solid #000;display:flex;justify-content:space-between;align-items:center}.shop-title[data-v-75643e83]{margin:0;font-size:14px;text-transform:uppercase;letter-spacing:1px;text-shadow:2px 2px 0px #000}.shop-close[data-v-75643e83]{background:#fff;border:2px solid #000;color:#000;width:22px;height:22px;cursor:pointer;font-size:18px;line-height:1;font-family:"Courier New",monospace;transition:all .1s}.shop-close[data-v-75643e83]:hover{background:#ddd}.shop-close[data-v-75643e83]:active{box-shadow:inset 2px 2px 0 rgba(0,0,0,.3)}.shop-info[data-v-75643e83]{background:#ffc;border-bottom:2px solid #000;padding:6px 12px;display:flex;justify-content:space-between;align-items:center;gap:12px}.shop-balance[data-v-75643e83]{display:flex;align-items:center;gap:4px;font-size:11px;font-weight:bold}.balance-label[data-v-75643e83]{color:#666}.balance-value[data-v-75643e83]{color:#d32f2f;font-size:13px;text-shadow:1px 1px 0 #fff}.shop-hint[data-v-75643e83]{font-size:9px;color:#666}.shop-content[data-v-75643e83]{flex:1;overflow-y:auto;padding:10px;min-height:220px}.shop-content[data-v-75643e83]::-webkit-scrollbar{width:6px}.shop-content[data-v-75643e83]::-webkit-scrollbar-track{background:rgba(0,0,0,.08)}.shop-content[data-v-75643e83]::-webkit-scrollbar-thumb{background:#7a7a7a;border:1px solid #f5f5f5}.shop-empty[data-v-75643e83]{display:flex;flex-direction:column;align-items:center;justify-content:center;height:100%;color:#666;text-align:center}.shop-empty .empty-icon[data-v-75643e83]{font-size:44px;margin-bottom:10px;opacity:.3}.shop-empty p[data-v-75643e83]{margin:6px 0;font-size:14px}.shop-empty .empty-hint[data-v-75643e83]{font-size:10px;color:#999}.shop-grid[data-v-75643e83]{display:grid;grid-template-columns:repeat(auto-fill,minmax(200px,1fr));gap:8px}.shop-item[data-v-75643e83]{background:#fff;border:2px solid #000;padding:8px;cursor:pointer;position:relative}.shop-item.active[data-v-75643e83]{border-color:#1976d2}.shop-item:not(.affordable) .item-price .price-value[data-v-75643e83]{color:#d32f2f}.shop-item .delist-button[data-v-75643e83]{position:absolute;bottom:2px;right:2px;width:18px;height:18px;background:#e57373;color:#fff;border:1px solid #000;cursor:pointer;font-size:16px;line-height:15px;font-family:"Courier New",monospace;z-index:10;display:none;transition:all .2s}.shop-item .delist-button[data-v-75643e83]:hover{background:#d32f2f;transform:scale(1.1)}.shop-item:hover .delist-button[data-v-75643e83]{display:block}.item-header[data-v-75643e83]{display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:8px;gap:8px}.item-name[data-v-75643e83]{font-size:13px;font-weight:bold;color:#000;flex:1}.item-price[data-v-75643e83]{display:flex;flex-direction:column;align-items:flex-end;gap:2px}.price-value[data-v-75643e83]{font-size:14px;font-weight:bold;color:#2e7d32}.price-unit[data-v-75643e83]{font-size:9px;color:#666}.item-description[data-v-75643e83]{font-size:10px;color:#333;line-height:1.3;margin-bottom:6px;min-height:32px}.item-evaluation[data-v-75643e83]{background:#fff9c4;border:1px solid #f9a825;padding:5px;font-size:9px;margin-bottom:5px;line-height:1.3}.eval-label[data-v-75643e83]{color:#666;margin-right:4px}.eval-text[data-v-75643e83]{color:#000}.info-bubble[data-v-75643e83]{position:absolute;bottom:calc(100% + 6px);left:50%;transform:translateX(-50%);background:#f5f5f5;border:2px solid var(--border-color);padding:6px 8px;font-size:8px;color:#000;white-space:normal;z-index:25;max-width:180px;min-width:120px;text-align:left;line-height:1.3;box-shadow:2px 2px 0 rgba(0,0,0,.2);pointer-events:none}.info-bubble[data-v-75643e83]::before{content:"";position:absolute;top:100%;left:50%;transform:translateX(-50%);width:0;height:0;border-style:solid;border-width:6px 6px 0 6px;border-color:var(--border-color) rgba(0,0,0,0) rgba(0,0,0,0) rgba(0,0,0,0)}.info-bubble[data-v-75643e83]::after{content:"";position:absolute;top:100%;left:50%;transform:translateX(-50%);width:0;height:0;border-style:solid;border-width:5px 5px 0 5px;border-color:#f5f5f5 rgba(0,0,0,0) rgba(0,0,0,0) rgba(0,0,0,0);margin-top:-1px}.shop-item.bubble-top .info-bubble[data-v-75643e83]{bottom:auto;top:calc(100% + 6px)}.shop-item.bubble-top .info-bubble[data-v-75643e83]::before{top:auto;bottom:100%;border-width:0 6px 6px 6px;border-color:rgba(0,0,0,0) rgba(0,0,0,0) #000 rgba(0,0,0,0)}.shop-item.bubble-top .info-bubble[data-v-75643e83]::after{top:auto;bottom:100%;border-width:0 5px 5px 5px;border-color:rgba(0,0,0,0) rgba(0,0,0,0) #f5f5f5 rgba(0,0,0,0);margin-top:0;margin-bottom:-1px}@keyframes fadeIn-75643e83{from{opacity:0}to{opacity:1}}@keyframes slideUp-75643e83{from{opacity:0;transform:translateY(30px)}to{opacity:1;transform:translateY(0)}}@media (max-width:768px){.shop-container[data-v-75643e83]{width:100%;max-height:calc(100% - 12px);margin:6px;border-width:4px;box-shadow:none}.shop-header[data-v-75643e83]{padding:8px 12px}.shop-title[data-v-75643e83]{font-size:14px;letter-spacing:1px}.shop-close[data-v-75643e83]{width:28px;height:28px;font-size:22px}.shop-info[data-v-75643e83]{flex-direction:column;align-items:flex-start;gap:8px;padding:10px 12px}.shop-balance[data-v-75643e83]{font-size:13px}.balance-value[data-v-75643e83]{font-size:15px}.shop-hint[data-v-75643e83]{font-size:10px}.shop-content[data-v-75643e83]{padding:12px;min-height:300px}.shop-grid[data-v-75643e83]{grid-template-columns:1fr;gap:12px}.shop-item[data-v-75643e83]{padding:12px}.item-name[data-v-75643e83]{font-size:14px}.price-value[data-v-75643e83]{font-size:16px}.item-description[data-v-75643e83]{font-size:11px}.shop-footer[data-v-75643e83]{padding:10px 12px}.footer-button[data-v-75643e83]{padding:8px 24px;font-size:14px}}
.task-overlay[data-v-6477603c]{position:fixed;inset:0;z-index:9998;display:flex;align-items:center;justify-content:center;background:rgba(0,0,0,.85);animation:fadeIn-6477603c .3s ease-out}.task-container[data-v-6477603c]{width:min(640px,92vw);max-height:min(720px,100% - 32px);margin:16px;background:#f5f5f5;border:4px solid #000;display:flex;flex-direction:column;font-family:"Fusion Pixel 12px M latin","Courier New",monospace;box-shadow:12px 12px 0 rgba(0,0,0,.5);animation:slideUp-6477603c .3s ease-out}.task-header[data-v-6477603c]{background:#333;color:#fff;padding:5px 12px;border-bottom:3px solid #000;display:flex;justify-content:space-between;align-items:center}.task-title[data-v-6477603c]{margin:0;font-size:14px;text-transform:uppercase;letter-spacing:1px;text-shadow:2px 2px 0px #000}.task-close[data-v-6477603c]{background:#fff;border:2px solid #000;color:#000;width:22px;height:22px;cursor:pointer;font-size:18px;line-height:1;font-family:"Courier New",monospace;transition:all .1s}.task-close[data-v-6477603c]:hover{background:#ddd}.task-close[data-v-6477603c]:active{box-shadow:inset 2px 2px 0 rgba(0,0,0,.3)}.task-info[data-v-6477603c]{background:#ffc;border-bottom:2px solid #000;padding:6px 12px;display:flex;justify-content:space-between;align-items:center;gap:12px}.task-hint[data-v-6477603c]{font-size:9px;color:#666}.task-content[data-v-6477603c]{flex:1;overflow-y:auto;padding:10px;min-height:220px}.task-content[data-v-6477603c]::-webkit-scrollbar{width:6px}.task-content[data-v-6477603c]::-webkit-scrollbar-track{background:rgba(0,0,0,.08)}.task-content[data-v-6477603c]::-webkit-scrollbar-thumb{background:#7a7a7a;border:1px solid #f5f5f5}.task-empty[data-v-6477603c]{display:flex;flex-direction:column;align-items:center;justify-content:center;height:100%;color:#666;text-align:center}.task-empty .empty-icon[data-v-6477603c]{font-size:44px;margin-bottom:10px;opacity:.3}.task-empty p[data-v-6477603c]{margin:6px 0;font-size:14px}.task-empty .empty-hint[data-v-6477603c]{font-size:10px;color:#999}.task-list[data-v-6477603c]{display:flex;flex-direction:column;gap:12px}.task-item[data-v-6477603c]{background:#fff;border:2px solid #000;padding:10px;padding-bottom:40px;position:relative}.task-item.task-type-主线[data-v-6477603c]{border-left:4px solid #d32f2f}.task-item.task-type-支线[data-v-6477603c]{border-left:4px solid #1976d2}.task-item.task-type-每日[data-v-6477603c]{border-left:4px solid #388e3c}.task-item.task-type-临危受命[data-v-6477603c]{border-left:4px solid #f57c00}.task-item-header[data-v-6477603c]{display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:10px;gap:8px}.task-name[data-v-6477603c]{font-size:14px;font-weight:bold;color:#000;flex:1;text-transform:uppercase;letter-spacing:.5px}.task-type-badge[data-v-6477603c]{background:#000;color:#fff;padding:2px 6px;font-size:9px;border:1px solid #000;text-transform:uppercase}.task-section[data-v-6477603c]{margin-bottom:8px}.task-section-title[data-v-6477603c]{font-size:10px;font-weight:bold;color:#666;margin-bottom:4px;text-transform:uppercase}.task-section-content[data-v-6477603c]{font-size:11px;color:#333;line-height:1.4;padding:6px 8px;background:#f9f9f9;border:1px solid #ddd;white-space:pre-wrap}.task-footer[data-v-6477603c]{display:flex;flex-direction:column;gap:6px;margin-top:8px;padding-top:8px;border-top:1px dashed #ccc}.task-actions[data-v-6477603c]{position:absolute;bottom:8px;right:10px;display:flex;gap:8px}.action-button[data-v-6477603c]{background:#fff;border:1px solid #000;padding:3px 8px;font-size:10px;cursor:pointer;font-family:inherit;transition:all .2s}.action-button[data-v-6477603c]:hover{transform:translateY(-1px);box-shadow:0 2px 4px rgba(0,0,0,.2)}.action-button.delete[data-v-6477603c]{border-color:#757575;color:#757575}.action-button.delete[data-v-6477603c]:hover{background:#f5f5f5;border-color:#000;color:#000}.action-button.fail[data-v-6477603c]{border-color:#d32f2f;color:#d32f2f}.action-button.fail[data-v-6477603c]:hover{background:#d32f2f;color:#fff}.task-reward[data-v-6477603c],.task-penalty[data-v-6477603c]{font-size:10px;display:flex;gap:6px}.task-reward .reward-label[data-v-6477603c]{color:#2e7d32;font-weight:bold}.task-reward .reward-text[data-v-6477603c]{color:#333}.task-penalty .penalty-label[data-v-6477603c]{color:#d32f2f;font-weight:bold}.task-penalty .penalty-text[data-v-6477603c]{color:#333}@keyframes fadeIn-6477603c{from{opacity:0}to{opacity:1}}@keyframes slideUp-6477603c{from{opacity:0;transform:translateY(30px)}to{opacity:1;transform:translateY(0)}}@media (max-width:768px){.task-container[data-v-6477603c]{width:100%;max-height:calc(100% - 12px);margin:6px;border-width:4px;box-shadow:none}.task-header[data-v-6477603c]{padding:8px 12px}.task-title[data-v-6477603c]{font-size:14px;letter-spacing:1px}.task-close[data-v-6477603c]{width:28px;height:28px;font-size:22px}.task-info[data-v-6477603c]{padding:10px 12px}.task-hint[data-v-6477603c]{font-size:10px}.task-content[data-v-6477603c]{padding:12px;min-height:300px}.task-list[data-v-6477603c]{gap:16px}.task-item[data-v-6477603c]{padding:12px}.task-name[data-v-6477603c]{font-size:15px}.task-type-badge[data-v-6477603c]{font-size:10px}.task-section-content[data-v-6477603c]{font-size:12px}}
/*! tailwindcss v4.1.17 | MIT License | https://tailwindcss.com */:root{--bg-dark:#0a0a0a;--bg-darker:#050505;--text-primary:#ffffff;--text-secondary:#cccccc;--border-color:#000000;--bg-panel:#f5f5f5;--bg-input:#ffffff;--bg-card:#f0f0f0;--bg-card-hover:#e0e0e0;--bg-success:#90ee90;--bg-error:#ffb3b3;--bg-highlight:#ffffcc;--bg-warning:#ffe4b3;--pixel-font:'Fusion Pixel 12px M latin','Courier New',monospace}@keyframes fadeIn{from{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}@keyframes pulse{0%,100%{opacity:.6}50%{opacity:1}}@keyframes bubblePop{from{opacity:0;transform:translateX(-50%) translateY(5px)}to{opacity:1;transform:translateX(-50%) translateY(0)}}*{margin:0;padding:0;box-sizing:border-box}.status-system-wrapper{width:100%;background:rgba(0,0,0,0);position:relative}.status-system{width:800px;aspect-ratio:16/9;background:var(--bg-panel);border:4px solid var(--border-color);position:relative;overflow:hidden;display:flex;flex-direction:column;font-family:var(--pixel-font);font-weight:normal;animation:fadeIn .5s ease-out}.status-system::before{content:"";position:absolute;inset:0;background-image:linear-gradient(90deg,rgba(0,0,0,0.03) 1px,transparent 1px),linear-gradient(rgba(0,0,0,0.03) 1px,transparent 1px);background-size:15px 15px;z-index:1;pointer-events:none}.main-content{flex:1;display:flex;position:relative;z-index:2;min-height:0}.character-panel{flex:2;padding:5px;display:flex;flex-direction:column;gap:10px;background:var(--bg-card);min-height:0}.mobile-section{display:flex;flex-direction:column;overflow:visible}.mobile-section__body{display:block;overflow:visible}.inventory-container .mobile-section__body{flex:none;min-height:auto;display:block}.right-panel{flex:1;display:flex;flex-direction:column;border-left:3px solid var(--border-color);min-height:0}.inventory-container{flex:none;min-height:auto}.collapse-toggle{width:100%;display:none;justify-content:space-between;align-items:center;padding:8px 12px;background:#222;color:var(--text-primary);border:none;border-top:2px solid var(--border-color);border-bottom:2px solid var(--border-color);font-size:12px;font-family:var(--pixel-font);margin:0}.action-button{background:var(--bg-input);color:#000;border:2px solid var(--border-color);padding:4px 12px;font-family:var(--pixel-font);font-size:9px;cursor:pointer;transition:all .1s}.action-button:hover{background:#ddd}.action-button:active{border-width:2px 4px 2px 2px}.mobile-section.mobile-only{display:none}@media (max-width:768px){.status-system-wrapper{width:100%;background:rgba(0,0,0,0);display:flex;justify-content:center;align-items:center}.status-system{max-width:100%;min-height:auto;width:100% !important;aspect-ratio:unset;height:auto;transform:none !important}.main-content{flex-direction:column;overflow-y:visible;overflow-x:hidden;flex:0 1 auto}.character-panel{flex:none;border-bottom:2px solid var(--border-color);padding:0;gap:0;min-height:0;height:auto}.right-panel{flex:none;flex-direction:column;border-left:none;border-top:none;padding:0;min-height:0;height:auto}.collapse-toggle{display:flex;margin:0;cursor:pointer;border-top:none}.mobile-section:first-child .collapse-toggle{border-top:2px solid var(--border-color)}.mobile-section{margin-bottom:0;border-bottom:2px solid var(--border-color);flex-shrink:0}.mobile-section:last-child{border-bottom:none}.mobile-section__body{padding:10px;flex-shrink:1;display:block}.mobile-section__body[style*="display: none"]{display:none !important;height:0;padding:0;overflow:hidden}.mobile-section__body>*{margin:0}.mobile-section.mobile-only{display:flex}.action-button{padding:10px 8px;font-size:9px;width:100%;text-align:center}.action-button:nth-child(1),.action-button:nth-child(2){grid-column:span 1}.action-button:nth-child(3){grid-column:span 2}.action-button:nth-child(4),.action-button:nth-child(5){grid-column:span 2}}

/*# sourceMappingURL=main.css.map*/</style></head><body><div id="app"></div></body>