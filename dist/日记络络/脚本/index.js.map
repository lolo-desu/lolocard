{"version":3,"file":"index.js","mappings":"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","sources":["src://tavern_helper_template/external var \"z\"","src://tavern_helper_template/src/æ—¥è®°ç»œç»œ/schema.ts","src://tavern_helper_template/src/æ—¥è®°ç»œç»œ/è„šæœ¬/misc/å˜é‡ç»“æ„.ts","src://tavern_helper_template/src/æ—¥è®°ç»œç»œ/è„šæœ¬/misc/æŒ‰é’®.ts","src://tavern_helper_template/src/æ—¥è®°ç»œç»œ/è„šæœ¬/constant.ts","src://tavern_helper_template/external var \"Vue\"","src://tavern_helper_template/src/æ—¥è®°ç»œç»œ/è„šæœ¬/store.ts","src://tavern_helper_template/src/æ—¥è®°ç»œç»œ/è„šæœ¬/é€‰æ‹©æ¡†/RoleplayOptions.vue","webpack://tavern_helper_template/src/æ—¥è®°ç»œç»œ/è„šæœ¬/é€‰æ‹©æ¡†/RoleplayOptions.vue?1c3a","src://tavern_helper_template/src/æ—¥è®°ç»œç»œ/è„šæœ¬/é€‰æ‹©æ¡†/index.ts","src://tavern_helper_template/src/æ—¥è®°ç»œç»œ/è„šæœ¬/é€‰æ‹©æ¡†/style.ts","src://tavern_helper_template/src/æ—¥è®°ç»œç»œ/è„šæœ¬/index.ts","src://tavern_helper_template/src/æ—¥è®°ç»œç»œ/è„šæœ¬/misc/æ›´æ–°è§’è‰²å¡.ts","src://tavern_helper_template/src/æ—¥è®°ç»œç»œ/è„šæœ¬/misc/æ ·å¼åŠ è½½.ts","src://tavern_helper_template/src/æ—¥è®°ç»œç»œ/è„šæœ¬/misc/èµ„æºé¢„è½½.ts"],"sourcesContent":["const __WEBPACK_NAMESPACE_OBJECT__ = z;","export const Schema = z\n    .object({\n    ä¸‹ä¸€å›åˆç•Œé¢é€‰æ‹©: z.enum(['çº¯æ–‡å­—å°¾é™„ç«‹ç»˜', 'å±•ç¤ºæ—¥è®°', 'galgameSFW', 'galgameNSFW']).prefault('çº¯æ–‡å­—å°¾é™„ç«‹ç»˜'),\n    ä¸–ç•Œ: z\n        .object({\n        å½“å‰æ—¶é—´: z.templateLiteral([z.coerce.number(), ':', z.coerce.number()]),\n        _å½“å‰æ—¶é—´é˜¶æ®µ: z.enum(['å‡Œæ™¨', 'æ—©æ™¨', 'ä¸Šåˆ', 'ä¸­åˆ', 'ä¸‹åˆ', 'æ™šä¸Š', 'æ·±å¤œ']).optional(),\n        å½“å‰æ—¥æœŸ: z.string(),\n        å½“å‰æ˜ŸæœŸ: z.templateLiteral([z.literal('æ˜ŸæœŸ'), z.enum(['ä¸€', 'äºŒ', 'ä¸‰', 'å››', 'äº”', 'å…­', 'æ—¥'])]),\n        æ˜¯å¦éœ€è¦ä¸Šå­¦: z.boolean().prefault(true),\n    })\n        .transform(data => {\n        const minutes = data.å½“å‰æ—¶é—´\n            .split(':')\n            .map(Number)\n            .reduce((sum, current) => sum * 60 + current, 0);\n        if (minutes < 5 * 60) {\n            data._å½“å‰æ—¶é—´é˜¶æ®µ = 'å‡Œæ™¨';\n        }\n        else if (minutes < 6 * 60) {\n            data._å½“å‰æ—¶é—´é˜¶æ®µ = 'æ—©æ™¨';\n        }\n        else if (minutes < 12 * 60) {\n            data._å½“å‰æ—¶é—´é˜¶æ®µ = 'ä¸Šåˆ';\n        }\n        else if (minutes < 14 * 60) {\n            data._å½“å‰æ—¶é—´é˜¶æ®µ = 'ä¸­åˆ';\n        }\n        else if (minutes < 17 * 60) {\n            data._å½“å‰æ—¶é—´é˜¶æ®µ = 'ä¸‹åˆ';\n        }\n        else if (minutes < 20 * 60) {\n            data._å½“å‰æ—¶é—´é˜¶æ®µ = 'æ™šä¸Š';\n        }\n        else {\n            data._å½“å‰æ—¶é—´é˜¶æ®µ = 'æ·±å¤œ';\n        }\n        if (data.å½“å‰æ˜ŸæœŸ === 'æ˜ŸæœŸå…­' || data.å½“å‰æ˜ŸæœŸ === 'æ˜ŸæœŸæ—¥') {\n            data.æ˜¯å¦éœ€è¦ä¸Šå­¦ = false;\n        }\n        return data;\n    }),\n    ä¸»çº¿äº‹ä»¶: z\n        .discriminatedUnion('å½“å‰çŠ¶æ€', [\n        z.object({\n            å½“å‰çŠ¶æ€: z.literal('æ— æ³•è§¦å‘'),\n        }),\n        z.object({\n            å½“å‰çŠ¶æ€: z.literal('å†·å´ä¸­'),\n            å‰©ä½™å†·å´å›åˆæ•°: z.coerce.number().nonnegative().prefault(20),\n        }),\n        z.object({\n            å½“å‰çŠ¶æ€: z.literal('è¿›è¡Œä¸­'),\n            å½“å‰é˜¶æ®µ: z.enum(['å¼•å…¥', 'å‘å±•', 'é«˜æ½®', 'ç»“å±€']).prefault('å¼•å…¥'),\n            ä¸»é¢˜: z.string(),\n            æè¿°: z.string(),\n            å¤§çº²: z.object({\n                å¼•å…¥: z.string(),\n                å‘å±•: z.string(),\n                é«˜æ½®: z.string(),\n                ç»“å±€: z.string(),\n            }),\n        }),\n    ])\n        .prefault({\n        å½“å‰çŠ¶æ€: 'æ— æ³•è§¦å‘',\n    }),\n    ç»œç»œ: z.object({\n        äº²å¯†åº¦: z.coerce.number().transform(v => _.clamp(v, 0, 100)),\n        é˜…è¯»æ—¥è®°æ•°é‡: z.coerce.number().nonnegative().prefault(0),\n        æ‹¥æœ‰è”ç³»æ–¹å¼: z.boolean().prefault(false),\n    }),\n})\n    .transform(data => {\n    if (data.ç»œç»œ.äº²å¯†åº¦ < 50) {\n        data.ä¸»çº¿äº‹ä»¶.å½“å‰çŠ¶æ€ = 'æ— æ³•è§¦å‘';\n    }\n    else if (data.ä¸»çº¿äº‹ä»¶.å½“å‰çŠ¶æ€ === 'æ— æ³•è§¦å‘') {\n        data.ä¸»çº¿äº‹ä»¶ = { å½“å‰çŠ¶æ€: 'å†·å´ä¸­', å‰©ä½™å†·å´å›åˆæ•°: 0 };\n    }\n    return data;\n});\n","import { registerMvuSchema } from 'https://testingcf.jsdelivr.net/gh/StageDog/tavern_resource/dist/util/mvu_zod.js';\nimport { Schema } from '../../schema';\n\n$(() => {\n  registerMvuSchema(Schema);\n});\n","async function delete_qr() {\n  const qrs: string[] = JSON.parse(await triggerSlash('/qr-set-list'));\n  const expected_qr = 'çº¯ç™½è‰²çš„å›å“';\n  if (qrs.includes(expected_qr)) {\n    triggerSlash(`/qr-set-delete ${expected_qr}`);\n  }\n}\n\ninterface Button {\n  name: string;\n  function: (() => void) | (() => Promise<void>);\n}\n\nconst buttons: Button[] = [\n  {\n    name: 'ğŸ•›åº¦è¿‡',\n    function: async () => {\n      const data = {\n        æ™¨é—´: \"å…ˆæå†™ç»“æŸå½“å‰åœºæ™¯çš„å‰§æƒ…å†å¿«é€Ÿå°†æ—¶é—´è°ƒæ•´åˆ°ä¸‹ä¸ªæ™¨é—´\\n<UpdateVariable>\\n_.set('ä¸–ç•Œ.å½“å‰æ—¶é—´é˜¶æ®µ', 1);\\n</UpdateVariable>\",\n        è¯¾ä¸Š: \"å…ˆæå†™ç»“æŸå½“å‰åœºæ™¯çš„å‰§æƒ…å†å¿«é€Ÿå°†æ—¶é—´è°ƒæ•´åˆ°ä¸‹ä¸ªè¯¾ä¸Š\\n<UpdateVariable>\\n_.set('ä¸–ç•Œ.å½“å‰æ—¶é—´é˜¶æ®µ', 18);\\n</UpdateVariable>\",\n        åˆä¼‘: \"å…ˆæå†™ç»“æŸå½“å‰åœºæ™¯çš„å‰§æƒ…å†å¿«é€Ÿå°†æ—¶é—´è°ƒæ•´åˆ°ä¸‹ä¸ªåˆä¼‘\\n<UpdateVariable>\\n_.set('ä¸–ç•Œ.å½“å‰æ—¶é—´é˜¶æ®µ', 32);\\n</UpdateVariable>\",\n        æ”¾å­¦å:\n          \"å…ˆæå†™ç»“æŸå½“å‰åœºæ™¯çš„å‰§æƒ…å†å¿«é€Ÿå°†æ—¶é—´è°ƒæ•´åˆ°ä¸‹ä¸ªæ”¾å­¦å\\n<UpdateVariable>\\n_.set('ä¸–ç•Œ.å½“å‰æ—¶é—´é˜¶æ®µ', 49);\\n</UpdateVariable>\",\n        å¤œé—´: \"å…ˆæå†™ç»“æŸå½“å‰åœºæ™¯çš„å‰§æƒ…å†å¿«é€Ÿå°†æ—¶é—´è°ƒæ•´åˆ°ä¸‹ä¸ªå¤œé—´\\n<UpdateVariable>\\n_.set('ä¸–ç•Œ.å½“å‰æ—¶é—´é˜¶æ®µ', 66);\\n</UpdateVariable>\",\n        å‡æ—¥: \"å…ˆæå†™ç»“æŸå½“å‰åœºæ™¯çš„å‰§æƒ…å†å¿«é€Ÿå°†æ—¶é—´è°ƒæ•´åˆ°ä¸‹ä¸ªå‡æ—¥\\n<UpdateVariable>\\n_.set('ä¸–ç•Œ.å½“å‰æ—¶é—´é˜¶æ®µ', 83);\\n</UpdateVariable>\",\n        ç¬¬äºŒå¤©:\n          \"å…ˆæå†™ç»“æŸå½“å‰åœºæ™¯çš„å‰§æƒ…å†å¿«é€Ÿå°†æ—¶é—´è°ƒæ•´åˆ°ç¬¬äºŒå¤©ï¼Œå¹¶è°ƒæ•´å½“å‰æ—¶é—´é˜¶æ®µå˜é‡åˆ°æ¥ä¸‹æ¥æ•…äº‹æƒ…èŠ‚æœ€æœ‰æ„ä¹‰çš„æ—¶é—´ï¼Œä¸‹ä¸€æ¬¡å“åº”çš„æ—¶é—´é˜¶æ®µå˜é‡è°ƒæ•´æ²¡æœ‰ä»»ä½•é™åˆ¶\\n<UpdateVariable>\\n_.set('ä¸–ç•Œ.å½“å‰æ—¶é—´é˜¶æ®µ', 1);\\n</UpdateVariable>\",\n      };\n\n      const time = await triggerSlash(`/buttons labels=${JSON.stringify(Object.keys(data))} æ—¶é—´æ¥åˆ°äº†...`);\n      if (!_.has(data, time)) {\n        return;\n      }\n\n      await triggerSlash(`/send ${data[time as keyof typeof data]} || /trigger`);\n    },\n  },\n  {\n    name: 'ğŸ—ºï¸åœ°ç‚¹',\n    function: async () => {\n      const data: Record<string, { æ—ç™½: string; åœ°ç‚¹: string[] }> = {\n        ä½å®…: { æ—ç™½: 'å›å®¶ï¼', åœ°ç‚¹: ['ä½æ‰€ç„å…³', 'ä½æ‰€å®¢å…', 'æˆ¿é—´'] },\n        å­¦æ ¡: {\n          æ—ç™½: 'å»å­¦æ ¡å—...',\n          åœ°ç‚¹: ['ä¸Šå­¦è·¯ä¸Š', 'å­¦æ ¡æ•™å­¦æ¥¼æ­£é—¨å‰', 'æ•™å®¤', 'å­¦æ ¡ä¸­åº­', 'å­¦æ ¡å¤–ä¾§æ¥¼æ¢¯', 'å­¦æ ¡å±‹é¡¶'],\n        },\n        åŸé•‡ä¸è¡—é“: {\n          æ—ç™½: 'å»é€›é€›å‘¢...',\n          åœ°ç‚¹: ['åŸé•‡è¡—é“ä¸Š', 'ä½å®…è¡—', 'å•†åº—è¡—', 'æ‹±å»Šå•†åº—è¡—', 'ç¹åå•†ä¸šè¡—', 'åŸå¸‚ä¸­çš„é“è·¯é“å£'],\n        },\n        å•†ä¸šè®¾æ–½: {\n          æ—ç™½: 'å»çº¦ä¼šå—w...',\n          åœ°ç‚¹: [\n            'ä¾¿åˆ©åº—å†…',\n            'ä¹¦åº—å†…',\n            'å’–å•¡å…',\n            'å®¶åº­é¤å…',\n            'è´­ç‰©ä¸­å¿ƒ',\n            'è´­ç‰©ä¸­å¿ƒäºŒå±‚',\n            'ç¾æœ¯é¦†',\n            'åœ°é“ç«™å†…',\n            'åœ°é“å†…',\n            'åº™ä¼šå°åƒè¡—',\n          ],\n        },\n        æˆ·å¤–: {\n          æ—ç™½: 'é”»ç‚¼èº«ä½“...?',\n          åœ°ç‚¹: ['å…¬å›­', 'å…¬å›­å‡‰äº­', 'å…¬å›­å•†åº—äº­', 'æ²³æ—', 'æµ·æ»©'],\n        },\n      };\n\n      const place = await triggerSlash(`/buttons labels=${JSON.stringify(Object.keys(data))} {{user}}å°†åŠ¨èº«å‰å¾€...`);\n      if (!_.has(data, place)) {\n        return;\n      }\n\n      const { æ—ç™½, åœ°ç‚¹ } = data[place];\n      const subplace = await triggerSlash(`/buttons labels=${JSON.stringify(åœ°ç‚¹)} <small>${æ—ç™½}<small>`);\n      if (!åœ°ç‚¹.includes(subplace)) {\n        return;\n      }\n\n      triggerSlash(\n        `/send <!--äºæœ¬æ¬¡å“åº”éœ€è¦æå†™ç»“æŸå½“å‰åœºæ™¯çš„å‰§æƒ…å†å†™å‡ºç†ç”±å‰å¾€ä¸‹ä¸€ä¸ªåœ°ç‚¹-->[ç§»åŠ¨] {{user}}å‰å¾€äº†${subplace}\\n<UpdateVariable>\\n_.set('ä¸–ç•Œ.ä¸‹æ¬¡å“åº”ç•Œé¢é€‰æ‹©åˆ¤æ–­', 0);\\n</UpdateVariable> || /trigger`,\n      );\n    },\n  },\n];\n\nexport function initButtons() {\n  delete_qr();\n  buttons.forEach(button => eventOn(getButtonEvent(button.name), button.function));\n  appendInexistentScriptButtons(buttons.map(button => ({ name: button.name, visible: true })));\n  return {\n    destroy: () => replaceScriptButtons(getScriptButtons().filter(button => buttons.some(b => b.name === button.name))),\n  };\n}\n","export const CHARACTER_NAME = 'ç™½åŒ–è“æŸ“çš„æ—¥è®°æœ¬' as const;\nexport const WORLDBOOK_NAME = 'ä¸Šé”çš„æ—¥è®°æœ¬' as const;\n","const __WEBPACK_NAMESPACE_OBJECT__ = Vue;","import { WORLDBOOK_NAME } from './constant';\nconst Config = z.object({\n    ä¸»è§’æ€§åˆ«: z.enum(['ç”·', 'å¥³']).prefault('ç”·'),\n    æ ·å¼ä¸»é¢˜: z.enum(['æš—è‰²', 'äº®è‰²']).prefault('æš—è‰²'),\n    é€‰æ‹©æ¡†è§¦å‘æ–¹å¼: z.enum(['ç›´æ¥å‘é€', 'è¦†ç›–è¾“å…¥']).prefault('ç›´æ¥å‘é€'),\n});\nexport const useConfigStore = defineStore('config', errorCatched(() => {\n    const config = ref(Config.parse({}));\n    const reloadConfig = async () => {\n        const worldbook = await getWorldbook(WORLDBOOK_NAME);\n        const getEntryState = (name) => worldbook.find(entry => entry.name.includes(name))?.enabled ?? false;\n        const old_confg = klona(config.value);\n        const new_config = Config.parse({\n            ä¸»è§’æ€§åˆ«: getEntryState('ä¸»è§’æ€§åˆ«') ? 'ç”·' : 'å¥³',\n            æ ·å¼ä¸»é¢˜: getEntryState('æ ·å¼ä¸»é¢˜') ? 'æš—è‰²' : 'äº®è‰²',\n            é€‰æ‹©æ¡†è§¦å‘æ–¹å¼: getEntryState('é€‰æ‹©æ¡†è§¦å‘æ–¹å¼') ? 'ç›´æ¥å‘é€' : 'è¦†ç›–è¾“å…¥',\n        });\n        if (!_.isEqual(new_config, old_confg)) {\n            config.value = klona(new_config);\n        }\n        insertOrAssignVariables(klona(new_config), { type: 'chat' });\n    };\n    const _wait_init = reloadConfig();\n    eventOn(tavern_events.WORLDINFO_UPDATED, async (lorebook) => {\n        if (lorebook === WORLDBOOK_NAME) {\n            await reloadConfig();\n        }\n    });\n    eventOn(tavern_events.CHAT_CHANGED, async () => {\n        await reloadConfig();\n    });\n    return { config: readonly(config), _wait_init };\n}));\n","import { defineComponent as _defineComponent } from 'vue';\nimport { renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, createElementVNode as _createElementVNode } from \"vue\";\nconst _hoisted_1 = { class: \"roleplay_options\" };\nconst _hoisted_2 = { class: \"roleplay_options_back\" };\nconst _hoisted_3 = [\"onClick\"];\nconst _hoisted_4 = { class: \"roleplay_options_title\" };\nconst _hoisted_5 = { class: \"roleplay_options_content\" };\nimport { useConfigStore } from '../store';\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'RoleplayOptions',\n    props: {\n        messageId: {},\n        options: {}\n    },\n    setup(__props) {\n        const props = __props;\n        const store = useConfigStore();\n        async function handleClick(item) {\n            if (getLastMessageId() !== props.messageId) {\n                return;\n            }\n            switch (store.config.é€‰æ‹©æ¡†è§¦å‘æ–¹å¼) {\n                case 'ç›´æ¥å‘é€':\n                    triggerSlash(`/send ${item.content} || /trigger`);\n                    break;\n                case 'è¦†ç›–è¾“å…¥':\n                    triggerSlash(`/setinput ${item.content}`);\n                    break;\n            }\n        }\n        return (_ctx, _cache) => {\n            return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n                _createElementVNode(\"div\", _hoisted_2, [\n                    (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(__props.options, (option) => {\n                        return (_openBlock(), _createElementBlock(\"div\", {\n                            key: option.title,\n                            class: \"roleplay_options_item\",\n                            tabindex: \"1\",\n                            onClick: ($event) => (handleClick(option))\n                        }, [\n                            _createElementVNode(\"span\", _hoisted_4, [\n                                _createElementVNode(\"strong\", null, _toDisplayString(option.title), 1 /* TEXT */)\n                            ]),\n                            _cache[0] || (_cache[0] = _createElementVNode(\"hr\", { class: \"roleplay_options_hr\" }, null, -1 /* CACHED */)),\n                            _createElementVNode(\"span\", _hoisted_5, _toDisplayString(option.content), 1 /* TEXT */)\n                        ], 8 /* PROPS */, _hoisted_3));\n                    }), 128 /* KEYED_FRAGMENT */))\n                ])\n            ]));\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./RoleplayOptions.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./RoleplayOptions.vue?vue&type=script&setup=true&lang=ts\"\n\nconst __exports__ = script;\n\nexport default __exports__","import RoleplayOptions from './RoleplayOptions.vue';\nimport { injectStyle } from './style';\nconst apps = new Map();\nconst TAG = '<roleplay_options>';\nconst REGEX = /<(roleplay_options)>\\s*(?:```.*\\n)?((?:(?!<\\1>)[\\s\\S])*?)(?:\\n```)?\\s*<\\/\\1>/im;\nasync function renderOneMessage(message_id) {\n    const chat_messages = getChatMessages(message_id);\n    if (chat_messages.length === 0) {\n        return;\n    }\n    const message = chat_messages[0].message ?? '';\n    const match = message.match(REGEX);\n    if (!match) {\n        return;\n    }\n    const numbered_message_id = Number(message_id);\n    apps.get(numbered_message_id)?.unmount();\n    const $mes_text = retrieveDisplayedMessage(numbered_message_id);\n    const $to_render = $mes_text.find(`pre:contains(\"${TAG}\")`);\n    if ($to_render.length > 0) {\n        const $th_render = $to_render.parent('.TH-render');\n        if ($th_render.length > 0) {\n            $th_render.addClass('hidden!');\n        }\n        else {\n            $to_render.addClass('hidden!');\n        }\n        const app = createApp(RoleplayOptions, {\n            messageId: numbered_message_id,\n            options: [...match[2].matchAll(/(.+?)[:ï¼š]\\s*(.+)/gm)].map(match => ({\n                title: match[1],\n                content: match[2].replace(/^\\$\\{(.+)\\}$/, '$1').replace(/^ã€Œ(.+)ã€$/, '$1'),\n            })),\n        }).use(getActivePinia());\n        apps.set(numbered_message_id, app);\n        const possible_div = $mes_text.find(`div[script_id=\"${getScriptId()}\"]`);\n        app.mount(possible_div.length > 0 ? possible_div[0] : $('<div>').attr('script_id', getScriptId()).appendTo($mes_text)[0]);\n    }\n}\nasync function renderAllMessage() {\n    apps.forEach(app => {\n        app.unmount();\n    });\n    apps.clear();\n    $('#chat')\n        .children(\".mes[is_user='false'][is_system='false']\")\n        .each((_index, node) => {\n        const message_id = $(node).attr('mesid');\n        try {\n            if (message_id) {\n                renderOneMessage(parseInt(message_id));\n            }\n        }\n        catch (error) {\n            /** empty */\n        }\n    });\n}\nexport function initRoleplayOptions() {\n    const { destroy } = injectStyle();\n    renderAllMessage();\n    eventOn(tavern_events.CHAT_CHANGED, errorCatched(renderAllMessage));\n    eventOn(tavern_events.CHARACTER_MESSAGE_RENDERED, errorCatched(renderOneMessage));\n    eventOn(tavern_events.MESSAGE_UPDATED, errorCatched(renderOneMessage));\n    eventOn(tavern_events.MESSAGE_SWIPED, errorCatched(renderOneMessage));\n    eventOn(tavern_events.MESSAGE_DELETED, () => setTimeout(errorCatched(renderAllMessage), 1000));\n    return {\n        destroy: () => {\n            $(`pre:contains(\"${TAG}\")`).each(function () {\n                const $th_render = $(this).parent('.TH-render');\n                if ($th_render.length > 0) {\n                    $th_render.removeClass('hidden!');\n                }\n                else {\n                    $(this).removeClass('hidden!');\n                }\n            });\n            apps.forEach(app => {\n                app?.unmount();\n            });\n            destroy();\n        },\n    };\n}\n","import { useConfigStore } from '../store';\nimport light_css from './äº®è‰².css?raw';\nimport dark_css from './æš—è‰².css?raw';\nexport function injectStyle() {\n    const store = useConfigStore();\n    const get_css = () => (store.config.æ ·å¼ä¸»é¢˜ === 'æš—è‰²' ? dark_css : light_css);\n    $(`<div>`).attr('script_id', getScriptId()).append(`<style roleplay_options>${get_css()}</style>`).appendTo('head');\n    const stop = watch(() => store.config.æ ·å¼ä¸»é¢˜, () => $(`head > div[script_id=\"${getScriptId()}\"]`).find('style[roleplay_options]').text(get_css()));\n    return {\n        destroy: () => {\n            stop();\n            $(`head > div[script_id=\"${getScriptId()}\"]`).remove();\n        },\n    };\n}\n","import { waitUntil } from 'async-wait-until';\nimport './misc/mvu';\nimport './misc/å˜é‡ç»“æ„';\nimport { initButtons } from './misc/æŒ‰é’®';\nimport { checkUpdate } from './misc/æ›´æ–°è§’è‰²å¡';\nimport { initStyle } from './misc/æ ·å¼åŠ è½½';\nimport { initPrefetches } from './misc/èµ„æºé¢„è½½';\nimport { useConfigStore } from './store';\nimport { initRoleplayOptions } from './é€‰æ‹©æ¡†/index';\nconst pinia = createPinia();\nsetActivePinia(pinia);\n$(async () => {\n    await waitUntil(() => getCharWorldbookNames('current').primary !== null);\n    await checkUpdate();\n    await useConfigStore()._wait_init;\n    const destroy_list = [];\n    destroy_list.push(initButtons().destroy);\n    destroy_list.push(initStyle().destroy);\n    destroy_list.push(initPrefetches().destroy);\n    destroy_list.push(initRoleplayOptions().destroy);\n    $(window).on('pagehide', () => destroy_list.forEach(destory => destory()));\n});\n","import { compare } from 'compare-versions';\nimport { CHARACTER_NAME, WORLDBOOK_NAME } from '../constant';\n\nexport async function checkUpdate() {\n  const worldbook = await getWorldbook(WORLDBOOK_NAME);\n  const is_new = worldbook.some(entry => entry.name.includes('ä¸‹ä¸€å›åˆç•Œé¢é€‰æ‹©'));\n  if (is_new) {\n    return;\n  }\n  await importRawCharacter(\n    CHARACTER_NAME,\n    await fetch('https://testingcf.jsdelivr.net/gh/lolo-desu/lolocard/src/æ—¥è®°ç»œç»œ/ç™½åŒ–è“æŸ“çš„æ—¥è®°æœ¬.png').then(\n      response => response.blob(),\n    ),\n  );\n  if (compare(getTavernVersion(), '4.3.18', '<')) {\n    SillyTavern.saveWorldInfo(\n      WORLDBOOK_NAME,\n      JSON.parse(\n        await fetch('https://testingcf.jsdelivr.net/gh/lolo-desu/lolocard/src/æ—¥è®°ç»œç»œ/ä¸–ç•Œä¹¦/æ—¥è®°ç»œç»œ.json').then(\n          response => response.text(),\n        ),\n      ),\n      true,\n    );\n  }\n  toastr.success('è§’è‰²å¡è‡ªåŠ¨æ›´æ–°æˆåŠŸ, å‡†å¤‡åˆ·æ–°é¡µé¢ä»¥ç”Ÿæ•ˆ...', 'ç™½åŒ–è“æŸ“çš„æ—¥è®°æœ¬');\n  setTimeout(() => triggerSlash('/reload-page'), 3000);\n}\n","import style from './æ ·å¼åŠ è½½.css?raw';\n\nexport function initStyle() {\n  $('<div>').attr('script_id', getScriptId()).append($('<style>').text(style)).appendTo('head');\n  return { destroy: () => $(`head > div[script_id=${getScriptId()}]`).remove() };\n}\n","import assets from './èµ„æºé¢„è½½.json';\n\nexport function initPrefetches() {\n  Promise.allSettled(\n    assets.map(\n      asset =>\n        new Promise(resolve => {\n          const img = new Image();\n          img.onload = resolve;\n          img.onerror = resolve;\n          img.src = asset;\n        }),\n    ),\n  );\n  return { destroy: () => {} };\n}\n"],"names":["z","Schema","object","enum","prefault","templateLiteral","coerce","number","optional","string","literal","boolean","transform","data","minutes","split","map","Number","reduce","sum","current","discriminatedUnion","nonnegative","v","_","clamp","$","buttons","name","function","async","time","triggerSlash","JSON","stringify","Object","keys","has","place","subplace","includes","initButtons","expected_qr","parse","delete_qr","forEach","button","eventOn","getButtonEvent","appendInexistentScriptButtons","visible","destroy","replaceScriptButtons","getScriptButtons","filter","some","b","WORLDBOOK_NAME","Vue","Config","useConfigStore","errorCatched","config","ref","reloadConfig","worldbook","getWorldbook","getEntryState","find","entry","enabled","old_confg","value","new_config","isEqual","insertOrAssignVariables","type","_wait_init","tavern_events","WORLDINFO_UPDATED","lorebook","CHAT_CHANGED","readonly","_hoisted_1","class","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_5","__name","props","messageId","options","setup","__props","store","_ctx","_cache","option","key","title","tabindex","onClick","$event","item","getLastMessageId","content","apps","Map","TAG","REGEX","renderOneMessage","message_id","chat_messages","getChatMessages","length","match","message","numbered_message_id","get","unmount","$mes_text","retrieveDisplayedMessage","$to_render","$th_render","parent","addClass","app","createApp","RoleplayOptions","matchAll","replace","use","set","possible_div","getScriptId","mount","attr","appendTo","renderAllMessage","clear","children","each","_index","node","parseInt","error","initRoleplayOptions","get_css","append","stop","watch","text","remove","injectStyle","CHARACTER_MESSAGE_RENDERED","MESSAGE_UPDATED","MESSAGE_SWIPED","MESSAGE_DELETED","setTimeout","this","removeClass","getCharWorldbookNames","primary","importRawCharacter","fetch","then","response","blob","getTavernVersion","SillyTavern","saveWorldInfo","toastr","success","checkUpdate","destroy_list","push","Promise","allSettled","asset","resolve","img","Image","onload","onerror","src","window","on","destory"],"ignoreList":[],"sourceRoot":""}