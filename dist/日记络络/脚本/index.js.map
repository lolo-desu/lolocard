{"version":3,"file":"index.js","mappings":"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","sources":["src://tavern_helper_template/external var \"z\"","src://tavern_helper_template/src/æ—¥è®°ç»œç»œ/schema.ts","src://tavern_helper_template/src/æ—¥è®°ç»œç»œ/è„šæœ¬/misc/å˜é‡ç»“æ„.ts","src://tavern_helper_template/src/æ—¥è®°ç»œç»œ/è„šæœ¬/misc/æŒ‰é’®.ts","src://tavern_helper_template/src/æ—¥è®°ç»œç»œ/è„šæœ¬/constant.ts","src://tavern_helper_template/external var \"Vue\"","src://tavern_helper_template/src/æ—¥è®°ç»œç»œ/è„šæœ¬/store.ts","src://tavern_helper_template/src/æ—¥è®°ç»œç»œ/è„šæœ¬/é€‰æ‹©æ¡†/RoleplayOptions.vue","webpack://tavern_helper_template/src/æ—¥è®°ç»œç»œ/è„šæœ¬/é€‰æ‹©æ¡†/RoleplayOptions.vue?1c3a","src://tavern_helper_template/src/æ—¥è®°ç»œç»œ/è„šæœ¬/é€‰æ‹©æ¡†/index.ts","src://tavern_helper_template/src/æ—¥è®°ç»œç»œ/è„šæœ¬/é€‰æ‹©æ¡†/style.ts","src://tavern_helper_template/src/æ—¥è®°ç»œç»œ/è„šæœ¬/index.ts","src://tavern_helper_template/src/æ—¥è®°ç»œç»œ/è„šæœ¬/misc/æ›´æ–°è§’è‰²å¡.ts","src://tavern_helper_template/src/æ—¥è®°ç»œç»œ/è„šæœ¬/misc/æ ·å¼åŠ è½½.ts","src://tavern_helper_template/src/æ—¥è®°ç»œç»œ/è„šæœ¬/misc/èµ„æºé¢„è½½.ts"],"sourcesContent":["const __WEBPACK_NAMESPACE_OBJECT__ = z;","export const Schema = z.object({\n    ä¸–ç•Œ: z.object({\n        å½“å‰æ˜ŸæœŸ: z.string(),\n        å½“å‰æ—¥æœŸ: z.string(),\n        å½“å‰æ—¶é—´é˜¶æ®µ: z.number().prefault(1),\n        ä¸‹æ¬¡å“åº”ç•Œé¢é€‰æ‹©åˆ¤æ–­: z\n            .union([z.literal(0), z.literal(1), z.literal(2), z.literal(3)])\n            .prefault(0)\n            .catch(0),\n        å½“å‰ä¸»çº¿äº‹ä»¶ID: z.string().prefault('æ— ').catch('æ— '),\n        å½“å‰ä¸»çº¿äº‹ä»¶é˜¶æ®µ: z.number().prefault(0).catch(0),\n        å½“å‰ä¸»çº¿æ•…äº‹å¤§çº²: z.string().prefault('æ— ').catch('æ— '),\n        ä¸»çº¿äº‹ä»¶å†·å´è®¡æ•°: z.number().prefault(0).catch(0),\n    }),\n    ç»œç»œ: z.object({\n        äº²å¯†åº¦: z.number(),\n        é˜…è¯»æ—¥è®°æ•°é‡: z.number().int().nonnegative(),\n        æ‹¥æœ‰è”ç³»æ–¹å¼: z.boolean().prefault(false),\n    }),\n});\n","import { registerMvuSchema } from 'https://testingcf.jsdelivr.net/gh/StageDog/tavern_resource/dist/util/mvu_zod.js';\nimport { Schema } from '../../schema';\n\n$(() => {\n  registerMvuSchema(Schema);\n});\n","async function delete_qr() {\n  const qrs: string[] = JSON.parse(await triggerSlash('/qr-set-list'));\n  const expected_qr = 'çº¯ç™½è‰²çš„å›å“';\n  if (qrs.includes(expected_qr)) {\n    triggerSlash(`/qr-set-delete ${expected_qr}`);\n  }\n}\n\ninterface Button {\n  name: string;\n  function: (() => void) | (() => Promise<void>);\n}\n\nconst buttons: Button[] = [\n  {\n    name: 'ğŸ•›åº¦è¿‡',\n    function: async () => {\n      const data = {\n        æ™¨é—´: \"å…ˆæå†™ç»“æŸå½“å‰åœºæ™¯çš„å‰§æƒ…å†å¿«é€Ÿå°†æ—¶é—´è°ƒæ•´åˆ°ä¸‹ä¸ªæ™¨é—´\\n<UpdateVariable>\\n_.set('ä¸–ç•Œ.å½“å‰æ—¶é—´é˜¶æ®µ', 1);\\n</UpdateVariable>\",\n        è¯¾ä¸Š: \"å…ˆæå†™ç»“æŸå½“å‰åœºæ™¯çš„å‰§æƒ…å†å¿«é€Ÿå°†æ—¶é—´è°ƒæ•´åˆ°ä¸‹ä¸ªè¯¾ä¸Š\\n<UpdateVariable>\\n_.set('ä¸–ç•Œ.å½“å‰æ—¶é—´é˜¶æ®µ', 18);\\n</UpdateVariable>\",\n        åˆä¼‘: \"å…ˆæå†™ç»“æŸå½“å‰åœºæ™¯çš„å‰§æƒ…å†å¿«é€Ÿå°†æ—¶é—´è°ƒæ•´åˆ°ä¸‹ä¸ªåˆä¼‘\\n<UpdateVariable>\\n_.set('ä¸–ç•Œ.å½“å‰æ—¶é—´é˜¶æ®µ', 32);\\n</UpdateVariable>\",\n        æ”¾å­¦å:\n          \"å…ˆæå†™ç»“æŸå½“å‰åœºæ™¯çš„å‰§æƒ…å†å¿«é€Ÿå°†æ—¶é—´è°ƒæ•´åˆ°ä¸‹ä¸ªæ”¾å­¦å\\n<UpdateVariable>\\n_.set('ä¸–ç•Œ.å½“å‰æ—¶é—´é˜¶æ®µ', 49);\\n</UpdateVariable>\",\n        å¤œé—´: \"å…ˆæå†™ç»“æŸå½“å‰åœºæ™¯çš„å‰§æƒ…å†å¿«é€Ÿå°†æ—¶é—´è°ƒæ•´åˆ°ä¸‹ä¸ªå¤œé—´\\n<UpdateVariable>\\n_.set('ä¸–ç•Œ.å½“å‰æ—¶é—´é˜¶æ®µ', 66);\\n</UpdateVariable>\",\n        å‡æ—¥: \"å…ˆæå†™ç»“æŸå½“å‰åœºæ™¯çš„å‰§æƒ…å†å¿«é€Ÿå°†æ—¶é—´è°ƒæ•´åˆ°ä¸‹ä¸ªå‡æ—¥\\n<UpdateVariable>\\n_.set('ä¸–ç•Œ.å½“å‰æ—¶é—´é˜¶æ®µ', 83);\\n</UpdateVariable>\",\n        ç¬¬äºŒå¤©:\n          \"å…ˆæå†™ç»“æŸå½“å‰åœºæ™¯çš„å‰§æƒ…å†å¿«é€Ÿå°†æ—¶é—´è°ƒæ•´åˆ°ç¬¬äºŒå¤©ï¼Œå¹¶è°ƒæ•´å½“å‰æ—¶é—´é˜¶æ®µå˜é‡åˆ°æ¥ä¸‹æ¥æ•…äº‹æƒ…èŠ‚æœ€æœ‰æ„ä¹‰çš„æ—¶é—´ï¼Œä¸‹ä¸€æ¬¡å“åº”çš„æ—¶é—´é˜¶æ®µå˜é‡è°ƒæ•´æ²¡æœ‰ä»»ä½•é™åˆ¶\\n<UpdateVariable>\\n_.set('ä¸–ç•Œ.å½“å‰æ—¶é—´é˜¶æ®µ', 1);\\n</UpdateVariable>\",\n      };\n\n      const time = await triggerSlash(`/buttons labels=${JSON.stringify(Object.keys(data))} æ—¶é—´æ¥åˆ°äº†...`);\n      if (!_.has(data, time)) {\n        return;\n      }\n\n      await triggerSlash(`/send ${data[time as keyof typeof data]} || /trigger`);\n    },\n  },\n  {\n    name: 'ğŸ—ºï¸åœ°ç‚¹',\n    function: async () => {\n      const data: Record<string, { æ—ç™½: string; åœ°ç‚¹: string[] }> = {\n        ä½å®…: { æ—ç™½: 'å›å®¶ï¼', åœ°ç‚¹: ['ä½æ‰€ç„å…³', 'ä½æ‰€å®¢å…', 'æˆ¿é—´'] },\n        å­¦æ ¡: {\n          æ—ç™½: 'å»å­¦æ ¡å—...',\n          åœ°ç‚¹: ['ä¸Šå­¦è·¯ä¸Š', 'å­¦æ ¡æ•™å­¦æ¥¼æ­£é—¨å‰', 'æ•™å®¤', 'å­¦æ ¡ä¸­åº­', 'å­¦æ ¡å¤–ä¾§æ¥¼æ¢¯', 'å­¦æ ¡å±‹é¡¶'],\n        },\n        åŸé•‡ä¸è¡—é“: {\n          æ—ç™½: 'å»é€›é€›å‘¢...',\n          åœ°ç‚¹: ['åŸé•‡è¡—é“ä¸Š', 'ä½å®…è¡—', 'å•†åº—è¡—', 'æ‹±å»Šå•†åº—è¡—', 'ç¹åå•†ä¸šè¡—', 'åŸå¸‚ä¸­çš„é“è·¯é“å£'],\n        },\n        å•†ä¸šè®¾æ–½: {\n          æ—ç™½: 'å»çº¦ä¼šå—w...',\n          åœ°ç‚¹: [\n            'ä¾¿åˆ©åº—å†…',\n            'ä¹¦åº—å†…',\n            'å’–å•¡å…',\n            'å®¶åº­é¤å…',\n            'è´­ç‰©ä¸­å¿ƒ',\n            'è´­ç‰©ä¸­å¿ƒäºŒå±‚',\n            'ç¾æœ¯é¦†',\n            'åœ°é“ç«™å†…',\n            'åœ°é“å†…',\n            'åº™ä¼šå°åƒè¡—',\n          ],\n        },\n        æˆ·å¤–: {\n          æ—ç™½: 'é”»ç‚¼èº«ä½“...?',\n          åœ°ç‚¹: ['å…¬å›­', 'å…¬å›­å‡‰äº­', 'å…¬å›­å•†åº—äº­', 'æ²³æ—', 'æµ·æ»©'],\n        },\n      };\n\n      const place = await triggerSlash(`/buttons labels=${JSON.stringify(Object.keys(data))} {{user}}å°†åŠ¨èº«å‰å¾€...`);\n      if (!_.has(data, place)) {\n        return;\n      }\n\n      const { æ—ç™½, åœ°ç‚¹ } = data[place];\n      const subplace = await triggerSlash(`/buttons labels=${JSON.stringify(åœ°ç‚¹)} <small>${æ—ç™½}<small>`);\n      if (!åœ°ç‚¹.includes(subplace)) {\n        return;\n      }\n\n      triggerSlash(\n        `/send <!--äºæœ¬æ¬¡å“åº”éœ€è¦æå†™ç»“æŸå½“å‰åœºæ™¯çš„å‰§æƒ…å†å†™å‡ºç†ç”±å‰å¾€ä¸‹ä¸€ä¸ªåœ°ç‚¹-->[ç§»åŠ¨] {{user}}å‰å¾€äº†${subplace}\\n<UpdateVariable>\\n_.set('ä¸–ç•Œ.ä¸‹æ¬¡å“åº”ç•Œé¢é€‰æ‹©åˆ¤æ–­', 0);\\n</UpdateVariable> || /trigger`,\n      );\n    },\n  },\n];\n\nexport function initButtons() {\n  delete_qr();\n  buttons.forEach(button => eventOn(getButtonEvent(button.name), button.function));\n  appendInexistentScriptButtons(buttons.map(button => ({ name: button.name, visible: true })));\n  return {\n    destroy: () => replaceScriptButtons(getScriptButtons().filter(button => buttons.some(b => b.name === button.name))),\n  };\n}\n","export const CHARACTER_NAME = 'ç™½åŒ–è“æŸ“çš„æ—¥è®°æœ¬' as const;\nexport const WORLDBOOK_NAME = 'ä¸Šé”çš„æ—¥è®°æœ¬' as const;\n","const __WEBPACK_NAMESPACE_OBJECT__ = Vue;","import { WORLDBOOK_NAME } from './constant';\nconst Config = z.object({\n    ä¸»è§’æ€§åˆ«: z.enum(['ç”·', 'å¥³']).prefault('ç”·'),\n    æ ·å¼ä¸»é¢˜: z.enum(['æš—è‰²', 'äº®è‰²']).prefault('æš—è‰²'),\n    é€‰æ‹©æ¡†è§¦å‘æ–¹å¼: z.enum(['ç›´æ¥å‘é€', 'è¦†ç›–è¾“å…¥']).prefault('ç›´æ¥å‘é€'),\n});\nexport const useConfigStore = defineStore('config', errorCatched(() => {\n    const config = ref(Config.parse({}));\n    const reloadConfig = async () => {\n        const worldbook = await getWorldbook(WORLDBOOK_NAME);\n        const getEntryState = (name) => worldbook.find(entry => entry.name.includes(name))?.enabled ?? false;\n        const old_confg = klona(config.value);\n        const new_config = Config.parse({\n            ä¸»è§’æ€§åˆ«: getEntryState('ä¸»è§’æ€§åˆ«') ? 'ç”·' : 'å¥³',\n            æ ·å¼ä¸»é¢˜: getEntryState('æ ·å¼ä¸»é¢˜') ? 'æš—è‰²' : 'äº®è‰²',\n            é€‰æ‹©æ¡†è§¦å‘æ–¹å¼: getEntryState('é€‰æ‹©æ¡†è§¦å‘æ–¹å¼') ? 'ç›´æ¥å‘é€' : 'è¦†ç›–è¾“å…¥',\n        });\n        if (!_.isEqual(new_config, old_confg)) {\n            config.value = klona(new_config);\n        }\n        insertOrAssignVariables(klona(new_config), { type: 'chat' });\n    };\n    const _wait_init = reloadConfig();\n    eventOn(tavern_events.WORLDINFO_UPDATED, async (lorebook) => {\n        if (lorebook === WORLDBOOK_NAME) {\n            await reloadConfig();\n        }\n    });\n    eventOn(tavern_events.CHAT_CHANGED, async () => {\n        await reloadConfig();\n    });\n    return { config: readonly(config), _wait_init };\n}));\n","import { defineComponent as _defineComponent } from 'vue';\nimport { renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, createElementVNode as _createElementVNode } from \"vue\";\nconst _hoisted_1 = { class: \"roleplay_options\" };\nconst _hoisted_2 = { class: \"roleplay_options_back\" };\nconst _hoisted_3 = [\"onClick\"];\nconst _hoisted_4 = { class: \"roleplay_options_title\" };\nconst _hoisted_5 = { class: \"roleplay_options_content\" };\nimport { useConfigStore } from '../store';\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'RoleplayOptions',\n    props: {\n        messageId: {},\n        options: {}\n    },\n    setup(__props) {\n        const props = __props;\n        const store = useConfigStore();\n        async function handleClick(item) {\n            if (getLastMessageId() !== props.messageId) {\n                return;\n            }\n            switch (store.config.é€‰æ‹©æ¡†è§¦å‘æ–¹å¼) {\n                case 'ç›´æ¥å‘é€':\n                    triggerSlash(`/send ${item.content} || /trigger`);\n                    break;\n                case 'è¦†ç›–è¾“å…¥':\n                    triggerSlash(`/setinput ${item.content}`);\n                    break;\n            }\n        }\n        return (_ctx, _cache) => {\n            return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n                _createElementVNode(\"div\", _hoisted_2, [\n                    (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(__props.options, (option) => {\n                        return (_openBlock(), _createElementBlock(\"div\", {\n                            key: option.title,\n                            class: \"roleplay_options_item\",\n                            tabindex: \"1\",\n                            onClick: ($event) => (handleClick(option))\n                        }, [\n                            _createElementVNode(\"span\", _hoisted_4, [\n                                _createElementVNode(\"strong\", null, _toDisplayString(option.title), 1 /* TEXT */)\n                            ]),\n                            _cache[0] || (_cache[0] = _createElementVNode(\"hr\", { class: \"roleplay_options_hr\" }, null, -1 /* CACHED */)),\n                            _createElementVNode(\"span\", _hoisted_5, _toDisplayString(option.content), 1 /* TEXT */)\n                        ], 8 /* PROPS */, _hoisted_3));\n                    }), 128 /* KEYED_FRAGMENT */))\n                ])\n            ]));\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./RoleplayOptions.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./RoleplayOptions.vue?vue&type=script&setup=true&lang=ts\"\n\nconst __exports__ = script;\n\nexport default __exports__","import RoleplayOptions from './RoleplayOptions.vue';\nimport { injectStyle } from './style';\nconst apps = new Map();\nconst TAG = '<roleplay_options>';\nconst REGEX = /<(roleplay_options)>\\s*(?:```.*\\n)?((?:(?!<\\1>)[\\s\\S])*?)(?:\\n```)?\\s*<\\/\\1>/im;\nasync function renderOneMessage(message_id) {\n    const chat_messages = getChatMessages(message_id);\n    if (chat_messages.length === 0) {\n        return;\n    }\n    const message = chat_messages[0].message ?? '';\n    const match = message.match(REGEX);\n    if (!match) {\n        return;\n    }\n    const numbered_message_id = Number(message_id);\n    apps.get(numbered_message_id)?.unmount();\n    const $mes_text = retrieveDisplayedMessage(numbered_message_id);\n    const $to_render = $mes_text.find(`pre:contains(\"${TAG}\")`);\n    if ($to_render.length > 0) {\n        const $th_render = $to_render.parent('.TH-render');\n        if ($th_render.length > 0) {\n            $th_render.addClass('hidden!');\n        }\n        else {\n            $to_render.addClass('hidden!');\n        }\n        const app = createApp(RoleplayOptions, {\n            messageId: numbered_message_id,\n            options: [...match[2].matchAll(/(.+?)[:ï¼š]\\s*(.+)/gm)].map(match => ({\n                title: match[1],\n                content: match[2].replace(/^\\$\\{(.+)\\}$/, '$1').replace(/^ã€Œ(.+)ã€$/, '$1'),\n            })),\n        }).use(getActivePinia());\n        apps.set(numbered_message_id, app);\n        const possible_div = $mes_text.find(`div[script_id=\"${getScriptId()}\"]`);\n        app.mount(possible_div.length > 0 ? possible_div[0] : $('<div>').attr('script_id', getScriptId()).appendTo($mes_text)[0]);\n    }\n}\nasync function renderAllMessage() {\n    apps.forEach(app => {\n        app.unmount();\n    });\n    apps.clear();\n    $('#chat')\n        .children(\".mes[is_user='false'][is_system='false']\")\n        .each((_index, node) => {\n        const message_id = $(node).attr('mesid');\n        try {\n            if (message_id) {\n                renderOneMessage(parseInt(message_id));\n            }\n        }\n        catch (error) {\n            /** empty */\n        }\n    });\n}\nexport function initRoleplayOptions() {\n    const { destroy } = injectStyle();\n    renderAllMessage();\n    eventOn(tavern_events.CHAT_CHANGED, errorCatched(renderAllMessage));\n    eventOn(tavern_events.CHARACTER_MESSAGE_RENDERED, errorCatched(renderOneMessage));\n    eventOn(tavern_events.MESSAGE_UPDATED, errorCatched(renderOneMessage));\n    eventOn(tavern_events.MESSAGE_SWIPED, errorCatched(renderOneMessage));\n    eventOn(tavern_events.MESSAGE_DELETED, () => setTimeout(errorCatched(renderAllMessage), 1000));\n    return {\n        destroy: () => {\n            $(`pre:contains(\"${TAG}\")`).each(function () {\n                const $th_render = $(this).parent('.TH-render');\n                if ($th_render.length > 0) {\n                    $th_render.removeClass('hidden!');\n                }\n                else {\n                    $(this).removeClass('hidden!');\n                }\n            });\n            apps.forEach(app => {\n                app?.unmount();\n            });\n            destroy();\n        },\n    };\n}\n","import { useConfigStore } from '../store';\nimport light_css from './äº®è‰².css?raw';\nimport dark_css from './æš—è‰².css?raw';\nexport function injectStyle() {\n    const store = useConfigStore();\n    const get_css = () => (store.config.æ ·å¼ä¸»é¢˜ === 'æš—è‰²' ? dark_css : light_css);\n    $(`<div>`).attr('script_id', getScriptId()).append(`<style roleplay_options>${get_css()}</style>`).appendTo('head');\n    const stop = watch(() => store.config.æ ·å¼ä¸»é¢˜, () => $(`head > div[script_id=\"${getScriptId()}\"]`).find('style[roleplay_options]').text(get_css()));\n    return {\n        destroy: () => {\n            stop();\n            $(`head > div[script_id=\"${getScriptId()}\"]`).remove();\n        },\n    };\n}\n","import { waitUntil } from 'async-wait-until';\nimport './misc/mvu';\nimport './misc/å˜é‡ç»“æ„';\nimport { initButtons } from './misc/æŒ‰é’®';\nimport { initStyle } from './misc/æ ·å¼åŠ è½½';\nimport { initPreloads } from './misc/èµ„æºé¢„è½½';\nimport { useConfigStore } from './store';\nimport { initRoleplayOptions } from './é€‰æ‹©æ¡†/index';\nimport { checkUpdate } from './misc/æ›´æ–°è§’è‰²å¡';\nconst pinia = createPinia();\nsetActivePinia(pinia);\n$(async () => {\n    await waitUntil(() => getCharWorldbookNames('current').primary !== null);\n    await checkUpdate();\n    await useConfigStore()._wait_init;\n    const destroy_list = [];\n    destroy_list.push(initButtons().destroy);\n    destroy_list.push(initStyle().destroy);\n    destroy_list.push(initPreloads().destroy);\n    destroy_list.push(initRoleplayOptions().destroy);\n    $(window).on('pagehide', () => destroy_list.forEach(destory => destory()));\n});\n","import { compare } from 'compare-versions';\nimport { CHARACTER_NAME, WORLDBOOK_NAME } from '../constant';\n\nexport async function checkUpdate() {\n  const worldbook = await getWorldbook(WORLDBOOK_NAME);\n  const is_new = worldbook.some(entry => entry.name.includes('æ ·å¼ä¸»é¢˜'));\n  if (is_new) {\n    return;\n  }\n  await importRawCharacter(\n    CHARACTER_NAME,\n    await fetch('https://testingcf.jsdelivr.net/gh/lolo-desu/lolocard/src/æ—¥è®°ç»œç»œ/ç™½åŒ–è“æŸ“çš„æ—¥è®°æœ¬.png').then(\n      response => response.blob(),\n    ),\n  );\n  if (compare(getTavernVersion(), '4.3.18', '<')) {\n    SillyTavern.saveWorldInfo(\n      WORLDBOOK_NAME,\n      JSON.parse(\n        await fetch('https://testingcf.jsdelivr.net/gh/lolo-desu/lolocard/src/æ—¥è®°ç»œç»œ/ä¸–ç•Œä¹¦/æ—¥è®°ç»œç»œ.json').then(\n          response => response.text(),\n        ),\n      ),\n      true,\n    );\n  }\n  toastr.success('è§’è‰²å¡è‡ªåŠ¨æ›´æ–°æˆåŠŸ, å‡†å¤‡åˆ·æ–°é¡µé¢ä»¥ç”Ÿæ•ˆ...', 'ç™½åŒ–è“æŸ“çš„æ—¥è®°æœ¬');\n  setTimeout(() => triggerSlash('/reload-page'), 3000);\n}\n","import style from './æ ·å¼åŠ è½½.css?raw';\n\nexport function initStyle() {\n  $('<div>').attr('script_id', getScriptId()).append($('<style>').text(style)).appendTo('head');\n  return { destroy: () => $(`head > div[script_id=${getScriptId()}]`).remove() };\n}\n","import assets from './èµ„æºé¢„è½½.json';\n\nexport function initPreloads() {\n  $('<div>')\n    .attr('script_id', getScriptId())\n    .append(\n      assets.map(asset =>\n        $('<link>').attr({\n          rel: 'preload',\n          as: 'image',\n          href: asset,\n        }),\n      ),\n    )\n    .appendTo('head');\n  return { destroy: () => $(`head > div[script_id=${getScriptId()}]`).remove() };\n}\n"],"names":["z","Schema","object","string","number","prefault","union","literal","catch","int","nonnegative","boolean","$","buttons","name","function","async","data","time","triggerSlash","JSON","stringify","Object","keys","_","has","place","subplace","includes","initButtons","expected_qr","parse","delete_qr","forEach","button","eventOn","getButtonEvent","appendInexistentScriptButtons","map","visible","destroy","replaceScriptButtons","getScriptButtons","filter","some","b","WORLDBOOK_NAME","Vue","Config","enum","useConfigStore","errorCatched","config","ref","reloadConfig","worldbook","getWorldbook","getEntryState","find","entry","enabled","old_confg","value","new_config","isEqual","insertOrAssignVariables","type","_wait_init","tavern_events","WORLDINFO_UPDATED","lorebook","CHAT_CHANGED","readonly","_hoisted_1","class","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_5","__name","props","messageId","options","setup","__props","store","_ctx","_cache","option","key","title","tabindex","onClick","$event","item","getLastMessageId","content","apps","Map","TAG","REGEX","renderOneMessage","message_id","chat_messages","getChatMessages","length","match","message","numbered_message_id","Number","get","unmount","$mes_text","retrieveDisplayedMessage","$to_render","$th_render","parent","addClass","app","createApp","RoleplayOptions","matchAll","replace","use","set","possible_div","getScriptId","mount","attr","appendTo","renderAllMessage","clear","children","each","_index","node","parseInt","error","initRoleplayOptions","get_css","append","stop","watch","text","remove","injectStyle","CHARACTER_MESSAGE_RENDERED","MESSAGE_UPDATED","MESSAGE_SWIPED","MESSAGE_DELETED","setTimeout","this","removeClass","getCharWorldbookNames","primary","importRawCharacter","fetch","then","response","blob","getTavernVersion","SillyTavern","saveWorldInfo","toastr","success","checkUpdate","destroy_list","push","asset","rel","as","href","window","on","destory"],"ignoreList":[],"sourceRoot":""}