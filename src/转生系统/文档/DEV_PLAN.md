# 异世界系统状态栏开发目标

1. **数据管线与类型约束**
   - 依据 `../nova-creator-cli/作品/转生系统/[InitVar]初始化.yaml` 定义 `stat_data` 的 TypeScript 类型。
   - 建立统一的数据读取/写入服务，使用酒馆助手暴露的 `getVariables` 与 `updateVariablesWith` API 读取最新楼层变量并写回。
   - 提供自动轮询与手动刷新机制，保证状态栏与最新 `stat_data` 保持同步。

2. **信息展示**
   - 世界：显示当前时间、地点，并突出世界提示。
   - 主角：姓名、基础信息（性别/年龄）、外貌描述、自评、六维属性（数值+自评）、装备栏、物品栏（分页或可滚动列表）。
   - 系统状态：模式、可用积分、当前提示、系统形象、玩家 ID。
   - 任务列表：按任务类型分组展示任务说明/目标/奖励/惩罚以及完成状态占位。
   - 商城：商品卡片展示名称、描述、主角评价与积分价格。

3. **交互功能（右下角四个浮动按钮 + 对应弹窗）**
   - 发布任务：表单支持任务类型（主线/支线/每日/临危受命）、任务名、说明、目标、奖励、惩罚；提交后写入 `stat_data.任务列表`。
   - 发布奖励：输入奖励名称、描述、主角评价，可选择放入 `主角.物品栏` 或直接增加 `系统状态.可用积分`。
   - 创建商城：快速新增商城条目（名称、描述、主角评价、价格），同时允许批量导入/编辑。
   - 直接沟通：输入即刻提示或对话，写入 `系统状态.当前提示`，并可选是否同步到聊天（预留钩子）。

4. **技术栈与体验**
   - 采用 Vue 3 + `<script setup lang="ts">` + SCSS 模块化，局部组件化，并保持样式与示例 HTML 的像素风格一致。
   - 支持 jQuery/jQueryUI 但保持核心逻辑在 Vue 中；lodash 仅用于深拷贝和对象路径操作。
   - 使用响应式断点 + CSS 变量支持不同嵌入宽度；主界面固定右下角，可拖动/收起。
   - 代码、自定义样式、类型、组件全部位于 `src/转生系统/状态栏` 目录中，便于独立维护与打包。
