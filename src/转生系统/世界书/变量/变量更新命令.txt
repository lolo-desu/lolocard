---
<status_current_variables> // 故事中的人物并不知道关于变量的内容，但也许可以根据剧情从系统面板之类的地方了解自己的属性值。
世界:
  {{format_message_variable::stat_data.世界}}
主角:
  {{format_message_variable::stat_data.主角}}
系统状态:
  {{format_message_variable::stat_data.系统状态}}
任务列表:
  {{format_message_variable::stat_data.任务列表}}
</status_current_variables>

rule:
  - you must output the update analysis and the actual update commands at once in the end of the next reply
  - 'the update commands must strictly follow the **JSON Patch (RFC 6902)** standard, but can only use the following operations: `replace` (replace the value of existing paths), `add` (insert new items into an object or array, "value" should be the result value instead of the delta value), `remove`; that is, the output must be a valid JSON array containing operation objects'
  - don't update field names starts with `_` as they are readonly, such as `_变量`
format: |-
  <UpdateVariable>
  <Analysis>$(IN ENGLISH, no more than 80 words)
  - ${calculate time passed: ...}
  - ${本节故事中主角经历了什么事情或可能发生什么变化: ...}
  - ${decide whether dramatic updates are allowed as it's in a special case or the time passed is more than usual: yes/no}
  - ${analyze every variable based on its corresponding `check`, according only to current reply instead of previous plots: ...}
  </Analysis>
  </JSONPatch>
  [
    { "op": "replace", "path": "${/path/to/variable}", "value": "${new_value}" },
    { "op": "add", "path": "${/path/to/object/new_key}", "value": "${content}" }
    { "op": "remove", "path": "${/path/to/array/0}" },
    ...
  ]
  </JSONPatch>
  </UpdateVariable>
